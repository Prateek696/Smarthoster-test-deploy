function $v(t,r){for(var s=0;s<r.length;s++){const a=r[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var NA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $m={exports:{}},cu={},Vm={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Vv(){if(Qg)return Jt;Qg=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function N(ee){return ee===null||typeof ee!="object"?null:(ee=v&&ee[v]||ee["@@iterator"],typeof ee=="function"?ee:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function S(ee,D,te){this.props=ee,this.context=D,this.refs=C,this.updater=te||y}S.prototype.isReactComponent={},S.prototype.setState=function(ee,D){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,D,"setState")},S.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function L(){}L.prototype=S.prototype;function P(ee,D,te){this.props=ee,this.context=D,this.refs=C,this.updater=te||y}var E=P.prototype=new L;E.constructor=P,k(E,S.prototype),E.isPureReactComponent=!0;var M=Array.isArray,z=Object.prototype.hasOwnProperty,he={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function J(ee,D,te){var se,fe={},V=null,ye=null;if(D!=null)for(se in D.ref!==void 0&&(ye=D.ref),D.key!==void 0&&(V=""+D.key),D)z.call(D,se)&&!X.hasOwnProperty(se)&&(fe[se]=D[se]);var ie=arguments.length-2;if(ie===1)fe.children=te;else if(1<ie){for(var ge=Array(ie),de=0;de<ie;de++)ge[de]=arguments[de+2];fe.children=ge}if(ee&&ee.defaultProps)for(se in ie=ee.defaultProps,ie)fe[se]===void 0&&(fe[se]=ie[se]);return{$$typeof:t,type:ee,key:V,ref:ye,props:fe,_owner:he.current}}function G(ee,D){return{$$typeof:t,type:ee.type,key:D,ref:ee.ref,props:ee.props,_owner:ee._owner}}function pe(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function I(ee){var D={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(te){return D[te]})}var U=/\/+/g;function B(ee,D){return typeof ee=="object"&&ee!==null&&ee.key!=null?I(""+ee.key):D.toString(36)}function W(ee,D,te,se,fe){var V=typeof ee;(V==="undefined"||V==="boolean")&&(ee=null);var ye=!1;if(ee===null)ye=!0;else switch(V){case"string":case"number":ye=!0;break;case"object":switch(ee.$$typeof){case t:case r:ye=!0}}if(ye)return ye=ee,fe=fe(ye),ee=se===""?"."+B(ye,0):se,M(fe)?(te="",ee!=null&&(te=ee.replace(U,"$&/")+"/"),W(fe,D,te,"",function(de){return de})):fe!=null&&(pe(fe)&&(fe=G(fe,te+(!fe.key||ye&&ye.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+ee)),D.push(fe)),1;if(ye=0,se=se===""?".":se+":",M(ee))for(var ie=0;ie<ee.length;ie++){V=ee[ie];var ge=se+B(V,ie);ye+=W(V,D,te,ge,fe)}else if(ge=N(ee),typeof ge=="function")for(ee=ge.call(ee),ie=0;!(V=ee.next()).done;)V=V.value,ge=se+B(V,ie++),ye+=W(V,D,te,ge,fe);else if(V==="object")throw D=String(ee),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ye}function Y(ee,D,te){if(ee==null)return ee;var se=[],fe=0;return W(ee,se,"","",function(V){return D.call(te,V,fe++)}),se}function le(ee){if(ee._status===-1){var D=ee._result;D=D(),D.then(function(te){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=te)},function(te){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=te)}),ee._status===-1&&(ee._status=0,ee._result=D)}if(ee._status===1)return ee._result.default;throw ee._result}var F={current:null},Z={transition:null},be={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:Z,ReactCurrentOwner:he};function Ae(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:Y,forEach:function(ee,D,te){Y(ee,function(){D.apply(this,arguments)},te)},count:function(ee){var D=0;return Y(ee,function(){D++}),D},toArray:function(ee){return Y(ee,function(D){return D})||[]},only:function(ee){if(!pe(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Jt.Component=S,Jt.Fragment=s,Jt.Profiler=o,Jt.PureComponent=P,Jt.StrictMode=a,Jt.Suspense=h,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,Jt.act=Ae,Jt.cloneElement=function(ee,D,te){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var se=k({},ee.props),fe=ee.key,V=ee.ref,ye=ee._owner;if(D!=null){if(D.ref!==void 0&&(V=D.ref,ye=he.current),D.key!==void 0&&(fe=""+D.key),ee.type&&ee.type.defaultProps)var ie=ee.type.defaultProps;for(ge in D)z.call(D,ge)&&!X.hasOwnProperty(ge)&&(se[ge]=D[ge]===void 0&&ie!==void 0?ie[ge]:D[ge])}var ge=arguments.length-2;if(ge===1)se.children=te;else if(1<ge){ie=Array(ge);for(var de=0;de<ge;de++)ie[de]=arguments[de+2];se.children=ie}return{$$typeof:t,type:ee.type,key:fe,ref:V,props:se,_owner:ye}},Jt.createContext=function(ee){return ee={$$typeof:d,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:l,_context:ee},ee.Consumer=ee},Jt.createElement=J,Jt.createFactory=function(ee){var D=J.bind(null,ee);return D.type=ee,D},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(ee){return{$$typeof:u,render:ee}},Jt.isValidElement=pe,Jt.lazy=function(ee){return{$$typeof:p,_payload:{_status:-1,_result:ee},_init:le}},Jt.memo=function(ee,D){return{$$typeof:m,type:ee,compare:D===void 0?null:D}},Jt.startTransition=function(ee){var D=Z.transition;Z.transition={};try{ee()}finally{Z.transition=D}},Jt.unstable_act=Ae,Jt.useCallback=function(ee,D){return F.current.useCallback(ee,D)},Jt.useContext=function(ee){return F.current.useContext(ee)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(ee){return F.current.useDeferredValue(ee)},Jt.useEffect=function(ee,D){return F.current.useEffect(ee,D)},Jt.useId=function(){return F.current.useId()},Jt.useImperativeHandle=function(ee,D,te){return F.current.useImperativeHandle(ee,D,te)},Jt.useInsertionEffect=function(ee,D){return F.current.useInsertionEffect(ee,D)},Jt.useLayoutEffect=function(ee,D){return F.current.useLayoutEffect(ee,D)},Jt.useMemo=function(ee,D){return F.current.useMemo(ee,D)},Jt.useReducer=function(ee,D,te){return F.current.useReducer(ee,D,te)},Jt.useRef=function(ee){return F.current.useRef(ee)},Jt.useState=function(ee){return F.current.useState(ee)},Jt.useSyncExternalStore=function(ee,D,te){return F.current.useSyncExternalStore(ee,D,te)},Jt.useTransition=function(){return F.current.useTransition()},Jt.version="18.3.1",Jt}var Xg;function Tf(){return Xg||(Xg=1,Vm.exports=Vv()),Vm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function Hv(){if(Zg)return cu;Zg=1;var t=Tf(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,m){var p,v={},N=null,y=null;m!==void 0&&(N=""+m),h.key!==void 0&&(N=""+h.key),h.ref!==void 0&&(y=h.ref);for(p in h)a.call(h,p)&&!l.hasOwnProperty(p)&&(v[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)v[p]===void 0&&(v[p]=h[p]);return{$$typeof:r,type:u,key:N,ref:y,props:v,_owner:o.current}}return cu.Fragment=s,cu.jsx=d,cu.jsxs=d,cu}var ex;function Wv(){return ex||(ex=1,$m.exports=Hv()),$m.exports}var e=Wv(),R=Tf();const Ln=P1(R),Gv=$v({__proto__:null,default:Ln},[R]);var Dh={},Hm={exports:{}},Gn={},Wm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function Kv(){return tx||(tx=1,(function(t){function r(Z,be){var Ae=Z.length;Z.push(be);e:for(;0<Ae;){var ee=Ae-1>>>1,D=Z[ee];if(0<o(D,be))Z[ee]=be,Z[Ae]=D,Ae=ee;else break e}}function s(Z){return Z.length===0?null:Z[0]}function a(Z){if(Z.length===0)return null;var be=Z[0],Ae=Z.pop();if(Ae!==be){Z[0]=Ae;e:for(var ee=0,D=Z.length,te=D>>>1;ee<te;){var se=2*(ee+1)-1,fe=Z[se],V=se+1,ye=Z[V];if(0>o(fe,Ae))V<D&&0>o(ye,fe)?(Z[ee]=ye,Z[V]=Ae,ee=V):(Z[ee]=fe,Z[se]=Ae,ee=se);else if(V<D&&0>o(ye,Ae))Z[ee]=ye,Z[V]=Ae,ee=V;else break e}}return be}function o(Z,be){var Ae=Z.sortIndex-be.sortIndex;return Ae!==0?Ae:Z.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();t.unstable_now=function(){return d.now()-u}}var h=[],m=[],p=1,v=null,N=3,y=!1,k=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Z){for(var be=s(m);be!==null;){if(be.callback===null)a(m);else if(be.startTime<=Z)a(m),be.sortIndex=be.expirationTime,r(h,be);else break;be=s(m)}}function M(Z){if(C=!1,E(Z),!k)if(s(h)!==null)k=!0,le(z);else{var be=s(m);be!==null&&F(M,be.startTime-Z)}}function z(Z,be){k=!1,C&&(C=!1,L(J),J=-1),y=!0;var Ae=N;try{for(E(be),v=s(h);v!==null&&(!(v.expirationTime>be)||Z&&!I());){var ee=v.callback;if(typeof ee=="function"){v.callback=null,N=v.priorityLevel;var D=ee(v.expirationTime<=be);be=t.unstable_now(),typeof D=="function"?v.callback=D:v===s(h)&&a(h),E(be)}else a(h);v=s(h)}if(v!==null)var te=!0;else{var se=s(m);se!==null&&F(M,se.startTime-be),te=!1}return te}finally{v=null,N=Ae,y=!1}}var he=!1,X=null,J=-1,G=5,pe=-1;function I(){return!(t.unstable_now()-pe<G)}function U(){if(X!==null){var Z=t.unstable_now();pe=Z;var be=!0;try{be=X(!0,Z)}finally{be?B():(he=!1,X=null)}}else he=!1}var B;if(typeof P=="function")B=function(){P(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=U,B=function(){Y.postMessage(null)}}else B=function(){S(U,0)};function le(Z){X=Z,he||(he=!0,B())}function F(Z,be){J=S(function(){Z(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){k||y||(k=!0,le(z))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(Z){switch(N){case 1:case 2:case 3:var be=3;break;default:be=N}var Ae=N;N=be;try{return Z()}finally{N=Ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,be){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ae=N;N=Z;try{return be()}finally{N=Ae}},t.unstable_scheduleCallback=function(Z,be,Ae){var ee=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?ee+Ae:ee):Ae=ee,Z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Ae+D,Z={id:p++,callback:be,priorityLevel:Z,startTime:Ae,expirationTime:D,sortIndex:-1},Ae>ee?(Z.sortIndex=Ae,r(m,Z),s(h)===null&&Z===s(m)&&(C?(L(J),J=-1):C=!0,F(M,Ae-ee))):(Z.sortIndex=D,r(h,Z),k||y||(k=!0,le(z))),Z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(Z){var be=N;return function(){var Ae=N;N=be;try{return Z.apply(this,arguments)}finally{N=Ae}}}})(Gm)),Gm}var rx;function Yv(){return rx||(rx=1,Wm.exports=Kv()),Wm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function Jv(){if(sx)return Gn;sx=1;var t=Tf(),r=Yv();function s(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)a.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function N(n){return h.call(v,n)?!0:h.call(p,n)?!1:m.test(n)?v[n]=!0:(p[n]=!0,!1)}function y(n,i,c,g){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return g?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,i,c,g){if(i===null||typeof i>"u"||y(n,i,c,g))return!0;if(g)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(n,i,c,g,b,A,q){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=n,this.type=i,this.sanitizeURL=A,this.removeEmptyString=q}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){S[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];S[i]=new C(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){S[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){S[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){S[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){S[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){S[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){S[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){S[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(L,P);S[i]=new C(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(L,P);S[i]=new C(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(L,P);S[i]=new C(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){S[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){S[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,i,c,g){var b=S.hasOwnProperty(i)?S[i]:null;(b!==null?b.type!==0:g||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(k(i,c,b,g)&&(c=null),g||b===null?N(i)&&(c===null?n.removeAttribute(i):n.setAttribute(i,""+c)):b.mustUseProperty?n[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,g=b.attributeNamespace,c===null?n.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,g?n.setAttributeNS(g,i,c):n.setAttribute(i,c))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),he=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Z=Symbol.iterator;function be(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var Ae=Object.assign,ee;function D(n){if(ee===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);ee=i&&i[1]||""}return`
`+ee+n}var te=!1;function se(n,i){if(!n||te)return"";te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Te){var g=Te}Reflect.construct(n,[],i)}else{try{i.call()}catch(Te){g=Te}n.call(i.prototype)}else{try{throw Error()}catch(Te){g=Te}n()}}catch(Te){if(Te&&g&&typeof Te.stack=="string"){for(var b=Te.stack.split(`
`),A=g.stack.split(`
`),q=b.length-1,xe=A.length-1;1<=q&&0<=xe&&b[q]!==A[xe];)xe--;for(;1<=q&&0<=xe;q--,xe--)if(b[q]!==A[xe]){if(q!==1||xe!==1)do if(q--,xe--,0>xe||b[q]!==A[xe]){var Ne=`
`+b[q].replace(" at new "," at ");return n.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",n.displayName)),Ne}while(1<=q&&0<=xe);break}}}finally{te=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?D(n):""}function fe(n){switch(n.tag){case 5:return D(n.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return n=se(n.type,!1),n;case 11:return n=se(n.type.render,!1),n;case 1:return n=se(n.type,!0),n;default:return""}}function V(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case he:return"Portal";case G:return"Profiler";case J:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I:return(n.displayName||"Context")+".Consumer";case pe:return(n._context.displayName||"Context")+".Provider";case U:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y:return i=n.displayName||null,i!==null?i:V(n.type)||"Memo";case le:i=n._payload,n=n._init;try{return V(n(i))}catch{}}return null}function ye(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(i);case 8:return i===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ie(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function de(n){var i=ge(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),g=""+n[i];if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,A=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return b.call(this)},set:function(q){g=""+q,A.call(this,q)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ue(n){n._valueTracker||(n._valueTracker=de(n))}function Pe(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),g="";return n&&(g=ge(n)?n.checked?"true":"false":n.value),n=g,n!==c?(i.setValue(n),!0):!1}function Xe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Me(n,i){var c=i.checked;return Ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function me(n,i){var c=i.defaultValue==null?"":i.defaultValue,g=i.checked!=null?i.checked:i.defaultChecked;c=ie(i.value!=null?i.value:c),n._wrapperState={initialChecked:g,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ye(n,i){i=i.checked,i!=null&&E(n,"checked",i,!1)}function rt(n,i){Ye(n,i);var c=ie(i.value),g=i.type;if(c!=null)g==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?$e(n,i.type,c):i.hasOwnProperty("defaultValue")&&$e(n,i.type,ie(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function et(n,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var g=i.type;if(!(g!=="submit"&&g!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,c||i===n.value||(n.value=i),n.defaultValue=i}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function $e(n,i,c){(i!=="number"||Xe(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var re=Array.isArray;function ce(n,i,c,g){if(n=n.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<n.length;c++)b=i.hasOwnProperty("$"+n[c].value),n[c].selected!==b&&(n[c].selected=b),b&&g&&(n[c].defaultSelected=!0)}else{for(c=""+ie(c),i=null,b=0;b<n.length;b++){if(n[b].value===c){n[b].selected=!0,g&&(n[b].defaultSelected=!0);return}i!==null||n[b].disabled||(i=n[b])}i!==null&&(i.selected=!0)}}function je(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(s(91));return Ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Oe(n,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(s(92));if(re(c)){if(1<c.length)throw Error(s(93));c=c[0]}i=c}i==null&&(i=""),c=i}n._wrapperState={initialValue:ie(c)}}function Re(n,i){var c=ie(i.value),g=ie(i.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),i.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),g!=null&&(n.defaultValue=""+g)}function Fe(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function We(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?We(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nt,it=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,g,b){MSApp.execUnsafeLocalFunction(function(){return n(i,c,g,b)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=nt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function wt(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ut=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(n){Ut.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ot[i]=ot[n]})});function qt(n,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ot.hasOwnProperty(n)&&ot[n]?(""+i).trim():i+"px"}function lt(n,i){n=n.style;for(var c in i)if(i.hasOwnProperty(c)){var g=c.indexOf("--")===0,b=qt(c,i[c],g);c==="float"&&(c="cssFloat"),g?n.setProperty(c,b):n[c]=b}}var xt=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gt(n,i){if(i){if(xt[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(s(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(s(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(s(61))}if(i.style!=null&&typeof i.style!="object")throw Error(s(62))}}function Nt(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=null;function Pt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pr=null,jr=null,Zt=null;function Ot(n){if(n=nl(n)){if(typeof Pr!="function")throw Error(s(280));var i=n.stateNode;i&&(i=Yl(i),Pr(n.stateNode,n.type,i))}}function tr(n){jr?Zt?Zt.push(n):Zt=[n]:jr=n}function bi(){if(jr){var n=jr,i=Zt;if(Zt=jr=null,Ot(n),i)for(n=0;n<i.length;n++)Ot(i[n])}}function Cs(n,i){return n(i)}function va(){}var Tn=!1;function _t(n,i,c){if(Tn)return n(i,c);Tn=!0;try{return Cs(n,i,c)}finally{Tn=!1,(jr!==null||Zt!==null)&&(va(),bi())}}function vn(n,i){var c=n.stateNode;if(c===null)return null;var g=Yl(c);if(g===null)return null;c=g[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var Xn=!1;if(u)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Xn=!1}function On(n,i,c,g,b,A,q,xe,Ne){var Te=Array.prototype.slice.call(arguments,3);try{i.apply(c,Te)}catch(Qe){this.onError(Qe)}}var gr=!1,Br=null,Yr=!1,qa=null,vi={onError:function(n){gr=!0,Br=n}};function Zn(n,i,c,g,b,A,q,xe,Ne){gr=!1,Br=null,On.apply(vi,arguments)}function wa(n,i,c,g,b,A,q,xe,Ne){if(Zn.apply(this,arguments),gr){if(gr){var Te=Br;gr=!1,Br=null}else throw Error(s(198));Yr||(Yr=!0,qa=Te)}}function Ps(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function Rn(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function wn(n){if(Ps(n)!==n)throw Error(s(188))}function Xi(n){var i=n.alternate;if(!i){if(i=Ps(n),i===null)throw Error(s(188));return i!==n?null:n}for(var c=n,g=i;;){var b=c.return;if(b===null)break;var A=b.alternate;if(A===null){if(g=b.return,g!==null){c=g;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===c)return wn(b),n;if(A===g)return wn(b),i;A=A.sibling}throw Error(s(188))}if(c.return!==g.return)c=b,g=A;else{for(var q=!1,xe=b.child;xe;){if(xe===c){q=!0,c=b,g=A;break}if(xe===g){q=!0,g=b,c=A;break}xe=xe.sibling}if(!q){for(xe=A.child;xe;){if(xe===c){q=!0,c=A,g=b;break}if(xe===g){q=!0,g=A,c=b;break}xe=xe.sibling}if(!q)throw Error(s(189))}}if(c.alternate!==g)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:i}function ea(n){return n=Xi(n),n!==null?wi(n):null}function wi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=wi(n);if(i!==null)return i;n=n.sibling}return null}var Zi=r.unstable_scheduleCallback,eo=r.unstable_cancelCallback,Mo=r.unstable_shouldYield,Fd=r.unstable_requestPaint,vr=r.unstable_now,Ac=r.unstable_getCurrentPriorityLevel,Bo=r.unstable_ImmediatePriority,Nn=r.unstable_UserBlockingPriority,Ni=r.unstable_NormalPriority,Cc=r.unstable_LowPriority,Uo=r.unstable_IdlePriority,to=null,jn=null;function Pc(n){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(to,n,void 0,(n.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:_c,Td=Math.log,Jr=Math.LN2;function _c(n){return n>>>=0,n===0?32:31-(Td(n)/Jr|0)|0}var ro=64,Mn=4194304;function ta(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function tn(n,i){var c=n.pendingLanes;if(c===0)return 0;var g=0,b=n.suspendedLanes,A=n.pingedLanes,q=c&268435455;if(q!==0){var xe=q&~b;xe!==0?g=ta(xe):(A&=q,A!==0&&(g=ta(A)))}else q=c&~b,q!==0?g=ta(q):A!==0&&(g=ta(A));if(g===0)return 0;if(i!==0&&i!==g&&(i&b)===0&&(b=g&-g,A=i&-i,b>=A||b===16&&(A&4194240)!==0))return i;if((g&4)!==0&&(g|=c&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=g;0<i;)c=31-Ts(i),b=1<<c,g|=n[c],i&=~b;return g}function so(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(n,i){for(var c=n.suspendedLanes,g=n.pingedLanes,b=n.expirationTimes,A=n.pendingLanes;0<A;){var q=31-Ts(A),xe=1<<q,Ne=b[q];Ne===-1?((xe&c)===0||(xe&g)!==0)&&(b[q]=so(xe,i)):Ne<=i&&(n.expiredLanes|=xe),A&=~xe}}function no(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Lc(){var n=ro;return ro<<=1,(ro&4194240)===0&&(ro=64),n}function Dl(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function ao(n,i,c){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Ts(i),n[i]=c}function Na(n,i){var c=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<c;){var b=31-Ts(c),A=1<<b;i[b]=0,g[b]=-1,n[b]=-1,c&=~A}}function qo(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var g=31-Ts(c),b=1<<g;b&i|n[g]&i&&(n[g]|=i),c&=~b}}var er=0;function za(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var zo,Il,Ec,Dc,$o,$a=!1,ra=[],ja=null,rn=null,Bn=null,It=new Map,io=new Map,Sa=[],Od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ic(n,i){switch(n){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":It.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(i.pointerId)}}function Sn(n,i,c,g,b,A){return n===null||n.nativeEvent!==A?(n={blockedOn:i,domEventName:c,eventSystemFlags:g,nativeEvent:A,targetContainers:[b]},i!==null&&(i=nl(i),i!==null&&Il(i)),n):(n.eventSystemFlags|=g,i=n.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),n)}function Va(n,i,c,g,b){switch(i){case"focusin":return ja=Sn(ja,n,i,c,g,b),!0;case"dragenter":return rn=Sn(rn,n,i,c,g,b),!0;case"mouseover":return Bn=Sn(Bn,n,i,c,g,b),!0;case"pointerover":var A=b.pointerId;return It.set(A,Sn(It.get(A)||null,n,i,c,g,b)),!0;case"gotpointercapture":return A=b.pointerId,io.set(A,Sn(io.get(A)||null,n,i,c,g,b)),!0}return!1}function Fc(n){var i=Di(n.target);if(i!==null){var c=Ps(i);if(c!==null){if(i=c.tag,i===13){if(i=Rn(c),i!==null){n.blockedOn=i,$o(n.priority,function(){Ec(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vo(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=lo(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var g=new c.constructor(c.type,c);Rt=g,c.target.dispatchEvent(g),Rt=null}else return i=nl(c),i!==null&&Il(i),n.blockedOn=c,!1;i.shift()}return!0}function oo(n,i,c){Vo(n)&&c.delete(i)}function Fl(){$a=!1,ja!==null&&Vo(ja)&&(ja=null),rn!==null&&Vo(rn)&&(rn=null),Bn!==null&&Vo(Bn)&&(Bn=null),It.forEach(oo),io.forEach(oo)}function sa(n,i){n.blockedOn===i&&(n.blockedOn=null,$a||($a=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fl)))}function ka(n){function i(b){return sa(b,n)}if(0<ra.length){sa(ra[0],n);for(var c=1;c<ra.length;c++){var g=ra[c];g.blockedOn===n&&(g.blockedOn=null)}}for(ja!==null&&sa(ja,n),rn!==null&&sa(rn,n),Bn!==null&&sa(Bn,n),It.forEach(i),io.forEach(i),c=0;c<Sa.length;c++)g=Sa[c],g.blockedOn===n&&(g.blockedOn=null);for(;0<Sa.length&&(c=Sa[0],c.blockedOn===null);)Fc(c),c.blockedOn===null&&Sa.shift()}var na=M.ReactCurrentBatchConfig,Ho=!0;function Tl(n,i,c,g){var b=er,A=na.transition;na.transition=null;try{er=1,Ha(n,i,c,g)}finally{er=b,na.transition=A}}function Ol(n,i,c,g){var b=er,A=na.transition;na.transition=null;try{er=4,Ha(n,i,c,g)}finally{er=b,na.transition=A}}function Ha(n,i,c,g){if(Ho){var b=lo(n,i,c,g);if(b===null)Wl(n,i,g,Aa,c),Ic(n,g);else if(Va(b,n,i,c,g))g.stopPropagation();else if(Ic(n,g),i&4&&-1<Od.indexOf(n)){for(;b!==null;){var A=nl(b);if(A!==null&&zo(A),A=lo(n,i,c,g),A===null&&Wl(n,i,g,Aa,c),A===b)break;b=A}b!==null&&g.stopPropagation()}else Wl(n,i,g,null,c)}}var Aa=null;function lo(n,i,c,g){if(Aa=null,n=Pt(g),n=Di(n),n!==null)if(i=Ps(n),i===null)n=null;else if(c=i.tag,c===13){if(n=Rn(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Aa=n,null}function co(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ac()){case Bo:return 1;case Nn:return 4;case Ni:case Cc:return 16;case Uo:return 536870912;default:return 16}default:return 16}}var Un=null,Wa=null,ji=null;function Wo(){if(ji)return ji;var n,i=Wa,c=i.length,g,b="value"in Un?Un.value:Un.textContent,A=b.length;for(n=0;n<c&&i[n]===b[n];n++);var q=c-n;for(g=1;g<=q&&i[c-g]===b[A-g];g++);return ji=b.slice(n,1<g?1-g:void 0)}function Os(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function kn(){return!0}function w(){return!1}function T(n){function i(c,g,b,A,q){this._reactName=c,this._targetInst=b,this.type=g,this.nativeEvent=A,this.target=q,this.currentTarget=null;for(var xe in n)n.hasOwnProperty(xe)&&(c=n[xe],this[xe]=c?c(A):A[xe]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?kn:w,this.isPropagationStopped=w,this}return Ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=kn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=kn)},persist:function(){},isPersistent:kn}),i}var oe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ve=T(oe),Ce=Ae({},oe,{view:0,detail:0}),Ve=T(Ce),Ke,ft,pt,Lt=Ae({},Ce,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ki,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pt&&(pt&&n.type==="mousemove"?(Ke=n.screenX-pt.screenX,ft=n.screenY-pt.screenY):ft=Ke=0,pt=n),Ke)},movementY:function(n){return"movementY"in n?n.movementY:ft}}),zt=T(Lt),rr=Ae({},Lt,{dataTransfer:0}),_r=T(rr),Qr=Ae({},Ce,{relatedTarget:0}),ir=T(Qr),as=Ae({},oe,{animationName:0,elapsedTime:0,pseudoElement:0}),Xr=T(as),_s=Ae({},oe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ga=T(_s),Si=Ae({},oe,{data:0}),Tc=T(Si),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=aa[n])?!!i[n]:!1}function ki(){return Rl}var Ai=Ae({},Ce,{key:function(n){if(n.key){var i=Oc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uo[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ki,charCode:function(n){return n.type==="keypress"?Os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),xs=T(Ai),Ka=Ae({},Lt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=T(Ka),Go=Ae({},Ce,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ki}),Ml=T(Go),Hs=Ae({},oe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rc=T(Hs),Ko=Ae({},Lt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Mc=T(Ko),is=[9,13,27,32],sn=u&&"CompositionEvent"in window,Ya=null;u&&"documentMode"in document&&(Ya=document.documentMode);var Bl=u&&"TextEvent"in window&&!Ya,Ja=u&&(!sn||Ya&&8<Ya&&11>=Ya),ho=" ",Ws=!1;function Gs(n,i){switch(n){case"keyup":return is.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ci(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ks=!1;function Pi(n,i){switch(n){case"compositionend":return Ci(i);case"keypress":return i.which!==32?null:(Ws=!0,ho);case"textInput":return n=i.data,n===ho&&Ws?null:n;default:return null}}function Ul(n,i){if(Ks)return n==="compositionend"||!sn&&Gs(n,i)?(n=Wo(),ji=Wa=Un=null,Ks=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ja&&i.locale!=="ko"?null:i.data;default:return null}}var _i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dr(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!_i[n.type]:i==="textarea"}function Bc(n,i,c,g){tr(g),i=Hc(i,"onChange"),0<i.length&&(c=new ve("onChange","change",null,c,g),n.push({event:c,listeners:i}))}var nn=null,an=null;function Yo(n){Vl(n,0)}function Li(n){var i=vo(n);if(Pe(i))return n}function Jo(n,i){if(n==="change")return i}var fo=!1;if(u){var Qa;if(u){var Xa="oninput"in document;if(!Xa){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),Xa=typeof Pa.oninput=="function"}Qa=Xa}else Qa=!1;fo=Qa&&(!document.documentMode||9<document.documentMode)}function Qo(){nn&&(nn.detachEvent("onpropertychange",on),an=nn=null)}function on(n){if(n.propertyName==="value"&&Li(an)){var i=[];Bc(i,an,n,Pt(n)),_t(Yo,i)}}function _a(n,i,c){n==="focusin"?(Qo(),nn=i,an=c,nn.attachEvent("onpropertychange",on)):n==="focusout"&&Qo()}function xr(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Li(an)}function yr(n,i){if(n==="click")return Li(i)}function qr(n,i){if(n==="input"||n==="change")return Li(i)}function zr(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var os=typeof Object.is=="function"?Object.is:zr;function La(n,i){if(os(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),g=Object.keys(i);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var b=c[g];if(!h.call(i,b)||!os(n[b],i[b]))return!1}return!0}function ia(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Xo(n,i){var c=ia(n);n=0;for(var g;c;){if(c.nodeType===3){if(g=n+c.textContent.length,n<=i&&g>=i)return{node:c,offset:i-n};n=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ia(c)}}function Rd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Rd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Md(){for(var n=window,i=Xe();i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=Xe(n.document)}return i}function Uc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Ju(n){var i=Md(),c=n.focusedElem,g=n.selectionRange;if(i!==c&&c&&c.ownerDocument&&Rd(c.ownerDocument.documentElement,c)){if(g!==null&&Uc(c)){if(i=g.start,n=g.end,n===void 0&&(n=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(n,c.value.length);else if(n=(i=c.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var b=c.textContent.length,A=Math.min(g.start,b);g=g.end===void 0?A:Math.min(g.end,b),!n.extend&&A>g&&(b=g,g=A,A=b),b=Xo(c,A);var q=Xo(c,g);b&&q&&(n.rangeCount!==1||n.anchorNode!==b.node||n.anchorOffset!==b.offset||n.focusNode!==q.node||n.focusOffset!==q.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),n.removeAllRanges(),A>g?(n.addRange(i),n.extend(q.node,q.offset)):(i.setEnd(q.node,q.offset),n.addRange(i)))}}for(i=[],n=c;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)n=i[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Qu=u&&"documentMode"in document&&11>=document.documentMode,mo=null,qc=null,Zo=null,zc=!1;function Bd(n,i,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zc||mo==null||mo!==Xe(g)||(g=mo,"selectionStart"in g&&Uc(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Zo&&La(Zo,g)||(Zo=g,g=Hc(qc,"onSelect"),0<g.length&&(i=new ve("onSelect","select",null,i,c),n.push({event:i,listeners:g}),i.target=mo)))}function ql(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var po={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},go={},Ud={};u&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function zl(n){if(go[n])return go[n];if(!po[n])return n;var i=po[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in Ud)return go[n]=i[c];return n}var qd=zl("animationend"),zd=zl("animationiteration"),$d=zl("animationstart"),Vd=zl("transitionend"),Hd=new Map,Wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(n,i){Hd.set(n,i),l(i,[n])}for(var el=0;el<Wd.length;el++){var Ys=Wd[el],qn=Ys.toLowerCase(),$c=Ys[0].toUpperCase()+Ys.slice(1);Ea(qn,"on"+$c)}Ea(qd,"onAnimationEnd"),Ea(zd,"onAnimationIteration"),Ea($d,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(Vd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function $l(n,i,c){var g=n.type||"unknown-event";n.currentTarget=c,wa(g,i,void 0,n),n.currentTarget=null}function Vl(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var g=n[c],b=g.event;g=g.listeners;e:{var A=void 0;if(i)for(var q=g.length-1;0<=q;q--){var xe=g[q],Ne=xe.instance,Te=xe.currentTarget;if(xe=xe.listener,Ne!==A&&b.isPropagationStopped())break e;$l(b,xe,Te),A=Ne}else for(q=0;q<g.length;q++){if(xe=g[q],Ne=xe.instance,Te=xe.currentTarget,xe=xe.listener,Ne!==A&&b.isPropagationStopped())break e;$l(b,xe,Te),A=Ne}}}if(Yr)throw n=qa,Yr=!1,qa=null,n}function ur(n,i){var c=i[cn];c===void 0&&(c=i[cn]=new Set);var g=n+"__bubble";c.has(g)||(Hl(i,n,2,!1),c.add(g))}function Vc(n,i,c){var g=0;i&&(g|=4),Hl(c,n,g,i)}var tl="_reactListening"+Math.random().toString(36).slice(2);function xo(n){if(!n[tl]){n[tl]=!0,a.forEach(function(c){c!=="selectionchange"&&(Xu.has(c)||Vc(c,!1,n),Vc(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[tl]||(i[tl]=!0,Vc("selectionchange",!1,i))}}function Hl(n,i,c,g){switch(co(i)){case 1:var b=Tl;break;case 4:b=Ol;break;default:b=Ha}c=b.bind(null,i,c,n),b=void 0,!Xn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),g?b!==void 0?n.addEventListener(i,c,{capture:!0,passive:b}):n.addEventListener(i,c,!0):b!==void 0?n.addEventListener(i,c,{passive:b}):n.addEventListener(i,c,!1)}function Wl(n,i,c,g,b){var A=g;if((i&1)===0&&(i&2)===0&&g!==null)e:for(;;){if(g===null)return;var q=g.tag;if(q===3||q===4){var xe=g.stateNode.containerInfo;if(xe===b||xe.nodeType===8&&xe.parentNode===b)break;if(q===4)for(q=g.return;q!==null;){var Ne=q.tag;if((Ne===3||Ne===4)&&(Ne=q.stateNode.containerInfo,Ne===b||Ne.nodeType===8&&Ne.parentNode===b))return;q=q.return}for(;xe!==null;){if(q=Di(xe),q===null)return;if(Ne=q.tag,Ne===5||Ne===6){g=A=q;continue e}xe=xe.parentNode}}g=g.return}_t(function(){var Te=A,Qe=Pt(c),Ze=[];e:{var Je=Hd.get(n);if(Je!==void 0){var ct=ve,yt=n;switch(n){case"keypress":if(Os(c)===0)break e;case"keydown":case"keyup":ct=xs;break;case"focusin":yt="focus",ct=ir;break;case"focusout":yt="blur",ct=ir;break;case"beforeblur":case"afterblur":ct=ir;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=_r;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=Ml;break;case qd:case zd:case $d:ct=Xr;break;case Vd:ct=Rc;break;case"scroll":ct=Ve;break;case"wheel":ct=Mc;break;case"copy":case"cut":case"paste":ct=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Ca}var vt=(i&4)!==0,ds=!vt&&n==="scroll",Ee=vt?Je!==null?Je+"Capture":null:Je;vt=[];for(var ke=Te,Ie;ke!==null;){Ie=ke;var tt=Ie.stateNode;if(Ie.tag===5&&tt!==null&&(Ie=tt,Ee!==null&&(tt=vn(ke,Ee),tt!=null&&vt.push(Gl(ke,tt,Ie)))),ds)break;ke=ke.return}0<vt.length&&(Je=new ct(Je,yt,null,c,Qe),Ze.push({event:Je,listeners:vt}))}}if((i&7)===0){e:{if(Je=n==="mouseover"||n==="pointerover",ct=n==="mouseout"||n==="pointerout",Je&&c!==Rt&&(yt=c.relatedTarget||c.fromElement)&&(Di(yt)||yt[Rs]))break e;if((ct||Je)&&(Je=Qe.window===Qe?Qe:(Je=Qe.ownerDocument)?Je.defaultView||Je.parentWindow:window,ct?(yt=c.relatedTarget||c.toElement,ct=Te,yt=yt?Di(yt):null,yt!==null&&(ds=Ps(yt),yt!==ds||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ct=null,yt=Te),ct!==yt)){if(vt=zt,tt="onMouseLeave",Ee="onMouseEnter",ke="mouse",(n==="pointerout"||n==="pointerover")&&(vt=Ca,tt="onPointerLeave",Ee="onPointerEnter",ke="pointer"),ds=ct==null?Je:vo(ct),Ie=yt==null?Je:vo(yt),Je=new vt(tt,ke+"leave",ct,c,Qe),Je.target=ds,Je.relatedTarget=Ie,tt=null,Di(Qe)===Te&&(vt=new vt(Ee,ke+"enter",yt,c,Qe),vt.target=Ie,vt.relatedTarget=ds,tt=vt),ds=tt,ct&&yt)t:{for(vt=ct,Ee=yt,ke=0,Ie=vt;Ie;Ie=yo(Ie))ke++;for(Ie=0,tt=Ee;tt;tt=yo(tt))Ie++;for(;0<ke-Ie;)vt=yo(vt),ke--;for(;0<Ie-ke;)Ee=yo(Ee),Ie--;for(;ke--;){if(vt===Ee||Ee!==null&&vt===Ee.alternate)break t;vt=yo(vt),Ee=yo(Ee)}vt=null}else vt=null;ct!==null&&Zu(Ze,Je,ct,vt,!1),yt!==null&&ds!==null&&Zu(Ze,ds,yt,vt,!0)}}e:{if(Je=Te?vo(Te):window,ct=Je.nodeName&&Je.nodeName.toLowerCase(),ct==="select"||ct==="input"&&Je.type==="file")var kt=Jo;else if(Dr(Je))if(fo)kt=qr;else{kt=xr;var Et=_a}else(ct=Je.nodeName)&&ct.toLowerCase()==="input"&&(Je.type==="checkbox"||Je.type==="radio")&&(kt=yr);if(kt&&(kt=kt(n,Te))){Bc(Ze,kt,c,Qe);break e}Et&&Et(n,Je,Te),n==="focusout"&&(Et=Je._wrapperState)&&Et.controlled&&Je.type==="number"&&$e(Je,"number",Je.value)}switch(Et=Te?vo(Te):window,n){case"focusin":(Dr(Et)||Et.contentEditable==="true")&&(mo=Et,qc=Te,Zo=null);break;case"focusout":Zo=qc=mo=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,Bd(Ze,c,Qe);break;case"selectionchange":if(Qu)break;case"keydown":case"keyup":Bd(Ze,c,Qe)}var Dt;if(sn)e:{switch(n){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else Ks?Gs(n,c)&&(Mt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Mt="onCompositionStart");Mt&&(Ja&&c.locale!=="ko"&&(Ks||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ks&&(Dt=Wo()):(Un=Qe,Wa="value"in Un?Un.value:Un.textContent,Ks=!0)),Et=Hc(Te,Mt),0<Et.length&&(Mt=new Tc(Mt,n,null,c,Qe),Ze.push({event:Mt,listeners:Et}),Dt?Mt.data=Dt:(Dt=Ci(c),Dt!==null&&(Mt.data=Dt)))),(Dt=Bl?Pi(n,c):Ul(n,c))&&(Te=Hc(Te,"onBeforeInput"),0<Te.length&&(Qe=new Tc("onBeforeInput","beforeinput",null,c,Qe),Ze.push({event:Qe,listeners:Te}),Qe.data=Dt))}Vl(Ze,i)})}function Gl(n,i,c){return{instance:n,listener:i,currentTarget:c}}function Hc(n,i){for(var c=i+"Capture",g=[];n!==null;){var b=n,A=b.stateNode;b.tag===5&&A!==null&&(b=A,A=vn(n,c),A!=null&&g.unshift(Gl(n,A,b)),A=vn(n,i),A!=null&&g.push(Gl(n,A,b))),n=n.return}return g}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Zu(n,i,c,g,b){for(var A=i._reactName,q=[];c!==null&&c!==g;){var xe=c,Ne=xe.alternate,Te=xe.stateNode;if(Ne!==null&&Ne===g)break;xe.tag===5&&Te!==null&&(xe=Te,b?(Ne=vn(c,A),Ne!=null&&q.unshift(Gl(c,Ne,xe))):b||(Ne=vn(c,A),Ne!=null&&q.push(Gl(c,Ne,xe)))),c=c.return}q.length!==0&&n.push({event:i,listeners:q})}var sm=/\r\n?/g,nm=/\u0000|\uFFFD/g;function eh(n){return(typeof n=="string"?n:""+n).replace(sm,`
`).replace(nm,"")}function Wc(n,i,c){if(i=eh(i),eh(n)!==i&&c)throw Error(s(425))}function rl(){}var Kl=null,bo=null;function Gd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,th=typeof clearTimeout=="function"?clearTimeout:void 0,rh=typeof Promise=="function"?Promise:void 0,am=typeof queueMicrotask=="function"?queueMicrotask:typeof rh<"u"?function(n){return rh.resolve(null).then(n).catch(im)}:Kd;function im(n){setTimeout(function(){throw n})}function Yd(n,i){var c=i,g=0;do{var b=c.nextSibling;if(n.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(g===0){n.removeChild(b),ka(i);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=b}while(c);ka(i)}function Js(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function zn(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return n;i--}else c==="/$"&&i++}n=n.previousSibling}return null}var ln=Math.random().toString(36).slice(2),Da="__reactFiber$"+ln,sl="__reactProps$"+ln,Rs="__reactContainer$"+ln,cn="__reactEvents$"+ln,om="__reactListeners$"+ln,lm="__reactHandles$"+ln;function Di(n){var i=n[Da];if(i)return i;for(var c=n.parentNode;c;){if(i=c[Rs]||c[Da]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=zn(n);n!==null;){if(c=n[Da])return c;n=zn(n)}return i}n=c,c=n.parentNode}return null}function nl(n){return n=n[Da]||n[Rs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(s(33))}function Yl(n){return n[sl]||null}var Jd=[],Za=-1;function oa(n){return{current:n}}function lr(n){0>Za||(n.current=Jd[Za],Jd[Za]=null,Za--)}function cr(n,i){Za++,Jd[Za]=n.current,n.current=i}var Ii={},Ls=oa(Ii),dn=oa(!1),wo=Ii;function al(n,i){var c=n.type.contextTypes;if(!c)return Ii;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===i)return g.__reactInternalMemoizedMaskedChildContext;var b={},A;for(A in c)b[A]=i[A];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=b),b}function un(n){return n=n.childContextTypes,n!=null}function Gc(){lr(dn),lr(Ls)}function sh(n,i,c){if(Ls.current!==Ii)throw Error(s(168));cr(Ls,i),cr(dn,c)}function Qd(n,i,c){var g=n.stateNode;if(i=i.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var b in g)if(!(b in i))throw Error(s(108,ye(n)||"Unknown",b));return Ae({},c,g)}function No(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,wo=Ls.current,cr(Ls,n),cr(dn,dn.current),!0}function nh(n,i,c){var g=n.stateNode;if(!g)throw Error(s(169));c?(n=Qd(n,i,wo),g.__reactInternalMemoizedMergedChildContext=n,lr(dn),lr(Ls),cr(Ls,n)):lr(dn),cr(dn,c)}var ei=null,Jl=!1,f=!1;function x(n){ei===null?ei=[n]:ei.push(n)}function j(n){Jl=!0,x(n)}function _(){if(!f&&ei!==null){f=!0;var n=0,i=er;try{var c=ei;for(er=1;n<c.length;n++){var g=c[n];do g=g(!0);while(g!==null)}ei=null,Jl=!1}catch(b){throw ei!==null&&(ei=ei.slice(n+1)),Zi(Bo,_),b}finally{er=i,f=!1}}return null}var O=[],$=0,H=null,K=0,Q=[],ne=0,we=null,Le=1,ae="";function Se(n,i){O[$++]=K,O[$++]=H,H=n,K=i}function _e(n,i,c){Q[ne++]=Le,Q[ne++]=ae,Q[ne++]=we,we=n;var g=Le;n=ae;var b=32-Ts(g)-1;g&=~(1<<b),c+=1;var A=32-Ts(i)+b;if(30<A){var q=b-b%5;A=(g&(1<<q)-1).toString(32),g>>=q,b-=q,Le=1<<32-Ts(i)+b|c<<b|g,ae=A+n}else Le=1<<A|c<<b|g,ae=n}function ze(n){n.return!==null&&(Se(n,1),_e(n,1,0))}function De(n){for(;n===H;)H=O[--$],O[$]=null,K=O[--$],O[$]=null;for(;n===we;)we=Q[--ne],Q[ne]=null,ae=Q[--ne],Q[ne]=null,Le=Q[--ne],Q[ne]=null}var Be=null,qe=null,He=!1,Ge=null;function jt(n,i){var c=Ra(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=n,i=n.deletions,i===null?(n.deletions=[c],n.flags|=16):i.push(c)}function ut(n,i){switch(n.tag){case 5:var c=n.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Be=n,qe=Js(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Be=n,qe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=we!==null?{id:Le,overflow:ae}:null,n.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Ra(18,null,null,0),c.stateNode=i,c.return=n,n.child=c,Be=n,qe=null,!0):!1;default:return!1}}function $t(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gt(n){if(He){var i=qe;if(i){var c=i;if(!ut(n,i)){if($t(n))throw Error(s(418));i=Js(c.nextSibling);var g=Be;i&&ut(n,i)?jt(g,c):(n.flags=n.flags&-4097|2,He=!1,Be=n)}}else{if($t(n))throw Error(s(418));n.flags=n.flags&-4097|2,He=!1,Be=n}}}function Yt(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Be=n}function Ir(n){if(n!==Be)return!1;if(!He)return Yt(n),He=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Gd(n.type,n.memoizedProps)),i&&(i=qe)){if($t(n))throw Vt(),Error(s(418));for(;i;)jt(n,i),i=Js(i.nextSibling)}if(Yt(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(i===0){qe=Js(n.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}n=n.nextSibling}qe=null}}else qe=Be?Js(n.stateNode.nextSibling):null;return!0}function Vt(){for(var n=qe;n;)n=Js(n.nextSibling)}function ht(){qe=Be=null,He=!1}function st(n){Ge===null?Ge=[n]:Ge.push(n)}var $r=M.ReactCurrentBatchConfig;function Tt(n,i,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(s(309));var g=c.stateNode}if(!g)throw Error(s(147,n));var b=g,A=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===A?i.ref:(i=function(q){var xe=b.refs;q===null?delete xe[A]:xe[A]=q},i._stringRef=A,i)}if(typeof n!="string")throw Error(s(284));if(!c._owner)throw Error(s(290,n))}return n}function Kt(n,i){throw n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function br(n){var i=n._init;return i(n._payload)}function ys(n){function i(Ee,ke){if(n){var Ie=Ee.deletions;Ie===null?(Ee.deletions=[ke],Ee.flags|=16):Ie.push(ke)}}function c(Ee,ke){if(!n)return null;for(;ke!==null;)i(Ee,ke),ke=ke.sibling;return null}function g(Ee,ke){for(Ee=new Map;ke!==null;)ke.key!==null?Ee.set(ke.key,ke):Ee.set(ke.index,ke),ke=ke.sibling;return Ee}function b(Ee,ke){return Ee=pl(Ee,ke),Ee.index=0,Ee.sibling=null,Ee}function A(Ee,ke,Ie){return Ee.index=Ie,n?(Ie=Ee.alternate,Ie!==null?(Ie=Ie.index,Ie<ke?(Ee.flags|=2,ke):Ie):(Ee.flags|=2,ke)):(Ee.flags|=1048576,ke)}function q(Ee){return n&&Ee.alternate===null&&(Ee.flags|=2),Ee}function xe(Ee,ke,Ie,tt){return ke===null||ke.tag!==6?(ke=Rm(Ie,Ee.mode,tt),ke.return=Ee,ke):(ke=b(ke,Ie),ke.return=Ee,ke)}function Ne(Ee,ke,Ie,tt){var kt=Ie.type;return kt===X?Qe(Ee,ke,Ie.props.children,tt,Ie.key):ke!==null&&(ke.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===le&&br(kt)===ke.type)?(tt=b(ke,Ie.props),tt.ref=Tt(Ee,ke,Ie),tt.return=Ee,tt):(tt=Sh(Ie.type,Ie.key,Ie.props,null,Ee.mode,tt),tt.ref=Tt(Ee,ke,Ie),tt.return=Ee,tt)}function Te(Ee,ke,Ie,tt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Ie.containerInfo||ke.stateNode.implementation!==Ie.implementation?(ke=Mm(Ie,Ee.mode,tt),ke.return=Ee,ke):(ke=b(ke,Ie.children||[]),ke.return=Ee,ke)}function Qe(Ee,ke,Ie,tt,kt){return ke===null||ke.tag!==7?(ke=nc(Ie,Ee.mode,tt,kt),ke.return=Ee,ke):(ke=b(ke,Ie),ke.return=Ee,ke)}function Ze(Ee,ke,Ie){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=Rm(""+ke,Ee.mode,Ie),ke.return=Ee,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case z:return Ie=Sh(ke.type,ke.key,ke.props,null,Ee.mode,Ie),Ie.ref=Tt(Ee,null,ke),Ie.return=Ee,Ie;case he:return ke=Mm(ke,Ee.mode,Ie),ke.return=Ee,ke;case le:var tt=ke._init;return Ze(Ee,tt(ke._payload),Ie)}if(re(ke)||be(ke))return ke=nc(ke,Ee.mode,Ie,null),ke.return=Ee,ke;Kt(Ee,ke)}return null}function Je(Ee,ke,Ie,tt){var kt=ke!==null?ke.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return kt!==null?null:xe(Ee,ke,""+Ie,tt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case z:return Ie.key===kt?Ne(Ee,ke,Ie,tt):null;case he:return Ie.key===kt?Te(Ee,ke,Ie,tt):null;case le:return kt=Ie._init,Je(Ee,ke,kt(Ie._payload),tt)}if(re(Ie)||be(Ie))return kt!==null?null:Qe(Ee,ke,Ie,tt,null);Kt(Ee,Ie)}return null}function ct(Ee,ke,Ie,tt,kt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Ee=Ee.get(Ie)||null,xe(ke,Ee,""+tt,kt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case z:return Ee=Ee.get(tt.key===null?Ie:tt.key)||null,Ne(ke,Ee,tt,kt);case he:return Ee=Ee.get(tt.key===null?Ie:tt.key)||null,Te(ke,Ee,tt,kt);case le:var Et=tt._init;return ct(Ee,ke,Ie,Et(tt._payload),kt)}if(re(tt)||be(tt))return Ee=Ee.get(Ie)||null,Qe(ke,Ee,tt,kt,null);Kt(ke,tt)}return null}function yt(Ee,ke,Ie,tt){for(var kt=null,Et=null,Dt=ke,Mt=ke=0,zs=null;Dt!==null&&Mt<Ie.length;Mt++){Dt.index>Mt?(zs=Dt,Dt=null):zs=Dt.sibling;var or=Je(Ee,Dt,Ie[Mt],tt);if(or===null){Dt===null&&(Dt=zs);break}n&&Dt&&or.alternate===null&&i(Ee,Dt),ke=A(or,ke,Mt),Et===null?kt=or:Et.sibling=or,Et=or,Dt=zs}if(Mt===Ie.length)return c(Ee,Dt),He&&Se(Ee,Mt),kt;if(Dt===null){for(;Mt<Ie.length;Mt++)Dt=Ze(Ee,Ie[Mt],tt),Dt!==null&&(ke=A(Dt,ke,Mt),Et===null?kt=Dt:Et.sibling=Dt,Et=Dt);return He&&Se(Ee,Mt),kt}for(Dt=g(Ee,Dt);Mt<Ie.length;Mt++)zs=ct(Dt,Ee,Mt,Ie[Mt],tt),zs!==null&&(n&&zs.alternate!==null&&Dt.delete(zs.key===null?Mt:zs.key),ke=A(zs,ke,Mt),Et===null?kt=zs:Et.sibling=zs,Et=zs);return n&&Dt.forEach(function(gl){return i(Ee,gl)}),He&&Se(Ee,Mt),kt}function vt(Ee,ke,Ie,tt){var kt=be(Ie);if(typeof kt!="function")throw Error(s(150));if(Ie=kt.call(Ie),Ie==null)throw Error(s(151));for(var Et=kt=null,Dt=ke,Mt=ke=0,zs=null,or=Ie.next();Dt!==null&&!or.done;Mt++,or=Ie.next()){Dt.index>Mt?(zs=Dt,Dt=null):zs=Dt.sibling;var gl=Je(Ee,Dt,or.value,tt);if(gl===null){Dt===null&&(Dt=zs);break}n&&Dt&&gl.alternate===null&&i(Ee,Dt),ke=A(gl,ke,Mt),Et===null?kt=gl:Et.sibling=gl,Et=gl,Dt=zs}if(or.done)return c(Ee,Dt),He&&Se(Ee,Mt),kt;if(Dt===null){for(;!or.done;Mt++,or=Ie.next())or=Ze(Ee,or.value,tt),or!==null&&(ke=A(or,ke,Mt),Et===null?kt=or:Et.sibling=or,Et=or);return He&&Se(Ee,Mt),kt}for(Dt=g(Ee,Dt);!or.done;Mt++,or=Ie.next())or=ct(Dt,Ee,Mt,or.value,tt),or!==null&&(n&&or.alternate!==null&&Dt.delete(or.key===null?Mt:or.key),ke=A(or,ke,Mt),Et===null?kt=or:Et.sibling=or,Et=or);return n&&Dt.forEach(function(zv){return i(Ee,zv)}),He&&Se(Ee,Mt),kt}function ds(Ee,ke,Ie,tt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===X&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case z:e:{for(var kt=Ie.key,Et=ke;Et!==null;){if(Et.key===kt){if(kt=Ie.type,kt===X){if(Et.tag===7){c(Ee,Et.sibling),ke=b(Et,Ie.props.children),ke.return=Ee,Ee=ke;break e}}else if(Et.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===le&&br(kt)===Et.type){c(Ee,Et.sibling),ke=b(Et,Ie.props),ke.ref=Tt(Ee,Et,Ie),ke.return=Ee,Ee=ke;break e}c(Ee,Et);break}else i(Ee,Et);Et=Et.sibling}Ie.type===X?(ke=nc(Ie.props.children,Ee.mode,tt,Ie.key),ke.return=Ee,Ee=ke):(tt=Sh(Ie.type,Ie.key,Ie.props,null,Ee.mode,tt),tt.ref=Tt(Ee,ke,Ie),tt.return=Ee,Ee=tt)}return q(Ee);case he:e:{for(Et=Ie.key;ke!==null;){if(ke.key===Et)if(ke.tag===4&&ke.stateNode.containerInfo===Ie.containerInfo&&ke.stateNode.implementation===Ie.implementation){c(Ee,ke.sibling),ke=b(ke,Ie.children||[]),ke.return=Ee,Ee=ke;break e}else{c(Ee,ke);break}else i(Ee,ke);ke=ke.sibling}ke=Mm(Ie,Ee.mode,tt),ke.return=Ee,Ee=ke}return q(Ee);case le:return Et=Ie._init,ds(Ee,ke,Et(Ie._payload),tt)}if(re(Ie))return yt(Ee,ke,Ie,tt);if(be(Ie))return vt(Ee,ke,Ie,tt);Kt(Ee,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ke!==null&&ke.tag===6?(c(Ee,ke.sibling),ke=b(ke,Ie),ke.return=Ee,Ee=ke):(c(Ee,ke),ke=Rm(Ie,Ee.mode,tt),ke.return=Ee,Ee=ke),q(Ee)):c(Ee,ke)}return ds}var Zr=ys(!0),Lr=ys(!1),ls=oa(null),bs=null,Sr=null,Xt=null;function sr(){Xt=Sr=bs=null}function kr(n){var i=ls.current;lr(ls),n._currentValue=i}function nr(n,i,c){for(;n!==null;){var g=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,g!==null&&(g.childLanes|=i)):g!==null&&(g.childLanes&i)!==i&&(g.childLanes|=i),n===c)break;n=n.return}}function Fr(n,i){bs=n,Xt=Sr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Vn=!0),n.firstContext=null)}function Tr(n){var i=n._currentValue;if(Xt!==n)if(n={context:n,memoizedValue:i,next:null},Sr===null){if(bs===null)throw Error(s(308));Sr=n,bs.dependencies={lanes:0,firstContext:n}}else Sr=Sr.next=n;return i}var hr=null;function Ms(n){hr===null?hr=[n]:hr.push(n)}function dr(n,i,c,g){var b=i.interleaved;return b===null?(c.next=c,Ms(i)):(c.next=b.next,b.next=c),i.interleaved=c,fr(n,g)}function fr(n,i){n.lanes|=i;var c=n.alternate;for(c!==null&&(c.lanes|=i),c=n,n=n.return;n!==null;)n.childLanes|=i,c=n.alternate,c!==null&&(c.childLanes|=i),c=n,n=n.return;return c.tag===3?c.stateNode:null}var es=!1;function Es(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hn(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Vr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Hr(n,i,c){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(ar&2)!==0){var b=g.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),g.pending=i,fr(n,c)}return b=g.interleaved,b===null?(i.next=i,Ms(g)):(i.next=b.next,b.next=i),g.interleaved=i,fr(n,c)}function Bs(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var g=i.lanes;g&=n.pendingLanes,c|=g,i.lanes=c,qo(n,c)}}function mr(n,i){var c=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var b=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var q={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};A===null?b=A=q:A=A.next=q,c=c.next}while(c!==null);A===null?b=A=i:A=A.next=i}else b=A=i;c={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:g.shared,effects:g.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}function Us(n,i,c,g){var b=n.updateQueue;es=!1;var A=b.firstBaseUpdate,q=b.lastBaseUpdate,xe=b.shared.pending;if(xe!==null){b.shared.pending=null;var Ne=xe,Te=Ne.next;Ne.next=null,q===null?A=Te:q.next=Te,q=Ne;var Qe=n.alternate;Qe!==null&&(Qe=Qe.updateQueue,xe=Qe.lastBaseUpdate,xe!==q&&(xe===null?Qe.firstBaseUpdate=Te:xe.next=Te,Qe.lastBaseUpdate=Ne))}if(A!==null){var Ze=b.baseState;q=0,Qe=Te=Ne=null,xe=A;do{var Je=xe.lane,ct=xe.eventTime;if((g&Je)===Je){Qe!==null&&(Qe=Qe.next={eventTime:ct,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var yt=n,vt=xe;switch(Je=i,ct=c,vt.tag){case 1:if(yt=vt.payload,typeof yt=="function"){Ze=yt.call(ct,Ze,Je);break e}Ze=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=vt.payload,Je=typeof yt=="function"?yt.call(ct,Ze,Je):yt,Je==null)break e;Ze=Ae({},Ze,Je);break e;case 2:es=!0}}xe.callback!==null&&xe.lane!==0&&(n.flags|=64,Je=b.effects,Je===null?b.effects=[xe]:Je.push(xe))}else ct={eventTime:ct,lane:Je,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Qe===null?(Te=Qe=ct,Ne=Ze):Qe=Qe.next=ct,q|=Je;if(xe=xe.next,xe===null){if(xe=b.shared.pending,xe===null)break;Je=xe,xe=Je.next,Je.next=null,b.lastBaseUpdate=Je,b.shared.pending=null}}while(!0);if(Qe===null&&(Ne=Ze),b.baseState=Ne,b.firstBaseUpdate=Te,b.lastBaseUpdate=Qe,i=b.shared.interleaved,i!==null){b=i;do q|=b.lane,b=b.next;while(b!==i)}else A===null&&(b.shared.lanes=0);ec|=q,n.lanes=q,n.memoizedState=Ze}}function $n(n,i,c){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var g=n[i],b=g.callback;if(b!==null){if(g.callback=null,g=c,typeof b!="function")throw Error(s(191,b));b.call(g)}}}var la={},vs=oa(la),Wr=oa(la),Fi=oa(la);function ti(n){if(n===la)throw Error(s(174));return n}function il(n,i){switch(cr(Fi,i),cr(Wr,n),cr(vs,la),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:at(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=at(i,n)}lr(vs),cr(vs,i)}function Ia(){lr(vs),lr(Wr),lr(Fi)}function ah(n){ti(Fi.current);var i=ti(vs.current),c=at(i,n.type);i!==c&&(cr(Wr,n),cr(vs,c))}function Xd(n){Wr.current===n&&(lr(vs),lr(Wr))}var wr=oa(0);function ca(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zd=[];function eu(){for(var n=0;n<Zd.length;n++)Zd[n]._workInProgressVersionPrimary=null;Zd.length=0}var Kc=M.ReactCurrentDispatcher,Yc=M.ReactCurrentBatchConfig,Fa=0,Ar=null,ts=null,Gr=null,ol=!1,ri=!1,ll=0,cm=0;function cs(){throw Error(s(321))}function Jc(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!os(n[c],i[c]))return!1;return!0}function Ql(n,i,c,g,b,A){if(Fa=A,Ar=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Kc.current=n===null||n.memoizedState===null?mv:pv,n=c(g,b),ri){A=0;do{if(ri=!1,ll=0,25<=A)throw Error(s(301));A+=1,Gr=ts=null,i.updateQueue=null,Kc.current=gv,n=c(g,b)}while(ri)}if(Kc.current=dh,i=ts!==null&&ts.next!==null,Fa=0,Gr=ts=Ar=null,ol=!1,i)throw Error(s(300));return n}function Ta(){var n=ll!==0;return ll=0,n}function da(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Ar.memoizedState=Gr=n:Gr=Gr.next=n,Gr}function An(){if(ts===null){var n=Ar.alternate;n=n!==null?n.memoizedState:null}else n=ts.next;var i=Gr===null?Ar.memoizedState:Gr.next;if(i!==null)Gr=i,ts=n;else{if(n===null)throw Error(s(310));ts=n,n={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},Gr===null?Ar.memoizedState=Gr=n:Gr=Gr.next=n}return Gr}function Xl(n,i){return typeof i=="function"?i(n):i}function Qc(n){var i=An(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var g=ts,b=g.baseQueue,A=c.pending;if(A!==null){if(b!==null){var q=b.next;b.next=A.next,A.next=q}g.baseQueue=b=A,c.pending=null}if(b!==null){A=b.next,g=g.baseState;var xe=q=null,Ne=null,Te=A;do{var Qe=Te.lane;if((Fa&Qe)===Qe)Ne!==null&&(Ne=Ne.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),g=Te.hasEagerState?Te.eagerState:n(g,Te.action);else{var Ze={lane:Qe,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};Ne===null?(xe=Ne=Ze,q=g):Ne=Ne.next=Ze,Ar.lanes|=Qe,ec|=Qe}Te=Te.next}while(Te!==null&&Te!==A);Ne===null?q=g:Ne.next=xe,os(g,i.memoizedState)||(Vn=!0),i.memoizedState=g,i.baseState=q,i.baseQueue=Ne,c.lastRenderedState=g}if(n=c.interleaved,n!==null){b=n;do A=b.lane,Ar.lanes|=A,ec|=A,b=b.next;while(b!==n)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ti(n){var i=An(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var g=c.dispatch,b=c.pending,A=i.memoizedState;if(b!==null){c.pending=null;var q=b=b.next;do A=n(A,q.action),q=q.next;while(q!==b);os(A,i.memoizedState)||(Vn=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),c.lastRenderedState=A}return[A,g]}function ih(){}function tu(n,i){var c=Ar,g=An(),b=i(),A=!os(g.memoizedState,b);if(A&&(g.memoizedState=b,Vn=!0),g=g.queue,ed(lh.bind(null,c,g,n),[n]),g.getSnapshot!==i||A||Gr!==null&&Gr.memoizedState.tag&1){if(c.flags|=2048,Cn(9,ru.bind(null,c,g,b,i),void 0,null),qs===null)throw Error(s(349));(Fa&30)!==0||oh(c,i,b)}return b}function oh(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=Ar.updateQueue,i===null?(i={lastEffect:null,stores:null},Ar.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function ru(n,i,c,g){i.value=c,i.getSnapshot=g,cl(i)&&Xc(n)}function lh(n,i,c){return c(function(){cl(i)&&Xc(n)})}function cl(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!os(n,c)}catch{return!0}}function Xc(n){var i=fr(n,1);i!==null&&oi(i,n,1,-1)}function Zl(n){var i=da();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:n},i.queue=n,n=n.dispatch=fv.bind(null,Ar,n),[i.memoizedState,n]}function Cn(n,i,c,g){return n={tag:n,create:i,destroy:c,deps:g,next:null},i=Ar.updateQueue,i===null?(i={lastEffect:null,stores:null},Ar.updateQueue=i,i.lastEffect=n.next=n):(c=i.lastEffect,c===null?i.lastEffect=n.next=n:(g=c.next,c.next=n,n.next=g,i.lastEffect=n)),n}function si(){return An().memoizedState}function ua(n,i,c,g){var b=da();Ar.flags|=n,b.memoizedState=Cn(1|i,c,void 0,g===void 0?null:g)}function jo(n,i,c,g){var b=An();g=g===void 0?null:g;var A=void 0;if(ts!==null){var q=ts.memoizedState;if(A=q.destroy,g!==null&&Jc(g,q.deps)){b.memoizedState=Cn(i,c,A,g);return}}Ar.flags|=n,b.memoizedState=Cn(1|i,c,A,g)}function Zc(n,i){return ua(8390656,8,n,i)}function ed(n,i){return jo(2048,8,n,i)}function ch(n,i){return jo(4,2,n,i)}function td(n,i){return jo(4,4,n,i)}function rd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Y0(n,i,c){return c=c!=null?c.concat([n]):null,jo(4,4,rd.bind(null,i,n),c)}function dm(){}function J0(n,i){var c=An();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Jc(i,g[1])?g[0]:(c.memoizedState=[n,i],n)}function Q0(n,i){var c=An();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Jc(i,g[1])?g[0]:(n=n(),c.memoizedState=[n,i],n)}function X0(n,i,c){return(Fa&21)===0?(n.baseState&&(n.baseState=!1,Vn=!0),n.memoizedState=c):(os(c,i)||(c=Lc(),Ar.lanes|=c,ec|=c,n.baseState=!0),i)}function uv(n,i){var c=er;er=c!==0&&4>c?c:4,n(!0);var g=Yc.transition;Yc.transition={};try{n(!1),i()}finally{er=c,Yc.transition=g}}function Z0(){return An().memoizedState}function hv(n,i,c){var g=fl(n);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},eg(n))tg(i,c);else if(c=dr(n,i,c,g),c!==null){var b=_n();oi(c,n,g,b),rg(c,i,g)}}function fv(n,i,c){var g=fl(n),b={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(eg(n))tg(i,b);else{var A=n.alternate;if(n.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var q=i.lastRenderedState,xe=A(q,c);if(b.hasEagerState=!0,b.eagerState=xe,os(xe,q)){var Ne=i.interleaved;Ne===null?(b.next=b,Ms(i)):(b.next=Ne.next,Ne.next=b),i.interleaved=b;return}}catch{}finally{}c=dr(n,i,b,g),c!==null&&(b=_n(),oi(c,n,g,b),rg(c,i,g))}}function eg(n){var i=n.alternate;return n===Ar||i!==null&&i===Ar}function tg(n,i){ri=ol=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function rg(n,i,c){if((c&4194240)!==0){var g=i.lanes;g&=n.pendingLanes,c|=g,i.lanes=c,qo(n,c)}}var dh={readContext:Tr,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},mv={readContext:Tr,useCallback:function(n,i){return da().memoizedState=[n,i===void 0?null:i],n},useContext:Tr,useEffect:Zc,useImperativeHandle:function(n,i,c){return c=c!=null?c.concat([n]):null,ua(4194308,4,rd.bind(null,i,n),c)},useLayoutEffect:function(n,i){return ua(4194308,4,n,i)},useInsertionEffect:function(n,i){return ua(4,2,n,i)},useMemo:function(n,i){var c=da();return i=i===void 0?null:i,n=n(),c.memoizedState=[n,i],n},useReducer:function(n,i,c){var g=da();return i=c!==void 0?c(i):i,g.memoizedState=g.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},g.queue=n,n=n.dispatch=hv.bind(null,Ar,n),[g.memoizedState,n]},useRef:function(n){var i=da();return n={current:n},i.memoizedState=n},useState:Zl,useDebugValue:dm,useDeferredValue:function(n){return da().memoizedState=n},useTransition:function(){var n=Zl(!1),i=n[0];return n=uv.bind(null,n[1]),da().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,c){var g=Ar,b=da();if(He){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),qs===null)throw Error(s(349));(Fa&30)!==0||oh(g,i,c)}b.memoizedState=c;var A={value:c,getSnapshot:i};return b.queue=A,Zc(lh.bind(null,g,A,n),[n]),g.flags|=2048,Cn(9,ru.bind(null,g,A,c,i),void 0,null),c},useId:function(){var n=da(),i=qs.identifierPrefix;if(He){var c=ae,g=Le;c=(g&~(1<<32-Ts(g)-1)).toString(32)+c,i=":"+i+"R"+c,c=ll++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=cm++,i=":"+i+"r"+c.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},pv={readContext:Tr,useCallback:J0,useContext:Tr,useEffect:ed,useImperativeHandle:Y0,useInsertionEffect:ch,useLayoutEffect:td,useMemo:Q0,useReducer:Qc,useRef:si,useState:function(){return Qc(Xl)},useDebugValue:dm,useDeferredValue:function(n){var i=An();return X0(i,ts.memoizedState,n)},useTransition:function(){var n=Qc(Xl)[0],i=An().memoizedState;return[n,i]},useMutableSource:ih,useSyncExternalStore:tu,useId:Z0,unstable_isNewReconciler:!1},gv={readContext:Tr,useCallback:J0,useContext:Tr,useEffect:ed,useImperativeHandle:Y0,useInsertionEffect:ch,useLayoutEffect:td,useMemo:Q0,useReducer:Ti,useRef:si,useState:function(){return Ti(Xl)},useDebugValue:dm,useDeferredValue:function(n){var i=An();return ts===null?i.memoizedState=n:X0(i,ts.memoizedState,n)},useTransition:function(){var n=Ti(Xl)[0],i=An().memoizedState;return[n,i]},useMutableSource:ih,useSyncExternalStore:tu,useId:Z0,unstable_isNewReconciler:!1};function ni(n,i){if(n&&n.defaultProps){i=Ae({},i),n=n.defaultProps;for(var c in n)i[c]===void 0&&(i[c]=n[c]);return i}return i}function um(n,i,c,g){i=n.memoizedState,c=c(g,i),c=c==null?i:Ae({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var uh={isMounted:function(n){return(n=n._reactInternals)?Ps(n)===n:!1},enqueueSetState:function(n,i,c){n=n._reactInternals;var g=_n(),b=fl(n),A=Vr(g,b);A.payload=i,c!=null&&(A.callback=c),i=Hr(n,A,b),i!==null&&(oi(i,n,b,g),Bs(i,n,b))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var g=_n(),b=fl(n),A=Vr(g,b);A.tag=1,A.payload=i,c!=null&&(A.callback=c),i=Hr(n,A,b),i!==null&&(oi(i,n,b,g),Bs(i,n,b))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=_n(),g=fl(n),b=Vr(c,g);b.tag=2,i!=null&&(b.callback=i),i=Hr(n,b,g),i!==null&&(oi(i,n,g,c),Bs(i,n,g))}};function sg(n,i,c,g,b,A,q){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,A,q):i.prototype&&i.prototype.isPureReactComponent?!La(c,g)||!La(b,A):!0}function ng(n,i,c){var g=!1,b=Ii,A=i.contextType;return typeof A=="object"&&A!==null?A=Tr(A):(b=un(i)?wo:Ls.current,g=i.contextTypes,A=(g=g!=null)?al(n,b):Ii),i=new i(c,A),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=uh,n.stateNode=i,i._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=b,n.__reactInternalMemoizedMaskedChildContext=A),i}function ag(n,i,c,g){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,g),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,g),i.state!==n&&uh.enqueueReplaceState(i,i.state,null)}function hm(n,i,c,g){var b=n.stateNode;b.props=c,b.state=n.memoizedState,b.refs={},Es(n);var A=i.contextType;typeof A=="object"&&A!==null?b.context=Tr(A):(A=un(i)?wo:Ls.current,b.context=al(n,A)),b.state=n.memoizedState,A=i.getDerivedStateFromProps,typeof A=="function"&&(um(n,i,A,c),b.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&uh.enqueueReplaceState(b,b.state,null),Us(n,c,b,g),b.state=n.memoizedState),typeof b.componentDidMount=="function"&&(n.flags|=4194308)}function sd(n,i){try{var c="",g=i;do c+=fe(g),g=g.return;while(g);var b=c}catch(A){b=`
Error generating stack: `+A.message+`
`+A.stack}return{value:n,source:i,stack:b,digest:null}}function fm(n,i,c){return{value:n,source:null,stack:c??null,digest:i??null}}function mm(n,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function ig(n,i,c){c=Vr(-1,c),c.tag=3,c.payload={element:null};var g=i.value;return c.callback=function(){yh||(yh=!0,_m=g),mm(n,i)},c}function og(n,i,c){c=Vr(-1,c),c.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var b=i.value;c.payload=function(){return g(b)},c.callback=function(){mm(n,i)}}var A=n.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(c.callback=function(){mm(n,i),typeof g!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var q=i.stack;this.componentDidCatch(i.value,{componentStack:q!==null?q:""})}),c}function lg(n,i,c){var g=n.pingCache;if(g===null){g=n.pingCache=new xv;var b=new Set;g.set(i,b)}else b=g.get(i),b===void 0&&(b=new Set,g.set(i,b));b.has(c)||(b.add(c),n=Ev.bind(null,n,i,c),i.then(n,n))}function cg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function dg(n,i,c,g,b){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Vr(-1,1),i.tag=2,Hr(c,i,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=b,n)}var yv=M.ReactCurrentOwner,Vn=!1;function Pn(n,i,c,g){i.child=n===null?Lr(i,null,c,g):Zr(i,n.child,c,g)}function ug(n,i,c,g,b){c=c.render;var A=i.ref;return Fr(i,b),g=Ql(n,i,c,g,A,b),c=Ta(),n!==null&&!Vn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~b,So(n,i,b)):(He&&c&&ze(i),i.flags|=1,Pn(n,i,g,b),i.child)}function hg(n,i,c,g,b){if(n===null){var A=c.type;return typeof A=="function"&&!Om(A)&&A.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=A,fg(n,i,A,g,b)):(n=Sh(c.type,null,g,i,i.mode,b),n.ref=i.ref,n.return=i,i.child=n)}if(A=n.child,(n.lanes&b)===0){var q=A.memoizedProps;if(c=c.compare,c=c!==null?c:La,c(q,g)&&n.ref===i.ref)return So(n,i,b)}return i.flags|=1,n=pl(A,g),n.ref=i.ref,n.return=i,i.child=n}function fg(n,i,c,g,b){if(n!==null){var A=n.memoizedProps;if(La(A,g)&&n.ref===i.ref)if(Vn=!1,i.pendingProps=g=A,(n.lanes&b)!==0)(n.flags&131072)!==0&&(Vn=!0);else return i.lanes=n.lanes,So(n,i,b)}return pm(n,i,c,g,b)}function mg(n,i,c){var g=i.pendingProps,b=g.children,A=n!==null?n.memoizedState:null;if(g.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(ad,ha),ha|=c;else{if((c&1073741824)===0)return n=A!==null?A.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,cr(ad,ha),ha|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=A!==null?A.baseLanes:c,cr(ad,ha),ha|=g}else A!==null?(g=A.baseLanes|c,i.memoizedState=null):g=c,cr(ad,ha),ha|=g;return Pn(n,i,b,c),i.child}function pg(n,i){var c=i.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function pm(n,i,c,g,b){var A=un(c)?wo:Ls.current;return A=al(i,A),Fr(i,b),c=Ql(n,i,c,g,A,b),g=Ta(),n!==null&&!Vn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~b,So(n,i,b)):(He&&g&&ze(i),i.flags|=1,Pn(n,i,c,b),i.child)}function gg(n,i,c,g,b){if(un(c)){var A=!0;No(i)}else A=!1;if(Fr(i,b),i.stateNode===null)fh(n,i),ng(i,c,g),hm(i,c,g,b),g=!0;else if(n===null){var q=i.stateNode,xe=i.memoizedProps;q.props=xe;var Ne=q.context,Te=c.contextType;typeof Te=="object"&&Te!==null?Te=Tr(Te):(Te=un(c)?wo:Ls.current,Te=al(i,Te));var Qe=c.getDerivedStateFromProps,Ze=typeof Qe=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ze||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(xe!==g||Ne!==Te)&&ag(i,q,g,Te),es=!1;var Je=i.memoizedState;q.state=Je,Us(i,g,q,b),Ne=i.memoizedState,xe!==g||Je!==Ne||dn.current||es?(typeof Qe=="function"&&(um(i,c,Qe,g),Ne=i.memoizedState),(xe=es||sg(i,c,xe,g,Je,Ne,Te))?(Ze||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(i.flags|=4194308)):(typeof q.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=g,i.memoizedState=Ne),q.props=g,q.state=Ne,q.context=Te,g=xe):(typeof q.componentDidMount=="function"&&(i.flags|=4194308),g=!1)}else{q=i.stateNode,hn(n,i),xe=i.memoizedProps,Te=i.type===i.elementType?xe:ni(i.type,xe),q.props=Te,Ze=i.pendingProps,Je=q.context,Ne=c.contextType,typeof Ne=="object"&&Ne!==null?Ne=Tr(Ne):(Ne=un(c)?wo:Ls.current,Ne=al(i,Ne));var ct=c.getDerivedStateFromProps;(Qe=typeof ct=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(xe!==Ze||Je!==Ne)&&ag(i,q,g,Ne),es=!1,Je=i.memoizedState,q.state=Je,Us(i,g,q,b);var yt=i.memoizedState;xe!==Ze||Je!==yt||dn.current||es?(typeof ct=="function"&&(um(i,c,ct,g),yt=i.memoizedState),(Te=es||sg(i,c,Te,g,Je,yt,Ne)||!1)?(Qe||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(g,yt,Ne),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(g,yt,Ne)),typeof q.componentDidUpdate=="function"&&(i.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof q.componentDidUpdate!="function"||xe===n.memoizedProps&&Je===n.memoizedState||(i.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||xe===n.memoizedProps&&Je===n.memoizedState||(i.flags|=1024),i.memoizedProps=g,i.memoizedState=yt),q.props=g,q.state=yt,q.context=Ne,g=Te):(typeof q.componentDidUpdate!="function"||xe===n.memoizedProps&&Je===n.memoizedState||(i.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||xe===n.memoizedProps&&Je===n.memoizedState||(i.flags|=1024),g=!1)}return gm(n,i,c,g,A,b)}function gm(n,i,c,g,b,A){pg(n,i);var q=(i.flags&128)!==0;if(!g&&!q)return b&&nh(i,c,!1),So(n,i,A);g=i.stateNode,yv.current=i;var xe=q&&typeof c.getDerivedStateFromError!="function"?null:g.render();return i.flags|=1,n!==null&&q?(i.child=Zr(i,n.child,null,A),i.child=Zr(i,null,xe,A)):Pn(n,i,xe,A),i.memoizedState=g.state,b&&nh(i,c,!0),i.child}function xg(n){var i=n.stateNode;i.pendingContext?sh(n,i.pendingContext,i.pendingContext!==i.context):i.context&&sh(n,i.context,!1),il(n,i.containerInfo)}function yg(n,i,c,g,b){return ht(),st(b),i.flags|=256,Pn(n,i,c,g),i.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function ym(n){return{baseLanes:n,cachePool:null,transitions:null}}function bg(n,i,c){var g=i.pendingProps,b=wr.current,A=!1,q=(i.flags&128)!==0,xe;if((xe=q)||(xe=n!==null&&n.memoizedState===null?!1:(b&2)!==0),xe?(A=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(b|=1),cr(wr,b&1),n===null)return gt(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(q=g.children,n=g.fallback,A?(g=i.mode,A=i.child,q={mode:"hidden",children:q},(g&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=q):A=kh(q,g,0,null),n=nc(n,g,c,null),A.return=i,n.return=i,A.sibling=n,i.child=A,i.child.memoizedState=ym(c),i.memoizedState=xm,n):bm(i,q));if(b=n.memoizedState,b!==null&&(xe=b.dehydrated,xe!==null))return bv(n,i,q,g,xe,b,c);if(A){A=g.fallback,q=i.mode,b=n.child,xe=b.sibling;var Ne={mode:"hidden",children:g.children};return(q&1)===0&&i.child!==b?(g=i.child,g.childLanes=0,g.pendingProps=Ne,i.deletions=null):(g=pl(b,Ne),g.subtreeFlags=b.subtreeFlags&14680064),xe!==null?A=pl(xe,A):(A=nc(A,q,c,null),A.flags|=2),A.return=i,g.return=i,g.sibling=A,i.child=g,g=A,A=i.child,q=n.child.memoizedState,q=q===null?ym(c):{baseLanes:q.baseLanes|c,cachePool:null,transitions:q.transitions},A.memoizedState=q,A.childLanes=n.childLanes&~c,i.memoizedState=xm,g}return A=n.child,n=A.sibling,g=pl(A,{mode:"visible",children:g.children}),(i.mode&1)===0&&(g.lanes=c),g.return=i,g.sibling=null,n!==null&&(c=i.deletions,c===null?(i.deletions=[n],i.flags|=16):c.push(n)),i.child=g,i.memoizedState=null,g}function bm(n,i){return i=kh({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function hh(n,i,c,g){return g!==null&&st(g),Zr(i,n.child,null,c),n=bm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function bv(n,i,c,g,b,A,q){if(c)return i.flags&256?(i.flags&=-257,g=fm(Error(s(422))),hh(n,i,q,g)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(A=g.fallback,b=i.mode,g=kh({mode:"visible",children:g.children},b,0,null),A=nc(A,b,q,null),A.flags|=2,g.return=i,A.return=i,g.sibling=A,i.child=g,(i.mode&1)!==0&&Zr(i,n.child,null,q),i.child.memoizedState=ym(q),i.memoizedState=xm,A);if((i.mode&1)===0)return hh(n,i,q,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var xe=g.dgst;return g=xe,A=Error(s(419)),g=fm(A,g,void 0),hh(n,i,q,g)}if(xe=(q&n.childLanes)!==0,Vn||xe){if(g=qs,g!==null){switch(q&-q){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|q))!==0?0:b,b!==0&&b!==A.retryLane&&(A.retryLane=b,fr(n,b),oi(g,n,b,-1))}return Tm(),g=fm(Error(s(421))),hh(n,i,q,g)}return b.data==="$?"?(i.flags|=128,i.child=n.child,i=Dv.bind(null,n),b._reactRetry=i,null):(n=A.treeContext,qe=Js(b.nextSibling),Be=i,He=!0,Ge=null,n!==null&&(Q[ne++]=Le,Q[ne++]=ae,Q[ne++]=we,Le=n.id,ae=n.overflow,we=i),i=bm(i,g.children),i.flags|=4096,i)}function vg(n,i,c){n.lanes|=i;var g=n.alternate;g!==null&&(g.lanes|=i),nr(n.return,i,c)}function vm(n,i,c,g,b){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:b}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=c,A.tailMode=b)}function wg(n,i,c){var g=i.pendingProps,b=g.revealOrder,A=g.tail;if(Pn(n,i,g.children,c),g=wr.current,(g&2)!==0)g=g&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vg(n,c,i);else if(n.tag===19)vg(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(cr(wr,g),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)n=c.alternate,n!==null&&ca(n)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),vm(i,!1,b,c,A);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(n=b.alternate,n!==null&&ca(n)===null){i.child=b;break}n=b.sibling,b.sibling=c,c=b,b=n}vm(i,!0,c,null,A);break;case"together":vm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function fh(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function So(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),ec|=i.lanes,(c&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,c=pl(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=pl(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function vv(n,i,c){switch(i.tag){case 3:xg(i),ht();break;case 5:ah(i);break;case 1:un(i.type)&&No(i);break;case 4:il(i,i.stateNode.containerInfo);break;case 10:var g=i.type._context,b=i.memoizedProps.value;cr(ls,g._currentValue),g._currentValue=b;break;case 13:if(g=i.memoizedState,g!==null)return g.dehydrated!==null?(cr(wr,wr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?bg(n,i,c):(cr(wr,wr.current&1),n=So(n,i,c),n!==null?n.sibling:null);cr(wr,wr.current&1);break;case 19:if(g=(c&i.childLanes)!==0,(n.flags&128)!==0){if(g)return wg(n,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),cr(wr,wr.current),g)break;return null;case 22:case 23:return i.lanes=0,mg(n,i,c)}return So(n,i,c)}var Ng,wm,jg,Sg;Ng=function(n,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},wm=function(){},jg=function(n,i,c,g){var b=n.memoizedProps;if(b!==g){n=i.stateNode,ti(vs.current);var A=null;switch(c){case"input":b=Me(n,b),g=Me(n,g),A=[];break;case"select":b=Ae({},b,{value:void 0}),g=Ae({},g,{value:void 0}),A=[];break;case"textarea":b=je(n,b),g=je(n,g),A=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=rl)}Gt(c,g);var q;c=null;for(Te in b)if(!g.hasOwnProperty(Te)&&b.hasOwnProperty(Te)&&b[Te]!=null)if(Te==="style"){var xe=b[Te];for(q in xe)xe.hasOwnProperty(q)&&(c||(c={}),c[q]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(o.hasOwnProperty(Te)?A||(A=[]):(A=A||[]).push(Te,null));for(Te in g){var Ne=g[Te];if(xe=b?.[Te],g.hasOwnProperty(Te)&&Ne!==xe&&(Ne!=null||xe!=null))if(Te==="style")if(xe){for(q in xe)!xe.hasOwnProperty(q)||Ne&&Ne.hasOwnProperty(q)||(c||(c={}),c[q]="");for(q in Ne)Ne.hasOwnProperty(q)&&xe[q]!==Ne[q]&&(c||(c={}),c[q]=Ne[q])}else c||(A||(A=[]),A.push(Te,c)),c=Ne;else Te==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,xe=xe?xe.__html:void 0,Ne!=null&&xe!==Ne&&(A=A||[]).push(Te,Ne)):Te==="children"?typeof Ne!="string"&&typeof Ne!="number"||(A=A||[]).push(Te,""+Ne):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(o.hasOwnProperty(Te)?(Ne!=null&&Te==="onScroll"&&ur("scroll",n),A||xe===Ne||(A=[])):(A=A||[]).push(Te,Ne))}c&&(A=A||[]).push("style",c);var Te=A;(i.updateQueue=Te)&&(i.flags|=4)}},Sg=function(n,i,c,g){c!==g&&(i.flags|=4)};function su(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function fn(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,g=0;if(i)for(var b=n.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=n,b=b.sibling;else for(b=n.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=n,b=b.sibling;return n.subtreeFlags|=g,n.childLanes=c,i}function wv(n,i,c){var g=i.pendingProps;switch(De(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(i),null;case 1:return un(i.type)&&Gc(),fn(i),null;case 3:return g=i.stateNode,Ia(),lr(dn),lr(Ls),eu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(Ir(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ge!==null&&(Dm(Ge),Ge=null))),wm(n,i),fn(i),null;case 5:Xd(i);var b=ti(Fi.current);if(c=i.type,n!==null&&i.stateNode!=null)jg(n,i,c,g,b),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!g){if(i.stateNode===null)throw Error(s(166));return fn(i),null}if(n=ti(vs.current),Ir(i)){g=i.stateNode,c=i.type;var A=i.memoizedProps;switch(g[Da]=i,g[sl]=A,n=(i.mode&1)!==0,c){case"dialog":ur("cancel",g),ur("close",g);break;case"iframe":case"object":case"embed":ur("load",g);break;case"video":case"audio":for(b=0;b<Ei.length;b++)ur(Ei[b],g);break;case"source":ur("error",g);break;case"img":case"image":case"link":ur("error",g),ur("load",g);break;case"details":ur("toggle",g);break;case"input":me(g,A),ur("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!A.multiple},ur("invalid",g);break;case"textarea":Oe(g,A),ur("invalid",g)}Gt(c,A),b=null;for(var q in A)if(A.hasOwnProperty(q)){var xe=A[q];q==="children"?typeof xe=="string"?g.textContent!==xe&&(A.suppressHydrationWarning!==!0&&Wc(g.textContent,xe,n),b=["children",xe]):typeof xe=="number"&&g.textContent!==""+xe&&(A.suppressHydrationWarning!==!0&&Wc(g.textContent,xe,n),b=["children",""+xe]):o.hasOwnProperty(q)&&xe!=null&&q==="onScroll"&&ur("scroll",g)}switch(c){case"input":ue(g),et(g,A,!0);break;case"textarea":ue(g),Fe(g);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(g.onclick=rl)}g=b,i.updateQueue=g,g!==null&&(i.flags|=4)}else{q=b.nodeType===9?b:b.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=We(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=q.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=q.createElement(c,{is:g.is}):(n=q.createElement(c),c==="select"&&(q=n,g.multiple?q.multiple=!0:g.size&&(q.size=g.size))):n=q.createElementNS(n,c),n[Da]=i,n[sl]=g,Ng(n,i,!1,!1),i.stateNode=n;e:{switch(q=Nt(c,g),c){case"dialog":ur("cancel",n),ur("close",n),b=g;break;case"iframe":case"object":case"embed":ur("load",n),b=g;break;case"video":case"audio":for(b=0;b<Ei.length;b++)ur(Ei[b],n);b=g;break;case"source":ur("error",n),b=g;break;case"img":case"image":case"link":ur("error",n),ur("load",n),b=g;break;case"details":ur("toggle",n),b=g;break;case"input":me(n,g),b=Me(n,g),ur("invalid",n);break;case"option":b=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},b=Ae({},g,{value:void 0}),ur("invalid",n);break;case"textarea":Oe(n,g),b=je(n,g),ur("invalid",n);break;default:b=g}Gt(c,b),xe=b;for(A in xe)if(xe.hasOwnProperty(A)){var Ne=xe[A];A==="style"?lt(n,Ne):A==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&it(n,Ne)):A==="children"?typeof Ne=="string"?(c!=="textarea"||Ne!=="")&&wt(n,Ne):typeof Ne=="number"&&wt(n,""+Ne):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?Ne!=null&&A==="onScroll"&&ur("scroll",n):Ne!=null&&E(n,A,Ne,q))}switch(c){case"input":ue(n),et(n,g,!1);break;case"textarea":ue(n),Fe(n);break;case"option":g.value!=null&&n.setAttribute("value",""+ie(g.value));break;case"select":n.multiple=!!g.multiple,A=g.value,A!=null?ce(n,!!g.multiple,A,!1):g.defaultValue!=null&&ce(n,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(n.onclick=rl)}switch(c){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return fn(i),null;case 6:if(n&&i.stateNode!=null)Sg(n,i,n.memoizedProps,g);else{if(typeof g!="string"&&i.stateNode===null)throw Error(s(166));if(c=ti(Fi.current),ti(vs.current),Ir(i)){if(g=i.stateNode,c=i.memoizedProps,g[Da]=i,(A=g.nodeValue!==c)&&(n=Be,n!==null))switch(n.tag){case 3:Wc(g.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wc(g.nodeValue,c,(n.mode&1)!==0)}A&&(i.flags|=4)}else g=(c.nodeType===9?c:c.ownerDocument).createTextNode(g),g[Da]=i,i.stateNode=g}return fn(i),null;case 13:if(lr(wr),g=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&qe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Vt(),ht(),i.flags|=98560,A=!1;else if(A=Ir(i),g!==null&&g.dehydrated!==null){if(n===null){if(!A)throw Error(s(318));if(A=i.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));A[Da]=i}else ht(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fn(i),A=!1}else Ge!==null&&(Dm(Ge),Ge=null),A=!0;if(!A)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(wr.current&1)!==0?Ds===0&&(Ds=3):Tm())),i.updateQueue!==null&&(i.flags|=4),fn(i),null);case 4:return Ia(),wm(n,i),n===null&&xo(i.stateNode.containerInfo),fn(i),null;case 10:return kr(i.type._context),fn(i),null;case 17:return un(i.type)&&Gc(),fn(i),null;case 19:if(lr(wr),A=i.memoizedState,A===null)return fn(i),null;if(g=(i.flags&128)!==0,q=A.rendering,q===null)if(g)su(A,!1);else{if(Ds!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(q=ca(n),q!==null){for(i.flags|=128,su(A,!1),g=q.updateQueue,g!==null&&(i.updateQueue=g,i.flags|=4),i.subtreeFlags=0,g=c,c=i.child;c!==null;)A=c,n=g,A.flags&=14680066,q=A.alternate,q===null?(A.childLanes=0,A.lanes=n,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=q.childLanes,A.lanes=q.lanes,A.child=q.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=q.memoizedProps,A.memoizedState=q.memoizedState,A.updateQueue=q.updateQueue,A.type=q.type,n=q.dependencies,A.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return cr(wr,wr.current&1|2),i.child}n=n.sibling}A.tail!==null&&vr()>id&&(i.flags|=128,g=!0,su(A,!1),i.lanes=4194304)}else{if(!g)if(n=ca(q),n!==null){if(i.flags|=128,g=!0,c=n.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),su(A,!0),A.tail===null&&A.tailMode==="hidden"&&!q.alternate&&!He)return fn(i),null}else 2*vr()-A.renderingStartTime>id&&c!==1073741824&&(i.flags|=128,g=!0,su(A,!1),i.lanes=4194304);A.isBackwards?(q.sibling=i.child,i.child=q):(c=A.last,c!==null?c.sibling=q:i.child=q,A.last=q)}return A.tail!==null?(i=A.tail,A.rendering=i,A.tail=i.sibling,A.renderingStartTime=vr(),i.sibling=null,c=wr.current,cr(wr,g?c&1|2:c&1),i):(fn(i),null);case 22:case 23:return Fm(),g=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(i.flags|=8192),g&&(i.mode&1)!==0?(ha&1073741824)!==0&&(fn(i),i.subtreeFlags&6&&(i.flags|=8192)):fn(i),null;case 24:return null;case 25:return null}throw Error(s(156,i.tag))}function Nv(n,i){switch(De(i),i.tag){case 1:return un(i.type)&&Gc(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ia(),lr(dn),lr(Ls),eu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Xd(i),null;case 13:if(lr(wr),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ht()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return lr(wr),null;case 4:return Ia(),null;case 10:return kr(i.type._context),null;case 22:case 23:return Fm(),null;case 24:return null;default:return null}}var mh=!1,mn=!1,jv=typeof WeakSet=="function"?WeakSet:Set,mt=null;function nd(n,i){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){rs(n,i,g)}else c.current=null}function Nm(n,i,c){try{c()}catch(g){rs(n,i,g)}}var kg=!1;function Sv(n,i){if(Kl=Ho,n=Md(),Uc(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var b=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var q=0,xe=-1,Ne=-1,Te=0,Qe=0,Ze=n,Je=null;t:for(;;){for(var ct;Ze!==c||b!==0&&Ze.nodeType!==3||(xe=q+b),Ze!==A||g!==0&&Ze.nodeType!==3||(Ne=q+g),Ze.nodeType===3&&(q+=Ze.nodeValue.length),(ct=Ze.firstChild)!==null;)Je=Ze,Ze=ct;for(;;){if(Ze===n)break t;if(Je===c&&++Te===b&&(xe=q),Je===A&&++Qe===g&&(Ne=q),(ct=Ze.nextSibling)!==null)break;Ze=Je,Je=Ze.parentNode}Ze=ct}c=xe===-1||Ne===-1?null:{start:xe,end:Ne}}else c=null}c=c||{start:0,end:0}}else c=null;for(bo={focusedElem:n,selectionRange:c},Ho=!1,mt=i;mt!==null;)if(i=mt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,mt=n;else for(;mt!==null;){i=mt;try{var yt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var vt=yt.memoizedProps,ds=yt.memoizedState,Ee=i.stateNode,ke=Ee.getSnapshotBeforeUpdate(i.elementType===i.type?vt:ni(i.type,vt),ds);Ee.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Ie=i.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(tt){rs(i,i.return,tt)}if(n=i.sibling,n!==null){n.return=i.return,mt=n;break}mt=i.return}return yt=kg,kg=!1,yt}function nu(n,i,c){var g=i.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&n)===n){var A=b.destroy;b.destroy=void 0,A!==void 0&&Nm(i,c,A)}b=b.next}while(b!==g)}}function ph(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&n)===n){var g=c.create;c.destroy=g()}c=c.next}while(c!==i)}}function jm(n){var i=n.ref;if(i!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof i=="function"?i(n):i.current=n}}function Ag(n){var i=n.alternate;i!==null&&(n.alternate=null,Ag(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Da],delete i[sl],delete i[cn],delete i[om],delete i[lm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Cg(n){return n.tag===5||n.tag===3||n.tag===4}function Pg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Cg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sm(n,i,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(n,i):c.insertBefore(n,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(n,c)):(i=c,i.appendChild(n)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=rl));else if(g!==4&&(n=n.child,n!==null))for(Sm(n,i,c),n=n.sibling;n!==null;)Sm(n,i,c),n=n.sibling}function km(n,i,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(km(n,i,c),n=n.sibling;n!==null;)km(n,i,c),n=n.sibling}var Qs=null,ai=!1;function dl(n,i,c){for(c=c.child;c!==null;)_g(n,i,c),c=c.sibling}function _g(n,i,c){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(to,c)}catch{}switch(c.tag){case 5:mn||nd(c,i);case 6:var g=Qs,b=ai;Qs=null,dl(n,i,c),Qs=g,ai=b,Qs!==null&&(ai?(n=Qs,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Qs.removeChild(c.stateNode));break;case 18:Qs!==null&&(ai?(n=Qs,c=c.stateNode,n.nodeType===8?Yd(n.parentNode,c):n.nodeType===1&&Yd(n,c),ka(n)):Yd(Qs,c.stateNode));break;case 4:g=Qs,b=ai,Qs=c.stateNode.containerInfo,ai=!0,dl(n,i,c),Qs=g,ai=b;break;case 0:case 11:case 14:case 15:if(!mn&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var A=b,q=A.destroy;A=A.tag,q!==void 0&&((A&2)!==0||(A&4)!==0)&&Nm(c,i,q),b=b.next}while(b!==g)}dl(n,i,c);break;case 1:if(!mn&&(nd(c,i),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(xe){rs(c,i,xe)}dl(n,i,c);break;case 21:dl(n,i,c);break;case 22:c.mode&1?(mn=(g=mn)||c.memoizedState!==null,dl(n,i,c),mn=g):dl(n,i,c);break;default:dl(n,i,c)}}function Lg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new jv),i.forEach(function(g){var b=Iv.bind(null,n,g);c.has(g)||(c.add(g),g.then(b,b))})}}function ii(n,i){var c=i.deletions;if(c!==null)for(var g=0;g<c.length;g++){var b=c[g];try{var A=n,q=i,xe=q;e:for(;xe!==null;){switch(xe.tag){case 5:Qs=xe.stateNode,ai=!1;break e;case 3:Qs=xe.stateNode.containerInfo,ai=!0;break e;case 4:Qs=xe.stateNode.containerInfo,ai=!0;break e}xe=xe.return}if(Qs===null)throw Error(s(160));_g(A,q,b),Qs=null,ai=!1;var Ne=b.alternate;Ne!==null&&(Ne.return=null),b.return=null}catch(Te){rs(b,i,Te)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Eg(i,n),i=i.sibling}function Eg(n,i){var c=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ii(i,n),Oi(n),g&4){try{nu(3,n,n.return),ph(3,n)}catch(vt){rs(n,n.return,vt)}try{nu(5,n,n.return)}catch(vt){rs(n,n.return,vt)}}break;case 1:ii(i,n),Oi(n),g&512&&c!==null&&nd(c,c.return);break;case 5:if(ii(i,n),Oi(n),g&512&&c!==null&&nd(c,c.return),n.flags&32){var b=n.stateNode;try{wt(b,"")}catch(vt){rs(n,n.return,vt)}}if(g&4&&(b=n.stateNode,b!=null)){var A=n.memoizedProps,q=c!==null?c.memoizedProps:A,xe=n.type,Ne=n.updateQueue;if(n.updateQueue=null,Ne!==null)try{xe==="input"&&A.type==="radio"&&A.name!=null&&Ye(b,A),Nt(xe,q);var Te=Nt(xe,A);for(q=0;q<Ne.length;q+=2){var Qe=Ne[q],Ze=Ne[q+1];Qe==="style"?lt(b,Ze):Qe==="dangerouslySetInnerHTML"?it(b,Ze):Qe==="children"?wt(b,Ze):E(b,Qe,Ze,Te)}switch(xe){case"input":rt(b,A);break;case"textarea":Re(b,A);break;case"select":var Je=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!A.multiple;var ct=A.value;ct!=null?ce(b,!!A.multiple,ct,!1):Je!==!!A.multiple&&(A.defaultValue!=null?ce(b,!!A.multiple,A.defaultValue,!0):ce(b,!!A.multiple,A.multiple?[]:"",!1))}b[sl]=A}catch(vt){rs(n,n.return,vt)}}break;case 6:if(ii(i,n),Oi(n),g&4){if(n.stateNode===null)throw Error(s(162));b=n.stateNode,A=n.memoizedProps;try{b.nodeValue=A}catch(vt){rs(n,n.return,vt)}}break;case 3:if(ii(i,n),Oi(n),g&4&&c!==null&&c.memoizedState.isDehydrated)try{ka(i.containerInfo)}catch(vt){rs(n,n.return,vt)}break;case 4:ii(i,n),Oi(n);break;case 13:ii(i,n),Oi(n),b=n.child,b.flags&8192&&(A=b.memoizedState!==null,b.stateNode.isHidden=A,!A||b.alternate!==null&&b.alternate.memoizedState!==null||(Pm=vr())),g&4&&Lg(n);break;case 22:if(Qe=c!==null&&c.memoizedState!==null,n.mode&1?(mn=(Te=mn)||Qe,ii(i,n),mn=Te):ii(i,n),Oi(n),g&8192){if(Te=n.memoizedState!==null,(n.stateNode.isHidden=Te)&&!Qe&&(n.mode&1)!==0)for(mt=n,Qe=n.child;Qe!==null;){for(Ze=mt=Qe;mt!==null;){switch(Je=mt,ct=Je.child,Je.tag){case 0:case 11:case 14:case 15:nu(4,Je,Je.return);break;case 1:nd(Je,Je.return);var yt=Je.stateNode;if(typeof yt.componentWillUnmount=="function"){g=Je,c=Je.return;try{i=g,yt.props=i.memoizedProps,yt.state=i.memoizedState,yt.componentWillUnmount()}catch(vt){rs(g,c,vt)}}break;case 5:nd(Je,Je.return);break;case 22:if(Je.memoizedState!==null){Fg(Ze);continue}}ct!==null?(ct.return=Je,mt=ct):Fg(Ze)}Qe=Qe.sibling}e:for(Qe=null,Ze=n;;){if(Ze.tag===5){if(Qe===null){Qe=Ze;try{b=Ze.stateNode,Te?(A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(xe=Ze.stateNode,Ne=Ze.memoizedProps.style,q=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,xe.style.display=qt("display",q))}catch(vt){rs(n,n.return,vt)}}}else if(Ze.tag===6){if(Qe===null)try{Ze.stateNode.nodeValue=Te?"":Ze.memoizedProps}catch(vt){rs(n,n.return,vt)}}else if((Ze.tag!==22&&Ze.tag!==23||Ze.memoizedState===null||Ze===n)&&Ze.child!==null){Ze.child.return=Ze,Ze=Ze.child;continue}if(Ze===n)break e;for(;Ze.sibling===null;){if(Ze.return===null||Ze.return===n)break e;Qe===Ze&&(Qe=null),Ze=Ze.return}Qe===Ze&&(Qe=null),Ze.sibling.return=Ze.return,Ze=Ze.sibling}}break;case 19:ii(i,n),Oi(n),g&4&&Lg(n);break;case 21:break;default:ii(i,n),Oi(n)}}function Oi(n){var i=n.flags;if(i&2){try{e:{for(var c=n.return;c!==null;){if(Cg(c)){var g=c;break e}c=c.return}throw Error(s(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(wt(b,""),g.flags&=-33);var A=Pg(n);km(n,A,b);break;case 3:case 4:var q=g.stateNode.containerInfo,xe=Pg(n);Sm(n,xe,q);break;default:throw Error(s(161))}}catch(Ne){rs(n,n.return,Ne)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function kv(n,i,c){mt=n,Dg(n)}function Dg(n,i,c){for(var g=(n.mode&1)!==0;mt!==null;){var b=mt,A=b.child;if(b.tag===22&&g){var q=b.memoizedState!==null||mh;if(!q){var xe=b.alternate,Ne=xe!==null&&xe.memoizedState!==null||mn;xe=mh;var Te=mn;if(mh=q,(mn=Ne)&&!Te)for(mt=b;mt!==null;)q=mt,Ne=q.child,q.tag===22&&q.memoizedState!==null?Tg(b):Ne!==null?(Ne.return=q,mt=Ne):Tg(b);for(;A!==null;)mt=A,Dg(A),A=A.sibling;mt=b,mh=xe,mn=Te}Ig(n)}else(b.subtreeFlags&8772)!==0&&A!==null?(A.return=b,mt=A):Ig(n)}}function Ig(n){for(;mt!==null;){var i=mt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:mn||ph(5,i);break;case 1:var g=i.stateNode;if(i.flags&4&&!mn)if(c===null)g.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:ni(i.type,c.memoizedProps);g.componentDidUpdate(b,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var A=i.updateQueue;A!==null&&$n(i,A,g);break;case 3:var q=i.updateQueue;if(q!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}$n(i,q,c)}break;case 5:var xe=i.stateNode;if(c===null&&i.flags&4){c=xe;var Ne=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&c.focus();break;case"img":Ne.src&&(c.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Te=i.alternate;if(Te!==null){var Qe=Te.memoizedState;if(Qe!==null){var Ze=Qe.dehydrated;Ze!==null&&ka(Ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}mn||i.flags&512&&jm(i)}catch(Je){rs(i,i.return,Je)}}if(i===n){mt=null;break}if(c=i.sibling,c!==null){c.return=i.return,mt=c;break}mt=i.return}}function Fg(n){for(;mt!==null;){var i=mt;if(i===n){mt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,mt=c;break}mt=i.return}}function Tg(n){for(;mt!==null;){var i=mt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{ph(4,i)}catch(Ne){rs(i,c,Ne)}break;case 1:var g=i.stateNode;if(typeof g.componentDidMount=="function"){var b=i.return;try{g.componentDidMount()}catch(Ne){rs(i,b,Ne)}}var A=i.return;try{jm(i)}catch(Ne){rs(i,A,Ne)}break;case 5:var q=i.return;try{jm(i)}catch(Ne){rs(i,q,Ne)}}}catch(Ne){rs(i,i.return,Ne)}if(i===n){mt=null;break}var xe=i.sibling;if(xe!==null){xe.return=i.return,mt=xe;break}mt=i.return}}var Av=Math.ceil,gh=M.ReactCurrentDispatcher,Am=M.ReactCurrentOwner,Oa=M.ReactCurrentBatchConfig,ar=0,qs=null,ws=null,Xs=0,ha=0,ad=oa(0),Ds=0,au=null,ec=0,xh=0,Cm=0,iu=null,Hn=null,Pm=0,id=1/0,ko=null,yh=!1,_m=null,ul=null,bh=!1,hl=null,vh=0,ou=0,Lm=null,wh=-1,Nh=0;function _n(){return(ar&6)!==0?vr():wh!==-1?wh:wh=vr()}function fl(n){return(n.mode&1)===0?1:(ar&2)!==0&&Xs!==0?Xs&-Xs:$r.transition!==null?(Nh===0&&(Nh=Lc()),Nh):(n=er,n!==0||(n=window.event,n=n===void 0?16:co(n.type)),n)}function oi(n,i,c,g){if(50<ou)throw ou=0,Lm=null,Error(s(185));ao(n,c,g),((ar&2)===0||n!==qs)&&(n===qs&&((ar&2)===0&&(xh|=c),Ds===4&&ml(n,Xs)),Wn(n,g),c===1&&ar===0&&(i.mode&1)===0&&(id=vr()+500,Jl&&_()))}function Wn(n,i){var c=n.callbackNode;Ur(n,i);var g=tn(n,n===qs?Xs:0);if(g===0)c!==null&&eo(c),n.callbackNode=null,n.callbackPriority=0;else if(i=g&-g,n.callbackPriority!==i){if(c!=null&&eo(c),i===1)n.tag===0?j(Rg.bind(null,n)):x(Rg.bind(null,n)),am(function(){(ar&6)===0&&_()}),c=null;else{switch(za(g)){case 1:c=Bo;break;case 4:c=Nn;break;case 16:c=Ni;break;case 536870912:c=Uo;break;default:c=Ni}c=Hg(c,Og.bind(null,n))}n.callbackPriority=i,n.callbackNode=c}}function Og(n,i){if(wh=-1,Nh=0,(ar&6)!==0)throw Error(s(327));var c=n.callbackNode;if(od()&&n.callbackNode!==c)return null;var g=tn(n,n===qs?Xs:0);if(g===0)return null;if((g&30)!==0||(g&n.expiredLanes)!==0||i)i=jh(n,g);else{i=g;var b=ar;ar|=2;var A=Bg();(qs!==n||Xs!==i)&&(ko=null,id=vr()+500,rc(n,i));do try{_v();break}catch(xe){Mg(n,xe)}while(!0);sr(),gh.current=A,ar=b,ws!==null?i=0:(qs=null,Xs=0,i=Ds)}if(i!==0){if(i===2&&(b=no(n),b!==0&&(g=b,i=Em(n,b))),i===1)throw c=au,rc(n,0),ml(n,g),Wn(n,vr()),c;if(i===6)ml(n,g);else{if(b=n.current.alternate,(g&30)===0&&!Cv(b)&&(i=jh(n,g),i===2&&(A=no(n),A!==0&&(g=A,i=Em(n,A))),i===1))throw c=au,rc(n,0),ml(n,g),Wn(n,vr()),c;switch(n.finishedWork=b,n.finishedLanes=g,i){case 0:case 1:throw Error(s(345));case 2:sc(n,Hn,ko);break;case 3:if(ml(n,g),(g&130023424)===g&&(i=Pm+500-vr(),10<i)){if(tn(n,0)!==0)break;if(b=n.suspendedLanes,(b&g)!==g){_n(),n.pingedLanes|=n.suspendedLanes&b;break}n.timeoutHandle=Kd(sc.bind(null,n,Hn,ko),i);break}sc(n,Hn,ko);break;case 4:if(ml(n,g),(g&4194240)===g)break;for(i=n.eventTimes,b=-1;0<g;){var q=31-Ts(g);A=1<<q,q=i[q],q>b&&(b=q),g&=~A}if(g=b,g=vr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Av(g/1960))-g,10<g){n.timeoutHandle=Kd(sc.bind(null,n,Hn,ko),g);break}sc(n,Hn,ko);break;case 5:sc(n,Hn,ko);break;default:throw Error(s(329))}}}return Wn(n,vr()),n.callbackNode===c?Og.bind(null,n):null}function Em(n,i){var c=iu;return n.current.memoizedState.isDehydrated&&(rc(n,i).flags|=256),n=jh(n,i),n!==2&&(i=Hn,Hn=c,i!==null&&Dm(i)),n}function Dm(n){Hn===null?Hn=n:Hn.push.apply(Hn,n)}function Cv(n){for(var i=n;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var b=c[g],A=b.getSnapshot;b=b.value;try{if(!os(A(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ml(n,i){for(i&=~Cm,i&=~xh,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var c=31-Ts(i),g=1<<c;n[c]=-1,i&=~g}}function Rg(n){if((ar&6)!==0)throw Error(s(327));od();var i=tn(n,0);if((i&1)===0)return Wn(n,vr()),null;var c=jh(n,i);if(n.tag!==0&&c===2){var g=no(n);g!==0&&(i=g,c=Em(n,g))}if(c===1)throw c=au,rc(n,0),ml(n,i),Wn(n,vr()),c;if(c===6)throw Error(s(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,sc(n,Hn,ko),Wn(n,vr()),null}function Im(n,i){var c=ar;ar|=1;try{return n(i)}finally{ar=c,ar===0&&(id=vr()+500,Jl&&_())}}function tc(n){hl!==null&&hl.tag===0&&(ar&6)===0&&od();var i=ar;ar|=1;var c=Oa.transition,g=er;try{if(Oa.transition=null,er=1,n)return n()}finally{er=g,Oa.transition=c,ar=i,(ar&6)===0&&_()}}function Fm(){ha=ad.current,lr(ad)}function rc(n,i){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,th(c)),ws!==null)for(c=ws.return;c!==null;){var g=c;switch(De(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Gc();break;case 3:Ia(),lr(dn),lr(Ls),eu();break;case 5:Xd(g);break;case 4:Ia();break;case 13:lr(wr);break;case 19:lr(wr);break;case 10:kr(g.type._context);break;case 22:case 23:Fm()}c=c.return}if(qs=n,ws=n=pl(n.current,null),Xs=ha=i,Ds=0,au=null,Cm=xh=ec=0,Hn=iu=null,hr!==null){for(i=0;i<hr.length;i++)if(c=hr[i],g=c.interleaved,g!==null){c.interleaved=null;var b=g.next,A=c.pending;if(A!==null){var q=A.next;A.next=b,g.next=q}c.pending=g}hr=null}return n}function Mg(n,i){do{var c=ws;try{if(sr(),Kc.current=dh,ol){for(var g=Ar.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}ol=!1}if(Fa=0,Gr=ts=Ar=null,ri=!1,ll=0,Am.current=null,c===null||c.return===null){Ds=1,au=i,ws=null;break}e:{var A=n,q=c.return,xe=c,Ne=i;if(i=Xs,xe.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var Te=Ne,Qe=xe,Ze=Qe.tag;if((Qe.mode&1)===0&&(Ze===0||Ze===11||Ze===15)){var Je=Qe.alternate;Je?(Qe.updateQueue=Je.updateQueue,Qe.memoizedState=Je.memoizedState,Qe.lanes=Je.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var ct=cg(q);if(ct!==null){ct.flags&=-257,dg(ct,q,xe,A,i),ct.mode&1&&lg(A,Te,i),i=ct,Ne=Te;var yt=i.updateQueue;if(yt===null){var vt=new Set;vt.add(Ne),i.updateQueue=vt}else yt.add(Ne);break e}else{if((i&1)===0){lg(A,Te,i),Tm();break e}Ne=Error(s(426))}}else if(He&&xe.mode&1){var ds=cg(q);if(ds!==null){(ds.flags&65536)===0&&(ds.flags|=256),dg(ds,q,xe,A,i),st(sd(Ne,xe));break e}}A=Ne=sd(Ne,xe),Ds!==4&&(Ds=2),iu===null?iu=[A]:iu.push(A),A=q;do{switch(A.tag){case 3:A.flags|=65536,i&=-i,A.lanes|=i;var Ee=ig(A,Ne,i);mr(A,Ee);break e;case 1:xe=Ne;var ke=A.type,Ie=A.stateNode;if((A.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(ul===null||!ul.has(Ie)))){A.flags|=65536,i&=-i,A.lanes|=i;var tt=og(A,xe,i);mr(A,tt);break e}}A=A.return}while(A!==null)}qg(c)}catch(kt){i=kt,ws===c&&c!==null&&(ws=c=c.return);continue}break}while(!0)}function Bg(){var n=gh.current;return gh.current=dh,n===null?dh:n}function Tm(){(Ds===0||Ds===3||Ds===2)&&(Ds=4),qs===null||(ec&268435455)===0&&(xh&268435455)===0||ml(qs,Xs)}function jh(n,i){var c=ar;ar|=2;var g=Bg();(qs!==n||Xs!==i)&&(ko=null,rc(n,i));do try{Pv();break}catch(b){Mg(n,b)}while(!0);if(sr(),ar=c,gh.current=g,ws!==null)throw Error(s(261));return qs=null,Xs=0,Ds}function Pv(){for(;ws!==null;)Ug(ws)}function _v(){for(;ws!==null&&!Mo();)Ug(ws)}function Ug(n){var i=Vg(n.alternate,n,ha);n.memoizedProps=n.pendingProps,i===null?qg(n):ws=i,Am.current=null}function qg(n){var i=n;do{var c=i.alternate;if(n=i.return,(i.flags&32768)===0){if(c=wv(c,i,ha),c!==null){ws=c;return}}else{if(c=Nv(c,i),c!==null){c.flags&=32767,ws=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ds=6,ws=null;return}}if(i=i.sibling,i!==null){ws=i;return}ws=i=n}while(i!==null);Ds===0&&(Ds=5)}function sc(n,i,c){var g=er,b=Oa.transition;try{Oa.transition=null,er=1,Lv(n,i,c,g)}finally{Oa.transition=b,er=g}return null}function Lv(n,i,c,g){do od();while(hl!==null);if((ar&6)!==0)throw Error(s(327));c=n.finishedWork;var b=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0;var A=c.lanes|c.childLanes;if(Na(n,A),n===qs&&(ws=qs=null,Xs=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||bh||(bh=!0,Hg(Ni,function(){return od(),null})),A=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||A){A=Oa.transition,Oa.transition=null;var q=er;er=1;var xe=ar;ar|=4,Am.current=null,Sv(n,c),Eg(c,n),Ju(bo),Ho=!!Kl,bo=Kl=null,n.current=c,kv(c),Fd(),ar=xe,er=q,Oa.transition=A}else n.current=c;if(bh&&(bh=!1,hl=n,vh=b),A=n.pendingLanes,A===0&&(ul=null),Pc(c.stateNode),Wn(n,vr()),i!==null)for(g=n.onRecoverableError,c=0;c<i.length;c++)b=i[c],g(b.value,{componentStack:b.stack,digest:b.digest});if(yh)throw yh=!1,n=_m,_m=null,n;return(vh&1)!==0&&n.tag!==0&&od(),A=n.pendingLanes,(A&1)!==0?n===Lm?ou++:(ou=0,Lm=n):ou=0,_(),null}function od(){if(hl!==null){var n=za(vh),i=Oa.transition,c=er;try{if(Oa.transition=null,er=16>n?16:n,hl===null)var g=!1;else{if(n=hl,hl=null,vh=0,(ar&6)!==0)throw Error(s(331));var b=ar;for(ar|=4,mt=n.current;mt!==null;){var A=mt,q=A.child;if((mt.flags&16)!==0){var xe=A.deletions;if(xe!==null){for(var Ne=0;Ne<xe.length;Ne++){var Te=xe[Ne];for(mt=Te;mt!==null;){var Qe=mt;switch(Qe.tag){case 0:case 11:case 15:nu(8,Qe,A)}var Ze=Qe.child;if(Ze!==null)Ze.return=Qe,mt=Ze;else for(;mt!==null;){Qe=mt;var Je=Qe.sibling,ct=Qe.return;if(Ag(Qe),Qe===Te){mt=null;break}if(Je!==null){Je.return=ct,mt=Je;break}mt=ct}}}var yt=A.alternate;if(yt!==null){var vt=yt.child;if(vt!==null){yt.child=null;do{var ds=vt.sibling;vt.sibling=null,vt=ds}while(vt!==null)}}mt=A}}if((A.subtreeFlags&2064)!==0&&q!==null)q.return=A,mt=q;else e:for(;mt!==null;){if(A=mt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:nu(9,A,A.return)}var Ee=A.sibling;if(Ee!==null){Ee.return=A.return,mt=Ee;break e}mt=A.return}}var ke=n.current;for(mt=ke;mt!==null;){q=mt;var Ie=q.child;if((q.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=q,mt=Ie;else e:for(q=ke;mt!==null;){if(xe=mt,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:ph(9,xe)}}catch(kt){rs(xe,xe.return,kt)}if(xe===q){mt=null;break e}var tt=xe.sibling;if(tt!==null){tt.return=xe.return,mt=tt;break e}mt=xe.return}}if(ar=b,_(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(to,n)}catch{}g=!0}return g}finally{er=c,Oa.transition=i}}return!1}function zg(n,i,c){i=sd(c,i),i=ig(n,i,1),n=Hr(n,i,1),i=_n(),n!==null&&(ao(n,1,i),Wn(n,i))}function rs(n,i,c){if(n.tag===3)zg(n,n,c);else for(;i!==null;){if(i.tag===3){zg(i,n,c);break}else if(i.tag===1){var g=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ul===null||!ul.has(g))){n=sd(c,n),n=og(i,n,1),i=Hr(i,n,1),n=_n(),i!==null&&(ao(i,1,n),Wn(i,n));break}}i=i.return}}function Ev(n,i,c){var g=n.pingCache;g!==null&&g.delete(i),i=_n(),n.pingedLanes|=n.suspendedLanes&c,qs===n&&(Xs&c)===c&&(Ds===4||Ds===3&&(Xs&130023424)===Xs&&500>vr()-Pm?rc(n,0):Cm|=c),Wn(n,i)}function $g(n,i){i===0&&((n.mode&1)===0?i=1:(i=Mn,Mn<<=1,(Mn&130023424)===0&&(Mn=4194304)));var c=_n();n=fr(n,i),n!==null&&(ao(n,i,c),Wn(n,c))}function Dv(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),$g(n,c)}function Iv(n,i){var c=0;switch(n.tag){case 13:var g=n.stateNode,b=n.memoizedState;b!==null&&(c=b.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(i),$g(n,c)}var Vg;Vg=function(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps||dn.current)Vn=!0;else{if((n.lanes&c)===0&&(i.flags&128)===0)return Vn=!1,vv(n,i,c);Vn=(n.flags&131072)!==0}else Vn=!1,He&&(i.flags&1048576)!==0&&_e(i,K,i.index);switch(i.lanes=0,i.tag){case 2:var g=i.type;fh(n,i),n=i.pendingProps;var b=al(i,Ls.current);Fr(i,c),b=Ql(null,i,g,n,b,c);var A=Ta();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,un(g)?(A=!0,No(i)):A=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Es(i),b.updater=uh,i.stateNode=b,b._reactInternals=i,hm(i,g,n,c),i=gm(null,i,g,!0,A,c)):(i.tag=0,He&&A&&ze(i),Pn(null,i,b,c),i=i.child),i;case 16:g=i.elementType;e:{switch(fh(n,i),n=i.pendingProps,b=g._init,g=b(g._payload),i.type=g,b=i.tag=Tv(g),n=ni(g,n),b){case 0:i=pm(null,i,g,n,c);break e;case 1:i=gg(null,i,g,n,c);break e;case 11:i=ug(null,i,g,n,c);break e;case 14:i=hg(null,i,g,ni(g.type,n),c);break e}throw Error(s(306,g,""))}return i;case 0:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:ni(g,b),pm(n,i,g,b,c);case 1:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:ni(g,b),gg(n,i,g,b,c);case 3:e:{if(xg(i),n===null)throw Error(s(387));g=i.pendingProps,A=i.memoizedState,b=A.element,hn(n,i),Us(i,g,null,c);var q=i.memoizedState;if(g=q.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){b=sd(Error(s(423)),i),i=yg(n,i,g,c,b);break e}else if(g!==b){b=sd(Error(s(424)),i),i=yg(n,i,g,c,b);break e}else for(qe=Js(i.stateNode.containerInfo.firstChild),Be=i,He=!0,Ge=null,c=Lr(i,null,g,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ht(),g===b){i=So(n,i,c);break e}Pn(n,i,g,c)}i=i.child}return i;case 5:return ah(i),n===null&&gt(i),g=i.type,b=i.pendingProps,A=n!==null?n.memoizedProps:null,q=b.children,Gd(g,b)?q=null:A!==null&&Gd(g,A)&&(i.flags|=32),pg(n,i),Pn(n,i,q,c),i.child;case 6:return n===null&&gt(i),null;case 13:return bg(n,i,c);case 4:return il(i,i.stateNode.containerInfo),g=i.pendingProps,n===null?i.child=Zr(i,null,g,c):Pn(n,i,g,c),i.child;case 11:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:ni(g,b),ug(n,i,g,b,c);case 7:return Pn(n,i,i.pendingProps,c),i.child;case 8:return Pn(n,i,i.pendingProps.children,c),i.child;case 12:return Pn(n,i,i.pendingProps.children,c),i.child;case 10:e:{if(g=i.type._context,b=i.pendingProps,A=i.memoizedProps,q=b.value,cr(ls,g._currentValue),g._currentValue=q,A!==null)if(os(A.value,q)){if(A.children===b.children&&!dn.current){i=So(n,i,c);break e}}else for(A=i.child,A!==null&&(A.return=i);A!==null;){var xe=A.dependencies;if(xe!==null){q=A.child;for(var Ne=xe.firstContext;Ne!==null;){if(Ne.context===g){if(A.tag===1){Ne=Vr(-1,c&-c),Ne.tag=2;var Te=A.updateQueue;if(Te!==null){Te=Te.shared;var Qe=Te.pending;Qe===null?Ne.next=Ne:(Ne.next=Qe.next,Qe.next=Ne),Te.pending=Ne}}A.lanes|=c,Ne=A.alternate,Ne!==null&&(Ne.lanes|=c),nr(A.return,c,i),xe.lanes|=c;break}Ne=Ne.next}}else if(A.tag===10)q=A.type===i.type?null:A.child;else if(A.tag===18){if(q=A.return,q===null)throw Error(s(341));q.lanes|=c,xe=q.alternate,xe!==null&&(xe.lanes|=c),nr(q,c,i),q=A.sibling}else q=A.child;if(q!==null)q.return=A;else for(q=A;q!==null;){if(q===i){q=null;break}if(A=q.sibling,A!==null){A.return=q.return,q=A;break}q=q.return}A=q}Pn(n,i,b.children,c),i=i.child}return i;case 9:return b=i.type,g=i.pendingProps.children,Fr(i,c),b=Tr(b),g=g(b),i.flags|=1,Pn(n,i,g,c),i.child;case 14:return g=i.type,b=ni(g,i.pendingProps),b=ni(g.type,b),hg(n,i,g,b,c);case 15:return fg(n,i,i.type,i.pendingProps,c);case 17:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:ni(g,b),fh(n,i),i.tag=1,un(g)?(n=!0,No(i)):n=!1,Fr(i,c),ng(i,g,b),hm(i,g,b,c),gm(null,i,g,!0,n,c);case 19:return wg(n,i,c);case 22:return mg(n,i,c)}throw Error(s(156,i.tag))};function Hg(n,i){return Zi(n,i)}function Fv(n,i,c,g){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(n,i,c,g){return new Fv(n,i,c,g)}function Om(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Tv(n){if(typeof n=="function")return Om(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U)return 11;if(n===Y)return 14}return 2}function pl(n,i){var c=n.alternate;return c===null?(c=Ra(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function Sh(n,i,c,g,b,A){var q=2;if(g=n,typeof n=="function")Om(n)&&(q=1);else if(typeof n=="string")q=5;else e:switch(n){case X:return nc(c.children,b,A,i);case J:q=8,b|=8;break;case G:return n=Ra(12,c,i,b|2),n.elementType=G,n.lanes=A,n;case B:return n=Ra(13,c,i,b),n.elementType=B,n.lanes=A,n;case W:return n=Ra(19,c,i,b),n.elementType=W,n.lanes=A,n;case F:return kh(c,b,A,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pe:q=10;break e;case I:q=9;break e;case U:q=11;break e;case Y:q=14;break e;case le:q=16,g=null;break e}throw Error(s(130,n==null?n:typeof n,""))}return i=Ra(q,c,i,b),i.elementType=n,i.type=g,i.lanes=A,i}function nc(n,i,c,g){return n=Ra(7,n,g,i),n.lanes=c,n}function kh(n,i,c,g){return n=Ra(22,n,g,i),n.elementType=F,n.lanes=c,n.stateNode={isHidden:!1},n}function Rm(n,i,c){return n=Ra(6,n,null,i),n.lanes=c,n}function Mm(n,i,c){return i=Ra(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ov(n,i,c,g,b){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dl(0),this.expirationTimes=Dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Bm(n,i,c,g,b,A,q,xe,Ne){return n=new Ov(n,i,c,xe,Ne),i===1?(i=1,A===!0&&(i|=8)):i=0,A=Ra(3,null,null,i),n.current=A,A.stateNode=n,A.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Es(A),n}function Rv(n,i,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:g==null?null:""+g,children:n,containerInfo:i,implementation:c}}function Wg(n){if(!n)return Ii;n=n._reactInternals;e:{if(Ps(n)!==n||n.tag!==1)throw Error(s(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(un(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(s(171))}if(n.tag===1){var c=n.type;if(un(c))return Qd(n,c,i)}return i}function Gg(n,i,c,g,b,A,q,xe,Ne){return n=Bm(c,g,!0,n,b,A,q,xe,Ne),n.context=Wg(null),c=n.current,g=_n(),b=fl(c),A=Vr(g,b),A.callback=i??null,Hr(c,A,b),n.current.lanes=b,ao(n,b,g),Wn(n,g),n}function Ah(n,i,c,g){var b=i.current,A=_n(),q=fl(b);return c=Wg(c),i.context===null?i.context=c:i.pendingContext=c,i=Vr(A,q),i.payload={element:n},g=g===void 0?null:g,g!==null&&(i.callback=g),n=Hr(b,i,q),n!==null&&(oi(n,b,q,A),Bs(n,b,q)),q}function Ch(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Kg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function Um(n,i){Kg(n,i),(n=n.alternate)&&Kg(n,i)}function Mv(){return null}var Yg=typeof reportError=="function"?reportError:function(n){console.error(n)};function qm(n){this._internalRoot=n}Ph.prototype.render=qm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));Ah(n,i,null,null)},Ph.prototype.unmount=qm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;tc(function(){Ah(null,n,null,null)}),i[Rs]=null}};function Ph(n){this._internalRoot=n}Ph.prototype.unstable_scheduleHydration=function(n){if(n){var i=Dc();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Sa.length&&i!==0&&i<Sa[c].priority;c++);Sa.splice(c,0,n),c===0&&Fc(n)}};function zm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _h(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function Bv(n,i,c,g,b){if(b){if(typeof g=="function"){var A=g;g=function(){var Te=Ch(q);A.call(Te)}}var q=Gg(i,g,n,0,null,!1,!1,"",Jg);return n._reactRootContainer=q,n[Rs]=q.current,xo(n.nodeType===8?n.parentNode:n),tc(),q}for(;b=n.lastChild;)n.removeChild(b);if(typeof g=="function"){var xe=g;g=function(){var Te=Ch(Ne);xe.call(Te)}}var Ne=Bm(n,0,!1,null,null,!1,!1,"",Jg);return n._reactRootContainer=Ne,n[Rs]=Ne.current,xo(n.nodeType===8?n.parentNode:n),tc(function(){Ah(i,Ne,c,g)}),Ne}function Lh(n,i,c,g,b){var A=c._reactRootContainer;if(A){var q=A;if(typeof b=="function"){var xe=b;b=function(){var Ne=Ch(q);xe.call(Ne)}}Ah(i,q,n,b)}else q=Bv(c,i,n,b,g);return Ch(q)}zo=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var c=ta(i.pendingLanes);c!==0&&(qo(i,c|1),Wn(i,vr()),(ar&6)===0&&(id=vr()+500,_()))}break;case 13:tc(function(){var g=fr(n,1);if(g!==null){var b=_n();oi(g,n,1,b)}}),Um(n,1)}},Il=function(n){if(n.tag===13){var i=fr(n,134217728);if(i!==null){var c=_n();oi(i,n,134217728,c)}Um(n,134217728)}},Ec=function(n){if(n.tag===13){var i=fl(n),c=fr(n,i);if(c!==null){var g=_n();oi(c,n,i,g)}Um(n,i)}},Dc=function(){return er},$o=function(n,i){var c=er;try{return er=n,i()}finally{er=c}},Pr=function(n,i,c){switch(i){case"input":if(rt(n,c),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var g=c[i];if(g!==n&&g.form===n.form){var b=Yl(g);if(!b)throw Error(s(90));Pe(g),rt(g,b)}}}break;case"textarea":Re(n,c);break;case"select":i=c.value,i!=null&&ce(n,!!c.multiple,i,!1)}},Cs=Im,va=tc;var Uv={usingClientEntryPoint:!1,Events:[nl,vo,Yl,tr,bi,Im]},lu={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qv={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ea(n),n===null?null:n.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||Mv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{to=Eh.inject(qv),jn=Eh}catch{}}return Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv,Gn.createPortal=function(n,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(i))throw Error(s(200));return Rv(n,i,null,c)},Gn.createRoot=function(n,i){if(!zm(n))throw Error(s(299));var c=!1,g="",b=Yg;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=Bm(n,1,!1,null,null,c,!1,g,b),n[Rs]=i.current,xo(n.nodeType===8?n.parentNode:n),new qm(i)},Gn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=ea(i),n=n===null?null:n.stateNode,n},Gn.flushSync=function(n){return tc(n)},Gn.hydrate=function(n,i,c){if(!_h(i))throw Error(s(200));return Lh(null,n,i,!0,c)},Gn.hydrateRoot=function(n,i,c){if(!zm(n))throw Error(s(405));var g=c!=null&&c.hydratedSources||null,b=!1,A="",q=Yg;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(A=c.identifierPrefix),c.onRecoverableError!==void 0&&(q=c.onRecoverableError)),i=Gg(i,null,n,1,c??null,b,!1,A,q),n[Rs]=i.current,xo(n),g)for(n=0;n<g.length;n++)c=g[n],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new Ph(i)},Gn.render=function(n,i,c){if(!_h(i))throw Error(s(200));return Lh(null,n,i,!1,c)},Gn.unmountComponentAtNode=function(n){if(!_h(n))throw Error(s(40));return n._reactRootContainer?(tc(function(){Lh(null,null,n,!1,function(){n._reactRootContainer=null,n[Rs]=null})}),!0):!1},Gn.unstable_batchedUpdates=Im,Gn.unstable_renderSubtreeIntoContainer=function(n,i,c,g){if(!_h(c))throw Error(s(200));if(n==null||n._reactInternals===void 0)throw Error(s(38));return Lh(n,i,c,!1,g)},Gn.version="18.3.1-next-f1338f8080-20240426",Gn}var nx;function _1(){if(nx)return Hm.exports;nx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Hm.exports=Jv(),Hm.exports}var ax;function Qv(){if(ax)return Dh;ax=1;var t=_1();return Dh.createRoot=t.createRoot,Dh.hydrateRoot=t.hydrateRoot,Dh}var Xv=Qv();const Zv=P1(Xv);var Km={exports:{}},Ym={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function e5(){if(ix)return Ym;ix=1;var t=Tf();function r(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,o=t.useRef,l=t.useEffect,d=t.useMemo,u=t.useDebugValue;return Ym.useSyncExternalStoreWithSelector=function(h,m,p,v,N){var y=o(null);if(y.current===null){var k={hasValue:!1,value:null};y.current=k}else k=y.current;y=d(function(){function S(z){if(!L){if(L=!0,P=z,z=v(z),N!==void 0&&k.hasValue){var he=k.value;if(N(he,z))return E=he}return E=z}if(he=E,s(P,z))return he;var X=v(z);return N!==void 0&&N(he,X)?(P=z,he):(P=z,E=X)}var L=!1,P,E,M=p===void 0?null:p;return[function(){return S(m())},M===null?void 0:function(){return S(M())}]},[m,p,v,N]);var C=a(h,y[0],y[1]);return l(function(){k.hasValue=!0,k.value=C},[C]),u(C),C},Ym}var ox;function t5(){return ox||(ox=1,Km.exports=e5()),Km.exports}var r5=t5();function s5(t){t()}function n5(){let t=null,r=null;return{clear(){t=null,r=null},notify(){s5(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){const s=[];let a=t;for(;a;)s.push(a),a=a.next;return s},subscribe(s){let a=!0;const o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!a||t===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var lx={notify(){},get:()=>[]};function a5(t,r){let s,a=lx,o=0,l=!1;function d(C){p();const S=a.subscribe(C);let L=!1;return()=>{L||(L=!0,S(),v())}}function u(){a.notify()}function h(){k.onStateChange&&k.onStateChange()}function m(){return l}function p(){o++,s||(s=t.subscribe(h),a=n5())}function v(){o--,s&&o===0&&(s(),s=void 0,a.clear(),a=lx)}function N(){l||(l=!0,p())}function y(){l&&(l=!1,v())}const k={addNestedSub:d,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:m,trySubscribe:N,tryUnsubscribe:y,getListeners:()=>a};return k}var i5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o5=i5(),l5=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c5=l5(),d5=()=>o5||c5?R.useLayoutEffect:R.useEffect,u5=d5(),h5=Symbol.for("react-redux-context"),f5=typeof globalThis<"u"?globalThis:{};function m5(){if(!R.createContext)return{};const t=f5[h5]??=new Map;let r=t.get(R.createContext);return r||(r=R.createContext(null),t.set(R.createContext,r)),r}var Cl=m5();function p5(t){const{children:r,context:s,serverState:a,store:o}=t,l=R.useMemo(()=>{const h=a5(o);return{store:o,subscription:h,getServerState:a?()=>a:void 0}},[o,a]),d=R.useMemo(()=>o.getState(),[o]);u5(()=>{const{subscription:h}=l;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[l,d]);const u=s||Cl;return R.createElement(u.Provider,{value:l},r)}var g5=p5;function b0(t=Cl){return function(){return R.useContext(t)}}var L1=b0();function E1(t=Cl){const r=t===Cl?L1:b0(t),s=()=>{const{store:a}=r();return a};return Object.assign(s,{withTypes:()=>s}),s}var x5=E1();function y5(t=Cl){const r=t===Cl?x5:E1(t),s=()=>r().dispatch;return Object.assign(s,{withTypes:()=>s}),s}var As=y5(),b5=(t,r)=>t===r;function v5(t=Cl){const r=t===Cl?L1:b0(t),s=(a,o={})=>{const{equalityFn:l=b5}=typeof o=="function"?{equalityFn:o}:o,d=r(),{store:u,subscription:h,getServerState:m}=d;R.useRef(!0);const p=R.useCallback({[a.name](N){return a(N)}}[a.name],[a]),v=r5.useSyncExternalStoreWithSelector(h.addNestedSub,u.getState,m||u.getState,p,l);return R.useDebugValue(v),v};return Object.assign(s,{withTypes:()=>s}),s}var Ft=v5(),Of=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rf=typeof window>"u"||"Deno"in globalThis;function ci(){}function w5(t,r){return typeof t=="function"?t(r):t}function N5(t){return typeof t=="number"&&t>=0&&t!==1/0}function j5(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Rp(t,r){return typeof t=="function"?t(r):t}function S5(t,r){return typeof t=="function"?t(r):t}function cx(t,r){const{type:s="all",exact:a,fetchStatus:o,predicate:l,queryKey:d,stale:u}=t;if(d){if(a){if(r.queryHash!==v0(d,r.options))return!1}else if(!_u(r.queryKey,d))return!1}if(s!=="all"){const h=r.isActive();if(s==="active"&&!h||s==="inactive"&&h)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||o&&o!==r.state.fetchStatus||l&&!l(r))}function dx(t,r){const{exact:s,status:a,predicate:o,mutationKey:l}=t;if(l){if(!r.options.mutationKey)return!1;if(s){if(Pu(r.options.mutationKey)!==Pu(l))return!1}else if(!_u(r.options.mutationKey,l))return!1}return!(a&&r.state.status!==a||o&&!o(r))}function v0(t,r){return(r?.queryKeyHashFn||Pu)(t)}function Pu(t){return JSON.stringify(t,(r,s)=>Mp(s)?Object.keys(s).sort().reduce((a,o)=>(a[o]=s[o],a),{}):s)}function _u(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(s=>_u(t[s],r[s])):!1}function D1(t,r){if(t===r)return t;const s=ux(t)&&ux(r);if(s||Mp(t)&&Mp(r)){const a=s?t:Object.keys(t),o=a.length,l=s?r:Object.keys(r),d=l.length,u=s?[]:{},h=new Set(a);let m=0;for(let p=0;p<d;p++){const v=s?p:l[p];(!s&&h.has(v)||s)&&t[v]===void 0&&r[v]===void 0?(u[v]=void 0,m++):(u[v]=D1(t[v],r[v]),u[v]===t[v]&&t[v]!==void 0&&m++)}return o===d&&m===o?t:u}return r}function ux(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Mp(t){if(!hx(t))return!1;const r=t.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!hx(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hx(t){return Object.prototype.toString.call(t)==="[object Object]"}function k5(t){return new Promise(r=>{setTimeout(r,t)})}function A5(t,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,r):s.structuralSharing!==!1?D1(t,r):r}function C5(t,r,s=0){const a=[...t,r];return s&&a.length>s?a.slice(1):a}function P5(t,r,s=0){const a=[r,...t];return s&&a.length>s?a.slice(0,-1):a}var w0=Symbol();function I1(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===w0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _5=class extends Of{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Rf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},F1=new _5,L5=class extends Of{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Rf&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},xf=new L5;function E5(){let t,r;const s=new Promise((o,l)=>{t=o,r=l});s.status="pending",s.catch(()=>{});function a(o){Object.assign(s,o),delete s.resolve,delete s.reject}return s.resolve=o=>{a({status:"fulfilled",value:o}),t(o)},s.reject=o=>{a({status:"rejected",reason:o}),r(o)},s}function D5(t){return Math.min(1e3*2**t,3e4)}function T1(t){return(t??"online")==="online"?xf.isOnline():!0}var Bp=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function O1(t){let r=!1,s=0,a;const o=E5(),l=()=>o.status!=="pending",d=C=>{if(!l()){const S=new Bp(C);N(S),t.onCancel?.(S)}},u=()=>{r=!0},h=()=>{r=!1},m=()=>F1.isFocused()&&(t.networkMode==="always"||xf.isOnline())&&t.canRun(),p=()=>T1(t.networkMode)&&t.canRun(),v=C=>{l()||(a?.(),o.resolve(C))},N=C=>{l()||(a?.(),o.reject(C))},y=()=>new Promise(C=>{a=S=>{(l()||m())&&C(S)},t.onPause?.()}).then(()=>{a=void 0,l()||t.onContinue?.()}),k=()=>{if(l())return;let C;const S=s===0?t.initialPromise:void 0;try{C=S??t.fn()}catch(L){C=Promise.reject(L)}Promise.resolve(C).then(v).catch(L=>{if(l())return;const P=t.retry??(Rf?0:3),E=t.retryDelay??D5,M=typeof E=="function"?E(s,L):E,z=P===!0||typeof P=="number"&&s<P||typeof P=="function"&&P(s,L);if(r||!z){N(L);return}s++,t.onFail?.(s,L),k5(M).then(()=>m()?void 0:y()).then(()=>{r?N(L):k()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(a?.(),o),cancelRetry:u,continueRetry:h,canStart:p,start:()=>(p()?k():y().then(k),o)}}var I5=t=>setTimeout(t,0);function F5(){let t=[],r=0,s=u=>{u()},a=u=>{u()},o=I5;const l=u=>{r?t.push(u):o(()=>{s(u)})},d=()=>{const u=t;t=[],u.length&&o(()=>{a(()=>{u.forEach(h=>{s(h)})})})};return{batch:u=>{let h;r++;try{h=u()}finally{r--,r||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{s=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{o=u}}}var Dn=F5(),R1=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),N5(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},T5=class extends R1{#e;#t;#r;#n;#s;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=R5(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,r){const s=A5(this.state.data,t,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(t,r){this.#a({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#s?.promise;return this.#s?.cancel(t),r?r.then(ci).catch(ci):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>S5(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Rp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!j5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,r){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const s=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},o=()=>{const u=I1(this.options,r),m=(()=>{const p={client:this.#n,queryKey:this.queryKey,meta:this.meta};return a(p),p})();return this.#o=!1,this.options.persister?this.options.persister(u,m,this):u(m)},d=(()=>{const u={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:o};return a(u),u})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=O1({initialPromise:r?.initialPromise,fn:d.fetchFn,onCancel:u=>{u instanceof Bp&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(u,h)=>{this.#a({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Bp){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...O5(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?a:void 0,a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function O5(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T1(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function R5(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,s=r!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var M5=class extends Of{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,s){const a=r.queryKey,o=r.queryHash??v0(a,r);let l=this.get(o);return l||(l=new T5({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Dn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>cx(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>cx(t,s)):r}notify(t){Dn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Dn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Dn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},B5=class extends R1{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||U5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(r=>r!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#n({type:"continue"})};this.#r=O1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#n({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",a=!this.#r.canStart();try{if(s)r();else{this.#n({type:"pending",variables:t,isPaused:a}),await this.#t.config.onMutate?.(t,this);const l=await this.options.onMutate?.(t);l!==this.state.context&&this.#n({type:"pending",context:l,variables:t,isPaused:a})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,t,this.state.context,this),await this.options.onSuccess?.(o,t,this.state.context),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,t,this.state.context),this.#n({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,t,this.state.context,this),await this.options.onError?.(o,t,this.state.context),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,t,this.state.context),o}finally{this.#n({type:"error",error:o})}}finally{this.#t.runNext(this)}}#n(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Dn.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function U5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var q5=class extends Of{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,r,s){const a=new B5({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){this.#e.add(t);const r=Ih(t);if(typeof r=="string"){const s=this.#t.get(r);s?s.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=Ih(t);if(typeof r=="string"){const s=this.#t.get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ih(t);if(typeof r=="string"){const a=this.#t.get(r)?.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){const r=Ih(t);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Dn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(s=>dx(r,s))}findAll(t={}){return this.getAll().filter(r=>dx(t,r))}notify(t){Dn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Dn.batch(()=>Promise.all(t.map(r=>r.continue().catch(ci))))}};function Ih(t){return t.options.scope?.id}function fx(t){return{onFetch:(r,s)=>{const a=r.options,o=r.fetchOptions?.meta?.fetchMore?.direction,l=r.state.data?.pages||[],d=r.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let p=!1;const v=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(r.signal.aborted?p=!0:r.signal.addEventListener("abort",()=>{p=!0}),r.signal)})},N=I1(r.options,r.fetchOptions),y=async(k,C,S)=>{if(p)return Promise.reject();if(C==null&&k.pages.length)return Promise.resolve(k);const P=(()=>{const he={client:r.client,queryKey:r.queryKey,pageParam:C,direction:S?"backward":"forward",meta:r.options.meta};return v(he),he})(),E=await N(P),{maxPages:M}=r.options,z=S?P5:C5;return{pages:z(k.pages,E,M),pageParams:z(k.pageParams,C,M)}};if(o&&l.length){const k=o==="backward",C=k?z5:mx,S={pages:l,pageParams:d},L=C(a,S);u=await y(S,L,k)}else{const k=t??l.length;do{const C=h===0?d[0]??a.initialPageParam:mx(a,u);if(h>0&&C==null)break;u=await y(u,C),h++}while(h<k)}return u};r.options.persister?r.fetchFn=()=>r.options.persister?.(m,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s):r.fetchFn=m}}}function mx(t,{pages:r,pageParams:s}){const a=r.length-1;return r.length>0?t.getNextPageParam(r[a],r,s[a],s):void 0}function z5(t,{pages:r,pageParams:s}){return r.length>0?t.getPreviousPageParam?.(r[0],r,s[0],s):void 0}var $5=class{#e;#t;#r;#n;#s;#i;#o;#a;constructor(t={}){this.#e=t.queryCache||new M5,this.#t=t.mutationCache||new q5,this.#r=t.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=F1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=xf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),s=this.#e.build(this,r),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Rp(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:s})=>{const a=s.data;return[r,a]})}setQueryData(t,r,s){const a=this.defaultQueryOptions({queryKey:t}),l=this.#e.get(a.queryHash)?.state.data,d=w5(r,l);if(d!==void 0)return this.#e.build(this,a).setData(d,{...s,manual:!0})}setQueriesData(t,r,s){return Dn.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,r,s)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;Dn.batch(()=>{r.findAll(t).forEach(s=>{r.remove(s)})})}resetQueries(t,r){const s=this.#e;return Dn.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const s={revert:!0,...r},a=Dn.batch(()=>this.#e.findAll(t).map(o=>o.cancel(s)));return Promise.all(a).then(ci).catch(ci)}invalidateQueries(t,r={}){return Dn.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},a=Dn.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,s);return s.throwOnError||(l=l.catch(ci)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(ci)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const s=this.#e.build(this,r);return s.isStaleByTime(Rp(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ci).catch(ci)}fetchInfiniteQuery(t){return t.behavior=fx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ci).catch(ci)}ensureInfiniteQueryData(t){return t.behavior=fx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,r){this.#n.set(Pu(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#n.values()],s={};return r.forEach(a=>{_u(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,r){this.#s.set(Pu(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#s.values()],s={};return r.forEach(a=>{_u(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=v0(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===w0&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},V5=R.createContext(void 0),H5=({client:t,children:r})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(V5.Provider,{value:t,children:r}));_1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Lu.apply(this,arguments)}var wl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wl||(wl={}));const px="popstate";function W5(t){t===void 0&&(t={});function r(a,o){let{pathname:l,search:d,hash:u}=a.location;return Up("",{pathname:l,search:d,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:yf(o)}return K5(r,s,null,t)}function ms(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function M1(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function G5(){return Math.random().toString(36).substr(2,8)}function gx(t,r){return{usr:t.state,key:t.key,idx:r}}function Up(t,r,s,a){return s===void 0&&(s=null),Lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?Pd(r):r,{state:s,key:r&&r.key||a||G5()})}function yf(t){let{pathname:r="/",search:s="",hash:a=""}=t;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Pd(t){let r={};if(t){let s=t.indexOf("#");s>=0&&(r.hash=t.substr(s),t=t.substr(0,s));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function K5(t,r,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,u=wl.Pop,h=null,m=p();m==null&&(m=0,d.replaceState(Lu({},d.state,{idx:m}),""));function p(){return(d.state||{idx:null}).idx}function v(){u=wl.Pop;let S=p(),L=S==null?null:S-m;m=S,h&&h({action:u,location:C.location,delta:L})}function N(S,L){u=wl.Push;let P=Up(C.location,S,L);m=p()+1;let E=gx(P,m),M=C.createHref(P);try{d.pushState(E,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;o.location.assign(M)}l&&h&&h({action:u,location:C.location,delta:1})}function y(S,L){u=wl.Replace;let P=Up(C.location,S,L);m=p();let E=gx(P,m),M=C.createHref(P);d.replaceState(E,"",M),l&&h&&h({action:u,location:C.location,delta:0})}function k(S){let L=o.location.origin!=="null"?o.location.origin:o.location.href,P=typeof S=="string"?S:yf(S);return P=P.replace(/ $/,"%20"),ms(L,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,L)}let C={get action(){return u},get location(){return t(o,d)},listen(S){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(px,v),h=S,()=>{o.removeEventListener(px,v),h=null}},createHref(S){return r(o,S)},createURL:k,encodeLocation(S){let L=k(S);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:y,go(S){return d.go(S)}};return C}var xx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xx||(xx={}));function Y5(t,r,s){return s===void 0&&(s="/"),J5(t,r,s)}function J5(t,r,s,a){let o=typeof r=="string"?Pd(r):r,l=N0(o.pathname||"/",s);if(l==null)return null;let d=B1(t);Q5(d);let u=null;for(let h=0;u==null&&h<d.length;++h){let m=cw(l);u=iw(d[h],m)}return u}function B1(t,r,s,a){r===void 0&&(r=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(l,d,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};h.relativePath.startsWith("/")&&(ms(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let m=jl([a,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(ms(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),B1(l.children,r,p,m)),!(l.path==null&&!l.index)&&r.push({path:m,score:nw(m,l.index),routesMeta:p})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))o(l,d);else for(let h of U1(l.path))o(l,d,h)}),r}function U1(t){let r=t.split("/");if(r.length===0)return[];let[s,...a]=r,o=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=U1(a.join("/")),u=[];return u.push(...d.map(h=>h===""?l:[l,h].join("/"))),o&&u.push(...d),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function Q5(t){t.sort((r,s)=>r.score!==s.score?s.score-r.score:aw(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const X5=/^:[\w-]+$/,Z5=3,ew=2,tw=1,rw=10,sw=-2,yx=t=>t==="*";function nw(t,r){let s=t.split("/"),a=s.length;return s.some(yx)&&(a+=sw),r&&(a+=ew),s.filter(o=>!yx(o)).reduce((o,l)=>o+(X5.test(l)?Z5:l===""?tw:rw),a)}function aw(t,r){return t.length===r.length&&t.slice(0,-1).every((a,o)=>a===r[o])?t[t.length-1]-r[r.length-1]:0}function iw(t,r,s){let{routesMeta:a}=t,o={},l="/",d=[];for(let u=0;u<a.length;++u){let h=a[u],m=u===a.length-1,p=l==="/"?r:r.slice(l.length)||"/",v=ow({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),N=h.route;if(!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:jl([l,v.pathname]),pathnameBase:fw(jl([l,v.pathnameBase])),route:N}),v.pathnameBase!=="/"&&(l=jl([l,v.pathnameBase]))}return d}function ow(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,a]=lw(t.path,t.caseSensitive,t.end),o=r.match(s);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:a.reduce((m,p,v)=>{let{paramName:N,isOptional:y}=p;if(N==="*"){let C=u[v]||"";d=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const k=u[v];return y&&!k?m[N]=void 0:m[N]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:t}}function lw(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),M1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,h)=>(a.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),a]}function cw(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return M1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function N0(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=t.charAt(s);return a&&a!=="/"?null:t.slice(s)||"/"}function dw(t,r){r===void 0&&(r="/");let{pathname:s,search:a="",hash:o=""}=typeof t=="string"?Pd(t):t;return{pathname:s?s.startsWith("/")?s:uw(s,r):r,search:mw(a),hash:pw(o)}}function uw(t,r){let s=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Jm(t,r,s,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hw(t){return t.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function j0(t,r){let s=hw(t);return r?s.map((a,o)=>o===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function S0(t,r,s,a){a===void 0&&(a=!1);let o;typeof t=="string"?o=Pd(t):(o=Lu({},t),ms(!o.pathname||!o.pathname.includes("?"),Jm("?","pathname","search",o)),ms(!o.pathname||!o.pathname.includes("#"),Jm("#","pathname","hash",o)),ms(!o.search||!o.search.includes("#"),Jm("#","search","hash",o)));let l=t===""||o.pathname==="",d=l?"/":o.pathname,u;if(d==null)u=s;else{let v=r.length-1;if(!a&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),v-=1;o.pathname=N.join("/")}u=v>=0?r[v]:"/"}let h=dw(o,u),m=d&&d!=="/"&&d.endsWith("/"),p=(l||d===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}const jl=t=>t.join("/").replace(/\/\/+/g,"/"),fw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const q1=["post","put","patch","delete"];new Set(q1);const xw=["get",...q1];new Set(xw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Eu.apply(this,arguments)}const k0=R.createContext(null),yw=R.createContext(null),Ll=R.createContext(null),Mf=R.createContext(null),Ji=R.createContext({outlet:null,matches:[],isDataRoute:!1}),z1=R.createContext(null);function bw(t,r){let{relative:s}=r===void 0?{}:r;_d()||ms(!1);let{basename:a,navigator:o}=R.useContext(Ll),{hash:l,pathname:d,search:u}=V1(t,{relative:s}),h=d;return a!=="/"&&(h=d==="/"?a:jl([a,d])),o.createHref({pathname:h,search:u,hash:l})}function _d(){return R.useContext(Mf)!=null}function Nc(){return _d()||ms(!1),R.useContext(Mf).location}function $1(t){R.useContext(Ll).static||R.useLayoutEffect(t)}function pi(){let{isDataRoute:t}=R.useContext(Ji);return t?Fw():vw()}function vw(){_d()||ms(!1);let t=R.useContext(k0),{basename:r,future:s,navigator:a}=R.useContext(Ll),{matches:o}=R.useContext(Ji),{pathname:l}=Nc(),d=JSON.stringify(j0(o,s.v7_relativeSplatPath)),u=R.useRef(!1);return $1(()=>{u.current=!0}),R.useCallback(function(m,p){if(p===void 0&&(p={}),!u.current)return;if(typeof m=="number"){a.go(m);return}let v=S0(m,JSON.parse(d),l,p.relative==="path");t==null&&r!=="/"&&(v.pathname=v.pathname==="/"?r:jl([r,v.pathname])),(p.replace?a.replace:a.push)(v,p.state,p)},[r,a,d,l,t])}const ww=R.createContext(null);function Nw(t){let r=R.useContext(Ji).outlet;return r&&R.createElement(ww.Provider,{value:t},r)}function A0(){let{matches:t}=R.useContext(Ji),r=t[t.length-1];return r?r.params:{}}function V1(t,r){let{relative:s}=r===void 0?{}:r,{future:a}=R.useContext(Ll),{matches:o}=R.useContext(Ji),{pathname:l}=Nc(),d=JSON.stringify(j0(o,a.v7_relativeSplatPath));return R.useMemo(()=>S0(t,JSON.parse(d),l,s==="path"),[t,d,l,s])}function jw(t,r){return Sw(t,r)}function Sw(t,r,s,a){_d()||ms(!1);let{navigator:o}=R.useContext(Ll),{matches:l}=R.useContext(Ji),d=l[l.length-1],u=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let m=Nc(),p;if(r){var v;let S=typeof r=="string"?Pd(r):r;h==="/"||(v=S.pathname)!=null&&v.startsWith(h)||ms(!1),p=S}else p=m;let N=p.pathname||"/",y=N;if(h!=="/"){let S=h.replace(/^\//,"").split("/");y="/"+N.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=Y5(t,{pathname:y}),C=_w(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:jl([h,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:jl([h,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,s,a);return r&&C?R.createElement(Mf.Provider,{value:{location:Eu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:wl.Pop}},C):C}function kw(){let t=Iw(),r=gw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},r),s?R.createElement("pre",{style:o},s):null,null)}const Aw=R.createElement(kw,null);class Cw extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?R.createElement(Ji.Provider,{value:this.props.routeContext},R.createElement(z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pw(t){let{routeContext:r,match:s,children:a}=t,o=R.useContext(k0);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),R.createElement(Ji.Provider,{value:r},a)}function _w(t,r,s,a){var o;if(r===void 0&&(r=[]),s===void 0&&(s=null),a===void 0&&(a=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let d=t,u=(o=s)==null?void 0:o.errors;if(u!=null){let p=d.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);p>=0||ms(!1),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,m=-1;if(s&&a&&a.v7_partialHydration)for(let p=0;p<d.length;p++){let v=d[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=p),v.route.id){let{loaderData:N,errors:y}=s,k=v.route.loader&&N[v.route.id]===void 0&&(!y||y[v.route.id]===void 0);if(v.route.lazy||k){h=!0,m>=0?d=d.slice(0,m+1):d=[d[0]];break}}}return d.reduceRight((p,v,N)=>{let y,k=!1,C=null,S=null;s&&(y=u&&v.route.id?u[v.route.id]:void 0,C=v.route.errorElement||Aw,h&&(m<0&&N===0?(Tw("route-fallback"),k=!0,S=null):m===N&&(k=!0,S=v.route.hydrateFallbackElement||null)));let L=r.concat(d.slice(0,N+1)),P=()=>{let E;return y?E=C:k?E=S:v.route.Component?E=R.createElement(v.route.Component,null):v.route.element?E=v.route.element:E=p,R.createElement(Pw,{match:v,routeContext:{outlet:p,matches:L,isDataRoute:s!=null},children:E})};return s&&(v.route.ErrorBoundary||v.route.errorElement||N===0)?R.createElement(Cw,{location:s.location,revalidation:s.revalidation,component:C,error:y,children:P(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):P()},null)}var H1=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(H1||{}),W1=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(W1||{});function Lw(t){let r=R.useContext(k0);return r||ms(!1),r}function Ew(t){let r=R.useContext(yw);return r||ms(!1),r}function Dw(t){let r=R.useContext(Ji);return r||ms(!1),r}function G1(t){let r=Dw(),s=r.matches[r.matches.length-1];return s.route.id||ms(!1),s.route.id}function Iw(){var t;let r=R.useContext(z1),s=Ew(),a=G1();return r!==void 0?r:(t=s.errors)==null?void 0:t[a]}function Fw(){let{router:t}=Lw(H1.UseNavigateStable),r=G1(W1.UseNavigateStable),s=R.useRef(!1);return $1(()=>{s.current=!0}),R.useCallback(function(o,l){l===void 0&&(l={}),s.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Eu({fromRouteId:r},l)))},[t,r])}const bx={};function Tw(t,r,s){bx[t]||(bx[t]=!0)}function Ow(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function Ui(t){let{to:r,replace:s,state:a,relative:o}=t;_d()||ms(!1);let{future:l,static:d}=R.useContext(Ll),{matches:u}=R.useContext(Ji),{pathname:h}=Nc(),m=pi(),p=S0(r,j0(u,l.v7_relativeSplatPath),h,o==="path"),v=JSON.stringify(p);return R.useEffect(()=>m(JSON.parse(v),{replace:s,state:a,relative:o}),[m,v,o,s,a]),null}function K1(t){return Nw(t.context)}function Qt(t){ms(!1)}function Rw(t){let{basename:r="/",children:s=null,location:a,navigationType:o=wl.Pop,navigator:l,static:d=!1,future:u}=t;_d()&&ms(!1);let h=r.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:h,navigator:l,static:d,future:Eu({v7_relativeSplatPath:!1},u)}),[h,u,l,d]);typeof a=="string"&&(a=Pd(a));let{pathname:p="/",search:v="",hash:N="",state:y=null,key:k="default"}=a,C=R.useMemo(()=>{let S=N0(p,h);return S==null?null:{location:{pathname:S,search:v,hash:N,state:y,key:k},navigationType:o}},[h,p,v,N,y,k,o]);return C==null?null:R.createElement(Ll.Provider,{value:m},R.createElement(Mf.Provider,{children:s,value:C}))}function Mw(t){let{children:r,location:s}=t;return jw(qp(r),s)}new Promise(()=>{});function qp(t,r){r===void 0&&(r=[]);let s=[];return R.Children.forEach(t,(a,o)=>{if(!R.isValidElement(a))return;let l=[...r,o];if(a.type===R.Fragment){s.push.apply(s,qp(a.props.children,l));return}a.type!==Qt&&ms(!1),!a.props.index||!a.props.children||ms(!1);let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=qp(a.props.children,l)),s.push(d)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},zp.apply(this,arguments)}function Bw(t,r){if(t==null)return{};var s={},a=Object.keys(t),o,l;for(l=0;l<a.length;l++)o=a[l],!(r.indexOf(o)>=0)&&(s[o]=t[o]);return s}function Uw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qw(t,r){return t.button===0&&(!r||r==="_self")&&!Uw(t)}function $p(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,s)=>{let a=t[s];return r.concat(Array.isArray(a)?a.map(o=>[s,o]):[[s,a]])},[]))}function zw(t,r){let s=$p(t);return r&&r.forEach((a,o)=>{s.has(o)||r.getAll(o).forEach(l=>{s.append(o,l)})}),s}const $w=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vw="6";try{window.__reactRouterVersion=Vw}catch{}const Hw="startTransition",vx=Gv[Hw];function Ww(t){let{basename:r,children:s,future:a,window:o}=t,l=R.useRef();l.current==null&&(l.current=W5({window:o,v5Compat:!0}));let d=l.current,[u,h]=R.useState({action:d.action,location:d.location}),{v7_startTransition:m}=a||{},p=R.useCallback(v=>{m&&vx?vx(()=>h(v)):h(v)},[h,m]);return R.useLayoutEffect(()=>d.listen(p),[d,p]),R.useEffect(()=>Ow(a),[a]),R.createElement(Rw,{basename:r,children:s,location:u.location,navigationType:u.action,navigator:d,future:a})}const Gw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Do=R.forwardRef(function(r,s){let{onClick:a,relative:o,reloadDocument:l,replace:d,state:u,target:h,to:m,preventScrollReset:p,viewTransition:v}=r,N=Bw(r,$w),{basename:y}=R.useContext(Ll),k,C=!1;if(typeof m=="string"&&Kw.test(m)&&(k=m,Gw))try{let E=new URL(window.location.href),M=m.startsWith("//")?new URL(E.protocol+m):new URL(m),z=N0(M.pathname,y);M.origin===E.origin&&z!=null?m=z+M.search+M.hash:C=!0}catch{}let S=bw(m,{relative:o}),L=Yw(m,{replace:d,state:u,target:h,preventScrollReset:p,relative:o,viewTransition:v});function P(E){a&&a(E),E.defaultPrevented||L(E)}return R.createElement("a",zp({},N,{href:k||S,onClick:C||l?a:P,ref:s,target:h}))});var wx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wx||(wx={}));var Nx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nx||(Nx={}));function Yw(t,r){let{target:s,replace:a,state:o,preventScrollReset:l,relative:d,viewTransition:u}=r===void 0?{}:r,h=pi(),m=Nc(),p=V1(t,{relative:d});return R.useCallback(v=>{if(qw(v,s)){v.preventDefault();let N=a!==void 0?a:yf(m)===yf(p);h(t,{replace:N,state:o,preventScrollReset:l,relative:d,viewTransition:u})}},[m,h,p,a,o,s,t,l,d,u])}function qu(t){let r=R.useRef($p(t)),s=R.useRef(!1),a=Nc(),o=R.useMemo(()=>zw(a.search,s.current?null:r.current),[a.search]),l=pi(),d=R.useCallback((u,h)=>{const m=$p(typeof u=="function"?u(o):u);s.current=!0,l("?"+m,h)},[l,o]);return[o,d]}let Jw={data:""},Qw=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Jw,Xw=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Zw=/\/\*[^]*?\*\/|  +/g,jx=/\n+/g,bl=(t,r)=>{let s="",a="",o="";for(let l in t){let d=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+d+";":a+=l[1]=="f"?bl(d,l):l+"{"+bl(d,l[1]=="k"?"":r)+"}":typeof d=="object"?a+=bl(d,r?r.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):d!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=bl.p?bl.p(l,d):l+":"+d+";")}return s+(r&&o?r+"{"+o+"}":o)+a},Ao={},Y1=t=>{if(typeof t=="object"){let r="";for(let s in t)r+=s+Y1(t[s]);return r}return t},eN=(t,r,s,a,o)=>{let l=Y1(t),d=Ao[l]||(Ao[l]=(h=>{let m=0,p=11;for(;m<h.length;)p=101*p+h.charCodeAt(m++)>>>0;return"go"+p})(l));if(!Ao[d]){let h=l!==t?t:(m=>{let p,v,N=[{}];for(;p=Xw.exec(m.replace(Zw,""));)p[4]?N.shift():p[3]?(v=p[3].replace(jx," ").trim(),N.unshift(N[0][v]=N[0][v]||{})):N[0][p[1]]=p[2].replace(jx," ").trim();return N[0]})(t);Ao[d]=bl(o?{["@keyframes "+d]:h}:h,s?"":"."+d)}let u=s&&Ao.g?Ao.g:null;return s&&(Ao.g=Ao[d]),((h,m,p,v)=>{v?m.data=m.data.replace(v,h):m.data.indexOf(h)===-1&&(m.data=p?h+m.data:m.data+h)})(Ao[d],r,a,u),d},tN=(t,r,s)=>t.reduce((a,o,l)=>{let d=r[l];if(d&&d.call){let u=d(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;d=h?"."+h:u&&typeof u=="object"?u.props?"":bl(u,""):u===!1?"":u}return a+o+(d??"")},"");function Bf(t){let r=this||{},s=t.call?t(r.p):t;return eN(s.unshift?s.raw?tN(s,[].slice.call(arguments,1),r.p):s.reduce((a,o)=>Object.assign(a,o&&o.call?o(r.p):o),{}):s,Qw(r.target),r.g,r.o,r.k)}let J1,Vp,Hp;Bf.bind({g:1});let Fo=Bf.bind({k:1});function rN(t,r,s,a){bl.p=r,J1=t,Vp=s,Hp=a}function El(t,r){let s=this||{};return function(){let a=arguments;function o(l,d){let u=Object.assign({},l),h=u.className||o.className;s.p=Object.assign({theme:Vp&&Vp()},u),s.o=/ *go\d+/.test(h),u.className=Bf.apply(s,a)+(h?" "+h:"");let m=t;return t[0]&&(m=u.as||t,delete u.as),Hp&&m[0]&&Hp(u),J1(m,u)}return o}}var sN=t=>typeof t=="function",bf=(t,r)=>sN(t)?t(r):t,nN=(()=>{let t=0;return()=>(++t).toString()})(),Q1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),aN=20,C0="default",X1=(t,r)=>{let{toastLimit:s}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(d=>d.id===r.toast.id?{...d,...r.toast}:d)};case 2:let{toast:a}=r;return X1(t,{type:t.toasts.find(d=>d.id===a.id)?1:0,toast:a});case 3:let{toastId:o}=r;return{...t,toasts:t.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(d=>d.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let l=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+l}))}}},Kh=[],Z1={toasts:[],pausedAt:void 0,settings:{toastLimit:aN}},zi={},e2=(t,r=C0)=>{zi[r]=X1(zi[r]||Z1,t),Kh.forEach(([s,a])=>{s===r&&a(zi[r])})},t2=t=>Object.keys(zi).forEach(r=>e2(t,r)),iN=t=>Object.keys(zi).find(r=>zi[r].toasts.some(s=>s.id===t)),Uf=(t=C0)=>r=>{e2(r,t)},oN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},lN=(t={},r=C0)=>{let[s,a]=R.useState(zi[r]||Z1),o=R.useRef(zi[r]);R.useEffect(()=>(o.current!==zi[r]&&a(zi[r]),Kh.push([r,a]),()=>{let d=Kh.findIndex(([u])=>u===r);d>-1&&Kh.splice(d,1)}),[r]);let l=s.toasts.map(d=>{var u,h,m;return{...t,...t[d.type],...d,removeDelay:d.removeDelay||((u=t[d.type])==null?void 0:u.removeDelay)||t?.removeDelay,duration:d.duration||((h=t[d.type])==null?void 0:h.duration)||t?.duration||oN[d.type],style:{...t.style,...(m=t[d.type])==null?void 0:m.style,...d.style}}});return{...s,toasts:l}},cN=(t,r="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||nN()}),zu=t=>(r,s)=>{let a=cN(r,t,s);return Uf(a.toasterId||iN(a.id))({type:2,toast:a}),a.id},Is=(t,r)=>zu("blank")(t,r);Is.error=zu("error");Is.success=zu("success");Is.loading=zu("loading");Is.custom=zu("custom");Is.dismiss=(t,r)=>{let s={type:3,toastId:t};r?Uf(r)(s):t2(s)};Is.dismissAll=t=>Is.dismiss(void 0,t);Is.remove=(t,r)=>{let s={type:4,toastId:t};r?Uf(r)(s):t2(s)};Is.removeAll=t=>Is.remove(void 0,t);Is.promise=(t,r,s)=>{let a=Is.loading(r.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let l=r.success?bf(r.success,o):void 0;return l?Is.success(l,{id:a,...s,...s?.success}):Is.dismiss(a),o}).catch(o=>{let l=r.error?bf(r.error,o):void 0;l?Is.error(l,{id:a,...s,...s?.error}):Is.dismiss(a)}),t};var dN=1e3,uN=(t,r="default")=>{let{toasts:s,pausedAt:a}=lN(t,r),o=R.useRef(new Map).current,l=R.useCallback((v,N=dN)=>{if(o.has(v))return;let y=setTimeout(()=>{o.delete(v),d({type:4,toastId:v})},N);o.set(v,y)},[]);R.useEffect(()=>{if(a)return;let v=Date.now(),N=s.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(v-y.createdAt);if(k<0){y.visible&&Is.dismiss(y.id);return}return setTimeout(()=>Is.dismiss(y.id,r),k)});return()=>{N.forEach(y=>y&&clearTimeout(y))}},[s,a,r]);let d=R.useCallback(Uf(r),[r]),u=R.useCallback(()=>{d({type:5,time:Date.now()})},[d]),h=R.useCallback((v,N)=>{d({type:1,toast:{id:v,height:N}})},[d]),m=R.useCallback(()=>{a&&d({type:6,time:Date.now()})},[a,d]),p=R.useCallback((v,N)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:C}=N||{},S=s.filter(E=>(E.position||C)===(v.position||C)&&E.height),L=S.findIndex(E=>E.id===v.id),P=S.filter((E,M)=>M<L&&E.visible).length;return S.filter(E=>E.visible).slice(...y?[P+1]:[0,P]).reduce((E,M)=>E+(M.height||0)+k,0)},[s]);return R.useEffect(()=>{s.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let N=o.get(v.id);N&&(clearTimeout(N),o.delete(v.id))}})},[s,l]),{toasts:s,handlers:{updateHeight:h,startPause:u,endPause:m,calculateOffset:p}}},hN=Fo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fN=Fo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mN=Fo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pN=El("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gN=Fo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,xN=El("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${gN} 1s linear infinite;
`,yN=Fo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,bN=Fo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vN=El("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${bN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wN=El("div")`
  position: absolute;
`,NN=El("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jN=Fo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,SN=El("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,kN=({toast:t})=>{let{icon:r,type:s,iconTheme:a}=t;return r!==void 0?typeof r=="string"?R.createElement(SN,null,r):r:s==="blank"?null:R.createElement(NN,null,R.createElement(xN,{...a}),s!=="loading"&&R.createElement(wN,null,s==="error"?R.createElement(pN,{...a}):R.createElement(vN,{...a})))},AN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,CN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,PN="0%{opacity:0;} 100%{opacity:1;}",_N="0%{opacity:1;} 100%{opacity:0;}",LN=El("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,EN=El("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,DN=(t,r)=>{let s=t.includes("top")?1:-1,[a,o]=Q1()?[PN,_N]:[AN(s),CN(s)];return{animation:r?`${Fo(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fo(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},IN=R.memo(({toast:t,position:r,style:s,children:a})=>{let o=t.height?DN(t.position||r||"top-center",t.visible):{opacity:0},l=R.createElement(kN,{toast:t}),d=R.createElement(EN,{...t.ariaProps},bf(t.message,t));return R.createElement(LN,{className:t.className,style:{...o,...s,...t.style}},typeof a=="function"?a({icon:l,message:d}):R.createElement(R.Fragment,null,l,d))});rN(R.createElement);var FN=({id:t,className:r,style:s,onHeightUpdate:a,children:o})=>{let l=R.useCallback(d=>{if(d){let u=()=>{let h=d.getBoundingClientRect().height;a(t,h)};u(),new MutationObserver(u).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return R.createElement("div",{ref:l,className:r,style:s},o)},TN=(t,r)=>{let s=t.includes("top"),a=s?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Q1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(s?1:-1)}px)`,...a,...o}},ON=Bf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fh=16,RN=({reverseOrder:t,position:r="top-center",toastOptions:s,gutter:a,children:o,toasterId:l,containerStyle:d,containerClassName:u})=>{let{toasts:h,handlers:m}=uN(s,l);return R.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Fh,left:Fh,right:Fh,bottom:Fh,pointerEvents:"none",...d},className:u,onMouseEnter:m.startPause,onMouseLeave:m.endPause},h.map(p=>{let v=p.position||r,N=m.calculateOffset(p,{reverseOrder:t,gutter:a,defaultPosition:r}),y=TN(v,N);return R.createElement(FN,{id:p.id,key:p.id,onHeightUpdate:m.updateHeight,className:p.visible?ON:"",style:y},p.type==="custom"?bf(p.message,p):o?o(p):R.createElement(IN,{toast:p,position:v}))}))},Th=Is;function Zs(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var MN=typeof Symbol=="function"&&Symbol.observable||"@@observable",Sx=MN,Qm=()=>Math.random().toString(36).substring(7).split("").join("."),BN={INIT:`@@redux/INIT${Qm()}`,REPLACE:`@@redux/REPLACE${Qm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qm()}`},vf=BN;function P0(t){if(typeof t!="object"||t===null)return!1;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r||Object.getPrototypeOf(t)===null}function r2(t,r,s){if(typeof t!="function")throw new Error(Zs(2));if(typeof r=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(Zs(0));if(typeof r=="function"&&typeof s>"u"&&(s=r,r=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(Zs(1));return s(r2)(t,r)}let a=t,o=r,l=new Map,d=l,u=0,h=!1;function m(){d===l&&(d=new Map,l.forEach((S,L)=>{d.set(L,S)}))}function p(){if(h)throw new Error(Zs(3));return o}function v(S){if(typeof S!="function")throw new Error(Zs(4));if(h)throw new Error(Zs(5));let L=!0;m();const P=u++;return d.set(P,S),function(){if(L){if(h)throw new Error(Zs(6));L=!1,m(),d.delete(P),l=null}}}function N(S){if(!P0(S))throw new Error(Zs(7));if(typeof S.type>"u")throw new Error(Zs(8));if(typeof S.type!="string")throw new Error(Zs(17));if(h)throw new Error(Zs(9));try{h=!0,o=a(o,S)}finally{h=!1}return(l=d).forEach(P=>{P()}),S}function y(S){if(typeof S!="function")throw new Error(Zs(10));a=S,N({type:vf.REPLACE})}function k(){const S=v;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(Zs(11));function P(){const M=L;M.next&&M.next(p())}return P(),{unsubscribe:S(P)}},[Sx](){return this}}}return N({type:vf.INIT}),{dispatch:N,subscribe:v,getState:p,replaceReducer:y,[Sx]:k}}function UN(t){Object.keys(t).forEach(r=>{const s=t[r];if(typeof s(void 0,{type:vf.INIT})>"u")throw new Error(Zs(12));if(typeof s(void 0,{type:vf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zs(13))})}function qN(t){const r=Object.keys(t),s={};for(let l=0;l<r.length;l++){const d=r[l];typeof t[d]=="function"&&(s[d]=t[d])}const a=Object.keys(s);let o;try{UN(s)}catch(l){o=l}return function(d={},u){if(o)throw o;let h=!1;const m={};for(let p=0;p<a.length;p++){const v=a[p],N=s[v],y=d[v],k=N(y,u);if(typeof k>"u")throw u&&u.type,new Error(Zs(14));m[v]=k,h=h||k!==y}return h=h||a.length!==Object.keys(d).length,h?m:d}}function wf(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,s)=>(...a)=>r(s(...a)))}function zN(...t){return r=>(s,a)=>{const o=r(s,a);let l=()=>{throw new Error(Zs(15))};const d={getState:o.getState,dispatch:(h,...m)=>l(h,...m)},u=t.map(h=>h(d));return l=wf(...u)(o.dispatch),{...o,dispatch:l}}}function $N(t){return P0(t)&&"type"in t&&typeof t.type=="string"}var s2=Symbol.for("immer-nothing"),kx=Symbol.for("immer-draftable"),ya=Symbol.for("immer-state");function di(t,...r){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function pc(t){return!!t&&!!t[ya]}function To(t){return t?n2(t)||Array.isArray(t)||!!t[kx]||!!t.constructor?.[kx]||zf(t)||$f(t):!1}var VN=Object.prototype.constructor.toString();function n2(t){if(!t||typeof t!="object")return!1;const r=Ad(t);if(r===null)return!0;const s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===VN}function Nf(t,r){qf(t)===0?Reflect.ownKeys(t).forEach(s=>{r(s,t[s],t)}):t.forEach((s,a)=>r(a,s,t))}function qf(t){const r=t[ya];return r?r.type_:Array.isArray(t)?1:zf(t)?2:$f(t)?3:0}function Wp(t,r){return qf(t)===2?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function a2(t,r,s){const a=qf(t);a===2?t.set(r,s):a===3?t.add(s):t[r]=s}function HN(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}function zf(t){return t instanceof Map}function $f(t){return t instanceof Set}function ac(t){return t.copy_||t.base_}function Gp(t,r){if(zf(t))return new Map(t);if($f(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const s=n2(t);if(r===!0||r==="class_only"&&!s){const a=Object.getOwnPropertyDescriptors(t);delete a[ya];let o=Reflect.ownKeys(a);for(let l=0;l<o.length;l++){const d=o[l],u=a[d];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[d]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[d]})}return Object.create(Ad(t),a)}else{const a=Ad(t);if(a!==null&&s)return{...t};const o=Object.create(a);return Object.assign(o,t)}}function _0(t,r=!1){return Vf(t)||pc(t)||!To(t)||(qf(t)>1&&(t.set=t.add=t.clear=t.delete=WN),Object.freeze(t),r&&Object.entries(t).forEach(([s,a])=>_0(a,!0))),t}function WN(){di(2)}function Vf(t){return Object.isFrozen(t)}var GN={};function gc(t){const r=GN[t];return r||di(0,t),r}var Du;function i2(){return Du}function KN(t,r){return{drafts_:[],parent_:t,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ax(t,r){r&&(gc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=r)}function Kp(t){Yp(t),t.drafts_.forEach(YN),t.drafts_=null}function Yp(t){t===Du&&(Du=t.parent_)}function Cx(t){return Du=KN(Du,t)}function YN(t){const r=t[ya];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Px(t,r){r.unfinalizedDrafts_=r.drafts_.length;const s=r.drafts_[0];return t!==void 0&&t!==s?(s[ya].modified_&&(Kp(r),di(4)),To(t)&&(t=jf(r,t),r.parent_||Sf(r,t)),r.patches_&&gc("Patches").generateReplacementPatches_(s[ya].base_,t,r.patches_,r.inversePatches_)):t=jf(r,s,[]),Kp(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),t!==s2?t:void 0}function jf(t,r,s){if(Vf(r))return r;const a=r[ya];if(!a)return Nf(r,(o,l)=>_x(t,a,r,o,l,s)),r;if(a.scope_!==t)return r;if(!a.modified_)return Sf(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const o=a.copy_;let l=o,d=!1;a.type_===3&&(l=new Set(o),o.clear(),d=!0),Nf(l,(u,h)=>_x(t,a,o,u,h,s,d)),Sf(t,o,!1),s&&t.patches_&&gc("Patches").generatePatches_(a,s,t.patches_,t.inversePatches_)}return a.copy_}function _x(t,r,s,a,o,l,d){if(pc(o)){const u=l&&r&&r.type_!==3&&!Wp(r.assigned_,a)?l.concat(a):void 0,h=jf(t,o,u);if(a2(s,a,h),pc(h))t.canAutoFreeze_=!1;else return}else d&&s.add(o);if(To(o)&&!Vf(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;jf(t,o),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(s,a)&&Sf(t,o)}}function Sf(t,r,s=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&_0(r,s)}function JN(t,r){const s=Array.isArray(t),a={type_:s?1:0,scope_:r?r.scope_:i2(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=a,l=L0;s&&(o=[a],l=Iu);const{revoke:d,proxy:u}=Proxy.revocable(o,l);return a.draft_=u,a.revoke_=d,u}var L0={get(t,r){if(r===ya)return t;const s=ac(t);if(!Wp(s,r))return QN(t,s,r);const a=s[r];return t.finalized_||!To(a)?a:a===Xm(t.base_,r)?(Zm(t),t.copy_[r]=Qp(a,t)):a},has(t,r){return r in ac(t)},ownKeys(t){return Reflect.ownKeys(ac(t))},set(t,r,s){const a=o2(ac(t),r);if(a?.set)return a.set.call(t.draft_,s),!0;if(!t.modified_){const o=Xm(ac(t),r),l=o?.[ya];if(l&&l.base_===s)return t.copy_[r]=s,t.assigned_[r]=!1,!0;if(HN(s,o)&&(s!==void 0||Wp(t.base_,r)))return!0;Zm(t),Jp(t)}return t.copy_[r]===s&&(s!==void 0||r in t.copy_)||Number.isNaN(s)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=s,t.assigned_[r]=!0),!0},deleteProperty(t,r){return Xm(t.base_,r)!==void 0||r in t.base_?(t.assigned_[r]=!1,Zm(t),Jp(t)):delete t.assigned_[r],t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor(t,r){const s=ac(t),a=Reflect.getOwnPropertyDescriptor(s,r);return a&&{writable:!0,configurable:t.type_!==1||r!=="length",enumerable:a.enumerable,value:s[r]}},defineProperty(){di(11)},getPrototypeOf(t){return Ad(t.base_)},setPrototypeOf(){di(12)}},Iu={};Nf(L0,(t,r)=>{Iu[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Iu.deleteProperty=function(t,r){return Iu.set.call(this,t,r,void 0)};Iu.set=function(t,r,s){return L0.set.call(this,t[0],r,s,t[0])};function Xm(t,r){const s=t[ya];return(s?ac(s):t)[r]}function QN(t,r,s){const a=o2(r,s);return a?"value"in a?a.value:a.get?.call(t.draft_):void 0}function o2(t,r){if(!(r in t))return;let s=Ad(t);for(;s;){const a=Object.getOwnPropertyDescriptor(s,r);if(a)return a;s=Ad(s)}}function Jp(t){t.modified_||(t.modified_=!0,t.parent_&&Jp(t.parent_))}function Zm(t){t.copy_||(t.copy_=Gp(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var XN=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,s,a)=>{if(typeof r=="function"&&typeof s!="function"){const l=s;s=r;const d=this;return function(h=l,...m){return d.produce(h,p=>s.call(this,p,...m))}}typeof s!="function"&&di(6),a!==void 0&&typeof a!="function"&&di(7);let o;if(To(r)){const l=Cx(this),d=Qp(r,void 0);let u=!0;try{o=s(d),u=!1}finally{u?Kp(l):Yp(l)}return Ax(l,a),Px(o,l)}else if(!r||typeof r!="object"){if(o=s(r),o===void 0&&(o=r),o===s2&&(o=void 0),this.autoFreeze_&&_0(o,!0),a){const l=[],d=[];gc("Patches").generateReplacementPatches_(r,o,l,d),a(l,d)}return o}else di(1,r)},this.produceWithPatches=(r,s)=>{if(typeof r=="function")return(d,...u)=>this.produceWithPatches(d,h=>r(h,...u));let a,o;return[this.produce(r,s,(d,u)=>{a=d,o=u}),a,o]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){To(t)||di(8),pc(t)&&(t=ZN(t));const r=Cx(this),s=Qp(t,void 0);return s[ya].isManual_=!0,Yp(r),s}finishDraft(t,r){const s=t&&t[ya];(!s||!s.isManual_)&&di(9);const{scope_:a}=s;return Ax(a,r),Px(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,r){let s;for(s=r.length-1;s>=0;s--){const o=r[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(r=r.slice(s+1));const a=gc("Patches").applyPatches_;return pc(t)?a(t,r):this.produce(t,o=>a(o,r))}};function Qp(t,r){const s=zf(t)?gc("MapSet").proxyMap_(t,r):$f(t)?gc("MapSet").proxySet_(t,r):JN(t,r);return(r?r.scope_:i2()).drafts_.push(s),s}function ZN(t){return pc(t)||di(10,t),l2(t)}function l2(t){if(!To(t)||Vf(t))return t;const r=t[ya];let s;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,s=Gp(t,r.scope_.immer_.useStrictShallowCopy_)}else s=Gp(t,!0);return Nf(s,(a,o)=>{a2(s,a,l2(o))}),r&&(r.finalized_=!1),s}var ba=new XN,c2=ba.produce;ba.produceWithPatches.bind(ba);ba.setAutoFreeze.bind(ba);ba.setUseStrictShallowCopy.bind(ba);ba.applyPatches.bind(ba);ba.createDraft.bind(ba);ba.finishDraft.bind(ba);function d2(t){return({dispatch:s,getState:a})=>o=>l=>typeof l=="function"?l(s,a,t):o(l)}var ej=d2(),tj=d2,rj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?wf:wf.apply(null,arguments)},sj=t=>t&&typeof t.match=="function";function yu(t,r){function s(...a){if(r){let o=r(...a);if(!o)throw new Error(Io(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:a[0]}}return s.toString=()=>`${t}`,s.type=t,s.match=a=>$N(a)&&a.type===t,s}var u2=class xu extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,xu.prototype)}static get[Symbol.species](){return xu}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new xu(...r[0].concat(this)):new xu(...r.concat(this))}};function Lx(t){return To(t)?c2(t,()=>{}):t}function Oh(t,r,s){return t.has(r)?t.get(r):t.set(r,s(r)).get(r)}function nj(t){return typeof t=="boolean"}var aj=()=>function(r){const{thunk:s=!0,immutableCheck:a=!0,serializableCheck:o=!0,actionCreatorCheck:l=!0}=r??{};let d=new u2;return s&&(nj(s)?d.push(ej):d.push(tj(s.extraArgument))),d},ij="RTK_autoBatch",Ex=t=>r=>{setTimeout(r,t)},oj=(t={type:"raf"})=>r=>(...s)=>{const a=r(...s);let o=!0,l=!1,d=!1;const u=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ex(10):t.type==="callback"?t.queueNotification:Ex(t.timeout),m=()=>{d=!1,l&&(l=!1,u.forEach(p=>p()))};return Object.assign({},a,{subscribe(p){const v=()=>o&&p(),N=a.subscribe(v);return u.add(p),()=>{N(),u.delete(p)}},dispatch(p){try{return o=!p?.meta?.[ij],l=!o,l&&(d||(d=!0,h(m))),a.dispatch(p)}finally{o=!0}}})},lj=t=>function(s){const{autoBatch:a=!0}=s??{};let o=new u2(t);return a&&o.push(oj(typeof a=="object"?a:void 0)),o};function cj(t){const r=aj(),{reducer:s=void 0,middleware:a,devTools:o=!0,preloadedState:l=void 0,enhancers:d=void 0}=t||{};let u;if(typeof s=="function")u=s;else if(P0(s))u=qN(s);else throw new Error(Io(1));let h;typeof a=="function"?h=a(r):h=r();let m=wf;o&&(m=rj({trace:!1,...typeof o=="object"&&o}));const p=zN(...h),v=lj(p);let N=typeof d=="function"?d(v):v();const y=m(...N);return r2(u,l,y)}function h2(t){const r={},s=[];let a;const o={addCase(l,d){const u=typeof l=="string"?l:l.type;if(!u)throw new Error(Io(28));if(u in r)throw new Error(Io(29));return r[u]=d,o},addMatcher(l,d){return s.push({matcher:l,reducer:d}),o},addDefaultCase(l){return a=l,o}};return t(o),[r,s,a]}function dj(t){return typeof t=="function"}function uj(t,r){let[s,a,o]=h2(r),l;if(dj(t))l=()=>Lx(t());else{const u=Lx(t);l=()=>u}function d(u=l(),h){let m=[s[h.type],...a.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return m.filter(p=>!!p).length===0&&(m=[o]),m.reduce((p,v)=>{if(v)if(pc(p)){const y=v(p,h);return y===void 0?p:y}else{if(To(p))return c2(p,N=>v(N,h));{const N=v(p,h);if(N===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}}return p},u)}return d.getInitialState=l,d}var hj=(t,r)=>sj(t)?t.match(r):t(r);function fj(...t){return r=>t.some(s=>hj(s,r))}var mj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pj=(t=21)=>{let r="",s=t;for(;s--;)r+=mj[Math.random()*64|0];return r},gj=["name","message","stack","code"],ep=class{constructor(t,r){this.payload=t,this.meta=r}_type},Dx=class{constructor(t,r){this.payload=t,this.meta=r}_type},xj=t=>{if(typeof t=="object"&&t!==null){const r={};for(const s of gj)typeof t[s]=="string"&&(r[s]=t[s]);return r}return{message:String(t)}},Ix="External signal was aborted",Cr=(()=>{function t(r,s,a){const o=yu(r+"/fulfilled",(h,m,p,v)=>({payload:h,meta:{...v||{},arg:p,requestId:m,requestStatus:"fulfilled"}})),l=yu(r+"/pending",(h,m,p)=>({payload:void 0,meta:{...p||{},arg:m,requestId:h,requestStatus:"pending"}})),d=yu(r+"/rejected",(h,m,p,v,N)=>({payload:v,error:(a&&a.serializeError||xj)(h||"Rejected"),meta:{...N||{},arg:p,requestId:m,rejectedWithValue:!!v,requestStatus:"rejected",aborted:h?.name==="AbortError",condition:h?.name==="ConditionError"}}));function u(h,{signal:m}={}){return(p,v,N)=>{const y=a?.idGenerator?a.idGenerator(h):pj(),k=new AbortController;let C,S;function L(E){S=E,k.abort()}m&&(m.aborted?L(Ix):m.addEventListener("abort",()=>L(Ix),{once:!0}));const P=(async function(){let E;try{let z=a?.condition?.(h,{getState:v,extra:N});if(bj(z)&&(z=await z),z===!1||k.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const he=new Promise((X,J)=>{C=()=>{J({name:"AbortError",message:S||"Aborted"})},k.signal.addEventListener("abort",C)});p(l(y,h,a?.getPendingMeta?.({requestId:y,arg:h},{getState:v,extra:N}))),E=await Promise.race([he,Promise.resolve(s(h,{dispatch:p,getState:v,extra:N,requestId:y,signal:k.signal,abort:L,rejectWithValue:(X,J)=>new ep(X,J),fulfillWithValue:(X,J)=>new Dx(X,J)})).then(X=>{if(X instanceof ep)throw X;return X instanceof Dx?o(X.payload,y,h,X.meta):o(X,y,h)})])}catch(z){E=z instanceof ep?d(null,y,h,z.payload,z.meta):d(z,y,h)}finally{C&&k.signal.removeEventListener("abort",C)}return a&&!a.dispatchConditionRejection&&d.match(E)&&E.meta.condition||p(E),E})();return Object.assign(P,{abort:L,requestId:y,arg:h,unwrap(){return P.then(yj)}})}}return Object.assign(u,{pending:l,rejected:d,fulfilled:o,settled:fj(d,o),typePrefix:r})}return t.withTypes=()=>t,t})();function yj(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function bj(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var vj=Symbol.for("rtk-slice-createasyncthunk");function wj(t,r){return`${t}/${r}`}function Nj({creators:t}={}){const r=t?.asyncThunk?.[vj];return function(a){const{name:o,reducerPath:l=o}=a;if(!o)throw new Error(Io(11));const d=(typeof a.reducers=="function"?a.reducers(Sj()):a.reducers)||{},u=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(E,M){const z=typeof E=="string"?E:E.type;if(!z)throw new Error(Io(12));if(z in h.sliceCaseReducersByType)throw new Error(Io(13));return h.sliceCaseReducersByType[z]=M,m},addMatcher(E,M){return h.sliceMatchers.push({matcher:E,reducer:M}),m},exposeAction(E,M){return h.actionCreators[E]=M,m},exposeCaseReducer(E,M){return h.sliceCaseReducersByName[E]=M,m}};u.forEach(E=>{const M=d[E],z={reducerName:E,type:wj(o,E),createNotation:typeof a.reducers=="function"};Aj(M)?Pj(z,M,m,r):kj(z,M,m)});function p(){const[E={},M=[],z=void 0]=typeof a.extraReducers=="function"?h2(a.extraReducers):[a.extraReducers],he={...E,...h.sliceCaseReducersByType};return uj(a.initialState,X=>{for(let J in he)X.addCase(J,he[J]);for(let J of h.sliceMatchers)X.addMatcher(J.matcher,J.reducer);for(let J of M)X.addMatcher(J.matcher,J.reducer);z&&X.addDefaultCase(z)})}const v=E=>E,N=new Map,y=new WeakMap;let k;function C(E,M){return k||(k=p()),k(E,M)}function S(){return k||(k=p()),k.getInitialState()}function L(E,M=!1){function z(X){let J=X[E];return typeof J>"u"&&M&&(J=Oh(y,z,S)),J}function he(X=v){const J=Oh(N,M,()=>new WeakMap);return Oh(J,X,()=>{const G={};for(const[pe,I]of Object.entries(a.selectors??{}))G[pe]=jj(I,X,()=>Oh(y,X,S),M);return G})}return{reducerPath:E,getSelectors:he,get selectors(){return he(z)},selectSlice:z}}const P={name:o,reducer:C,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,...L(l),injectInto(E,{reducerPath:M,...z}={}){const he=M??l;return E.inject({reducerPath:he,reducer:C},z),{...P,...L(he,!0)}}};return P}}function jj(t,r,s,a){function o(l,...d){let u=r(l);return typeof u>"u"&&a&&(u=s()),t(u,...d)}return o.unwrapped=t,o}var Ro=Nj();function Sj(){function t(r,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...s}}return t.withTypes=()=>t,{reducer(r){return Object.assign({[r.name](...s){return r(...s)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:s}},asyncThunk:t}}function kj({type:t,reducerName:r,createNotation:s},a,o){let l,d;if("reducer"in a){if(s&&!Cj(a))throw new Error(Io(17));l=a.reducer,d=a.prepare}else l=a;o.addCase(t,l).exposeCaseReducer(r,l).exposeAction(r,d?yu(t,d):yu(t))}function Aj(t){return t._reducerDefinitionType==="asyncThunk"}function Cj(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Pj({type:t,reducerName:r},s,a,o){if(!o)throw new Error(Io(18));const{payloadCreator:l,fulfilled:d,pending:u,rejected:h,settled:m,options:p}=s,v=o(t,l,p);a.exposeAction(r,v),d&&a.addCase(v.fulfilled,d),u&&a.addCase(v.pending,u),h&&a.addCase(v.rejected,h),m&&a.addMatcher(v.settled,m),a.exposeCaseReducer(r,{fulfilled:d||Rh,pending:u||Rh,rejected:h||Rh,settled:m||Rh})}function Rh(){}function Io(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function f2(t,r){return function(){return t.apply(r,arguments)}}const{toString:_j}=Object.prototype,{getPrototypeOf:E0}=Object,{iterator:Hf,toStringTag:m2}=Symbol,Wf=(t=>r=>{const s=_j.call(r);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),gi=t=>(t=t.toLowerCase(),r=>Wf(r)===t),Gf=t=>r=>typeof r===t,{isArray:Ld}=Array,Fu=Gf("undefined");function $u(t){return t!==null&&!Fu(t)&&t.constructor!==null&&!Fu(t.constructor)&&Yn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const p2=gi("ArrayBuffer");function Lj(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&p2(t.buffer),r}const Ej=Gf("string"),Yn=Gf("function"),g2=Gf("number"),Vu=t=>t!==null&&typeof t=="object",Dj=t=>t===!0||t===!1,Yh=t=>{if(Wf(t)!=="object")return!1;const r=E0(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(m2 in t)&&!(Hf in t)},Ij=t=>{if(!Vu(t)||$u(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Fj=gi("Date"),Tj=gi("File"),Oj=gi("Blob"),Rj=gi("FileList"),Mj=t=>Vu(t)&&Yn(t.pipe),Bj=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Yn(t.append)&&((r=Wf(t))==="formdata"||r==="object"&&Yn(t.toString)&&t.toString()==="[object FormData]"))},Uj=gi("URLSearchParams"),[qj,zj,$j,Vj]=["ReadableStream","Request","Response","Headers"].map(gi),Hj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hu(t,r,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),Ld(t))for(a=0,o=t.length;a<o;a++)r.call(null,t[a],a,t);else{if($u(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),d=l.length;let u;for(a=0;a<d;a++)u=l[a],r.call(null,t[u],u,t)}}function x2(t,r){if($u(t))return null;r=r.toLowerCase();const s=Object.keys(t);let a=s.length,o;for(;a-- >0;)if(o=s[a],r===o.toLowerCase())return o;return null}const lc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,y2=t=>!Fu(t)&&t!==lc;function Xp(){const{caseless:t}=y2(this)&&this||{},r={},s=(a,o)=>{const l=t&&x2(r,o)||o;Yh(r[l])&&Yh(a)?r[l]=Xp(r[l],a):Yh(a)?r[l]=Xp({},a):Ld(a)?r[l]=a.slice():r[l]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Hu(arguments[a],s);return r}const Wj=(t,r,s,{allOwnKeys:a}={})=>(Hu(r,(o,l)=>{s&&Yn(o)?t[l]=f2(o,s):t[l]=o},{allOwnKeys:a}),t),Gj=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Kj=(t,r,s,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),s&&Object.assign(t.prototype,s)},Yj=(t,r,s,a)=>{let o,l,d;const u={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)d=o[l],(!a||a(d,t,r))&&!u[d]&&(r[d]=t[d],u[d]=!0);t=s!==!1&&E0(t)}while(t&&(!s||s(t,r))&&t!==Object.prototype);return r},Jj=(t,r,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=r.length;const a=t.indexOf(r,s);return a!==-1&&a===s},Qj=t=>{if(!t)return null;if(Ld(t))return t;let r=t.length;if(!g2(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=t[r];return s},Xj=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&E0(Uint8Array)),Zj=(t,r)=>{const a=(t&&t[Hf]).call(t);let o;for(;(o=a.next())&&!o.done;){const l=o.value;r.call(t,l[0],l[1])}},e4=(t,r)=>{let s;const a=[];for(;(s=t.exec(r))!==null;)a.push(s);return a},t4=gi("HTMLFormElement"),r4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,o){return a.toUpperCase()+o}),Fx=(({hasOwnProperty:t})=>(r,s)=>t.call(r,s))(Object.prototype),s4=gi("RegExp"),b2=(t,r)=>{const s=Object.getOwnPropertyDescriptors(t),a={};Hu(s,(o,l)=>{let d;(d=r(o,l,t))!==!1&&(a[l]=d||o)}),Object.defineProperties(t,a)},n4=t=>{b2(t,(r,s)=>{if(Yn(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(Yn(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},a4=(t,r)=>{const s={},a=o=>{o.forEach(l=>{s[l]=!0})};return Ld(t)?a(t):a(String(t).split(r)),s},i4=()=>{},o4=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function l4(t){return!!(t&&Yn(t.append)&&t[m2]==="FormData"&&t[Hf])}const c4=t=>{const r=new Array(10),s=(a,o)=>{if(Vu(a)){if(r.indexOf(a)>=0)return;if($u(a))return a;if(!("toJSON"in a)){r[o]=a;const l=Ld(a)?[]:{};return Hu(a,(d,u)=>{const h=s(d,o+1);!Fu(h)&&(l[u]=h)}),r[o]=void 0,l}}return a};return s(t,0)},d4=gi("AsyncFunction"),u4=t=>t&&(Vu(t)||Yn(t))&&Yn(t.then)&&Yn(t.catch),v2=((t,r)=>t?setImmediate:r?((s,a)=>(lc.addEventListener("message",({source:o,data:l})=>{o===lc&&l===s&&a.length&&a.shift()()},!1),o=>{a.push(o),lc.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Yn(lc.postMessage)),h4=typeof queueMicrotask<"u"?queueMicrotask.bind(lc):typeof process<"u"&&process.nextTick||v2,f4=t=>t!=null&&Yn(t[Hf]),Ue={isArray:Ld,isArrayBuffer:p2,isBuffer:$u,isFormData:Bj,isArrayBufferView:Lj,isString:Ej,isNumber:g2,isBoolean:Dj,isObject:Vu,isPlainObject:Yh,isEmptyObject:Ij,isReadableStream:qj,isRequest:zj,isResponse:$j,isHeaders:Vj,isUndefined:Fu,isDate:Fj,isFile:Tj,isBlob:Oj,isRegExp:s4,isFunction:Yn,isStream:Mj,isURLSearchParams:Uj,isTypedArray:Xj,isFileList:Rj,forEach:Hu,merge:Xp,extend:Wj,trim:Hj,stripBOM:Gj,inherits:Kj,toFlatObject:Yj,kindOf:Wf,kindOfTest:gi,endsWith:Jj,toArray:Qj,forEachEntry:Zj,matchAll:e4,isHTMLForm:t4,hasOwnProperty:Fx,hasOwnProp:Fx,reduceDescriptors:b2,freezeMethods:n4,toObjectSet:a4,toCamelCase:r4,noop:i4,toFiniteNumber:o4,findKey:x2,global:lc,isContextDefined:y2,isSpecCompliantForm:l4,toJSONObject:c4,isAsyncFn:d4,isThenable:u4,setImmediate:v2,asap:h4,isIterable:f4};function Wt(t,r,s,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}Ue.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.status}}});const w2=Wt.prototype,N2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{N2[t]={value:t}});Object.defineProperties(Wt,N2);Object.defineProperty(w2,"isAxiosError",{value:!0});Wt.from=(t,r,s,a,o,l)=>{const d=Object.create(w2);return Ue.toFlatObject(t,d,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Wt.call(d,t.message,r,s,a,o),d.cause=t,d.name=t.name,l&&Object.assign(d,l),d};const m4=null;function Zp(t){return Ue.isPlainObject(t)||Ue.isArray(t)}function j2(t){return Ue.endsWith(t,"[]")?t.slice(0,-2):t}function Tx(t,r,s){return t?t.concat(r).map(function(o,l){return o=j2(o),!s&&l?"["+o+"]":o}).join(s?".":""):r}function p4(t){return Ue.isArray(t)&&!t.some(Zp)}const g4=Ue.toFlatObject(Ue,{},null,function(r){return/^is[A-Z]/.test(r)});function Kf(t,r,s){if(!Ue.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,s=Ue.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,S){return!Ue.isUndefined(S[C])});const a=s.metaTokens,o=s.visitor||p,l=s.dots,d=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(r);if(!Ue.isFunction(o))throw new TypeError("visitor must be a function");function m(k){if(k===null)return"";if(Ue.isDate(k))return k.toISOString();if(Ue.isBoolean(k))return k.toString();if(!h&&Ue.isBlob(k))throw new Wt("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(k)||Ue.isTypedArray(k)?h&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function p(k,C,S){let L=k;if(k&&!S&&typeof k=="object"){if(Ue.endsWith(C,"{}"))C=a?C:C.slice(0,-2),k=JSON.stringify(k);else if(Ue.isArray(k)&&p4(k)||(Ue.isFileList(k)||Ue.endsWith(C,"[]"))&&(L=Ue.toArray(k)))return C=j2(C),L.forEach(function(E,M){!(Ue.isUndefined(E)||E===null)&&r.append(d===!0?Tx([C],M,l):d===null?C:C+"[]",m(E))}),!1}return Zp(k)?!0:(r.append(Tx(S,C,l),m(k)),!1)}const v=[],N=Object.assign(g4,{defaultVisitor:p,convertValue:m,isVisitable:Zp});function y(k,C){if(!Ue.isUndefined(k)){if(v.indexOf(k)!==-1)throw Error("Circular reference detected in "+C.join("."));v.push(k),Ue.forEach(k,function(L,P){(!(Ue.isUndefined(L)||L===null)&&o.call(r,L,Ue.isString(P)?P.trim():P,C,N))===!0&&y(L,C?C.concat(P):[P])}),v.pop()}}if(!Ue.isObject(t))throw new TypeError("data must be an object");return y(t),r}function Ox(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function D0(t,r){this._pairs=[],t&&Kf(t,this,r)}const S2=D0.prototype;S2.append=function(r,s){this._pairs.push([r,s])};S2.toString=function(r){const s=r?function(a){return r.call(this,a,Ox)}:Ox;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function x4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function k2(t,r,s){if(!r)return t;const a=s&&s.encode||x4;Ue.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let l;if(o?l=o(r,s):l=Ue.isURLSearchParams(r)?r.toString():new D0(r,s).toString(a),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Rx{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Ue.forEach(this.handlers,function(a){a!==null&&r(a)})}}const A2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},y4=typeof URLSearchParams<"u"?URLSearchParams:D0,b4=typeof FormData<"u"?FormData:null,v4=typeof Blob<"u"?Blob:null,w4={isBrowser:!0,classes:{URLSearchParams:y4,FormData:b4,Blob:v4},protocols:["http","https","file","blob","url","data"]},I0=typeof window<"u"&&typeof document<"u",e0=typeof navigator=="object"&&navigator||void 0,N4=I0&&(!e0||["ReactNative","NativeScript","NS"].indexOf(e0.product)<0),j4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",S4=I0&&window.location.href||"http://localhost",k4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I0,hasStandardBrowserEnv:N4,hasStandardBrowserWebWorkerEnv:j4,navigator:e0,origin:S4},Symbol.toStringTag,{value:"Module"})),bn={...k4,...w4};function A4(t,r){return Kf(t,new bn.classes.URLSearchParams,{visitor:function(s,a,o,l){return bn.isNode&&Ue.isBuffer(s)?(this.append(a,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function C4(t){return Ue.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function P4(t){const r={},s=Object.keys(t);let a;const o=s.length;let l;for(a=0;a<o;a++)l=s[a],r[l]=t[l];return r}function C2(t){function r(s,a,o,l){let d=s[l++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),h=l>=s.length;return d=!d&&Ue.isArray(o)?o.length:d,h?(Ue.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!u):((!o[d]||!Ue.isObject(o[d]))&&(o[d]=[]),r(s,a,o[d],l)&&Ue.isArray(o[d])&&(o[d]=P4(o[d])),!u)}if(Ue.isFormData(t)&&Ue.isFunction(t.entries)){const s={};return Ue.forEachEntry(t,(a,o)=>{r(C4(a),o,s,0)}),s}return null}function _4(t,r,s){if(Ue.isString(t))try{return(r||JSON.parse)(t),Ue.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(t)}const Wu={transitional:A2,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",o=a.indexOf("application/json")>-1,l=Ue.isObject(r);if(l&&Ue.isHTMLForm(r)&&(r=new FormData(r)),Ue.isFormData(r))return o?JSON.stringify(C2(r)):r;if(Ue.isArrayBuffer(r)||Ue.isBuffer(r)||Ue.isStream(r)||Ue.isFile(r)||Ue.isBlob(r)||Ue.isReadableStream(r))return r;if(Ue.isArrayBufferView(r))return r.buffer;if(Ue.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return A4(r,this.formSerializer).toString();if((u=Ue.isFileList(r))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Kf(u?{"files[]":r}:r,h&&new h,this.formSerializer)}}return l||o?(s.setContentType("application/json",!1),_4(r)):r}],transformResponse:[function(r){const s=this.transitional||Wu.transitional,a=s&&s.forcedJSONParsing,o=this.responseType==="json";if(Ue.isResponse(r)||Ue.isReadableStream(r))return r;if(r&&Ue.isString(r)&&(a&&!this.responseType||o)){const d=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(d)throw u.name==="SyntaxError"?Wt.from(u,Wt.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bn.classes.FormData,Blob:bn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],t=>{Wu.headers[t]={}});const L4=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E4=t=>{const r={};let s,a,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),s=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!s||r[s]&&L4[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},Mx=Symbol("internals");function du(t){return t&&String(t).trim().toLowerCase()}function Jh(t){return t===!1||t==null?t:Ue.isArray(t)?t.map(Jh):String(t)}function D4(t){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)r[a[1]]=a[2];return r}const I4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tp(t,r,s,a,o){if(Ue.isFunction(a))return a.call(this,r,s);if(o&&(r=s),!!Ue.isString(r)){if(Ue.isString(a))return r.indexOf(a)!==-1;if(Ue.isRegExp(a))return a.test(r)}}function F4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function T4(t,r){const s=Ue.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(o,l,d){return this[a].call(this,r,o,l,d)},configurable:!0})})}let Jn=class{constructor(r){r&&this.set(r)}set(r,s,a){const o=this;function l(u,h,m){const p=du(h);if(!p)throw new Error("header name must be a non-empty string");const v=Ue.findKey(o,p);(!v||o[v]===void 0||m===!0||m===void 0&&o[v]!==!1)&&(o[v||h]=Jh(u))}const d=(u,h)=>Ue.forEach(u,(m,p)=>l(m,p,h));if(Ue.isPlainObject(r)||r instanceof this.constructor)d(r,s);else if(Ue.isString(r)&&(r=r.trim())&&!I4(r))d(E4(r),s);else if(Ue.isObject(r)&&Ue.isIterable(r)){let u={},h,m;for(const p of r){if(!Ue.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?Ue.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}d(u,s)}else r!=null&&l(s,r,a);return this}get(r,s){if(r=du(r),r){const a=Ue.findKey(this,r);if(a){const o=this[a];if(!s)return o;if(s===!0)return D4(o);if(Ue.isFunction(s))return s.call(this,o,a);if(Ue.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=du(r),r){const a=Ue.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||tp(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let o=!1;function l(d){if(d=du(d),d){const u=Ue.findKey(a,d);u&&(!s||tp(a,a[u],u,s))&&(delete a[u],o=!0)}}return Ue.isArray(r)?r.forEach(l):l(r),o}clear(r){const s=Object.keys(this);let a=s.length,o=!1;for(;a--;){const l=s[a];(!r||tp(this,this[l],l,r,!0))&&(delete this[l],o=!0)}return o}normalize(r){const s=this,a={};return Ue.forEach(this,(o,l)=>{const d=Ue.findKey(a,l);if(d){s[d]=Jh(o),delete s[l];return}const u=r?F4(l):String(l).trim();u!==l&&delete s[l],s[u]=Jh(o),a[u]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return Ue.forEach(this,(a,o)=>{a!=null&&a!==!1&&(s[o]=r&&Ue.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(o=>a.set(o)),a}static accessor(r){const a=(this[Mx]=this[Mx]={accessors:{}}).accessors,o=this.prototype;function l(d){const u=du(d);a[u]||(T4(o,d),a[u]=!0)}return Ue.isArray(r)?r.forEach(l):l(r),this}};Jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(Jn.prototype,({value:t},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[s]=a}}});Ue.freezeMethods(Jn);function rp(t,r){const s=this||Wu,a=r||s,o=Jn.from(a.headers);let l=a.data;return Ue.forEach(t,function(u){l=u.call(s,l,o.normalize(),r?r.status:void 0)}),o.normalize(),l}function P2(t){return!!(t&&t.__CANCEL__)}function Ed(t,r,s){Wt.call(this,t??"canceled",Wt.ERR_CANCELED,r,s),this.name="CanceledError"}Ue.inherits(Ed,Wt,{__CANCEL__:!0});function _2(t,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):r(new Wt("Request failed with status code "+s.status,[Wt.ERR_BAD_REQUEST,Wt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function O4(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function R4(t,r){t=t||10;const s=new Array(t),a=new Array(t);let o=0,l=0,d;return r=r!==void 0?r:1e3,function(h){const m=Date.now(),p=a[l];d||(d=m),s[o]=h,a[o]=m;let v=l,N=0;for(;v!==o;)N+=s[v++],v=v%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),m-d<r)return;const y=p&&m-p;return y?Math.round(N*1e3/y):void 0}}function M4(t,r){let s=0,a=1e3/r,o,l;const d=(m,p=Date.now())=>{s=p,o=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const p=Date.now(),v=p-s;v>=a?d(m,p):(o=m,l||(l=setTimeout(()=>{l=null,d(o)},a-v)))},()=>o&&d(o)]}const kf=(t,r,s=3)=>{let a=0;const o=R4(50,250);return M4(l=>{const d=l.loaded,u=l.lengthComputable?l.total:void 0,h=d-a,m=o(h),p=d<=u;a=d;const v={loaded:d,total:u,progress:u?d/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-d)/m:void 0,event:l,lengthComputable:u!=null,[r?"download":"upload"]:!0};t(v)},s)},Bx=(t,r)=>{const s=t!=null;return[a=>r[0]({lengthComputable:s,total:t,loaded:a}),r[1]]},Ux=t=>(...r)=>Ue.asap(()=>t(...r)),B4=bn.hasStandardBrowserEnv?((t,r)=>s=>(s=new URL(s,bn.origin),t.protocol===s.protocol&&t.host===s.host&&(r||t.port===s.port)))(new URL(bn.origin),bn.navigator&&/(msie|trident)/i.test(bn.navigator.userAgent)):()=>!0,U4=bn.hasStandardBrowserEnv?{write(t,r,s,a,o,l){const d=[t+"="+encodeURIComponent(r)];Ue.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),Ue.isString(a)&&d.push("path="+a),Ue.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function q4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function z4(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function L2(t,r,s){let a=!q4(r);return t&&(a||s==!1)?z4(t,r):r}const qx=t=>t instanceof Jn?{...t}:t;function xc(t,r){r=r||{};const s={};function a(m,p,v,N){return Ue.isPlainObject(m)&&Ue.isPlainObject(p)?Ue.merge.call({caseless:N},m,p):Ue.isPlainObject(p)?Ue.merge({},p):Ue.isArray(p)?p.slice():p}function o(m,p,v,N){if(Ue.isUndefined(p)){if(!Ue.isUndefined(m))return a(void 0,m,v,N)}else return a(m,p,v,N)}function l(m,p){if(!Ue.isUndefined(p))return a(void 0,p)}function d(m,p){if(Ue.isUndefined(p)){if(!Ue.isUndefined(m))return a(void 0,m)}else return a(void 0,p)}function u(m,p,v){if(v in r)return a(m,p);if(v in t)return a(void 0,m)}const h={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(m,p,v)=>o(qx(m),qx(p),v,!0)};return Ue.forEach(Object.keys({...t,...r}),function(p){const v=h[p]||o,N=v(t[p],r[p],p);Ue.isUndefined(N)&&v!==u||(s[p]=N)}),s}const E2=t=>{const r=xc({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:l,headers:d,auth:u}=r;r.headers=d=Jn.from(d),r.url=k2(L2(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Ue.isFormData(s)){if(bn.hasStandardBrowserEnv||bn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((h=d.getContentType())!==!1){const[m,...p]=h?h.split(";").map(v=>v.trim()).filter(Boolean):[];d.setContentType([m||"multipart/form-data",...p].join("; "))}}if(bn.hasStandardBrowserEnv&&(a&&Ue.isFunction(a)&&(a=a(r)),a||a!==!1&&B4(r.url))){const m=o&&l&&U4.read(l);m&&d.set(o,m)}return r},$4=typeof XMLHttpRequest<"u",V4=$4&&function(t){return new Promise(function(s,a){const o=E2(t);let l=o.data;const d=Jn.from(o.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=o,p,v,N,y,k;function C(){y&&y(),k&&k(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function L(){if(!S)return;const E=Jn.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),z={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:E,config:t,request:S};_2(function(X){s(X),C()},function(X){a(X),C()},z),S=null}"onloadend"in S?S.onloadend=L:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(L)},S.onabort=function(){S&&(a(new Wt("Request aborted",Wt.ECONNABORTED,t,S)),S=null)},S.onerror=function(){a(new Wt("Network Error",Wt.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let M=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const z=o.transitional||A2;o.timeoutErrorMessage&&(M=o.timeoutErrorMessage),a(new Wt(M,z.clarifyTimeoutError?Wt.ETIMEDOUT:Wt.ECONNABORTED,t,S)),S=null},l===void 0&&d.setContentType(null),"setRequestHeader"in S&&Ue.forEach(d.toJSON(),function(M,z){S.setRequestHeader(z,M)}),Ue.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),u&&u!=="json"&&(S.responseType=o.responseType),m&&([N,k]=kf(m,!0),S.addEventListener("progress",N)),h&&S.upload&&([v,y]=kf(h),S.upload.addEventListener("progress",v),S.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(p=E=>{S&&(a(!E||E.type?new Ed(null,t,S):E),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const P=O4(o.url);if(P&&bn.protocols.indexOf(P)===-1){a(new Wt("Unsupported protocol "+P+":",Wt.ERR_BAD_REQUEST,t));return}S.send(l||null)})},H4=(t,r)=>{const{length:s}=t=t?t.filter(Boolean):[];if(r||s){let a=new AbortController,o;const l=function(m){if(!o){o=!0,u();const p=m instanceof Error?m:this.reason;a.abort(p instanceof Wt?p:new Ed(p instanceof Error?p.message:p))}};let d=r&&setTimeout(()=>{d=null,l(new Wt(`timeout ${r} of ms exceeded`,Wt.ETIMEDOUT))},r);const u=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:h}=a;return h.unsubscribe=()=>Ue.asap(u),h}},W4=function*(t,r){let s=t.byteLength;if(s<r){yield t;return}let a=0,o;for(;a<s;)o=a+r,yield t.slice(a,o),a=o},G4=async function*(t,r){for await(const s of K4(t))yield*W4(s,r)},K4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},zx=(t,r,s,a)=>{const o=G4(t,r);let l=0,d,u=h=>{d||(d=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await o.next();if(m){u(),h.close();return}let v=p.byteLength;if(s){let N=l+=v;s(N)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),o.return()}},{highWaterMark:2})},Yf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",D2=Yf&&typeof ReadableStream=="function",Y4=Yf&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),I2=(t,...r)=>{try{return!!t(...r)}catch{return!1}},J4=D2&&I2(()=>{let t=!1;const r=new Request(bn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),$x=64*1024,t0=D2&&I2(()=>Ue.isReadableStream(new Response("").body)),Af={stream:t0&&(t=>t.body)};Yf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Af[r]&&(Af[r]=Ue.isFunction(t[r])?s=>s[r]():(s,a)=>{throw new Wt(`Response type '${r}' is not supported`,Wt.ERR_NOT_SUPPORT,a)})})})(new Response);const Q4=async t=>{if(t==null)return 0;if(Ue.isBlob(t))return t.size;if(Ue.isSpecCompliantForm(t))return(await new Request(bn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ue.isArrayBufferView(t)||Ue.isArrayBuffer(t))return t.byteLength;if(Ue.isURLSearchParams(t)&&(t=t+""),Ue.isString(t))return(await Y4(t)).byteLength},X4=async(t,r)=>{const s=Ue.toFiniteNumber(t.getContentLength());return s??Q4(r)},Z4=Yf&&(async t=>{let{url:r,method:s,data:a,signal:o,cancelToken:l,timeout:d,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:v="same-origin",fetchOptions:N}=E2(t);m=m?(m+"").toLowerCase():"text";let y=H4([o,l&&l.toAbortSignal()],d),k;const C=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let S;try{if(h&&J4&&s!=="get"&&s!=="head"&&(S=await X4(p,a))!==0){let z=new Request(r,{method:"POST",body:a,duplex:"half"}),he;if(Ue.isFormData(a)&&(he=z.headers.get("content-type"))&&p.setContentType(he),z.body){const[X,J]=Bx(S,kf(Ux(h)));a=zx(z.body,$x,X,J)}}Ue.isString(v)||(v=v?"include":"omit");const L="credentials"in Request.prototype;k=new Request(r,{...N,signal:y,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:L?v:void 0});let P=await fetch(k,N);const E=t0&&(m==="stream"||m==="response");if(t0&&(u||E&&C)){const z={};["status","statusText","headers"].forEach(G=>{z[G]=P[G]});const he=Ue.toFiniteNumber(P.headers.get("content-length")),[X,J]=u&&Bx(he,kf(Ux(u),!0))||[];P=new Response(zx(P.body,$x,X,()=>{J&&J(),C&&C()}),z)}m=m||"text";let M=await Af[Ue.findKey(Af,m)||"text"](P,t);return!E&&C&&C(),await new Promise((z,he)=>{_2(z,he,{data:M,headers:Jn.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:k})})}catch(L){throw C&&C(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Wt("Network Error",Wt.ERR_NETWORK,t,k),{cause:L.cause||L}):Wt.from(L,L&&L.code,t,k)}}),r0={http:m4,xhr:V4,fetch:Z4};Ue.forEach(r0,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Vx=t=>`- ${t}`,e3=t=>Ue.isFunction(t)||t===null||t===!1,F2={getAdapter:t=>{t=Ue.isArray(t)?t:[t];const{length:r}=t;let s,a;const o={};for(let l=0;l<r;l++){s=t[l];let d;if(a=s,!e3(s)&&(a=r0[(d=String(s)).toLowerCase()],a===void 0))throw new Wt(`Unknown adapter '${d}'`);if(a)break;o[d||"#"+l]=a}if(!a){const l=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=r?l.length>1?`since :
`+l.map(Vx).join(`
`):" "+Vx(l[0]):"as no adapter specified";throw new Wt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:r0};function sp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ed(null,t)}function Hx(t){return sp(t),t.headers=Jn.from(t.headers),t.data=rp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),F2.getAdapter(t.adapter||Wu.adapter)(t).then(function(a){return sp(t),a.data=rp.call(t,t.transformResponse,a),a.headers=Jn.from(a.headers),a},function(a){return P2(a)||(sp(t),a&&a.response&&(a.response.data=rp.call(t,t.transformResponse,a.response),a.response.headers=Jn.from(a.response.headers))),Promise.reject(a)})}const T2="1.11.0",Jf={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Jf[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const Wx={};Jf.transitional=function(r,s,a){function o(l,d){return"[Axios v"+T2+"] Transitional option '"+l+"'"+d+(a?". "+a:"")}return(l,d,u)=>{if(r===!1)throw new Wt(o(d," has been removed"+(s?" in "+s:"")),Wt.ERR_DEPRECATED);return s&&!Wx[d]&&(Wx[d]=!0,console.warn(o(d," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(l,d,u):!0}};Jf.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function t3(t,r,s){if(typeof t!="object")throw new Wt("options must be an object",Wt.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const l=a[o],d=r[l];if(d){const u=t[l],h=u===void 0||d(u,l,t);if(h!==!0)throw new Wt("option "+l+" must be "+h,Wt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Wt("Unknown option "+l,Wt.ERR_BAD_OPTION)}}const Qh={assertOptions:t3,validators:Jf},Ri=Qh.validators;let uc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Rx,response:new Rx}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=xc(this.defaults,s);const{transitional:a,paramsSerializer:o,headers:l}=s;a!==void 0&&Qh.assertOptions(a,{silentJSONParsing:Ri.transitional(Ri.boolean),forcedJSONParsing:Ri.transitional(Ri.boolean),clarifyTimeoutError:Ri.transitional(Ri.boolean)},!1),o!=null&&(Ue.isFunction(o)?s.paramsSerializer={serialize:o}:Qh.assertOptions(o,{encode:Ri.function,serialize:Ri.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Qh.assertOptions(s,{baseUrl:Ri.spelling("baseURL"),withXsrfToken:Ri.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=l&&Ue.merge(l.common,l[s.method]);l&&Ue.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),s.headers=Jn.concat(d,l);const u=[];let h=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(s)===!1||(h=h&&C.synchronous,u.unshift(C.fulfilled,C.rejected))});const m=[];this.interceptors.response.forEach(function(C){m.push(C.fulfilled,C.rejected)});let p,v=0,N;if(!h){const k=[Hx.bind(this),void 0];for(k.unshift(...u),k.push(...m),N=k.length,p=Promise.resolve(s);v<N;)p=p.then(k[v++],k[v++]);return p}N=u.length;let y=s;for(v=0;v<N;){const k=u[v++],C=u[v++];try{y=k(y)}catch(S){C.call(this,S);break}}try{p=Hx.call(this,y)}catch(k){return Promise.reject(k)}for(v=0,N=m.length;v<N;)p=p.then(m[v++],m[v++]);return p}getUri(r){r=xc(this.defaults,r);const s=L2(r.baseURL,r.url,r.allowAbsoluteUrls);return k2(s,r.params,r.paramsSerializer)}};Ue.forEach(["delete","get","head","options"],function(r){uc.prototype[r]=function(s,a){return this.request(xc(a||{},{method:r,url:s,data:(a||{}).data}))}});Ue.forEach(["post","put","patch"],function(r){function s(a){return function(l,d,u){return this.request(xc(u||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}uc.prototype[r]=s(),uc.prototype[r+"Form"]=s(!0)});let r3=class O2{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const a=this;this.promise.then(o=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](o);a._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(u=>{a.subscribe(u),l=u}).then(o);return d.cancel=function(){a.unsubscribe(l)},d},r(function(l,d,u){a.reason||(a.reason=new Ed(l,d,u),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new O2(function(o){r=o}),cancel:r}}};function s3(t){return function(s){return t.apply(null,s)}}function n3(t){return Ue.isObject(t)&&t.isAxiosError===!0}const s0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(s0).forEach(([t,r])=>{s0[r]=t});function R2(t){const r=new uc(t),s=f2(uc.prototype.request,r);return Ue.extend(s,uc.prototype,r,{allOwnKeys:!0}),Ue.extend(s,r,null,{allOwnKeys:!0}),s.create=function(o){return R2(xc(t,o))},s}const gs=R2(Wu);gs.Axios=uc;gs.CanceledError=Ed;gs.CancelToken=r3;gs.isCancel=P2;gs.VERSION=T2;gs.toFormData=Kf;gs.AxiosError=Wt;gs.Cancel=gs.CanceledError;gs.all=function(r){return Promise.all(r)};gs.spread=s3;gs.isAxiosError=n3;gs.mergeConfig=xc;gs.AxiosHeaders=Jn;gs.formToJSON=t=>C2(Ue.isHTMLForm(t)?new FormData(t):t);gs.getAdapter=F2.getAdapter;gs.HttpStatusCode=s0;gs.default=gs;const{Axios:kA,AxiosError:AA,CanceledError:CA,isCancel:PA,CancelToken:_A,VERSION:LA,all:EA,Cancel:DA,isAxiosError:IA,spread:FA,toFormData:TA,AxiosHeaders:OA,HttpStatusCode:RA,formToJSON:MA,getAdapter:BA,mergeConfig:UA}=gs,a3="http://localhost:5000";class i3{client;constructor(){this.client=gs.create({baseURL:a3,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(r=>{const s=localStorage.getItem("token");return s&&(r.headers.Authorization=`Bearer ${s}`),r},r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r,r=>{const{response:s}=r;if(!s)return console.error("Network error. Please check your connection."),Promise.reject(r);switch(s.status){case 401:localStorage.removeItem("token"),window.location.href="/auth/login",console.error("Session expired. Please login again.");break;case 403:console.error("You do not have permission to perform this action.");break;case 404:console.error("Resource not found.");break;case 422:if(s.data?.errors){const a=s.data.errors;console.error("Validation errors:",a)}else console.error(s.data?.message||"Validation error.");break;case 429:console.error("Too many requests. Please try again later.");break;case 500:console.error("Server error. Please try again later.");break;default:console.error(s.data?.message||"An unexpected error occurred.")}return Promise.reject(r)})}async get(r,s){return(await this.client.get(r,s)).data}async post(r,s,a){return(await this.client.post(r,s,a)).data}async put(r,s,a){return(await this.client.put(r,s,a)).data}async patch(r,s,a){return(await this.client.patch(r,s,a)).data}async delete(r,s){return(await this.client.delete(r,s)).data}async uploadFile(r,s,a){const o=new FormData;o.append("file",s);const l={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u=>{if(a&&u.total){const h=Math.round(u.loaded*100/u.total);a(h)}}};return(await this.client.post(r,o,l)).data}async downloadFile(r,s){const a=await this.client.get(r,{responseType:"blob"}),o=new Blob([a.data]),l=window.URL.createObjectURL(o),d=document.createElement("a");d.href=l,d.download=s||"download",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(l)}}const Ct=new i3,jc={async sendLoginOTP(t){return Ct.post("/auth/send-login-otp",t)},async verifyLoginOTP(t){return Ct.post("/auth/verify-login-otp",t)},async sendSignupOTP(t){return Ct.post("/auth/send-signup-otp",t)},async verifySignupOTP(t){return Ct.post("/auth/verify-signup-otp",t)},async getCurrentUser(){return Ct.get("/auth/me")},async forgotPassword(t){return Ct.post("/auth/forgot-password",t)},async resetPassword(t){return Ct.post("/auth/reset-password",t)},async logout(){return Ct.post("/auth/logout")}},Xh=t=>{if(!t||typeof t!="string")return"user";switch(t.toLowerCase()){case"admin":return"admin";case"owner":return"owner";case"accountant":return"accountant";case"user":default:return"user"}},Qf=(t,r)=>t?r.includes(t):!1,o3=t=>Qf(t,["admin"]),Gx=t=>Qf(t,["owner"]),Kx=t=>Qf(t,["accountant"]),l3=t=>Qf(t,["admin","owner"]),ld=t=>l3(t),c3=t=>o3(t),d3={user:localStorage.getItem("user")?(()=>{const t=JSON.parse(localStorage.getItem("user"));return{...t,role:Xh(t.role)}})():null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},bu=Cr("auth/sendLoginOTP",async(t,{rejectWithValue:r})=>{try{return await jc.sendLoginOTP(t)}catch(s){return r(s.response?.data?.message||"Failed to send OTP")}}),Zh=Cr("auth/verifyLoginOTP",async(t,{rejectWithValue:r})=>{try{const s=await jc.verifyLoginOTP(t);return localStorage.setItem("token",s.accessToken),{...s,token:s.accessToken}}catch(s){return r(s.response?.data?.message||"Invalid OTP")}}),vu=Cr("auth/sendSignupOTP",async(t,{rejectWithValue:r})=>{try{return await jc.sendSignupOTP(t)}catch(s){return r(s.response?.data?.message||"Failed to send OTP")}}),ef=Cr("auth/verifySignupOTP",async(t,{rejectWithValue:r})=>{try{const s=await jc.verifySignupOTP(t);return localStorage.setItem("token",s.accessToken),{...s,token:s.accessToken}}catch(s){return r(s.response?.data?.message||"Invalid OTP")}}),xd=Cr("auth/getCurrentUser",async(t,{rejectWithValue:r})=>{try{return await jc.getCurrentUser()}catch(s){return localStorage.removeItem("token"),r(s.response?.data?.message||"Failed to get user")}}),F0=Cr("auth/logout",async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),null)),M2=Ro({name:"auth",initialState:d3,reducers:{clearError:t=>{t.error=null},setToken:(t,r)=>{t.token=r.payload,t.isAuthenticated=!0,localStorage.setItem("token",r.payload)}},extraReducers:t=>{t.addCase(bu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(bu.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(bu.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(Zh.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Zh.fulfilled,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...s.payload.user,role:Xh(s.payload.user.role)};r.user=a,r.token=s.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(Zh.rejected,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=s.payload}).addCase(vu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(vu.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(vu.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(ef.pending,r=>{r.isLoading=!0,r.error=null}).addCase(ef.fulfilled,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...s.payload.user,role:Xh(s.payload.user.role)};r.user=a,r.token=s.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(ef.rejected,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=s.payload}).addCase(xd.pending,r=>{r.isLoading=!0}).addCase(xd.fulfilled,(r,s)=>{r.isLoading=!1;const a={...s.payload,role:Xh(s.payload.role)};r.user=a,r.isAuthenticated=!0}).addCase(xd.rejected,r=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(F0.fulfilled,r=>{r.user=null,r.token=null,r.isAuthenticated=!1,r.isLoading=!1,r.error=null})}}),{clearError:u3,setToken:qA}=M2.actions,h3=M2.reducer,B2=R.createContext(void 0),f3={en:{"dashboard.title":"Dashboard","dashboard.welcome":"Welcome to Owner Portal","dashboard.overview":"Overview","dashboard.properties":"Properties","dashboard.bookings":"Bookings","dashboard.revenue":"Revenue","dashboard.occupancy":"Occupancy Rate","dashboard.averageRate":"Average Rate","dashboard.totalRevenue":"Total Revenue","dashboard.totalBookings":"Total Bookings","dashboard.activeProperties":"Active Properties","dashboard.pendingReviews":"Pending Reviews","dashboard.description":"Here's what's happening with your properties today. Manage your portfolio with ease and maximize your rental income.","dashboard.recentBookings":"Recent Bookings","dashboard.latestReservations":"Latest reservations across your properties","dashboard.quickActions":"Quick Actions","dashboard.manageEfficiently":"Manage your properties efficiently","dashboard.yourProperties":"Your Properties","dashboard.managePortfolio":"Manage and monitor your property portfolio","dashboard.viewCalendar":"View Calendar","dashboard.manageBookings":"Manage Bookings","dashboard.viewInvoices":"View Invoices","dashboard.getSAFT":"Get SAFT-T","dashboard.noBookings":"No recent bookings found","dashboard.bookingsWillAppear":"Bookings will appear here once you have reservations","dashboard.activePropertiesCount":"Active Properties","greeting.morning":"Good morning","greeting.afternoon":"Good afternoon","greeting.evening":"Good evening","property.name":"Property Name","property.address":"Address","property.type":"Type","property.status":"Status","property.guests":"Max Guests","property.bedrooms":"Bedrooms","property.bathrooms":"Bathrooms","property.amenities":"Amenities","property.actions":"Actions","property.edit":"Edit","property.delete":"Delete","property.view":"View","nav.dashboard":"Dashboard","nav.adminPanel":"Admin Panel","nav.ownerManagement":"Owner Management","nav.properties":"Properties","nav.bookings":"Bookings","nav.invoices":"Invoices","nav.sibaManager":"SIBA Manager","nav.saft":"SAFT-T","nav.calendar":"Calendar","nav.reviews":"Reviews","nav.performance":"Performance","nav.portfolio":"Portfolio","nav.creditNotes":"Credit Notes","nav.expenses":"Expenses","nav.ownerStatements":"Owner Statements","nav.settings":"Settings","nav.profile":"Profile","nav.signOut":"Sign Out","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.edit":"Edit","common.delete":"Delete","common.view":"View","common.close":"Close","common.yes":"Yes","common.no":"No","common.confirm":"Confirm","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.refresh":"Refresh","language.english":"English","language.portuguese":"Português","language.switch":"Switch Language","status.active":"Active","status.inactive":"Inactive","status.pending":"Pending","status.completed":"Completed","status.cancelled":"Cancelled","calendar.month":"Month","calendar.week":"Week","calendar.day":"Day","calendar.today":"Today","calendar.booked":"Booked","calendar.available":"Available","calendar.blocked":"Blocked","calendar.price":"Price","calendar.minStay":"Min Stay","notification.newBooking":"New Booking","notification.paymentReceived":"Payment Received","notification.reviewReceived":"New Review","notification.maintenanceRequest":"Maintenance Request","notification.title":"Notifications","notification.markAllRead":"Mark all read","notification.noNotifications":"No notifications"},pt:{"dashboard.title":"Painel de Controle","dashboard.welcome":"Bem-vindo ao Portal do Proprietário","dashboard.overview":"Visão Geral","dashboard.properties":"Propriedades","dashboard.bookings":"Reservas","dashboard.revenue":"Receita","dashboard.occupancy":"Taxa de Ocupação","dashboard.averageRate":"Taxa Média","dashboard.totalRevenue":"Receita Total","dashboard.totalBookings":"Total de Reservas","dashboard.activeProperties":"Propriedades Ativas","dashboard.pendingReviews":"Avaliações Pendentes","dashboard.description":"Aqui está o que está acontecendo com suas propriedades hoje. Gerencie seu portfólio com facilidade e maximize sua receita de aluguel.","dashboard.recentBookings":"Reservas Recentes","dashboard.latestReservations":"Últimas reservas em suas propriedades","dashboard.quickActions":"Ações Rápidas","dashboard.manageEfficiently":"Gerencie suas propriedades com eficiência","dashboard.yourProperties":"Suas Propriedades","dashboard.managePortfolio":"Gerencie e monitore seu portfólio de propriedades","dashboard.viewCalendar":"Ver Calendário","dashboard.manageBookings":"Gerenciar Reservas","dashboard.viewInvoices":"Ver Faturas","dashboard.getSAFT":"Obter SAFT-T","dashboard.noBookings":"Nenhuma reserva recente encontrada","dashboard.bookingsWillAppear":"As reservas aparecerão aqui assim que você tiver reservas","dashboard.activePropertiesCount":"Propriedades Ativas","greeting.morning":"Bom dia","greeting.afternoon":"Boa tarde","greeting.evening":"Boa noite","property.name":"Nome da Propriedade","property.address":"Endereço","property.type":"Tipo","property.status":"Status","property.guests":"Hóspedes Máx","property.bedrooms":"Quartos","property.bathrooms":"Banheiros","property.amenities":"Comodidades","property.actions":"Ações","property.edit":"Editar","property.delete":"Excluir","property.view":"Visualizar","nav.dashboard":"Painel","nav.adminPanel":"Painel Admin","nav.ownerManagement":"Gestão de Proprietários","nav.properties":"Propriedades","nav.bookings":"Reservas","nav.invoices":"Faturas","nav.sibaManager":"Gestor SIBA","nav.saft":"SAFT-T","nav.calendar":"Calendário","nav.reviews":"Avaliações","nav.performance":"Desempenho","nav.portfolio":"Portfólio","nav.creditNotes":"Notas de Crédito","nav.expenses":"Despesas","nav.ownerStatements":"Extratos do Proprietário","nav.settings":"Configurações","nav.profile":"Perfil","nav.signOut":"Sair","common.loading":"Carregando...","common.error":"Erro","common.success":"Sucesso","common.save":"Salvar","common.cancel":"Cancelar","common.edit":"Editar","common.delete":"Excluir","common.view":"Visualizar","common.close":"Fechar","common.yes":"Sim","common.no":"Não","common.confirm":"Confirmar","common.search":"Pesquisar","common.filter":"Filtrar","common.sort":"Ordenar","common.refresh":"Atualizar","language.english":"English","language.portuguese":"Português","language.switch":"Alterar Idioma","status.active":"Ativo","status.inactive":"Inativo","status.pending":"Pendente","status.completed":"Concluído","status.cancelled":"Cancelado","calendar.month":"Mês","calendar.week":"Semana","calendar.day":"Dia","calendar.today":"Hoje","calendar.booked":"Reservado","calendar.available":"Disponível","calendar.blocked":"Bloqueado","calendar.price":"Preço","calendar.minStay":"Estadia Mín","notification.newBooking":"Nova Reserva","notification.paymentReceived":"Pagamento Recebido","notification.reviewReceived":"Nova Avaliação","notification.maintenanceRequest":"Solicitação de Manutenção","notification.title":"Notificações","notification.markAllRead":"Marcar todas como lidas","notification.noNotifications":"Nenhuma notificação"}},m3=({children:t})=>{const[r,s]=R.useState(()=>{const l=localStorage.getItem("language");return l&&["en","pt"].includes(l)?l:"en"});R.useEffect(()=>{localStorage.setItem("language",r)},[r]);const o={language:r,setLanguage:s,t:l=>f3[r][l]||l};return e.jsx(B2.Provider,{value:o,children:t})},Xf=()=>{const t=R.useContext(B2);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U2=(...t)=>t.filter((r,s,a)=>!!r&&a.indexOf(r)===s).join(" ");/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=R.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...u},h)=>R.createElement("svg",{ref:h,...g3,width:r,height:r,stroke:t,strokeWidth:a?Number(s)*24/Number(r):s,className:U2("lucide",o),...u},[...d.map(([m,p])=>R.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,r)=>{const s=R.forwardRef(({className:a,...o},l)=>R.createElement(x3,{ref:l,iconNode:r,className:U2(`lucide-${p3(t)}`,a),...o}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=dt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=dt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=dt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=dt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=dt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=dt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=dt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=dt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=dt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=dt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=dt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=dt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=dt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=dt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=dt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=dt("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=dt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=dt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=dt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=dt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=dt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=dt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=dt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=dt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=dt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=dt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=dt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=dt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=dt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=dt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=dt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=dt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=dt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=dt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=dt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=dt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=dt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=dt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=dt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=dt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=dt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=dt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=dt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),F3=({isOpen:t,onClose:r})=>{const s=Nc(),a=As(),{user:o}=Ft(p=>p.auth),{t:l}=Xf(),d=[{name:l("nav.dashboard"),href:"/dashboard/owner",icon:k3},{name:l("nav.adminPanel"),href:"/admin/dashboard",icon:w3,roles:["admin"]},{name:l("nav.ownerManagement"),href:"/admin/owners",icon:pa,roles:["admin"]},{name:l("nav.bookings"),href:"/bookings",icon:z2},{name:l("nav.invoices"),href:"/invoices",icon:Yi},{name:l("nav.sibaManager"),href:"/siba-manager",icon:js},{name:l("nav.saft"),href:"/saft",icon:a0},{name:l("nav.properties"),href:"/property-management",icon:en},{name:l("nav.calendar"),href:"/calendar",icon:ns},{name:l("nav.ownerStatements"),href:"/owner-statements",icon:Yi},{name:l("nav.reviews"),href:"/reviews",icon:rf,roles:["owner"]}];R.useEffect(()=>{r()},[s.pathname,r]);const u=()=>{a(F0())},h=d.filter(p=>!p.roles||o&&p.roles.includes(o.role)),m=p=>p==="/dashboard/owner"?s.pathname==="/"||s.pathname==="/dashboard"||s.pathname.startsWith("/dashboard/owner"):s.pathname===p||s.pathname.startsWith(p);return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:r})}),e.jsx("nav",{className:`w-64 bg-white shadow-sm min-h-screen ${t?"fixed inset-y-0 left-0 z-50 translate-x-0":"hidden lg:block"}`,children:e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"space-y-2",children:h.map(p=>{const v=p.icon,N=m(p.href);return e.jsxs(Do,{to:p.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${N?"bg-[#5FFF56] bg-opacity-20 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:p.name}),p.badge&&e.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:p.badge})]},p.name)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:u,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsx(H2,{className:"mr-3 h-5 w-5 text-gray-500"}),l("nav.signOut")]})})]})})]})},T3={notifications:[{id:"1",title:"New Booking",message:"New booking for Piece of Heaven from John Doe",type:"success",timestamp:new Date().toISOString(),read:!1,actionUrl:"/bookings",actionLabel:"View Details"},{id:"2",title:"SIBA Reminder",message:"SIBA submission required for Lote 8 4-B",type:"warning",timestamp:new Date(Date.now()-36e5).toISOString(),read:!1,actionUrl:"/siba",actionLabel:"Submit Now"}],unreadCount:2},W2=Ro({name:"notifications",initialState:T3,reducers:{addNotification:(t,r)=>{const s={...r.payload,id:Date.now().toString(),timestamp:new Date().toISOString()};t.notifications.unshift(s),s.read||(t.unreadCount+=1)},markAsRead:(t,r)=>{const s=t.notifications.find(a=>a.id===r.payload);s&&!s.read&&(s.read=!0,t.unreadCount=Math.max(0,t.unreadCount-1))},markAllAsRead:t=>{t.notifications.forEach(r=>{r.read=!0}),t.unreadCount=0},removeNotification:(t,r)=>{const s=t.notifications.findIndex(a=>a.id===r.payload);s!==-1&&(t.notifications[s].read||(t.unreadCount=Math.max(0,t.unreadCount-1)),t.notifications.splice(s,1))}}}),{addNotification:zA,markAsRead:O3,markAllAsRead:R3,removeNotification:$A}=W2.actions,M3=W2.reducer,B3="/assets/Real-logo-D3Cla3EV.jpg",G2=({className:t="",size:r="md"})=>{const s={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsx("img",{src:B3,alt:"Logo",className:`${s[r]} ${t}`})},U3=({className:t="",showLabel:r=!0})=>{const{language:s,setLanguage:a,t:o}=Xf(),[l,d]=R.useState(!1),u=[{code:"en",name:"English",flag:"🇺🇸"},{code:"pt",name:"Português",flag:"🇵🇹"}],h=u.find(p=>p.code===s),m=p=>{a(p),d(!1)};return e.jsxs("div",{className:`relative ${t}`,children:[e.jsxs("button",{onClick:()=>d(!l),className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:o("language.switch"),children:[e.jsx(S3,{className:"h-5 w-5"}),r&&e.jsxs("span",{className:"text-sm font-medium",children:[h?.flag," ",h?.name]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-20",children:e.jsx("div",{className:"py-2",children:u.map(p=>e.jsxs("button",{onClick:()=>m(p.code),className:`flex items-center justify-between w-full px-4 py-2 text-sm hover:bg-gray-50 ${s===p.code?"bg-green-50 text-green-800":"text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:p.flag}),e.jsx("span",{className:"font-medium",children:p.name})]}),s===p.code&&e.jsx(Eo,{className:"h-4 w-4 text-green-600"})]},p.code))})})]})]})},q3=({onMenuClick:t})=>{const[r,s]=R.useState(!1),[a,o]=R.useState(!1),l=As();pi();const{t:d}=Xf(),{user:u}=Ft(y=>y.auth),{notifications:h,unreadCount:m}=Ft(y=>y.notifications),p=()=>{l(F0())},v=y=>{l(O3(y))},N=()=>{l(R3())};return e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100 mr-2",children:e.jsx(P3,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg mr-3 border border-gray-200 shadow-sm",children:e.jsx(G2,{size:"md"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[e.jsx("span",{className:"text-gray-900",children:"Owner"}),e.jsx("span",{className:"text-[#5FFF56]",children:"Portal"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Property Management"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(U3,{showLabel:!1}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!r),className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(q2,{className:"h-6 w-6"}),m>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:m>9?"9+":m})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("notification.title")}),m>0&&e.jsx("button",{onClick:N,className:"text-sm text-[#5FFF56] hover:text-[#4FEF46]",children:d("notification.markAllRead")})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:d("notification.noNotifications")}):h.slice(0,5).map(y=>e.jsx("div",{onClick:()=>v(y.id),className:`p-4 border-b border-gray-50 cursor-pointer hover:bg-gray-50 ${y.read?"":"bg-green-50"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:y.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:y.timestamp})]}),!y.read&&e.jsx("div",{className:"w-2 h-2 bg-[#5FFF56] rounded-full ml-2 mt-1"})]})},y.id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>o(!a),className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-[#5FFF56] rounded-full",children:e.jsx("span",{className:"text-sm font-bold text-white",children:(u?.firstName||u?.name||u?.username||u?.email||"U").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-base font-bold text-gray-900",children:u?.firstName||u?.name||u?.username||"John"}),e.jsx("p",{className:"text-sm text-[#5FFF56] font-semibold capitalize",children:u?.role?.toLowerCase()||"Owner"})]}),e.jsx(Cf,{className:"h-4 w-4 text-gray-500"})]}),a&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u?.firstName||u?.name||u?.username||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:u?.email})]}),e.jsxs("button",{onClick:p,className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:[e.jsx(H2,{className:"h-4 w-4 mr-3"}),d("nav.signOut")]})]})})]})]})]})})})},z3=()=>{const[t,r]=R.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(q3,{onMenuClick:()=>r(!0)}),e.jsxs("div",{className:"flex",children:[e.jsx(F3,{isOpen:t,onClose:()=>r(!1)}),e.jsx("main",{className:"flex-1 p-8 bg-white",children:e.jsx(K1,{})})]})]})},$3=()=>{const t=pi(),{isAuthenticated:r}=Ft(s=>s.auth);return R.useEffect(()=>{r&&t("/dashboard")},[r,t]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(K1,{})})};var Ku=t=>t.type==="checkbox",dc=t=>t instanceof Date,En=t=>t==null;const K2=t=>typeof t=="object";var ps=t=>!En(t)&&!Array.isArray(t)&&K2(t)&&!dc(t),V3=t=>ps(t)&&t.target?Ku(t.target)?t.target.checked:t.target.value:t,H3=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,W3=(t,r)=>t.has(H3(r)),G3=t=>{const r=t.constructor&&t.constructor.prototype;return ps(r)&&r.hasOwnProperty("isPrototypeOf")},R0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $s(t){let r;const s=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(R0&&(t instanceof Blob||a))&&(s||ps(t)))if(r=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!G3(t))r=t;else for(const o in t)t.hasOwnProperty(o)&&(r[o]=$s(t[o]));else return t;return r}var Zf=t=>/^\w*$/.test(t),Ss=t=>t===void 0,M0=t=>Array.isArray(t)?t.filter(Boolean):[],B0=t=>M0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(t,r,s)=>{if(!r||!ps(t))return s;const a=(Zf(r)?[r]:B0(r)).reduce((o,l)=>En(o)?o:o[l],t);return Ss(a)||a===t?Ss(t[r])?s:t[r]:a},qi=t=>typeof t=="boolean",Rr=(t,r,s)=>{let a=-1;const o=Zf(r)?[r]:B0(r),l=o.length,d=l-1;for(;++a<l;){const u=o[a];let h=s;if(a!==d){const m=t[u];h=ps(m)||Array.isArray(m)?m:isNaN(+o[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=h,t=t[u]}};const Qx={BLUR:"blur",FOCUS_OUT:"focusout"},ui={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Co={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},K3=Ln.createContext(null);K3.displayName="HookFormContext";var Y3=(t,r,s,a=!0)=>{const o={defaultValues:r._defaultValues};for(const l in t)Object.defineProperty(o,l,{get:()=>{const d=l;return r._proxyFormState[d]!==ui.all&&(r._proxyFormState[d]=!a||ui.all),t[d]}});return o};const J3=typeof window<"u"?Ln.useLayoutEffect:Ln.useEffect;var Vi=t=>typeof t=="string",Q3=(t,r,s,a,o)=>Vi(t)?(a&&r.watch.add(t),St(s,t,o)):Array.isArray(t)?t.map(l=>(a&&r.watch.add(l),St(s,l))):(a&&(r.watchAll=!0),s),i0=t=>En(t)||!K2(t);function vl(t,r,s=new WeakSet){if(i0(t)||i0(r))return t===r;if(dc(t)&&dc(r))return t.getTime()===r.getTime();const a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;if(s.has(t)||s.has(r))return!0;s.add(t),s.add(r);for(const l of a){const d=t[l];if(!o.includes(l))return!1;if(l!=="ref"){const u=r[l];if(dc(d)&&dc(u)||ps(d)&&ps(u)||Array.isArray(d)&&Array.isArray(u)?!vl(d,u,s):d!==u)return!1}}return!0}var X3=(t,r,s,a,o)=>r?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[a]:o||!0}}:{},Nu=t=>Array.isArray(t)?t:[t],Xx=()=>{let t=[];return{get observers(){return t},next:o=>{for(const l of t)l.next&&l.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(l=>l!==o)}}),unsubscribe:()=>{t=[]}}},Kn=t=>ps(t)&&!Object.keys(t).length,U0=t=>t.type==="file",hi=t=>typeof t=="function",Pf=t=>{if(!R0)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Y2=t=>t.type==="select-multiple",q0=t=>t.type==="radio",Z3=t=>q0(t)||Ku(t),dp=t=>Pf(t)&&t.isConnected;function e6(t,r){const s=r.slice(0,-1).length;let a=0;for(;a<s;)t=Ss(t)?a++:t[r[a++]];return t}function t6(t){for(const r in t)if(t.hasOwnProperty(r)&&!Ss(t[r]))return!1;return!0}function Ns(t,r){const s=Array.isArray(r)?r:Zf(r)?[r]:B0(r),a=s.length===1?t:e6(t,s),o=s.length-1,l=s[o];return a&&delete a[l],o!==0&&(ps(a)&&Kn(a)||Array.isArray(a)&&t6(a))&&Ns(t,s.slice(0,-1)),t}var J2=t=>{for(const r in t)if(hi(t[r]))return!0;return!1};function _f(t,r={}){const s=Array.isArray(t);if(ps(t)||s)for(const a in t)Array.isArray(t[a])||ps(t[a])&&!J2(t[a])?(r[a]=Array.isArray(t[a])?[]:{},_f(t[a],r[a])):En(t[a])||(r[a]=!0);return r}function Q2(t,r,s){const a=Array.isArray(t);if(ps(t)||a)for(const o in t)Array.isArray(t[o])||ps(t[o])&&!J2(t[o])?Ss(r)||i0(s[o])?s[o]=Array.isArray(t[o])?_f(t[o],[]):{..._f(t[o])}:Q2(t[o],En(r)?{}:r[o],s[o]):s[o]=!vl(t[o],r[o]);return s}var hu=(t,r)=>Q2(t,r,_f(r));const Zx={value:!1,isValid:!1},ey={value:!0,isValid:!0};var X2=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ss(t[0].attributes.value)?Ss(t[0].value)||t[0].value===""?ey:{value:t[0].value,isValid:!0}:ey:Zx}return Zx},Z2=(t,{valueAsNumber:r,valueAsDate:s,setValueAs:a})=>Ss(t)?t:r?t===""?NaN:t&&+t:s&&Vi(t)?new Date(t):a?a(t):t;const ty={isValid:!1,value:null};var eb=t=>Array.isArray(t)?t.reduce((r,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:r,ty):ty;function ry(t){const r=t.ref;return U0(r)?r.files:q0(r)?eb(t.refs).value:Y2(r)?[...r.selectedOptions].map(({value:s})=>s):Ku(r)?X2(t.refs).value:Z2(Ss(r.value)?t.ref.value:r.value,t)}var r6=(t,r,s,a)=>{const o={};for(const l of t){const d=St(r,l);d&&Rr(o,l,d._f)}return{criteriaMode:s,names:[...t],fields:o,shouldUseNativeValidation:a}},Lf=t=>t instanceof RegExp,fu=t=>Ss(t)?t:Lf(t)?t.source:ps(t)?Lf(t.value)?t.value.source:t.value:t,sy=t=>({isOnSubmit:!t||t===ui.onSubmit,isOnBlur:t===ui.onBlur,isOnChange:t===ui.onChange,isOnAll:t===ui.all,isOnTouch:t===ui.onTouched});const ny="AsyncFunction";var s6=t=>!!t&&!!t.validate&&!!(hi(t.validate)&&t.validate.constructor.name===ny||ps(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===ny)),n6=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ay=(t,r,s)=>!s&&(r.watchAll||r.watch.has(t)||[...r.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const ju=(t,r,s,a)=>{for(const o of s||Object.keys(t)){const l=St(t,o);if(l){const{_f:d,...u}=l;if(d){if(d.refs&&d.refs[0]&&r(d.refs[0],o)&&!a)return!0;if(d.ref&&r(d.ref,d.name)&&!a)return!0;if(ju(u,r))break}else if(ps(u)&&ju(u,r))break}}};function iy(t,r,s){const a=St(t,s);if(a||Zf(s))return{error:a,name:s};const o=s.split(".");for(;o.length;){const l=o.join("."),d=St(r,l),u=St(t,l);if(d&&!Array.isArray(d)&&s!==l)return{name:s};if(u&&u.type)return{name:l,error:u};if(u&&u.root&&u.root.type)return{name:`${l}.root`,error:u.root};o.pop()}return{name:s}}var a6=(t,r,s,a)=>{s(t);const{name:o,...l}=t;return Kn(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(d=>r[d]===(!a||ui.all))},i6=(t,r,s)=>!t||!r||t===r||Nu(t).some(a=>a&&(s?a===r:a.startsWith(r)||r.startsWith(a))),o6=(t,r,s,a,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(r||t):(s?a.isOnBlur:o.isOnBlur)?!t:(s?a.isOnChange:o.isOnChange)?t:!0,l6=(t,r)=>!M0(St(t,r)).length&&Ns(t,r),c6=(t,r,s)=>{const a=Nu(St(t,s));return Rr(a,"root",r[s]),Rr(t,s,a),t},sf=t=>Vi(t);function oy(t,r,s="validate"){if(sf(t)||Array.isArray(t)&&t.every(sf)||qi(t)&&!t)return{type:s,message:sf(t)?t:"",ref:r}}var cd=t=>ps(t)&&!Lf(t)?t:{value:t,message:""},ly=async(t,r,s,a,o,l)=>{const{ref:d,refs:u,required:h,maxLength:m,minLength:p,min:v,max:N,pattern:y,validate:k,name:C,valueAsNumber:S,mount:L}=t._f,P=St(s,C);if(!L||r.has(C))return{};const E=u?u[0]:d,M=U=>{o&&E.reportValidity&&(E.setCustomValidity(qi(U)?"":U||""),E.reportValidity())},z={},he=q0(d),X=Ku(d),J=he||X,G=(S||U0(d))&&Ss(d.value)&&Ss(P)||Pf(d)&&d.value===""||P===""||Array.isArray(P)&&!P.length,pe=X3.bind(null,C,a,z),I=(U,B,W,Y=Co.maxLength,le=Co.minLength)=>{const F=U?B:W;z[C]={type:U?Y:le,message:F,ref:d,...pe(U?Y:le,F)}};if(l?!Array.isArray(P)||!P.length:h&&(!J&&(G||En(P))||qi(P)&&!P||X&&!X2(u).isValid||he&&!eb(u).isValid)){const{value:U,message:B}=sf(h)?{value:!!h,message:h}:cd(h);if(U&&(z[C]={type:Co.required,message:B,ref:E,...pe(Co.required,B)},!a))return M(B),z}if(!G&&(!En(v)||!En(N))){let U,B;const W=cd(N),Y=cd(v);if(!En(P)&&!isNaN(P)){const le=d.valueAsNumber||P&&+P;En(W.value)||(U=le>W.value),En(Y.value)||(B=le<Y.value)}else{const le=d.valueAsDate||new Date(P),F=Ae=>new Date(new Date().toDateString()+" "+Ae),Z=d.type=="time",be=d.type=="week";Vi(W.value)&&P&&(U=Z?F(P)>F(W.value):be?P>W.value:le>new Date(W.value)),Vi(Y.value)&&P&&(B=Z?F(P)<F(Y.value):be?P<Y.value:le<new Date(Y.value))}if((U||B)&&(I(!!U,W.message,Y.message,Co.max,Co.min),!a))return M(z[C].message),z}if((m||p)&&!G&&(Vi(P)||l&&Array.isArray(P))){const U=cd(m),B=cd(p),W=!En(U.value)&&P.length>+U.value,Y=!En(B.value)&&P.length<+B.value;if((W||Y)&&(I(W,U.message,B.message),!a))return M(z[C].message),z}if(y&&!G&&Vi(P)){const{value:U,message:B}=cd(y);if(Lf(U)&&!P.match(U)&&(z[C]={type:Co.pattern,message:B,ref:d,...pe(Co.pattern,B)},!a))return M(B),z}if(k){if(hi(k)){const U=await k(P,s),B=oy(U,E);if(B&&(z[C]={...B,...pe(Co.validate,B.message)},!a))return M(B.message),z}else if(ps(k)){let U={};for(const B in k){if(!Kn(U)&&!a)break;const W=oy(await k[B](P,s),E,B);W&&(U={...W,...pe(B,W.message)},M(W.message),a&&(z[C]=U))}if(!Kn(U)&&(z[C]={ref:E,...U},!a))return z}}return M(!0),z};const d6={mode:ui.onSubmit,reValidateMode:ui.onChange,shouldFocusError:!0};function u6(t={}){let r={...d6,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:hi(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},o=ps(r.defaultValues)||ps(r.values)?$s(r.defaultValues||r.values)||{}:{},l=r.shouldUnregister?{}:$s(o),d={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,m=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...p};const N={array:Xx(),state:Xx()},y=r.criteriaMode===ui.all,k=re=>ce=>{clearTimeout(m),m=setTimeout(re,ce)},C=async re=>{if(!r.disabled&&(p.isValid||v.isValid||re)){const ce=r.resolver?Kn((await X()).errors):await G(a,!0);ce!==s.isValid&&N.state.next({isValid:ce})}},S=(re,ce)=>{!r.disabled&&(p.isValidating||p.validatingFields||v.isValidating||v.validatingFields)&&((re||Array.from(u.mount)).forEach(je=>{je&&(ce?Rr(s.validatingFields,je,ce):Ns(s.validatingFields,je))}),N.state.next({validatingFields:s.validatingFields,isValidating:!Kn(s.validatingFields)}))},L=(re,ce=[],je,Oe,Re=!0,Fe=!0)=>{if(Oe&&je&&!r.disabled){if(d.action=!0,Fe&&Array.isArray(St(a,re))){const We=je(St(a,re),Oe.argA,Oe.argB);Re&&Rr(a,re,We)}if(Fe&&Array.isArray(St(s.errors,re))){const We=je(St(s.errors,re),Oe.argA,Oe.argB);Re&&Rr(s.errors,re,We),l6(s.errors,re)}if((p.touchedFields||v.touchedFields)&&Fe&&Array.isArray(St(s.touchedFields,re))){const We=je(St(s.touchedFields,re),Oe.argA,Oe.argB);Re&&Rr(s.touchedFields,re,We)}(p.dirtyFields||v.dirtyFields)&&(s.dirtyFields=hu(o,l)),N.state.next({name:re,isDirty:I(re,ce),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Rr(l,re,ce)},P=(re,ce)=>{Rr(s.errors,re,ce),N.state.next({errors:s.errors})},E=re=>{s.errors=re,N.state.next({errors:s.errors,isValid:!1})},M=(re,ce,je,Oe)=>{const Re=St(a,re);if(Re){const Fe=St(l,re,Ss(je)?St(o,re):je);Ss(Fe)||Oe&&Oe.defaultChecked||ce?Rr(l,re,ce?Fe:ry(Re._f)):W(re,Fe),d.mount&&C()}},z=(re,ce,je,Oe,Re)=>{let Fe=!1,We=!1;const at={name:re};if(!r.disabled){if(!je||Oe){(p.isDirty||v.isDirty)&&(We=s.isDirty,s.isDirty=at.isDirty=I(),Fe=We!==at.isDirty);const nt=vl(St(o,re),ce);We=!!St(s.dirtyFields,re),nt?Ns(s.dirtyFields,re):Rr(s.dirtyFields,re,!0),at.dirtyFields=s.dirtyFields,Fe=Fe||(p.dirtyFields||v.dirtyFields)&&We!==!nt}if(je){const nt=St(s.touchedFields,re);nt||(Rr(s.touchedFields,re,je),at.touchedFields=s.touchedFields,Fe=Fe||(p.touchedFields||v.touchedFields)&&nt!==je)}Fe&&Re&&N.state.next(at)}return Fe?at:{}},he=(re,ce,je,Oe)=>{const Re=St(s.errors,re),Fe=(p.isValid||v.isValid)&&qi(ce)&&s.isValid!==ce;if(r.delayError&&je?(h=k(()=>P(re,je)),h(r.delayError)):(clearTimeout(m),h=null,je?Rr(s.errors,re,je):Ns(s.errors,re)),(je?!vl(Re,je):Re)||!Kn(Oe)||Fe){const We={...Oe,...Fe&&qi(ce)?{isValid:ce}:{},errors:s.errors,name:re};s={...s,...We},N.state.next(We)}},X=async re=>{S(re,!0);const ce=await r.resolver(l,r.context,r6(re||u.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return S(re),ce},J=async re=>{const{errors:ce}=await X(re);if(re)for(const je of re){const Oe=St(ce,je);Oe?Rr(s.errors,je,Oe):Ns(s.errors,je)}else s.errors=ce;return ce},G=async(re,ce,je={valid:!0})=>{for(const Oe in re){const Re=re[Oe];if(Re){const{_f:Fe,...We}=Re;if(Fe){const at=u.array.has(Fe.name),nt=Re._f&&s6(Re._f);nt&&p.validatingFields&&S([Oe],!0);const it=await ly(Re,u.disabled,l,y,r.shouldUseNativeValidation&&!ce,at);if(nt&&p.validatingFields&&S([Oe]),it[Fe.name]&&(je.valid=!1,ce))break;!ce&&(St(it,Fe.name)?at?c6(s.errors,it,Fe.name):Rr(s.errors,Fe.name,it[Fe.name]):Ns(s.errors,Fe.name))}!Kn(We)&&await G(We,ce,je)}}return je.valid},pe=()=>{for(const re of u.unMount){const ce=St(a,re);ce&&(ce._f.refs?ce._f.refs.every(je=>!dp(je)):!dp(ce._f.ref))&&ye(re)}u.unMount=new Set},I=(re,ce)=>!r.disabled&&(re&&ce&&Rr(l,re,ce),!vl(Ae(),o)),U=(re,ce,je)=>Q3(re,u,{...d.mount?l:Ss(ce)?o:Vi(re)?{[re]:ce}:ce},je,ce),B=re=>M0(St(d.mount?l:o,re,r.shouldUnregister?St(o,re,[]):[])),W=(re,ce,je={})=>{const Oe=St(a,re);let Re=ce;if(Oe){const Fe=Oe._f;Fe&&(!Fe.disabled&&Rr(l,re,Z2(ce,Fe)),Re=Pf(Fe.ref)&&En(ce)?"":ce,Y2(Fe.ref)?[...Fe.ref.options].forEach(We=>We.selected=Re.includes(We.value)):Fe.refs?Ku(Fe.ref)?Fe.refs.forEach(We=>{(!We.defaultChecked||!We.disabled)&&(Array.isArray(Re)?We.checked=!!Re.find(at=>at===We.value):We.checked=Re===We.value||!!Re)}):Fe.refs.forEach(We=>We.checked=We.value===Re):U0(Fe.ref)?Fe.ref.value="":(Fe.ref.value=Re,Fe.ref.type||N.state.next({name:re,values:$s(l)})))}(je.shouldDirty||je.shouldTouch)&&z(re,Re,je.shouldTouch,je.shouldDirty,!0),je.shouldValidate&&be(re)},Y=(re,ce,je)=>{for(const Oe in ce){if(!ce.hasOwnProperty(Oe))return;const Re=ce[Oe],Fe=re+"."+Oe,We=St(a,Fe);(u.array.has(re)||ps(Re)||We&&!We._f)&&!dc(Re)?Y(Fe,Re,je):W(Fe,Re,je)}},le=(re,ce,je={})=>{const Oe=St(a,re),Re=u.array.has(re),Fe=$s(ce);Rr(l,re,Fe),Re?(N.array.next({name:re,values:$s(l)}),(p.isDirty||p.dirtyFields||v.isDirty||v.dirtyFields)&&je.shouldDirty&&N.state.next({name:re,dirtyFields:hu(o,l),isDirty:I(re,Fe)})):Oe&&!Oe._f&&!En(Fe)?Y(re,Fe,je):W(re,Fe,je),ay(re,u)&&N.state.next({...s,name:re}),N.state.next({name:d.mount?re:void 0,values:$s(l)})},F=async re=>{d.mount=!0;const ce=re.target;let je=ce.name,Oe=!0;const Re=St(a,je),Fe=nt=>{Oe=Number.isNaN(nt)||dc(nt)&&isNaN(nt.getTime())||vl(nt,St(l,je,nt))},We=sy(r.mode),at=sy(r.reValidateMode);if(Re){let nt,it;const wt=ce.type?ry(Re._f):V3(re),ot=re.type===Qx.BLUR||re.type===Qx.FOCUS_OUT,Ut=!n6(Re._f)&&!r.resolver&&!St(s.errors,je)&&!Re._f.deps||o6(ot,St(s.touchedFields,je),s.isSubmitted,at,We),qt=ay(je,u,ot);Rr(l,je,wt),ot?(!ce||!ce.readOnly)&&(Re._f.onBlur&&Re._f.onBlur(re),h&&h(0)):Re._f.onChange&&Re._f.onChange(re);const lt=z(je,wt,ot),xt=!Kn(lt)||qt;if(!ot&&N.state.next({name:je,type:re.type,values:$s(l)}),Ut)return(p.isValid||v.isValid)&&(r.mode==="onBlur"?ot&&C():ot||C()),xt&&N.state.next({name:je,...qt?{}:lt});if(!ot&&qt&&N.state.next({...s}),r.resolver){const{errors:Gt}=await X([je]);if(Fe(wt),Oe){const Nt=iy(s.errors,a,je),Rt=iy(Gt,a,Nt.name||je);nt=Rt.error,je=Rt.name,it=Kn(Gt)}}else S([je],!0),nt=(await ly(Re,u.disabled,l,y,r.shouldUseNativeValidation))[je],S([je]),Fe(wt),Oe&&(nt?it=!1:(p.isValid||v.isValid)&&(it=await G(a,!0)));Oe&&(Re._f.deps&&be(Re._f.deps),he(je,it,nt,lt))}},Z=(re,ce)=>{if(St(s.errors,ce)&&re.focus)return re.focus(),1},be=async(re,ce={})=>{let je,Oe;const Re=Nu(re);if(r.resolver){const Fe=await J(Ss(re)?re:Re);je=Kn(Fe),Oe=re?!Re.some(We=>St(Fe,We)):je}else re?(Oe=(await Promise.all(Re.map(async Fe=>{const We=St(a,Fe);return await G(We&&We._f?{[Fe]:We}:We)}))).every(Boolean),!(!Oe&&!s.isValid)&&C()):Oe=je=await G(a);return N.state.next({...!Vi(re)||(p.isValid||v.isValid)&&je!==s.isValid?{}:{name:re},...r.resolver||!re?{isValid:je}:{},errors:s.errors}),ce.shouldFocus&&!Oe&&ju(a,Z,re?Re:u.mount),Oe},Ae=re=>{const ce={...d.mount?l:o};return Ss(re)?ce:Vi(re)?St(ce,re):re.map(je=>St(ce,je))},ee=(re,ce)=>({invalid:!!St((ce||s).errors,re),isDirty:!!St((ce||s).dirtyFields,re),error:St((ce||s).errors,re),isValidating:!!St(s.validatingFields,re),isTouched:!!St((ce||s).touchedFields,re)}),D=re=>{re&&Nu(re).forEach(ce=>Ns(s.errors,ce)),N.state.next({errors:re?s.errors:{}})},te=(re,ce,je)=>{const Oe=(St(a,re,{_f:{}})._f||{}).ref,Re=St(s.errors,re)||{},{ref:Fe,message:We,type:at,...nt}=Re;Rr(s.errors,re,{...nt,...ce,ref:Oe}),N.state.next({name:re,errors:s.errors,isValid:!1}),je&&je.shouldFocus&&Oe&&Oe.focus&&Oe.focus()},se=(re,ce)=>hi(re)?N.state.subscribe({next:je=>"values"in je&&re(U(void 0,ce),je)}):U(re,ce,!0),fe=re=>N.state.subscribe({next:ce=>{i6(re.name,ce.name,re.exact)&&a6(ce,re.formState||p,rt,re.reRenderRoot)&&re.callback({values:{...l},...s,...ce,defaultValues:o})}}).unsubscribe,V=re=>(d.mount=!0,v={...v,...re.formState},fe({...re,formState:v})),ye=(re,ce={})=>{for(const je of re?Nu(re):u.mount)u.mount.delete(je),u.array.delete(je),ce.keepValue||(Ns(a,je),Ns(l,je)),!ce.keepError&&Ns(s.errors,je),!ce.keepDirty&&Ns(s.dirtyFields,je),!ce.keepTouched&&Ns(s.touchedFields,je),!ce.keepIsValidating&&Ns(s.validatingFields,je),!r.shouldUnregister&&!ce.keepDefaultValue&&Ns(o,je);N.state.next({values:$s(l)}),N.state.next({...s,...ce.keepDirty?{isDirty:I()}:{}}),!ce.keepIsValid&&C()},ie=({disabled:re,name:ce})=>{(qi(re)&&d.mount||re||u.disabled.has(ce))&&(re?u.disabled.add(ce):u.disabled.delete(ce))},ge=(re,ce={})=>{let je=St(a,re);const Oe=qi(ce.disabled)||qi(r.disabled);return Rr(a,re,{...je||{},_f:{...je&&je._f?je._f:{ref:{name:re}},name:re,mount:!0,...ce}}),u.mount.add(re),je?ie({disabled:qi(ce.disabled)?ce.disabled:r.disabled,name:re}):M(re,!0,ce.value),{...Oe?{disabled:ce.disabled||r.disabled}:{},...r.progressive?{required:!!ce.required,min:fu(ce.min),max:fu(ce.max),minLength:fu(ce.minLength),maxLength:fu(ce.maxLength),pattern:fu(ce.pattern)}:{},name:re,onChange:F,onBlur:F,ref:Re=>{if(Re){ge(re,ce),je=St(a,re);const Fe=Ss(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,We=Z3(Fe),at=je._f.refs||[];if(We?at.find(nt=>nt===Fe):Fe===je._f.ref)return;Rr(a,re,{_f:{...je._f,...We?{refs:[...at.filter(dp),Fe,...Array.isArray(St(o,re))?[{}]:[]],ref:{type:Fe.type,name:re}}:{ref:Fe}}}),M(re,!1,void 0,Fe)}else je=St(a,re,{}),je._f&&(je._f.mount=!1),(r.shouldUnregister||ce.shouldUnregister)&&!(W3(u.array,re)&&d.action)&&u.unMount.add(re)}}},de=()=>r.shouldFocusError&&ju(a,Z,u.mount),ue=re=>{qi(re)&&(N.state.next({disabled:re}),ju(a,(ce,je)=>{const Oe=St(a,je);Oe&&(ce.disabled=Oe._f.disabled||re,Array.isArray(Oe._f.refs)&&Oe._f.refs.forEach(Re=>{Re.disabled=Oe._f.disabled||re}))},0,!1))},Pe=(re,ce)=>async je=>{let Oe;je&&(je.preventDefault&&je.preventDefault(),je.persist&&je.persist());let Re=$s(l);if(N.state.next({isSubmitting:!0}),r.resolver){const{errors:Fe,values:We}=await X();s.errors=Fe,Re=$s(We)}else await G(a);if(u.disabled.size)for(const Fe of u.disabled)Ns(Re,Fe);if(Ns(s.errors,"root"),Kn(s.errors)){N.state.next({errors:{}});try{await re(Re,je)}catch(Fe){Oe=Fe}}else ce&&await ce({...s.errors},je),de(),setTimeout(de);if(N.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kn(s.errors)&&!Oe,submitCount:s.submitCount+1,errors:s.errors}),Oe)throw Oe},Xe=(re,ce={})=>{St(a,re)&&(Ss(ce.defaultValue)?le(re,$s(St(o,re))):(le(re,ce.defaultValue),Rr(o,re,$s(ce.defaultValue))),ce.keepTouched||Ns(s.touchedFields,re),ce.keepDirty||(Ns(s.dirtyFields,re),s.isDirty=ce.defaultValue?I(re,$s(St(o,re))):I()),ce.keepError||(Ns(s.errors,re),p.isValid&&C()),N.state.next({...s}))},Me=(re,ce={})=>{const je=re?$s(re):o,Oe=$s(je),Re=Kn(re),Fe=Re?o:Oe;if(ce.keepDefaultValues||(o=je),!ce.keepValues){if(ce.keepDirtyValues){const We=new Set([...u.mount,...Object.keys(hu(o,l))]);for(const at of Array.from(We))St(s.dirtyFields,at)?Rr(Fe,at,St(l,at)):le(at,St(Fe,at))}else{if(R0&&Ss(re))for(const We of u.mount){const at=St(a,We);if(at&&at._f){const nt=Array.isArray(at._f.refs)?at._f.refs[0]:at._f.ref;if(Pf(nt)){const it=nt.closest("form");if(it){it.reset();break}}}}if(ce.keepFieldsRef)for(const We of u.mount)le(We,St(Fe,We));else a={}}l=r.shouldUnregister?ce.keepDefaultValues?$s(o):{}:$s(Fe),N.array.next({values:{...Fe}}),N.state.next({values:{...Fe}})}u={mount:ce.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!p.isValid||!!ce.keepIsValid||!!ce.keepDirtyValues,d.watch=!!r.shouldUnregister,N.state.next({submitCount:ce.keepSubmitCount?s.submitCount:0,isDirty:Re?!1:ce.keepDirty?s.isDirty:!!(ce.keepDefaultValues&&!vl(re,o)),isSubmitted:ce.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Re?{}:ce.keepDirtyValues?ce.keepDefaultValues&&l?hu(o,l):s.dirtyFields:ce.keepDefaultValues&&re?hu(o,re):ce.keepDirty?s.dirtyFields:{},touchedFields:ce.keepTouched?s.touchedFields:{},errors:ce.keepErrors?s.errors:{},isSubmitSuccessful:ce.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},me=(re,ce)=>Me(hi(re)?re(l):re,ce),Ye=(re,ce={})=>{const je=St(a,re),Oe=je&&je._f;if(Oe){const Re=Oe.refs?Oe.refs[0]:Oe.ref;Re.focus&&(Re.focus(),ce.shouldSelect&&hi(Re.select)&&Re.select())}},rt=re=>{s={...s,...re}},$e={control:{register:ge,unregister:ye,getFieldState:ee,handleSubmit:Pe,setError:te,_subscribe:fe,_runSchema:X,_focusError:de,_getWatch:U,_getDirty:I,_setValid:C,_setFieldArray:L,_setDisabledField:ie,_setErrors:E,_getFieldArray:B,_reset:Me,_resetDefaultValues:()=>hi(r.defaultValues)&&r.defaultValues().then(re=>{me(re,r.resetOptions),N.state.next({isLoading:!1})}),_removeUnmounted:pe,_disableForm:ue,_subjects:N,_proxyFormState:p,get _fields(){return a},get _formValues(){return l},get _state(){return d},set _state(re){d=re},get _defaultValues(){return o},get _names(){return u},set _names(re){u=re},get _formState(){return s},get _options(){return r},set _options(re){r={...r,...re}}},subscribe:V,trigger:be,register:ge,handleSubmit:Pe,watch:se,setValue:le,getValues:Ae,reset:me,resetField:Xe,clearErrors:D,unregister:ye,setError:te,setFocus:Ye,getFieldState:ee};return{...$e,formControl:$e}}function h6(t={}){const r=Ln.useRef(void 0),s=Ln.useRef(void 0),[a,o]=Ln.useState({isDirty:!1,isValidating:!1,isLoading:hi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:hi(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:a},t.defaultValues&&!hi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:d,...u}=u6(t);r.current={...u,formState:a}}const l=r.current.control;return l._options=t,J3(()=>{const d=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(u=>({...u,isReady:!0})),l._formState.isReady=!0,d},[l]),Ln.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),Ln.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),Ln.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),Ln.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),Ln.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==a.isDirty&&l._subjects.state.next({isDirty:d})}},[l,a.isDirty]),Ln.useEffect(()=>{t.values&&!vl(t.values,s.current)?(l._reset(t.values,{keepFieldsRef:!0,...l._options.resetOptions}),s.current=t.values,o(d=>({...d}))):l._resetDefaultValues()},[l,t.values]),Ln.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),r.current.formState=Y3(a,l),r.current}function tb(t){var r,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(s=tb(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function f6(){for(var t,r,s=0,a="",o=arguments.length;s<o;s++)(t=arguments[s])&&(r=tb(t))&&(a&&(a+=" "),a+=r);return a}const bc=({size:t="md",className:r,color:s="primary"})=>{const a={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},o={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsx("div",{className:f6("animate-spin rounded-full border-2 border-t-transparent",a[t],o[s],r)})},rb=({length:t=6,onComplete:r,disabled:s=!1,className:a=""})=>{const[o,l]=R.useState(new Array(t).fill("")),d=R.useRef([]);R.useEffect(()=>{d.current[0]&&d.current[0].focus()},[]);const u=(p,v)=>{if(s||(v.length>1&&(v=v.slice(-1)),!/^\d*$/.test(v)))return;const N=[...o];N[p]=v,l(N),v&&p<t-1&&d.current[p+1]?.focus();const y=N.join("");y.length===t&&!y.includes("")&&r(y)},h=(p,v)=>{if(!s){if(v.key==="Backspace")if(o[p]){const N=[...o];N[p]="",l(N)}else p>0&&d.current[p-1]?.focus();v.key==="ArrowLeft"&&p>0&&d.current[p-1]?.focus(),v.key==="ArrowRight"&&p<t-1&&d.current[p+1]?.focus()}},m=p=>{if(s)return;p.preventDefault();const v=p.clipboardData.getData("text").replace(/\D/g,"").slice(0,t);if(v.length>0){const N=[...o];for(let C=0;C<v.length&&C<t;C++)N[C]=v[C];l(N);const y=Math.min(v.length,t-1);d.current[y]?.focus();const k=N.join("");k.length===t&&!k.includes("")&&r(k)}};return e.jsx("div",{className:`flex justify-center space-x-3 ${a}`,children:o.map((p,v)=>e.jsx("input",{ref:N=>d.current[v]=N,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:p,onChange:N=>u(v,N.target.value),onKeyDown:N=>h(v,N),onPaste:m,disabled:s,className:`
            w-12 h-12 text-center text-xl font-semibold border-2 rounded-lg
            focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500
            transition-all duration-200
            ${s?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-gray-200 text-gray-900 hover:border-gray-300"}
          `},v))})},m6=()=>{const[t,r]=R.useState("email"),[s,a]=R.useState(""),[o,l]=R.useState(""),[d,u]=R.useState(!1),[h,m]=R.useState(!1),p=As(),v=pi(),{isLoading:N,error:y,isAuthenticated:k,user:C}=Ft(X=>X.auth),{register:S,handleSubmit:L,formState:{errors:P}}=h6({defaultValues:{email:"",password:""}});R.useEffect(()=>{k&&C&&v("/dashboard/owner")},[k,C,v]),R.useEffect(()=>{y&&(Th.error(y),p(u3()))},[y,p]);const E=async X=>{try{await p(bu({email:X.email,password:X.password})).unwrap(),a(X.email),l(X.password),r("otp"),u(!0),Th.success("OTP sent to your email!")}catch{}},M=async X=>{try{const J=await p(Zh({email:s,otp:X})).unwrap();Th.success("Welcome back!"),J.user?.role==="admin"?v("/admin/dashboard"):v("/dashboard/owner")}catch{}},z=async()=>{try{await p(bu({email:s,password:o})).unwrap(),Th.success("OTP resent to your email!")}catch{}},he=()=>{r("email"),u(!1),a(""),l("")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(G2,{size:"lg",className:"text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Welcome back"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Sign in to your property management dashboard"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t==="email"?e.jsxs("form",{onSubmit:L(E),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Al,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...S("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${P.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your email"})]}),P.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:P.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(hc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...S("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:h?"text":"password",className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${P.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),P.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:P.password.message})]}),e.jsx("button",{type:"submit",disabled:N,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:N?e.jsx(bc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Send OTP",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx(Do,{to:"/auth/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200",children:"Forgot your password?"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(js,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",e.jsx("span",{className:"font-medium text-gray-900",children:s})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(rb,{onComplete:M,disabled:N,length:6}),e.jsx("button",{type:"button",onClick:()=>{const X=document.querySelectorAll('input[type="text"]'),J=Array.from(X).map(G=>G.value).join("");J.length===6&&M(J)},disabled:N,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:N?e.jsx(bc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Verify Code",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:z,disabled:N,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:he,disabled:N,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"← Back to email"})})]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",e.jsx(Do,{to:"/auth/signup",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:"Sign up for free"})]})})]})}),e.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h3",{className:"text-4xl font-bold text-white mb-6 leading-tight",children:"Manage your properties with confidence"}),e.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:"Track bookings, monitor performance, handle compliance, and maximize your rental income with our comprehensive property management platform."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Real-time booking management"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Financial performance tracking"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Automated compliance reporting"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Multi-property dashboard"})]})]})]})})]})]})},p6=async()=>(await Ct.get("/admin/check-admin-exists")).data.exists,g6=async()=>(await Ct.get("/admin/dashboard/stats")).data,sb=async()=>(await Ct.get("/admin/owners")).data,x6=async()=>(await Ct.get("/admin/accountants")).data,y6=async(t,r)=>(await Ct.put(`/admin/accountants/${t}`,r)).data.data,b6=async(t,r)=>(await Ct.put(`/admin/accountants/${t}/properties`,{assignedProperties:r})).data.data,v6=async(t,r,s)=>(await Ct.get(`/admin/properties/${t}/owner-statement?startDate=${r}&endDate=${s}`)).data.statement,w6=async t=>{await Ct.delete(`/admin/accountants/${t}`)},nb=async t=>{const r=await Ct.post("/admin/owners",t);return console.log("🔍 createOwner API response:",r),r.data.data||r.data},N6=async(t,r)=>(await Ct.put(`/admin/owners/${t}`,r)).data,j6=async t=>{await Ct.delete(`/admin/owners/${t}`)},em=async t=>{const r=t?`/admin/properties?ownerId=${t}`:"/admin/properties",s=await Ct.get(r);return console.log("🔍 getAllProperties response:",s),s.data&&s.data.data?s.data.data:s.data&&s.data.properties?s.data.properties:Array.isArray(s.data)?s.data:(console.error("Unexpected response structure:",s),[])},S6=async(t,r)=>(await Ct.post(`/admin/owners/${t}/assign-property`,{propertyId:r})).data,k6=async t=>(await Ct.delete(`/admin/properties/${t}`)).data,A6=()=>{const[t,r]=R.useState("form"),[s,a]=R.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",role:"admin"}),[o,l]=R.useState(!1),[d,u]=R.useState(!1),[h,m]=R.useState({}),[p,v]=R.useState(!1),N=As(),{isLoading:y,isAuthenticated:k,error:C}=Ft(he=>he.auth),S=()=>{const he={};return s.firstName.trim()||(he.firstName="First name is required"),s.lastName.trim()||(he.lastName="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(he.email="Email is invalid"):he.email="Email is required",s.phone.trim()||(he.phone="Phone is required"),s.password?s.password.length<6&&(he.password="Password must be at least 6 characters"):he.password="Password is required",s.password!==s.confirmPassword&&(he.confirmPassword="Passwords do not match"),he};if(R.useEffect(()=>{(async()=>{try{console.log("🔍 Checking admin existence...");const X=await p6();console.log("🔍 Admin exists:",X),v(X)}catch(X){console.error("❌ Error checking admin existence:",X),v(!0)}})()},[]),k)return e.jsx(Ui,{to:"/dashboard",replace:!0});const L=he=>{const{name:X,value:J}=he.target;a(G=>({...G,[X]:J})),h[X]&&m(G=>({...G,[X]:""}))},P=async he=>{if(he.preventDefault(),p){alert("Account creation is disabled. Please contact your administrator to request an account.");return}const X=S();if(Object.keys(X).length>0){m(X);return}m({});try{await N(vu({email:s.email,name:`${s.firstName} ${s.lastName}`,phone:s.phone,password:s.password,role:s.role})).unwrap(),r("otp")}catch{}},E=async he=>{try{await N(ef({name:`${s.firstName} ${s.lastName}`,email:s.email,phone:s.phone,password:s.password,otp:he,role:s.role})).unwrap()}catch{}},M=async()=>{try{await N(vu({name:`${s.firstName} ${s.lastName}`,email:s.email,phone:s.phone,password:s.password,role:s.role})).unwrap()}catch{}},z=()=>{r("form")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-gradient-to-br from-gray-400 to-gray-500 rounded-3xl shadow-lg",children:e.jsx(js,{className:"h-8 w-8 text-white"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Account Creation"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Contact your administrator to request account creation"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t==="form"?e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-500 mb-2",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Oo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:s.firstName,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.firstName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your first name"})]}),h.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-500 mb-2",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Oo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:s.lastName,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.lastName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your last name"})]}),h.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Al,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s.email,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your email"})]}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-500 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T0,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:s.phone,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.phone?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your phone number"})]}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(hc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:s.password,onChange:L,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(hc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:s.confirmPassword,onChange:L,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.confirmPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(js,{className:"h-6 w-6 text-blue-600 mt-0.5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Account Creation by Administrator"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"All user accounts are created by the system administrator. Please contact your administrator to request account creation."}),e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"To request an account:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Contact your system administrator"}),e.jsx("li",{children:"• Provide your email address and role requirements"}),e.jsx("li",{children:"• Administrator will create your account and send login credentials"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-gray-300 bg-gray-100 rounded-xl",children:[e.jsx(js,{className:"h-5 w-5 mr-2 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Admin Account (Unavailable)"}),e.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(Already exists)"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(js,{className:"h-6 w-6 text-green-600 mt-0.5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-900 mb-2",children:"Create First Administrator Account"}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"You are creating the first administrator account for this system. The administrator will be responsible for creating all other user accounts."}),e.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Administrator privileges include:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"• Create and manage owner accounts"}),e.jsx("li",{children:"• Create and manage accountant accounts"}),e.jsx("li",{children:"• Manage properties and bookings"}),e.jsx("li",{children:"• Access system settings and reports"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-green-300 bg-green-50 rounded-xl",children:[e.jsx(js,{className:"h-5 w-5 mr-2 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Administrator Account"}),e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(System Administrator)"})]})]})]})]}),p?e.jsxs("button",{type:"button",disabled:!0,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-gray-400 bg-gray-200 cursor-not-allowed transition-all duration-300",children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Contact Administrator for Account Creation"]}):e.jsx("button",{type:"submit",disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:y?e.jsxs(e.Fragment,{children:[e.jsx(bc,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Creating Administrator Account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Create Administrator Account"]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(js,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verify Your Account"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",e.jsx("span",{className:"font-medium text-gray-900",children:s.email})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(rb,{onComplete:E,disabled:y,length:6}),e.jsx("button",{type:"button",onClick:()=>{const he=document.querySelectorAll('input[type="text"]'),X=Array.from(he).map(J=>J.value).join("");X.length===6&&E(X)},disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:y?e.jsx(bc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Verify & Create Account",e.jsx(I3,{className:"ml-2 h-4 w-4 group-hover:scale-110 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:M,disabled:y,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:z,disabled:y,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"← Back to form"})})]})]})}),C&&e.jsxs("div",{className:"rounded-xl bg-red-50 p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-red-800",children:C}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"💡 Make sure the backend server is running on port 5000"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",e.jsx(Do,{to:"/auth/login",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:"Sign in here"})]})})]})}),e.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h3",{className:"text-4xl font-bold text-white mb-6 leading-tight",children:"Join thousands of property owners"}),e.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:"Start your property management journey with our comprehensive platform designed to maximize your rental income and streamline operations."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Easy property onboarding"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Automated booking management"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Financial reporting & analytics"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"24/7 customer support"})]})]})]})})]})]})},C6=()=>{const[t,r]=R.useState(""),[s,a]=R.useState(!1),[o,l]=R.useState(!1),d=async u=>{u.preventDefault(),a(!0);try{await jc.forgotPassword({email:t}),l(!0)}catch(h){console.error("Error:",h),alert(h.response?.data?.message||"Failed to send reset OTP")}finally{a(!1)}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(Al,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Check your email"}),e.jsxs("p",{className:"text-base text-gray-600 leading-relaxed",children:["We've sent a password reset OTP to ",e.jsx("strong",{className:"text-gray-900",children:t})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or contact support."})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6 space-y-4",children:[e.jsxs(Do,{to:"/auth/reset-password",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Enter OTP to reset password",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]}),e.jsxs(Do,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200",children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Back to login"]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(Al,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Forgot your password?"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No worries! Enter your email and we'll send you a reset OTP."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Al,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:u=>r(u.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300",placeholder:"Enter your email"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:s?e.jsxs(e.Fragment,{children:[e.jsx(bc,{size:"sm",className:"mr-2"}),"Sending reset OTP..."]}):e.jsxs(e.Fragment,{children:["Send reset OTP",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs(Do,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[e.jsx(yc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},P6=()=>{const[t,r]=R.useState({email:"",otp:"",password:"",confirmPassword:""}),[s,a]=R.useState(!1),[o,l]=R.useState(!1),[d,u]=R.useState(!1),[h,m]=R.useState(!1),[p,v]=R.useState({}),N=C=>{const{name:S,value:L}=C.target;r(P=>({...P,[S]:L})),p[S]&&v(P=>({...P,[S]:""}))},y=()=>{const C={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(C.email="Email is invalid"):C.email="Email is required",t.otp?t.otp.length!==6&&(C.otp="OTP must be 6 digits"):C.otp="OTP is required",t.password?t.password.length<6&&(C.password="Password must be at least 6 characters"):C.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(C.confirmPassword="Passwords do not match"):C.confirmPassword="Please confirm your password",v(C),Object.keys(C).length===0},k=async C=>{if(C.preventDefault(),!!y()){u(!0);try{await jc.resetPassword({email:t.email,otp:t.otp,password:t.password}),m(!0)}catch(S){console.error("Error:",S),alert(S.response?.data?.message||"Failed to reset password")}finally{u(!1)}}};return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(Fn,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Password reset successful"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Your password has been successfully reset. You can now sign in with your new password."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs(Do,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Continue to login",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(hc,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Reset your password"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Enter your email, OTP code, and new password below."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Al,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:N,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${p.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your email"})]}),p.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-500 mb-2",children:"OTP Code"}),e.jsx("input",{id:"otp",name:"otp",type:"text",required:!0,maxLength:6,value:t.otp,onChange:N,className:`w-full px-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${p.otp?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter 6-digit OTP"}),p.otp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.otp})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(hc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:t.password,onChange:N,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${p.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!s),children:s?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),p.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(hc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",required:!0,value:t.confirmPassword,onChange:N,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${p.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),p.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.confirmPassword})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:d?e.jsxs(e.Fragment,{children:[e.jsx(bc,{size:"sm",className:"mr-2"}),"Resetting password..."]}):e.jsxs(e.Fragment,{children:["Reset password",e.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs(Do,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[e.jsx(yc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},z0=async()=>{const t=Date.now(),r=Math.random().toString(36).substring(7);return await Ct.get(`/property-management?t=${t}&r=${r}&nocache=true`)},ab=async t=>{console.log("🔍 createProperty API called with:",{propertyData:Object.keys(t),url:"/admin/properties",method:"POST"});const r=await Ct.post("/admin/properties",t);return console.log("✅ createProperty API response:",r),r.data},ib=async(t,r)=>{console.log("🔍 updateProperty API called with:",{propertyId:t,propertyData:Object.keys(r),url:`/property-management/${t}`,method:"PUT"});const s=await Ct.put(`/property-management/${t}`,r);if(console.log("✅ updateProperty API response:",s),console.log("🔍 Response type:",typeof s),!s)throw console.error("❌ Invalid response from apiClient.put:",s),new Error("Invalid response from server");return s},ob=async t=>(await Ct.delete(`/admin/properties/${t}`)).data,lb=async(t,r)=>(await Ct.post("/property-management/test-hostkit",{hostkitId:t,apiKey:r})).data,cb=async(t,r)=>{const s={};return t&&(s.startDate=t),r&&(s.endDate=r),(await Ct.get("/property-management/dashboard/metrics",{params:s})).data},_6=Object.freeze(Object.defineProperty({__proto__:null,createProperty:ab,deleteProperty:ob,getDashboardMetrics:cb,getProperties:z0,testHostkitConnection:lb,updateProperty:ib},Symbol.toStringTag,{value:"Module"})),L6={properties:[],dashboardMetrics:null,selectedProperty:null,isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isTesting:!1,error:null,hostkitTestResult:null},Ma=Cr("propertyManagement/fetchProperties",async(t,{rejectWithValue:r})=>{try{const s=await z0();return s&&typeof s=="object"?s:{properties:[],total:0}}catch(s){return console.error("Failed to fetch properties:",s),r(s.response?.data?.message||"Failed to fetch properties")}}),Su=Cr("propertyManagement/createProperty",async(t,{rejectWithValue:r})=>{try{return await ab(t)}catch(s){return r(s.response?.data?.message||"Failed to create property")}}),vd=Cr("propertyManagement/updateProperty",async({propertyId:t,propertyData:r},{rejectWithValue:s})=>{try{console.log("🔍 Redux updatePropertyAsync calling API with:",{propertyId:t,propertyData:Object.keys(r)});const a=await ib(t,r);return console.log("🔍 Redux updatePropertyAsync received response:",a),console.log("🔍 Response type:",typeof a),a}catch(a){return console.error("❌ Redux updatePropertyAsync error:",a),s(a.response?.data?.message||"Failed to update property")}}),nf=Cr("propertyManagement/deleteProperty",async(t,{rejectWithValue:r})=>{try{return await ob(t),t}catch(s){return r(s.response?.data?.message||"Failed to delete property")}}),af=Cr("propertyManagement/testHostkitConnection",async({hostkitId:t,apiKey:r},{rejectWithValue:s})=>{try{return await lb(t,r)}catch(a){return s(a.response?.data?.message||"Failed to test Hostkit connection")}}),of=Cr("propertyManagement/fetchDashboardMetrics",async({startDate:t,endDate:r}={},{rejectWithValue:s})=>{try{return await cb(t,r)}catch(a){return s(a.response?.data?.message||"Failed to fetch dashboard metrics")}}),db=Ro({name:"propertyManagement",initialState:L6,reducers:{clearError:t=>{t.error=null},clearHostkitTestResult:t=>{t.hostkitTestResult=null},setSelectedProperty:(t,r)=>{t.selectedProperty=r.payload}},extraReducers:t=>{t.addCase(Ma.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Ma.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.properties&&Array.isArray(s.payload.properties)?r.properties=s.payload.properties:r.properties=[]}).addCase(Ma.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload,r.properties=[]}).addCase(Su.pending,r=>{r.isCreating=!0,r.error=null}).addCase(Su.fulfilled,(r,s)=>{r.isCreating=!1,r.properties.unshift(s.payload.property),r.hostkitTestResult=s.payload.hostkitTest}).addCase(Su.rejected,(r,s)=>{r.isCreating=!1,r.error=s.payload}).addCase(vd.pending,r=>{r.isUpdating=!0,r.error=null}).addCase(vd.fulfilled,(r,s)=>{if(r.isUpdating=!1,console.log("🔍 Redux updatePropertyAsync.fulfilled payload:",s.payload),s.payload&&s.payload.property){const a=s.payload.property,o=r.properties.findIndex(l=>l._id===a._id);o!==-1&&(r.properties[o]=a),r.selectedProperty?._id===a._id&&(r.selectedProperty=a)}else console.error("❌ Invalid payload structure in updatePropertyAsync.fulfilled:",s.payload)}).addCase(vd.rejected,(r,s)=>{r.isUpdating=!1,r.error=s.payload}).addCase(nf.pending,r=>{r.isDeleting=!0,r.error=null}).addCase(nf.fulfilled,(r,s)=>{r.isDeleting=!1,r.properties=r.properties.filter(a=>a._id!==s.payload),r.selectedProperty?._id===s.payload&&(r.selectedProperty=null)}).addCase(nf.rejected,(r,s)=>{r.isDeleting=!1,r.error=s.payload}).addCase(af.pending,r=>{r.isTesting=!0,r.error=null}).addCase(af.fulfilled,(r,s)=>{r.isTesting=!1,r.hostkitTestResult=s.payload}).addCase(af.rejected,(r,s)=>{r.isTesting=!1,r.error=s.payload}).addCase(of.pending,r=>{r.isLoading=!0,r.error=null}).addCase(of.fulfilled,(r,s)=>{r.isLoading=!1,r.dashboardMetrics=s.payload}).addCase(of.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:cy,clearHostkitTestResult:E6,setSelectedProperty:Mh}=db.actions,D6=db.reducer,I6={properties:[],selectedProperty:null,isLoading:!1,error:null},Wi=Cr("properties/fetchProperties",async(t,{rejectWithValue:r})=>{try{const s=Date.now(),a=Math.random().toString(36).substring(7),o=await Ct.get(`/property-management?t=${s}&r=${a}&nocache=true`);return o&&typeof o=="object"?o:{properties:[],total:0}}catch(s){return r(s.response?.data?.message||"Failed to fetch properties")}}),ub=Ro({name:"properties",initialState:I6,reducers:{setSelectedProperty:(t,r)=>{t.selectedProperty=r.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Wi.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Wi.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.properties&&Array.isArray(s.payload.properties)?r.properties=s.payload.properties:r.properties=[],r.error=null}).addCase(Wi.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{setSelectedProperty:VA,clearError:HA}=ub.actions,F6=ub.reducer,$0=()=>{const t=As();R.useEffect(()=>{const r=s=>{console.log("🔄 Property deleted globally, refreshing all property lists:",s.detail),t(Wi())};return window.addEventListener("propertyDeleted",r),()=>{window.removeEventListener("propertyDeleted",r)}},[t])},lf=t=>{const r="http://localhost:5000",s=t.startsWith("/")?t.slice(1):t;return`${r}/${s}`},dy=()=>{const t=As(),r=pi(),{user:s,isAuthenticated:a}=Ft(S=>S.auth),{t:o}=Xf(),{dashboardMetrics:l,properties:d,isLoading:u}=Ft(S=>S.propertyManagement),[h,m]=R.useState("real");$0(),R.useEffect(()=>{a&&t(Wi())},[t,a]);const p=()=>{const S=new Date,L=S.getMonth(),P=S.getFullYear(),E=new Date(P,L,1),M=new Date(P,L+1,0),z=he=>{const X=he.getFullYear(),J=String(he.getMonth()+1).padStart(2,"0"),G=String(he.getDate()).padStart(2,"0");return`${X}-${J}-${G}`};return{startDate:z(E),endDate:z(M)}};R.useEffect(()=>{t(Ma());const S=new Date().getFullYear(),L=`${S}-01-01`,P=`${S}-12-31`;t(of({startDate:L,endDate:P}))},[t]);const v=()=>{const S=new Date().getHours();return S<12?o("greeting.morning"):S<18?o("greeting.afternoon"):o("greeting.evening")},N=()=>{const S=new Date,L=S.getMonth()===0?11:S.getMonth()-1,P=S.getMonth()===0?S.getFullYear()-1:S.getFullYear();return{month:L,year:P}},y=()=>{const S=new Date,L=new Date(S.getFullYear(),S.getMonth()-1,1),P=new Date(S.getFullYear(),S.getMonth(),0),E=M=>{const z=M.getFullYear(),he=String(M.getMonth()+1).padStart(2,"0"),X=String(M.getDate()).padStart(2,"0");return`${z}-${he}-${X}`};return{startDate:E(L),endDate:E(P)}},k=(S,L)=>{switch(L){case"bookings":const P=p();r(`/bookings?propertyId=${S}&startDate=${P.startDate}&endDate=${P.endDate}&period=thisMonth`);break;case"invoices":const E=y();r(`/invoices?propertyId=${S}&startDate=${E.startDate}&endDate=${E.endDate}&period=lastMonth`);break;case"calendar":const M=p();r(`/calendar?propertyId=${S}&startDate=${M.startDate}&endDate=${M.endDate}&period=thisMonth`);break;default:r(`/properties/${S}`)}},C={totalRevenue:l?.totalRevenue||0,totalBookings:l?.totalBookings||0,occupancyRate:l?.averageOccupancy||0,avgDailyRate:l?.averageDailyRate||0,recentBookings:l?.recentBookings||[],properties:d||[]};return u&&d.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#5FFF56] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Loading properties and dashboard data..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 mb-6 shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-[#5FFF56] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:o("dashboard.title")})]}),e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-4 leading-tight",children:[v(),", ",e.jsx("span",{className:"gradient-text",children:s?.firstName||s?.name||s?.email}),"! 👋"]}),e.jsx("p",{className:"text-xl text-gray-700 mb-8 leading-relaxed",children:o("dashboard.description")}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-4 h-4 bg-[#5FFF56] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Live Data"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(fi,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Real-time Updates"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ip,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[C.properties.length," ",o("dashboard.properties")]})]})]})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:o("dashboard.quickActions")}),e.jsx("p",{className:"text-gray-600",children:o("dashboard.manageEfficiently")})]}),e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#00CFFF] to-[#0095D5] rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Ru,{className:"h-7 w-7 text-white"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("a",{href:"/calendar",className:"group flex flex-col items-center p-6 bg-gradient-to-br from-blue-50/80 to-blue-100/80 rounded-2xl hover:from-blue-100 hover:to-blue-200 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(ns,{className:"h-8 w-8 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-900 text-center",children:o("dashboard.viewCalendar")})]}),e.jsxs("a",{href:"/bookings",className:"group flex flex-col items-center p-6 bg-gradient-to-br from-green-50/80 to-green-100/80 rounded-2xl hover:from-green-100 hover:to-green-200 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(pa,{className:"h-8 w-8 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-900 text-center",children:o("dashboard.manageBookings")})]}),e.jsxs("a",{href:"/invoices",className:"group flex flex-col items-center p-6 bg-gradient-to-br from-purple-50/80 to-purple-100/80 rounded-2xl hover:from-purple-100 hover:to-purple-200 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(Gi,{className:"h-8 w-8 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-900 text-center",children:o("dashboard.viewInvoices")})]}),e.jsxs("button",{onClick:()=>{const{month:S,year:L}=N();r(`/saft?month=${S}&year=${L}`)},className:"group flex flex-col items-center p-6 bg-gradient-to-br from-orange-50/80 to-orange-100/80 rounded-2xl hover:from-orange-100 hover:to-orange-200 transition-all duration-300 hover:scale-105 hover:shadow-lg w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(Yi,{className:"h-8 w-8 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-900 text-center",children:o("dashboard.getSAFT")})]})]})]})}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:o("dashboard.yourProperties")}),e.jsx("p",{className:"text-lg text-gray-600",children:o("dashboard.managePortfolio")})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-[#5FFF56] rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[C.properties.length," ",o("dashboard.activePropertiesCount")]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:C.properties.length>0?C.properties.map((S,L)=>e.jsxs("div",{className:"group bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:-translate-y-3 overflow-hidden",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:[S.images&&S.images.length>0?e.jsx("img",{src:lf(S.images[0]),alt:S.name,className:"w-full h-full object-cover",onError:P=>{console.error("❌ Dashboard image failed to load:",P.currentTarget.src)},onLoad:P=>{console.log("✅ Dashboard image loaded successfully:",P.currentTarget.src)}}):e.jsxs("div",{className:"text-center",children:[e.jsx(ip,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Property Image"})]}),e.jsx("div",{className:"absolute top-6 right-6",children:e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-bold text-white shadow-lg ${S.status==="active"?"bg-green-500":S.status==="inactive"?"bg-gray-500":"bg-yellow-500"}`,children:S.status||"Active"})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm rounded-md px-3 py-2",children:[e.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:S.name}),e.jsx("p",{className:"text-xs text-white/90",children:S.address||"Algarve, Portugal"})]})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 font-semibold",children:"Type"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:S.type})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 font-semibold",children:"Bedrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:S.bedrooms})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 font-semibold",children:"Max Guests"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:S.maxGuests})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:P=>{P.stopPropagation(),k(S.id,"bookings")},className:"flex items-center justify-center gap-2 px-3 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",children:[e.jsx(z2,{className:"h-4 w-4"}),"Bookings"]}),e.jsxs("button",{onClick:P=>{P.stopPropagation(),k(S.id,"invoices")},className:"flex items-center justify-center gap-2 px-3 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",children:[e.jsx(Yi,{className:"h-4 w-4"}),"Invoices"]}),e.jsxs("button",{onClick:P=>{P.stopPropagation(),k(S.id,"calendar")},className:"flex items-center justify-center gap-2 px-3 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",children:[e.jsx(ns,{className:"h-4 w-4"}),"Calendar"]})]})]})]},S._id||S.id||L)):e.jsxs("div",{className:"col-span-full text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(ip,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add your first property to start tracking bookings and revenue"}),e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] text-white rounded-2xl hover:from-[#4FEF46] hover:to-[#5FFF56] transition-all duration-300 font-bold shadow-lg hover:shadow-xl",children:"Add Property"})]})})]})]}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-110 flex items-center justify-center group",children:e.jsx(Ru,{className:"h-6 w-6 text-white group-hover:rotate-180 transition-transform duration-300"})})}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 right-1/4 w-40 h-40 bg-[#5FFF56]/10 rounded-full blur-3xl "}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-32 h-32 bg-[#00CFFF]/10 rounded-full blur-3xl -delayed"}),e.jsx("div",{className:"absolute top-1/2 right-1/3 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl "}),e.jsx("div",{className:"absolute top-3/4 left-1/3 w-20 h-20 bg-orange-500/10 rounded-full blur-2xl -delayed"}),e.jsx("div",{className:"absolute top-1/6 left-1/2 w-16 h-16 bg-green-500/10 rounded-full blur-xl "})]})]})},T6="modulepreload",O6=function(t){return"/"+t},uy={},xa=function(r,s,a){let o=Promise.resolve();if(s&&s.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=h(s.map(m=>{if(m=O6(m),m in uy)return;uy[m]=!0;const p=m.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":T6,p||(N.as="script"),N.crossOrigin="",N.href=m,u&&N.setAttribute("nonce",u),document.head.appendChild(N),p)return new Promise((y,k)=>{N.addEventListener("load",y),N.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return r().catch(l)})},R6={bookings:[],isLoading:!1,error:null,filters:{}},ma=Cr("bookings/fetchBookings",async(t,{rejectWithValue:r})=>{try{const{bookingsAPI:s}=await xa(async()=>{const{bookingsAPI:d}=await import("./bookings.api-CyiBQu2M.js");return{bookingsAPI:d}},[]),a=await s.getBookings(t),l=(Array.isArray(a)?a:a.bookings||[]).map(d=>({...d,propertyId:t.propertyId}));return Array.isArray(a)?l:{...a,bookings:l}}catch(s){return r(s.response?.data?.message||s.message||"Failed to fetch bookings")}}),hb=Ro({name:"bookings",initialState:R6,reducers:{setFilters:(t,r)=>{t.filters={...t.filters,...r.payload}},setBookings:(t,r)=>{t.bookings=r.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(ma.pending,r=>{r.isLoading=!0,r.error=null}).addCase(ma.fulfilled,(r,s)=>{r.isLoading=!1,r.bookings=Array.isArray(s.payload)?s.payload:s.payload.bookings||[]}).addCase(ma.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{setFilters:mu,setBookings:M6,clearError:WA}=hb.actions,B6=hb.reducer,Ba=({properties:t,selectedId:r,onChange:s,placeholder:a="Select Property",className:o=""})=>(t.find(l=>l.id===r),e.jsxs("div",{className:`relative ${o}`,children:[e.jsxs("select",{value:r||"",onChange:l=>s(l.target.value?parseInt(l.target.value):null),className:"w-full px-4 py-3 pr-10 appearance-none cursor-pointer bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",className:"bg-white text-gray-900",children:a}),t.map(l=>e.jsx("option",{value:l.id,className:"bg-white text-gray-900",children:l.name},l.id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:e.jsx(Cf,{className:"h-5 w-5 text-gray-500"})})]})),U6=(t,r)=>{const s=r.properties.properties.find(a=>a.id===t);return s?s.name:`Property ${t}`},Dd={validateSibaSubmission:async(t,r)=>{try{return await Ct.post("/siba-manager/validate",{propertyId:t,reservationData:r})}catch(s){throw console.error("SIBA validation error:",s),new Error(s.response?.data?.error||"SIBA validation failed")}},sendSibaSubmission:async(t,r)=>{try{return await Ct.post("/siba-manager/send",{propertyId:t,reservationData:r})}catch(s){throw console.error("SIBA submission error:",s),new Error(s.response?.data?.error||"SIBA submission failed")}},getBulkSibaDashboard:async()=>{try{return await Ct.get("/siba-manager/dashboard")}catch(t){throw console.error("Bulk SIBA dashboard error:",t),new Error(t.response?.data?.error||"Failed to fetch SIBA dashboard")}},getSibaStatus:async t=>{try{return await Ct.get(`/siba-manager/status/${t}`)}catch(r){throw console.error("SIBA status error:",r),new Error(r.response?.data?.error||"Failed to fetch SIBA status")}},bulkValidateSiba:async t=>{try{return await Ct.post("/siba-manager/bulk-validate",{reservations:t})}catch(r){throw console.error("Bulk SIBA validation error:",r),new Error(r.response?.data?.error||"Bulk SIBA validation failed")}},bulkSendSiba:async t=>{try{return await Ct.post("/siba-manager/bulk-send",{reservations:t})}catch(r){throw console.error("Bulk SIBA submission error:",r),new Error(r.response?.data?.error||"Bulk SIBA submission failed")}}},cf=Cr("sibaManager/validateSubmission",async({propertyId:t,reservationData:r})=>(await Dd.validateSibaSubmission(t,r)).validation),df=Cr("sibaManager/sendSubmission",async({propertyId:t,reservationData:r})=>await Dd.sendSibaSubmission(t,r)),up=Cr("sibaManager/fetchBulkDashboard",async()=>await Dd.getBulkSibaDashboard()),q6=Cr("sibaManager/fetchSibaStatus",async t=>(await Dd.getSibaStatus(t)).status),hp=Cr("sibaManager/bulkValidate",async t=>(await Dd.bulkValidateSiba(t)).validations),fp=Cr("sibaManager/bulkSend",async t=>await Dd.bulkSendSiba(t)),z6={validation:{isLoading:!1,result:null,error:null},submission:{isLoading:!1,result:null,error:null},bulkDashboard:{isLoading:!1,data:[],summary:null,error:null},propertyStatuses:{},bulkOperations:{validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}},fb=Ro({name:"sibaManager",initialState:z6,reducers:{clearValidation:t=>{t.validation={isLoading:!1,result:null,error:null}},clearSubmission:t=>{t.submission={isLoading:!1,result:null,error:null}},clearBulkDashboard:t=>{t.bulkDashboard={isLoading:!1,data:[],summary:null,error:null}},clearBulkOperations:t=>{t.bulkOperations={validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}}},extraReducers:t=>{t.addCase(cf.pending,r=>{r.validation.isLoading=!0,r.validation.error=null}).addCase(cf.fulfilled,(r,s)=>{r.validation.isLoading=!1,r.validation.result=s.payload}).addCase(cf.rejected,(r,s)=>{r.validation.isLoading=!1,r.validation.error=s.error.message||"Validation failed"}),t.addCase(df.pending,r=>{r.submission.isLoading=!0,r.submission.error=null}).addCase(df.fulfilled,(r,s)=>{r.submission.isLoading=!1,r.submission.result=s.payload}).addCase(df.rejected,(r,s)=>{r.submission.isLoading=!1,r.submission.error=s.error.message||"Submission failed"}),t.addCase(up.pending,r=>{r.bulkDashboard.isLoading=!0,r.bulkDashboard.error=null}).addCase(up.fulfilled,(r,s)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.data=s.payload.data,r.bulkDashboard.summary=s.payload.summary}).addCase(up.rejected,(r,s)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.error=s.error.message||"Failed to fetch dashboard"}),t.addCase(q6.fulfilled,(r,s)=>{const a=s.meta?.arg;a&&(r.propertyStatuses[a]=s.payload)}),t.addCase(hp.pending,r=>{r.bulkOperations.validation.isLoading=!0,r.bulkOperations.validation.error=null}).addCase(hp.fulfilled,(r,s)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.results=s.payload}).addCase(hp.rejected,(r,s)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.error=s.error.message||"Bulk validation failed"}),t.addCase(fp.pending,r=>{r.bulkOperations.submission.isLoading=!0,r.bulkOperations.submission.error=null}).addCase(fp.fulfilled,(r,s)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.results=s.payload}).addCase(fp.rejected,(r,s)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.error=s.error.message||"Bulk submission failed"})}}),{clearValidation:$6,clearSubmission:V6,clearBulkDashboard:GA,clearBulkOperations:KA}=fb.actions,H6=fb.reducer,W6=({reservation:t,propertyId:r,onSibaSent:s})=>{const a=As(),{validation:o,submission:l}=Ft(k=>k.sibaManager),[d,u]=R.useState(!1),[h,m]=R.useState(!1),p=async()=>{a($6()),await a(cf({propertyId:r,reservationData:t})),u(!0)},v=async()=>{a(V6());const k=await a(df({propertyId:r,reservationData:t}));k.payload?.success&&k.payload?.submissionId&&(s?.(k.payload.submissionId),m(!0))},N=k=>{switch(k){case"green":return e.jsx(Fn,{className:"h-5 w-5 text-green-600"});case"amber":return e.jsx(bd,{className:"h-5 w-5 text-yellow-600"});case"red":return e.jsx(In,{className:"h-5 w-5 text-red-600"});default:return e.jsx(js,{className:"h-5 w-5 text-gray-400"})}},y=k=>{switch(k){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(js,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SIBA Manager Tools"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Validate and send SIBA submission for this reservation"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Property ID: ",r]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:p,disabled:o.isLoading,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.isLoading?e.jsx(Mr,{className:"h-4 w-4 animate-spin"}):e.jsx(V2,{className:"h-4 w-4"}),e.jsx("span",{children:o.isLoading?"Validating...":"Validate SIBA"})]}),e.jsxs("button",{onClick:v,disabled:l.isLoading||!o.result?.isValid,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.isLoading?e.jsx(Mr,{className:"h-4 w-4 animate-spin"}):e.jsx(L3,{className:"h-4 w-4"}),e.jsx("span",{children:l.isLoading?"Sending...":"Send SIBA"})]})]}),d&&o.result&&e.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(o.result.isValid?"green":"red")}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[N(o.result.isValid?"green":"red"),e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Validation ",o.result.isValid?"Successful":"Failed"]})]}),o.result.errors.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.errors.map((k,C)=>e.jsx("li",{className:"text-sm text-red-700",children:k},C))})]}),o.result.warnings.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Information:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.warnings.map((k,C)=>e.jsx("li",{className:"text-sm text-blue-700",children:k.includes("not found in Hostkit")?"This reservation is from a different booking system. SIBA submission will be recorded locally.":k.includes("Hostkit API unavailable")?"Hostkit system is temporarily unavailable. SIBA submission will be recorded locally.":k.includes("No reservation code")?"No reservation code available. SIBA submission will be recorded locally.":k},C))})]}),o.result.isValid&&e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Fn,{className:"h-4 w-4 text-green-600"}),e.jsx("h5",{className:"text-sm font-medium text-green-800",children:"Ready for SIBA Submission"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"All required information is valid. You can proceed with SIBA submission."})]}),o.result.isValid&&o.result.validationData&&e.jsxs("div",{className:"bg-white/50 p-3 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Validation Data:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Guest Count:"})," ",o.result.validationData.guestCount]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nights:"})," ",o.result.validationData.nights]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Check-in:"})," ",new Date(o.result.validationData.checkIn).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Check-out:"})," ",new Date(o.result.validationData.checkOut).toLocaleDateString()]})]})]})]}),h&&l.result&&e.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(l.result.success?"green":"red")}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[N(l.result.success?"green":"red"),e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["SIBA Submission ",l.result.success?"Successful":"Failed"]})]}),l.result.success?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Submission ID:"})," ",l.result.submissionId]}),e.jsx("p",{className:"text-sm text-green-700",children:"SIBA submission has been successfully sent to the municipal authorities."})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Submission Errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:l.result.errors?.map((k,C)=>e.jsx("li",{className:"text-sm text-red-700",children:k},C))})]})]}),o.error&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:o.error})}),l.error&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:l.error})})]})},G6=()=>{const[t,r]=qu(),[s,a]=R.useState(""),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState(!1),[p,v]=R.useState(null),[N,y]=R.useState({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),k=As(),C=pi(),{bookings:S,isLoading:L,error:P,filters:E}=Ft(F=>F.bookings),{properties:M}=Ft(F=>F.properties),{isAuthenticated:z}=Ft(F=>F.auth);$0(),R.useEffect(()=>{z&&k(Wi())},[k,z]),R.useEffect(()=>{M.length>0&&!E.propertyId&&(console.log("🔍 Bookings: Auto-selecting first property:",M[0]),k(mu({propertyId:M[0].id})))},[M,E.propertyId,k]);const he=()=>{const F=new Date,Z=F.getMonth(),be=F.getFullYear(),Ae=new Date(be,Z,1),ee=new Date(be,Z+1,0),D=te=>{const se=te.getFullYear(),fe=String(te.getMonth()+1).padStart(2,"0"),V=String(te.getDate()).padStart(2,"0");return`${se}-${fe}-${V}`};return{startDate:D(Ae),endDate:D(ee)}};R.useEffect(()=>{const F=t.get("propertyId"),Z=t.get("startDate"),be=t.get("endDate"),Ae=t.get("period");if(F||Z||be){if(y({propertyId:F?parseInt(F):null,startDate:Z||"",endDate:be||"",status:"",platform:""}),k(mu({propertyId:F?parseInt(F):void 0,dateRange:Z&&be?{start:Z,end:be}:void 0,status:""})),F&&k(ma({propertyId:parseInt(F),startDate:Z||void 0,endDate:be||void 0})),Ae){const ee=Ae==="thisMonth"?"this month":Ae==="lastMonth"?"last month":Ae;console.log(`Applied ${ee} filters for property ${F}`),v({propertyId:F?parseInt(F):void 0,period:ee,startDate:Z||void 0,endDate:be||void 0})}}else{const ee=he();y(D=>({...D,startDate:ee.startDate,endDate:ee.endDate})),console.log("Auto-selected current month:",ee)}},[t,k]),R.useEffect(()=>{if(N.startDate&&N.endDate&&!N.propertyId&&M.length>0){const F=M[0];F&&(y(Z=>({...Z,propertyId:F.id})),k(ma({propertyId:F.id,startDate:N.startDate,endDate:N.endDate})),console.log(`Auto-fetching bookings for property ${F.id} (${F.name}) for current month`))}},[N.startDate,N.endDate,N.propertyId,M,k]);const X=F=>U6(F,{properties:{properties:M}}),J=F=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(F),G=F=>new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});R.useEffect(()=>{k(ma({propertyId:392776}))},[k]);const pe=(F,Z)=>{y(be=>({...be,[F]:Z}))},I=()=>{const F={propertyId:N.propertyId||void 0,status:N.status||void 0,dateRange:N.startDate&&N.endDate?{start:N.startDate,end:N.endDate}:void 0};k(mu(F)),l(!1);const Z=N.propertyId;Z&&k(ma({propertyId:Z,startDate:N.startDate,endDate:N.endDate}))},U=()=>{y({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),k(mu({})),k(M6([]))},B=(F,Z)=>{C(`/bookings/${F}?propertyId=${Z}`)},W=()=>{m(!1),u(null)},le=S.map(F=>({id:F.id?.toString()||F.id,propertyId:F.propertyId,guestName:F.guestName||"Unknown Guest",bookingId:F.id?.toString()||"N/A",checkInDate:F.arrivalDate||F.checkIn,checkOutDate:F.departureDate||F.checkOut,totalAmount:F.totalPrice||0,status:F.status||"pending",paymentStatus:F.paymentStatus,platform:F.provider||F.platform||"Direct",guestEmail:F.guestEmail,guestPhone:F.guestPhone,nights:F.nights||1,adults:F.adults||1,children:F.children||0,specialRequests:"",createdAt:F.createdAt,updatedAt:F.updatedAt})).filter(F=>{const Z=F.guestName?.toLowerCase().includes(s.toLowerCase())||F.propertyId?.toString().includes(s)||F.bookingId?.toLowerCase().includes(s.toLowerCase()),be=!N.propertyId||F.propertyId===N.propertyId,Ae=!N.status||F.paymentStatus?.toLowerCase()===N.status.toLowerCase()||F.status===N.status,ee=!N.platform||F.platform===N.platform;return Z&&be&&Ae&&ee});return L?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading bookings..."})]})}):P?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(In,{className:"w-8 h-8 text-red-600"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Error loading bookings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:P}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]})}):E.propertyId?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Bookings"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage reservations and guest communications"}),p&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Showing ",p.period," data",p.propertyId&&` for Property ${p.propertyId}`,p.startDate&&p.endDate&&` (${p.startDate} to ${p.endDate})`]})]}),e.jsx("button",{onClick:()=>{v(null),r({}),y({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),k(mu({propertyId:void 0,dateRange:void 0,status:""}))},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Clear Filters"})]})})]}),e.jsxs("div",{className:"flex gap-4 mt-6 lg:mt-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Property:"}),e.jsx(Ba,{selectedId:N.propertyId,onChange:F=>{pe("propertyId",F),F&&k(ma({propertyId:F}))},properties:M})]}),e.jsxs("button",{onClick:()=>k(ma({propertyId:N.propertyId||392776})),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl flex items-center gap-2",children:[e.jsx(Mr,{className:"w-5 h-5"}),"Refresh"]})]})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(O0,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bookings, guests, properties...",value:s,onChange:F=>a(F.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 placeholder-gray-500 shadow-lg"})]})}),e.jsxs("button",{onClick:()=>l(!o),className:`px-6 py-4 rounded-2xl font-semibold shadow-lg transition-all duration-300 flex items-center gap-2 ${o?"bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] text-white hover:from-[#4FEF46] hover:to-[#5FFF56]":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(Ou,{className:"w-5 h-5"}),"Filters"]})]}),o&&e.jsxs("div",{className:"mt-8 p-8 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-2xl border border-gray-100/50 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{selectedId:N.propertyId,onChange:F=>pe("propertyId",F),properties:M})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.status,onChange:F=>pe("status",F.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"modified",children:"Modified"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Check-in From"}),e.jsx("input",{type:"date",value:N.startDate,onChange:F=>pe("startDate",F.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Check-in To"}),e.jsx("input",{type:"date",value:N.endDate,onChange:F=>pe("endDate",F.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[e.jsx("button",{onClick:U,className:"px-6 py-3 bg-white text-gray-700 border border-gray-200 rounded-2xl hover:bg-gray-50 transition-all duration-300 font-semibold shadow-lg",children:"Clear All"}),e.jsx("button",{onClick:I,className:"px-6 py-3 bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] text-white rounded-2xl hover:from-[#4FEF46] hover:to-[#5FFF56] transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",children:"Apply Filters"})]})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 shadow-2xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Guest"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Property"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Check-in"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Check-out"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:le.map((F,Z)=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-lg font-bold text-white",children:F.guestName?.charAt(0)||"G"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg group-hover:text-[#5FFF56] transition-colors",children:F.guestName||"Guest"}),e.jsxs("p",{className:"text-sm text-gray-500 font-medium",children:["ID: ",F.bookingId]})]})]})}),e.jsxs("td",{className:"px-8 py-6 whitespace-nowrap",children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:X(F.propertyId||0)}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Algarve, Portugal"})]}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("p",{className:"font-semibold text-gray-900",children:G(F.checkInDate||"")})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("p",{className:"font-semibold text-gray-900",children:G(F.checkOutDate||"")})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:J(F.totalAmount||0)})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-2xl text-sm font-bold shadow-lg ${F.paymentStatus==="Paid"?"bg-green-100 text-green-800":F.paymentStatus==="Pending"?"bg-yellow-100 text-yellow-800":F.paymentStatus==="Failed"?"bg-red-100 text-red-800":F.paymentStatus==="Refunded"?"bg-purple-100 text-purple-800":F.status==="confirmed"?"bg-green-100 text-green-800":F.status==="pending"?"bg-yellow-100 text-yellow-800":F.status==="cancelled"?"bg-red-100 text-red-800":F.status==="modified"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:F.status||F.paymentStatus||"Pending"})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>B(F.id,F.propertyId||392776),className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",title:"View Details",children:e.jsx(ks,{className:"w-5 h-5"})})})})]},F.id))})]})})})]}),h&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Details & SIBA Manager"}),e.jsx("button",{onClick:W,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx(ns,{className:"h-5 w-5 text-blue-600"})}),"Booking Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Guest Name:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.guestName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Property:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:X(d.propertyId)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Check-in:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:G(d.checkInDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Check-out:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:G(d.checkOutDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Adults:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.adults})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Children:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.children})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Total Amount:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:J(d.totalAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Status:"}),e.jsx("span",{className:`font-semibold ${d.paymentStatus==="Paid"?"text-green-600":d.paymentStatus==="Pending"?"text-yellow-600":"text-red-600"}`,children:d.status||d.paymentStatus})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(W6,{reservation:d,propertyId:d.propertyId,onSibaSent:F=>{console.log("SIBA submitted with ID:",F)}})})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(yd,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Please select a property to view its bookings."}),e.jsx("button",{onClick:()=>l(!0),className:"btn btn-primary",children:"Select Property"})]})})})},hy=()=>{const{bookingId:t}=A0(),[r]=qu(),s=r.get("propertyId"),a=pi(),[o,l]=R.useState(null),[d,u]=R.useState(!0),[h,m]=R.useState(null),{token:p}=Ft(y=>y.auth);R.useEffect(()=>{(async()=>{if(!t||!s||!p){m("Missing booking ID, property ID, or authentication token"),u(!1);return}try{u(!0),m(null);const k=await fetch(`/api/bookings/detail/${t}?propertyId=${s}`,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!k.ok)throw new Error(`Failed to fetch booking details: ${k.statusText}`);const C=await k.json();l(C)}catch(k){console.error("Error fetching booking detail:",k),m(k.message||"Failed to fetch booking details")}finally{u(!1)}})()},[t,s,p]);const v=()=>{if(!o)return;const y=window.open("","_blank");if(!y){alert("Please allow popups to download PDF");return}const k=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Booking Detail Report - ${o.id}</title>
        <style>
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            line-height: 1.6;
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 15px; 
            margin-bottom: 25px; 
          }
          .header h1 { 
            margin: 0; 
            color: #333; 
            font-size: 24px;
          }
          .header p { 
            margin: 5px 0 0 0; 
            color: #666; 
            font-size: 14px;
          }
          .section { 
            margin-bottom: 25px; 
            page-break-inside: avoid;
          }
          .section h3 { 
            color: #333; 
            border-bottom: 1px solid #ccc; 
            padding-bottom: 8px; 
            margin-bottom: 15px;
            font-size: 18px;
          }
          .info-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 8px; 
            padding: 5px 0;
          }
          .label { 
            font-weight: bold; 
            color: #333;
            flex: 1;
          }
          .value { 
            color: #666; 
            flex: 1;
            text-align: right;
          }
          .financial { 
            background-color: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            border: 1px solid #e9ecef;
          }
          .financial .info-row {
            border-bottom: 1px solid #e9ecef;
            padding: 8px 0;
          }
          .financial .info-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 16px;
            color: #333;
          }
          .special-requests {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Booking Detail Report</h1>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>
        
        <div class="section">
          <h3>Basic Information</h3>
          <div class="info-row">
            <span class="label">Hostaway Reservation ID:</span>
            <span class="value">${o.hostawayReservationId||o.id||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">Channel Reservation ID:</span>
            <span class="value">${o.channelReservationId||o.reservationId||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">Property:</span>
            <span class="value">${o.propertyName}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Name:</span>
            <span class="value">${o.guestName}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Email:</span>
            <span class="value">${o.guestEmail}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Phone:</span>
            <span class="value">${o.guestPhone||"Not provided"}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Dates & Duration</h3>
          <div class="info-row">
            <span class="label">Check-in:</span>
            <span class="value">${new Date(o.arrivalDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">Check-out:</span>
            <span class="value">${new Date(o.departureDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">Total Nights:</span>
            <span class="value">${o.nights}</span>
          </div>
          ${o.checkInTime?`
          <div class="info-row">
            <span class="label">Check-in Time:</span>
            <span class="value">${o.checkInTime}</span>
          </div>
          <div class="info-row">
            <span class="label">Check-out Time:</span>
            <span class="value">${o.checkOutTime}</span>
          </div>
          `:""}
        </div>
        
        <div class="section">
          <h3>Guest Information</h3>
          <div class="info-row">
            <span class="label">Adults:</span>
            <span class="value">${o.adults}</span>
          </div>
          <div class="info-row">
            <span class="label">Children:</span>
            <span class="value">${o.children}</span>
          </div>
          <div class="info-row">
            <span class="label">Total Guests:</span>
            <span class="value">${o.totalGuests}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Booking Details</h3>
          <div class="info-row">
            <span class="label">Platform:</span>
            <span class="value">${o.provider}</span>
          </div>
          <div class="info-row">
            <span class="label">Status:</span>
            <span class="value">${o.status}</span>
          </div>
          <div class="info-row">
            <span class="label">Payment Status:</span>
            <span class="value">${o.paymentStatus}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Financial Breakdown</h3>
          <div class="financial">
            <div class="info-row">
              <span class="label">Total Revenue:</span>
              <span class="value">€${o.totalPrice?.toFixed(2)}</span>
            </div>
            <div class="info-row" style="background-color: #f8f9fa; padding: 8px; border-radius: 4px;">
              <span class="label" style="font-style: italic;">Note:</span>
              <span class="value" style="font-style: italic;">Final amount - includes all fees (cleaning, city tax, etc.)</span>
            </div>
            ${o.cityTax?`
            <div class="info-row">
              <span class="label">City Tax:</span>
              <span class="value">€${o.cityTax?.toFixed(2)}</span>
            </div>
            `:""}
          </div>
        </div>
        
        ${o.specialRequests?`
        <div class="section">
          <h3>Special Requests</h3>
          <div class="special-requests">
            <p>${o.specialRequests}</p>
          </div>
        </div>
        `:""}
        
        <script>
          // Auto-print when window loads
          window.onload = function() {
            setTimeout(function() {
              window.print();
              // Close window after printing
              setTimeout(function() {
                window.close();
              }, 1000);
            }, 500);
          };
        <\/script>
      </body>
      </html>
    `;y.document.write(k),y.document.close()},N=()=>{if(!o)return;const y=`Hostaway Reservation ID,Channel Reservation ID,Property,Guest Name,Guest Email,Guest Phone,Check-in,Check-out,Nights,Adults,Children,Total Revenue (Final Amount),Platform,Status,Payment Status,Check-in Time,Check-out Time,Special Requests
"${o.hostawayReservationId||o.id||"N/A"}","${o.channelReservationId||o.reservationId||"N/A"}","${o.propertyName||"N/A"}","${o.guestName||"N/A"}","${o.guestEmail||"N/A"}","${o.guestPhone||"N/A"}","${o.arrivalDate||"N/A"}","${o.departureDate||"N/A"}","${o.nights||0}","${o.adults||0}","${o.children||0}","${o.totalPrice||0}","${o.provider||"N/A"}","${o.status||"N/A"}","${o.paymentStatus||"N/A"}","${o.checkInTime||"N/A"}","${o.checkOutTime||"N/A"}","${(o.specialRequests||"").replace(/"/g,'""')}"`,k=new Blob([y],{type:"text/csv;charset=utf-8;"}),C=window.URL.createObjectURL(k),S=document.createElement("a");S.href=C,S.download=`booking-${o.id}.csv`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(C),document.body.removeChild(S)};return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading booking details..."})]})}):h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Booking"}),e.jsx("p",{className:"text-gray-600 mb-4",children:h}),e.jsx("button",{onClick:()=>a("/bookings"),className:"btn-primary",children:"Back to Bookings"})]})}):o?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>a("/bookings"),className:"btn-outline btn-sm mr-4",children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Back to Bookings"]}),e.jsxs("h1",{className:"text-xl font-semibold text-white",children:["Booking Details - ",o.id]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:v,className:"btn-outline btn-sm",children:[e.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),e.jsxs("button",{onClick:N,className:"btn-primary btn-sm",children:[e.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Fn,{className:"h-4 w-4 text-green-500 mr-2"}),"Hostaway reservation ID"]}),e.jsx("input",{type:"text",value:o.hostawayReservationId||o.id||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Fn,{className:"h-4 w-4 text-green-500 mr-2"}),"Channel reservation ID"]}),e.jsx("input",{type:"text",value:o.channelReservationId||o.reservationId||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:o.provider})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:o.status})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dates & Duration"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.arrivalDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.departureDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Nights"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:o.nights})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Guest Information"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Phone"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestPhone||"Not provided"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adults"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.adults})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Children"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.children})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Guests"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:o.totalGuests})]})]}),o.specialRequests&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:o.specialRequests})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[o.currentTaxFormatted&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Information"})}),e.jsxs("div",{className:"card-content space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Tax"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.currentTaxFormatted})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Tax"}),e.jsx("p",{className:"text-2xl font-bold text-success-600",children:o.estimatedTotalTaxFormatted})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax per Night"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.estimatedTaxPerNightFormatted})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Taxable Nights:"}),e.jsx("span",{className:"font-medium",children:o.taxableNights})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Exempt Nights:"}),e.jsx("span",{className:"font-medium",children:o.exemptNights})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})}),e.jsxs("div",{className:"card-content space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:["€",o.totalPrice?.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Final amount - includes all fees (cleaning, city tax, etc.)"})]}),o.checkInTime&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Check-in Time:"}),e.jsx("span",{className:"font-medium",children:o.checkInTime})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Check-out Time:"}),e.jsx("span",{className:"font-medium",children:o.checkOutTime})]})]})]})]}),o.taxImplemented!==void 0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Status"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[o.taxImplemented?e.jsx(Fn,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(Sl,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:o.taxImplemented?"Tax Implemented":"Tax Not Implemented"})]})})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Booking Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested booking could not be found."}),e.jsxs("button",{onClick:()=>a("/bookings"),className:"btn-primary",children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Back to Bookings"]})]})})},K6={invoices:[],isLoading:!1,error:null,summary:{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0}},wd=Cr("invoices/fetchInvoices",async(t,{rejectWithValue:r})=>{try{console.log("🔍 fetchInvoicesAsync called with params:",t);const{invoicesAPI:s}=await xa(async()=>{const{invoicesAPI:o}=await import("./invoices.api-ClI0uqSf.js");return{invoicesAPI:o}},[]),a=await s.getInvoices(t);return console.log("🔍 fetchInvoicesAsync received result:",a),a}catch(s){return console.error("❌ fetchInvoicesAsync error:",s),r(s.response?.data?.message||"Failed to fetch invoices")}}),mb=Ro({name:"invoices",initialState:K6,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(wd.pending,r=>{r.isLoading=!0,r.error=null}).addCase(wd.fulfilled,(r,s)=>{r.isLoading=!1;const a=Array.isArray(s.payload)?s.payload:[],o=l=>`Property ${l}`;r.invoices=a.map(l=>{const d=parseFloat(l.value||"0");return{id:l.id||"",propertyId:l.propertyId||0,propertyName:o(l.propertyId||0),guestName:l.name||l.guestName||"Unknown Guest",date:l.date||new Date().toISOString(),value:d,valueFormatted:`€${d.toFixed(2)}`,vat:0,vatFormatted:"€0.00",total:d,totalFormatted:`€${d.toFixed(2)}`,status:l.closed?"paid":l.partial?"partial":"pending",invoiceUrl:l.invoice_url||"#",closed:l.closed||!1,partial:l.partial||!1}}),r.summary=r.invoices.reduce((l,d)=>(l.totalAmount+=d.total,d.status==="paid"?l.paidAmount+=d.total:d.status==="pending"||d.status==="partial"?l.pendingAmount+=d.total:d.status==="overdue"&&(l.overdueAmount+=d.total),l),{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0})}).addCase(wd.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:YA}=mb.actions,Y6=mb.reducer,J6=()=>{const[t,r]=qu(),[s,a]=R.useState(""),[o,l]=R.useState(!1),[d,u]=R.useState("30d"),h=As(),{invoices:m,isLoading:p,summary:v}=Ft(B=>B.invoices),{properties:N}=Ft(B=>B.properties),{isAuthenticated:y}=Ft(B=>B.auth);R.useEffect(()=>{y&&h(Wi())},[h,y]);const[k,C]=R.useState(null),[S,L]=R.useState(""),[P,E]=R.useState(""),M=()=>{const B=new Date,W=B.getMonth()===0?11:B.getMonth()-1,Y=B.getMonth()===0?B.getFullYear()-1:B.getFullYear(),le=new Date(Y,W,1),F=new Date(Y,W+1,0),Z=be=>{const Ae=be.getFullYear(),ee=String(be.getMonth()+1).padStart(2,"0"),D=String(be.getDate()).padStart(2,"0");return`${Ae}-${ee}-${D}`};return{startDate:Z(le),endDate:Z(F)}};R.useEffect(()=>{const B=t.get("propertyId"),W=t.get("startDate"),Y=t.get("endDate"),le=t.get("period");if(B||W||Y)C(B?parseInt(B):null),L(W||""),E(Y||""),B&&h(wd({propertyId:parseInt(B),startDate:W||void 0,endDate:Y||void 0})),le&&console.log(`Applied ${le==="thisMonth"?"this month":le==="lastMonth"?"last month":le} filters for property ${B}`);else{const F=M();L(F.startDate),E(F.endDate),console.log("Auto-selected last month:",F)}},[t]),R.useEffect(()=>{if(S&&P&&!k&&N.length>0){const B=N[0];B&&(C(B.id),h(wd({propertyId:B.id,startDate:S,endDate:P})),console.log(`Auto-fetching invoices for property ${B.id} (${B.name}) for last month`))}},[S,P,k,N,h]);const z=()=>{k&&(console.log("🔍 fetchInvoices called with propertyId:",k),h(wd({propertyId:k,startDate:S||void 0,endDate:P||void 0})))},he=B=>{B.invoiceUrl&&B.invoiceUrl!=="#"?window.open(B.invoiceUrl,"_blank"):alert("Invoice URL not available")};R.useEffect(()=>{console.log("🔍 Properties loaded:",N.map(B=>({id:B.id,name:B.name}))),N.length>0&&!k&&(console.log("🔍 Setting selectedPropertyId to first property:",N[0].id,N[0].name),C(N[0].id))},[N,k]),R.useEffect(()=>{k&&z()},[k]);const X=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(B),J=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),G=m.reduce((B,W)=>{const Y=`${W.id}-${W.propertyId}`;return B.has(Y)||B.set(Y,W),B},new Map).values(),pe=Array.from(G);console.log(`[INVOICE DEDUP] Removed ${m.length-pe.length} duplicate invoices. Original: ${m.length}, Unique: ${pe.length}`);const I=pe.filter(B=>{const W=!k||B.propertyId===k;W||console.log(`[INVOICE FILTER] Filtering out invoice ${B.id} from property ${B.propertyId} (selected: ${k})`);const Y=B.guestName.toLowerCase().includes(s.toLowerCase())||B.propertyName.toLowerCase().includes(s.toLowerCase())||B.id.toLowerCase().includes(s.toLowerCase());return W&&Y});console.log(`[INVOICE FILTER] Final result: ${I.length} invoices for property ${k}`);const U={totalAmount:I.reduce((B,W)=>B+W.total,0),paidAmount:I.filter(B=>B.status==="paid").reduce((B,W)=>B+W.total,0),pendingAmount:I.filter(B=>B.status==="pending").reduce((B,W)=>B+W.total,0),overdueAmount:I.filter(B=>B.status==="overdue").reduce((B,W)=>B+W.total,0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Invoices"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage guest invoices and billing"})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl hover:shadow-3xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Total Amount"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:X(U.totalAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg",children:e.jsx(Gi,{className:"h-8 w-8 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl hover:shadow-3xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Paid"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:X(U.paidAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg",children:e.jsx(Fn,{className:"h-8 w-8 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl hover:shadow-3xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:X(U.pendingAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl shadow-lg",children:e.jsx(kl,{className:"h-8 w-8 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl hover:shadow-3xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Overdue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:X(U.overdueAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg",children:e.jsx(In,{className:"h-8 w-8 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(O0,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices, guests, properties...",value:s,onChange:B=>a(B.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 placeholder-gray-500 shadow-lg"})]})}),e.jsxs("button",{onClick:()=>l(!o),className:`px-6 py-4 rounded-2xl font-semibold shadow-lg transition-all duration-300 flex items-center gap-2 ${o?"bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] text-white hover:from-[#4FEF46] hover:to-[#5FFF56]":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(Ou,{className:"w-5 h-5"}),"Filters"]})]}),o&&e.jsxs("div",{className:"mt-8 p-8 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-2xl border border-gray-100/50 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{properties:N,selectedId:k,onChange:B=>C(B),placeholder:"Select Property"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:d,onChange:B=>u(B.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",value:S,onChange:B=>L(B.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",value:P,onChange:B=>E(B.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Amount Range"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",children:"All Amounts"}),e.jsx("option",{value:"0-100",children:"€0 - €100"}),e.jsx("option",{value:"100-500",children:"€100 - €500"}),e.jsx("option",{value:"500-1000",children:"€500 - €1000"}),e.jsx("option",{value:"1000+",children:"€1000+"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:z,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl flex items-center gap-2",disabled:!k||p,children:[e.jsx(Mr,{className:`w-5 h-5 ${p?"animate-spin":""}`}),p?"Loading...":"Refresh"]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-6 py-3 bg-white text-gray-700 border border-gray-200 rounded-2xl hover:bg-gray-50 transition-all duration-300 font-semibold shadow-lg",children:"Clear All"}),e.jsx("button",{onClick:z,className:"px-6 py-3 bg-gradient-to-r from-[#5FFF56] to-[#4FEF46] text-white rounded-2xl hover:from-[#4FEF46] hover:to-[#5FFF56] transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",disabled:!k,children:"Apply Filters"})]})]})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl border border-white/30 shadow-2xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:p?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-[#5FFF56] mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading invoices..."})]})}):I.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Yi,{className:"h-16 w-16 mx-auto text-gray-400 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"No invoices are currently available for this property."}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-2xl p-6 max-w-md mx-auto",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Note:"})," Invoices are fetched from the Hostkit API. If you need to create invoices, please use the Hostkit system directly."]})})]}):e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Invoice"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Guest"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Property"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:I.map((B,W)=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Yi,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg group-hover:text-[#5FFF56] transition-colors",children:B.id}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:B.closed?"Closed":"Open"})]})]})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:B.guestName})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:B.propertyName})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"font-semibold text-gray-900",children:J(B.date)})]})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:B.valueFormatted})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-2xl text-sm font-bold shadow-lg ${B.status==="paid"?"bg-green-100 text-green-800":B.status==="pending"?"bg-yellow-100 text-yellow-800":B.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:B.status})}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>he(B),className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",title:"View Invoice",children:e.jsx(ks,{className:"w-5 h-5"})})})})]},`${B.id}-${B.propertyId}-${W}`))})]})})})]})]})};function pr(t){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pr(t)}var mi=Uint8Array,ga=Uint16Array,V0=Int32Array,H0=new mi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W0=new mi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fy=new mi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pb=function(t,r){for(var s=new ga(31),a=0;a<31;++a)s[a]=r+=1<<t[a-1];for(var o=new V0(s[30]),a=1;a<30;++a)for(var l=s[a];l<s[a+1];++l)o[l]=l-s[a]<<5|a;return{b:s,r:o}},gb=pb(H0,2),Q6=gb.b,o0=gb.r;Q6[28]=258,o0[258]=28;var X6=pb(W0,0),my=X6.r,l0=new ga(32768);for(var Er=0;Er<32768;++Er){var xl=(Er&43690)>>1|(Er&21845)<<1;xl=(xl&52428)>>2|(xl&13107)<<2,xl=(xl&61680)>>4|(xl&3855)<<4,l0[Er]=((xl&65280)>>8|(xl&255)<<8)>>1}var ku=(function(t,r,s){for(var a=t.length,o=0,l=new ga(r);o<a;++o)t[o]&&++l[t[o]-1];var d=new ga(r);for(o=1;o<r;++o)d[o]=d[o-1]+l[o-1]<<1;var u;if(s){u=new ga(1<<r);var h=15-r;for(o=0;o<a;++o)if(t[o])for(var m=o<<4|t[o],p=r-t[o],v=d[t[o]-1]++<<p,N=v|(1<<p)-1;v<=N;++v)u[l0[v]>>h]=m}else for(u=new ga(a),o=0;o<a;++o)t[o]&&(u[o]=l0[d[t[o]-1]++]>>15-t[o]);return u}),vc=new mi(288);for(var Er=0;Er<144;++Er)vc[Er]=8;for(var Er=144;Er<256;++Er)vc[Er]=9;for(var Er=256;Er<280;++Er)vc[Er]=7;for(var Er=280;Er<288;++Er)vc[Er]=8;var Ef=new mi(32);for(var Er=0;Er<32;++Er)Ef[Er]=5;var Z6=ku(vc,9,0),eS=ku(Ef,5,0),xb=function(t){return(t+7)/8|0},tS=function(t,r,s){return(s==null||s>t.length)&&(s=t.length),new mi(t.subarray(r,s))},Po=function(t,r,s){s<<=r&7;var a=r/8|0;t[a]|=s,t[a+1]|=s>>8},pu=function(t,r,s){s<<=r&7;var a=r/8|0;t[a]|=s,t[a+1]|=s>>8,t[a+2]|=s>>16},mp=function(t,r){for(var s=[],a=0;a<t.length;++a)t[a]&&s.push({s:a,f:t[a]});var o=s.length,l=s.slice();if(!o)return{t:bb,l:0};if(o==1){var d=new mi(s[0].s+1);return d[s[0].s]=1,{t:d,l:1}}s.sort(function(z,he){return z.f-he.f}),s.push({s:-1,f:25001});var u=s[0],h=s[1],m=0,p=1,v=2;for(s[0]={s:-1,f:u.f+h.f,l:u,r:h};p!=o-1;)u=s[s[m].f<s[v].f?m++:v++],h=s[m!=p&&s[m].f<s[v].f?m++:v++],s[p++]={s:-1,f:u.f+h.f,l:u,r:h};for(var N=l[0].s,a=1;a<o;++a)l[a].s>N&&(N=l[a].s);var y=new ga(N+1),k=c0(s[p-1],y,0);if(k>r){var a=0,C=0,S=k-r,L=1<<S;for(l.sort(function(he,X){return y[X.s]-y[he.s]||he.f-X.f});a<o;++a){var P=l[a].s;if(y[P]>r)C+=L-(1<<k-y[P]),y[P]=r;else break}for(C>>=S;C>0;){var E=l[a].s;y[E]<r?C-=1<<r-y[E]++-1:++a}for(;a>=0&&C;--a){var M=l[a].s;y[M]==r&&(--y[M],++C)}k=r}return{t:new mi(y),l:k}},c0=function(t,r,s){return t.s==-1?Math.max(c0(t.l,r,s+1),c0(t.r,r,s+1)):r[t.s]=s},py=function(t){for(var r=t.length;r&&!t[--r];);for(var s=new ga(++r),a=0,o=t[0],l=1,d=function(h){s[a++]=h},u=1;u<=r;++u)if(t[u]==o&&u!=r)++l;else{if(!o&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(o),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(o);l=1,o=t[u]}return{c:s.subarray(0,a),n:r}},gu=function(t,r){for(var s=0,a=0;a<r.length;++a)s+=t[a]*r[a];return s},yb=function(t,r,s){var a=s.length,o=xb(r+2);t[o]=a&255,t[o+1]=a>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<a;++l)t[o+l+4]=s[l];return(o+4+a)*8},gy=function(t,r,s,a,o,l,d,u,h,m,p){Po(r,p++,s),++o[256];for(var v=mp(o,15),N=v.t,y=v.l,k=mp(l,15),C=k.t,S=k.l,L=py(N),P=L.c,E=L.n,M=py(C),z=M.c,he=M.n,X=new ga(19),J=0;J<P.length;++J)++X[P[J]&31];for(var J=0;J<z.length;++J)++X[z[J]&31];for(var G=mp(X,7),pe=G.t,I=G.l,U=19;U>4&&!pe[fy[U-1]];--U);var B=m+5<<3,W=gu(o,vc)+gu(l,Ef)+d,Y=gu(o,N)+gu(l,C)+d+14+3*U+gu(X,pe)+2*X[16]+3*X[17]+7*X[18];if(h>=0&&B<=W&&B<=Y)return yb(r,p,t.subarray(h,h+m));var le,F,Z,be;if(Po(r,p,1+(Y<W)),p+=2,Y<W){le=ku(N,y,0),F=N,Z=ku(C,S,0),be=C;var Ae=ku(pe,I,0);Po(r,p,E-257),Po(r,p+5,he-1),Po(r,p+10,U-4),p+=14;for(var J=0;J<U;++J)Po(r,p+3*J,pe[fy[J]]);p+=3*U;for(var ee=[P,z],D=0;D<2;++D)for(var te=ee[D],J=0;J<te.length;++J){var se=te[J]&31;Po(r,p,Ae[se]),p+=pe[se],se>15&&(Po(r,p,te[J]>>5&127),p+=te[J]>>12)}}else le=Z6,F=vc,Z=eS,be=Ef;for(var J=0;J<u;++J){var fe=a[J];if(fe>255){var se=fe>>18&31;pu(r,p,le[se+257]),p+=F[se+257],se>7&&(Po(r,p,fe>>23&31),p+=H0[se]);var V=fe&31;pu(r,p,Z[V]),p+=be[V],V>3&&(pu(r,p,fe>>5&8191),p+=W0[V])}else pu(r,p,le[fe]),p+=F[fe]}return pu(r,p,le[256]),p+F[256]},rS=new V0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bb=new mi(0),sS=function(t,r,s,a,o,l){var d=l.z||t.length,u=new mi(a+d+5*(1+Math.ceil(d/7e3))+o),h=u.subarray(a,u.length-o),m=l.l,p=(l.r||0)&7;if(r){p&&(h[0]=l.r>>3);for(var v=rS[r-1],N=v>>13,y=v&8191,k=(1<<s)-1,C=l.p||new ga(32768),S=l.h||new ga(k+1),L=Math.ceil(s/3),P=2*L,E=function(Me){return(t[Me]^t[Me+1]<<L^t[Me+2]<<P)&k},M=new V0(25e3),z=new ga(288),he=new ga(32),X=0,J=0,G=l.i||0,pe=0,I=l.w||0,U=0;G+2<d;++G){var B=E(G),W=G&32767,Y=S[B];if(C[W]=Y,S[B]=W,I<=G){var le=d-G;if((X>7e3||pe>24576)&&(le>423||!m)){p=gy(t,h,0,M,z,he,J,pe,U,G-U,p),pe=X=J=0,U=G;for(var F=0;F<286;++F)z[F]=0;for(var F=0;F<30;++F)he[F]=0}var Z=2,be=0,Ae=y,ee=W-Y&32767;if(le>2&&B==E(G-ee))for(var D=Math.min(N,le)-1,te=Math.min(32767,G),se=Math.min(258,le);ee<=te&&--Ae&&W!=Y;){if(t[G+Z]==t[G+Z-ee]){for(var fe=0;fe<se&&t[G+fe]==t[G+fe-ee];++fe);if(fe>Z){if(Z=fe,be=ee,fe>D)break;for(var V=Math.min(ee,fe-2),ye=0,F=0;F<V;++F){var ie=G-ee+F&32767,ge=C[ie],de=ie-ge&32767;de>ye&&(ye=de,Y=ie)}}}W=Y,Y=C[W],ee+=W-Y&32767}if(be){M[pe++]=268435456|o0[Z]<<18|my[be];var ue=o0[Z]&31,Pe=my[be]&31;J+=H0[ue]+W0[Pe],++z[257+ue],++he[Pe],I=G+Z,++X}else M[pe++]=t[G],++z[t[G]]}}for(G=Math.max(G,I);G<d;++G)M[pe++]=t[G],++z[t[G]];p=gy(t,h,m,M,z,he,J,pe,U,G-U,p),m||(l.r=p&7|h[p/8|0]<<3,p-=7,l.h=S,l.p=C,l.i=G,l.w=I)}else{for(var G=l.w||0;G<d+m;G+=65535){var Xe=G+65535;Xe>=d&&(h[p/8|0]=m,Xe=d),p=yb(h,p+1,t.subarray(G,Xe))}l.i=d}return tS(u,0,a+xb(p)+o)},vb=function(){var t=1,r=0;return{p:function(s){for(var a=t,o=r,l=s.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)o+=a+=s[d];a=(a&65535)+15*(a>>16),o=(o&65535)+15*(o>>16)}t=a,r=o},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},nS=function(t,r,s,a,o){if(!o&&(o={l:1},r.dictionary)){var l=r.dictionary.subarray(-32768),d=new mi(l.length+t.length);d.set(l),d.set(t,l.length),t=d,o.w=l.length}return sS(t,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,s,a,o)},wb=function(t,r,s){for(;s;++r)t[r]=s,s>>>=8},aS=function(t,r){var s=r.level,a=s==0?0:s<6?1:s==9?3:2;if(t[0]=120,t[1]=a<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var o=vb();o.p(r.dictionary),wb(t,2,o.d())}};function d0(t,r){r||(r={});var s=vb();s.p(t);var a=nS(t,r,r.dictionary?6:2,4);return aS(a,r),wb(a,a.length-4,s.d()),a}var iS=typeof TextDecoder<"u"&&new TextDecoder,oS=0;try{iS.decode(bb,{stream:!0}),oS=1}catch{}function lS(t){if(Array.isArray(t))return t}function cS(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var a,o,l,d,u=[],h=!0,m=!1;try{if(l=(s=s.call(t)).next,r!==0)for(;!(h=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);h=!0);}catch(p){m=!0,o=p}finally{try{if(!h&&s.return!=null&&(d=s.return(),Object(d)!==d))return}finally{if(m)throw o}}return u}}function xy(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,a=Array(r);s<r;s++)a[s]=t[s];return a}function dS(t,r){if(t){if(typeof t=="string")return xy(t,r);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?xy(t,r):void 0}}function uS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yy(t,r){return lS(t)||cS(t,r)||dS(t,r)||uS()}function by(t,r="utf8"){return new TextDecoder(r).decode(t)}const hS=new TextEncoder;function fS(t){return hS.encode(t)}const mS=1024*8,pS=(()=>{const t=new Uint8Array(4),r=new Uint32Array(t.buffer);return!((r[0]=1)&t[0])})(),pp={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class G0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=mS,s={}){let a=!1;typeof r=="number"?r=new ArrayBuffer(r):(a=!0,this.lastWrittenByte=r.byteLength);const o=s.offset?s.offset>>>0:0,l=r.byteLength-o;let d=o;(ArrayBuffer.isView(r)||r instanceof G0)&&(r.byteLength!==r.buffer.byteLength&&(d=r.byteOffset+o),r=r.buffer),a?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=r,this.length=l,this.byteLength=l,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,l),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const a=(this.offset+r)*2,o=new Uint8Array(a);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,s){const a=pp[s].BYTES_PER_ELEMENT*r,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+a);if(this.littleEndian===pS&&s!=="uint8"&&s!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+a));u.reverse();const h=new pp[s](u.buffer);return this.offset+=a,h.reverse(),h}const d=new pp[s](l);return this.offset+=a,d}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let s="";for(let a=0;a<r;a++)s+=this.readChar();return s}readUtf8(r=1){return by(this.readBytes(r))}decodeText(r=1,s="utf8"){return by(this.readBytes(r),s)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let s=0;s<r.length;s++)this._data.setUint8(this.offset++,r[s]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let s=0;s<r.length;s++)this.writeUint8(r.charCodeAt(s));return this}writeUtf8(r){return this.writeBytes(fS(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Id(t){let r=t.length;for(;--r>=0;)t[r]=0}const gS=3,xS=258,Nb=29,yS=256,bS=yS+1+Nb,jb=30,vS=512,wS=new Array((bS+2)*2);Id(wS);const NS=new Array(jb*2);Id(NS);const jS=new Array(vS);Id(jS);const SS=new Array(xS-gS+1);Id(SS);const kS=new Array(Nb);Id(kS);const AS=new Array(jb);Id(AS);const CS=(t,r,s,a)=>{let o=t&65535|0,l=t>>>16&65535|0,d=0;for(;s!==0;){d=s>2e3?2e3:s,s-=d;do o=o+r[a++]|0,l=l+o|0;while(--d);o%=65521,l%=65521}return o|l<<16|0};var u0=CS;const PS=()=>{let t,r=[];for(var s=0;s<256;s++){t=s;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;r[s]=t}return r},_S=new Uint32Array(PS()),LS=(t,r,s,a)=>{const o=_S,l=a+s;t^=-1;for(let d=a;d<l;d++)t=t>>>8^o[(t^r[d])&255];return t^-1};var Mi=LS,h0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Sb={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ES=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var DS=function(t){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const s=r.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const a in s)ES(s,a)&&(t[a]=s[a])}}return t},IS=t=>{let r=0;for(let a=0,o=t.length;a<o;a++)r+=t[a].length;const s=new Uint8Array(r);for(let a=0,o=0,l=t.length;a<l;a++){let d=t[a];s.set(d,o),o+=d.length}return s},kb={assign:DS,flattenChunks:IS};let Ab=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ab=!1}const Bu=new Uint8Array(256);for(let t=0;t<256;t++)Bu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Bu[254]=Bu[254]=1;var FS=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let r,s,a,o,l,d=t.length,u=0;for(o=0;o<d;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),o++)),u+=s<128?1:s<2048?2:s<65536?3:4;for(r=new Uint8Array(u),l=0,o=0;l<u;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),o++)),s<128?r[l++]=s:s<2048?(r[l++]=192|s>>>6,r[l++]=128|s&63):s<65536?(r[l++]=224|s>>>12,r[l++]=128|s>>>6&63,r[l++]=128|s&63):(r[l++]=240|s>>>18,r[l++]=128|s>>>12&63,r[l++]=128|s>>>6&63,r[l++]=128|s&63);return r};const TS=(t,r)=>{if(r<65534&&t.subarray&&Ab)return String.fromCharCode.apply(null,t.length===r?t:t.subarray(0,r));let s="";for(let a=0;a<r;a++)s+=String.fromCharCode(t[a]);return s};var OS=(t,r)=>{const s=r||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,r));let a,o;const l=new Array(s*2);for(o=0,a=0;a<s;){let d=t[a++];if(d<128){l[o++]=d;continue}let u=Bu[d];if(u>4){l[o++]=65533,a+=u-1;continue}for(d&=u===2?31:u===3?15:7;u>1&&a<s;)d=d<<6|t[a++]&63,u--;if(u>1){l[o++]=65533;continue}d<65536?l[o++]=d:(d-=65536,l[o++]=55296|d>>10&1023,l[o++]=56320|d&1023)}return TS(l,o)},RS=(t,r)=>{r=r||t.length,r>t.length&&(r=t.length);let s=r-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?r:s+Bu[t[s]]>r?s:r},f0={string2buf:FS,buf2string:OS,utf8border:RS};function MS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BS=MS;const Bh=16209,US=16191;var qS=function(r,s){let a,o,l,d,u,h,m,p,v,N,y,k,C,S,L,P,E,M,z,he,X,J,G,pe;const I=r.state;a=r.next_in,G=r.input,o=a+(r.avail_in-5),l=r.next_out,pe=r.output,d=l-(s-r.avail_out),u=l+(r.avail_out-257),h=I.dmax,m=I.wsize,p=I.whave,v=I.wnext,N=I.window,y=I.hold,k=I.bits,C=I.lencode,S=I.distcode,L=(1<<I.lenbits)-1,P=(1<<I.distbits)-1;e:do{k<15&&(y+=G[a++]<<k,k+=8,y+=G[a++]<<k,k+=8),E=C[y&L];t:for(;;){if(M=E>>>24,y>>>=M,k-=M,M=E>>>16&255,M===0)pe[l++]=E&65535;else if(M&16){z=E&65535,M&=15,M&&(k<M&&(y+=G[a++]<<k,k+=8),z+=y&(1<<M)-1,y>>>=M,k-=M),k<15&&(y+=G[a++]<<k,k+=8,y+=G[a++]<<k,k+=8),E=S[y&P];r:for(;;){if(M=E>>>24,y>>>=M,k-=M,M=E>>>16&255,M&16){if(he=E&65535,M&=15,k<M&&(y+=G[a++]<<k,k+=8,k<M&&(y+=G[a++]<<k,k+=8)),he+=y&(1<<M)-1,he>h){r.msg="invalid distance too far back",I.mode=Bh;break e}if(y>>>=M,k-=M,M=l-d,he>M){if(M=he-M,M>p&&I.sane){r.msg="invalid distance too far back",I.mode=Bh;break e}if(X=0,J=N,v===0){if(X+=m-M,M<z){z-=M;do pe[l++]=N[X++];while(--M);X=l-he,J=pe}}else if(v<M){if(X+=m+v-M,M-=v,M<z){z-=M;do pe[l++]=N[X++];while(--M);if(X=0,v<z){M=v,z-=M;do pe[l++]=N[X++];while(--M);X=l-he,J=pe}}}else if(X+=v-M,M<z){z-=M;do pe[l++]=N[X++];while(--M);X=l-he,J=pe}for(;z>2;)pe[l++]=J[X++],pe[l++]=J[X++],pe[l++]=J[X++],z-=3;z&&(pe[l++]=J[X++],z>1&&(pe[l++]=J[X++]))}else{X=l-he;do pe[l++]=pe[X++],pe[l++]=pe[X++],pe[l++]=pe[X++],z-=3;while(z>2);z&&(pe[l++]=pe[X++],z>1&&(pe[l++]=pe[X++]))}}else if((M&64)===0){E=S[(E&65535)+(y&(1<<M)-1)];continue r}else{r.msg="invalid distance code",I.mode=Bh;break e}break}}else if((M&64)===0){E=C[(E&65535)+(y&(1<<M)-1)];continue t}else if(M&32){I.mode=US;break e}else{r.msg="invalid literal/length code",I.mode=Bh;break e}break}}while(a<o&&l<u);z=k>>3,a-=z,k-=z<<3,y&=(1<<k)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<u?257+(u-l):257-(l-u),I.hold=y,I.bits=k};const dd=15,vy=852,wy=592,Ny=0,gp=1,jy=2,zS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$S=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),VS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),HS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WS=(t,r,s,a,o,l,d,u)=>{const h=u.bits;let m=0,p=0,v=0,N=0,y=0,k=0,C=0,S=0,L=0,P=0,E,M,z,he,X,J=null,G;const pe=new Uint16Array(dd+1),I=new Uint16Array(dd+1);let U=null,B,W,Y;for(m=0;m<=dd;m++)pe[m]=0;for(p=0;p<a;p++)pe[r[s+p]]++;for(y=h,N=dd;N>=1&&pe[N]===0;N--);if(y>N&&(y=N),N===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(v=1;v<N&&pe[v]===0;v++);for(y<v&&(y=v),S=1,m=1;m<=dd;m++)if(S<<=1,S-=pe[m],S<0)return-1;if(S>0&&(t===Ny||N!==1))return-1;for(I[1]=0,m=1;m<dd;m++)I[m+1]=I[m]+pe[m];for(p=0;p<a;p++)r[s+p]!==0&&(d[I[r[s+p]]++]=p);if(t===Ny?(J=U=d,G=20):t===gp?(J=zS,U=$S,G=257):(J=VS,U=HS,G=0),P=0,p=0,m=v,X=l,k=y,C=0,z=-1,L=1<<y,he=L-1,t===gp&&L>vy||t===jy&&L>wy)return 1;for(;;){B=m-C,d[p]+1<G?(W=0,Y=d[p]):d[p]>=G?(W=U[d[p]-G],Y=J[d[p]-G]):(W=96,Y=0),E=1<<m-C,M=1<<k,v=M;do M-=E,o[X+(P>>C)+M]=B<<24|W<<16|Y|0;while(M!==0);for(E=1<<m-1;P&E;)E>>=1;if(E!==0?(P&=E-1,P+=E):P=0,p++,--pe[m]===0){if(m===N)break;m=r[s+d[p]]}if(m>y&&(P&he)!==z){for(C===0&&(C=y),X+=v,k=m-C,S=1<<k;k+C<N&&(S-=pe[k+C],!(S<=0));)k++,S<<=1;if(L+=1<<k,t===gp&&L>vy||t===jy&&L>wy)return 1;z=P&he,o[z]=y<<24|k<<16|X-l|0}}return P!==0&&(o[X+P]=m-C<<24|64<<16|0),u.bits=y,0};var Au=WS;const GS=0,Cb=1,Pb=2,{Z_FINISH:Sy,Z_BLOCK:KS,Z_TREES:Uh,Z_OK:wc,Z_STREAM_END:YS,Z_NEED_DICT:JS,Z_STREAM_ERROR:Ua,Z_DATA_ERROR:_b,Z_MEM_ERROR:Lb,Z_BUF_ERROR:QS,Z_DEFLATED:ky}=Sb,tm=16180,Ay=16181,Cy=16182,Py=16183,_y=16184,Ly=16185,Ey=16186,Dy=16187,Iy=16188,Fy=16189,Df=16190,_o=16191,xp=16192,Ty=16193,yp=16194,Oy=16195,Ry=16196,My=16197,By=16198,qh=16199,zh=16200,Uy=16201,qy=16202,zy=16203,$y=16204,Vy=16205,bp=16206,Hy=16207,Wy=16208,Or=16209,Eb=16210,Db=16211,XS=852,ZS=592,ek=15,tk=ek,Gy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function rk(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sc=t=>{if(!t)return 1;const r=t.state;return!r||r.strm!==t||r.mode<tm||r.mode>Db?1:0},Ib=t=>{if(Sc(t))return Ua;const r=t.state;return t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=r.wrap&1),r.mode=tm,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(XS),r.distcode=r.distdyn=new Int32Array(ZS),r.sane=1,r.back=-1,wc},Fb=t=>{if(Sc(t))return Ua;const r=t.state;return r.wsize=0,r.whave=0,r.wnext=0,Ib(t)},Tb=(t,r)=>{let s;if(Sc(t))return Ua;const a=t.state;return r<0?(s=0,r=-r):(s=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?Ua:(a.window!==null&&a.wbits!==r&&(a.window=null),a.wrap=s,a.wbits=r,Fb(t))},Ob=(t,r)=>{if(!t)return Ua;const s=new rk;t.state=s,s.strm=t,s.window=null,s.mode=tm;const a=Tb(t,r);return a!==wc&&(t.state=null),a},sk=t=>Ob(t,tk);let Ky=!0,vp,wp;const nk=t=>{if(Ky){vp=new Int32Array(512),wp=new Int32Array(32);let r=0;for(;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(Au(Cb,t.lens,0,288,vp,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;Au(Pb,t.lens,0,32,wp,0,t.work,{bits:5}),Ky=!1}t.lencode=vp,t.lenbits=9,t.distcode=wp,t.distbits=5},Rb=(t,r,s,a)=>{let o;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),a>=l.wsize?(l.window.set(r.subarray(s-l.wsize,s),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>a&&(o=a),l.window.set(r.subarray(s-a,s-a+o),l.wnext),a-=o,a?(l.window.set(r.subarray(s-a,s),0),l.wnext=a,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},ak=(t,r)=>{let s,a,o,l,d,u,h,m,p,v,N,y,k,C,S=0,L,P,E,M,z,he,X,J;const G=new Uint8Array(4);let pe,I;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sc(t)||!t.output||!t.input&&t.avail_in!==0)return Ua;s=t.state,s.mode===_o&&(s.mode=xp),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,u=t.avail_in,m=s.hold,p=s.bits,v=u,N=h,J=wc;e:for(;;)switch(s.mode){case tm:if(s.wrap===0){s.mode=xp;break}for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&2&&m===35615){s.wbits===0&&(s.wbits=15),s.check=0,G[0]=m&255,G[1]=m>>>8&255,s.check=Mi(s.check,G,2,0),m=0,p=0,s.mode=Ay;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((m&255)<<8)+(m>>8))%31){t.msg="incorrect header check",s.mode=Or;break}if((m&15)!==ky){t.msg="unknown compression method",s.mode=Or;break}if(m>>>=4,p-=4,X=(m&15)+8,s.wbits===0&&(s.wbits=X),X>15||X>s.wbits){t.msg="invalid window size",s.mode=Or;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=m&512?Fy:_o,m=0,p=0;break;case Ay:for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.flags=m,(s.flags&255)!==ky){t.msg="unknown compression method",s.mode=Or;break}if(s.flags&57344){t.msg="unknown header flags set",s.mode=Or;break}s.head&&(s.head.text=m>>8&1),s.flags&512&&s.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,s.check=Mi(s.check,G,2,0)),m=0,p=0,s.mode=Cy;case Cy:for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.head&&(s.head.time=m),s.flags&512&&s.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,G[2]=m>>>16&255,G[3]=m>>>24&255,s.check=Mi(s.check,G,4,0)),m=0,p=0,s.mode=Py;case Py:for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.head&&(s.head.xflags=m&255,s.head.os=m>>8),s.flags&512&&s.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,s.check=Mi(s.check,G,2,0)),m=0,p=0,s.mode=_y;case _y:if(s.flags&1024){for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.length=m,s.head&&(s.head.extra_len=m),s.flags&512&&s.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,s.check=Mi(s.check,G,2,0)),m=0,p=0}else s.head&&(s.head.extra=null);s.mode=Ly;case Ly:if(s.flags&1024&&(y=s.length,y>u&&(y=u),y&&(s.head&&(X=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(a.subarray(l,l+y),X)),s.flags&512&&s.wrap&4&&(s.check=Mi(s.check,a,y,l)),u-=y,l+=y,s.length-=y),s.length))break e;s.length=0,s.mode=Ey;case Ey:if(s.flags&2048){if(u===0)break e;y=0;do X=a[l+y++],s.head&&X&&s.length<65536&&(s.head.name+=String.fromCharCode(X));while(X&&y<u);if(s.flags&512&&s.wrap&4&&(s.check=Mi(s.check,a,y,l)),u-=y,l+=y,X)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=Dy;case Dy:if(s.flags&4096){if(u===0)break e;y=0;do X=a[l+y++],s.head&&X&&s.length<65536&&(s.head.comment+=String.fromCharCode(X));while(X&&y<u);if(s.flags&512&&s.wrap&4&&(s.check=Mi(s.check,a,y,l)),u-=y,l+=y,X)break e}else s.head&&(s.head.comment=null);s.mode=Iy;case Iy:if(s.flags&512){for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&4&&m!==(s.check&65535)){t.msg="header crc mismatch",s.mode=Or;break}m=0,p=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=_o;break;case Fy:for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}t.adler=s.check=Gy(m),m=0,p=0,s.mode=Df;case Df:if(s.havedict===0)return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,JS;t.adler=s.check=1,s.mode=_o;case _o:if(r===KS||r===Uh)break e;case xp:if(s.last){m>>>=p&7,p-=p&7,s.mode=bp;break}for(;p<3;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}switch(s.last=m&1,m>>>=1,p-=1,m&3){case 0:s.mode=Ty;break;case 1:if(nk(s),s.mode=qh,r===Uh){m>>>=2,p-=2;break e}break;case 2:s.mode=Ry;break;case 3:t.msg="invalid block type",s.mode=Or}m>>>=2,p-=2;break;case Ty:for(m>>>=p&7,p-=p&7;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if((m&65535)!==(m>>>16^65535)){t.msg="invalid stored block lengths",s.mode=Or;break}if(s.length=m&65535,m=0,p=0,s.mode=yp,r===Uh)break e;case yp:s.mode=Oy;case Oy:if(y=s.length,y){if(y>u&&(y=u),y>h&&(y=h),y===0)break e;o.set(a.subarray(l,l+y),d),u-=y,l+=y,h-=y,d+=y,s.length-=y;break}s.mode=_o;break;case Ry:for(;p<14;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.nlen=(m&31)+257,m>>>=5,p-=5,s.ndist=(m&31)+1,m>>>=5,p-=5,s.ncode=(m&15)+4,m>>>=4,p-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=Or;break}s.have=0,s.mode=My;case My:for(;s.have<s.ncode;){for(;p<3;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.lens[U[s.have++]]=m&7,m>>>=3,p-=3}for(;s.have<19;)s.lens[U[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,pe={bits:s.lenbits},J=Au(GS,s.lens,0,19,s.lencode,0,s.work,pe),s.lenbits=pe.bits,J){t.msg="invalid code lengths set",s.mode=Or;break}s.have=0,s.mode=By;case By:for(;s.have<s.nlen+s.ndist;){for(;S=s.lencode[m&(1<<s.lenbits)-1],L=S>>>24,P=S>>>16&255,E=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(E<16)m>>>=L,p-=L,s.lens[s.have++]=E;else{if(E===16){for(I=L+2;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(m>>>=L,p-=L,s.have===0){t.msg="invalid bit length repeat",s.mode=Or;break}X=s.lens[s.have-1],y=3+(m&3),m>>>=2,p-=2}else if(E===17){for(I=L+3;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=L,p-=L,X=0,y=3+(m&7),m>>>=3,p-=3}else{for(I=L+7;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=L,p-=L,X=0,y=11+(m&127),m>>>=7,p-=7}if(s.have+y>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=Or;break}for(;y--;)s.lens[s.have++]=X}}if(s.mode===Or)break;if(s.lens[256]===0){t.msg="invalid code -- missing end-of-block",s.mode=Or;break}if(s.lenbits=9,pe={bits:s.lenbits},J=Au(Cb,s.lens,0,s.nlen,s.lencode,0,s.work,pe),s.lenbits=pe.bits,J){t.msg="invalid literal/lengths set",s.mode=Or;break}if(s.distbits=6,s.distcode=s.distdyn,pe={bits:s.distbits},J=Au(Pb,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,pe),s.distbits=pe.bits,J){t.msg="invalid distances set",s.mode=Or;break}if(s.mode=qh,r===Uh)break e;case qh:s.mode=zh;case zh:if(u>=6&&h>=258){t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,qS(t,N),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,u=t.avail_in,m=s.hold,p=s.bits,s.mode===_o&&(s.back=-1);break}for(s.back=0;S=s.lencode[m&(1<<s.lenbits)-1],L=S>>>24,P=S>>>16&255,E=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(P&&(P&240)===0){for(M=L,z=P,he=E;S=s.lencode[he+((m&(1<<M+z)-1)>>M)],L=S>>>24,P=S>>>16&255,E=S&65535,!(M+L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=M,p-=M,s.back+=M}if(m>>>=L,p-=L,s.back+=L,s.length=E,P===0){s.mode=Vy;break}if(P&32){s.back=-1,s.mode=_o;break}if(P&64){t.msg="invalid literal/length code",s.mode=Or;break}s.extra=P&15,s.mode=Uy;case Uy:if(s.extra){for(I=s.extra;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.length+=m&(1<<s.extra)-1,m>>>=s.extra,p-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=qy;case qy:for(;S=s.distcode[m&(1<<s.distbits)-1],L=S>>>24,P=S>>>16&255,E=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if((P&240)===0){for(M=L,z=P,he=E;S=s.distcode[he+((m&(1<<M+z)-1)>>M)],L=S>>>24,P=S>>>16&255,E=S&65535,!(M+L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=M,p-=M,s.back+=M}if(m>>>=L,p-=L,s.back+=L,P&64){t.msg="invalid distance code",s.mode=Or;break}s.offset=E,s.extra=P&15,s.mode=zy;case zy:if(s.extra){for(I=s.extra;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.offset+=m&(1<<s.extra)-1,m>>>=s.extra,p-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=Or;break}s.mode=$y;case $y:if(h===0)break e;if(y=N-h,s.offset>y){if(y=s.offset-y,y>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=Or;break}y>s.wnext?(y-=s.wnext,k=s.wsize-y):k=s.wnext-y,y>s.length&&(y=s.length),C=s.window}else C=o,k=d-s.offset,y=s.length;y>h&&(y=h),h-=y,s.length-=y;do o[d++]=C[k++];while(--y);s.length===0&&(s.mode=zh);break;case Vy:if(h===0)break e;o[d++]=s.length,h--,s.mode=zh;break;case bp:if(s.wrap){for(;p<32;){if(u===0)break e;u--,m|=a[l++]<<p,p+=8}if(N-=h,t.total_out+=N,s.total+=N,s.wrap&4&&N&&(t.adler=s.check=s.flags?Mi(s.check,o,N,d-N):u0(s.check,o,N,d-N)),N=h,s.wrap&4&&(s.flags?m:Gy(m))!==s.check){t.msg="incorrect data check",s.mode=Or;break}m=0,p=0}s.mode=Hy;case Hy:if(s.wrap&&s.flags){for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&4&&m!==(s.total&4294967295)){t.msg="incorrect length check",s.mode=Or;break}m=0,p=0}s.mode=Wy;case Wy:J=YS;break e;case Or:J=_b;break e;case Eb:return Lb;case Db:default:return Ua}return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,(s.wsize||N!==t.avail_out&&s.mode<Or&&(s.mode<bp||r!==Sy))&&Rb(t,t.output,t.next_out,N-t.avail_out),v-=t.avail_in,N-=t.avail_out,t.total_in+=v,t.total_out+=N,s.total+=N,s.wrap&4&&N&&(t.adler=s.check=s.flags?Mi(s.check,o,N,t.next_out-N):u0(s.check,o,N,t.next_out-N)),t.data_type=s.bits+(s.last?64:0)+(s.mode===_o?128:0)+(s.mode===qh||s.mode===yp?256:0),(v===0&&N===0||r===Sy)&&J===wc&&(J=QS),J},ik=t=>{if(Sc(t))return Ua;let r=t.state;return r.window&&(r.window=null),t.state=null,wc},ok=(t,r)=>{if(Sc(t))return Ua;const s=t.state;return(s.wrap&2)===0?Ua:(s.head=r,r.done=!1,wc)},lk=(t,r)=>{const s=r.length;let a,o,l;return Sc(t)||(a=t.state,a.wrap!==0&&a.mode!==Df)?Ua:a.mode===Df&&(o=1,o=u0(o,r,s,0),o!==a.check)?_b:(l=Rb(t,r,s,s),l?(a.mode=Eb,Lb):(a.havedict=1,wc))};var ck=Fb,dk=Tb,uk=Ib,hk=sk,fk=Ob,mk=ak,pk=ik,gk=ok,xk=lk,yk="pako inflate (from Nodeca project)",Lo={inflateReset:ck,inflateReset2:dk,inflateResetKeep:uk,inflateInit:hk,inflateInit2:fk,inflate:mk,inflateEnd:pk,inflateGetHeader:gk,inflateSetDictionary:xk,inflateInfo:yk};function bk(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vk=bk;const Mb=Object.prototype.toString,{Z_NO_FLUSH:wk,Z_FINISH:Nk,Z_OK:Uu,Z_STREAM_END:Np,Z_NEED_DICT:jp,Z_STREAM_ERROR:jk,Z_DATA_ERROR:Yy,Z_MEM_ERROR:Sk}=Sb;function Yu(t){this.options=kb.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(t&&t.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BS,this.strm.avail_out=0;let s=Lo.inflateInit2(this.strm,r.windowBits);if(s!==Uu)throw new Error(h0[s]);if(this.header=new vk,Lo.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=f0.string2buf(r.dictionary):Mb.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(s=Lo.inflateSetDictionary(this.strm,r.dictionary),s!==Uu)))throw new Error(h0[s])}Yu.prototype.push=function(t,r){const s=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let l,d,u;if(this.ended)return!1;for(r===~~r?d=r:d=r===!0?Nk:wk,Mb.call(t)==="[object ArrayBuffer]"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),l=Lo.inflate(s,d),l===jp&&o&&(l=Lo.inflateSetDictionary(s,o),l===Uu?l=Lo.inflate(s,d):l===Yy&&(l=jp));s.avail_in>0&&l===Np&&s.state.wrap>0&&t[s.next_in]!==0;)Lo.inflateReset(s),l=Lo.inflate(s,d);switch(l){case jk:case Yy:case jp:case Sk:return this.onEnd(l),this.ended=!0,!1}if(u=s.avail_out,s.next_out&&(s.avail_out===0||l===Np))if(this.options.to==="string"){let h=f0.utf8border(s.output,s.next_out),m=s.next_out-h,p=f0.buf2string(s.output,h);s.next_out=m,s.avail_out=a-m,m&&s.output.set(s.output.subarray(h,h+m),0),this.onData(p)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(l===Uu&&u===0)){if(l===Np)return l=Lo.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Yu.prototype.onData=function(t){this.chunks.push(t)};Yu.prototype.onEnd=function(t){t===Uu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kb.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function kk(t,r){const s=new Yu(r);if(s.push(t),s.err)throw s.msg||h0[s.err];return s.result}var Ak=Yu,Ck=kk,Pk={Inflate:Ak,inflate:Ck};const{Inflate:_k,inflate:Lk}=Pk;var Jy=_k,Ek=Lk;const Bb=[];for(let t=0;t<256;t++){let r=t;for(let s=0;s<8;s++)r&1?r=3988292384^r>>>1:r=r>>>1;Bb[t]=r}const Qy=4294967295;function Dk(t,r,s){let a=t;for(let o=0;o<s;o++)a=Bb[(a^r[o])&255]^a>>>8;return a}function Ik(t,r){return(Dk(Qy,t,r)^Qy)>>>0}function Xy(t,r,s){const a=t.readUint32(),o=Ik(new Uint8Array(t.buffer,t.byteOffset+t.offset-r-4,r),r);if(o!==a)throw new Error(`CRC mismatch for chunk ${s}. Expected ${a}, found ${o}`)}function Ub(t,r,s){for(let a=0;a<s;a++)r[a]=t[a]}function qb(t,r,s,a){let o=0;for(;o<a;o++)r[o]=t[o];for(;o<s;o++)r[o]=t[o]+r[o-a]&255}function zb(t,r,s,a){let o=0;if(s.length===0)for(;o<a;o++)r[o]=t[o];else for(;o<a;o++)r[o]=t[o]+s[o]&255}function $b(t,r,s,a,o){let l=0;if(s.length===0){for(;l<o;l++)r[l]=t[l];for(;l<a;l++)r[l]=t[l]+(r[l-o]>>1)&255}else{for(;l<o;l++)r[l]=t[l]+(s[l]>>1)&255;for(;l<a;l++)r[l]=t[l]+(r[l-o]+s[l]>>1)&255}}function Vb(t,r,s,a,o){let l=0;if(s.length===0){for(;l<o;l++)r[l]=t[l];for(;l<a;l++)r[l]=t[l]+r[l-o]&255}else{for(;l<o;l++)r[l]=t[l]+s[l]&255;for(;l<a;l++)r[l]=t[l]+Fk(r[l-o],s[l],s[l-o])&255}}function Fk(t,r,s){const a=t+r-s,o=Math.abs(a-t),l=Math.abs(a-r),d=Math.abs(a-s);return o<=l&&o<=d?t:l<=d?r:s}function Tk(t,r,s,a,o,l){switch(t){case 0:Ub(r,s,o);break;case 1:qb(r,s,o,l);break;case 2:zb(r,s,a,o);break;case 3:$b(r,s,a,o,l);break;case 4:Vb(r,s,a,o,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Ok=new Uint16Array([255]),Rk=new Uint8Array(Ok.buffer),Mk=Rk[0]===255;function Bk(t){const{data:r,width:s,height:a,channels:o,depth:l}=t,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(l/8)*o,h=new Uint8Array(a*s*u);let m=0;for(let p=0;p<7;p++){const v=d[p],N=Math.ceil((s-v.x)/v.xStep),y=Math.ceil((a-v.y)/v.yStep);if(N<=0||y<=0)continue;const k=N*u,C=new Uint8Array(k);for(let S=0;S<y;S++){const L=r[m++],P=r.subarray(m,m+k);m+=k;const E=new Uint8Array(k);Tk(L,P,E,C,k,u),C.set(E);for(let M=0;M<N;M++){const z=v.x+M*v.xStep,he=v.y+S*v.yStep;if(!(z>=s||he>=a))for(let X=0;X<u;X++)h[(he*s+z)*u+X]=E[M*u+X]}}}if(l===16){const p=new Uint16Array(h.buffer);if(Mk)for(let v=0;v<p.length;v++)p[v]=Uk(p[v]);return p}else return h}function Uk(t){return(t&255)<<8|t>>8&255}const qk=new Uint16Array([255]),zk=new Uint8Array(qk.buffer),$k=zk[0]===255,Vk=new Uint8Array(0);function Zy(t){const{data:r,width:s,height:a,channels:o,depth:l}=t,d=Math.ceil(l/8)*o,u=Math.ceil(l/8*o*s),h=new Uint8Array(a*u);let m=Vk,p=0,v,N;for(let y=0;y<a;y++){switch(v=r.subarray(p+1,p+1+u),N=h.subarray(y*u,(y+1)*u),r[p]){case 0:Ub(v,N,u);break;case 1:qb(v,N,u,d);break;case 2:zb(v,N,m,u);break;case 3:$b(v,N,m,u,d);break;case 4:Vb(v,N,m,u,d);break;default:throw new Error(`Unsupported filter: ${r[p]}`)}m=N,p+=u+1}if(l===16){const y=new Uint16Array(h.buffer);if($k)for(let k=0;k<y.length;k++)y[k]=Hk(y[k]);return y}else return h}function Hk(t){return(t&255)<<8|t>>8&255}const uf=Uint8Array.of(137,80,78,71,13,10,26,10);function e1(t){if(!Wk(t.readBytes(uf.length)))throw new Error("wrong PNG signature")}function Wk(t){if(t.length<uf.length)return!1;for(let r=0;r<uf.length;r++)if(t[r]!==uf[r])return!1;return!0}const Gk="tEXt",Kk=0,Hb=new TextDecoder("latin1");function Yk(t){if(Qk(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Jk=/^[\u0000-\u00FF]*$/;function Qk(t){if(!Jk.test(t))throw new Error("invalid latin1 text")}function Xk(t,r,s){const a=Wb(r);t[a]=Zk(r,s-a.length-1)}function Wb(t){for(t.mark();t.readByte()!==Kk;);const r=t.offset;t.reset();const s=Hb.decode(t.readBytes(r-t.offset-1));return t.skip(1),Yk(s),s}function Zk(t,r){return Hb.decode(t.readBytes(r))}const fa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Sp={UNKNOWN:-1,DEFLATE:0},t1={UNKNOWN:-1,ADAPTIVE:0},kp={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},$h={NONE:0,BACKGROUND:1,PREVIOUS:2},Ap={SOURCE:0,OVER:1};class e8 extends G0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,s={}){super(r);const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new Jy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Sp.UNKNOWN,this._filterMethod=t1.UNKNOWN,this._interlaceMethod=kp.UNKNOWN,this._colorType=fa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(e1(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeChunk(r,s)}return this.decodeImage(),this._png}decodeApng(){for(e1(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(r,s)}return this.decodeApngImage(),this._apng}decodeChunk(r,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Gk:Xk(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Xy(this,r+4,s):this.skip(4)}decodeApngChunk(r,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,s),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Xy(this,r+4,s):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=t8(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case fa.GREYSCALE:a=1;break;case fa.TRUECOLOUR:a=3;break;case fa.INDEXED_COLOUR:a=1;break;case fa.GREYSCALE_ALPHA:a=2;break;case fa.TRUECOLOUR_ALPHA:a=4;break;case fa.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==Sp.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const s=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<s;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const s=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let s=r,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fa.GREYSCALE:case fa.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let s=0;s<r/2;s++)this._transparency[s]=this.readUint16();break}case fa.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let s=0;for(;s<r;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case fa.UNKNOWN:case fa.GREYSCALE_ALPHA:case fa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const s=Wb(this),a=this.readUint8();if(a!==Sp.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(r-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:Ek(o)}}decodepHYs(){const r=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const s={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=Zy({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const o=this._apng.frames.at(r-1);this.disposeFrame(a,o,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(r,s,a){switch(r.disposeOp){case $h.NONE:break;case $h.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const d=(o*r.width+l)*this._png.channels;for(let u=0;u<this._png.channels;u++)a.data[d+u]=0}break;case $h.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,s){const a=1<<this._png.depth,o=(l,d)=>{const u=((l+s.yOffset)*this._png.width+s.xOffset+d)*this._png.channels,h=(l*s.width+d)*this._png.channels;return{index:u,frameIndex:h}};switch(s.blendOp){case Ap.SOURCE:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let m=0;m<this._png.channels;m++)r.data[u+m]=s.data[h+m]}break;case Ap.OVER:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let m=0;m<this._png.channels;m++){const p=s.data[h+this._png.channels-1]/a,v=m%(this._png.channels-1)===0?1:s.data[h+m],N=Math.floor(p*v+(1-p)*r.data[u+m]);r.data[u+m]+=N}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==t1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===kp.NO_INTERLACE)this._png.data=Zy({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===kp.ADAM7)this._png.data=Bk({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,s=this._frames.at(-1);s?s.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:$h.NONE,blendOp:Ap.SOURCE,data:r}),this._inflator=new Jy,this._writingDataChunks=!1}}function t8(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var r1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(r1||(r1={}));function r8(t,r){return new e8(t,r).decode()}var Bt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Cp(){Bt.console&&typeof Bt.console.log=="function"&&Bt.console.log.apply(Bt.console,arguments)}var Nr={log:Cp,warn:function(t){Bt.console&&(typeof Bt.console.warn=="function"?Bt.console.warn.apply(Bt.console,arguments):Cp.call(null,arguments))},error:function(t){Bt.console&&(typeof Bt.console.error=="function"?Bt.console.error.apply(Bt.console,arguments):Cp(t))}};function Pp(t,r,s){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){ic(a.response,r,s)},a.onerror=function(){Nr.error("could not download file")},a.send()}function s1(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function Vh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var ic=Bt.saveAs||((typeof window>"u"?"undefined":pr(window))!=="object"||window!==Bt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,r,s){var a=Bt.URL||Bt.webkitURL,o=document.createElement("a");r=r||t.name||"download",o.download=r,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?s1(o.href)?Pp(t,r,s):Vh(o,o.target="_blank"):Vh(o)):(o.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){Vh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,s){if(r=r||t.name||"download",typeof t=="string")if(s1(t))Pp(t,r,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){Vh(a)})}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:pr(l)!=="object"&&(Nr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(t,s),r)}:function(t,r,s,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return Pp(t,r,s);var o=t.type==="application/octet-stream",l=/constructor/i.test(Bt.HTMLElement)||Bt.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l)&&(typeof FileReader>"u"?"undefined":pr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var p=u.result;p=d?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=p:location=p,a=null},u.readAsDataURL(t)}else{var h=Bt.URL||Bt.webkitURL,m=h.createObjectURL(t);a?a.location=m:location.href=m,a=null,setTimeout(function(){h.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Gb(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<s.length;a++){var o=s[a].re,l=s[a].process,d=o.exec(t);d&&(r=l(d),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),m=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),m.length==1&&(m="0"+m),"#"+u+h+m}}var hf=Bt.atob.bind(Bt),n1=Bt.btoa.bind(Bt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _p(t,r){var s=t[0],a=t[1],o=t[2],l=t[3];s=pn(s,a,o,l,r[0],7,-680876936),l=pn(l,s,a,o,r[1],12,-389564586),o=pn(o,l,s,a,r[2],17,606105819),a=pn(a,o,l,s,r[3],22,-1044525330),s=pn(s,a,o,l,r[4],7,-176418897),l=pn(l,s,a,o,r[5],12,1200080426),o=pn(o,l,s,a,r[6],17,-1473231341),a=pn(a,o,l,s,r[7],22,-45705983),s=pn(s,a,o,l,r[8],7,1770035416),l=pn(l,s,a,o,r[9],12,-1958414417),o=pn(o,l,s,a,r[10],17,-42063),a=pn(a,o,l,s,r[11],22,-1990404162),s=pn(s,a,o,l,r[12],7,1804603682),l=pn(l,s,a,o,r[13],12,-40341101),o=pn(o,l,s,a,r[14],17,-1502002290),s=gn(s,a=pn(a,o,l,s,r[15],22,1236535329),o,l,r[1],5,-165796510),l=gn(l,s,a,o,r[6],9,-1069501632),o=gn(o,l,s,a,r[11],14,643717713),a=gn(a,o,l,s,r[0],20,-373897302),s=gn(s,a,o,l,r[5],5,-701558691),l=gn(l,s,a,o,r[10],9,38016083),o=gn(o,l,s,a,r[15],14,-660478335),a=gn(a,o,l,s,r[4],20,-405537848),s=gn(s,a,o,l,r[9],5,568446438),l=gn(l,s,a,o,r[14],9,-1019803690),o=gn(o,l,s,a,r[3],14,-187363961),a=gn(a,o,l,s,r[8],20,1163531501),s=gn(s,a,o,l,r[13],5,-1444681467),l=gn(l,s,a,o,r[2],9,-51403784),o=gn(o,l,s,a,r[7],14,1735328473),s=xn(s,a=gn(a,o,l,s,r[12],20,-1926607734),o,l,r[5],4,-378558),l=xn(l,s,a,o,r[8],11,-2022574463),o=xn(o,l,s,a,r[11],16,1839030562),a=xn(a,o,l,s,r[14],23,-35309556),s=xn(s,a,o,l,r[1],4,-1530992060),l=xn(l,s,a,o,r[4],11,1272893353),o=xn(o,l,s,a,r[7],16,-155497632),a=xn(a,o,l,s,r[10],23,-1094730640),s=xn(s,a,o,l,r[13],4,681279174),l=xn(l,s,a,o,r[0],11,-358537222),o=xn(o,l,s,a,r[3],16,-722521979),a=xn(a,o,l,s,r[6],23,76029189),s=xn(s,a,o,l,r[9],4,-640364487),l=xn(l,s,a,o,r[12],11,-421815835),o=xn(o,l,s,a,r[15],16,530742520),s=yn(s,a=xn(a,o,l,s,r[2],23,-995338651),o,l,r[0],6,-198630844),l=yn(l,s,a,o,r[7],10,1126891415),o=yn(o,l,s,a,r[14],15,-1416354905),a=yn(a,o,l,s,r[5],21,-57434055),s=yn(s,a,o,l,r[12],6,1700485571),l=yn(l,s,a,o,r[3],10,-1894986606),o=yn(o,l,s,a,r[10],15,-1051523),a=yn(a,o,l,s,r[1],21,-2054922799),s=yn(s,a,o,l,r[8],6,1873313359),l=yn(l,s,a,o,r[15],10,-30611744),o=yn(o,l,s,a,r[6],15,-1560198380),a=yn(a,o,l,s,r[13],21,1309151649),s=yn(s,a,o,l,r[4],6,-145523070),l=yn(l,s,a,o,r[11],10,-1120210379),o=yn(o,l,s,a,r[2],15,718787259),a=yn(a,o,l,s,r[9],21,-343485551),t[0]=Nl(s,t[0]),t[1]=Nl(a,t[1]),t[2]=Nl(o,t[2]),t[3]=Nl(l,t[3])}function rm(t,r,s,a,o,l){return r=Nl(Nl(r,t),Nl(a,l)),Nl(r<<o|r>>>32-o,s)}function pn(t,r,s,a,o,l,d){return rm(r&s|~r&a,t,r,o,l,d)}function gn(t,r,s,a,o,l,d){return rm(r&a|s&~a,t,r,o,l,d)}function xn(t,r,s,a,o,l,d){return rm(r^s^a,t,r,o,l,d)}function yn(t,r,s,a,o,l,d){return rm(s^(r|~a),t,r,o,l,d)}function Kb(t){var r,s=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)_p(a,s8(t.substring(r-64,r)));t=t.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(_p(a,o),r=0;r<16;r++)o[r]=0;return o[14]=8*s,_p(a,o),a}function s8(t){var r,s=[];for(r=0;r<64;r+=4)s[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return s}var a1="0123456789abcdef".split("");function n8(t){for(var r="",s=0;s<4;s++)r+=a1[t>>8*s+4&15]+a1[t>>8*s&15];return r}function a8(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function m0(t){return Kb(t).map(a8).join("")}var i8=(function(t){for(var r=0;r<t.length;r++)t[r]=n8(t[r]);return t.join("")})(Kb("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nl(t,r){if(i8){var s=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(s>>16)<<16|65535&s}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function p0(t,r){var s,a,o,l;if(t!==s){for(var d=(o=t,l=1+(256/t.length|0),new Array(l+1).join(o)),u=[],h=0;h<256;h++)u[h]=h;var m=0;for(h=0;h<256;h++){var p=u[h];m=(m+p+d.charCodeAt(h))%256,u[h]=u[m],u[m]=p}s=t,a=u}else u=a;var v=r.length,N=0,y=0,k="";for(h=0;h<v;h++)y=(y+(p=u[N=(N+1)%256]))%256,u[N]=u[y],u[y]=p,d=u[(u[N]+u[y])%256],k+=String.fromCharCode(r.charCodeAt(h)^d);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var i1={print:4,modify:8,copy:16,"annot-forms":32};function fd(t,r,s,a){this.v=1,this.r=2;var o=192;t.forEach(function(u){if(i1.perm!==void 0)throw new Error("Invalid permission: "+u);o+=i1[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(r+this.padding).substr(0,32),d=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^o)),this.encryptionKey=m0(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=p0(this.encryptionKey,this.padding)}function md(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",s=t.length,a=0;a<s;a++){var o=t.charCodeAt(a);r+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[a]}return r}function o1(t){if(pr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(s,a,o){if(o=o||!1,typeof s!="string"||typeof a!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(s)||(r[s]={});var l=Math.random().toString(35);return r[s][l]=[a,!!o],l},this.unsubscribe=function(s){for(var a in r)if(r[a][s])return delete r[a][s],Object.keys(r[a]).length===0&&delete r[a],!0;return!1},this.publish=function(s){if(r.hasOwnProperty(s)){var a=Array.prototype.slice.call(arguments,1),o=[];for(var l in r[s]){var d=r[s][l];try{d[0].apply(t,a)}catch(u){Bt.console&&Nr.error("jsPDF PubSub Error",u.message,u)}d[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function If(t){if(!(this instanceof If))return new If(t);var r="opacity,stroke-opacity".split(",");for(var s in t)t.hasOwnProperty(s)&&r.indexOf(s)>=0&&(this[s]=t[s]);this.id="",this.objectNumber=-1}function Yb(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function oc(t,r,s,a,o){if(!(this instanceof oc))return new oc(t,r,s,a,o);this.type=t==="axial"?2:3,this.coords=r,this.colors=s,Yb.call(this,a,o)}function gd(t,r,s,a,o){if(!(this instanceof gd))return new gd(t,r,s,a,o);this.boundingBox=t,this.xStep=r,this.yStep=s,this.stream="",this.cloneIndex=0,Yb.call(this,a,o)}function At(t){var r,s=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],o=arguments[2],l=arguments[3],d=[],u=1,h=16,m="S",p=null;pr(t=t||{})==="object"&&(s=t.orientation,a=t.unit||a,o=t.format||o,l=t.compress||t.compressPdf||l,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),m=t.defaultPathOperation||"S"),d=t.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",s=(""+(s||"P")).toLowerCase();var v=t.putOnlyUsedFonts||!1,N={},y={internal:{},__private__:{}};y.__private__.PubSub=o1;var k="1.3",C=y.__private__.getPdfVersion=function(){return k};y.__private__.setPdfVersion=function(w){k=w};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return S};var L=y.__private__.getPageFormat=function(w){return S[w]};o=o||"a4";var P="compat",E="advanced",M=P;function z(){this.saveGraphicsState(),me(new _t(wt,0,0,-wt,0,Os()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),m="n",M=E}function he(){this.restoreGraphicsState(),m="S",M=P}var X=y.__private__.combineFontStyleAndFontWeight=function(w,T){if(w=="bold"&&T=="normal"||w=="bold"&&T==400||w=="normal"&&T=="italic"||w=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(w=T==400||T==="normal"?w==="italic"?"italic":"normal":T!=700&&T!=="bold"||w!=="normal"?(T==700?"bold":T)+""+w:"bold"),w};y.advancedAPI=function(w){var T=M===P;return T&&z.call(this),typeof w!="function"||(w(this),T&&he.call(this)),this},y.compatAPI=function(w){var T=M===E;return T&&he.call(this),typeof w!="function"||(w(this),T&&z.call(this)),this},y.isAdvancedAPI=function(){return M===E};var J,G=function(w){if(M!==E)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},pe=y.roundToPrecision=y.__private__.roundToPrecision=function(w,T){var oe=r||T;if(isNaN(w)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(oe).replace(/0+$/,"")};J=y.hpf=y.__private__.hpf=typeof h=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(w,h)}:h==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(w,16)};var I=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return pe(w,2)},U=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return pe(w,3)},B=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return M===P?w*wt:M===E?w:void 0},W=function(w){return B((function(T){return M===P?Os()-T:M===E?T:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(r=parseInt(w,10))};var Y,le="00000000000000000000000000000000",F=y.__private__.getFileId=function(){return le},Z=y.__private__.setFileId=function(w){return le=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ur=new fd(p.userPermissions,p.userPassword,p.ownerPassword,le)),le};y.setFileId=function(w){return Z(w),this},y.getFileId=function(){return F()};var be=y.__private__.convertDateToPDFDate=function(w){var T=w.getTimezoneOffset(),oe=T<0?"+":"-",ve=Math.floor(Math.abs(T/60)),Ce=Math.abs(T%60),Ve=[oe,se(ve),"'",se(Ce),"'"].join("");return["D:",w.getFullYear(),se(w.getMonth()+1),se(w.getDate()),se(w.getHours()),se(w.getMinutes()),se(w.getSeconds()),Ve].join("")},Ae=y.__private__.convertPDFDateToDate=function(w){var T=parseInt(w.substr(2,4),10),oe=parseInt(w.substr(6,2),10)-1,ve=parseInt(w.substr(8,2),10),Ce=parseInt(w.substr(10,2),10),Ve=parseInt(w.substr(12,2),10),Ke=parseInt(w.substr(14,2),10);return new Date(T,oe,ve,Ce,Ve,Ke,0)},ee=y.__private__.setCreationDate=function(w){var T;if(w===void 0&&(w=new Date),w instanceof Date)T=be(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=w}return Y=T},D=y.__private__.getCreationDate=function(w){var T=Y;return w==="jsDate"&&(T=Ae(Y)),T};y.setCreationDate=function(w){return ee(w),this},y.getCreationDate=function(w){return D(w)};var te,se=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},fe=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},V=0,ye=[],ie=[],ge=0,de=[],ue=[],Pe=!1,Xe=ie;y.__private__.setCustomOutputDestination=function(w){Pe=!0,Xe=w};var Me=function(w){Pe||(Xe=w)};y.__private__.resetCustomOutputDestination=function(){Pe=!1,Xe=ie};var me=y.__private__.out=function(w){return w=w.toString(),ge+=w.length+1,Xe.push(w),Xe},Ye=y.__private__.write=function(w){return me(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},rt=y.__private__.getArrayBuffer=function(w){for(var T=w.length,oe=new ArrayBuffer(T),ve=new Uint8Array(oe);T--;)ve[T]=w.charCodeAt(T);return oe},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return et};var $e=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return $e=M===E?w/wt:w,this};var re,ce=y.__private__.getFontSize=y.getFontSize=function(){return M===P?$e:$e*wt},je=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return je=w,this},y.__private__.getR2L=y.getR2L=function(){return je};var Oe,Re=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))re=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');re=w}else re=parseInt(w,10)};y.__private__.getZoomMode=function(){return re};var Fe,We=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Oe=w};y.__private__.getPageMode=function(){return Oe};var at=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Fe=w};y.__private__.getLayoutMode=function(){return Fe},y.__private__.setDisplayMode=y.setDisplayMode=function(w,T,oe){return Re(w),at(T),We(oe),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(nt).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[w]},y.__private__.getDocumentProperties=function(){return nt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var T in nt)nt.hasOwnProperty(T)&&w[T]&&(nt[T]=w[T]);return this},y.__private__.setDocumentProperty=function(w,T){if(Object.keys(nt).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[w]=T};var it,wt,ot,Ut,qt,lt={},xt={},Gt=[],Nt={},Rt={},Pt={},Pr={},jr=null,Zt=0,Ot=[],tr=new o1(y),bi=t.hotfixes||[],Cs={},va={},Tn=[],_t=function w(T,oe,ve,Ce,Ve,Ke){if(!(this instanceof w))return new w(T,oe,ve,Ce,Ve,Ke);isNaN(T)&&(T=1),isNaN(oe)&&(oe=0),isNaN(ve)&&(ve=0),isNaN(Ce)&&(Ce=1),isNaN(Ve)&&(Ve=0),isNaN(Ke)&&(Ke=0),this._matrix=[T,oe,ve,Ce,Ve,Ke]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(w)},_t.prototype.multiply=function(w){var T=w.sx*this.sx+w.shy*this.shx,oe=w.sx*this.shy+w.shy*this.sy,ve=w.shx*this.sx+w.sy*this.shx,Ce=w.shx*this.shy+w.sy*this.sy,Ve=w.tx*this.sx+w.ty*this.shx+this.tx,Ke=w.tx*this.shy+w.ty*this.sy+this.ty;return new _t(T,oe,ve,Ce,Ve,Ke)},_t.prototype.decompose=function(){var w=this.sx,T=this.shy,oe=this.shx,ve=this.sy,Ce=this.tx,Ve=this.ty,Ke=Math.sqrt(w*w+T*T),ft=(w/=Ke)*oe+(T/=Ke)*ve;oe-=w*ft,ve-=T*ft;var pt=Math.sqrt(oe*oe+ve*ve);return ft/=pt,w*(ve/=pt)<T*(oe/=pt)&&(w=-w,T=-T,ft=-ft,Ke=-Ke),{scale:new _t(Ke,0,0,pt,0,0),translate:new _t(1,0,0,1,Ce,Ve),rotate:new _t(w,T,-T,w,0,0),skew:new _t(1,0,ft,1,0,0)}},_t.prototype.toString=function(w){return this.join(" ")},_t.prototype.inversed=function(){var w=this.sx,T=this.shy,oe=this.shx,ve=this.sy,Ce=this.tx,Ve=this.ty,Ke=1/(w*ve-T*oe),ft=ve*Ke,pt=-T*Ke,Lt=-oe*Ke,zt=w*Ke;return new _t(ft,pt,Lt,zt,-ft*Ce-Lt*Ve,-pt*Ce-zt*Ve)},_t.prototype.applyToPoint=function(w){var T=w.x*this.sx+w.y*this.shx+this.tx,oe=w.x*this.shy+w.y*this.sy+this.ty;return new Aa(T,oe)},_t.prototype.applyToRectangle=function(w){var T=this.applyToPoint(w),oe=this.applyToPoint(new Aa(w.x+w.w,w.y+w.h));return new lo(T.x,T.y,oe.x-T.x,oe.y-T.y)},_t.prototype.clone=function(){var w=this.sx,T=this.shy,oe=this.shx,ve=this.sy,Ce=this.tx,Ve=this.ty;return new _t(w,T,oe,ve,Ce,Ve)},y.Matrix=_t;var vn=y.matrixMult=function(w,T){return T.multiply(w)},Xn=new _t(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Xn;var Fs=function(w,T){if(!Rt[w]){var oe=(T instanceof oc?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);T.id=oe,Rt[w]=oe,Nt[oe]=T,tr.publish("addPattern",T)}};y.ShadingPattern=oc,y.TilingPattern=gd,y.addShadingPattern=function(w,T){return G("addShadingPattern()"),Fs(w,T),this},y.beginTilingPattern=function(w){G("beginTilingPattern()"),Un(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,T){G("endTilingPattern()"),T.stream=ue[te].join(`
`),Fs(w,T),tr.publish("endTilingPattern",T),Tn.pop().restore()};var On,gr=y.__private__.newObject=function(){var w=Br();return Yr(w,!0),w},Br=y.__private__.newObjectDeferred=function(){return V++,ye[V]=function(){return ge},V},Yr=function(w,T){return T=typeof T=="boolean"&&T,ye[w]=ge,T&&me(w+" 0 obj"),w},qa=y.__private__.newAdditionalObject=function(){var w={objId:Br(),content:""};return de.push(w),w},vi=Br(),Zn=Br(),wa=y.__private__.decodeColorString=function(w){var T=w.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length!==5||T[4]!=="k"&&T[4]!=="K"||(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var oe=parseFloat(T[0]);T=[oe,oe,oe,"r"]}for(var ve="#",Ce=0;Ce<3;Ce++)ve+=("0"+Math.floor(255*parseFloat(T[Ce])).toString(16)).slice(-2);return ve},Ps=y.__private__.encodeColorString=function(w){var T;typeof w=="string"&&(w={ch1:w});var oe=w.ch1,ve=w.ch2,Ce=w.ch3,Ve=w.ch4,Ke=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var ft=new Gb(oe);if(ft.ok)oe=ft.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var pt=parseInt(oe.substr(1),16);oe=pt>>16&255,ve=pt>>8&255,Ce=255&pt}if(ve===void 0||Ve===void 0&&oe===ve&&ve===Ce)T=typeof oe=="string"?oe+" "+Ke[0]:w.precision===2?I(oe/255)+" "+Ke[0]:U(oe/255)+" "+Ke[0];else if(Ve===void 0||pr(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return["1.","1.","1.",Ke[1]].join(" ");T=typeof oe=="string"?[oe,ve,Ce,Ke[1]].join(" "):w.precision===2?[I(oe/255),I(ve/255),I(Ce/255),Ke[1]].join(" "):[U(oe/255),U(ve/255),U(Ce/255),Ke[1]].join(" ")}else T=typeof oe=="string"?[oe,ve,Ce,Ve,Ke[2]].join(" "):w.precision===2?[I(oe),I(ve),I(Ce),I(Ve),Ke[2]].join(" "):[U(oe),U(ve),U(Ce),U(Ve),Ke[2]].join(" ");return T},Rn=y.__private__.getFilters=function(){return d},wn=y.__private__.putStream=function(w){var T=(w=w||{}).data||"",oe=w.filters||Rn(),ve=w.alreadyAppliedFilters||[],Ce=w.addLength1||!1,Ve=T.length,Ke=w.objectId,ft=function(as){return as};if(p!==null&&Ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ft=Ur.encryptor(Ke,0));var pt={};oe===!0&&(oe=["FlateEncode"]);var Lt=w.additionalKeyValues||[],zt=(pt=At.API.processDataByFilters!==void 0?At.API.processDataByFilters(T,oe):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(pt.data.length!==0&&(Lt.push({key:"Length",value:pt.data.length}),Ce===!0&&Lt.push({key:"Length1",value:Ve})),zt.length!=0)if(zt.split("/").length-1==1)Lt.push({key:"Filter",value:zt});else{Lt.push({key:"Filter",value:"["+zt+"]"});for(var rr=0;rr<Lt.length;rr+=1)if(Lt[rr].key==="DecodeParms"){for(var _r=[],Qr=0;Qr<pt.reverseChain.split("/").length-1;Qr+=1)_r.push("null");_r.push(Lt[rr].value),Lt[rr].value="["+_r.join(" ")+"]"}}me("<<");for(var ir=0;ir<Lt.length;ir++)me("/"+Lt[ir].key+" "+Lt[ir].value);me(">>"),pt.data.length!==0&&(me("stream"),me(ft(pt.data)),me("endstream"))},Xi=y.__private__.putPage=function(w){var T=w.number,oe=w.data,ve=w.objId,Ce=w.contentsObjId;Yr(ve,!0),me("<</Type /Page"),me("/Parent "+w.rootDictionaryObjId+" 0 R"),me("/Resources "+w.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(J(w.mediaBox.bottomLeftX))+" "+parseFloat(J(w.mediaBox.bottomLeftY))+" "+J(w.mediaBox.topRightX)+" "+J(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&me("/CropBox ["+J(w.cropBox.bottomLeftX)+" "+J(w.cropBox.bottomLeftY)+" "+J(w.cropBox.topRightX)+" "+J(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&me("/BleedBox ["+J(w.bleedBox.bottomLeftX)+" "+J(w.bleedBox.bottomLeftY)+" "+J(w.bleedBox.topRightX)+" "+J(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&me("/TrimBox ["+J(w.trimBox.bottomLeftX)+" "+J(w.trimBox.bottomLeftY)+" "+J(w.trimBox.topRightX)+" "+J(w.trimBox.topRightY)+"]"),w.artBox!==null&&me("/ArtBox ["+J(w.artBox.bottomLeftX)+" "+J(w.artBox.bottomLeftY)+" "+J(w.artBox.topRightX)+" "+J(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&me("/UserUnit "+w.userUnit),tr.publish("putPage",{objId:ve,pageContext:Ot[T],pageNumber:T,page:oe}),me("/Contents "+Ce+" 0 R"),me(">>"),me("endobj");var Ve=oe.join(`
`);return M===E&&(Ve+=`
Q`),Yr(Ce,!0),wn({data:Ve,filters:Rn(),objectId:Ce}),me("endobj"),ve},ea=y.__private__.putPages=function(){var w,T,oe=[];for(w=1;w<=Zt;w++)Ot[w].objId=Br(),Ot[w].contentsObjId=Br();for(w=1;w<=Zt;w++)oe.push(Xi({number:w,data:ue[w],objId:Ot[w].objId,contentsObjId:Ot[w].contentsObjId,mediaBox:Ot[w].mediaBox,cropBox:Ot[w].cropBox,bleedBox:Ot[w].bleedBox,trimBox:Ot[w].trimBox,artBox:Ot[w].artBox,userUnit:Ot[w].userUnit,rootDictionaryObjId:vi,resourceDictionaryObjId:Zn}));Yr(vi,!0),me("<</Type /Pages");var ve="/Kids [";for(T=0;T<Zt;T++)ve+=oe[T]+" 0 R ";me(ve+"]"),me("/Count "+Zt),me(">>"),me("endobj"),tr.publish("postPutPages")},wi=function(w){tr.publish("putFont",{font:w,out:me,newObject:gr,putStream:wn}),w.isAlreadyPutted!==!0&&(w.objectNumber=gr(),me("<<"),me("/Type /Font"),me("/BaseFont /"+md(w.postScriptName)),me("/Subtype /Type1"),typeof w.encoding=="string"&&me("/Encoding /"+w.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},Zi=function(w){w.objectNumber=gr();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[J(w.x),J(w.y),J(w.x+w.width),J(w.y+w.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var oe=w.pages[1].join(`
`);wn({data:oe,additionalKeyValues:T,objectId:w.objectNumber}),me("endobj")},eo=function(w,T){T||(T=21);var oe=gr(),ve=(function(Ke,ft){var pt,Lt=[],zt=1/(ft-1);for(pt=0;pt<1;pt+=zt)Lt.push(pt);if(Lt.push(1),Ke[0].offset!=0){var rr={offset:0,color:Ke[0].color};Ke.unshift(rr)}if(Ke[Ke.length-1].offset!=1){var _r={offset:1,color:Ke[Ke.length-1].color};Ke.push(_r)}for(var Qr="",ir=0,as=0;as<Lt.length;as++){for(pt=Lt[as];pt>Ke[ir+1].offset;)ir++;var Xr=Ke[ir].offset,_s=(pt-Xr)/(Ke[ir+1].offset-Xr),Ga=Ke[ir].color,Si=Ke[ir+1].color;Qr+=fe(Math.round((1-_s)*Ga[0]+_s*Si[0]).toString(16))+fe(Math.round((1-_s)*Ga[1]+_s*Si[1]).toString(16))+fe(Math.round((1-_s)*Ga[2]+_s*Si[2]).toString(16))}return Qr.trim()})(w.colors,T),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+T+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wn({data:ve,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),me("endobj"),w.objectNumber=gr(),me("<< /ShadingType "+w.type),me("/ColorSpace /DeviceRGB");var Ve="/Coords ["+J(parseFloat(w.coords[0]))+" "+J(parseFloat(w.coords[1]))+" ";w.type===2?Ve+=J(parseFloat(w.coords[2]))+" "+J(parseFloat(w.coords[3])):Ve+=J(parseFloat(w.coords[2]))+" "+J(parseFloat(w.coords[3]))+" "+J(parseFloat(w.coords[4]))+" "+J(parseFloat(w.coords[5])),me(Ve+="]"),w.matrix&&me("/Matrix ["+w.matrix.toString()+"]"),me("/Function "+oe+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Mo=function(w,T){var oe=Br(),ve=gr();T.push({resourcesOid:oe,objectOid:ve}),w.objectNumber=ve;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+w.boundingBox.map(J).join(" ")+"]"}),Ce.push({key:"XStep",value:J(w.xStep)}),Ce.push({key:"YStep",value:J(w.yStep)}),Ce.push({key:"Resources",value:oe+" 0 R"}),w.matrix&&Ce.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),wn({data:w.stream,additionalKeyValues:Ce,objectId:w.objectNumber}),me("endobj")},Fd=function(w){for(var T in w.objectNumber=gr(),me("<<"),w)switch(T){case"opacity":me("/ca "+I(w[T]));break;case"stroke-opacity":me("/CA "+I(w[T]))}me(">>"),me("endobj")},vr=function(w){Yr(w.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var T in me("/Font <<"),lt)lt.hasOwnProperty(T)&&(v===!1||v===!0&&N.hasOwnProperty(T))&&me("/"+T+" "+lt[T].objectNumber+" 0 R");me(">>")})(),(function(){if(Object.keys(Nt).length>0){for(var T in me("/Shading <<"),Nt)Nt.hasOwnProperty(T)&&Nt[T]instanceof oc&&Nt[T].objectNumber>=0&&me("/"+T+" "+Nt[T].objectNumber+" 0 R");tr.publish("putShadingPatternDict"),me(">>")}})(),(function(T){if(Object.keys(Nt).length>0){for(var oe in me("/Pattern <<"),Nt)Nt.hasOwnProperty(oe)&&Nt[oe]instanceof y.TilingPattern&&Nt[oe].objectNumber>=0&&Nt[oe].objectNumber<T&&me("/"+oe+" "+Nt[oe].objectNumber+" 0 R");tr.publish("putTilingPatternDict"),me(">>")}})(w.objectOid),(function(){if(Object.keys(Pt).length>0){var T;for(T in me("/ExtGState <<"),Pt)Pt.hasOwnProperty(T)&&Pt[T].objectNumber>=0&&me("/"+T+" "+Pt[T].objectNumber+" 0 R");tr.publish("putGStateDict"),me(">>")}})(),(function(){for(var T in me("/XObject <<"),Cs)Cs.hasOwnProperty(T)&&Cs[T].objectNumber>=0&&me("/"+T+" "+Cs[T].objectNumber+" 0 R");tr.publish("putXobjectDict"),me(">>")})(),me(">>"),me("endobj")},Ac=function(w){xt[w.fontName]=xt[w.fontName]||{},xt[w.fontName][w.fontStyle]=w.id},Bo=function(w,T,oe,ve,Ce){var Ve={id:"F"+(Object.keys(lt).length+1).toString(10),postScriptName:w,fontName:T,fontStyle:oe,encoding:ve,isStandardFont:Ce||!1,metadata:{}};return tr.publish("addFont",{font:Ve,instance:this}),lt[Ve.id]=Ve,Ac(Ve),Ve.id},Nn=y.__private__.pdfEscape=y.pdfEscape=function(w,T){return(function(oe,ve){var Ce,Ve,Ke,ft,pt,Lt,zt,rr,_r;if(Ke=(ve=ve||{}).sourceEncoding||"Unicode",pt=ve.outputEncoding,(ve.autoencode||pt)&&lt[it].metadata&&lt[it].metadata[Ke]&&lt[it].metadata[Ke].encoding&&(ft=lt[it].metadata[Ke].encoding,!pt&&lt[it].encoding&&(pt=lt[it].encoding),!pt&&ft.codePages&&(pt=ft.codePages[0]),typeof pt=="string"&&(pt=ft[pt]),pt)){for(zt=!1,Lt=[],Ce=0,Ve=oe.length;Ce<Ve;Ce++)(rr=pt[oe.charCodeAt(Ce)])?Lt.push(String.fromCharCode(rr)):Lt.push(oe[Ce]),Lt[Ce].charCodeAt(0)>>8&&(zt=!0);oe=Lt.join("")}for(Ce=oe.length;zt===void 0&&Ce!==0;)oe.charCodeAt(Ce-1)>>8&&(zt=!0),Ce--;if(!zt)return oe;for(Lt=ve.noBOM?[]:[254,255],Ce=0,Ve=oe.length;Ce<Ve;Ce++){if((_r=(rr=oe.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(_r),Lt.push(rr-(_r<<8))}return String.fromCharCode.apply(void 0,Lt)})(w,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ni=y.__private__.beginPage=function(w){ue[++Zt]=[],Ot[Zt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},to(Zt),Me(ue[te])},Cc=function(w,T){var oe,ve,Ce;switch(s=T||s,typeof w=="string"&&(oe=L(w.toLowerCase()),Array.isArray(oe)&&(ve=oe[0],Ce=oe[1])),Array.isArray(w)&&(ve=w[0]*wt,Ce=w[1]*wt),isNaN(ve)&&(ve=o[0],Ce=o[1]),(ve>14400||Ce>14400)&&(Nr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Ce=Math.min(14400,Ce)),o=[ve,Ce],s.substr(0,1)){case"l":Ce>ve&&(o=[Ce,ve]);break;case"p":ve>Ce&&(o=[Ce,ve])}Ni(o),io(Bn),me(oo),Tl!==0&&me(Tl+" J"),Ol!==0&&me(Ol+" j"),tr.publish("addPage",{pageNumber:Zt})},Uo=function(w){w>0&&w<=Zt&&(ue.splice(w,1),Ot.splice(w,1),Zt--,te>Zt&&(te=Zt),this.setPage(te))},to=function(w){w>0&&w<=Zt&&(te=w)},jn=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return ue.length-1},Pc=function(w,T,oe){var ve,Ce=void 0;return oe=oe||{},w=w!==void 0?w:lt[it].fontName,T=T!==void 0?T:lt[it].fontStyle,ve=w.toLowerCase(),xt[ve]!==void 0&&xt[ve][T]!==void 0?Ce=xt[ve][T]:xt[w]!==void 0&&xt[w][T]!==void 0?Ce=xt[w][T]:oe.disableWarning===!1&&Nr.warn("Unable to look up font label for font '"+w+"', '"+T+"'. Refer to getFontList() for available fonts."),Ce||oe.noFallback||(Ce=xt.times[T])==null&&(Ce=xt.times.normal),Ce},Ts=y.__private__.putInfo=function(){var w=gr(),T=function(ve){return ve};for(var oe in p!==null&&(T=Ur.encryptor(w,0)),me("<<"),me("/Producer ("+Nn(T("jsPDF "+At.version))+")"),nt)nt.hasOwnProperty(oe)&&nt[oe]&&me("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Nn(T(nt[oe]))+")");me("/CreationDate ("+Nn(T(Y))+")"),me(">>"),me("endobj")},Td=y.__private__.putCatalog=function(w){var T=(w=w||{}).rootDictionaryObjId||vi;switch(gr(),me("<<"),me("/Type /Catalog"),me("/Pages "+T+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+re;oe.substr(oe.length-1)==="%"&&(re=parseInt(re)/100),typeof re=="number"&&me("/OpenAction [3 0 R /XYZ null null "+I(re)+"]")}switch(Fe||(Fe="continuous"),Fe){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}Oe&&me("/PageMode /"+Oe),tr.publish("putCatalog"),me(">>"),me("endobj")},Jr=y.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(V+1)),me("/Root "+V+" 0 R"),me("/Info "+(V-1)+" 0 R"),p!==null&&me("/Encrypt "+Ur.oid+" 0 R"),me("/ID [ <"+le+"> <"+le+"> ]"),me(">>")},_c=y.__private__.putHeader=function(){me("%PDF-"+k),me("%ºß¬à")},ro=y.__private__.putXRef=function(){var w="0000000000";me("xref"),me("0 "+(V+1)),me("0000000000 65535 f ");for(var T=1;T<=V;T++)typeof ye[T]=="function"?me((w+ye[T]()).slice(-10)+" 00000 n "):ye[T]!==void 0?me((w+ye[T]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},Mn=y.__private__.buildDocument=function(){var w;V=0,ge=0,ie=[],ye=[],de=[],vi=Br(),Zn=Br(),Me(ie),tr.publish("buildDocument"),_c(),ea(),(function(){tr.publish("putAdditionalObjects");for(var oe=0;oe<de.length;oe++){var ve=de[oe];Yr(ve.objId,!0),me(ve.content),me("endobj")}tr.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var oe in lt)lt.hasOwnProperty(oe)&&(v===!1||v===!0&&N.hasOwnProperty(oe))&&wi(lt[oe])})(),(function(){var oe;for(oe in Pt)Pt.hasOwnProperty(oe)&&Fd(Pt[oe])})(),(function(){for(var oe in Cs)Cs.hasOwnProperty(oe)&&Zi(Cs[oe])})(),(function(oe){var ve;for(ve in Nt)Nt.hasOwnProperty(ve)&&(Nt[ve]instanceof oc?eo(Nt[ve]):Nt[ve]instanceof gd&&Mo(Nt[ve],oe))})(w),tr.publish("putResources"),w.forEach(vr),vr({resourcesOid:Zn,objectOid:Number.MAX_SAFE_INTEGER}),tr.publish("postPutResources"),p!==null&&(Ur.oid=gr(),me("<<"),me("/Filter /Standard"),me("/V "+Ur.v),me("/R "+Ur.r),me("/U <"+Ur.toHexString(Ur.U)+">"),me("/O <"+Ur.toHexString(Ur.O)+">"),me("/P "+Ur.P),me(">>"),me("endobj")),Ts(),Td();var T=ge;return ro(),Jr(),me("startxref"),me(""+T),me("%%EOF"),Me(ue[te]),ie.join(`
`)},ta=y.__private__.getBlob=function(w){return new Blob([rt(w)],{type:"application/pdf"})},tn=y.output=y.__private__.output=(On=function(w,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",w){case void 0:return Mn();case"save":y.save(T.filename);break;case"arraybuffer":return rt(Mn());case"blob":return ta(Mn());case"bloburi":case"bloburl":if(Bt.URL!==void 0&&typeof Bt.URL.createObjectURL=="function")return Bt.URL&&Bt.URL.createObjectURL(ta(Mn()))||void 0;Nr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ve=Mn();try{oe=n1(ve)}catch{oe=n1(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+T.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(Ce=T.pdfObjectUrl,Ve="");var Ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",ft=Bt.open();return ft!==null&&ft.document.write(Ke),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',Lt=Bt.open();if(Lt!==null){Lt.document.write(pt);var zt=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=T.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zt.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Bt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',_r=Bt.open();if(_r!==null&&(_r.document.write(rr),_r.document.title=T.filename),_r||typeof safari>"u")return _r;break;case"datauri":case"dataurl":return Bt.document.location.href=this.output("datauristring",T);default:return null}},On.foo=function(){try{return On.apply(this,arguments)}catch(oe){var w=oe.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var T="Error in function "+w.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Bt.console)throw new Error(T);Bt.console.error(T,oe),Bt.alert&&alert(T)}},On.foo.bar=On,On.foo),so=function(w){return Array.isArray(bi)===!0&&bi.indexOf(w)>-1};switch(a){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=so("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);wt=a}var Ur=null;ee(),Z();var no=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ot[w].objId,pageNumber:w,pageContext:Ot[w]}},Lc=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in Ot)if(Ot[T].objId===w)break;return no(T)},Dl=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Ot[te].objId,pageNumber:te,pageContext:Ot[te]}};y.addPage=function(){return Cc.apply(this,arguments),this},y.setPage=function(){return to.apply(this,arguments),Me.call(this,ue[te]),this},y.insertPage=function(w){return this.addPage(),this.movePage(te,w),this},y.movePage=function(w,T){var oe,ve;if(w>T){oe=ue[w],ve=Ot[w];for(var Ce=w;Ce>T;Ce--)ue[Ce]=ue[Ce-1],Ot[Ce]=Ot[Ce-1];ue[T]=oe,Ot[T]=ve,this.setPage(T)}else if(w<T){oe=ue[w],ve=Ot[w];for(var Ve=w;Ve<T;Ve++)ue[Ve]=ue[Ve+1],Ot[Ve]=Ot[Ve+1];ue[T]=oe,Ot[T]=ve,this.setPage(T)}return this},y.deletePage=function(){return Uo.apply(this,arguments),this},y.__private__.text=y.text=function(w,T,oe,ve,Ce){var Ve,Ke,ft,pt,Lt,zt,rr,_r,Qr,ir=(ve=ve||{}).scope||this;if(typeof w=="number"&&typeof T=="number"&&(typeof oe=="string"||Array.isArray(oe))){var as=oe;oe=T,T=w,w=as}if(arguments[3]instanceof _t==0?(ft=arguments[4],pt=arguments[5],pr(rr=arguments[3])==="object"&&rr!==null||(typeof ft=="string"&&(pt=ft,ft=null),typeof rr=="string"&&(pt=rr,rr=null),typeof rr=="number"&&(ft=rr,rr=null),ve={flags:rr,angle:ft,align:pt})):(G("The transform parameter of text() with a Matrix value"),Qr=Ce),isNaN(T)||isNaN(oe)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return ir;var Xr,_s="",Ga=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:rn,Si=ir.internal.scaleFactor;function Tc(xr){return xr=xr.split("	").join(Array(ve.TabLen||9).join(" ")),Nn(xr,rr)}function Oc(xr){for(var yr,qr=xr.concat(),zr=[],os=qr.length;os--;)typeof(yr=qr.shift())=="string"?zr.push(yr):Array.isArray(xr)&&(yr.length===1||yr[1]===void 0&&yr[2]===void 0)?zr.push(yr[0]):zr.push([yr[0],yr[1],yr[2]]);return zr}function uo(xr,yr){var qr;if(typeof xr=="string")qr=yr(xr)[0];else if(Array.isArray(xr)){for(var zr,os,La=xr.concat(),ia=[],Xo=La.length;Xo--;)typeof(zr=La.shift())=="string"?ia.push(yr(zr)[0]):Array.isArray(zr)&&typeof zr[0]=="string"&&(os=yr(zr[0],zr[1],zr[2]),ia.push([os[0],os[1],os[2]]));qr=ia}return qr}var aa=!1,Rl=!0;if(typeof w=="string")aa=!0;else if(Array.isArray(w)){var ki=w.concat();Ke=[];for(var Ai,xs=ki.length;xs--;)(typeof(Ai=ki.shift())!="string"||Array.isArray(Ai)&&typeof Ai[0]!="string")&&(Rl=!1);aa=Rl}if(aa===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Ka=$e/ir.internal.scaleFactor,Ca=Ka*(Ga-1);switch(ve.baseline){case"bottom":oe-=Ca;break;case"top":oe+=Ka-Ca;break;case"hanging":oe+=Ka-2*Ca;break;case"middle":oe+=Ka/2-Ca}if((zt=ve.maxWidth||0)>0&&(typeof w=="string"?w=ir.splitTextToSize(w,zt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(xr,yr){return xr.concat(ir.splitTextToSize(yr,zt))},[]))),Ve={text:w,x:T,y:oe,options:ve,mutex:{pdfEscape:Nn,activeFontKey:it,fonts:lt,activeFontSize:$e}},tr.publish("preProcessText",Ve),w=Ve.text,ft=(ve=Ve.options).angle,Qr instanceof _t==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,ve.rotationDirection===0&&(ft=-ft),M===E&&(ft=-ft);var Go=Math.cos(ft),Ml=Math.sin(ft);Qr=new _t(Go,Ml,-Ml,Go,0,0)}else ft&&ft instanceof _t&&(Qr=ft);M!==E||Qr||(Qr=Xn),(Lt=ve.charSpace||na)!==void 0&&(_s+=J(B(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_r=ve.horizontalScale)!==void 0&&(_s+=J(100*_r)+` Tz
`),ve.lang;var Hs=-1,Rc=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Ko=ir.internal.getCurrentPageInfo().pageContext;switch(Rc){case 0:case!1:case"fill":Hs=0;break;case 1:case!0:case"stroke":Hs=1;break;case 2:case"fillThenStroke":Hs=2;break;case 3:case"invisible":Hs=3;break;case 4:case"fillAndAddForClipping":Hs=4;break;case 5:case"strokeAndAddPathForClipping":Hs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hs=6;break;case 7:case"addToPathForClipping":Hs=7}var Mc=Ko.usedRenderingMode!==void 0?Ko.usedRenderingMode:-1;Hs!==-1?_s+=Hs+` Tr
`:Mc!==-1&&(_s+=`0 Tr
`),Hs!==-1&&(Ko.usedRenderingMode=Hs),pt=ve.align||"left";var is,sn=$e*Ga,Ya=ir.internal.pageSize.getWidth(),Bl=lt[it];Lt=ve.charSpace||na,zt=ve.maxWidth||0,rr=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Ja=[],ho=function(xr){return ir.getStringUnitWidth(xr,{font:Bl,charSpace:Lt,fontSize:$e,doKerning:!1})*$e/Si};if(Object.prototype.toString.call(w)==="[object Array]"){var Ws;Ke=Oc(w),pt!=="left"&&(is=Ke.map(ho));var Gs,Ci=0;if(pt==="right"){T-=is[0],w=[],xs=Ke.length;for(var Ks=0;Ks<xs;Ks++)Ks===0?(Gs=Sn(T),Ws=Va(oe)):(Gs=B(Ci-is[Ks]),Ws=-sn),w.push([Ke[Ks],Gs,Ws]),Ci=is[Ks]}else if(pt==="center"){T-=is[0]/2,w=[],xs=Ke.length;for(var Pi=0;Pi<xs;Pi++)Pi===0?(Gs=Sn(T),Ws=Va(oe)):(Gs=B((Ci-is[Pi])/2),Ws=-sn),w.push([Ke[Pi],Gs,Ws]),Ci=is[Pi]}else if(pt==="left"){w=[],xs=Ke.length;for(var Ul=0;Ul<xs;Ul++)w.push(Ke[Ul])}else if(pt==="justify"&&Bl.encoding==="Identity-H"){w=[],xs=Ke.length,zt=zt!==0?zt:Ya;for(var _i=0,Dr=0;Dr<xs;Dr++)if(Ws=Dr===0?Va(oe):-sn,Gs=Dr===0?Sn(T):_i,Dr<xs-1){var Bc=B((zt-is[Dr])/(Ke[Dr].split(" ").length-1)),nn=Ke[Dr].split(" ");w.push([nn[0]+" ",Gs,Ws]),_i=0;for(var an=1;an<nn.length;an++){var Yo=(ho(nn[an-1]+" "+nn[an])-ho(nn[an]))*Si+Bc;an==nn.length-1?w.push([nn[an],Yo,0]):w.push([nn[an]+" ",Yo,0]),_i-=Yo}}else w.push([Ke[Dr],Gs,Ws]);w.push(["",_i,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],xs=Ke.length,zt=zt!==0?zt:Ya,Dr=0;Dr<xs;Dr++)Ws=Dr===0?Va(oe):-sn,Gs=Dr===0?Sn(T):0,Dr<xs-1?Ja.push(J(B((zt-is[Dr])/(Ke[Dr].split(" ").length-1)))):Ja.push(0),w.push([Ke[Dr],Gs,Ws])}}(typeof ve.R2L=="boolean"?ve.R2L:je)===!0&&(w=uo(w,function(xr,yr,qr){return[xr.split("").reverse().join(""),yr,qr]})),Ve={text:w,x:T,y:oe,options:ve,mutex:{pdfEscape:Nn,activeFontKey:it,fonts:lt,activeFontSize:$e}},tr.publish("postProcessText",Ve),w=Ve.text,Xr=Ve.mutex.isHex||!1;var Li=lt[it].encoding;Li!=="WinAnsiEncoding"&&Li!=="StandardEncoding"||(w=uo(w,function(xr,yr,qr){return[Tc(xr),yr,qr]})),Ke=Oc(w),w=[];for(var Jo,fo,Qa,Xa=Array.isArray(Ke[0])?1:0,Pa="",Qo=function(xr,yr,qr){var zr="";return qr instanceof _t?(qr=typeof ve.angle=="number"?vn(qr,new _t(1,0,0,1,xr,yr)):vn(new _t(1,0,0,1,xr,yr),qr),M===E&&(qr=vn(new _t(1,0,0,-1,0,0),qr)),zr=qr.join(" ")+` Tm
`):zr=J(xr)+" "+J(yr)+` Td
`,zr},on=0;on<Ke.length;on++){switch(Pa="",Xa){case 1:Qa=(Xr?"<":"(")+Ke[on][0]+(Xr?">":")"),Jo=parseFloat(Ke[on][1]),fo=parseFloat(Ke[on][2]);break;case 0:Qa=(Xr?"<":"(")+Ke[on]+(Xr?">":")"),Jo=Sn(T),fo=Va(oe)}Ja!==void 0&&Ja[on]!==void 0&&(Pa=Ja[on]+` Tw
`),on===0?w.push(Pa+Qo(Jo,fo,Qr)+Qa):Xa===0?w.push(Pa+Qa):Xa===1&&w.push(Pa+Qo(Jo,fo,Qr)+Qa)}w=Xa===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var _a=`BT
/`;return _a+=it+" "+$e+` Tf
`,_a+=J($e*Ga)+` TL
`,_a+=sa+`
`,_a+=_s,_a+=w,me(_a+="ET"),N[it]=!0,ir};var ao=y.__private__.clip=y.clip=function(w){return me(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return ao("evenodd")},y.__private__.discardPath=y.discardPath=function(){return me("n"),this};var Na=y.__private__.isValidStyle=function(w){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(T=!0),T};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return Na(w)&&(m=w),this};var qo=y.__private__.getStyle=y.getStyle=function(w){var T=m;switch(w){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=w}return T},er=y.close=function(){return me("h"),this};y.stroke=function(){return me("S"),this},y.fill=function(w){return za("f",w),this},y.fillEvenOdd=function(w){return za("f*",w),this},y.fillStroke=function(w){return za("B",w),this},y.fillStrokeEvenOdd=function(w){return za("B*",w),this};var za=function(w,T){pr(T)==="object"?Ec(T,w):me(w)},zo=function(w){w===null||M===E&&w===void 0||(w=qo(w),me(w))};function Il(w,T,oe,ve,Ce){var Ve=new gd(T||this.boundingBox,oe||this.xStep,ve||this.yStep,this.gState,Ce||this.matrix);Ve.stream=this.stream;var Ke=w+"$$"+this.cloneIndex+++"$$";return Fs(Ke,Ve),Ve}var Ec=function(w,T){var oe=Rt[w.key],ve=Nt[oe];if(ve instanceof oc)me("q"),me(Dc(T)),ve.gState&&y.setGState(ve.gState),me(w.matrix.toString()+" cm"),me("/"+oe+" sh"),me("Q");else if(ve instanceof gd){var Ce=new _t(1,0,0,-1,0,Os());w.matrix&&(Ce=Ce.multiply(w.matrix||Xn),oe=Il.call(ve,w.key,w.boundingBox,w.xStep,w.yStep,Ce).id),me("q"),me("/Pattern cs"),me("/"+oe+" scn"),ve.gState&&y.setGState(ve.gState),me(T),me("Q")}},Dc=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$o=y.moveTo=function(w,T){return me(J(B(w))+" "+J(W(T))+" m"),this},$a=y.lineTo=function(w,T){return me(J(B(w))+" "+J(W(T))+" l"),this},ra=y.curveTo=function(w,T,oe,ve,Ce,Ve){return me([J(B(w)),J(W(T)),J(B(oe)),J(W(ve)),J(B(Ce)),J(W(Ve)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,T,oe,ve,Ce){if(isNaN(w)||isNaN(T)||isNaN(oe)||isNaN(ve)||!Na(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return M===P?this.lines([[oe-w,ve-T]],w,T,[1,1],Ce||"S"):this.lines([[oe-w,ve-T]],w,T,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,T,oe,ve,Ce,Ve){var Ke,ft,pt,Lt,zt,rr,_r,Qr,ir,as,Xr,_s;if(typeof w=="number"&&(_s=oe,oe=T,T=w,w=_s),ve=ve||[1,1],Ve=Ve||!1,isNaN(T)||isNaN(oe)||!Array.isArray(w)||!Array.isArray(ve)||!Na(Ce)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($o(T,oe),Ke=ve[0],ft=ve[1],Lt=w.length,as=T,Xr=oe,pt=0;pt<Lt;pt++)(zt=w[pt]).length===2?(as=zt[0]*Ke+as,Xr=zt[1]*ft+Xr,$a(as,Xr)):(rr=zt[0]*Ke+as,_r=zt[1]*ft+Xr,Qr=zt[2]*Ke+as,ir=zt[3]*ft+Xr,as=zt[4]*Ke+as,Xr=zt[5]*ft+Xr,ra(rr,_r,Qr,ir,as,Xr));return Ve&&er(),zo(Ce),this},y.path=function(w){for(var T=0;T<w.length;T++){var oe=w[T],ve=oe.c;switch(oe.op){case"m":$o(ve[0],ve[1]);break;case"l":$a(ve[0],ve[1]);break;case"c":ra.apply(this,ve);break;case"h":er()}}return this},y.__private__.rect=y.rect=function(w,T,oe,ve,Ce){if(isNaN(w)||isNaN(T)||isNaN(oe)||isNaN(ve)||!Na(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return M===P&&(ve=-ve),me([J(B(w)),J(W(T)),J(B(oe)),J(B(ve)),"re"].join(" ")),zo(Ce),this},y.__private__.triangle=y.triangle=function(w,T,oe,ve,Ce,Ve,Ke){if(isNaN(w)||isNaN(T)||isNaN(oe)||isNaN(ve)||isNaN(Ce)||isNaN(Ve)||!Na(Ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-w,ve-T],[Ce-oe,Ve-ve],[w-Ce,T-Ve]],w,T,[1,1],Ke,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,T,oe,ve,Ce,Ve,Ke){if(isNaN(w)||isNaN(T)||isNaN(oe)||isNaN(ve)||isNaN(Ce)||isNaN(Ve)||!Na(Ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*oe),Ve=Math.min(Ve,.5*ve),this.lines([[oe-2*Ce,0],[Ce*ft,0,Ce,Ve-Ve*ft,Ce,Ve],[0,ve-2*Ve],[0,Ve*ft,-Ce*ft,Ve,-Ce,Ve],[2*Ce-oe,0],[-Ce*ft,0,-Ce,-Ve*ft,-Ce,-Ve],[0,2*Ve-ve],[0,-Ve*ft,Ce*ft,-Ve,Ce,-Ve]],w+Ce,T,[1,1],Ke,!0),this},y.__private__.ellipse=y.ellipse=function(w,T,oe,ve,Ce){if(isNaN(w)||isNaN(T)||isNaN(oe)||isNaN(ve)||!Na(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*oe,Ke=4/3*(Math.SQRT2-1)*ve;return $o(w+oe,T),ra(w+oe,T-Ke,w+Ve,T-ve,w,T-ve),ra(w-Ve,T-ve,w-oe,T-Ke,w-oe,T),ra(w-oe,T+Ke,w-Ve,T+ve,w,T+ve),ra(w+Ve,T+ve,w+oe,T+Ke,w+oe,T),zo(Ce),this},y.__private__.circle=y.circle=function(w,T,oe,ve){if(isNaN(w)||isNaN(T)||isNaN(oe)||!Na(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,T,oe,oe,ve)},y.setFont=function(w,T,oe){return oe&&(T=X(T,oe)),it=Pc(w,T,{disableWarning:!1}),this};var ja=y.__private__.getFont=y.getFont=function(){return lt[Pc.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,T,oe={};for(w in xt)if(xt.hasOwnProperty(w))for(T in oe[w]=[],xt[w])xt[w].hasOwnProperty(T)&&oe[w].push(T);return oe},y.addFont=function(w,T,oe,ve,Ce){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(oe=X(oe,ve)),Bo.call(this,w,T,oe,Ce=Ce||"Identity-H")};var rn,Bn=t.lineWidth||.200025,It=y.__private__.getLineWidth=y.getLineWidth=function(){return Bn},io=y.__private__.setLineWidth=y.setLineWidth=function(w){return Bn=w,me(J(B(w))+" w"),this};y.__private__.setLineDash=At.API.setLineDash=At.API.setLineDashPattern=function(w,T){if(w=w||[],T=T||0,isNaN(T)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(oe){return J(B(oe))}).join(" "),T=J(B(T)),me("["+w+"] "+T+" d"),this};var Sa=y.__private__.getLineHeight=y.getLineHeight=function(){return $e*rn};y.__private__.getLineHeight=y.getLineHeight=function(){return $e*rn};var Od=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(rn=w),this},Ic=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return rn};Od(t.lineHeight);var Sn=y.__private__.getHorizontalCoordinate=function(w){return B(w)},Va=y.__private__.getVerticalCoordinate=function(w){return M===E?w:Ot[te].mediaBox.topRightY-Ot[te].mediaBox.bottomLeftY-B(w)},Fc=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return J(Sn(w))},Vo=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return J(Va(w))},oo=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return wa(oo)},y.__private__.setStrokeColor=y.setDrawColor=function(w,T,oe,ve){return oo=Ps({ch1:w,ch2:T,ch3:oe,ch4:ve,pdfColorType:"draw",precision:2}),me(oo),this};var Fl=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return wa(Fl)},y.__private__.setFillColor=y.setFillColor=function(w,T,oe,ve){return Fl=Ps({ch1:w,ch2:T,ch3:oe,ch4:ve,pdfColorType:"fill",precision:2}),me(Fl),this};var sa=t.textColor||"0 g",ka=y.__private__.getTextColor=y.getTextColor=function(){return wa(sa)};y.__private__.setTextColor=y.setTextColor=function(w,T,oe,ve){return sa=Ps({ch1:w,ch2:T,ch3:oe,ch4:ve,pdfColorType:"text",precision:3}),this};var na=t.charSpace,Ho=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(na||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return na=w,this};var Tl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var T=y.CapJoinStyles[w];if(T===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=T,me(T+" J"),this};var Ol=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var T=y.CapJoinStyles[w];if(T===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=T,me(T+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(J(B(w))+" M"),this},y.GState=If,y.setGState=function(w){(w=typeof w=="string"?Pt[Pr[w]]:Ha(null,w)).equals(jr)||(me("/"+w.id+" gs"),jr=w)};var Ha=function(w,T){if(!w||!Pr[w]){var oe=!1;for(var ve in Pt)if(Pt.hasOwnProperty(ve)&&Pt[ve].equals(T)){oe=!0;break}if(oe)T=Pt[ve];else{var Ce="GS"+(Object.keys(Pt).length+1).toString(10);Pt[Ce]=T,T.id=Ce}return w&&(Pr[w]=T.id),tr.publish("addGState",T),T}};y.addGState=function(w,T){return Ha(w,T),this},y.saveGraphicsState=function(){return me("q"),Gt.push({key:it,size:$e,color:sa}),this},y.restoreGraphicsState=function(){me("Q");var w=Gt.pop();return it=w.key,$e=w.size,sa=w.color,jr=null,this},y.setCurrentTransformationMatrix=function(w){return me(w.toString()+" cm"),this},y.comment=function(w){return me("#"+w),this};var Aa=function(w,T){var oe=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ve){isNaN(Ve)||(oe=parseFloat(Ve))}});var ve=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(Ve){isNaN(Ve)||(ve=parseFloat(Ve))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(Ve){Ce=Ve.toString()}}),this},lo=function(w,T,oe,ve){Aa.call(this,w,T),this.type="rect";var Ce=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(Ke){isNaN(Ke)||(Ce=parseFloat(Ke))}});var Ve=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(Ke){isNaN(Ke)||(Ve=parseFloat(Ke))}}),this},co=function(){this.page=Zt,this.currentPage=te,this.pages=ue.slice(0),this.pagesContext=Ot.slice(0),this.x=ot,this.y=Ut,this.matrix=qt,this.width=ji(te),this.height=Os(te),this.outputDestination=Xe,this.id="",this.objectNumber=-1};co.prototype.restore=function(){Zt=this.page,te=this.currentPage,Ot=this.pagesContext,ue=this.pages,ot=this.x,Ut=this.y,qt=this.matrix,Wo(te,this.width),kn(te,this.height),Xe=this.outputDestination};var Un=function(w,T,oe,ve,Ce){Tn.push(new co),Zt=te=0,ue=[],ot=w,Ut=T,qt=Ce,Ni([oe,ve])};for(var Wa in y.beginFormObject=function(w,T,oe,ve,Ce){return Un(w,T,oe,ve,Ce),this},y.endFormObject=function(w){return(function(T){if(va[T])Tn.pop().restore();else{var oe=new co,ve="Xo"+(Object.keys(Cs).length+1).toString(10);oe.id=ve,va[T]=ve,Cs[ve]=oe,tr.publish("addFormObject",oe),Tn.pop().restore()}})(w),this},y.doFormObject=function(w,T){var oe=Cs[va[w]];return me("q"),me(T.toString()+" cm"),me("/"+oe.id+" Do"),me("Q"),this},y.getFormObject=function(w){var T=Cs[va[w]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},y.save=function(w,T){return w=w||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(ic(ta(Mn()),w),typeof ic.unload=="function"&&Bt.setTimeout&&setTimeout(ic.unload,911),this):new Promise(function(oe,ve){try{var Ce=ic(ta(Mn()),w);typeof ic.unload=="function"&&Bt.setTimeout&&setTimeout(ic.unload,911),oe(Ce)}catch(Ve){ve(Ve.message)}})},At.API)At.API.hasOwnProperty(Wa)&&(Wa==="events"&&At.API.events.length?(function(w,T){var oe,ve,Ce;for(Ce=T.length-1;Ce!==-1;Ce--)oe=T[Ce][0],ve=T[Ce][1],w.subscribe.apply(w,[oe].concat(typeof ve=="function"?[ve]:ve))})(tr,At.API.events):y[Wa]=At.API[Wa]);var ji=y.getPageWidth=function(w){return(Ot[w=w||te].mediaBox.topRightX-Ot[w].mediaBox.bottomLeftX)/wt},Wo=y.setPageWidth=function(w,T){Ot[w].mediaBox.topRightX=T*wt+Ot[w].mediaBox.bottomLeftX},Os=y.getPageHeight=function(w){return(Ot[w=w||te].mediaBox.topRightY-Ot[w].mediaBox.bottomLeftY)/wt},kn=y.setPageHeight=function(w,T){Ot[w].mediaBox.topRightY=T*wt+Ot[w].mediaBox.bottomLeftY};return y.internal={pdfEscape:Nn,getStyle:qo,getFont:ja,getFontSize:ce,getCharSpace:Ho,getTextColor:ka,getLineHeight:Sa,getLineHeightFactor:Ic,getLineWidth:It,write:Ye,getHorizontalCoordinate:Sn,getVerticalCoordinate:Va,getCoordinateString:Fc,getVerticalCoordinateString:Vo,collections:{},newObject:gr,newAdditionalObject:qa,newObjectDeferred:Br,newObjectDeferredBegin:Yr,getFilters:Rn,putStream:wn,events:tr,scaleFactor:wt,pageSize:{getWidth:function(){return ji(te)},setWidth:function(w){Wo(te,w)},getHeight:function(){return Os(te)},setHeight:function(w){kn(te,w)}},encryptionOptions:p,encryption:Ur,getEncryptor:function(w){return p!==null?Ur.encryptor(w,0):function(T){return T}},output:tn,getNumberOfPages:jn,pages:ue,out:me,f2:I,f3:U,getPageInfo:no,getPageInfoByObjId:Lc,getCurrentPageInfo:Dl,getPDFVersion:C,Point:Aa,Rectangle:lo,Matrix:_t,hasHotfix:so},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return ji(te)},set:function(w){Wo(te,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Os(te)},set:function(w){kn(te,w)},enumerable:!0,configurable:!0}),(function(w){for(var T=0,oe=et.length;T<oe;T++){var ve=Bo.call(this,w[T][0],w[T][1],w[T][2],et[T][3],!0);v===!1&&(N[ve]=!0);var Ce=w[T][0].split("-");Ac({id:ve,fontName:Ce[0],fontStyle:Ce[1]||""})}tr.publish("addFonts",{fonts:lt,dictionary:xt})}).call(y,et),it="F1",Cc(o,s),tr.publish("initialized"),y}fd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},fd.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fd.prototype.hexToBytes=function(t){for(var r=[],s=0;s<t.length;s+=2)r.push(String.fromCharCode(parseInt(t.substr(s,2),16)));return r.join("")},fd.prototype.processOwnerPassword=function(t,r){return p0(m0(r).substr(0,5),t)},fd.prototype.encryptor=function(t,r){var s=m0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(a){return p0(s,a)}},If.prototype.equals=function(t){var r,s="id,objectNumber,equals";if(!t||pr(t)!==pr(this))return!1;var a=0;for(r in this)if(!(s.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;a++}for(r in t)t.hasOwnProperty(r)&&s.indexOf(r)<0&&a--;return a===0},At.API={events:[]},At.version="3.0.2";var ss=At.API,K0=1,kc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ud=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(t){return t.toFixed(2)},yl=function(t){return t.toFixed(5)};ss.__acroform__={};var Qn=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},l1=function(t){return t*K0},Bi=function(t){var r=new Qb,s=bt.internal.getHeight(t)||0,a=bt.internal.getWidth(t)||0;return r.BBox=[0,0,Number(Ht(a)),Number(Ht(s))],r},o8=ss.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<r},l8=ss.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<r)},c8=ss.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<r?1:0},us=ss.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return c8(t,r-1)},hs=ss.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return o8(t,r-1)},fs=ss.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return l8(t,r-1)},d8=ss.__acroform__.calculateCoordinates=function(t,r){var s=r.internal.getHorizontalCoordinate,a=r.internal.getVerticalCoordinate,o=t[0],l=t[1],d=t[2],u=t[3],h={};return h.lowerLeft_X=s(o)||0,h.lowerLeft_Y=a(l+u)||0,h.upperRight_X=s(o+d)||0,h.upperRight_Y=a(l)||0,[Number(Ht(h.lowerLeft_X)),Number(Ht(h.lowerLeft_Y)),Number(Ht(h.upperRight_X)),Number(Ht(h.upperRight_Y))]},u8=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],s=t._V||t.DV,a=g0(t,s),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+o+" "+Ht(a.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC");var l=Bi(t);return l.scope=t.scope,l.stream=r.join(`
`),l}},g0=function(t,r){var s=t.fontSize===0?t.maxFontSize:t.fontSize,a={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=t.multiline?o.map(function(I){return I.split(`
`)}):o.map(function(I){return[I]});var l=s,d=bt.internal.getHeight(t)||0;d=d<0?-d:d;var u=bt.internal.getWidth(t)||0;u=u<0?-u:u;var h=function(I,U,B){if(I+1<o.length){var W=U+" "+o[I+1][0];return Hh(W,t,B).width<=u-4}return!1};l++;e:for(;l>0;){r="",l--;var m,p,v=Hh("3",t,l).height,N=t.multiline?d-l:(d-v)/2,y=N+=2,k=0,C=0,S=0;if(l<=0){r=`(...) Tj
`,r+="% Width of Text: "+Hh(r,t,l=12).width+", FieldWidth:"+u+`
`;break}for(var L="",P=0,E=0;E<o.length;E++)if(o.hasOwnProperty(E)){var M=!1;if(o[E].length!==1&&S!==o[E].length-1){if((v+2)*(P+2)+2>d)continue e;L+=o[E][S],M=!0,C=E,E--}else{L=(L+=o[E][S]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var z=parseInt(E),he=h(z,L,l),X=E>=o.length-1;if(he&&!X){L+=" ",S=0;continue}if(he||X){if(X)C=z;else if(t.multiline&&(v+2)*(P+2)+2>d)continue e}else{if(!t.multiline||(v+2)*(P+2)+2>d)continue e;C=z}}for(var J="",G=k;G<=C;G++){var pe=o[G];if(t.multiline){if(G===C){J+=pe[S]+" ",S=(S+1)%pe.length;continue}if(G===k){J+=pe[pe.length-1]+" ";continue}}J+=pe[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,p=Hh(J,t,l).width,t.textAlign){case"right":m=u-p-2;break;case"center":m=(u-p)/2;break;default:m=2}r+=Ht(m)+" "+Ht(y)+` Td
`,r+="("+kc(J)+`) Tj
`,r+=-Ht(m)+` 0 Td
`,y=-(l+2),p=0,k=M?C:C+1,P++,L=""}break}return a.text=r,a.fontSize=l,a},Hh=function(t,r,s){var a=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(t,{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:r.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:o}},h8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},f8=function(t,r){var s={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(a){return a.type===s.type&&a.object===s.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(s)},m8=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(xi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(h8)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K0=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Xb,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];l.objId=void 0,l.hasAnnotation&&f8(l,s)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(s){(function(a,o){var l=!a;for(var d in a||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var u=a[d],h=[],m=u.Rect;if(u.Rect&&(u.Rect=d8(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=bt.createDefaultAppearanceStream(u),pr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=m,u.hasAppearanceStream&&!u.appearanceStreamContent){var p=u8(u);h.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(u.appearanceStreamContent){var v="";for(var N in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(N)){var y=u.appearanceStreamContent[N];if(v+="/"+N+" ",v+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var d in y)if(y.hasOwnProperty(d)){var k=y[d];typeof k=="function"&&(k=k.call(o,u)),v+="/"+d+" "+k+" ",o.internal.acroformPlugin.xForms.indexOf(k)>=0||o.internal.acroformPlugin.xForms.push(k)}}else typeof(k=y)=="function"&&(k=k.call(o,u)),v+="/"+d+" "+k,o.internal.acroformPlugin.xForms.indexOf(k)>=0||o.internal.acroformPlugin.xForms.push(k);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:u.objId}),o.internal.out("endobj")}l&&(function(C,S){for(var L in C)if(C.hasOwnProperty(L)){var P=L,E=C[L];S.internal.newObjectDeferredBegin(E.objId,!0),pr(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete C[P]}})(o.internal.acroformPlugin.xForms,o)})(s,t)}),t.internal.acroformPlugin.isInitialized=!0}},Jb=ss.__acroform__.arrayToPdfArray=function(t,r,s){var a=function(d){return d};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),pr(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(r!==void 0&&s&&(a=s.internal.getEncryptor(r)),o+="("+kc(a(t[l].toString()))+")"):o+=t[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Lp=function(t,r,s){var a=function(o){return o};return r!==void 0&&s&&(a=s.internal.getEncryptor(r)),(t=t||"").toString(),"("+kc(a(t))+")"},Hi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hi.prototype.toString=function(){return this.objId+" 0 R"},Hi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Hi.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var s in r)if(Object.getOwnPropertyDescriptor(this,r[s]).configurable===!1){var a=r[s],o=this[a];o&&(Array.isArray(o)?t.push({key:a,value:Jb(o,this.objId,this.scope)}):o instanceof Hi?(o.scope=this.scope,t.push({key:a,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:a,value:o}))}return t};var Qb=function(){Hi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){t=s.trim()},get:function(){return t||null}})};Qn(Qb,Hi);var Xb=function(){Hi.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var s=function(a){return a};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+kc(s(t))+")"}},set:function(s){t=s}})};Qn(Xb,Hi);var xi=function t(){Hi.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');r=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!us(r,3)},set:function(L){L?this.F=hs(r,3):this.F=fs(r,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');s=L}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(L){a=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(L){a[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(L){a[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(L){a[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(L){a[3]=L}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Ff)return;l="FieldObject"+t.FieldNum++}var L=function(P){return P};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+kc(L(l))+")"},set:function(L){l=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(L){l=L}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(L){d=L}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(L){u=L}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(L){h=L}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/K0:m},set:function(L){m=L}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(L){p=L}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Ff||this instanceof fc))return Lp(v,this.objId,this.scope)},set:function(L){L=L.toString(),v=L}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Vs==0?Lp(N,this.objId,this.scope):N},set:function(L){L=L.toString(),N=this instanceof Vs==0?L.substr(0,1)==="("?ud(L.substr(1,L.length-2)):ud(L):L}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vs==1?ud(N.substr(1,N.length-1)):N},set:function(L){L=L.toString(),N=this instanceof Vs==1?"/"+L:L}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Vs==0?Lp(y,this.objId,this.scope):y},set:function(L){L=L.toString(),y=this instanceof Vs==0?L.substr(0,1)==="("?ud(L.substr(1,L.length-2)):ud(L):L}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vs==1?ud(y.substr(1,y.length-1)):y},set:function(L){L=L.toString(),y=this instanceof Vs==1?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(L){L=!!L,C=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(L){k=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,1)},set:function(L){L?this.Ff=hs(this.Ff,1):this.Ff=fs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,2)},set:function(L){L?this.Ff=hs(this.Ff,2):this.Ff=fs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,3)},set:function(L){L?this.Ff=hs(this.Ff,3):this.Ff=fs(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');S=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(S){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};Qn(xi,Hi);var Nd=function(){xi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){t=s}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Jb(r,this.objId,this.scope)},set:function(s){var a,o;o=[],typeof(a=s)=="string"&&(o=(function(l,d,u){u||(u=1);for(var h,m=[];h=d.exec(l);)m.push(h[u]);return m})(a,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(s){r=s,this.sort&&r.sort()},this.addOption=function(s){s=(s=s||"").toString(),r.push(s),this.sort&&r.sort()},this.removeOption=function(s,a){for(a=a||!1,s=(s=s||"").toString();r.indexOf(s)!==-1&&(r.splice(r.indexOf(s),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,18)},set:function(s){s?this.Ff=hs(this.Ff,18):this.Ff=fs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=hs(this.Ff,19):this.Ff=fs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,20)},set:function(s){s?(this.Ff=hs(this.Ff,20),r.sort()):this.Ff=fs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,22)},set:function(s){s?this.Ff=hs(this.Ff,22):this.Ff=fs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(s){s?this.Ff=hs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,27)},set:function(s){s?this.Ff=hs(this.Ff,27):this.Ff=fs(this.Ff,27)}}),this.hasAppearanceStream=!1};Qn(Nd,xi);var jd=function(){Nd.call(this),this.fontName="helvetica",this.combo=!1};Qn(jd,Nd);var Sd=function(){jd.call(this),this.combo=!0};Qn(Sd,jd);var ff=function(){Sd.call(this),this.edit=!0};Qn(ff,Sd);var Vs=function(){xi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,15)},set:function(s){s?this.Ff=hs(this.Ff,15):this.Ff=fs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,16)},set:function(s){s?this.Ff=hs(this.Ff,16):this.Ff=fs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,17)},set:function(s){s?this.Ff=hs(this.Ff,17):this.Ff=fs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(s){s?this.Ff=hs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+kc(s(r[a]))+")");return o.push(">>"),o.join(`
`)}},set:function(s){pr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}})};Qn(Vs,xi);var mf=function(){Vs.call(this),this.pushButton=!0};Qn(mf,Vs);var kd=function(){Vs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};Qn(kd,Vs);var Ff=function(){var t,r;xi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var s,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+kc(o(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(o){pr(o)==="object"&&(a=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(o){typeof o=="string"&&(a.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(o){s="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qn(Ff,xi),kd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var s=this.Kids[r];s.appearanceStreamContent=t.createAppearanceStream(s.optionName),s.caption=t.getCA()}},kd.prototype.createOption=function(t){var r=new Ff;return r.Parent=this,r.optionName=t,this.Kids.push(r),p8.call(this.scope,r),r};var pf=function(){Vs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};Qn(pf,Vs);var fc=function(){xi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,13)},set:function(r){r?this.Ff=hs(this.Ff,13):this.Ff=fs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,21)},set:function(r){r?this.Ff=hs(this.Ff,21):this.Ff=fs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(r){r?this.Ff=hs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,24)},set:function(r){r?this.Ff=hs(this.Ff,24):this.Ff=fs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,25)},set:function(r){r?this.Ff=hs(this.Ff,25):this.Ff=fs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(r){r?this.Ff=hs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qn(fc,xi);var gf=function(){fc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,14)},set:function(t){t?this.Ff=hs(this.Ff,14):this.Ff=fs(this.Ff,14)}}),this.password=!0};Qn(gf,fc);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=[],a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=g0(t,t.caption);return s.push("0.749023 g"),s.push("0 0 "+Ht(bt.internal.getWidth(t))+" "+Ht(bt.internal.getHeight(t))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+a+" "+Ht(l.fontSize)+" Tf "+o),s.push("BT"),s.push(l.text),s.push("ET"),s.push("Q"),s.push("EMC"),r.stream=s.join(`
`),r},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=[],l=bt.internal.getHeight(t),d=bt.internal.getWidth(t),u=g0(t,t.caption);return o.push("1 g"),o.push("0 0 "+Ht(d)+" "+Ht(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ht(d-1)+" "+Ht(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+s+" "+Ht(u.fontSize)+" Tf "+a),o.push(u.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Ht(bt.internal.getWidth(t))+" "+Ht(bt.internal.getHeight(t))+" re"),s.push("f"),r.stream=s.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=bt.RadioButton.Circle.YesNormal,r.D[t]=bt.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var s=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=bt.internal.Bezier_C,l=Number((a*o).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+yl(bt.internal.getWidth(t)/2)+" "+yl(bt.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),s.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),s.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),s.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*bt.internal.Bezier_C).toFixed(5)),d=Number((a*bt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+yl(bt.internal.getWidth(t)/2)+" "+yl(bt.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+yl(bt.internal.getWidth(t)/2)+" "+yl(bt.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),s.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),s.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),s.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*bt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+yl(bt.internal.getWidth(t)/2)+" "+yl(bt.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=bt.RadioButton.Cross.YesNormal,r.D[t]=bt.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var s=[],a=bt.internal.calculateCross(t);return s.push("q"),s.push("1 1 "+Ht(bt.internal.getWidth(t)-2)+" "+Ht(bt.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(Ht(a.x1.x)+" "+Ht(a.x1.y)+" m"),s.push(Ht(a.x2.x)+" "+Ht(a.x2.y)+" l"),s.push(Ht(a.x4.x)+" "+Ht(a.x4.y)+" m"),s.push(Ht(a.x3.x)+" "+Ht(a.x3.y)+" l"),s.push("s"),s.push("Q"),r.stream=s.join(`
`),r},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=bt.internal.calculateCross(t),a=[];return a.push("0.749023 g"),a.push("0 0 "+Ht(bt.internal.getWidth(t))+" "+Ht(bt.internal.getHeight(t))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Ht(bt.internal.getWidth(t)-2)+" "+Ht(bt.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(Ht(s.x1.x)+" "+Ht(s.x1.y)+" m"),a.push(Ht(s.x2.x)+" "+Ht(s.x2.y)+" l"),a.push(Ht(s.x4.x)+" "+Ht(s.x4.y)+" m"),a.push(Ht(s.x3.x)+" "+Ht(s.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Ht(bt.internal.getWidth(t))+" "+Ht(bt.internal.getHeight(t))+" re"),s.push("f"),r.stream=s.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+s}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=bt.internal.getWidth(t),s=bt.internal.getHeight(t),a=Math.min(r,s);return{x1:{x:(r-a)/2,y:(s-a)/2+a},x2:{x:(r-a)/2+a,y:(s-a)/2},x3:{x:(r-a)/2,y:(s-a)/2},x4:{x:(r-a)/2+a,y:(s-a)/2+a}}}},bt.internal.getWidth=function(t){var r=0;return pr(t)==="object"&&(r=l1(t.Rect[2])),r},bt.internal.getHeight=function(t){var r=0;return pr(t)==="object"&&(r=l1(t.Rect[3])),r};var p8=ss.addField=function(t){if(m8(this,t),!(t instanceof xi))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ss.AcroFormChoiceField=Nd,ss.AcroFormListBox=jd,ss.AcroFormComboBox=Sd,ss.AcroFormEditBox=ff,ss.AcroFormButton=Vs,ss.AcroFormPushButton=mf,ss.AcroFormRadioButton=kd,ss.AcroFormCheckBox=pf,ss.AcroFormTextField=fc,ss.AcroFormPasswordField=gf,ss.AcroFormAppearance=bt,ss.AcroForm={ChoiceField:Nd,ListBox:jd,ComboBox:Sd,EditBox:ff,Button:Vs,PushButton:mf,RadioButton:kd,CheckBox:pf,TextField:fc,PasswordField:gf,Appearance:bt},At.AcroForm={ChoiceField:Nd,ListBox:jd,ComboBox:Sd,EditBox:ff,Button:Vs,PushButton:mf,RadioButton:kd,CheckBox:pf,TextField:fc,PasswordField:gf,Appearance:bt};At.AcroForm;function Zb(t){return t.reduce(function(r,s,a){return r[s]=a,r},{})}(function(t){var r="addImage_";t.__addimage__={};var s="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(I,U){var B,W,Y,le,F,Z=s;if((U=U||s)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(he(I))for(F in a)for(Y=a[F],B=0;B<Y.length;B+=1){for(le=!0,W=0;W<Y[B].length;W+=1)if(Y[B][W]!==void 0&&Y[B][W]!==I[W]){le=!1;break}if(le===!0){Z=F;break}}else for(F in a)for(Y=a[F],B=0;B<Y.length;B+=1){for(le=!0,W=0;W<Y[B].length;W+=1)if(Y[B][W]!==void 0&&Y[B][W]!==I.charCodeAt(W)){le=!1;break}if(le===!0){Z=F;break}}return Z===s&&U!==s&&(Z=U),Z},l=function I(U){for(var B=this.internal.write,W=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:U.width}),le.push({key:"Height",value:U.height}),U.colorSpace===L.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===L.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var F="",Z=0,be=U.transparency.length;Z<be;Z++)F+=U.transparency[Z]+" "+U.transparency[Z]+" ";le.push({key:"Mask",value:"["+F+"]"})}U.sMask!==void 0&&le.push({key:"SMask",value:U.objectId+1+" 0 R"});var Ae=U.filter!==void 0?["/"+U.filter]:void 0;if(W({data:U.data,additionalKeyValues:le,alreadyAppliedFilters:Ae,objectId:U.objectId}),B("endobj"),"sMask"in U&&U.sMask!==void 0){var ee=(U.predictor!=null?"/Predictor "+U.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+U.width,D={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:ee,data:U.sMask};"filter"in U&&(D.filter=U.filter),I.call(this,D)}if(U.colorSpace===L.INDEXED){var te=this.internal.newObject();W({data:J(new Uint8Array(U.palette)),objectId:te}),B("endobj")}},d=function(){var I=this.internal.collections[r+"images"];for(var U in I)l.call(this,I[U])},u=function(){var I,U=this.internal.collections[r+"images"],B=this.internal.write;for(var W in U)B("/I"+(I=U[W]).index,I.objectId,"0","R")},h=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var I=this.internal.collections[r+"images"];return h.call(this),I},p=function(){return Object.keys(this.internal.collections[r+"images"]).length},v=function(I){return typeof t["process"+I.toUpperCase()]=="function"},N=function(I){return pr(I)==="object"&&I.nodeType===1},y=function(I,U){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return hf(unescape(B).split("base64,").pop());var W=t.loadFile(B,!0);if(W!==void 0)return W}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var Y;switch(U){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;default:Y="image/jpeg"}return hf(I.toDataURL(Y,1).split("base64,").pop())}},k=function(I){var U=this.internal.collections[r+"images"];if(U){for(var B in U)if(I===U[B].alias)return U[B]}},C=function(I,U,B){return I||U||(I=-96,U=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),U<0&&(U=-1*B.height*72/U/this.internal.scaleFactor),I===0&&(I=U*B.width/B.height),U===0&&(U=I*B.height/B.width),[I,U]},S=function(I,U,B,W,Y,le){var F=C.call(this,B,W,Y),Z=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,Ae=m.call(this);if(B=F[0],W=F[1],Ae[Y.index]=Y,le){le*=Math.PI/180;var ee=Math.cos(le),D=Math.sin(le),te=function(fe){return fe.toFixed(4)},se=[te(ee),te(D),te(-1*D),te(ee),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,Z(I),be(U+W),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([Z(B),"0","0",Z(W),"0","0","cm"].join(" "))):this.internal.write([Z(B),"0","0",Z(W),Z(I),be(U+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},L=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=t.__addimage__.sHashCode=function(I){var U,B,W=0;if(typeof I=="string")for(B=I.length,U=0;U<B;U++)W=(W<<5)-W+I.charCodeAt(U),W|=0;else if(he(I))for(B=I.byteLength/2,U=0;U<B;U++)W=(W<<5)-W+I[U],W|=0;return W},M=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var U=!0;return I.length===0&&(U=!1),I.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(U=!1),U},z=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var U=I.indexOf(",");return U<0?null:I.substring(0,U).trim().endsWith("base64")?I.substring(U+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var he=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},X=t.__addimage__.binaryStringToUint8Array=function(I){for(var U=I.length,B=new Uint8Array(U),W=0;W<U;W++)B[W]=I.charCodeAt(W);return B},J=t.__addimage__.arrayBufferToBinaryString=function(I){for(var U="",B=he(I)?I:new Uint8Array(I),W=0;W<B.length;W+=8192)U+=String.fromCharCode.apply(null,B.subarray(W,W+8192));return U};t.addImage=function(){var I,U,B,W,Y,le,F,Z,be;if(typeof arguments[1]=="number"?(U=s,B=arguments[1],W=arguments[2],Y=arguments[3],le=arguments[4],F=arguments[5],Z=arguments[6],be=arguments[7]):(U=arguments[1],B=arguments[2],W=arguments[3],Y=arguments[4],le=arguments[5],F=arguments[6],Z=arguments[7],be=arguments[8]),pr(I=arguments[0])==="object"&&!N(I)&&"imageData"in I){var Ae=I;I=Ae.imageData,U=Ae.format||U||s,B=Ae.x||B||0,W=Ae.y||W||0,Y=Ae.w||Ae.width||Y,le=Ae.h||Ae.height||le,F=Ae.alias||F,Z=Ae.compression||Z,be=Ae.rotation||Ae.angle||be}var ee=this.internal.getFilters();if(Z===void 0&&ee.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(B)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var D=G.call(this,I,U,F,Z);return S.call(this,B,W,Y,le,D,be),this};var G=function(I,U,B,W){var Y,le,F;if(typeof I=="string"&&o(I)===s){I=unescape(I);var Z=pe(I,!1);(Z!==""||(Z=t.loadFile(I,!0))!==void 0)&&(I=Z)}if(N(I)&&(I=y(I,U)),U=o(I,U),!v(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((F=B)==null||F.length===0)&&(B=(function(be){return typeof be=="string"||he(be)?E(be):he(be.data)?E(be.data):null})(I)),(Y=k.call(this,B))||(I instanceof Uint8Array||U==="RGBA"||(le=I,I=X(I)),Y=this["process"+U.toUpperCase()](I,p.call(this),B,(function(be){return be&&typeof be=="string"&&(be=be.toUpperCase()),be in t.image_compression?be:P.NONE})(W),le)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},pe=t.__addimage__.convertBase64ToBinaryString=function(I,U){U=typeof U!="boolean"||U;var B,W="";if(typeof I=="string"){var Y;B=(Y=z(I))!==null&&Y!==void 0?Y:I;try{W=hf(B)}catch(le){if(U)throw M(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};t.getImageProperties=function(I){var U,B,W="";if(N(I)&&(I=y(I)),typeof I=="string"&&o(I)===s&&((W=pe(I,!1))===""&&(W=t.loadFile(I)||""),I=W),B=o(I),!v(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(I instanceof Uint8Array||(I=X(I)),!(U=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=B,U}})(At.API),(function(t){var r=function(s){if(s!==void 0&&s!="")return!0};At.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(s){for(var a,o,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(s.objId),m=s.pageContext.annotations,p=!1,v=0;v<m.length&&!p;v++)switch((a=m[v]).type){case"link":(r(a.options.url)||r(a.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var N=0;N<m.length;N++){a=m[N];var y=this.internal.pdfEscape,k=this.internal.getEncryptor(s.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(C.objId),P=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+y(L(a.contents))+")",l+=" /Popup "+S.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+y(L(P))+") >>",C.content=l;var E=C.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+d(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+E,a.open&&(l+=" /Open true"),l+=" >>",S.content=l,this.internal.write(C.objId,"0 R",S.objId,"0 R");break;case"freetext":o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var M=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+y(k(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var z=this.annotations._nameMap[a.options.name];a.options.pageNumber=z.page,a.options.top=z.y}else a.options.top||(a.options.top=0);if(o="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+y(k(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;default:var he=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+he+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(s){var a=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":a.pageContext.annotations.push(s)}},t.link=function(s,a,o,l,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(s),y:m(a),w:h(s+o),h:m(a+l)},options:d,type:"link"})},t.textWithLink=function(s,a,o,l){var d,u,h=this.getTextWidth(s),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var p=this.splitTextToSize(s,u).length;d=Math.ceil(m*p)}else u=h,d=m;return this.text(s,a,o,l),o+=.2*m,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,o-m,u,d,l),h},t.getTextWidth=function(s){var a=this.internal.getFontSize();return this.getStringUnitWidth(s)*a/this.internal.scaleFactor}})(At.API),(function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(C){return r[C.charCodeAt(0)]!==void 0},d=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},u=t.__arabicParser__.isArabicEndLetter=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(C){return d(C)&&o.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length==4},v=t.__arabicParser__.resolveLigatures=function(C){var S=0,L=s,P="",E=0;for(S=0;S<C.length;S+=1)L[C.charCodeAt(S)]!==void 0?(E++,typeof(L=L[C.charCodeAt(S)])=="number"&&(P+=String.fromCharCode(L),L=s,E=0),S===C.length-1&&(L=s,P+=C.charAt(S-(E-1)),S-=E-1,E=0)):(L=s,P+=C.charAt(S-E),S-=E,E=0);return P};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&a[C.charCodeAt(0)]!==void 0};var N=t.__arabicParser__.getCorrectForm=function(C,S,L){return d(C)?l(C)===!1?-1:!m(C)||!d(S)&&!d(L)||!d(L)&&u(S)||u(C)&&!d(S)||u(C)&&h(S)||u(C)&&u(S)?0:p(C)&&d(S)&&!u(S)&&d(L)&&m(L)?3:u(C)||!d(L)?1:2:-1},y=function(C){var S=0,L=0,P=0,E="",M="",z="",he=(C=C||"").split("\\s+"),X=[];for(S=0;S<he.length;S+=1){for(X.push(""),L=0;L<he[S].length;L+=1)E=he[S][L],M=he[S][L-1],z=he[S][L+1],d(E)?(P=N(E,M,z),X[S]+=P!==-1?String.fromCharCode(r[E.charCodeAt(0)][P]):E):X[S]+=E;X[S]=v(X[S])}return X.join(" ")},k=t.__arabicParser__.processArabic=t.processArabic=function(){var C,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(S)){var P=0;for(L=[],P=0;P<S.length;P+=1)Array.isArray(S[P])?L.push([y(S[P][0]),S[P][1],S[P][2]]):L.push([y(S[P])]);C=L}else C=y(S);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",k])})(At.API),At.API.autoPrint=function(t){var r;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(t){var r=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(u){s=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(s,a){var o;if((s=s||"2d")!=="2d")return null;for(o in a)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=a[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(At.API),(function(t){var r={left:0,top:0,bottom:0,right:0},s=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(C){m=C}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(C){N=C}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(C){k=C}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,m){a.call(this);var p=(m=m||{}).fontSize||this.getFontSize(),v=m.font||this.getFont(),N=m.scaleFactor||this.internal.scaleFactor,y=0,k=0,C=0,S=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var L=m.maxWidth;L>0?typeof h=="string"?h=this.splitTextToSize(h,L):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(E,M){return E.concat(S.splitTextToSize(M,L))},[])):h=Array.isArray(h)?h:[h];for(var P=0;P<h.length;P++)y<(C=this.getStringUnitWidth(h[P],{font:v})*p)&&(y=C);return y!==0&&(k=h.length),{w:y/=N,h:Math.max((k*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/N,0)}},t.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=t.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var m=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,v=this.internal.__cell__.margins||r,N=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===h.lineNumber?(h.x=(m.x||0)+(m.width||0),h.y=m.y||0):m.y+m.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,y&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=m.y+m.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,s===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};t.table=function(h,m,p,v,N){if(a.call(this),!p)throw new Error("No data for PDF table.");var y,k,C,S,L=[],P=[],E=[],M={},z={},he=[],X=[],J=(N=N||{}).autoSize||!1,G=N.printHeaders!==!1,pe=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,I=N.margins||Object.assign({width:this.getPageWidth()},r),U=typeof N.padding=="number"?N.padding:3,B=N.headerBackgroundColor||"#c8c8c8",W=N.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=G,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=W,this.setFontSize(pe),v==null)P=L=Object.keys(p[0]),E=L.map(function(){return"left"});else if(Array.isArray(v)&&pr(v[0])==="object")for(L=v.map(function(Ae){return Ae.name}),P=v.map(function(Ae){return Ae.prompt||Ae.name||""}),E=v.map(function(Ae){return Ae.align||"left"}),y=0;y<v.length;y+=1)z[v[y].name]=.7499990551181103*v[y].width;else Array.isArray(v)&&typeof v[0]=="string"&&(P=L=v,E=L.map(function(){return"left"}));if(J||Array.isArray(v)&&typeof v[0]=="string")for(y=0;y<L.length;y+=1){for(M[S=L[y]]=p.map(function(Ae){return Ae[S]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(P[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=M[S],this.setFont(void 0,"normal"),C=0;C<k.length;C+=1)he.push(this.getTextDimensions(k[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[S]=Math.max.apply(null,he)+U+U,he=[]}if(G){var Y={};for(y=0;y<L.length;y+=1)Y[L[y]]={},Y[L[y]].text=P[y],Y[L[y]].align=E[y];var le=u.call(this,Y,z);X=L.map(function(Ae){return new l(h,m,z[Ae],le,Y[Ae].text,void 0,Y[Ae].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var F=v.reduce(function(Ae,ee){return Ae[ee.name]=ee.align,Ae},{});for(y=0;y<p.length;y+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:y,data:p[y]},this);var Z=u.call(this,p[y],z);for(C=0;C<L.length;C+=1){var be=p[y][L[C]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:y,col:C,data:be},this),d.call(this,new l(h,m,z[L[C]],Z,be,y+2,F[L[C]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=m,this};var u=function(h,m){var p=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(y){var k=h[y];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,m[y]-p-p)},this).map(function(y){return this.getLineHeightFactor()*y.length*v/N+p+p},this).reduce(function(y,k){return Math.max(y,k)},0)};t.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,m){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){p=this.internal.__cell__.tableHeaderRow[y].clone(),m&&(p.y=this.internal.__cell__.margins.top||0,N.push(p)),p.lineNumber=h;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,p),this.setTextColor(k)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),s=!1}})(At.API);var ev={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],x0=Zb(tv),rv=[100,200,300,400,500,600,700,800,900],g8=Zb(rv);function Ep(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),s=(function(l){return ev[l=l||"normal"]?l:"normal"})(t.style),a=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(t.weight),o=(function(l){return typeof x0[l=l||"normal"]=="number"?l:"normal"})(t.stretch);return{family:r,style:s,weight:a,stretch:o,src:t.src||[],ref:t.ref||{name:r,style:[o,s,a].join(" ")}}}function c1(t,r,s,a){var o;for(o=s;o>=0&&o<r.length;o+=a)if(t[r[o]])return t[r[o]];for(o=s;o>=0&&o<r.length;o-=a)if(t[r[o]])return t[r[o]]}var x8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},d1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function u1(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function h1(t){return t.trimLeft()}function y8(t,r){for(var s=0;s<t.length;){if(t.charAt(s)===r)return[t.substring(0,s),t.substring(s+1)];s+=1}return null}function b8(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var Wh,f1,m1,hd,Gh,p1,g1,x1,Dp=["times"];function y1(t,r,s,a){var o=4,l=v1;switch(a){case At.API.image_compression.FAST:o=1,l=b1;break;case At.API.image_compression.MEDIUM:o=6,l=w1;break;case At.API.image_compression.SLOW:o=9,l=N1}t=(function(u,h,m,p){for(var v,N=u.length/h,y=new Uint8Array(u.length+N),k=[v8,b1,v1,w1,N1],C=0;C<N;C+=1){var S=C*h,L=u.subarray(S,S+h);if(p)y.set(p(L,m,v),S+C);else{for(var P=k.length,E=[],M=0;M<P;M+=1)E[M]=k[M](L,m,v);var z=N8(E.concat());y.set(E[z],S+C)}v=L}return y})(t,r,s,l);var d=d0(t,{level:o});return At.API.__addimage__.arrayBufferToBinaryString(d)}function v8(t){var r=Array.apply([],t);return r.unshift(0),r}function b1(t,r){var s=t.length,a=[];a[0]=1;for(var o=0;o<s;o+=1){var l=t[o-r]||0;a[o+1]=t[o]-l+256&255}return a}function v1(t,r,s){var a=t.length,o=[];o[0]=2;for(var l=0;l<a;l+=1){var d=s&&s[l]||0;o[l+1]=t[l]-d+256&255}return o}function w1(t,r,s){var a=t.length,o=[];o[0]=3;for(var l=0;l<a;l+=1){var d=t[l-r]||0,u=s&&s[l]||0;o[l+1]=t[l]+256-(d+u>>>1)&255}return o}function N1(t,r,s){var a=t.length,o=[];o[0]=4;for(var l=0;l<a;l+=1){var d=w8(t[l-r]||0,s&&s[l]||0,s&&s[l-r]||0);o[l+1]=t[l]-d+256&255}return o}function w8(t,r,s){if(t===r&&r===s)return t;var a=Math.abs(r-s),o=Math.abs(t-s),l=Math.abs(t+r-s-s);return a<=o&&a<=l?t:o<=l?r:s}function N8(t){var r=t.map(function(s){return s.reduce(function(a,o){return a+Math.abs(o)},0)});return r.indexOf(Math.min.apply(null,r))}function Ip(t,r,s){var a=r*s,o=Math.floor(a/8),l=16-(a-8*o+s),d=(1<<s)-1;return sv(t,o)>>l&d}function j1(t,r,s,a){var o=s*a,l=Math.floor(o/8),d=16-(o-8*l+a),u=(1<<a)-1,h=(r&u)<<d;(function(m,p,v){if(p+1<m.byteLength)m.setUint16(p,v,!1);else{var N=v>>8&255;m.setUint8(p,N)}})(t,l,sv(t,l)&~(u<<d)&65535|h)}function sv(t,r){return r+1<t.byteLength?t.getUint16(r,!1):t.getUint8(r)<<8}function j8(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=t[r++]|t[r++]<<8,a=t[r++]|t[r++]<<8,o=t[r++],l=o>>7,d=1<<1+(7&o);t[r++],t[r++];var u=null,h=null;l&&(u=r,h=d,r+=3*d);var m=!0,p=[],v=0,N=null,y=0,k=null;for(this.width=s,this.height=a;m&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,k=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[r++];v=t[r++]|t[r++]<<8,N=t[r++],1&C||(N=null),y=C>>2&7,r++;break;case 254:for(;;){if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var S=t[r++]|t[r++]<<8,L=t[r++]|t[r++]<<8,P=t[r++]|t[r++]<<8,E=t[r++]|t[r++]<<8,M=t[r++],z=M>>6&1,he=1<<1+(7&M),X=u,J=h,G=!1;M>>7&&(G=!0,X=r,J=he,r+=3*he);var pe=r;for(r++;;){var I;if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}p.push({x:S,y:L,width:P,height:E,has_local_palette:G,palette_offset:X,palette_size:J,data_offset:pe,data_length:r-pe,transparent_index:N,interlaced:!!z,delay:v,disposal:y});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return k},this.frameInfo=function(U){if(U<0||U>=p.length)throw new Error("Frame index out of range.");return p[U]},this.decodeAndBlitFrameBGRA=function(U,B){var W=this.frameInfo(U),Y=W.width*W.height,le=new Uint8Array(Y);S1(t,W.data_offset,le,Y);var F=W.palette_offset,Z=W.transparent_index;Z===null&&(Z=256);var be=W.width,Ae=s-be,ee=be,D=4*(W.y*s+W.x),te=4*((W.y+W.height)*s+W.x),se=D,fe=4*Ae;W.interlaced===!0&&(fe+=4*s*7);for(var V=8,ye=0,ie=le.length;ye<ie;++ye){var ge=le[ye];if(ee===0&&(ee=be,(se+=fe)>=te&&(fe=4*Ae+4*s*(V-1),se=D+(be+Ae)*(V<<1),V>>=1)),ge===Z)se+=4;else{var de=t[F+3*ge],ue=t[F+3*ge+1],Pe=t[F+3*ge+2];B[se++]=Pe,B[se++]=ue,B[se++]=de,B[se++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(U,B){var W=this.frameInfo(U),Y=W.width*W.height,le=new Uint8Array(Y);S1(t,W.data_offset,le,Y);var F=W.palette_offset,Z=W.transparent_index;Z===null&&(Z=256);var be=W.width,Ae=s-be,ee=be,D=4*(W.y*s+W.x),te=4*((W.y+W.height)*s+W.x),se=D,fe=4*Ae;W.interlaced===!0&&(fe+=4*s*7);for(var V=8,ye=0,ie=le.length;ye<ie;++ye){var ge=le[ye];if(ee===0&&(ee=be,(se+=fe)>=te&&(fe=4*Ae+4*s*(V-1),se=D+(be+Ae)*(V<<1),V>>=1)),ge===Z)se+=4;else{var de=t[F+3*ge],ue=t[F+3*ge+1],Pe=t[F+3*ge+2];B[se++]=de,B[se++]=ue,B[se++]=Pe,B[se++]=255}--ee}}}function S1(t,r,s,a){for(var o=t[r++],l=1<<o,d=l+1,u=d+1,h=o+1,m=(1<<h)-1,p=0,v=0,N=0,y=t[r++],k=new Int32Array(4096),C=null;;){for(;p<16&&y!==0;)v|=t[r++]<<p,p+=8,y===1?y=t[r++]:--y;if(p<h)break;var S=v&m;if(v>>=h,p-=h,S!==l){if(S===d)break;for(var L=S<u?S:C,P=0,E=L;E>l;)E=k[E]>>8,++P;var M=E;if(N+P+(L!==S?1:0)>a)return void Nr.log("Warning, gif stream longer than expected.");s[N++]=M;var z=N+=P;for(L!==S&&(s[N++]=M),E=L;P--;)E=k[E],s[--z]=255&E,E>>=8;C!==null&&u<4096&&(k[u++]=C<<8|M,u>=m+1&&h<12&&(++h,m=m<<1|1)),C=S}else u=d+1,m=(1<<(h=o+1))-1,C=null}return N!==a&&Nr.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fp(t){var r,s,a,o,l,d=Math.floor,u=new Array(64),h=new Array(64),m=new Array(64),p=new Array(64),v=new Array(65535),N=new Array(65535),y=new Array(64),k=new Array(64),C=[],S=0,L=7,P=new Array(64),E=new Array(64),M=new Array(64),z=new Array(256),he=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(D,te){for(var se=0,fe=0,V=new Array,ye=1;ye<=16;ye++){for(var ie=1;ie<=D[ye];ie++)V[te[fe]]=[],V[te[fe]][0]=se,V[te[fe]][1]=ye,fe++,se++;se*=2}return V}function F(D){for(var te=D[0],se=D[1]-1;se>=0;)te&1<<se&&(S|=1<<L),se--,--L<0&&(S==255?(Z(255),Z(0)):Z(S),L=7,S=0)}function Z(D){C.push(D)}function be(D){Z(D>>8&255),Z(255&D)}function Ae(D,te,se,fe,V){for(var ye,ie=V[0],ge=V[240],de=(function($e,re){var ce,je,Oe,Re,Fe,We,at,nt,it,wt,ot=0;for(it=0;it<8;++it){ce=$e[ot],je=$e[ot+1],Oe=$e[ot+2],Re=$e[ot+3],Fe=$e[ot+4],We=$e[ot+5],at=$e[ot+6];var Ut=ce+(nt=$e[ot+7]),qt=ce-nt,lt=je+at,xt=je-at,Gt=Oe+We,Nt=Oe-We,Rt=Re+Fe,Pt=Re-Fe,Pr=Ut+Rt,jr=Ut-Rt,Zt=lt+Gt,Ot=lt-Gt;$e[ot]=Pr+Zt,$e[ot+4]=Pr-Zt;var tr=.707106781*(Ot+jr);$e[ot+2]=jr+tr,$e[ot+6]=jr-tr;var bi=.382683433*((Pr=Pt+Nt)-(Ot=xt+qt)),Cs=.5411961*Pr+bi,va=1.306562965*Ot+bi,Tn=.707106781*(Zt=Nt+xt),_t=qt+Tn,vn=qt-Tn;$e[ot+5]=vn+Cs,$e[ot+3]=vn-Cs,$e[ot+1]=_t+va,$e[ot+7]=_t-va,ot+=8}for(ot=0,it=0;it<8;++it){ce=$e[ot],je=$e[ot+8],Oe=$e[ot+16],Re=$e[ot+24],Fe=$e[ot+32],We=$e[ot+40],at=$e[ot+48];var Xn=ce+(nt=$e[ot+56]),Fs=ce-nt,On=je+at,gr=je-at,Br=Oe+We,Yr=Oe-We,qa=Re+Fe,vi=Re-Fe,Zn=Xn+qa,wa=Xn-qa,Ps=On+Br,Rn=On-Br;$e[ot]=Zn+Ps,$e[ot+32]=Zn-Ps;var wn=.707106781*(Rn+wa);$e[ot+16]=wa+wn,$e[ot+48]=wa-wn;var Xi=.382683433*((Zn=vi+Yr)-(Rn=gr+Fs)),ea=.5411961*Zn+Xi,wi=1.306562965*Rn+Xi,Zi=.707106781*(Ps=Yr+gr),eo=Fs+Zi,Mo=Fs-Zi;$e[ot+40]=Mo+ea,$e[ot+24]=Mo-ea,$e[ot+8]=eo+wi,$e[ot+56]=eo-wi,ot++}for(it=0;it<64;++it)wt=$e[it]*re[it],y[it]=wt>0?wt+.5|0:wt-.5|0;return y})(D,te),ue=0;ue<64;++ue)k[X[ue]]=de[ue];var Pe=k[0]-se;se=k[0],Pe==0?F(fe[0]):(F(fe[N[ye=32767+Pe]]),F(v[ye]));for(var Xe=63;Xe>0&&k[Xe]==0;)Xe--;if(Xe==0)return F(ie),se;for(var Me,me=1;me<=Xe;){for(var Ye=me;k[me]==0&&me<=Xe;)++me;var rt=me-Ye;if(rt>=16){Me=rt>>4;for(var et=1;et<=Me;++et)F(ge);rt&=15}ye=32767+k[me],F(V[(rt<<4)+N[ye]]),F(v[ye]),me++}return Xe!=63&&F(ie),se}function ee(D){D=Math.min(Math.max(D,1),100),l!=D&&((function(te){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var V=d((se[fe]*te+50)/100);V=Math.min(Math.max(V,1),255),u[X[fe]]=V}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ge=d((ye[ie]*te+50)/100);ge=Math.min(Math.max(ge,1),255),h[X[ie]]=ge}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,Pe=0;Pe<8;Pe++)for(var Xe=0;Xe<8;Xe++)m[ue]=1/(u[X[ue]]*de[Pe]*de[Xe]*8),p[ue]=1/(h[X[ue]]*de[Pe]*de[Xe]*8),ue++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),l=D)}this.encode=function(D,te){te&&ee(te),C=new Array,S=0,L=7,be(65496),be(65504),be(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),be(1),be(1),Z(0),Z(0),(function(){be(65499),be(132),Z(0);for(var je=0;je<64;je++)Z(u[je]);Z(1);for(var Oe=0;Oe<64;Oe++)Z(h[Oe])})(),(function(je,Oe){be(65472),be(17),Z(8),be(Oe),be(je),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)})(D.width,D.height),(function(){be(65476),be(418),Z(0);for(var je=0;je<16;je++)Z(J[je+1]);for(var Oe=0;Oe<=11;Oe++)Z(G[Oe]);Z(16);for(var Re=0;Re<16;Re++)Z(pe[Re+1]);for(var Fe=0;Fe<=161;Fe++)Z(I[Fe]);Z(1);for(var We=0;We<16;We++)Z(U[We+1]);for(var at=0;at<=11;at++)Z(B[at]);Z(17);for(var nt=0;nt<16;nt++)Z(W[nt+1]);for(var it=0;it<=161;it++)Z(Y[it])})(),be(65498),be(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var se=0,fe=0,V=0;S=0,L=7,this.encode.displayName="_encode_";for(var ye,ie,ge,de,ue,Pe,Xe,Me,me,Ye=D.data,rt=D.width,et=D.height,$e=4*rt,re=0;re<et;){for(ye=0;ye<$e;){for(ue=$e*re+ye,Xe=-1,Me=0,me=0;me<64;me++)Pe=ue+(Me=me>>3)*$e+(Xe=4*(7&me)),re+Me>=et&&(Pe-=$e*(re+1+Me-et)),ye+Xe>=$e&&(Pe-=ye+Xe-$e+4),ie=Ye[Pe++],ge=Ye[Pe++],de=Ye[Pe++],P[me]=(he[ie]+he[ge+256|0]+he[de+512|0]>>16)-128,E[me]=(he[ie+768|0]+he[ge+1024|0]+he[de+1280|0]>>16)-128,M[me]=(he[ie+1280|0]+he[ge+1536|0]+he[de+1792|0]>>16)-128;se=Ae(P,m,se,r,a),fe=Ae(E,p,fe,s,o),V=Ae(M,p,V,s,o),ye+=32}re+=8}if(L>=0){var ce=[];ce[1]=L+1,ce[0]=(1<<L+1)-1,F(ce)}return be(65497),new Uint8Array(C)},t=t||50,(function(){for(var D=String.fromCharCode,te=0;te<256;te++)z[te]=D(te)})(),r=le(J,G),s=le(U,B),a=le(pe,I),o=le(W,Y),(function(){for(var D=1,te=2,se=1;se<=15;se++){for(var fe=D;fe<te;fe++)N[32767+fe]=se,v[32767+fe]=[],v[32767+fe][1]=se,v[32767+fe][0]=fe;for(var V=-(te-1);V<=-D;V++)N[32767+V]=se,v[32767+V]=[],v[32767+V][1]=se,v[32767+V][0]=te-1+V;D<<=1,te<<=1}})(),(function(){for(var D=0;D<256;D++)he[D]=19595*D,he[D+256|0]=38470*D,he[D+512|0]=7471*D+32768,he[D+768|0]=-11059*D,he[D+1024|0]=-21709*D,he[D+1280|0]=32768*D+8421375,he[D+1536|0]=-27439*D,he[D+1792|0]=-5329*D})(),ee(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function li(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function k1(t){function r(G){if(!G)throw Error("assert :P")}function s(G,pe,I){for(var U=0;4>U;U++)if(G[pe+U]!=I.charCodeAt(U))return!0;return!1}function a(G,pe,I,U,B){for(var W=0;W<B;W++)G[pe+W]=I[U+W]}function o(G,pe,I,U){for(var B=0;B<U;B++)G[pe+B]=I}function l(G){return new Int32Array(G)}function d(G,pe){for(var I=[],U=0;U<G;U++)I.push(new pe);return I}function u(G,pe){var I=[];return(function U(B,W,Y){for(var le=Y[W],F=0;F<le&&(B.push(Y.length>W+1?[]:new pe),!(Y.length<W+1));F++)U(B[F],W+1,Y)})(I,0,G),I}var h=function(){var G=this;function pe(f,x){for(var j=1<<x-1>>>0;f&j;)j>>>=1;return j?(f&j-1)+j:f}function I(f,x,j,_,O){r(!(_%j));do f[x+(_-=j)]=O;while(0<_)}function U(f,x,j,_,O){if(r(2328>=O),512>=O)var $=l(512);else if(($=l(O))==null)return 0;return(function(H,K,Q,ne,we,Le){var ae,Se,_e=K,ze=1<<Q,De=l(16),Be=l(16);for(r(we!=0),r(ne!=null),r(H!=null),r(0<Q),Se=0;Se<we;++Se){if(15<ne[Se])return 0;++De[ne[Se]]}if(De[0]==we)return 0;for(Be[1]=0,ae=1;15>ae;++ae){if(De[ae]>1<<ae)return 0;Be[ae+1]=Be[ae]+De[ae]}for(Se=0;Se<we;++Se)ae=ne[Se],0<ne[Se]&&(Le[Be[ae]++]=Se);if(Be[15]==1)return(ne=new B).g=0,ne.value=Le[0],I(H,_e,1,ze,ne),ze;var qe,He=-1,Ge=ze-1,jt=0,ut=1,$t=1,gt=1<<Q;for(Se=0,ae=1,we=2;ae<=Q;++ae,we<<=1){if(ut+=$t<<=1,0>($t-=De[ae]))return 0;for(;0<De[ae];--De[ae])(ne=new B).g=ae,ne.value=Le[Se++],I(H,_e+jt,we,gt,ne),jt=pe(jt,ae)}for(ae=Q+1,we=2;15>=ae;++ae,we<<=1){if(ut+=$t<<=1,0>($t-=De[ae]))return 0;for(;0<De[ae];--De[ae]){if(ne=new B,(jt&Ge)!=He){for(_e+=gt,qe=1<<(He=ae)-Q;15>He&&!(0>=(qe-=De[He]));)++He,qe<<=1;ze+=gt=1<<(qe=He-Q),H[K+(He=jt&Ge)].g=qe+Q,H[K+He].value=_e-K-He}ne.g=ae-Q,ne.value=Le[Se++],I(H,_e+(jt>>Q),we,gt,ne),jt=pe(jt,ae)}}return ut!=2*Be[15]-1?0:ze})(f,x,j,_,O,$)}function B(){this.value=this.g=0}function W(){this.value=this.g=0}function Y(){this.G=d(5,B),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(Ks,W)}function le(f,x,j,_){r(f!=null),r(x!=null),r(2147483648>_),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=j,f.Jd=x,f.Yc=j+_,f.Zc=4<=_?j+_-4+1:j,ie(f)}function F(f,x){for(var j=0;0<x--;)j|=de(f,128)<<x;return j}function Z(f,x){var j=F(f,x);return ge(f)?-j:j}function be(f,x,j,_){var O,$=0;for(r(f!=null),r(x!=null),r(4294967288>_),f.Sb=_,f.Ra=0,f.u=0,f.h=0,4<_&&(_=4),O=0;O<_;++O)$+=x[j+O]<<8*O;f.Ra=$,f.bb=_,f.oa=x,f.pa=j}function Ae(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<_i-8>>>0,++f.bb,f.u-=8;fe(f)&&(f.h=1,f.u=0)}function ee(f,x){if(r(0<=x),!f.h&&x<=Ul){var j=se(f)&Pi[x];return f.u+=x,Ae(f),j}return f.h=1,f.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function se(f){return f.Ra>>>(f.u&_i-1)>>>0}function fe(f){return r(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>_i}function V(f,x){f.u=x,f.h=fe(f)}function ye(f){f.u>=Dr&&(r(f.u>=Dr),Ae(f))}function ie(f){r(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(r(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function ge(f){return F(f,1)}function de(f,x){var j=f.Ca;0>f.b&&ie(f);var _=f.b,O=j*x>>>8,$=(f.I>>>_>O)+0;for($?(j-=O,f.I-=O+1<<_>>>0):j=O+1,_=j,O=0;256<=_;)O+=8,_>>=8;return _=7^O+Bc[_],f.b-=_,f.Ca=(j<<_)-1,$}function ue(f,x,j){f[x+0]=j>>24&255,f[x+1]=j>>16&255,f[x+2]=j>>8&255,f[x+3]=255&j}function Pe(f,x){return f[x+0]|f[x+1]<<8}function Xe(f,x){return Pe(f,x)|f[x+2]<<16}function Me(f,x){return Pe(f,x)|Pe(f,x+2)<<16}function me(f,x){var j=1<<x;return r(f!=null),r(0<x),f.X=l(j),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function Ye(f,x){r(f!=null),r(x!=null),r(f.Xa==x.Xa),a(x.X,0,f.X,0,1<<x.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function et(f,x,j,_){r(j!=null),r(_!=null);var O=j[0],$=_[0];return O==0&&(O=(f*$+x/2)/x),$==0&&($=(x*O+f/2)/f),0>=O||0>=$?0:(j[0]=O,_[0]=$,1)}function $e(f,x){return f+(1<<x)-1>>>x}function re(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function ce(f,x){G[x]=function(j,_,O,$,H,K,Q){var ne;for(ne=0;ne<H;++ne){var we=G[f](K[Q+ne-1],O,$+ne);K[Q+ne]=re(j[_+ne],we)}}}function je(){this.ud=this.hd=this.jd=0}function Oe(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Re(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Fe(f,x){return Re(f+(f-x+.5>>1))}function We(f,x,j){return Math.abs(x-j)-Math.abs(f-j)}function at(f,x,j,_,O,$,H){for(_=$[H-1],j=0;j<O;++j)$[H+j]=_=re(f[x+j],_)}function nt(f,x,j,_,O){var $;for($=0;$<j;++$){var H=f[x+$],K=H>>8&255,Q=16711935&(Q=(Q=16711935&H)+((K<<16)+K));_[O+$]=(4278255360&H)+Q>>>0}}function it(f,x){x.jd=255&f,x.hd=f>>8&255,x.ud=f>>16&255}function wt(f,x,j,_,O,$){var H;for(H=0;H<_;++H){var K=x[j+H],Q=K>>>8,ne=K,we=255&(we=(we=K>>>16)+((f.jd<<24>>24)*(Q<<24>>24)>>>5));ne=255&(ne=(ne+=(f.hd<<24>>24)*(Q<<24>>24)>>>5)+((f.ud<<24>>24)*(we<<24>>24)>>>5)),O[$+H]=(4278255360&K)+(we<<16)+ne}}function ot(f,x,j,_,O){G[x]=function($,H,K,Q,ne,we,Le,ae,Se){for(Q=Le;Q<ae;++Q)for(Le=0;Le<Se;++Le)ne[we++]=O(K[_($[H++])])},G[f]=function($,H,K,Q,ne,we,Le){var ae=8>>$.b,Se=$.Ea,_e=$.K[0],ze=$.w;if(8>ae)for($=(1<<$.b)-1,ze=(1<<ae)-1;H<K;++H){var De,Be=0;for(De=0;De<Se;++De)De&$||(Be=_(Q[ne++])),we[Le++]=O(_e[Be&ze]),Be>>=ae}else G["VP8LMapColor"+j](Q,ne,_e,ze,we,Le,H,K,Se)}}function Ut(f,x,j,_,O){for(j=x+j;x<j;){var $=f[x++];_[O++]=$>>16&255,_[O++]=$>>8&255,_[O++]=255&$}}function qt(f,x,j,_,O){for(j=x+j;x<j;){var $=f[x++];_[O++]=$>>16&255,_[O++]=$>>8&255,_[O++]=255&$,_[O++]=$>>24&255}}function lt(f,x,j,_,O){for(j=x+j;x<j;){var $=(H=f[x++])>>16&240|H>>12&15,H=240&H|H>>28&15;_[O++]=$,_[O++]=H}}function xt(f,x,j,_,O){for(j=x+j;x<j;){var $=(H=f[x++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;_[O++]=$,_[O++]=H}}function Gt(f,x,j,_,O){for(j=x+j;x<j;){var $=f[x++];_[O++]=255&$,_[O++]=$>>8&255,_[O++]=$>>16&255}}function Nt(f,x,j,_,O,$){if($==0)for(j=x+j;x<j;)ue(_,(($=f[x++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),O+=32;else a(_,O,f,x,j)}function Rt(f,x){G[x][0]=G[f+"0"],G[x][1]=G[f+"1"],G[x][2]=G[f+"2"],G[x][3]=G[f+"3"],G[x][4]=G[f+"4"],G[x][5]=G[f+"5"],G[x][6]=G[f+"6"],G[x][7]=G[f+"7"],G[x][8]=G[f+"8"],G[x][9]=G[f+"9"],G[x][10]=G[f+"10"],G[x][11]=G[f+"11"],G[x][12]=G[f+"12"],G[x][13]=G[f+"13"],G[x][14]=G[f+"0"],G[x][15]=G[f+"0"]}function Pt(f){return f==tl||f==xo||f==Hl||f==Wl}function Pr(){this.eb=[],this.size=this.A=this.fb=0}function jr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pr,this.f.kb=new jr,this.sd=null}function Ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bi(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Cs(f,x){var j=f.T,_=x.ba.f.RGBA,O=_.eb,$=_.fb+f.ka*_.A,H=cn[x.ba.S],K=f.y,Q=f.O,ne=f.f,we=f.N,Le=f.ea,ae=f.W,Se=x.cc,_e=x.dc,ze=x.Mc,De=x.Nc,Be=f.ka,qe=f.ka+f.T,He=f.U,Ge=He+1>>1;for(Be==0?H(K,Q,null,null,ne,we,Le,ae,ne,we,Le,ae,O,$,null,null,He):(H(x.ec,x.fc,K,Q,Se,_e,ze,De,ne,we,Le,ae,O,$-_.A,O,$,He),++j);Be+2<qe;Be+=2)Se=ne,_e=we,ze=Le,De=ae,we+=f.Rc,ae+=f.Rc,$+=2*_.A,H(K,(Q+=2*f.fa)-f.fa,K,Q,Se,_e,ze,De,ne,we,Le,ae,O,$-_.A,O,$,He);return Q+=f.fa,f.j+qe<f.o?(a(x.ec,x.fc,K,Q,He),a(x.cc,x.dc,ne,we,Ge),a(x.Mc,x.Nc,Le,ae,Ge),j--):1&qe||H(K,Q,null,null,ne,we,Le,ae,ne,we,Le,ae,O,$+_.A,null,null,He),j}function va(f,x,j){var _=f.F,O=[f.J];if(_!=null){var $=f.U,H=x.ba.S,K=H==Vl||H==Hl;x=x.ba.f.RGBA;var Q=[0],ne=f.ka;Q[0]=f.T,f.Kb&&(ne==0?--Q[0]:(--ne,O[0]-=f.width),f.j+f.ka+f.T==f.o&&(Q[0]=f.o-f.j-ne));var we=x.eb;ne=x.fb+ne*x.A,f=zl(_,O[0],f.width,$,Q,we,ne+(K?0:3),x.A),r(j==Q),f&&Pt(H)&&go(we,ne,K,$,Q,x.A)}return 0}function Tn(f){var x=f.ma,j=x.ba.S,_=11>j,O=j==Ei||j==$l||j==Vl||j==ur||j==12||Pt(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Ws(x.Oa,f,O?11:12))return 0;if(O&&Pt(j)&&Rl(),f.da)alert("todo:use_scaling");else{if(_){if(x.Ib=bi,f.Kb){if(j=f.U+1>>1,x.memory=l(f.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=Cs,Rl()}}else alert("todo:EmitYUV");O&&(x.Jb=va,_&&uo())}if(_&&!Ls){for(f=0;256>f;++f)dn[f]=89858*(f-128)+oa>>Za,un[f]=-22014*(f-128)+oa,al[f]=-45773*(f-128),wo[f]=113618*(f-128)+oa>>Za;for(f=lr;f<cr;++f)x=76283*(f-16)+oa>>Za,Gc[f-lr]=is(x,255),sh[f-lr]=is(x+8>>4,15);Ls=1}return 1}function _t(f){var x=f.ma,j=f.U,_=f.T;return r(!(1&f.ka)),0>=j||0>=_?0:(j=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,j),x.Dc+=j,1)}function vn(f){f.ma.memory=null}function Xn(f,x,j,_){return ee(f,8)!=47?0:(x[0]=ee(f,14)+1,j[0]=ee(f,14)+1,_[0]=ee(f,1),ee(f,3)!=0?0:!f.h)}function Fs(f,x){if(4>f)return f+1;var j=f-2>>1;return(2+(1&f)<<j)+ee(x,j)+1}function On(f,x){return 120<x?x-120:1<=(j=((j=nm[x-1])>>4)*f+(8-(15&j)))?j:1;var j}function gr(f,x,j){var _=se(j),O=f[x+=255&_].g-8;return 0<O&&(V(j,j.u+8),_=se(j),x+=f[x].value,x+=_&(1<<O)-1),V(j,j.u+f[x].g),f[x].value}function Br(f,x,j){return j.g+=f.g,j.value+=f.value<<x>>>0,r(8>=j.g),f.g}function Yr(f,x,j){var _=f.xc;return r((x=_==0?0:f.vc[f.md*(j>>_)+(x>>_)])<f.Wb),f.Ya[x]}function qa(f,x,j,_){var O=f.ab,$=f.c*x,H=f.C;x=H+x;var K=j,Q=_;for(_=f.Ta,j=f.Ua;0<O--;){var ne=f.gc[O],we=H,Le=x,ae=K,Se=Q,_e=(Q=_,K=j,ne.Ea);switch(r(we<Le),r(Le<=ne.nc),ne.hc){case 2:Yo(ae,Se,(Le-we)*_e,Q,K);break;case 0:var ze=we,De=Le,Be=Q,qe=K,He=(gt=ne).Ea;ze==0&&(nn(ae,Se,null,null,1,Be,qe),at(ae,Se+1,0,0,He-1,Be,qe+1),Se+=He,qe+=He,++ze);for(var Ge=1<<gt.b,jt=Ge-1,ut=$e(He,gt.b),$t=gt.K,gt=gt.w+(ze>>gt.b)*ut;ze<De;){var Yt=$t,Ir=gt,Vt=1;for(an(ae,Se,Be,qe-He,1,Be,qe);Vt<He;){var ht=(Vt&~jt)+Ge;ht>He&&(ht=He),(0,Xa[Yt[Ir++]>>8&15])(ae,Se+ +Vt,Be,qe+Vt-He,ht-Vt,Be,qe+Vt),Vt=ht}Se+=He,qe+=He,++ze&jt||(gt+=ut)}Le!=ne.nc&&a(Q,K-_e,Q,K+(Le-we-1)*_e,_e);break;case 1:for(_e=ae,De=Se,He=(ae=ne.Ea)-(qe=ae&~(Be=(Se=1<<ne.b)-1)),ze=$e(ae,ne.b),Ge=ne.K,ne=ne.w+(we>>ne.b)*ze;we<Le;){for(jt=Ge,ut=ne,$t=new je,gt=De+qe,Yt=De+ae;De<gt;)it(jt[ut++],$t),Pa($t,_e,De,Se,Q,K),De+=Se,K+=Se;De<Yt&&(it(jt[ut++],$t),Pa($t,_e,De,He,Q,K),De+=He,K+=He),++we&Be||(ne+=ze)}break;case 3:if(ae==Q&&Se==K&&0<ne.b){for(De=Q,ae=_e=K+(Le-we)*_e-(qe=(Le-we)*$e(ne.Ea,ne.b)),Se=Q,Be=K,ze=[],qe=(He=qe)-1;0<=qe;--qe)ze[qe]=Se[Be+qe];for(qe=He-1;0<=qe;--qe)De[ae+qe]=ze[qe];Li(ne,we,Le,Q,_e,Q,K)}else Li(ne,we,Le,ae,Se,Q,K)}K=_,Q=j}Q!=j&&a(_,j,K,Q,$)}function vi(f,x){var j=f.V,_=f.Ba+f.c*f.C,O=x-f.C;if(r(x<=f.l.o),r(16>=O),0<O){var $=f.l,H=f.Ta,K=f.Ua,Q=$.width;if(qa(f,O,j,_),O=K=[K],r((j=f.C)<(_=x)),r($.v<$.va),_>$.o&&(_=$.o),j<$.j){var ne=$.j-j;j=$.j,O[0]+=ne*Q}if(j>=_?j=0:(O[0]+=4*$.v,$.ka=j-$.j,$.U=$.va-$.v,$.T=_-j,j=1),j){if(K=K[0],11>(j=f.ca).S){var we=j.f.RGBA,Le=(_=j.S,O=$.U,$=$.T,ne=we.eb,we.A),ae=$;for(we=we.fb+f.Ma*we.A;0<ae--;){var Se=H,_e=K,ze=O,De=ne,Be=we;switch(_){case $c:Qo(Se,_e,ze,De,Be);break;case Ei:on(Se,_e,ze,De,Be);break;case tl:on(Se,_e,ze,De,Be),go(De,Be,0,ze,1,0);break;case Xu:yr(Se,_e,ze,De,Be);break;case $l:Nt(Se,_e,ze,De,Be,1);break;case xo:Nt(Se,_e,ze,De,Be,1),go(De,Be,0,ze,1,0);break;case Vl:Nt(Se,_e,ze,De,Be,0);break;case Hl:Nt(Se,_e,ze,De,Be,0),go(De,Be,1,ze,1,0);break;case ur:_a(Se,_e,ze,De,Be);break;case Wl:_a(Se,_e,ze,De,Be),Ud(De,Be,ze,1,0);break;case Vc:xr(Se,_e,ze,De,Be);break;default:r(0)}K+=Q,we+=Le}f.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");r(f.Ma<=j.height)}}f.C=x,r(f.C<=f.i)}function Zn(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var j=f.Ya[x].G,_=f.Ya[x].H;if(0<j[1][_[1]+0].g||0<j[2][_[2]+0].g||0<j[3][_[3]+0].g)return 0}return 1}function wa(f,x,j,_,O,$){if(f.Z!=0){var H=f.qd,K=f.rd;for(r(Rs[f.Z]!=null);x<j;++x)Rs[f.Z](H,K,_,O,_,O,$),H=_,K=O,O+=$;f.qd=H,f.rd=K}}function Ps(f,x){var j=f.l.ma,_=j.Z==0||j.Z==1?f.l.j:f.C;if(_=f.C<_?_:f.C,r(x<=f.l.o),x>_){var O=f.l.width,$=j.ca,H=j.tb+O*_,K=f.V,Q=f.Ba+f.c*_,ne=f.gc;r(f.ab==1),r(ne[0].hc==3),fo(ne[0],_,x,K,Q,$,H),wa(j,_,x,$,H,O)}f.C=f.Ma=x}function Rn(f,x,j,_,O,$,H){var K=f.$/_,Q=f.$%_,ne=f.m,we=f.s,Le=j+f.$,ae=Le;O=j+_*O;var Se=j+_*$,_e=280+we.ua,ze=f.Pb?K:16777216,De=0<we.ua?we.Wa:null,Be=we.wc,qe=Le<Se?Yr(we,Q,K):null;r(f.C<$),r(Se<=O);var He=!1;e:for(;;){for(;He||Le<Se;){var Ge=0;if(K>=ze){var jt=Le-j;r((ze=f).Pb),ze.wd=ze.m,ze.xd=jt,0<ze.s.ua&&Ye(ze.s.Wa,ze.s.vb),ze=K+Wc}if(Q&Be||(qe=Yr(we,Q,K)),r(qe!=null),qe.Qb&&(x[Le]=qe.qb,He=!0),!He)if(ye(ne),qe.jc){Ge=ne,jt=x;var ut=Le,$t=qe.pd[se(Ge)&Ks-1];r(qe.jc),256>$t.g?(V(Ge,Ge.u+$t.g),jt[ut]=$t.value,Ge=0):(V(Ge,Ge.u+$t.g-256),r(256<=$t.value),Ge=$t.value),Ge==0&&(He=!0)}else Ge=gr(qe.G[0],qe.H[0],ne);if(ne.h)break;if(He||256>Ge){if(!He)if(qe.nd)x[Le]=(qe.qb|Ge<<8)>>>0;else{if(ye(ne),He=gr(qe.G[1],qe.H[1],ne),ye(ne),jt=gr(qe.G[2],qe.H[2],ne),ut=gr(qe.G[3],qe.H[3],ne),ne.h)break;x[Le]=(ut<<24|He<<16|Ge<<8|jt)>>>0}if(He=!1,++Le,++Q>=_&&(Q=0,++K,H!=null&&K<=$&&!(K%16)&&H(f,K),De!=null))for(;ae<Le;)Ge=x[ae++],De.X[(506832829*Ge&4294967295)>>>De.Mb]=Ge}else if(280>Ge){if(Ge=Fs(Ge-256,ne),jt=gr(qe.G[4],qe.H[4],ne),ye(ne),jt=On(_,jt=Fs(jt,ne)),ne.h)break;if(Le-j<jt||O-Le<Ge)break e;for(ut=0;ut<Ge;++ut)x[Le+ut]=x[Le+ut-jt];for(Le+=Ge,Q+=Ge;Q>=_;)Q-=_,++K,H!=null&&K<=$&&!(K%16)&&H(f,K);if(r(Le<=O),Q&Be&&(qe=Yr(we,Q,K)),De!=null)for(;ae<Le;)Ge=x[ae++],De.X[(506832829*Ge&4294967295)>>>De.Mb]=Ge}else{if(!(Ge<_e))break e;for(He=Ge-280,r(De!=null);ae<Le;)Ge=x[ae++],De.X[(506832829*Ge&4294967295)>>>De.Mb]=Ge;Ge=Le,r(!(He>>>(jt=De).Xa)),x[Ge]=jt.X[He],He=!0}He||r(ne.h==fe(ne))}if(f.Pb&&ne.h&&Le<O)r(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Ye(f.s.vb,f.s.Wa);else{if(ne.h)break e;H?.(f,K>$?$:K),f.a=0,f.$=Le-j}return 1}return f.a=3,0}function wn(f){r(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,r(f!=null)}function Xi(){var f=new _r;return f==null?null:(f.a=0,f.xb=sl,Rt("Predictor","VP8LPredictors"),Rt("Predictor","VP8LPredictors_C"),Rt("PredictorAdd","VP8LPredictorsAdd"),Rt("PredictorAdd","VP8LPredictorsAdd_C"),Yo=nt,Pa=wt,Qo=Ut,on=qt,_a=lt,xr=xt,yr=Gt,G.VP8LMapColor32b=Jo,G.VP8LMapColor8b=Qa,f)}function ea(f,x,j,_,O){var $=1,H=[f],K=[x],Q=_.m,ne=_.s,we=null,Le=0;e:for(;;){if(j)for(;$&&ee(Q,1);){var ae=H,Se=K,_e=_,ze=1,De=_e.m,Be=_e.gc[_e.ab],qe=ee(De,2);if(_e.Oc&1<<qe)$=0;else{switch(_e.Oc|=1<<qe,Be.hc=qe,Be.Ea=ae[0],Be.nc=Se[0],Be.K=[null],++_e.ab,r(4>=_e.ab),qe){case 0:case 1:Be.b=ee(De,3)+2,ze=ea($e(Be.Ea,Be.b),$e(Be.nc,Be.b),0,_e,Be.K),Be.K=Be.K[0];break;case 3:var He,Ge=ee(De,8)+1,jt=16<Ge?0:4<Ge?1:2<Ge?2:3;if(ae[0]=$e(Be.Ea,jt),Be.b=jt,He=ze=ea(Ge,1,0,_e,Be.K)){var ut,$t=Ge,gt=Be,Yt=1<<(8>>gt.b),Ir=l(Yt);if(Ir==null)He=0;else{var Vt=gt.K[0],ht=gt.w;for(Ir[0]=gt.K[0][0],ut=1;ut<1*$t;++ut)Ir[ut]=re(Vt[ht+ut],Ir[ut-1]);for(;ut<4*Yt;++ut)Ir[ut]=0;gt.K[0]=null,gt.K[0]=Ir,He=1}}ze=He;break;case 2:break;default:r(0)}$=ze}}if(H=H[0],K=K[0],$&&ee(Q,1)&&!($=1<=(Le=ee(Q,4))&&11>=Le)){_.a=3;break e}var st;if(st=$)t:{var $r,Tt,Kt,br=_,ys=H,Zr=K,Lr=Le,ls=j,bs=br.m,Sr=br.s,Xt=[null],sr=1,kr=0,nr=eh[Lr];r:for(;;){if(ls&&ee(bs,1)){var Fr=ee(bs,3)+2,Tr=$e(ys,Fr),hr=$e(Zr,Fr),Ms=Tr*hr;if(!ea(Tr,hr,0,br,Xt))break r;for(Xt=Xt[0],Sr.xc=Fr,$r=0;$r<Ms;++$r){var dr=Xt[$r]>>8&65535;Xt[$r]=dr,dr>=sr&&(sr=dr+1)}}if(bs.h)break r;for(Tt=0;5>Tt;++Tt){var fr=yo[Tt];!Tt&&0<Lr&&(fr+=1<<Lr),kr<fr&&(kr=fr)}var es=d(sr*nr,B),Es=sr,hn=d(Es,Y);if(hn==null)var Vr=null;else r(65536>=Es),Vr=hn;var Hr=l(kr);if(Vr==null||Hr==null||es==null){br.a=1;break r}var Bs=es;for($r=Kt=0;$r<sr;++$r){var mr=Vr[$r],Us=mr.G,$n=mr.H,la=0,vs=1,Wr=0;for(Tt=0;5>Tt;++Tt){fr=yo[Tt],Us[Tt]=Bs,$n[Tt]=Kt,!Tt&&0<Lr&&(fr+=1<<Lr);n:{var Fi,ti=fr,il=br,Ia=Hr,ah=Bs,Xd=Kt,wr=0,ca=il.m,Zd=ee(ca,1);if(o(Ia,0,0,ti),Zd){var eu=ee(ca,1)+1,Kc=ee(ca,1),Yc=ee(ca,Kc==0?1:8);Ia[Yc]=1,eu==2&&(Ia[Yc=ee(ca,8)]=1);var Fa=1}else{var Ar=l(19),ts=ee(ca,4)+4;if(19<ts){il.a=3;var Gr=0;break n}for(Fi=0;Fi<ts;++Fi)Ar[sm[Fi]]=ee(ca,3);var ol=void 0,ri=void 0,ll=il,cm=Ar,cs=ti,Jc=Ia,Ql=0,Ta=ll.m,da=8,An=d(128,B);s:for(;U(An,0,7,cm,19);){if(ee(Ta,1)){var Xl=2+2*ee(Ta,3);if((ol=2+ee(Ta,Xl))>cs)break s}else ol=cs;for(ri=0;ri<cs&&ol--;){ye(Ta);var Qc=An[0+(127&se(Ta))];V(Ta,Ta.u+Qc.g);var Ti=Qc.value;if(16>Ti)Jc[ri++]=Ti,Ti!=0&&(da=Ti);else{var ih=Ti==16,tu=Ti-16,oh=Hc[tu],ru=ee(Ta,Gl[tu])+oh;if(ri+ru>cs)break s;for(var lh=ih?da:0;0<ru--;)Jc[ri++]=lh}}Ql=1;break s}Ql||(ll.a=3),Fa=Ql}(Fa=Fa&&!ca.h)&&(wr=U(ah,Xd,8,Ia,ti)),Fa&&wr!=0?Gr=wr:(il.a=3,Gr=0)}if(Gr==0)break r;if(vs&&Zu[Tt]==1&&(vs=Bs[Kt].g==0),la+=Bs[Kt].g,Kt+=Gr,3>=Tt){var cl,Xc=Hr[0];for(cl=1;cl<fr;++cl)Hr[cl]>Xc&&(Xc=Hr[cl]);Wr+=Xc}}if(mr.nd=vs,mr.Qb=0,vs&&(mr.qb=(Us[3][$n[3]+0].value<<24|Us[1][$n[1]+0].value<<16|Us[2][$n[2]+0].value)>>>0,la==0&&256>Us[0][$n[0]+0].value&&(mr.Qb=1,mr.qb+=Us[0][$n[0]+0].value<<8)),mr.jc=!mr.Qb&&6>Wr,mr.jc){var Zl,Cn=mr;for(Zl=0;Zl<Ks;++Zl){var si=Zl,ua=Cn.pd[si],jo=Cn.G[0][Cn.H[0]+si];256<=jo.value?(ua.g=jo.g+256,ua.value=jo.value):(ua.g=0,ua.value=0,si>>=Br(jo,8,ua),si>>=Br(Cn.G[1][Cn.H[1]+si],16,ua),si>>=Br(Cn.G[2][Cn.H[2]+si],0,ua),Br(Cn.G[3][Cn.H[3]+si],24,ua))}}}Sr.vc=Xt,Sr.Wb=sr,Sr.Ya=Vr,Sr.yc=es,st=1;break t}st=0}if(!($=st)){_.a=3;break e}if(0<Le){if(ne.ua=1<<Le,!me(ne.Wa,Le)){_.a=1,$=0;break e}}else ne.ua=0;var Zc=_,ed=H,ch=K,td=Zc.s,rd=td.xc;if(Zc.c=ed,Zc.i=ch,td.md=$e(ed,rd),td.wc=rd==0?-1:(1<<rd)-1,j){_.xb=Da;break e}if((we=l(H*K))==null){_.a=1,$=0;break e}$=($=Rn(_,we,0,H,K,K,null))&&!Q.h;break e}return $?(O!=null?O[0]=we:(r(we==null),r(j)),_.$=0,j||wn(ne)):wn(ne),$}function wi(f,x){var j=f.c*f.i,_=j+x+16*x;return r(f.c<=x),f.V=l(_),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+j+x,1)}function Zi(f,x){var j=f.C,_=x-j,O=f.V,$=f.Ba+f.c*j;for(r(x<=f.l.o);0<_;){var H=16<_?16:_,K=f.l.ma,Q=f.l.width,ne=Q*H,we=K.ca,Le=K.tb+Q*j,ae=f.Ta,Se=f.Ua;qa(f,H,O,$),qd(ae,Se,we,Le,ne),wa(K,j,j+H,we,Le,Q),_-=H,O+=H*f.c,j+=H}r(j==x),f.C=f.Ma=x}function eo(){this.ub=this.yd=this.td=this.Rb=0}function Mo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fd(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function vr(){this.Yb=(function(){var f=[];return(function x(j,_,O){for(var $=O[_],H=0;H<$&&(j.push(O.length>_+1?[]:0),!(O.length<_+1));H++)x(j[H],_+1,O)})(f,0,[3,11]),f})()}function Ac(){this.jb=l(3),this.Wc=u([4,8],vr),this.Xc=u([4,17],vr)}function Bo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Nn(){this.ld=this.La=this.dd=this.tc=0}function Ni(){this.Na=this.la=0}function Cc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Uo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function to(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nn),this.Y=0,this.ya=Array(new Uo),this.aa=0,this.l=new Ts}function jn(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Pc(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new eo,this.Kc=new Mo,this.ed=new Bo,this.Qa=new Fd,this.Ic=this.$c=this.Aa=0,this.D=new to,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,D),this.ia=0,this.pb=d(4,Cc),this.Pa=new Ac,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jn),this.Hd=0,this.rb=Array(new Ni),this.sb=0,this.wa=Array(new Nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Uo),this.L=this.aa=0,this.gd=u([4,2],Nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Td(){var f=new Pc;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,bo||(bo=Mn)),f}function Jr(f,x,j){return f.a==0&&(f.a=x,f.sc=j,f.cb=0),0}function _c(f,x,j){return 3<=j&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function ro(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return Jr(f,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,_=x.w,O=x.ha;if(4>O)return Jr(f,7,"Truncated header.");var $=j[_+0]|j[_+1]<<8|j[_+2]<<16,H=f.Od;if(H.Rb=!(1&$),H.td=$>>1&7,H.yd=$>>4&1,H.ub=$>>5,3<H.td)return Jr(f,3,"Incorrect keyframe parameters.");if(!H.yd)return Jr(f,4,"Frame not displayable.");_+=3,O-=3;var K=f.Kc;if(H.Rb){if(7>O)return Jr(f,7,"cannot parse picture header");if(!_c(j,_,O))return Jr(f,3,"Bad code word");K.c=16383&(j[_+4]<<8|j[_+3]),K.Td=j[_+4]>>6,K.i=16383&(j[_+6]<<8|j[_+5]),K.Ud=j[_+6]>>6,_+=7,O-=7,f.za=K.c+15>>4,f.Ub=K.i+15>>4,x.width=K.c,x.height=K.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o(($=f.Pa).jb,0,255,$.jb.length),r(($=f.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,o($.Zb,0,0,$.Zb.length),o($.Lb,0,0,$.Lb)}if(H.ub>O)return Jr(f,7,"bad partition length");le($=f.m,j,_,H.ub),_+=H.ub,O-=H.ub,H.Rb&&(K.Ld=ge($),K.Kd=ge($)),K=f.Qa;var Q,ne=f.Pa;if(r($!=null),r(K!=null),K.Cb=ge($),K.Cb){if(K.Bb=ge($),ge($)){for(K.Fb=ge($),Q=0;4>Q;++Q)K.Zb[Q]=ge($)?Z($,7):0;for(Q=0;4>Q;++Q)K.Lb[Q]=ge($)?Z($,6):0}if(K.Bb)for(Q=0;3>Q;++Q)ne.jb[Q]=ge($)?F($,8):255}else K.Bb=0;if($.Ka)return Jr(f,3,"cannot parse segment header");if((K=f.ed).zd=ge($),K.Tb=F($,6),K.wb=F($,3),K.Pc=ge($),K.Pc&&ge($)){for(ne=0;4>ne;++ne)ge($)&&(K.vd[ne]=Z($,6));for(ne=0;4>ne;++ne)ge($)&&(K.od[ne]=Z($,6))}if(f.L=K.Tb==0?0:K.zd?1:2,$.Ka)return Jr(f,3,"cannot parse filter header");var we=O;if(O=Q=_,_=Q+we,K=we,f.Xb=(1<<F(f.m,2))-1,we<3*(ne=f.Xb))j=7;else{for(Q+=3*ne,K-=3*ne,we=0;we<ne;++we){var Le=j[O+0]|j[O+1]<<8|j[O+2]<<16;Le>K&&(Le=K),le(f.Jc[+we],j,Q,Le),Q+=Le,K-=Le,O+=3}le(f.Jc[+ne],j,Q,K),j=Q<_?0:5}if(j!=0)return Jr(f,j,"cannot parse partitions");for(j=F(Q=f.m,7),O=ge(Q)?Z(Q,4):0,_=ge(Q)?Z(Q,4):0,K=ge(Q)?Z(Q,4):0,ne=ge(Q)?Z(Q,4):0,Q=ge(Q)?Z(Q,4):0,we=f.Qa,Le=0;4>Le;++Le){if(we.Cb){var ae=we.Zb[Le];we.Fb||(ae+=j)}else{if(0<Le){f.pb[Le]=f.pb[0];continue}ae=j}var Se=f.pb[Le];Se.Sc[0]=rl[is(ae+O,127)],Se.Sc[1]=Kl[is(ae+0,127)],Se.Eb[0]=2*rl[is(ae+_,127)],Se.Eb[1]=101581*Kl[is(ae+K,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=rl[is(ae+ne,117)],Se.Qc[1]=Kl[is(ae+Q,127)],Se.lc=ae+Q}if(!H.Rb)return Jr(f,4,"Not a key frame.");for(ge($),H=f.Pa,j=0;4>j;++j){for(O=0;8>O;++O)for(_=0;3>_;++_)for(K=0;11>K;++K)ne=de($,im[j][O][_][K])?F($,8):rh[j][O][_][K],H.Wc[j][O].Yb[_][K]=ne;for(O=0;17>O;++O)H.Xc[j][O]=H.Wc[j][Yd[O]]}return f.kc=ge($),f.kc&&(f.Bd=F($,8)),f.cb=1}function Mn(f,x,j,_,O,$,H){var K=x[O].Yb[j];for(j=0;16>O;++O){if(!de(f,K[j+0]))return O;for(;!de(f,K[j+1]);)if(K=x[++O].Yb[0],j=0,O==16)return 16;var Q=x[O+1].Yb;if(de(f,K[j+2])){var ne=f,we=0;if(de(ne,(ae=K)[(Le=j)+3]))if(de(ne,ae[Le+6])){for(K=0,Le=2*(we=de(ne,ae[Le+8]))+(ae=de(ne,ae[Le+9+we])),we=0,ae=Gd[Le];ae[K];++K)we+=we+de(ne,ae[K]);we+=3+(8<<Le)}else de(ne,ae[Le+7])?(we=7+2*de(ne,165),we+=de(ne,145)):we=5+de(ne,159);else we=de(ne,ae[Le+4])?3+de(ne,ae[Le+5]):2;K=Q[2]}else we=1,K=Q[1];Q=H+Kd[O],0>(ne=f).b&&ie(ne);var Le,ae=ne.b,Se=(Le=ne.Ca>>1)-(ne.I>>ae)>>31;--ne.b,ne.Ca+=Se,ne.Ca|=1,ne.I-=(Le+1&Se)<<ae,$[Q]=((we^Se)-Se)*_[(0<O)+0]}return 16}function ta(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function tn(f,x,j,_,O){O=f[x+j+32*_]+(O>>3),f[x+j+32*_]=-256&O?0>O?0:255:O}function so(f,x,j,_,O,$){tn(f,x,0,j,_+O),tn(f,x,1,j,_+$),tn(f,x,2,j,_-$),tn(f,x,3,j,_-O)}function Ur(f){return(20091*f>>16)+f}function no(f,x,j,_){var O,$=0,H=l(16);for(O=0;4>O;++O){var K=f[x+0]+f[x+8],Q=f[x+0]-f[x+8],ne=(35468*f[x+4]>>16)-Ur(f[x+12]),we=Ur(f[x+4])+(35468*f[x+12]>>16);H[$+0]=K+we,H[$+1]=Q+ne,H[$+2]=Q-ne,H[$+3]=K-we,$+=4,x++}for(O=$=0;4>O;++O)K=(f=H[$+0]+4)+H[$+8],Q=f-H[$+8],ne=(35468*H[$+4]>>16)-Ur(H[$+12]),tn(j,_,0,0,K+(we=Ur(H[$+4])+(35468*H[$+12]>>16))),tn(j,_,1,0,Q+ne),tn(j,_,2,0,Q-ne),tn(j,_,3,0,K-we),$++,_+=32}function Lc(f,x,j,_){var O=f[x+0]+4,$=35468*f[x+4]>>16,H=Ur(f[x+4]),K=35468*f[x+1]>>16;so(j,_,0,O+H,f=Ur(f[x+1]),K),so(j,_,1,O+$,f,K),so(j,_,2,O-$,f,K),so(j,_,3,O-H,f,K)}function Dl(f,x,j,_,O){no(f,x,j,_),O&&no(f,x+16,j,_+4)}function ao(f,x,j,_){zr(f,x+0,j,_,1),zr(f,x+32,j,_+128,1)}function Na(f,x,j,_){var O;for(f=f[x+0]+4,O=0;4>O;++O)for(x=0;4>x;++x)tn(j,_,x,O,f)}function qo(f,x,j,_){f[x+0]&&ia(f,x+0,j,_),f[x+16]&&ia(f,x+16,j,_+4),f[x+32]&&ia(f,x+32,j,_+128),f[x+48]&&ia(f,x+48,j,_+128+4)}function er(f,x,j,_){var O,$=l(16);for(O=0;4>O;++O){var H=f[x+0+O]+f[x+12+O],K=f[x+4+O]+f[x+8+O],Q=f[x+4+O]-f[x+8+O],ne=f[x+0+O]-f[x+12+O];$[0+O]=H+K,$[8+O]=H-K,$[4+O]=ne+Q,$[12+O]=ne-Q}for(O=0;4>O;++O)H=(f=$[0+4*O]+3)+$[3+4*O],K=$[1+4*O]+$[2+4*O],Q=$[1+4*O]-$[2+4*O],ne=f-$[3+4*O],j[_+0]=H+K>>3,j[_+16]=ne+Q>>3,j[_+32]=H-K>>3,j[_+48]=ne-Q>>3,_+=64}function za(f,x,j){var _,O=x-32,$=Ys,H=255-f[O-1];for(_=0;_<j;++_){var K,Q=$,ne=H+f[x-1];for(K=0;K<j;++K)f[x+K]=Q[ne+f[O+K]];x+=32}}function zo(f,x){za(f,x,4)}function Il(f,x){za(f,x,8)}function Ec(f,x){za(f,x,16)}function Dc(f,x){var j;for(j=0;16>j;++j)a(f,x+32*j,f,x-32,16)}function $o(f,x){var j;for(j=16;0<j;--j)o(f,x,f[x-1],16),x+=32}function $a(f,x,j){var _;for(_=0;16>_;++_)o(x,j+32*_,f,16)}function ra(f,x){var j,_=16;for(j=0;16>j;++j)_+=f[x-1+32*j]+f[x+j-32];$a(_>>5,f,x)}function ja(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x-1+32*j];$a(_>>4,f,x)}function rn(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x+j-32];$a(_>>4,f,x)}function Bn(f,x){$a(128,f,x)}function It(f,x,j){return f+2*x+j+2>>2}function io(f,x){var j,_=x-32;for(_=new Uint8Array([It(f[_-1],f[_+0],f[_+1]),It(f[_+0],f[_+1],f[_+2]),It(f[_+1],f[_+2],f[_+3]),It(f[_+2],f[_+3],f[_+4])]),j=0;4>j;++j)a(f,x+32*j,_,0,_.length)}function Sa(f,x){var j=f[x-1],_=f[x-1+32],O=f[x-1+64],$=f[x-1+96];ue(f,x+0,16843009*It(f[x-1-32],j,_)),ue(f,x+32,16843009*It(j,_,O)),ue(f,x+64,16843009*It(_,O,$)),ue(f,x+96,16843009*It(O,$,$))}function Od(f,x){var j,_=4;for(j=0;4>j;++j)_+=f[x+j-32]+f[x-1+32*j];for(_>>=3,j=0;4>j;++j)o(f,x+32*j,_,4)}function Ic(f,x){var j=f[x-1+0],_=f[x-1+32],O=f[x-1+64],$=f[x-1-32],H=f[x+0-32],K=f[x+1-32],Q=f[x+2-32],ne=f[x+3-32];f[x+0+96]=It(_,O,f[x-1+96]),f[x+1+96]=f[x+0+64]=It(j,_,O),f[x+2+96]=f[x+1+64]=f[x+0+32]=It($,j,_),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=It(H,$,j),f[x+3+64]=f[x+2+32]=f[x+1+0]=It(K,H,$),f[x+3+32]=f[x+2+0]=It(Q,K,H),f[x+3+0]=It(ne,Q,K)}function Sn(f,x){var j=f[x+1-32],_=f[x+2-32],O=f[x+3-32],$=f[x+4-32],H=f[x+5-32],K=f[x+6-32],Q=f[x+7-32];f[x+0+0]=It(f[x+0-32],j,_),f[x+1+0]=f[x+0+32]=It(j,_,O),f[x+2+0]=f[x+1+32]=f[x+0+64]=It(_,O,$),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=It(O,$,H),f[x+3+32]=f[x+2+64]=f[x+1+96]=It($,H,K),f[x+3+64]=f[x+2+96]=It(H,K,Q),f[x+3+96]=It(K,Q,Q)}function Va(f,x){var j=f[x-1+0],_=f[x-1+32],O=f[x-1+64],$=f[x-1-32],H=f[x+0-32],K=f[x+1-32],Q=f[x+2-32],ne=f[x+3-32];f[x+0+0]=f[x+1+64]=$+H+1>>1,f[x+1+0]=f[x+2+64]=H+K+1>>1,f[x+2+0]=f[x+3+64]=K+Q+1>>1,f[x+3+0]=Q+ne+1>>1,f[x+0+96]=It(O,_,j),f[x+0+64]=It(_,j,$),f[x+0+32]=f[x+1+96]=It(j,$,H),f[x+1+32]=f[x+2+96]=It($,H,K),f[x+2+32]=f[x+3+96]=It(H,K,Q),f[x+3+32]=It(K,Q,ne)}function Fc(f,x){var j=f[x+0-32],_=f[x+1-32],O=f[x+2-32],$=f[x+3-32],H=f[x+4-32],K=f[x+5-32],Q=f[x+6-32],ne=f[x+7-32];f[x+0+0]=j+_+1>>1,f[x+1+0]=f[x+0+64]=_+O+1>>1,f[x+2+0]=f[x+1+64]=O+$+1>>1,f[x+3+0]=f[x+2+64]=$+H+1>>1,f[x+0+32]=It(j,_,O),f[x+1+32]=f[x+0+96]=It(_,O,$),f[x+2+32]=f[x+1+96]=It(O,$,H),f[x+3+32]=f[x+2+96]=It($,H,K),f[x+3+64]=It(H,K,Q),f[x+3+96]=It(K,Q,ne)}function Vo(f,x){var j=f[x-1+0],_=f[x-1+32],O=f[x-1+64],$=f[x-1+96];f[x+0+0]=j+_+1>>1,f[x+2+0]=f[x+0+32]=_+O+1>>1,f[x+2+32]=f[x+0+64]=O+$+1>>1,f[x+1+0]=It(j,_,O),f[x+3+0]=f[x+1+32]=It(_,O,$),f[x+3+32]=f[x+1+64]=It(O,$,$),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=$}function oo(f,x){var j=f[x-1+0],_=f[x-1+32],O=f[x-1+64],$=f[x-1+96],H=f[x-1-32],K=f[x+0-32],Q=f[x+1-32],ne=f[x+2-32];f[x+0+0]=f[x+2+32]=j+H+1>>1,f[x+0+32]=f[x+2+64]=_+j+1>>1,f[x+0+64]=f[x+2+96]=O+_+1>>1,f[x+0+96]=$+O+1>>1,f[x+3+0]=It(K,Q,ne),f[x+2+0]=It(H,K,Q),f[x+1+0]=f[x+3+32]=It(j,H,K),f[x+1+32]=f[x+3+64]=It(_,j,H),f[x+1+64]=f[x+3+96]=It(O,_,j),f[x+1+96]=It($,O,_)}function Fl(f,x){var j;for(j=0;8>j;++j)a(f,x+32*j,f,x-32,8)}function sa(f,x){var j;for(j=0;8>j;++j)o(f,x,f[x-1],8),x+=32}function ka(f,x,j){var _;for(_=0;8>_;++_)o(x,j+32*_,f,8)}function na(f,x){var j,_=8;for(j=0;8>j;++j)_+=f[x+j-32]+f[x-1+32*j];ka(_>>4,f,x)}function Ho(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x+j-32];ka(_>>3,f,x)}function Tl(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x-1+32*j];ka(_>>3,f,x)}function Ol(f,x){ka(128,f,x)}function Ha(f,x,j){var _=f[x-j],O=f[x+0],$=3*(O-_)+Ea[1020+f[x-2*j]-f[x+j]],H=el[112+($+4>>3)];f[x-j]=Ys[255+_+el[112+($+3>>3)]],f[x+0]=Ys[255+O-H]}function Aa(f,x,j,_){var O=f[x+0],$=f[x+j];return qn[255+f[x-2*j]-f[x-j]]>_||qn[255+$-O]>_}function lo(f,x,j,_){return 4*qn[255+f[x-j]-f[x+0]]+qn[255+f[x-2*j]-f[x+j]]<=_}function co(f,x,j,_,O){var $=f[x-3*j],H=f[x-2*j],K=f[x-j],Q=f[x+0],ne=f[x+j],we=f[x+2*j],Le=f[x+3*j];return 4*qn[255+K-Q]+qn[255+H-ne]>_?0:qn[255+f[x-4*j]-$]<=O&&qn[255+$-H]<=O&&qn[255+H-K]<=O&&qn[255+Le-we]<=O&&qn[255+we-ne]<=O&&qn[255+ne-Q]<=O}function Un(f,x,j,_){var O=2*_+1;for(_=0;16>_;++_)lo(f,x+_,j,O)&&Ha(f,x+_,j)}function Wa(f,x,j,_){var O=2*_+1;for(_=0;16>_;++_)lo(f,x+_*j,1,O)&&Ha(f,x+_*j,1)}function ji(f,x,j,_){var O;for(O=3;0<O;--O)Un(f,x+=4*j,j,_)}function Wo(f,x,j,_){var O;for(O=3;0<O;--O)Wa(f,x+=4,j,_)}function Os(f,x,j,_,O,$,H,K){for($=2*$+1;0<O--;){if(co(f,x,j,$,H))if(Aa(f,x,j,K))Ha(f,x,j);else{var Q=f,ne=x,we=j,Le=Q[ne-2*we],ae=Q[ne-we],Se=Q[ne+0],_e=Q[ne+we],ze=Q[ne+2*we],De=27*(qe=Ea[1020+3*(Se-ae)+Ea[1020+Le-_e]])+63>>7,Be=18*qe+63>>7,qe=9*qe+63>>7;Q[ne-3*we]=Ys[255+Q[ne-3*we]+qe],Q[ne-2*we]=Ys[255+Le+Be],Q[ne-we]=Ys[255+ae+De],Q[ne+0]=Ys[255+Se-De],Q[ne+we]=Ys[255+_e-Be],Q[ne+2*we]=Ys[255+ze-qe]}x+=_}}function kn(f,x,j,_,O,$,H,K){for($=2*$+1;0<O--;){if(co(f,x,j,$,H))if(Aa(f,x,j,K))Ha(f,x,j);else{var Q=f,ne=x,we=j,Le=Q[ne-we],ae=Q[ne+0],Se=Q[ne+we],_e=el[112+(4+(ze=3*(ae-Le))>>3)],ze=el[112+(ze+3>>3)],De=_e+1>>1;Q[ne-2*we]=Ys[255+Q[ne-2*we]+De],Q[ne-we]=Ys[255+Le+ze],Q[ne+0]=Ys[255+ae-_e],Q[ne+we]=Ys[255+Se-De]}x+=_}}function w(f,x,j,_,O,$){Os(f,x,j,1,16,_,O,$)}function T(f,x,j,_,O,$){Os(f,x,1,j,16,_,O,$)}function oe(f,x,j,_,O,$){var H;for(H=3;0<H;--H)kn(f,x+=4*j,j,1,16,_,O,$)}function ve(f,x,j,_,O,$){var H;for(H=3;0<H;--H)kn(f,x+=4,1,j,16,_,O,$)}function Ce(f,x,j,_,O,$,H,K){Os(f,x,O,1,8,$,H,K),Os(j,_,O,1,8,$,H,K)}function Ve(f,x,j,_,O,$,H,K){Os(f,x,1,O,8,$,H,K),Os(j,_,1,O,8,$,H,K)}function Ke(f,x,j,_,O,$,H,K){kn(f,x+4*O,O,1,8,$,H,K),kn(j,_+4*O,O,1,8,$,H,K)}function ft(f,x,j,_,O,$,H,K){kn(f,x+4,1,O,8,$,H,K),kn(j,_+4,1,O,8,$,H,K)}function pt(){this.ba=new Zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Lt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rr(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new B}function _r(){this.xb=this.a=0,this.l=new Ts,this.ca=new Zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rr,this.ab=0,this.gc=d(4,zt),this.Oc=0}function Qr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ir(f,x,j,_,O,$,H){for(f=f==null?0:f[x+0],x=0;x<H;++x)O[$+x]=f+j[_+x]&255,f=O[$+x]}function as(f,x,j,_,O,$,H){var K;if(f==null)ir(null,null,j,_,O,$,H);else for(K=0;K<H;++K)O[$+K]=f[x+K]+j[_+K]&255}function Xr(f,x,j,_,O,$,H){if(f==null)ir(null,null,j,_,O,$,H);else{var K,Q=f[x+0],ne=Q,we=Q;for(K=0;K<H;++K)ne=we+(Q=f[x+K])-ne,we=j[_+K]+(-256&ne?0>ne?0:255:ne)&255,ne=Q,O[$+K]=we}}function _s(f,x,j,_){var O=x.width,$=x.o;if(r(f!=null&&x!=null),0>j||0>=_||j+_>$)return null;if(!f.Cc){if(f.ga==null){var H;if(f.ga=new Qr,(H=f.ga==null)||(H=x.width*x.o,r(f.Gb.length==0),f.Gb=l(H),f.Uc=0,f.Gb==null?H=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,H=1),H=!H),!H){H=f.ga;var K=f.Fa,Q=f.P,ne=f.qc,we=f.mb,Le=f.nb,ae=Q+1,Se=ne-1,_e=H.l;if(r(K!=null&&we!=null&&x!=null),Rs[0]=null,Rs[1]=ir,Rs[2]=as,Rs[3]=Xr,H.ca=we,H.tb=Le,H.c=x.width,H.i=x.height,r(0<H.c&&0<H.i),1>=ne)x=0;else if(H.$a=3&K[Q+0],H.Z=K[Q+0]>>2&3,H.Lc=K[Q+0]>>4&3,Q=K[Q+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||Q)x=0;else if(_e.put=_t,_e.ac=Tn,_e.bc=vn,_e.ma=H,_e.width=x.width,_e.height=x.height,_e.Da=x.Da,_e.v=x.v,_e.va=x.va,_e.j=x.j,_e.o=x.o,H.$a)e:{r(H.$a==1),x=Xi();t:for(;;){if(x==null){x=0;break e}if(r(H!=null),H.mc=x,x.c=H.c,x.i=H.i,x.l=H.l,x.l.ma=H,x.l.width=H.c,x.l.height=H.i,x.a=0,be(x.m,K,ae,Se),!ea(H.c,H.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Zn(x.s)?(H.ic=1,K=x.c*x.i,x.Ta=null,x.Ua=0,x.V=l(K),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(H.ic=0,x=wi(x,H.c)),!x))break t;x=1;break e}H.mc=null,x=0}else x=Se>=H.c*H.i;H=!x}if(H)return null;f.ga.Lc!=1?f.Ga=0:_=$-j}r(f.ga!=null),r(j+_<=$);e:{if(x=(K=f.ga).c,$=K.l.o,K.$a==0){if(ae=f.rc,Se=f.Vc,_e=f.Fa,Q=f.P+1+j*x,ne=f.mb,we=f.nb+j*x,r(Q<=f.P+f.qc),K.Z!=0)for(r(Rs[K.Z]!=null),H=0;H<_;++H)Rs[K.Z](ae,Se,_e,Q,ne,we,x),ae=ne,Se=we,we+=x,Q+=x;else for(H=0;H<_;++H)a(ne,we,_e,Q,x),ae=ne,Se=we,we+=x,Q+=x;f.rc=ae,f.Vc=Se}else{if(r(K.mc!=null),x=j+_,r((H=K.mc)!=null),r(x<=H.i),H.C>=x)x=1;else if(K.ic||uo(),K.ic){K=H.V,ae=H.Ba,Se=H.c;var ze=H.i,De=(_e=1,Q=H.$/Se,ne=H.$%Se,we=H.m,Le=H.s,H.$),Be=Se*ze,qe=Se*x,He=Le.wc,Ge=De<qe?Yr(Le,ne,Q):null;r(De<=Be),r(x<=ze),r(Zn(Le));t:for(;;){for(;!we.h&&De<qe;){if(ne&He||(Ge=Yr(Le,ne,Q)),r(Ge!=null),ye(we),256>(ze=gr(Ge.G[0],Ge.H[0],we)))K[ae+De]=ze,++De,++ne>=Se&&(ne=0,++Q<=x&&!(Q%16)&&Ps(H,Q));else{if(!(280>ze)){_e=0;break t}ze=Fs(ze-256,we);var jt,ut=gr(Ge.G[4],Ge.H[4],we);if(ye(we),!(De>=(ut=On(Se,ut=Fs(ut,we)))&&Be-De>=ze)){_e=0;break t}for(jt=0;jt<ze;++jt)K[ae+De+jt]=K[ae+De+jt-ut];for(De+=ze,ne+=ze;ne>=Se;)ne-=Se,++Q<=x&&!(Q%16)&&Ps(H,Q);De<qe&&ne&He&&(Ge=Yr(Le,ne,Q))}r(we.h==fe(we))}Ps(H,Q>x?x:Q);break t}!_e||we.h&&De<Be?(_e=0,H.a=we.h?5:3):H.$=De,x=_e}else x=Rn(H,H.V,H.Ba,H.c,H.i,x,Zi);if(!x){_=0;break e}}j+_>=$&&(f.Cc=1),_=1}if(!_)return null;if(f.Cc&&((_=f.ga)!=null&&(_.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+j*O}function Ga(f,x,j,_,O,$){for(;0<O--;){var H,K=f,Q=x+(j?1:0),ne=f,we=x+(j?0:3);for(H=0;H<_;++H){var Le=ne[we+4*H];Le!=255&&(Le*=32897,K[Q+4*H+0]=K[Q+4*H+0]*Le>>23,K[Q+4*H+1]=K[Q+4*H+1]*Le>>23,K[Q+4*H+2]=K[Q+4*H+2]*Le>>23)}x+=$}}function Si(f,x,j,_,O){for(;0<_--;){var $;for($=0;$<j;++$){var H=f[x+2*$+0],K=15&(ne=f[x+2*$+1]),Q=4369*K,ne=(240&ne|ne>>4)*Q>>16;f[x+2*$+0]=(240&H|H>>4)*Q>>16&240|(15&H|H<<4)*Q>>16>>4&15,f[x+2*$+1]=240&ne|K}x+=O}}function Tc(f,x,j,_,O,$,H,K){var Q,ne,we=255;for(ne=0;ne<O;++ne){for(Q=0;Q<_;++Q){var Le=f[x+Q];$[H+4*Q]=Le,we&=Le}x+=j,H+=K}return we!=255}function Oc(f,x,j,_,O){var $;for($=0;$<O;++$)j[_+$]=f[x+$]>>8}function uo(){go=Ga,Ud=Si,zl=Tc,qd=Oc}function aa(f,x,j){G[f]=function(_,O,$,H,K,Q,ne,we,Le,ae,Se,_e,ze,De,Be,qe,He){var Ge,jt=He-1>>1,ut=K[Q+0]|ne[we+0]<<16,$t=Le[ae+0]|Se[_e+0]<<16;r(_!=null);var gt=3*ut+$t+131074>>2;for(x(_[O+0],255&gt,gt>>16,ze,De),$!=null&&(gt=3*$t+ut+131074>>2,x($[H+0],255&gt,gt>>16,Be,qe)),Ge=1;Ge<=jt;++Ge){var Yt=K[Q+Ge]|ne[we+Ge]<<16,Ir=Le[ae+Ge]|Se[_e+Ge]<<16,Vt=ut+Yt+$t+Ir+524296,ht=Vt+2*(Yt+$t)>>3;gt=ht+ut>>1,ut=(Vt=Vt+2*(ut+Ir)>>3)+Yt>>1,x(_[O+2*Ge-1],255&gt,gt>>16,ze,De+(2*Ge-1)*j),x(_[O+2*Ge-0],255&ut,ut>>16,ze,De+(2*Ge-0)*j),$!=null&&(gt=Vt+$t>>1,ut=ht+Ir>>1,x($[H+2*Ge-1],255&gt,gt>>16,Be,qe+(2*Ge-1)*j),x($[H+2*Ge+0],255&ut,ut>>16,Be,qe+(2*Ge+0)*j)),ut=Yt,$t=Ir}1&He||(gt=3*ut+$t+131074>>2,x(_[O+He-1],255&gt,gt>>16,ze,De+(He-1)*j),$!=null&&(gt=3*$t+ut+131074>>2,x($[H+He-1],255&gt,gt>>16,Be,qe+(He-1)*j)))}}function Rl(){cn[$c]=om,cn[Ei]=Di,cn[Xu]=lm,cn[$l]=nl,cn[Vl]=vo,cn[ur]=Yl,cn[Vc]=Jd,cn[tl]=Di,cn[xo]=nl,cn[Hl]=vo,cn[Wl]=Yl}function ki(f){return f&-16384?0>f?0:255:f>>Ii}function Ai(f,x){return ki((19077*f>>8)+(26149*x>>8)-14234)}function xs(f,x,j){return ki((19077*f>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Ka(f,x){return ki((19077*f>>8)+(33050*x>>8)-17685)}function Ca(f,x,j,_,O){_[O+0]=Ai(f,j),_[O+1]=xs(f,x,j),_[O+2]=Ka(f,x)}function Go(f,x,j,_,O){_[O+0]=Ka(f,x),_[O+1]=xs(f,x,j),_[O+2]=Ai(f,j)}function Ml(f,x,j,_,O){var $=xs(f,x,j);x=$<<3&224|Ka(f,x)>>3,_[O+0]=248&Ai(f,j)|$>>5,_[O+1]=x}function Hs(f,x,j,_,O){var $=240&Ka(f,x)|15;_[O+0]=240&Ai(f,j)|xs(f,x,j)>>4,_[O+1]=$}function Rc(f,x,j,_,O){_[O+0]=255,Ca(f,x,j,_,O+1)}function Ko(f,x,j,_,O){Go(f,x,j,_,O),_[O+3]=255}function Mc(f,x,j,_,O){Ca(f,x,j,_,O),_[O+3]=255}function is(f,x){return 0>f?0:f>x?x:f}function sn(f,x,j){G[f]=function(_,O,$,H,K,Q,ne,we,Le){for(var ae=we+(-2&Le)*j;we!=ae;)x(_[O+0],$[H+0],K[Q+0],ne,we),x(_[O+1],$[H+0],K[Q+0],ne,we+j),O+=2,++H,++Q,we+=2*j;1&Le&&x(_[O+0],$[H+0],K[Q+0],ne,we)}}function Ya(f,x,j){return j==0?f==0?x==0?6:5:x==0?4:0:j}function Bl(f,x,j,_,O){switch(f>>>30){case 3:zr(x,j,_,O,0);break;case 2:os(x,j,_,O);break;case 1:ia(x,j,_,O)}}function Ja(f,x){var j,_,O=x.M,$=x.Nb,H=f.oc,K=f.pc+40,Q=f.oc,ne=f.pc+584,we=f.oc,Le=f.pc+600;for(j=0;16>j;++j)H[K+32*j-1]=129;for(j=0;8>j;++j)Q[ne+32*j-1]=129,we[Le+32*j-1]=129;for(0<O?H[K-1-32]=Q[ne-1-32]=we[Le-1-32]=129:(o(H,K-32-1,127,21),o(Q,ne-32-1,127,9),o(we,Le-32-1,127,9)),_=0;_<f.za;++_){var ae=x.ya[x.aa+_];if(0<_){for(j=-1;16>j;++j)a(H,K+32*j-4,H,K+32*j+12,4);for(j=-1;8>j;++j)a(Q,ne+32*j-4,Q,ne+32*j+4,4),a(we,Le+32*j-4,we,Le+32*j+4,4)}var Se=f.Gd,_e=f.Hd+_,ze=ae.ad,De=ae.Hc;if(0<O&&(a(H,K-32,Se[_e].y,0,16),a(Q,ne-32,Se[_e].f,0,8),a(we,Le-32,Se[_e].ea,0,8)),ae.Za){var Be=H,qe=K-32+16;for(0<O&&(_>=f.za-1?o(Be,qe,Se[_e].y[15],4):a(Be,qe,Se[_e+1].y,0,4)),j=0;4>j;j++)Be[qe+128+j]=Be[qe+256+j]=Be[qe+384+j]=Be[qe+0+j];for(j=0;16>j;++j,De<<=2)Be=H,qe=K+Qd[j],zn[ae.Ob[j]](Be,qe),Bl(De,ze,16*+j,Be,qe)}else if(Be=Ya(_,O,ae.Ob[0]),Js[Be](H,K),De!=0)for(j=0;16>j;++j,De<<=2)Bl(De,ze,16*+j,H,K+Qd[j]);for(j=ae.Gc,Be=Ya(_,O,ae.Dd),ln[Be](Q,ne),ln[Be](we,Le),De=ze,Be=Q,qe=ne,255&(ae=0|j)&&(170&ae?La(De,256,Be,qe):Xo(De,256,Be,qe)),ae=we,De=Le,255&(j>>=8)&&(170&j?La(ze,320,ae,De):Xo(ze,320,ae,De)),O<f.Ub-1&&(a(Se[_e].y,0,H,K+480,16),a(Se[_e].f,0,Q,ne+224,8),a(Se[_e].ea,0,we,Le+224,8)),j=8*$*f.B,Se=f.sa,_e=f.ta+16*_+16*$*f.R,ze=f.qa,ae=f.ra+8*_+j,De=f.Ha,Be=f.Ia+8*_+j,j=0;16>j;++j)a(Se,_e+j*f.R,H,K+32*j,16);for(j=0;8>j;++j)a(ze,ae+j*f.B,Q,ne+32*j,8),a(De,Be+j*f.B,we,Le+32*j,8)}}function ho(f,x,j,_,O,$,H,K,Q){var ne=[0],we=[0],Le=0,ae=Q!=null?Q.kd:0,Se=Q??new Lt;if(f==null||12>j)return 7;Se.data=f,Se.w=x,Se.ha=j,x=[x],j=[j],Se.gb=[Se.gb];e:{var _e=x,ze=j,De=Se.gb;if(r(f!=null),r(ze!=null),r(De!=null),De[0]=0,12<=ze[0]&&!s(f,_e[0],"RIFF")){if(s(f,_e[0]+8,"WEBP")){De=3;break e}var Be=Me(f,_e[0]+4);if(12>Be||4294967286<Be){De=3;break e}if(ae&&Be>ze[0]-8){De=7;break e}De[0]=Be,_e[0]+=12,ze[0]-=12}De=0}if(De!=0)return De;for(Be=0<Se.gb[0],j=j[0];;){e:{var qe=f;ze=x,De=j;var He=ne,Ge=we,jt=_e=[0];if((gt=Le=[Le])[0]=0,8>De[0])De=7;else{if(!s(qe,ze[0],"VP8X")){if(Me(qe,ze[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var ut=Me(qe,ze[0]+8),$t=1+Xe(qe,ze[0]+12);if(2147483648<=$t*(qe=1+Xe(qe,ze[0]+15))){De=3;break e}jt!=null&&(jt[0]=ut),He!=null&&(He[0]=$t),Ge!=null&&(Ge[0]=qe),ze[0]+=18,De[0]-=18,gt[0]=1}De=0}}if(Le=Le[0],_e=_e[0],De!=0)return De;if(ze=!!(2&_e),!Be&&Le)return 3;if($!=null&&($[0]=!!(16&_e)),H!=null&&(H[0]=ze),K!=null&&(K[0]=0),H=ne[0],_e=we[0],Le&&ze&&Q==null){De=0;break}if(4>j){De=7;break}if(Be&&Le||!Be&&!Le&&!s(f,x[0],"ALPH")){j=[j],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{ut=f,De=x,Be=j;var gt=Se.gb;He=Se.na,Ge=Se.P,jt=Se.Sa,$t=22,r(ut!=null),r(Be!=null),qe=De[0];var Yt=Be[0];for(r(He!=null),r(jt!=null),He[0]=null,Ge[0]=null,jt[0]=0;;){if(De[0]=qe,Be[0]=Yt,8>Yt){De=7;break e}var Ir=Me(ut,qe+4);if(4294967286<Ir){De=3;break e}var Vt=8+Ir+1&-2;if($t+=Vt,0<gt&&$t>gt){De=3;break e}if(!s(ut,qe,"VP8 ")||!s(ut,qe,"VP8L")){De=0;break e}if(Yt[0]<Vt){De=7;break e}s(ut,qe,"ALPH")||(He[0]=ut,Ge[0]=qe+8,jt[0]=Ir),qe+=Vt,Yt-=Vt}}if(j=j[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],De!=0)break}j=[j],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(gt=f,De=x,Be=j,He=Se.gb[0],Ge=Se.Ja,jt=Se.xa,ut=De[0],qe=!s(gt,ut,"VP8 "),$t=!s(gt,ut,"VP8L"),r(gt!=null),r(Be!=null),r(Ge!=null),r(jt!=null),8>Be[0])De=7;else{if(qe||$t){if(gt=Me(gt,ut+4),12<=He&&gt>He-12){De=3;break e}if(ae&&gt>Be[0]-8){De=7;break e}Ge[0]=gt,De[0]+=8,Be[0]-=8,jt[0]=$t}else jt[0]=5<=Be[0]&&gt[ut+0]==47&&!(gt[ut+4]>>5),Ge[0]=Be[0];De=0}if(j=j[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],x=x[0],De!=0)break;if(4294967286<Se.Ja)return 3;if(K==null||ze||(K[0]=Se.xa?2:1),H=[H],_e=[_e],Se.xa){if(5>j){De=7;break}K=H,ae=_e,ze=$,f==null||5>j?f=0:5<=j&&f[x+0]==47&&!(f[x+4]>>5)?(Be=[0],gt=[0],He=[0],be(Ge=new te,f,x,j),Xn(Ge,Be,gt,He)?(K!=null&&(K[0]=Be[0]),ae!=null&&(ae[0]=gt[0]),ze!=null&&(ze[0]=He[0]),f=1):f=0):f=0}else{if(10>j){De=7;break}K=_e,f==null||10>j||!_c(f,x+3,j-3)?f=0:(ae=f[x+0]|f[x+1]<<8|f[x+2]<<16,ze=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&ae||3<(ae>>1&7)||!(ae>>4&1)||ae>>5>=Se.Ja||!ze||!f?f=0:(H&&(H[0]=ze),K&&(K[0]=f),f=1))}if(!f||(H=H[0],_e=_e[0],Le&&(ne[0]!=H||we[0]!=_e)))return 3;Q!=null&&(Q[0]=Se,Q.offset=x-Q.w,r(4294967286>x-Q.w),r(Q.offset==Q.ha-j));break}return De==0||De==7&&Le&&Q==null?($!=null&&($[0]|=Se.na!=null&&0<Se.na.length),_!=null&&(_[0]=H),O!=null&&(O[0]=_e),0):De}function Ws(f,x,j){var _=x.width,O=x.height,$=0,H=0,K=_,Q=O;if(x.Da=f!=null&&0<f.Da,x.Da&&(K=f.cd,Q=f.bd,$=f.v,H=f.j,11>j||($&=-2,H&=-2),0>$||0>H||0>=K||0>=Q||$+K>_||H+Q>O))return 0;if(x.v=$,x.j=H,x.va=$+K,x.o=H+Q,x.U=K,x.T=Q,x.da=f!=null&&0<f.da,x.da){if(!et(K,Q,j=[f.ib],$=[f.hb]))return 0;x.ib=j[0],x.hb=$[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*_/4&&x.hb<3*O/4,x.Kb=0),1}function Gs(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Ci(f,x,j,_){if(_==null||0>=f||0>=x)return 2;if(j!=null){if(j.Da){var O=j.cd,$=j.bd,H=-2&j.v,K=-2&j.j;if(0>H||0>K||0>=O||0>=$||H+O>f||K+$>x)return 2;f=O,x=$}if(j.da){if(!et(f,x,O=[j.ib],$=[j.hb]))return 2;f=O[0],x=$[0]}}_.width=f,_.height=x;e:{var Q=_.width,ne=_.height;if(f=_.S,0>=Q||0>=ne||!(f>=$c&&13>f))f=2;else{if(0>=_.Rd&&_.sd==null){H=$=O=x=0;var we=(K=Q*Jl[f])*ne;if(11>f||($=(ne+1)/2*(x=(Q+1)/2),f==12&&(H=(O=Q)*ne)),(ne=l(we+2*$+H))==null){f=1;break e}_.sd=ne,11>f?((Q=_.f.RGBA).eb=ne,Q.fb=0,Q.A=K,Q.size=we):((Q=_.f.kb).y=ne,Q.O=0,Q.fa=K,Q.Fd=we,Q.f=ne,Q.N=0+we,Q.Ab=x,Q.Cd=$,Q.ea=ne,Q.W=0+we+$,Q.Db=x,Q.Ed=$,f==12&&(Q.F=ne,Q.J=0+we+2*$),Q.Tc=H,Q.lb=O)}if(x=1,O=_.S,$=_.width,H=_.height,O>=$c&&13>O)if(11>O)f=_.f.RGBA,x&=(K=Math.abs(f.A))*(H-1)+$<=f.size,x&=K>=$*Jl[O],x&=f.eb!=null;else{f=_.f.kb,K=($+1)/2,we=(H+1)/2,Q=Math.abs(f.fa),ne=Math.abs(f.Ab);var Le=Math.abs(f.Db),ae=Math.abs(f.lb),Se=ae*(H-1)+$;x&=Q*(H-1)+$<=f.Fd,x&=ne*(we-1)+K<=f.Cd,x=(x&=Le*(we-1)+K<=f.Ed)&Q>=$&ne>=K&Le>=K,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,O==12&&(x&=ae>=$,x&=Se<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||j!=null&&j.fd&&(f=Gs(_)),f}var Ks=64,Pi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ul=24,_i=32,Dr=8,Bc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ce("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(f){return f},G.Predictor2=function(f,x,j){return x[j+0]},G.Predictor3=function(f,x,j){return x[j+1]},G.Predictor4=function(f,x,j){return x[j-1]},G.Predictor5=function(f,x,j){return Oe(Oe(f,x[j+1]),x[j+0])},G.Predictor6=function(f,x,j){return Oe(f,x[j-1])},G.Predictor7=function(f,x,j){return Oe(f,x[j+0])},G.Predictor8=function(f,x,j){return Oe(x[j-1],x[j+0])},G.Predictor9=function(f,x,j){return Oe(x[j+0],x[j+1])},G.Predictor10=function(f,x,j){return Oe(Oe(f,x[j-1]),Oe(x[j+0],x[j+1]))},G.Predictor11=function(f,x,j){var _=x[j+0];return 0>=We(_>>24&255,f>>24&255,(x=x[j-1])>>24&255)+We(_>>16&255,f>>16&255,x>>16&255)+We(_>>8&255,f>>8&255,x>>8&255)+We(255&_,255&f,255&x)?_:f},G.Predictor12=function(f,x,j){var _=x[j+0];return(Re((f>>24&255)+(_>>24&255)-((x=x[j-1])>>24&255))<<24|Re((f>>16&255)+(_>>16&255)-(x>>16&255))<<16|Re((f>>8&255)+(_>>8&255)-(x>>8&255))<<8|Re((255&f)+(255&_)-(255&x)))>>>0},G.Predictor13=function(f,x,j){var _=x[j-1];return(Fe((f=Oe(f,x[j+0]))>>24&255,_>>24&255)<<24|Fe(f>>16&255,_>>16&255)<<16|Fe(f>>8&255,_>>8&255)<<8|Fe(255&f,255&_))>>>0};var nn=G.PredictorAdd0;G.PredictorAdd1=at,ce("Predictor2","PredictorAdd2"),ce("Predictor3","PredictorAdd3"),ce("Predictor4","PredictorAdd4"),ce("Predictor5","PredictorAdd5"),ce("Predictor6","PredictorAdd6"),ce("Predictor7","PredictorAdd7"),ce("Predictor8","PredictorAdd8"),ce("Predictor9","PredictorAdd9"),ce("Predictor10","PredictorAdd10"),ce("Predictor11","PredictorAdd11"),ce("Predictor12","PredictorAdd12"),ce("Predictor13","PredictorAdd13");var an=G.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Yo,Li=G.ColorIndexInverseTransform,Jo=G.MapARGB,fo=G.VP8LColorIndexInverseTransformAlpha,Qa=G.MapAlpha,Xa=G.VP8LPredictorsAdd=[];Xa.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var Pa,Qo,on,_a,xr,yr,qr,zr,os,La,ia,Xo,Rd,Md,Uc,Ju,Qu,mo,qc,Zo,zc,Bd,ql,po,go,Ud,zl,qd,zd=l(511),$d=l(2041),Vd=l(225),Hd=l(767),Wd=0,Ea=$d,el=Vd,Ys=Hd,qn=zd,$c=0,Ei=1,Xu=2,$l=3,Vl=4,ur=5,Vc=6,tl=7,xo=8,Hl=9,Wl=10,Gl=[2,3,7],Hc=[3,3,11],yo=[280,256,256,256,40],Zu=[0,1,1,1,0],sm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],eh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wc=8,rl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bo=null,Gd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Kd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],th=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],am=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],im=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Js=[],zn=[],ln=[],Da=1,sl=2,Rs=[],cn=[];aa("UpsampleRgbLinePair",Ca,3),aa("UpsampleBgrLinePair",Go,3),aa("UpsampleRgbaLinePair",Mc,4),aa("UpsampleBgraLinePair",Ko,4),aa("UpsampleArgbLinePair",Rc,4),aa("UpsampleRgba4444LinePair",Hs,2),aa("UpsampleRgb565LinePair",Ml,2);var om=G.UpsampleRgbLinePair,lm=G.UpsampleBgrLinePair,Di=G.UpsampleRgbaLinePair,nl=G.UpsampleBgraLinePair,vo=G.UpsampleArgbLinePair,Yl=G.UpsampleRgba4444LinePair,Jd=G.UpsampleRgb565LinePair,Za=16,oa=1<<Za-1,lr=-227,cr=482,Ii=6,Ls=0,dn=l(256),wo=l(256),al=l(256),un=l(256),Gc=l(cr-lr),sh=l(cr-lr);sn("YuvToRgbRow",Ca,3),sn("YuvToBgrRow",Go,3),sn("YuvToRgbaRow",Mc,4),sn("YuvToBgraRow",Ko,4),sn("YuvToArgbRow",Rc,4),sn("YuvToRgba4444Row",Hs,2),sn("YuvToRgb565Row",Ml,2);var Qd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],No=[0,2,8],nh=[8,7,6,4,4,2,2,2,1,1,1,1],ei=1;this.WebPDecodeRGBA=function(f,x,j,_,O){var $=Ei,H=new pt,K=new Zt;H.ba=K,K.S=$,K.width=[K.width],K.height=[K.height];var Q=K.width,ne=K.height,we=new Ot;if(we==null||f==null)var Le=2;else r(we!=null),Le=ho(f,x,j,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Le!=0?Q=0:(Q!=null&&(Q[0]=we.width[0]),ne!=null&&(ne[0]=we.height[0]),Q=1),Q){K.width=K.width[0],K.height=K.height[0],_!=null&&(_[0]=K.width),O!=null&&(O[0]=K.height);e:{if(_=new Ts,(O=new Lt).data=f,O.w=x,O.ha=j,O.kd=1,x=[0],r(O!=null),((f=ho(O.data,O.w,O.ha,null,null,null,x,null,O))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(r(H!=null),_.data=O.data,_.w=O.w+O.offset,_.ha=O.ha-O.offset,_.put=_t,_.ac=Tn,_.bc=vn,_.ma=H,O.xa){if((f=Xi())==null){H=1;break e}if((function(ae,Se){var _e=[0],ze=[0],De=[0];t:for(;;){if(ae==null)return 0;if(Se==null)return ae.a=2,0;if(ae.l=Se,ae.a=0,be(ae.m,Se.data,Se.w,Se.ha),!Xn(ae.m,_e,ze,De)){ae.a=3;break t}if(ae.xb=sl,Se.width=_e[0],Se.height=ze[0],!ea(_e[0],ze[0],1,ae,null))break t;return 1}return r(ae.a!=0),0})(f,_)){if(_=(x=Ci(_.width,_.height,H.Oa,H.ba))==0){t:{_=f;r:for(;;){if(_==null){_=0;break t}if(r(_.s.yc!=null),r(_.s.Ya!=null),r(0<_.s.Wb),r((j=_.l)!=null),r((O=j.ma)!=null),_.xb!=0){if(_.ca=O.ba,_.tb=O.tb,r(_.ca!=null),!Ws(O.Oa,j,$l)){_.a=2;break r}if(!wi(_,j.width)||j.da)break r;if((j.da||Pt(_.ca.S))&&uo(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&uo()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!me(_.s.vb,_.s.Wa.Xa)){_.a=1;break r}_.xb=0}if(!Rn(_,_.V,_.Ba,_.c,_.i,j.o,vi))break r;O.Dc=_.Ma,_=1;break t}r(_.a!=0),_=0}_=!_}_&&(x=f.a)}else x=f.a}else{if((f=new Td)==null){H=1;break e}if(f.Fa=O.na,f.P=O.P,f.qc=O.Sa,ro(f,_)){if((x=Ci(_.width,_.height,H.Oa,H.ba))==0){if(f.Aa=0,j=H.Oa,r((O=f)!=null),j!=null){if(0<(Q=0>(Q=j.Md)?0:100<Q?255:255*Q/100)){for(ne=we=0;4>ne;++ne)12>(Le=O.pb[ne]).lc&&(Le.ia=Q*nh[0>Le.lc?0:Le.lc]>>3),we|=Le.ia;we&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=j.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(ae,Se){if(ae==null)return 0;if(Se==null)return Jr(ae,2,"NULL VP8Io parameter in VP8Decode().");if(!ae.cb&&!ro(ae,Se))return 0;if(r(ae.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(ae.L=0);var _e=No[ae.L];if(ae.L==2?(ae.yb=0,ae.zb=0):(ae.yb=Se.v-_e>>4,ae.zb=Se.j-_e>>4,0>ae.yb&&(ae.yb=0),0>ae.zb&&(ae.zb=0)),ae.Va=Se.o+15+_e>>4,ae.Hb=Se.va+15+_e>>4,ae.Hb>ae.za&&(ae.Hb=ae.za),ae.Va>ae.Ub&&(ae.Va=ae.Ub),0<ae.L){var ze=ae.ed;for(_e=0;4>_e;++_e){var De;if(ae.Qa.Cb){var Be=ae.Qa.Lb[_e];ae.Qa.Fb||(Be+=ze.Tb)}else Be=ze.Tb;for(De=0;1>=De;++De){var qe=ae.gd[_e][De],He=Be;if(ze.Pc&&(He+=ze.vd[0],De&&(He+=ze.od[0])),0<(He=0>He?0:63<He?63:He)){var Ge=He;0<ze.wb&&(Ge=4<ze.wb?Ge>>2:Ge>>1)>9-ze.wb&&(Ge=9-ze.wb),1>Ge&&(Ge=1),qe.dd=Ge,qe.tc=2*He+Ge,qe.ld=40<=He?2:15<=He?1:0}else qe.tc=0;qe.La=De}}}_e=0}else Jr(ae,6,"Frame setup failed"),_e=ae.a;if(_e=_e==0){if(_e){ae.$c=0,0<ae.Aa||(ae.Ic=ei);t:{_e=ae.Ic,ze=4*(Ge=ae.za);var jt=32*Ge,ut=Ge+1,$t=0<ae.L?Ge*(0<ae.Aa?2:1):0,gt=(ae.Aa==2?2:1)*Ge;if((qe=ze+832+(De=3*(16*_e+No[ae.L])/2*jt)+(Be=ae.Fa!=null&&0<ae.Fa.length?ae.Kc.c*ae.Kc.i:0))!=qe)_e=0;else{if(qe>ae.Vb){if(ae.Vb=0,ae.Ec=l(qe),ae.Fc=0,ae.Ec==null){_e=Jr(ae,1,"no memory during frame initialization.");break t}ae.Vb=qe}qe=ae.Ec,He=ae.Fc,ae.Ac=qe,ae.Bc=He,He+=ze,ae.Gd=d(jt,jn),ae.Hd=0,ae.rb=d(ut+1,Ni),ae.sb=1,ae.wa=$t?d($t,Nn):null,ae.Y=0,ae.D.Nb=0,ae.D.wa=ae.wa,ae.D.Y=ae.Y,0<ae.Aa&&(ae.D.Y+=Ge),r(!0),ae.oc=qe,ae.pc=He,He+=832,ae.ya=d(gt,Uo),ae.aa=0,ae.D.ya=ae.ya,ae.D.aa=ae.aa,ae.Aa==2&&(ae.D.aa+=Ge),ae.R=16*Ge,ae.B=8*Ge,Ge=(jt=No[ae.L])*ae.R,jt=jt/2*ae.B,ae.sa=qe,ae.ta=He+Ge,ae.qa=ae.sa,ae.ra=ae.ta+16*_e*ae.R+jt,ae.Ha=ae.qa,ae.Ia=ae.ra+8*_e*ae.B+jt,ae.$c=0,He+=De,ae.mb=Be?qe:null,ae.nb=Be?He:null,r(He+Be<=ae.Fc+ae.Vb),ta(ae),o(ae.Ac,ae.Bc,0,ze),_e=1}}if(_e){if(Se.ka=0,Se.y=ae.sa,Se.O=ae.ta,Se.f=ae.qa,Se.N=ae.ra,Se.ea=ae.Ha,Se.Vd=ae.Ia,Se.fa=ae.R,Se.Rc=ae.B,Se.F=null,Se.J=0,!Wd){for(_e=-255;255>=_e;++_e)zd[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)$d[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)Vd[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)Hd[255+_e]=0>_e?0:255<_e?255:_e;Wd=1}qr=er,zr=Dl,La=ao,ia=Na,Xo=qo,os=Lc,Rd=w,Md=T,Uc=Ce,Ju=Ve,Qu=oe,mo=ve,qc=Ke,Zo=ft,zc=Un,Bd=Wa,ql=ji,po=Wo,zn[0]=Od,zn[1]=zo,zn[2]=io,zn[3]=Sa,zn[4]=Ic,zn[5]=Va,zn[6]=Sn,zn[7]=Fc,zn[8]=oo,zn[9]=Vo,Js[0]=ra,Js[1]=Ec,Js[2]=Dc,Js[3]=$o,Js[4]=ja,Js[5]=rn,Js[6]=Bn,ln[0]=na,ln[1]=Il,ln[2]=Fl,ln[3]=sa,ln[4]=Tl,ln[5]=Ho,ln[6]=Ol,_e=1}else _e=0}_e&&(_e=(function(Yt,Ir){for(Yt.M=0;Yt.M<Yt.Va;++Yt.M){var Vt,ht=Yt.Jc[Yt.M&Yt.Xb],st=Yt.m,$r=Yt;for(Vt=0;Vt<$r.za;++Vt){var Tt=st,Kt=$r,br=Kt.Ac,ys=Kt.Bc+4*Vt,Zr=Kt.zc,Lr=Kt.ya[Kt.aa+Vt];if(Kt.Qa.Bb?Lr.$b=de(Tt,Kt.Pa.jb[0])?2+de(Tt,Kt.Pa.jb[2]):de(Tt,Kt.Pa.jb[1]):Lr.$b=0,Kt.kc&&(Lr.Ad=de(Tt,Kt.Bd)),Lr.Za=!de(Tt,145)+0,Lr.Za){var ls=Lr.Ob,bs=0;for(Kt=0;4>Kt;++Kt){var Sr,Xt=Zr[0+Kt];for(Sr=0;4>Sr;++Sr){Xt=am[br[ys+Sr]][Xt];for(var sr=th[de(Tt,Xt[0])];0<sr;)sr=th[2*sr+de(Tt,Xt[sr])];Xt=-sr,br[ys+Sr]=Xt}a(ls,bs,br,ys,4),bs+=4,Zr[0+Kt]=Xt}}else Xt=de(Tt,156)?de(Tt,128)?1:3:de(Tt,163)?2:0,Lr.Ob[0]=Xt,o(br,ys,Xt,4),o(Zr,0,Xt,4);Lr.Dd=de(Tt,142)?de(Tt,114)?de(Tt,183)?1:3:2:0}if($r.m.Ka)return Jr(Yt,7,"Premature end-of-partition0 encountered.");for(;Yt.ja<Yt.za;++Yt.ja){if($r=ht,Tt=(st=Yt).rb[st.sb-1],br=st.rb[st.sb+st.ja],Vt=st.ya[st.aa+st.ja],ys=st.kc?Vt.Ad:0)Tt.la=br.la=0,Vt.Za||(Tt.Na=br.Na=0),Vt.Hc=0,Vt.Gc=0,Vt.ia=0;else{var kr,nr;if(Tt=br,br=$r,ys=st.Pa.Xc,Zr=st.ya[st.aa+st.ja],Lr=st.pb[Zr.$b],Kt=Zr.ad,ls=0,bs=st.rb[st.sb-1],Xt=Sr=0,o(Kt,ls,0,384),Zr.Za)var Fr=0,Tr=ys[3];else{sr=l(16);var hr=Tt.Na+bs.Na;if(hr=bo(br,ys[1],hr,Lr.Eb,0,sr,0),Tt.Na=bs.Na=(0<hr)+0,1<hr)qr(sr,0,Kt,ls);else{var Ms=sr[0]+3>>3;for(sr=0;256>sr;sr+=16)Kt[ls+sr]=Ms}Fr=1,Tr=ys[0]}var dr=15&Tt.la,fr=15&bs.la;for(sr=0;4>sr;++sr){var es=1&fr;for(Ms=nr=0;4>Ms;++Ms)dr=dr>>1|(es=(hr=bo(br,Tr,hr=es+(1&dr),Lr.Sc,Fr,Kt,ls))>Fr)<<7,nr=nr<<2|(3<hr?3:1<hr?2:Kt[ls+0]!=0),ls+=16;dr>>=4,fr=fr>>1|es<<7,Sr=(Sr<<8|nr)>>>0}for(Tr=dr,Fr=fr>>4,kr=0;4>kr;kr+=2){for(nr=0,dr=Tt.la>>4+kr,fr=bs.la>>4+kr,sr=0;2>sr;++sr){for(es=1&fr,Ms=0;2>Ms;++Ms)hr=es+(1&dr),dr=dr>>1|(es=0<(hr=bo(br,ys[2],hr,Lr.Qc,0,Kt,ls)))<<3,nr=nr<<2|(3<hr?3:1<hr?2:Kt[ls+0]!=0),ls+=16;dr>>=2,fr=fr>>1|es<<5}Xt|=nr<<4*kr,Tr|=dr<<4<<kr,Fr|=(240&fr)<<kr}Tt.la=Tr,bs.la=Fr,Zr.Hc=Sr,Zr.Gc=Xt,Zr.ia=43690&Xt?0:Lr.ia,ys=!(Sr|Xt)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[Vt.$b][Vt.Za],st.wa[st.Y+st.ja].La|=!ys),$r.Ka)return Jr(Yt,7,"Premature end-of-file encountered.")}if(ta(Yt),st=Ir,$r=1,Vt=(ht=Yt).D,Tt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(Vt.M=ht.M,Vt.uc=Tt,Ja(ht,Vt),$r=1,Vt=(nr=ht.D).Nb,Tt=(Xt=No[ht.L])*ht.R,br=Xt/2*ht.B,sr=16*Vt*ht.R,Ms=8*Vt*ht.B,ys=ht.sa,Zr=ht.ta-Tt+sr,Lr=ht.qa,Kt=ht.ra-br+Ms,ls=ht.Ha,bs=ht.Ia-br+Ms,fr=(dr=nr.M)==0,Sr=dr>=ht.Va-1,ht.Aa==2&&Ja(ht,nr),nr.uc)for(es=(hr=ht).D.M,r(hr.D.uc),nr=hr.yb;nr<hr.Hb;++nr){Fr=nr,Tr=es;var Es=(hn=(Wr=hr).D).Nb;kr=Wr.R;var hn=hn.wa[hn.Y+Fr],Vr=Wr.sa,Hr=Wr.ta+16*Es*kr+16*Fr,Bs=hn.dd,mr=hn.tc;if(mr!=0)if(r(3<=mr),Wr.L==1)0<Fr&&Bd(Vr,Hr,kr,mr+4),hn.La&&po(Vr,Hr,kr,mr),0<Tr&&zc(Vr,Hr,kr,mr+4),hn.La&&ql(Vr,Hr,kr,mr);else{var Us=Wr.B,$n=Wr.qa,la=Wr.ra+8*Es*Us+8*Fr,vs=Wr.Ha,Wr=Wr.Ia+8*Es*Us+8*Fr;Es=hn.ld,0<Fr&&(Md(Vr,Hr,kr,mr+4,Bs,Es),Ju($n,la,vs,Wr,Us,mr+4,Bs,Es)),hn.La&&(mo(Vr,Hr,kr,mr,Bs,Es),Zo($n,la,vs,Wr,Us,mr,Bs,Es)),0<Tr&&(Rd(Vr,Hr,kr,mr+4,Bs,Es),Uc($n,la,vs,Wr,Us,mr+4,Bs,Es)),hn.La&&(Qu(Vr,Hr,kr,mr,Bs,Es),qc($n,la,vs,Wr,Us,mr,Bs,Es))}}if(ht.ia&&alert("todo:DitherRow"),st.put!=null){if(nr=16*dr,dr=16*(dr+1),fr?(st.y=ht.sa,st.O=ht.ta+sr,st.f=ht.qa,st.N=ht.ra+Ms,st.ea=ht.Ha,st.W=ht.Ia+Ms):(nr-=Xt,st.y=ys,st.O=Zr,st.f=Lr,st.N=Kt,st.ea=ls,st.W=bs),Sr||(dr-=Xt),dr>st.o&&(dr=st.o),st.F=null,st.J=null,ht.Fa!=null&&0<ht.Fa.length&&nr<dr&&(st.J=_s(ht,st,nr,dr-nr),st.F=ht.mb,st.F==null&&st.F.length==0)){$r=Jr(ht,3,"Could not decode alpha data.");break t}nr<st.j&&(Xt=st.j-nr,nr=st.j,r(!(1&Xt)),st.O+=ht.R*Xt,st.N+=ht.B*(Xt>>1),st.W+=ht.B*(Xt>>1),st.F!=null&&(st.J+=st.width*Xt)),nr<dr&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=nr-st.j,st.U=st.va-st.v,st.T=dr-nr,$r=st.put(st))}Vt+1!=ht.Ic||Sr||(a(ht.sa,ht.ta-Tt,ys,Zr+16*ht.R,Tt),a(ht.qa,ht.ra-br,Lr,Kt+8*ht.B,br),a(ht.Ha,ht.Ia-br,ls,bs+8*ht.B,br))}if(!$r)return Jr(Yt,6,"Output aborted.")}return 1})(ae,Se)),Se.bc!=null&&Se.bc(Se),_e&=1}return _e?(ae.cb=0,_e):0})(f,_)||(x=f.a)}}else x=f.a}x==0&&H.Oa!=null&&H.Oa.fd&&(x=Gs(H.ba))}H=x}$=H!=0?null:11>$?K.f.RGBA.eb:K.f.kb.y}else $=null;return $};var Jl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(G,pe){for(var I="",U=0;U<4;U++)I+=String.fromCharCode(G[pe++]);return I}function p(G,pe){return G[pe+0]|G[pe+1]<<8}function v(G,pe){return(G[pe+0]|G[pe+1]<<8|G[pe+2]<<16)>>>0}function N(G,pe){return(G[pe+0]|G[pe+1]<<8|G[pe+2]<<16|G[pe+3]<<24)>>>0}new h;var y=[0],k=[0],C=[],S=new h,L=t,P=(function(G,pe){var I={},U=0,B=!1,W=0,Y=0;if(I.frames=[],!(function(D,te){for(var se=0;se<4;se++)if(D[te+se]!="RIFF".charCodeAt(se))return!0;return!1})(G,pe)){for(N(G,pe+=4),pe+=8;pe<G.length;){var le=m(G,pe),F=N(G,pe+=4);pe+=4;var Z=F+(1&F);switch(le){case"VP8 ":case"VP8L":I.frames[U]===void 0&&(I.frames[U]={}),(ee=I.frames[U]).src_off=B?Y:pe-8,ee.src_size=W+F+8,U++,B&&(B=!1,W=0,Y=0);break;case"VP8X":(ee=I.header={}).feature_flags=G[pe];var be=pe+4;ee.canvas_width=1+v(G,be),be+=3,ee.canvas_height=1+v(G,be),be+=3;break;case"ALPH":B=!0,W=Z+8,Y=pe-8;break;case"ANIM":(ee=I.header).bgcolor=N(G,pe),be=pe+4,ee.loop_count=p(G,be),be+=2;break;case"ANMF":var Ae,ee;(ee=I.frames[U]={}).offset_x=2*v(G,pe),pe+=3,ee.offset_y=2*v(G,pe),pe+=3,ee.width=1+v(G,pe),pe+=3,ee.height=1+v(G,pe),pe+=3,ee.duration=v(G,pe),pe+=3,Ae=G[pe++],ee.dispose=1&Ae,ee.blend=Ae>>1&1}le!="ANMF"&&(pe+=Z)}return I}})(L,0);P.response=L,P.rgbaoutput=!0,P.dataurl=!1;var E=P.header?P.header:null,M=P.frames?P.frames:null;if(E){E.loop_counter=E.loop_count,y=[E.canvas_height],k=[E.canvas_width];for(var z=0;z<M.length&&M[z].blend!=0;z++);}var he=M[0],X=S.WebPDecodeRGBA(L,he.src_off,he.src_size,k,y);he.rgba=X,he.imgwidth=k[0],he.imgheight=y[0];for(var J=0;J<k[0]*y[0]*4;J++)C[J]=X[J];return this.width=k,this.height=y,this.data=C,this}(function(t){var r,s,a,o,l,d,u,h,m,p=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new h,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new d,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new d,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new v(this),r=this.internal.f2,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,m=new p}]);var v=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=D;Object.defineProperty(this,"pdf",{get:function(){return te}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(Me){se=!!Me}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(Me){fe=!!Me}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(Me){isNaN(Me)||(V=Me)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(Me){isNaN(Me)||(ye=Me)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Me){var me;typeof Me=="number"?me=[Me,Me,Me,Me]:((me=new Array(4))[0]=Me[0],me[1]=Me.length>=2?Me[1]:me[0],me[2]=Me.length>=3?Me[2]:me[0],me[3]=Me.length>=4?Me[3]:me[1]),m.margin=me}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Me){ie=Me}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Me){ge=Me}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Me){de=Me}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Me){Me instanceof p&&(m=Me)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Me){m.path=Me}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(Me){ue=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var me;me=N(Me),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var me=N(Me);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var Pe=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(Me){Pe=null,Xe=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var me;if(this.ctx.font=Me,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var Ye=me[1];me[2];var rt=me[3],et=me[4];me[5];var $e=me[6],re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(re==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:re==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var ce=(function(wt){var ot,Ut,qt=[],lt=wt.trim();if(lt==="")return Dp;if(lt in d1)return[d1[lt]];for(;lt!=="";){switch(Ut=null,ot=(lt=h1(lt)).charAt(0)){case'"':case"'":Ut=y8(lt.substring(1),ot);break;default:Ut=b8(lt)}if(Ut===null||(qt.push(Ut[0]),(lt=h1(Ut[1]))!==""&&lt.charAt(0)!==","))return Dp;lt=lt.replace(/^,/,"")}return qt})($e);if(this.fontFaces){var je=(function(wt,ot){if(Pe===null){var Ut=(function(qt){var lt=[];return Object.keys(qt).forEach(function(xt){qt[xt].forEach(function(Gt){var Nt=null;switch(Gt){case"bold":Nt={family:xt,weight:"bold"};break;case"italic":Nt={family:xt,style:"italic"};break;case"bolditalic":Nt={family:xt,weight:"bold",style:"italic"};break;case"":case"normal":Nt={family:xt}}Nt!==null&&(Nt.ref={name:xt,style:Gt},lt.push(Nt))})}),lt})(wt.getFontList());Pe=(function(qt){for(var lt={},xt=0;xt<qt.length;++xt){var Gt=Ep(qt[xt]),Nt=Gt.family,Rt=Gt.stretch,Pt=Gt.style,Pr=Gt.weight;lt[Nt]=lt[Nt]||{},lt[Nt][Rt]=lt[Nt][Rt]||{},lt[Nt][Rt][Pt]=lt[Nt][Rt][Pt]||{},lt[Nt][Rt][Pt][Pr]=Gt}return lt})(Ut.concat(ot))}return Pe})(this.pdf,this.fontFaces),Oe=ce.map(function(wt){return{family:wt,stretch:"normal",weight:rt,style:Ye}}),Re=(function(wt,ot,Ut){for(var qt=(Ut=Ut||{}).defaultFontFamily||"times",lt=Object.assign({},x8,Ut.genericFontFamilies||{}),xt=null,Gt=null,Nt=0;Nt<ot.length;++Nt)if(lt[(xt=Ep(ot[Nt])).family]&&(xt.family=lt[xt.family]),wt.hasOwnProperty(xt.family)){Gt=wt[xt.family];break}if(!(Gt=Gt||wt[qt]))throw new Error("Could not find a font-family for the rule '"+u1(xt)+"' and default family '"+qt+"'.");if(Gt=(function(Rt,Pt){if(Pt[Rt])return Pt[Rt];var Pr=x0[Rt],jr=Pr<=x0.normal?-1:1,Zt=c1(Pt,tv,Pr,jr);if(!Zt)throw new Error("Could not find a matching font-stretch value for "+Rt);return Zt})(xt.stretch,Gt),Gt=(function(Rt,Pt){if(Pt[Rt])return Pt[Rt];for(var Pr=ev[Rt],jr=0;jr<Pr.length;++jr)if(Pt[Pr[jr]])return Pt[Pr[jr]];throw new Error("Could not find a matching font-style for "+Rt)})(xt.style,Gt),!(Gt=(function(Rt,Pt){if(Pt[Rt])return Pt[Rt];if(Rt===400&&Pt[500])return Pt[500];if(Rt===500&&Pt[400])return Pt[400];var Pr=g8[Rt],jr=c1(Pt,rv,Pr,Rt<400?-1:1);if(!jr)throw new Error("Could not find a matching font-weight for value "+Rt);return jr})(xt.weight,Gt)))throw new Error("Failed to resolve a font for the rule '"+u1(xt)+"'.");return Gt})(je,Oe);this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var Fe="";(rt==="bold"||parseInt(rt,10)>=700||Ye==="bold")&&(Fe="bold"),Ye==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var We="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},nt=0;nt<ce.length;nt++){if(this.pdf.internal.getFont(ce[nt],Fe,{noFallback:!0,disableWarning:!0})!==void 0){We=ce[nt];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(ce[nt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=ce[nt],Fe="bold";else if(this.pdf.internal.getFont(ce[nt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=ce[nt],Fe="normal";break}}if(We===""){for(var it=0;it<ce.length;it++)if(at[ce[it]]){We=at[ce[it]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};v.prototype.setLineDash=function(D){this.lineDash=D},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){M.call(this,"fill",!1)},v.prototype.stroke=function(){M.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(D,te){if(isNaN(D)||isNaN(te))throw Nr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new d(D,te));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new d(D,te)},v.prototype.closePath=function(){var D=new d(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&pr(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){D=new d(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(D.x,D.y)},v.prototype.lineTo=function(D,te){if(isNaN(D)||isNaN(te))throw Nr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new d(D,te));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new d(se.x,se.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},v.prototype.quadraticCurveTo=function(D,te,se,fe){if(isNaN(se)||isNaN(fe)||isNaN(D)||isNaN(te))throw Nr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new d(se,fe)),ye=this.ctx.transform.applyToPoint(new d(D,te));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:V.x,y:V.y}),this.ctx.lastPoint=new d(V.x,V.y)},v.prototype.bezierCurveTo=function(D,te,se,fe,V,ye){if(isNaN(V)||isNaN(ye)||isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe))throw Nr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new d(V,ye)),ge=this.ctx.transform.applyToPoint(new d(D,te)),de=this.ctx.transform.applyToPoint(new d(se,fe));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:de.x,y2:de.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new d(ie.x,ie.y)},v.prototype.arc=function(D,te,se,fe,V,ye){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe)||isNaN(V))throw Nr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new d(D,te));D=ie.x,te=ie.y;var ge=this.ctx.transform.applyToPoint(new d(0,se)),de=this.ctx.transform.applyToPoint(new d(0,0));se=Math.sqrt(Math.pow(ge.x-de.x,2)+Math.pow(ge.y-de.y,2))}Math.abs(V-fe)>=2*Math.PI&&(fe=0,V=2*Math.PI),this.path.push({type:"arc",x:D,y:te,radius:se,startAngle:fe,endAngle:V,counterclockwise:ye})},v.prototype.arcTo=function(D,te,se,fe,V){throw new Error("arcTo not implemented.")},v.prototype.rect=function(D,te,se,fe){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe))throw Nr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,te),this.lineTo(D+se,te),this.lineTo(D+se,te+fe),this.lineTo(D,te+fe),this.lineTo(D,te),this.lineTo(D+se,te),this.lineTo(D,te)},v.prototype.fillRect=function(D,te,se,fe){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe))throw Nr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,te,se,fe),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},v.prototype.strokeRect=function(D,te,se,fe){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe))throw Nr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(D,te,se,fe),this.stroke())},v.prototype.clearRect=function(D,te,se,fe){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe))throw Nr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,te,se,fe))},v.prototype.save=function(D){D=typeof D!="boolean"||D;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},v.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(te),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(D){var te,se,fe,V;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))te=0,se=0,fe=0,V=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(ye!==null)te=parseInt(ye[1]),se=parseInt(ye[2]),fe=parseInt(ye[3]),V=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)te=parseInt(ye[1]),se=parseInt(ye[2]),fe=parseInt(ye[3]),V=parseFloat(ye[4]);else{if(V=1,typeof D=="string"&&D.charAt(0)!=="#"){var ie=new Gb(D);D=ie.ok?ie.toHex():"#000000"}D.length===4?(te=D.substring(1,2),te+=te,se=D.substring(2,3),se+=se,fe=D.substring(3,4),fe+=fe):(te=D.substring(1,3),se=D.substring(3,5),fe=D.substring(5,7)),te=parseInt(te,16),se=parseInt(se,16),fe=parseInt(fe,16)}}return{r:te,g:se,b:fe,a:V,style:D}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(D,te,se,fe){if(isNaN(te)||isNaN(se)||typeof D!="string")throw Nr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!y.call(this)){var V=Z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;U.call(this,{text:D,x:te,y:se,scale:ye,angle:V,align:this.textAlign,maxWidth:fe})}},v.prototype.strokeText=function(D,te,se,fe){if(isNaN(te)||isNaN(se)||typeof D!="string")throw Nr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){fe=isNaN(fe)?void 0:fe;var V=Z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;U.call(this,{text:D,x:te,y:se,scale:ye,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:fe})}},v.prototype.measureText=function(D){if(typeof D!="string")throw Nr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,se=this.pdf.internal.scaleFactor,fe=te.internal.getFontSize(),V=te.getStringUnitWidth(D)*fe/te.internal.scaleFactor;return new function(ye){var ie=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this}({width:V*=Math.round(96*se/72*1e4)/1e4})},v.prototype.scale=function(D,te){if(isNaN(D)||isNaN(te))throw Nr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new h(D,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},v.prototype.rotate=function(D){if(isNaN(D))throw Nr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new h(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},v.prototype.translate=function(D,te){if(isNaN(D)||isNaN(te))throw Nr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new h(1,0,0,1,D,te);this.ctx.transform=this.ctx.transform.multiply(se)},v.prototype.transform=function(D,te,se,fe,V,ye){if(isNaN(D)||isNaN(te)||isNaN(se)||isNaN(fe)||isNaN(V)||isNaN(ye))throw Nr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new h(D,te,se,fe,V,ye);this.ctx.transform=this.ctx.transform.multiply(ie)},v.prototype.setTransform=function(D,te,se,fe,V,ye){D=isNaN(D)?1:D,te=isNaN(te)?0:te,se=isNaN(se)?0:se,fe=isNaN(fe)?1:fe,V=isNaN(V)?0:V,ye=isNaN(ye)?0:ye,this.ctx.transform=new h(D,te,se,fe,V,ye)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(D,te,se,fe,V,ye,ie,ge,de){var ue=this.pdf.getImageProperties(D),Pe=1,Xe=1,Me=1,me=1;fe!==void 0&&ge!==void 0&&(Me=ge/fe,me=de/V,Pe=ue.width/fe*ge/fe,Xe=ue.height/V*de/V),ye===void 0&&(ye=te,ie=se,te=0,se=0),fe!==void 0&&ge===void 0&&(ge=fe,de=V),fe===void 0&&ge===void 0&&(ge=ue.width,de=ue.height);for(var Ye,rt=this.ctx.transform.decompose(),et=Z(rt.rotate.shx),$e=new h,re=($e=($e=($e=$e.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new u(ye-te*Me,ie-se*me,fe*Pe,V*Xe)),ce=S.call(this,re),je=[],Oe=0;Oe<ce.length;Oe+=1)je.indexOf(ce[Oe])===-1&&je.push(ce[Oe]);if(E(je),this.autoPaging)for(var Re=je[0],Fe=je[je.length-1],We=Re;We<Fe+1;We++){this.pdf.setPage(We);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=We===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=We===1?0:it+(We-2)*wt;if(this.ctx.clip_path.length!==0){var Ut=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Ye,this.posX+this.margin[3],-ot+nt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Ut}var qt=JSON.parse(JSON.stringify(re));qt=P([qt],this.posX+this.margin[3],-ot+nt+this.ctx.prevPageLastElemOffset)[0];var lt=(We>Re||We<Fe)&&C.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,wt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,et),lt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",re.x,re.y,re.w,re.h,null,null,et)};var S=function(D,te,se){var fe=[];te=te||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":fe.push(Math.floor((D.y+V)/se)+1);break;case"arc":fe.push(Math.floor((D.y+V-D.radius)/se)+1),fe.push(Math.floor((D.y+V+D.radius)/se)+1);break;case"qct":var ye=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);fe.push(Math.floor((ye.y+V)/se)+1),fe.push(Math.floor((ye.y+ye.h+V)/se)+1);break;case"bct":var ie=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);fe.push(Math.floor((ie.y+V)/se)+1),fe.push(Math.floor((ie.y+ie.h+V)/se)+1);break;case"rect":fe.push(Math.floor((D.y+V)/se)+1),fe.push(Math.floor((D.y+D.h+V)/se)+1)}for(var ge=0;ge<fe.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<fe[ge];)L.call(this);return fe},L=function(){var D=this.fillStyle,te=this.strokeStyle,se=this.font,fe=this.lineCap,V=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=te,this.font=se,this.lineCap=fe,this.lineWidth=V,this.lineJoin=ye},P=function(D,te,se){for(var fe=0;fe<D.length;fe++)switch(D[fe].type){case"bct":D[fe].x2+=te,D[fe].y2+=se;case"qct":D[fe].x1+=te,D[fe].y1+=se;default:D[fe].x+=te,D[fe].y+=se}return D},E=function(D){return D.sort(function(te,se){return te-se})},M=function(D,te){for(var se,fe,V=this.fillStyle,ye=this.strokeStyle,ie=this.lineCap,ge=this.lineWidth,de=Math.abs(ge*this.ctx.transform.scaleX),ue=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),Me=[],me=0;me<Xe.length;me++)if(Xe[me].x!==void 0)for(var Ye=S.call(this,Xe[me]),rt=0;rt<Ye.length;rt+=1)Me.indexOf(Ye[rt])===-1&&Me.push(Ye[rt]);for(var et=0;et<Me.length;et++)for(;this.pdf.internal.getNumberOfPages()<Me[et];)L.call(this);if(E(Me),this.autoPaging)for(var $e=Me[0],re=Me[Me.length-1],ce=$e;ce<re+1;ce++){this.pdf.setPage(ce),this.fillStyle=V,this.strokeStyle=ye,this.lineCap=ie,this.lineWidth=de,this.lineJoin=ue;var je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=ce===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=ce===1?0:Re+(ce-2)*Fe;if(this.ctx.clip_path.length!==0){var at=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(se,this.posX+this.margin[3],-We+Oe+this.ctx.prevPageLastElemOffset),z.call(this,D,!0),this.path=at}if(fe=JSON.parse(JSON.stringify(Pe)),this.path=P(fe,this.posX+this.margin[3],-We+Oe+this.ctx.prevPageLastElemOffset),te===!1||ce===0){var nt=(ce>$e||ce<re)&&C.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],je,Fe,null).clip().discardPath()),z.call(this,D,te),nt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=de,z.call(this,D,te),this.lineWidth=ge;this.path=Pe},z=function(D,te){if((D!=="stroke"||te||!k.call(this))&&(D==="stroke"||te||!y.call(this))){for(var se,fe,V=[],ye=this.path,ie=0;ie<ye.length;ie++){var ge=ye[ie];switch(ge.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:ge,deltas:[],abs:[]});break;case"lt":var de=V.length;if(ye[ie-1]&&!isNaN(ye[ie-1].x)&&(se=[ge.x-ye[ie-1].x,ge.y-ye[ie-1].y],de>0)){for(;de>=0;de--)if(V[de-1].close!==!0&&V[de-1].begin!==!0){V[de-1].deltas.push(se),V[de-1].abs.push(ge);break}}break;case"bct":se=[ge.x1-ye[ie-1].x,ge.y1-ye[ie-1].y,ge.x2-ye[ie-1].x,ge.y2-ye[ie-1].y,ge.x-ye[ie-1].x,ge.y-ye[ie-1].y],V[V.length-1].deltas.push(se);break;case"qct":var ue=ye[ie-1].x+2/3*(ge.x1-ye[ie-1].x),Pe=ye[ie-1].y+2/3*(ge.y1-ye[ie-1].y),Xe=ge.x+2/3*(ge.x1-ge.x),Me=ge.y+2/3*(ge.y1-ge.y),me=ge.x,Ye=ge.y;se=[ue-ye[ie-1].x,Pe-ye[ie-1].y,Xe-ye[ie-1].x,Me-ye[ie-1].y,me-ye[ie-1].x,Ye-ye[ie-1].y],V[V.length-1].deltas.push(se);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(ge)}}fe=te?null:D==="stroke"?"stroke":"fill";for(var rt=!1,et=0;et<V.length;et++)if(V[et].arc)for(var $e=V[et].abs,re=0;re<$e.length;re++){var ce=$e[re];ce.type==="arc"?J.call(this,ce.x,ce.y,ce.radius,ce.startAngle,ce.endAngle,ce.counterclockwise,void 0,te,!rt):B.call(this,ce.x,ce.y),rt=!0}else if(V[et].close===!0)this.pdf.internal.out("h"),rt=!1;else if(V[et].begin!==!0){var je=V[et].start.x,Oe=V[et].start.y;W.call(this,V[et].deltas,je,Oe),rt=!0}fe&&G.call(this,fe),te&&pe.call(this)}},he=function(D){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-se;case"top":return D+te-se;case"hanging":return D+te-2*se;case"middle":return D+te/2-se;default:return D}},X=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(te,se){this.colorStops.push([te,se])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(D,te,se,fe,V,ye,ie,ge,de){for(var ue=le.call(this,se,fe,V,ye),Pe=0;Pe<ue.length;Pe++){var Xe=ue[Pe];Pe===0&&(de?I.call(this,Xe.x1+D,Xe.y1+te):B.call(this,Xe.x1+D,Xe.y1+te)),Y.call(this,D,te,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}ge?pe.call(this):G.call(this,ie)},G=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(D,te){this.pdf.internal.out(s(D)+" "+a(te)+" m")},U=function(D){var te;switch(D.align){case"right":case"end":te="right";break;case"center":te="center";break;default:te="left"}var se=this.pdf.getTextDimensions(D.text),fe=he.call(this,D.y),V=X.call(this,fe)-se.h,ye=this.ctx.transform.applyToPoint(new d(D.x,fe)),ie=this.ctx.transform.decompose(),ge=new h;ge=(ge=(ge=ge.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var de,ue,Pe,Xe=this.ctx.transform.applyToRectangle(new u(D.x,fe,se.w,se.h)),Me=ge.applyToRectangle(new u(D.x,V,se.w,se.h)),me=S.call(this,Me),Ye=[],rt=0;rt<me.length;rt+=1)Ye.indexOf(me[rt])===-1&&Ye.push(me[rt]);if(E(Ye),this.autoPaging)for(var et=Ye[0],$e=Ye[Ye.length-1],re=et;re<$e+1;re++){this.pdf.setPage(re);var ce=re===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],Re=Oe-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],We=Fe-this.margin[3],at=re===1?0:je+(re-2)*Re;if(this.ctx.clip_path.length!==0){var nt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(de,this.posX+this.margin[3],-1*at+ce),z.call(this,"fill",!0),this.path=nt}var it=P([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-at+ce+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*D.scale),Pe=this.lineWidth,this.lineWidth=Pe*D.scale);var wt=this.autoPaging!=="text";if(wt||it.y+it.h<=Oe){if(wt||it.y>=ce&&it.x<=Fe){var ot=wt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Fe-it.x)[0],Ut=P([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-at+ce+this.ctx.prevPageLastElemOffset)[0],qt=wt&&(re>et||re<$e)&&C.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Re,null).clip().discardPath()),this.pdf.text(ot,Ut.x,Ut.y,{angle:D.angle,align:te,renderingMode:D.renderingMode}),qt&&this.pdf.restoreGraphicsState()}}else it.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-it.y);D.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=Pe)}else D.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*D.scale),Pe=this.lineWidth,this.lineWidth=Pe*D.scale),this.pdf.text(D.text,ye.x+this.posX,ye.y+this.posY,{angle:D.angle,align:te,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=Pe)},B=function(D,te,se,fe){se=se||0,fe=fe||0,this.pdf.internal.out(s(D+se)+" "+a(te+fe)+" l")},W=function(D,te,se){return this.pdf.lines(D,te,se,null,null)},Y=function(D,te,se,fe,V,ye,ie,ge){this.pdf.internal.out([r(o(se+D)),r(l(fe+te)),r(o(V+D)),r(l(ye+te)),r(o(ie+D)),r(l(ge+te)),"c"].join(" "))},le=function(D,te,se,fe){for(var V=2*Math.PI,ye=Math.PI/2;te>se;)te-=V;var ie=Math.abs(se-te);ie<V&&fe&&(ie=V-ie);for(var ge=[],de=fe?-1:1,ue=te;ie>1e-5;){var Pe=ue+de*Math.min(ie,ye);ge.push(F.call(this,D,ue,Pe)),ie-=Math.abs(Pe-ue),ue=Pe}return ge},F=function(D,te,se){var fe=(se-te)/2,V=D*Math.cos(fe),ye=D*Math.sin(fe),ie=V,ge=-ye,de=ie*ie+ge*ge,ue=de+ie*V+ge*ye,Pe=4/3*(Math.sqrt(2*de*ue)-ue)/(ie*ye-ge*V),Xe=ie-Pe*ge,Me=ge+Pe*ie,me=Xe,Ye=-Me,rt=fe+te,et=Math.cos(rt),$e=Math.sin(rt);return{x1:D*Math.cos(te),y1:D*Math.sin(te),x2:Xe*et-Me*$e,y2:Xe*$e+Me*et,x3:me*et-Ye*$e,y3:me*$e+Ye*et,x4:D*Math.cos(se),y4:D*Math.sin(se)}},Z=function(D){return 180*D/Math.PI},be=function(D,te,se,fe,V,ye){var ie=D+.5*(se-D),ge=te+.5*(fe-te),de=V+.5*(se-V),ue=ye+.5*(fe-ye),Pe=Math.min(D,V,ie,de),Xe=Math.max(D,V,ie,de),Me=Math.min(te,ye,ge,ue),me=Math.max(te,ye,ge,ue);return new u(Pe,Me,Xe-Pe,me-Me)},Ae=function(D,te,se,fe,V,ye,ie,ge){var de,ue,Pe,Xe,Me,me,Ye,rt,et,$e,re,ce,je,Oe,Re=se-D,Fe=fe-te,We=V-se,at=ye-fe,nt=ie-V,it=ge-ye;for(ue=0;ue<41;ue++)et=(Ye=(Pe=D+(de=ue/40)*Re)+de*((Me=se+de*We)-Pe))+de*(Me+de*(V+de*nt-Me)-Ye),$e=(rt=(Xe=te+de*Fe)+de*((me=fe+de*at)-Xe))+de*(me+de*(ye+de*it-me)-rt),ue==0?(re=et,ce=$e,je=et,Oe=$e):(re=Math.min(re,et),ce=Math.min(ce,$e),je=Math.max(je,et),Oe=Math.max(Oe,$e));return new u(Math.round(re),Math.round(ce),Math.round(je-re),Math.round(Oe-ce))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,te,se=(D=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:te}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(At.API),(function(t){var r=function(d){var u,h,m,p,v,N,y,k,C,S;for(h=[],m=0,p=(d+=u="\0\0\0\0".slice(d.length%4||4)).length;p>m;m+=4)(v=(d.charCodeAt(m)<<24)+(d.charCodeAt(m+1)<<16)+(d.charCodeAt(m+2)<<8)+d.charCodeAt(m+3))!==0?(N=(v=((v=((v=((v=(v-(S=v%85))/85)-(C=v%85))/85)-(k=v%85))/85)-(y=v%85))/85)%85,h.push(N+33,y+33,k+33,C+33,S+33)):h.push(122);return(function(L,P){for(var E=P;E>0;E--)L.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},s=function(d){var u,h,m,p,v,N=String,y="length",k=255,C="charCodeAt",S="slice",L="replace";for(d[S](-2),d=d[S](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),m=[],p=0,v=(d+=u="uuuuu"[S](d[y]%5||5))[y];v>p;p+=5)h=52200625*(d[C](p)-33)+614125*(d[C](p+1)-33)+7225*(d[C](p+2)-33)+85*(d[C](p+3)-33)+(d[C](p+4)-33),m.push(k&h>>24,k&h>>16,k&h>>8,k&h);return(function(P,E){for(var M=E;M>0;M--)P.pop()})(m,u[y]),N.fromCharCode.apply(N,m)},a=function(d){return d.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(d){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),u.test(d)===!1)return"";for(var h="",m=0;m<d.length;m+=2)h+=String.fromCharCode("0x"+(d[m]+d[m+1]));return h},l=function(d){for(var u=new Uint8Array(d.length),h=d.length;h--;)u[h]=d.charCodeAt(h);return(u=d0(u)).reduce(function(m,p){return m+String.fromCharCode(p)},"")};t.processDataByFilters=function(d,u){var h=0,m=d||"",p=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":m=s(m),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=r(m),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=o(m),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=a(m),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=l(m),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:m,reverseChain:p.reverse().join(" ")}}})(At.API),(function(t){t.loadFile=function(r,s,a){return(function(o,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=(function(h,m,p){var v=new XMLHttpRequest,N=0,y=function(k){var C=k.length,S=[],L=String.fromCharCode;for(N=0;N<C;N+=1)S.push(L(255&k.charCodeAt(N)));return S.join("")};if(v.open("GET",h,!m),v.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(v.onload=function(){v.status===200?p(y(this.responseText)):p(void 0)}),v.send(null),m&&v.status===200)return y(v.responseText)})(o,l,d)}catch{}return u})(r,s,a)},t.loadImageFile=t.loadFile})(At.API),(function(t){function r(){return(Bt.html2canvas?Promise.resolve(Bt.html2canvas):xa(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function s(){return(Bt.DOMPurify?Promise.resolve(Bt.DOMPurify):xa(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var a=function(u){var h=pr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(u,h){var m=document.createElement(u);for(var p in h.className&&(m.className=h.className),h.innerHTML&&h.dompurify&&(m.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)m.style[p]=h.style[p];return m},l=function u(h,m){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)m!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(u(v,m));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},d=function u(h){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),p=u.convert(Promise.resolve(),m);return(p=p.setProgress(1,u,1,[u])).set(h)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(u,h){return u.__proto__=h||d.prototype,u},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(m){switch(a(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(s).then(function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},d.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,h(this.prop.container,m)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var m=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=p,p)for(var y=0;y<p.length;++y){var k=p[y],C=k.src.find(function(S){return S.format==="truetype"});C&&m.addFont(C.url,k.ref.name,k.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,m.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(u,h,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},d.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},d.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},d.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(u){if(a(u)!=="object")return this;var h=Object.keys(u||{}).map(function(m){if(m in d.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}},this);return this.then(function(){return this.thenList(h)})},d.prototype.get=function(u,h){return this.then(function(){var m=u in d.template.prop?this.prop[u]:this.opt[u];return h?h(m):m})},d.prototype.setMargin=function(u){return this.then(function(){switch(a(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},d.prototype.setPageSize=function(u){function h(m,p){return Math.floor(m*p/72*96)}return this.then(function(){(u=u||At.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},d.prototype.setProgress=function(u,h,m,p){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),m!=null&&(this.progress.n=m),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(u,h,m,p){return this.setProgress(u?this.progress.val+u:null,h||null,m?this.progress.n+m:null,p?this.progress.stack.concat(p):null)},d.prototype.then=function(u,h){var m=this;return this.thenCore(u,h,function(p,v){return m.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(N){return m.updateProgress(null,p),N}).then(p,v).then(function(N){return m.updateProgress(1),N})})},d.prototype.thenCore=function(u,h,m){m=m||Promise.prototype.then;var p=this;u&&(u=u.bind(p)),h&&(h=h.bind(p));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:d.convert(Object.assign({},p),Promise.prototype),N=m.call(v,u,h);return d.convert(N,p.__proto__)},d.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},d.prototype.thenList=function(u){var h=this;return u.forEach(function(m){h=h.thenCore(m)}),h},d.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return d.convert(h,this)},d.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},d.prototype.error=function(u){return this.then(function(){throw new Error(u)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,At.getPageSize=function(u,h,m){if(pr(u)==="object"){var p=u;u=p.orientation,h=p.unit||h,m=p.format||m}h=h||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var v,N=(""+m).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+h}var k,C=0,S=0;if(y.hasOwnProperty(N))C=y[N][1]/v,S=y[N][0]/v;else try{C=m[1],S=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",S>C&&(k=S,S=C,C=k);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",C>S&&(k=S,S=C,C=k)}return{width:S,height:C,unit:h,k:v,orientation:u}},t.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Ep):null;var m=new d(h);return h.worker?m:m.from(u).doCallback()}})(At.API),At.API.addJS=function(t){return m1=t,this.internal.events.subscribe("postPutResources",function(){Wh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),f1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+m1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wh!==void 0&&f1!==void 0&&this.internal.out("/Names <</JavaScript "+Wh+" 0 R>>")}),this},(function(t){var r;t.events.push(["postPutResources",function(){var s=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=s.outline.render().split(/\r\n/),l=0;l<o.length;l++){var d=o[l],u=a.exec(d);if(u!=null){var h=u[1];s.internal.newObjectDeferredBegin(h,!1)}s.internal.write(d)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,p=[];for(l=0;l<m;l++){var v=s.internal.newObject();p.push(v);var N=s.internal.getPageInfo(l+1);s.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var y=s.internal.newObject();for(s.internal.write("<< /Names [ "),l=0;l<p.length;l++)s.internal.write("(page_"+(l+1)+")"+p[l]+" 0 R");s.internal.write(" ] >>","endobj"),r=s.internal.newObject(),s.internal.write("<< /Dests "+y+" 0 R"),s.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(a,o,l){var d={title:o,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(a){a.id=s.internal.newObjectDeferred();for(var o=0;o<a.children.length;o++)this.genIds_r(a.children[o])},s.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},s.outline.renderItems=function(a){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=s.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var m=0;m<a.children.length;m++)this.renderItems(a.children[m])},s.outline.line=function(a){this.ctx.val+=a+`\r
`},s.outline.makeRef=function(a){return a.id+" 0 R"},s.outline.makeString=function(a){return"("+s.internal.pdfEscape(a)+")"},s.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(a,o){for(var l=0;l<o.children.length;l++)a.count++,this.count_r(a,o.children[l]);return a.count}}])})(At.API),(function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(s,a,o,l,d,u){var h,m=this.decode.DCT_DECODE,p=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=d||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,h=(function(v){for(var N,y=256*v.charCodeAt(4)+v.charCodeAt(5),k=v.length,C={width:0,height:0,numcomponents:1},S=4;S<k;S+=2){if(S+=y,r.indexOf(v.charCodeAt(S+1))!==-1){N=256*v.charCodeAt(S+5)+v.charCodeAt(S+6),C={width:256*v.charCodeAt(S+7)+v.charCodeAt(S+8),height:N,numcomponents:v.charCodeAt(S+9)};break}y=256*v.charCodeAt(S+2)+v.charCodeAt(S+3)}return C})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}p={data:s,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:m,index:a,alias:o}}return p}})(At.API),At.API.processPNG=function(t,r,s,a){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,l=r8(t,{checkCrc:!0}),d=l.width,u=l.height,h=l.channels,m=l.palette,p=l.depth;o=m&&h===1?(function(X){for(var J=X.width,G=X.height,pe=X.data,I=X.palette,U=X.depth,B=!1,W=[],Y=[],le=void 0,F=!1,Z=0,be=0;be<I.length;be++){var Ae=yy(I[be],4),ee=Ae[0],D=Ae[1],te=Ae[2],se=Ae[3];W.push(ee,D,te),se!=null&&(se===0?(Z++,Y.length<1&&Y.push(be)):se<255&&(F=!0))}if(F||Z>1){B=!0,Y=void 0;var fe=J*G;le=new Uint8Array(fe);for(var V=new DataView(pe.buffer),ye=0;ye<fe;ye++){var ie=Ip(V,ye,U),ge=yy(I[ie],4)[3];le[ye]=ge}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:pe,alphaBytes:le,needSMask:B,palette:W,mask:Y}})(l):h===2||h===4?(function(X){for(var J=X.data,G=X.width,pe=X.height,I=X.channels,U=X.depth,B=I===2?"DeviceGray":"DeviceRGB",W=I-1,Y=G*pe,le=W,F=Y*le,Z=1*Y,be=Math.ceil(F*U/8),Ae=Math.ceil(Z*U/8),ee=new Uint8Array(be),D=new Uint8Array(Ae),te=new DataView(J.buffer),se=new DataView(ee.buffer),fe=new DataView(D.buffer),V=!1,ye=0;ye<Y;ye++){for(var ie=ye*I,ge=0;ge<le;ge++)j1(se,Ip(te,ie+ge,U),ye*le+ge,U);var de=Ip(te,ie+le,U);de<(1<<U)-1&&(V=!0),j1(fe,de,1*ye,U)}return{colorSpace:B,colorsPerPixel:W,colorBytes:ee,alphaBytes:D,needSMask:V}})(l):(function(X){var J=X.data,G=X.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:J instanceof Uint8Array?J:new Uint8Array(J.buffer),needSMask:!1}})(l);var v,N,y,k=o,C=k.colorSpace,S=k.colorsPerPixel,L=k.colorBytes,P=k.alphaBytes,E=k.needSMask,M=k.palette,z=k.mask,he=null;return a!==At.API.image_compression.NONE&&typeof d0=="function"?(he=(function(X){var J;switch(X){case At.API.image_compression.FAST:J=11;break;case At.API.image_compression.MEDIUM:J=13;break;case At.API.image_compression.SLOW:J=14;break;default:J=12}return J})(a),v=this.decode.FLATE_DECODE,N="/Predictor ".concat(he," "),t=y1(L,d*S,S,a),E&&(y=y1(P,d,1,a))):(v=void 0,N="",t=L,E&&(y=P)),N+="/Colors ".concat(S," /BitsPerComponent ").concat(p," /Columns ").concat(d),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:s,data:t,index:r,filter:v,decodeParameters:N,transparency:z,palette:M,sMask:y,predictor:he,width:d,height:u,bitsPerComponent:p,colorSpace:C}}},(function(t){t.processGIF89A=function(r,s,a,o){var l=new j8(r),d=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var m={data:h,width:d,height:u},p=new Fp(100).encode(m,100);return t.processJPEG.call(this,p,s,a,o)},t.processGIF87A=t.processGIF89A})(At.API),li.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:a,blue:s,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},li.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(s){Nr.log("bit decode error:"+s)}},li.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),s=r%4;for(t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,o=0;o<r;o++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}s!==0&&(this.pos+=4-s)}},li.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*o*4,u=l>>4,h=15&l,m=this.palette[u];if(this.data[d]=m.blue,this.data[d+1]=m.green,this.data[d+2]=m.red,this.data[d+3]=255,2*o+1>=this.width)break;m=this.palette[h],this.data[d+4]=m.blue,this.data[d+4+1]=m.green,this.data[d+4+2]=m.red,this.data[d+4+3]=255}r!==0&&(this.pos+=4-r)}},li.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*a;if(o<this.palette.length){var d=this.palette[o];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},li.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&r)/r*255|0,u=(l>>5&r)/r*255|0,h=(l>>10&r)/r*255|0,m=l>>15?255:0,p=a*this.width*4+4*o;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=d,this.data[p+3]=m}this.pos+=t}},li.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),s=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&r)/r*255|0,h=(d>>5&s)/s*255|0,m=(d>>11)/r*255|0,p=o*this.width*4+4*l;this.data[p]=m,this.data[p+1]=h,this.data[p+2]=u,this.data[p+3]=255}this.pos+=t}},li.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},li.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}},li.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(r,s,a,o){var l=new li(r,!1),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},m=new Fp(100).encode(h,100);return t.processJPEG.call(this,m,s,a,o)}})(At.API),k1.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(r,s,a,o){var l=new k1(r),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},m=new Fp(100).encode(h,100);return t.processJPEG.call(this,m,s,a,o)}})(At.API),At.API.processRGBA=function(t,r,s){for(var a=t.data,o=a.length,l=new Uint8Array(o/4*3),d=new Uint8Array(o/4),u=0,h=0,m=0;m<o;m+=4){var p=a[m],v=a[m+1],N=a[m+2],y=a[m+3];l[u++]=p,l[u++]=v,l[u++]=N,d[h++]=y}var k=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:k,index:r,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},At.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hd=At.API,Gh=hd.getCharWidthsArray=function(t,r){var s,a,o=(r=r||{}).font||this.internal.getFont(),l=r.fontSize||this.internal.getFontSize(),d=r.charSpace||this.internal.getCharSpace(),u=r.widths?r.widths:o.metadata.Unicode.widths,h=u.fof?u.fof:1,m=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=m.fof?m.fof:1,v=r.doKerning!==!1,N=0,y=t.length,k=0,C=u[0]||h,S=[];for(s=0;s<y;s++)a=t.charCodeAt(s),typeof o.metadata.widthOfString=="function"?S.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(N=v&&pr(m[a])==="object"&&!isNaN(parseInt(m[a][k],10))?m[a][k]/p:0,S.push((u[a]||C)/h+N)),k=a;return S},p1=hd.getStringUnitWidth=function(t,r){var s=(r=r||{}).fontSize||this.internal.getFontSize(),a=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return hd.processArabic&&(t=hd.processArabic(t)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(t,s,o)/s:Gh.apply(this,arguments).reduce(function(l,d){return l+d},0)},g1=function(t,r,s,a){for(var o=[],l=0,d=t.length,u=0;l!==d&&u+r[l]<s;)u+=r[l],l++;o.push(t.slice(0,l));var h=l;for(u=0;l!==d;)u+r[l]>a&&(o.push(t.slice(h,l)),u=0,h=l),u+=r[l],l++;return h!==l&&o.push(t.slice(h,l)),o},x1=function(t,r,s){s||(s={});var a,o,l,d,u,h,m,p=[],v=[p],N=s.textIndent||0,y=0,k=0,C=t.split(" "),S=Gh.apply(this,[" ",s])[0];if(h=s.lineIndent===-1?C[0].length+2:s.lineIndent||0){var L=Array(h).join(" "),P=[];C.map(function(M){(M=M.split(/\s*\n/)).length>1?P=P.concat(M.map(function(z,he){return(he&&z.length?`
`:"")+z})):P.push(M[0])}),C=P,h=p1.apply(this,[L,s])}for(l=0,d=C.length;l<d;l++){var E=0;if(a=C[l],h&&a[0]==`
`&&(a=a.substr(1),E=1),N+y+(k=(o=Gh.apply(this,[a,s])).reduce(function(M,z){return M+z},0))>r||E){if(k>r){for(u=g1.apply(this,[a,o,r-(N+y),r]),p.push(u.shift()),p=[u.pop()];u.length;)v.push([u.shift()]);k=o.slice(a.length-(p[0]?p[0].length:0)).reduce(function(M,z){return M+z},0)}else p=[a];v.push(p),N=k+h,y=S}else p.push(a),N+=y+k,y=S}return m=h?function(M,z){return(z?L:"")+M.join(" ")}:function(M){return M.join(" ")},v.map(m)},hd.splitTextToSize=function(t,r,s){var a,o=(s=s||{}).fontSize||this.internal.getFontSize(),l=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var v=this.internal.getFont(p.fontName,p.fontStyle),N="Unicode";return v.metadata[N]?{widths:v.metadata[N].widths||{0:1},kerning:v.metadata[N].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);a=Array.isArray(t)?t:String(t).split(/\r?\n/);var d=1*this.internal.scaleFactor*r/o;l.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=s.lineIndent;var u,h,m=[];for(u=0,h=a.length;u<h;u++)m=m.concat(x1.apply(this,[a[u],d,l]));return m},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="0123456789abcdef",s="klmnopqrstuvwxyz",a={},o={},l=0;l<16;l++)a[s[l]]=r[l],o[r[l]]=s[l];var d=function(N){return"0x"+parseInt(N,10).toString(16)},u=t.__fontmetrics__.compress=function(N){var y,k,C,S,L=["{"];for(var P in N){if(y=N[P],isNaN(parseInt(P,10))?k="'"+P+"'":(P=parseInt(P,10),k=(k=d(P).slice(2)).slice(0,-1)+o[k.slice(-1)]),typeof y=="number")y<0?(C=d(y).slice(3),S="-"):(C=d(y).slice(2),S=""),C=S+C.slice(0,-1)+o[C.slice(-1)];else{if(pr(y)!=="object")throw new Error("Don't know what to do with value type "+pr(y)+".");C=u(y)}L.push(k+C)}return L.push("}"),L.join("")},h=t.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,k,C,S,L={},P=1,E=L,M=[],z="",he="",X=N.length-1,J=1;J<X;J+=1)(S=N[J])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(M.push([E,C]),E={},C=void 0):S=="}"?((k=M.pop())[0][k[1]]=E,C=void 0,E=k[0]):S=="-"?P=-1:C===void 0?a.hasOwnProperty(S)?(z+=a[S],C=parseInt(z,16)*P,P=1,z=""):z+=S:a.hasOwnProperty(S)?(he+=a[S],E[C]=parseInt(he,16)*P,P=1,C=void 0,he=""):he+=S;return L},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},v={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(N){var y=N.font,k=v.Unicode[y.postScriptName];k&&(y.metadata.Unicode={},y.metadata.Unicode.widths=k.widths,y.metadata.Unicode.kerning=k.kerning);var C=p.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])})(At.API),(function(t){var r=function(s){for(var a=s.length,o=new Uint8Array(a),l=0;l<a;l++)o[l]=s.charCodeAt(l);return o};t.API.events.push(["addFont",function(s){var a=void 0,o=s.font,l=s.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(a=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?r(u):r(hf(u)),d.metadata=t.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(o,a)}}])})(At),At.API.addSvgAsImage=function(t,r,s,a,o,l,d,u){if(isNaN(r)||isNaN(s))throw Nr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw Nr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var m=h.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Bt.canvg?Promise.resolve(Bt.canvg):xa(()=>import("./index.es-DyTVlSkz.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(m,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(p)}).then(function(){v.addImage(h.toDataURL("image/jpeg",1),r,s,a,o,d,u)})},At.API.putTotalPages=function(t){var r,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),s=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var o=0;o<this.internal.pages[a].length;o++)this.internal.pages[a][o]=this.internal.pages[a][o].replace(r,s);return this},At.API.viewerPreferences=function(t,r){var s;t=t||{},r=r||!1;var a,o,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],m=0,p=0,v=0;function N(k,C){var S,L=!1;for(S=0;S<k.length;S+=1)k[S]===C&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var y=u.length;for(v=0;v<y;v+=1)s[u[v]].value=s[u[v]].defaultValue,s[u[v]].explicitSet=!1}if(pr(t)==="object"){for(o in t)if(l=t[o],N(u,o)&&l!==void 0){if(s[o].type==="boolean"&&typeof l=="boolean")s[o].value=l;else if(s[o].type==="name"&&N(s[o].valueSet,l))s[o].value=l;else if(s[o].type==="integer"&&Number.isInteger(l))s[o].value=l;else if(s[o].type==="array"){for(m=0;m<l.length;m+=1)if(a=!0,l[m].length===1&&typeof l[m][0]=="number")h.push(String(l[m]-1));else if(l[m].length>1){for(p=0;p<l[m].length;p+=1)typeof l[m][p]!="number"&&(a=!1);a===!0&&h.push([l[m][0]-1,l[m][1]-1].join(" "))}s[o].value="["+h.join(" ")+"]"}else s[o].value=s[o].defaultValue;s[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,C=[];for(k in s)s[k].explicitSet===!0&&(s[k].type==="name"?C.push("/"+k+" /"+s[k].value):C.push("/"+k+" "+s[k].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(t){var r=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),m=l.length+d.length+u.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(o+l+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(a,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",r)),this}})(At.API),(function(t){var r=t.API,s=r.pdfEscape16=function(l,d){for(var u,h=d.metadata.Unicode.widths,m=["","0","00","000","0000"],p=[""],v=0,N=l.length;v<N;++v){if(u=d.metadata.characterToGlyph(l.charCodeAt(v)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(v),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return p.join("");u=u.toString(16),p.push(m[4-u.length],u)}return p.join("")},a=function(l){var d,u,h,m,p,v,N;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,N=(u=Object.keys(l).sort(function(y,k){return y-k})).length;v<N;v++)d=u[v],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(m=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+m+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,m=d.newObject,p=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var v=u.metadata.Unicode.widths,N=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",k=0;k<N.length;k++)y+=String.fromCharCode(N[k]);var C=m();p({data:y,addLength1:!0,objectId:C}),h("endobj");var S=m();p({data:a(u.metadata.toUnicode),addLength1:!0,objectId:S}),h("endobj");var L=m();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+md(u.fontName)),h("/FontFile2 "+C+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var P=m();h("<<"),h("/Type /Font"),h("/BaseFont /"+md(u.fontName)),h("/FontDescriptor "+L+" 0 R"),h("/W "+t.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=m(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+S+" 0 R"),h("/BaseFont /"+md(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+P+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,m=d.newObject,p=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var v=u.metadata.rawData,N="",y=0;y<v.length;y++)N+=String.fromCharCode(v[y]);var k=m();p({data:N,addLength1:!0,objectId:k}),h("endobj");var C=m();p({data:a(u.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var S=m();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+k+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+md(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=m();for(var L=0;L<u.metadata.hmtx.widths.length;L++)u.metadata.hmtx.widths[L]=parseInt(u.metadata.hmtx.widths[L]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+md(u.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var o=function(l){var d,u=l.text||"",h=l.x,m=l.y,p=l.options||{},v=l.mutex||{},N=v.pdfEscape,y=v.activeFontKey,k=v.fonts,C=y,S="",L=0,P="",E=k[C].encoding;if(k[C].encoding!=="Identity-H")return{text:u,x:h,y:m,options:p,mutex:v};for(P=u,C=y,Array.isArray(u)&&(P=u[0]),L=0;L<P.length;L+=1)k[C].metadata.hasOwnProperty("cmap")&&(d=k[C].metadata.cmap.unicode.codeMap[P[L].charCodeAt(0)]),d||P[L].charCodeAt(0)<256&&k[C].metadata.hasOwnProperty("Unicode")?S+=P[L]:S+="";var M="";return parseInt(C.slice(1))<14||E==="WinAnsiEncoding"?M=N(S,C).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(M=s(S,k[C])),v.isHex=!0,{text:M,x:h,y:m,options:p,mutex:v}};r.events.push(["postProcessText",function(l){var d=l.text||"",u=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var m=0;for(m=0;m<d.length;m+=1)Array.isArray(d[m])&&d[m].length===3?u.push([o(Object.assign({},h,{text:d[m][0]})).text,d[m][1],d[m][2]]):u.push(o(Object.assign({},h,{text:d[m]})).text);l.text=u}else l.text=o(Object.assign({},h,{text:d})).text}])})(At),(function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(s){return r.call(this),this.internal.vFS[s]!==void 0},t.addFileToVFS=function(s,a){return r.call(this),this.internal.vFS[s]=a,this},t.getFileFromVFS=function(s){return r.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(At.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(a){var o,l,d,u,h,m,p,v=r,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,E=0;this.__bidiEngine__={};var M=function(I){var U=I.charCodeAt(),B=U>>8,W=C[B];return W!==void 0?v[256*W+(255&U)]:B===252||B===253?"AL":L.test(B)?"L":B===8?"R":"N"},z=function(I){for(var U,B=0;B<I.length;B++){if((U=M(I.charAt(B)))==="L")return!1;if(U==="R")return!0}return!1},he=function(I,U,B,W){var Y,le,F,Z,be=U[W];switch(be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(be="AN");break;case"AL":P=!0,be="R";break;case"WS":case"BN":be="N";break;case"CS":W<1||W+1>=U.length||(Y=B[W-1])!=="EN"&&Y!=="AN"||(le=U[W+1])!=="EN"&&le!=="AN"?be="N":P&&(le="AN"),be=le===Y?le:"N";break;case"ES":be=(Y=W>0?B[W-1]:"B")==="EN"&&W+1<U.length&&U[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&B[W-1]==="EN"){be="EN";break}if(P){be="N";break}for(F=W+1,Z=U.length;F<Z&&U[F]==="ET";)F++;be=F<Z&&U[F]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(Z=U.length,F=W+1;F<Z&&U[F]==="NSM";)F++;if(F<Z){var Ae=I[W],ee=Ae>=1425&&Ae<=2303||Ae===64286;if(Y=U[F],ee&&(Y==="R"||Y==="AL")){be="R";break}}}be=W<1||(Y=U[W-1])==="B"?"N":B[W-1];break;case"B":P=!1,o=!0,be=E;break;case"S":l=!0,be="N"}return be},X=function(I,U,B){var W=I.split("");return B&&J(W,B,{hiLevel:E}),W.reverse(),U&&U.reverse(),W.join("")},J=function(I,U,B){var W,Y,le,F,Z,be=-1,Ae=I.length,ee=0,D=[],te=E?y:N,se=[];for(P=!1,o=!1,l=!1,Y=0;Y<Ae;Y++)se[Y]=M(I[Y]);for(le=0;le<Ae;le++){if(Z=ee,D[le]=he(I,se,D,le),W=240&(ee=te[Z][k[D[le]]]),ee&=15,U[le]=F=te[ee][5],W>0)if(W===16){for(Y=be;Y<le;Y++)U[Y]=1;be=-1}else be=-1;if(te[ee][6])be===-1&&(be=le);else if(be>-1){for(Y=be;Y<le;Y++)U[Y]=F;be=-1}se[le]==="B"&&(U[le]=0),B.hiLevel|=F}l&&(function(fe,V,ye){for(var ie=0;ie<ye;ie++)if(fe[ie]==="S"){V[ie]=E;for(var ge=ie-1;ge>=0&&fe[ge]==="WS";ge--)V[ge]=E}})(se,U,Ae)},G=function(I,U,B,W,Y){if(!(Y.hiLevel<I)){if(I===1&&E===1&&!o)return U.reverse(),void(B&&B.reverse());for(var le,F,Z,be,Ae=U.length,ee=0;ee<Ae;){if(W[ee]>=I){for(Z=ee+1;Z<Ae&&W[Z]>=I;)Z++;for(be=ee,F=Z-1;be<F;be++,F--)le=U[be],U[be]=U[F],U[F]=le,B&&(le=B[be],B[be]=B[F],B[F]=le);ee=Z}ee++}}},pe=function(I,U,B){var W=I.split(""),Y={hiLevel:E};return B||(B=[]),J(W,B,Y),(function(le,F,Z){if(Z.hiLevel!==0&&p)for(var be,Ae=0;Ae<le.length;Ae++)F[Ae]===1&&(be=S.indexOf(le[Ae]))>=0&&(le[Ae]=S[be+1])})(W,B,Y),G(2,W,U,B,Y),G(1,W,U,B,Y),W.join("")};return this.__bidiEngine__.doBidiReorder=function(I,U,B){if((function(Y,le){if(le)for(var F=0;F<Y.length;F++)le[F]=F;u===void 0&&(u=z(Y)),m===void 0&&(m=z(Y))})(I,U),d||!h||m)if(d&&h&&u^m)E=u?1:0,I=X(I,U,B);else if(!d&&h&&m)E=u?1:0,I=pe(I,U,B),I=X(I,U);else if(!d||u||h||m){if(d&&!h&&u^m)I=X(I,U),u?(E=0,I=pe(I,U,B)):(E=1,I=pe(I,U,B),I=X(I,U));else if(d&&u&&!h&&m)E=1,I=pe(I,U,B),I=X(I,U);else if(!d&&!h&&u^m){var W=p;u?(E=1,I=pe(I,U,B),E=0,p=!1,I=pe(I,U,B),p=W):(E=0,I=pe(I,U,B),I=X(I,U),E=1,p=!1,I=pe(I,U,B),p=W,I=X(I,U))}}else E=0,I=pe(I,U,B);else E=u?1:0,I=pe(I,U,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(d=I.isInputVisual,h=I.isOutputVisual,u=I.isInputRtl,m=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(a){var o=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,s.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(d=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?d.push([s.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):d.push([s.doBidiReorder(o[u])]);a.text=d}else a.text=s.doBidiReorder(o);s.setOptions({isInputVisual:!0})}])})(At),At.API.TTFFont=(function(){function t(r){var s;if(this.rawData=r,s=this.contents=new _l(r),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new M8(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new S8(this.contents),this.head=new A8(this),this.name=new E8(this),this.cmap=new nv(this),this.toUnicode={},this.hhea=new C8(this),this.maxp=new D8(this),this.hmtx=new I8(this),this.post=new _8(this),this.os2=new P8(this),this.loca=new R8(this),this.glyf=new F8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,s,a,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,h,m;for(m=[],d=0,u=(h=this.bbox).length;d<u;d++)r=h[d],m.push(Math.round(r*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(a=255&(o=this.post.italic_angle),32768&(s=o>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var s;return((s=this.cmap.unicode)!=null?s.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*s},t.prototype.widthOfString=function(r,s,a){var o,l,d,u;for(d=0,l=0,u=(r=""+r).length;0<=u?l<u:l>u;l=0<=u?++l:--l)o=r.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(o))+a*(1e3/s)||0;return d*(s/1e3)},t.prototype.lineHeight=function(r,s){var a;return s==null&&(s=!1),a=s?this.lineGap:0,(this.ascender+a-this.decender)/1e3*r},t})();var yi,_l=(function(){function t(r){this.data=r??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var s,a;for(a=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)a[s]=String.fromCharCode(this.readByte());return a.join("")},t.prototype.writeString=function(r){var s,a,o;for(o=[],s=0,a=r.length;0<=a?s<a:s>a;s=0<=a?++s:--s)o.push(this.writeByte(r.charCodeAt(s)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,s,a,o,l,d,u,h;return r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^s)+1099511627776*(255^a)+4294967296*(255^o)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*r+281474976710656*s+1099511627776*a+4294967296*o+16777216*l+65536*d+256*u+h},t.prototype.writeLongLong=function(r){var s,a;return s=Math.floor(r/4294967296),a=4294967295&r,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var s,a;for(s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push(this.readByte());return s},t.prototype.write=function(r){var s,a,o,l;for(l=[],a=0,o=r.length;a<o;a++)s=r[a],l.push(this.writeByte(s));return l},t})(),S8=(function(){var t;function r(s){var a,o,l;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)a={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[a.tag]=a}return r.prototype.encode=function(s){var a,o,l,d,u,h,m,p,v,N,y,k,C;for(C in y=Object.keys(s).length,h=Math.log(2),v=16*Math.floor(Math.log(y)/h),d=Math.floor(v/h),p=16*y-v,(o=new _l).writeInt(this.scalarType),o.writeShort(y),o.writeShort(v),o.writeShort(d),o.writeShort(p),l=16*y,m=o.pos+l,u=null,k=[],s)for(N=s[C],o.writeString(C),o.writeInt(t(N)),o.writeInt(m),o.writeInt(N.length),k=k.concat(N),C==="head"&&(u=m),m+=N.length;m%4;)k.push(0),m++;return o.write(k),a=2981146554-t(o.data),o.pos=u+8,o.writeUInt32(a),o.data},t=function(s){var a,o,l,d;for(s=av.call(s);s.length%4;)s.push(0);for(l=new _l(s),o=0,a=0,d=s.length;a<d;a=a+=4)o+=l.readUInt32();return 4294967295&o},r})(),k8={}.hasOwnProperty,Qi=function(t,r){for(var s in r)k8.call(r,s)&&(t[s]=r[s]);function a(){this.constructor=t}return a.prototype=r.prototype,t.prototype=new a,t.__super__=r.prototype,t};yi=(function(){function t(r){var s;this.file=r,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var A8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new _l).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t})(),A1=(function(){function t(r,s){var a,o,l,d,u,h,m,p,v,N,y,k,C,S,L,P,E;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=s+r.readInt(),v=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=r.readByte();break;case 4:for(y=r.readUInt16(),N=y/2,r.pos+=6,l=(function(){var M,z;for(z=[],h=M=0;0<=N?M<N:M>N;h=0<=N?++M:--M)z.push(r.readUInt16());return z})(),r.pos+=2,C=(function(){var M,z;for(z=[],h=M=0;0<=N?M<N:M>N;h=0<=N?++M:--M)z.push(r.readUInt16());return z})(),m=(function(){var M,z;for(z=[],h=M=0;0<=N?M<N:M>N;h=0<=N?++M:--M)z.push(r.readUInt16());return z})(),p=(function(){var M,z;for(z=[],h=M=0;0<=N?M<N:M>N;h=0<=N?++M:--M)z.push(r.readUInt16());return z})(),o=(this.length-r.pos+this.offset)/2,u=(function(){var M,z;for(z=[],h=M=0;0<=o?M<o:M>o;h=0<=o?++M:--M)z.push(r.readUInt16());return z})(),h=L=0,E=l.length;L<E;h=++L)for(S=l[h],a=P=k=C[h];k<=S?P<=S:P>=S;a=k<=S?++P:--P)p[h]===0?d=a+m[h]:(d=u[p[h]/2+(a-k)-(N-h)]||0)!==0&&(d+=m[h]),this.codeMap[a]=65535&d}r.pos=v}return t.encode=function(r,s){var a,o,l,d,u,h,m,p,v,N,y,k,C,S,L,P,E,M,z,he,X,J,G,pe,I,U,B,W,Y,le,F,Z,be,Ae,ee,D,te,se,fe,V,ye,ie,ge,de,ue,Pe;switch(W=new _l,d=Object.keys(r).sort(function(Xe,Me){return Xe-Me}),s){case"macroman":for(C=0,S=(function(){var Xe=[];for(k=0;k<256;++k)Xe.push(0);return Xe})(),P={0:0},l={},Y=0,be=d.length;Y<be;Y++)P[ge=r[o=d[Y]]]==null&&(P[ge]=++C),l[o]={old:r[o],new:P[r[o]]},S[o]=P[r[o]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(S),{charMap:l,subtable:W.data,maxGlyphID:C+1};case"unicode":for(U=[],v=[],E=0,P={},a={},L=m=null,le=0,Ae=d.length;le<Ae;le++)P[z=r[o=d[le]]]==null&&(P[z]=++E),a[o]={old:z,new:P[z]},u=P[z]-o,L!=null&&u===m||(L&&v.push(L),U.push(o),m=u),L=o;for(L&&v.push(L),v.push(65535),U.push(65535),pe=2*(G=U.length),J=2*Math.pow(Math.log(G)/Math.LN2,2),N=Math.log(J/2)/Math.LN2,X=2*G-J,h=[],he=[],y=[],k=F=0,ee=U.length;F<ee;k=++F){if(I=U[k],p=v[k],I===65535){h.push(0),he.push(0);break}if(I-(B=a[I].new)>=32768)for(h.push(0),he.push(2*(y.length+G-k)),o=Z=I;I<=p?Z<=p:Z>=p;o=I<=p?++Z:--Z)y.push(a[o].new);else h.push(B-I),he.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*G+2*y.length),W.writeUInt16(0),W.writeUInt16(pe),W.writeUInt16(J),W.writeUInt16(N),W.writeUInt16(X),ye=0,D=v.length;ye<D;ye++)o=v[ye],W.writeUInt16(o);for(W.writeUInt16(0),ie=0,te=U.length;ie<te;ie++)o=U[ie],W.writeUInt16(o);for(de=0,se=h.length;de<se;de++)u=h[de],W.writeUInt16(u);for(ue=0,fe=he.length;ue<fe;ue++)M=he[ue],W.writeUInt16(M);for(Pe=0,V=y.length;Pe<V;Pe++)C=y[Pe],W.writeUInt16(C);return{charMap:a,subtable:W.data,maxGlyphID:E+1}}},t})(),nv=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,a,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)s=new A1(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var a,o;return s==null&&(s="macroman"),a=A1.encode(r,s),(o=new _l).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},t})(),C8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),P8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a})(),this.charRange=(function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),_8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="post",t.prototype.parse=function(r){var s,a,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)s=r.readByte(),o.push(this.names.push(r.readString(s)));return o;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 262144:return this.map=(function(){var d,u,h;for(h=[],l=d=0,u=this.file.maxp.numGlyphs;0<=u?d<u:d>u;l=0<=u?++d:--d)h.push(r.readUInt32());return h}).call(this)}},t})(),L8=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},E8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="name",t.prototype.parse=function(r){var s,a,o,l,d,u,h,m,p,v,N;for(r.pos=this.offset,r.readShort(),s=r.readShort(),u=r.readShort(),a=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(h={},l=p=0,v=a.length;p<v;l=++p)o=a[l],r.pos=o.offset,m=r.readString(o.length),d=new L8(m,o),h[N=o.nameID]==null&&(h[N]=[]),h[o.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t})(),D8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),I8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,a,o,l,d,u,h;for(r.pos=this.offset,this.metrics=[],s=0,u=this.file.hhea.numberOfMetrics;0<=u?s<u:s>u;s=0<=u?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,p;for(p=[],s=m=0;0<=o?m<o:m>o;s=0<=o?++m:--m)p.push(r.readInt16());return p})(),this.widths=(function(){var m,p,v,N;for(N=[],m=0,p=(v=this.metrics).length;m<p;m++)l=v[m],N.push(l.advance);return N}).call(this),a=this.widths[this.widths.length-1],h=[],s=d=0;0<=o?d<o:d>o;s=0<=o?++d:--d)h.push(this.widths.push(a));return h},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),av=[].slice,F8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,a,o,l,d,u,h,m,p,v;return r in this.cache?this.cache[r]:(l=this.file.loca,s=this.file.contents,a=l.indexOf(r),(o=l.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,d=(u=new _l(s.read(o))).readShort(),m=u.readShort(),v=u.readShort(),h=u.readShort(),p=u.readShort(),this.cache[r]=d===-1?new O8(u,m,v,h,p):new T8(u,d,m,v,h,p),this.cache[r]))},t.prototype.encode=function(r,s,a){var o,l,d,u,h;for(d=[],l=[],u=0,h=s.length;u<h;u++)o=r[s[u]],l.push(d.length),o&&(d=d.concat(o.encode(a)));return l.push(d.length),{table:d,offsets:l}},t})(),T8=(function(){function t(r,s,a,o,l,d){this.raw=r,this.numberOfContours=s,this.xMin=a,this.yMin=o,this.xMax=l,this.yMax=d,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),O8=(function(){function t(r,s,a,o,l){var d,u;for(this.raw=r,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return t.prototype.encode=function(){var r,s,a;for(s=new _l(av.call(this.raw.data)),r=0,a=this.glyphIDs.length;r<a;++r)s.pos=this.glyphOffsets[r];return s.data},t})(),R8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,yi),t.prototype.tag="loca",t.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(r.readUInt32());return l}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,d=0;d<a.length;++d)if(a[d]=o,l<s.length&&s[l]==d){++l,a[d]=o;var u=this.offsets[d],h=this.offsets[d+1]-u;h>0&&(o+=h)}for(var m=new Array(4*a.length),p=0;p<a.length;++p)m[4*p+3]=255&a[p],m[4*p+2]=(65280&a[p])>>8,m[4*p+1]=(16711680&a[p])>>16,m[4*p]=(4278190080&a[p])>>24;return m},t})(),M8=(function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,s,a,o,l;for(s in o=this.font.cmap.tables[0].codeMap,r={},l=this.subset)a=l[s],r[s]=o[a];return r},t.prototype.glyphsFor=function(r){var s,a,o,l,d,u,h;for(o={},d=0,u=r.length;d<u;d++)o[l=r[d]]=this.font.glyf.glyphFor(l);for(l in s=[],o)(a=o[l])!=null&&a.compound&&s.push.apply(s,a.glyphIDs);if(s.length>0)for(l in h=this.glyphsFor(s))a=h[l],o[l]=a;return o},t.prototype.encode=function(r,s){var a,o,l,d,u,h,m,p,v,N,y,k,C,S,L;for(o in a=nv.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(r),y={0:0},L=a.charMap)y[(h=L[o]).old]=h.new;for(k in N=a.maxGlyphID,d)k in y||(y[k]=N++);return p=(function(P){var E,M;for(E in M={},P)M[P[E]]=E;return M})(y),v=Object.keys(p).sort(function(P,E){return P-E}),C=(function(){var P,E,M;for(M=[],P=0,E=v.length;P<E;P++)u=v[P],M.push(p[u]);return M})(),l=this.font.glyf.encode(d,C,y),m=this.font.loca.encode(l.offsets,C),S={cmap:this.font.cmap.raw(),glyf:l.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t})();At.API.PDFObject=(function(){var t;function r(){}return t=function(s,a){return(Array(a+1).join("0")+s).slice(-a)},r.convert=function(s){var a,o,l,d;if(Array.isArray(s))return"["+(function(){var u,h,m;for(m=[],u=0,h=s.length;u<h;u++)a=s[u],m.push(r.convert(a));return m})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+t(s.getUTCFullYear(),4)+t(s.getUTCMonth(),2)+t(s.getUTCDate(),2)+t(s.getUTCHours(),2)+t(s.getUTCMinutes(),2)+t(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(o in l=["<<"],s)d=s[o],l.push("/"+o+" "+r.convert(d));return l.push(">>"),l.join(`
`)}return""+s},r})();const B8={data:null,isLoading:!1,error:null,dashboardData:null,dashboardLoading:!1,dashboardError:null},Cu=Cr("cityTax/fetchData",async(t,{rejectWithValue:r})=>{try{const{touristTaxAPI:s}=await xa(async()=>{const{touristTaxAPI:o}=await import("./touristTax.api-BjpUtmSI.js");return{touristTaxAPI:o}},[]);return await s.getTouristTax(t)}catch(s){return console.error("Redux: Error fetching city tax:",s),r(s.response?.data?.message||s.message||"Failed to fetch city tax data")}}),iv=Ro({name:"touristTax",initialState:B8,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Cu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Cu.fulfilled,(r,s)=>{console.log("City Tax API Response:",s.payload),r.isLoading=!1,r.data=s.payload.totalTax,console.log("Redux State Updated:",r.data)}).addCase(Cu.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:JA}=iv.actions,U8=iv.reducer,q8=()=>{const[t,r]=R.useState(392776),[s,a]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[o,l]=R.useState("checkin"),d=As(),u=Ft(E=>E.touristTax),{data:h,isLoading:m,error:p}=u,{properties:v,isLoading:N}=Ft(E=>E.properties),y=h?{propertyId:h.propertyId||t||392776,startDate:h.startDate||s.startDate,endDate:h.endDate||s.endDate,cityTaxCalculated:h.cityTaxCalculated||0,cityTaxCalculatedFormatted:h.cityTaxCalculatedFormatted||"€0,00",cityTaxNights:h.cityTaxNights||0,childrenNights:h.childrenNights||0,nightsBeyond:h.nightsBeyond||0,totalNights:h.totalNights||0,hostkitTotalNights:h.hostkitTotalNights||0,cityTaxInvoiced:h.cityTaxInvoiced||0,cityTaxInvoicedFormatted:h.cityTaxInvoicedFormatted||"€0,00",cityTaxInvoicedNights:h.cityTaxInvoicedNights||0,totalTax:h.totalTax||0,totalTaxFormatted:h.totalTaxFormatted||"€0,00",totalBookings:h.totalBookings||0,totalGuests:h.totalGuests||0,adultNights:h.adultNights||0,exemptNights:h.exemptNights||0,taxableNights:h.taxableNights||0,averageTaxPerNight:h.averageTaxPerNight||0,averageTaxPerNightFormatted:h.averageTaxPerNightFormatted||"€0,00",averageTaxPerGuest:h.averageTaxPerGuest||0,averageTaxPerGuestFormatted:h.averageTaxPerGuestFormatted||"€0,00",bookingsPlatforms:h.bookingsPlatforms||{},taxStatus:h.taxStatus||"not_implemented",dataSource:h.dataSource||"api",futureReady:h.futureReady||!0,currency:"EUR"}:{propertyId:t||392776,startDate:s.startDate,endDate:s.endDate,totalTax:0,totalTaxFormatted:"€0,00",totalBookings:0,totalGuests:0,totalNights:0,adultNights:0,childrenNights:0,exemptNights:0,taxableNights:0,averageTaxPerNight:0,averageTaxPerNightFormatted:"€0,00",averageTaxPerGuest:0,averageTaxPerGuestFormatted:"€0,00",bookingsPlatforms:{},taxStatus:"not_implemented",dataSource:"fallback",futureReady:!0,currency:"EUR"};R.useEffect(()=>{v.length===0&&!N&&d(Wi())},[d,v.length,N]),R.useEffect(()=>{t&&d(Cu({propertyId:t,startDate:s.startDate,endDate:s.endDate,filterType:o}))},[d,t,s,o]);const k=(E,M)=>{a(z=>({...z,[E]:M}))},C=()=>{t&&d(Cu({propertyId:t,startDate:s.startDate,endDate:s.endDate,filterType:o}))},S=()=>{if(console.log("Export PDF button clicked"),console.log("Data available:",!!h),console.log("Selected property ID:",t),console.log("Display data:",y),!h||!t){alert("No data available to export");return}try{console.log("Creating PDF document...");const E=new At,M=E.internal.pageSize.getWidth(),z=E.internal.pageSize.getHeight(),he=v?.find(I=>I.id===t)?.name||`Property ID: ${t}`;E.setFontSize(20),E.setFont("helvetica","bold"),E.text("Tourist Tax Report",M/2,20,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),E.text(`Property: ${he}`,20,35),E.text(`Date Range: ${new Date(s.startDate).toLocaleDateString()} - ${new Date(s.endDate).toLocaleDateString()}`,20,45),E.text(`Generated: ${new Date().toLocaleString()}`,20,55);let X=70;E.setFontSize(14),E.setFont("helvetica","bold"),E.text("Summary",20,X),X+=10,E.setFontSize(10),E.setFont("helvetica","normal"),[["Tax Status",P(y.taxStatus)],["Current Tax Collected",h?.totalTaxFormatted||"€0,00"],["Estimated Tax Potential",h?.totalTaxFormatted||"€0,00"],["Total Bookings",y.totalBookings.toString()],["Total Guests",y.totalGuests.toString()],["Total Nights",y.totalNights.toString()],["Adult Nights",y.adultNights.toString()],["Children Nights",y.childrenNights.toString()],["Taxable Nights",y.taxableNights.toString()],["Exempt Nights",y.exemptNights.toString()],["Average Tax per Night",y.averageTaxPerNightFormatted],["Average Tax per Guest",y.averageTaxPerGuestFormatted],["Tax Rate per Adult Night",h?.averageTaxPerGuestFormatted||"€0,00"]].forEach(([I,U])=>{E.text(`${I}:`,25,X),E.text(`${U}`,100,X),X+=6}),X+=10,Object.keys(y.bookingsPlatforms).length>0&&(E.setFontSize(14),E.setFont("helvetica","bold"),E.text("Bookings by Platform",20,X),X+=10,E.setFontSize(10),E.setFont("helvetica","normal"),Object.entries(y.bookingsPlatforms).forEach(([I,U])=>{const B=typeof U=="number"?U:U?.bookings||0,W=(B/y.totalBookings*100).toFixed(1);E.text(`${I}: ${B} bookings (${W}%)`,25,X),X+=6}),X+=10);const G=E.getNumberOfPages();for(let I=1;I<=G;I++)E.setPage(I),E.setFontSize(8),E.setFont("helvetica","italic"),E.text("Generated by OwnerPortal Tourist Tax System",M/2,z-10,{align:"center"});const pe=`TouristTax_${he.replace(/[^a-zA-Z0-9]/g,"_")}_${s.startDate}_to_${s.endDate}.pdf`;console.log("Saving PDF with filename:",pe),E.save(pe),console.log("PDF export completed successfully")}catch(E){console.error("Error exporting PDF:",E),alert("Error generating PDF: "+(E instanceof Error?E.message:String(E)))}},L=E=>{switch(E){case"active":return"text-green-800 bg-green-100";case"not_implemented":return"text-yellow-800 bg-yellow-100";case"exempt":return"text-gray-800 bg-gray-100";default:return"text-gray-800 bg-gray-100"}},P=E=>{switch(E){case"active":return"Active Collection";case"not_implemented":return"Not Implemented";case"exempt":return"Tax Exempt";default:return"Unknown"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tourist Tax"}),t&&v&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Property: ",v.find(E=>E.id===t)?.name||`ID: ${t}`]}),e.jsx("p",{className:"text-gray-500",children:"Monitor and manage tourist tax collection and reporting"}),h&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Data source: ",typeof h.dataSource=="string"?h.dataSource:"api"," • Last updated: ",new Date().toLocaleTimeString(),e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-400",children:"Note: Shows all bookings overlapping with selected date range. The API may return data for a broader period, but we filter to show only relevant bookings."})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:!h||m,children:[e.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Export PDF Report"]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:m,children:[m?e.jsx(Mr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),N?e.jsx("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-200 rounded-2xl text-gray-500",children:"Loading properties..."}):e.jsxs(e.Fragment,{children:[console.log("Properties for selector:",v),e.jsx(Ba,{properties:v,selectedId:t,onChange:r,placeholder:"Select Property"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s.startDate,onChange:E=>k("startDate",E.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:s.endDate,onChange:E=>k("endDate",E.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Type"}),e.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"checkout",children:"Check-out"}),e.jsx("option",{value:"checkin",children:"Check-in"})]})]})]})}),t?e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center",children:[e.jsx(Mr,{className:"h-12 w-12 mx-auto text-gray-400 mb-4 animate-spin"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading City Tax Data"}),e.jsx("p",{className:"text-gray-500",children:"Fetching city tax information..."})]}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tax Status"}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${L(y.taxStatus)}`,children:P(y.taxStatus)})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(yd,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Current Tax Collected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:e.jsx(Gi,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalBookings})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl",children:e.jsx(ns,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Guests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalGuests})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:e.jsx(pa,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Estimated Tax Potential"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl",children:e.jsx(fi,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Report Data"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Gi,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxCalculatedFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Calculated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Current tax amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(ns,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Yx,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Often exempt"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Tu,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.hostkitTotalNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Guest nights (Hostkit format)"})]})]}),(y.nightsBeyond||0)>0&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:e.jsx(ns,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Long-stay Exemptions"}),e.jsxs("p",{className:"text-xs text-yellow-600",children:[y.nightsBeyond," nights beyond 30-day threshold (typically exempt)"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Oo,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.adultNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Adult Nights"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Taxable: ",y.taxableNights]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Yx,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Exempt: ",y.exemptNights]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Tu,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerNightFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Night"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights only"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(fi,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerGuestFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Guest"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All guests included"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bookings by Platform"}),e.jsx("div",{className:"space-y-4",children:Object.entries(y.bookingsPlatforms).map(([E,M])=>{const z=typeof M=="number"?M:M?.bookings||0,he=(z/y.totalBookings*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-sm mr-3"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:E})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:z}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",he,"%)"]})]})]},E)})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Current Tax Collected"}),e.jsx("span",{className:"font-semibold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Tax Potential"}),e.jsx("span",{className:"font-semibold text-green-600",children:h?.totalTaxFormatted||"€0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Tax Rate per Adult Night"}),e.jsx("span",{className:"font-semibold text-blue-600",children:h?.averageTaxPerGuestFormatted||"€0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Total Taxable Nights"}),e.jsx("span",{className:"font-semibold text-purple-600",children:h?.adultNights||0})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Implementation Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h?.taxStatus==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:h?.taxStatus==="active"?"Active":"Not Implemented"})]})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"City Tax Summary"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"City Tax data focuses on aggregated metrics rather than individual booking details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Total City Tax Nights"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.cityTaxNights})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Children Nights"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.childrenNights})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-purple-900",children:"Hostkit Total Nights"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y.hostkitTotalNights})]})]})]}),y.taxStatus!=="active"?e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl shadow-xl border border-blue-200 p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(fi,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Future-Ready City Tax"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"While city tax is not currently active for this property, all booking data is being tracked and analyzed. When tax collection is implemented, historical data will be available for reporting and compliance."}),e.jsxs("div",{className:"mt-3 text-sm text-blue-600",children:[e.jsxs("p",{children:["✓ Booking data collected: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalBookings," bookings"]})]}),e.jsxs("p",{children:["✓ Guest tracking: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalGuests," guests"]})]}),e.jsxs("p",{children:["✓ Night analysis: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalNights," nights"]})]})]})]})]})}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(yd,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No City Tax Data Available"}),e.jsx("p",{className:"text-gray-500",children:"No tax data found for the selected property and date range."})]})]}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(Mr,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-gray-500",children:"No city tax data found for the selected property and date range."})]})}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(yd,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Property"}),e.jsx("p",{className:"text-gray-500",children:"Choose a property from the dropdown above to view city tax analytics."})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl shadow-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:e.jsx(Mr,{className:"h-5 w-5 text-red-600"})}),e.jsx("p",{className:"text-red-800 font-medium",children:p})]})})]})})},z8={statuses:{},isLoading:!1,error:null},mc=Cr("siba/fetchStatus",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await xa(async()=>{const{sibaAPI:o}=await import("./siba.api-C8NH5Aq2.js");return{sibaAPI:o}},[]),a=await s.getSibaStatus(t);return console.log("SIBA API Response:",{propertyId:t,result:a}),a}catch(s){return console.error("SIBA API Error:",s),r(s.response?.data?.message||"Failed to fetch SIBA status")}}),Tp=Cr("siba/submit",async({propertyId:t,reservationId:r,data:s},{rejectWithValue:a})=>{try{const{sibaAPI:o}=await xa(async()=>{const{sibaAPI:l}=await import("./siba.api-C8NH5Aq2.js");return{sibaAPI:l}},[]);return await o.submitSiba(t,r,s)}catch(o){return a(o.response?.data?.message||"Failed to submit SIBA")}}),Op=Cr("siba/validate",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await xa(async()=>{const{sibaAPI:a}=await import("./siba.api-C8NH5Aq2.js");return{sibaAPI:a}},[]);return await s.validateSiba(t)}catch(s){return r(s.response?.data?.message||"Failed to validate SIBA")}});Cr("siba/getHistory",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await xa(async()=>{const{sibaAPI:a}=await import("./siba.api-C8NH5Aq2.js");return{sibaAPI:a}},[]);return await s.getSibaHistory(t)}catch(s){return r(s.response?.data?.message||"Failed to get SIBA history")}});const ov=Ro({name:"siba",initialState:z8,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(mc.pending,r=>{r.isLoading=!0,r.error=null}).addCase(mc.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.propertyId?r.statuses[s.payload.propertyId]=s.payload:console.error("Invalid SIBA response payload:",s.payload)}).addCase(mc.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(Tp.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Tp.fulfilled,r=>{r.isLoading=!1}).addCase(Tp.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(Op.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Op.fulfilled,r=>{r.isLoading=!1}).addCase(Op.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:QA}=ov.actions,$8=ov.reducer,V8=()=>{const[t,r]=R.useState(null),[s,a]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),o=As(),{properties:l}=Ft(z=>z.properties),{bookings:d,isLoading:u}=Ft(z=>z.bookings),{statuses:h,isLoading:m}=Ft(z=>z.siba);R.useEffect(()=>{l.length>0&&!t&&(console.log("🔍 SIBA: Auto-selecting first property:",l[0]),r(l[0].id))},[l,t]),R.useEffect(()=>{t&&(o(mc(t)),o(ma({propertyId:t,startDate:s.startDate,endDate:s.endDate})))},[o,t,s]);const p=h[t||0],v=d?.length||0,N=d?.reduce((z,he)=>z+he.adults+he.children,0)||0,y=N,k=0,C=N>0?Math.round(y/N*100):0,S=z=>z?new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",L=z=>{switch(z){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},P=z=>{switch(z){case"green":return"Compliant";case"amber":return"Warning";case"red":return"Overdue";default:return"Unknown"}},E=z=>{switch(z){case"green":return e.jsx(Fn,{className:"h-8 w-8 text-green-600"});case"amber":return e.jsx(bd,{className:"h-8 w-8 text-yellow-600"});case"red":return e.jsx(In,{className:"h-8 w-8 text-red-600"});default:return e.jsx(js,{className:"h-8 w-8 text-gray-400"})}},M=m||u;return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SIBA Compliance"}),e.jsx("p",{className:"text-gray-600",children:"Real-time compliance monitoring and guest reporting"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ba,{selectedId:t,onChange:r,properties:l}),e.jsxs("button",{onClick:()=>{t&&(o(mc(t)),o(ma({propertyId:t,startDate:s.startDate,endDate:s.endDate})))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Mr,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),M?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Real Data"}),e.jsx("p",{className:"text-gray-500",children:"Fetching SIBA status and booking information..."})]})}):p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border-2 p-8 mb-8 hover:shadow-3xl transition-all duration-300 ${L(p.status)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:E(p.status)}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["SIBA Status: ",P(p.status)]}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:p.message}),p.lastSibaSendDate&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Last submission: ",e.jsx("span",{className:`font-semibold ${p.status==="green"?"text-green-600":p.status==="amber"?"text-yellow-600":"text-red-600"}`,children:S(p.lastSibaSendDate)})]}),p.nextDueDate&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Next due: ",e.jsx("span",{className:`font-semibold ${(p.daysUntilDue||0)>7?"text-green-600":(p.daysUntilDue||0)>0?"text-yellow-600":"text-red-600"}`,children:S(p.nextDueDate)})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:[C,"%"]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Compliance Rate"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Data source: ",p.dataSource," • Last updated: ",new Date().toLocaleTimeString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl w-fit mx-auto mb-6",children:e.jsx(pa,{className:"h-8 w-8 text-white"})}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:y}),e.jsx("p",{className:"text-lg text-gray-600 mb-1",children:"Submitted Guests"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Real booking data"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl w-fit mx-auto mb-6",children:e.jsx(kl,{className:"h-8 w-8 text-white"})}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:k}),e.jsx("p",{className:"text-lg text-gray-600 mb-1",children:"Pending Guests"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Awaiting submission"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl w-fit mx-auto mb-6",children:e.jsx(ns,{className:"h-8 w-8 text-white"})}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:v}),e.jsx("p",{className:"text-lg text-gray-600 mb-1",children:"Total Bookings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Current period"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl w-fit mx-auto mb-6",children:e.jsx(V2,{className:"h-8 w-8 text-white"})}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:N}),e.jsx("p",{className:"text-lg text-gray-600 mb-1",children:"Total Guests"}),e.jsx("p",{className:"text-sm text-gray-500",children:"All visitors"})]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(In,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SIBA Data Available"}),e.jsx("p",{className:"text-gray-500",children:"Unable to fetch SIBA status for the selected property."})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(js,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Please select a property to view SIBA compliance status."})]})})})})},H8=()=>{const t=As(),{bulkDashboard:r}=Ft(P=>P.sibaManager),{properties:s}=Ft(P=>P.propertyManagement),{bookings:a}=Ft(P=>P.bookings),{statuses:o}=Ft(P=>P.siba),[l,d]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[u,h]=R.useState(null),[m,p]=R.useState(!1);R.useEffect(()=>{t(Ma())},[t]),R.useEffect(()=>{s&&s.length>0&&s.forEach(P=>{t(mc(P.id))})},[t,s]),R.useEffect(()=>{t(ma({propertyId:void 0,startDate:l.startDate,endDate:l.endDate}))},[t,l]);const N=!s||s.length===0?[]:s.map(P=>{const E=o[P.id],M=a.filter(B=>B.propertyId===P.id),z=M.length;M.reduce((B,W)=>B+(W.adults||0)+(W.children||0),0);const he=new Date,X=new Date(he.getTime()-720*60*60*1e3),J=M.filter(B=>{const W=new Date(B.checkOut||B.departureDate||new Date);return W>=X&&W<=he}),G=J.length,pe=J.filter(B=>{const W=new Date(B.checkOut||B.departureDate||new Date);return Math.floor((he.getTime()-W.getTime())/(1e3*60*60*24))>7}).length,I=G>0?Math.round((G-pe)/G*100):100,U=[];return pe>0?U.push("overdue"):G>0?U.push("pending"):E?.status==="green"?U.push("compliant"):E?.status==="amber"?U.push("due_soon"):E?.status==="red"&&U.push("overdue"),I<80&&U.push("low_compliance"),{propertyId:P.id,propertyName:P.name||`Property ${P.id}`,sibaStatus:E?.status||"red",lastSubmission:E?.lastSibaSendDate||null,nextDue:E?.nextDueDate||null,daysUntilDue:E?.daysUntilDue||null,totalReservations:z,pendingSubmissions:G,overdueSubmissions:pe,complianceRate:I,flags:U}}),y=async()=>{if(!m){p(!0),h({type:"info",message:"Refreshing all SIBA data..."});try{const E=(await t(Ma())).payload?.properties||s;if(E&&E.length>0){const M=E.map(z=>t(mc(z.id)));await Promise.all(M)}await t(ma({startDate:l.startDate,endDate:l.endDate})),h({type:"success",message:"Data refreshed successfully!"}),setTimeout(()=>h(null),3e3)}catch(P){console.error("Refresh error:",P),h({type:"error",message:"Failed to refresh data. Please try again."}),setTimeout(()=>h(null),3e3)}finally{p(!1)}}},k=P=>{switch(P){case"green":return e.jsx(Fn,{className:"h-5 w-5 text-green-600"});case"amber":return e.jsx(bd,{className:"h-5 w-5 text-yellow-600"});case"red":return e.jsx(In,{className:"h-5 w-5 text-red-600"});default:return e.jsx(js,{className:"h-5 w-5 text-gray-400"})}},C=P=>{switch(P){case"overdue":return"bg-red-100 text-red-800";case"due_soon":return"bg-yellow-100 text-yellow-800";case"compliant":return"bg-green-100 text-green-800";case"pending":return"bg-blue-100 text-blue-800";case"low_compliance":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},S=N,L={totalProperties:N.length,overdue:N.filter(P=>P.flags.includes("overdue")).length,dueSoon:N.filter(P=>P.flags.includes("due_soon")).length,compliant:N.filter(P=>P.flags.includes("compliant")).length,errors:N.filter(P=>P.flags.includes("error")).length};return r.isLoading?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading SIBA Dashboard"}),e.jsx("p",{className:"text-gray-500",children:"Fetching compliance data for all properties..."})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[u&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-md ${u.type==="success"?"bg-green-100 border border-green-300 text-green-800":u.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-100 border border-blue-300 text-blue-800"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[u.type==="success"&&e.jsx(Fn,{className:"h-5 w-5"}),u.type==="error"&&e.jsx(In,{className:"h-5 w-5"}),u.type==="info"&&e.jsx(bd,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:u.message})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SIBA Manager Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Real-time SIBA compliance monitoring with Hostkit data"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Data source: Hostkit API • Last updated: ",new Date().toLocaleTimeString()]}),N.length>0&&e.jsx("span",{className:"text-xs text-green-600",children:"✓ Real booking data"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:y,disabled:m,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${m?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx(Mr,{className:`h-4 w-4 ${m?"animate-spin":""}`}),e.jsx("span",{children:m?"Refreshing...":"Refresh"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(js,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.totalProperties}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Properties"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-red-200 p-6 text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(In,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.overdue}),e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-yellow-200 p-6 text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(kl,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.dueSoon}),e.jsx("p",{className:"text-sm text-gray-600",children:"Due Soon"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-green-200 p-6 text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Fn,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.compliant}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compliant"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(bd,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.errors}),e.jsx("p",{className:"text-sm text-gray-600",children:"Errors"})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-6 text-left text-lg font-semibold text-gray-900",children:"Property"}),e.jsx("th",{className:"px-8 py-6 text-left text-lg font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-left text-lg font-semibold text-gray-900",children:"Flags"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:S&&S.length>0?S.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:P.propertyName}),e.jsxs("div",{className:"text-base text-gray-500",children:["ID: ",P.propertyId]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[k(P.sibaStatus),e.jsx("span",{className:"text-lg font-semibold capitalize",children:P.sibaStatus})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:P.flags.map((E,M)=>e.jsx("span",{className:`px-3 py-2 text-sm font-medium rounded-full ${C(E)}`,children:E.replace("_"," ")},M))})})]},P.propertyId)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-8 py-12 text-center text-gray-500",children:"No properties data available. Click refresh to load data."})})})]})})})]})})},y0=async(t,r)=>{console.log("🔍 uploadPropertyImages called with:",{propertyId:t,imagesCount:r.length,images:r.map(o=>({name:o.name,size:o.size,type:o.type}))});const s=new FormData;return r.forEach((o,l)=>{console.log(`🔍 Appending image ${l}:`,{name:o.name,size:o.size,type:o.type}),s.append("images",o)}),console.log("🔍 FormData entries:",Array.from(s.entries())),await Ct.post(`/image-upload/${t}`,s,{headers:{"Content-Type":void 0}})},lv=async(t,r)=>(console.log("🔍 deletePropertyImage called with:",{propertyId:t,imageUrl:r}),await Ct.delete(`/image-upload/${t}/${r}`)),cv=Object.freeze(Object.defineProperty({__proto__:null,deletePropertyImage:lv,uploadPropertyImages:y0},Symbol.toStringTag,{value:"Module"})),dv=({filteredProperties:t,onPropertyUpdate:r,owners:s=[]})=>{const a=As(),{user:o}=Ft(ie=>ie.auth),{properties:l,selectedProperty:d,isLoading:u,isCreating:h,isUpdating:m,isDeleting:p,isTesting:v,error:N,hostkitTestResult:y}=Ft(ie=>ie.propertyManagement),k=t||l,C=c3(o?.role||null),[S,L]=R.useState(!1),[P,E]=R.useState(!1),[M,z]=R.useState(!1),[he,X]=R.useState({}),[J,G]=R.useState(null),[pe,I]=R.useState([]),[U,B]=R.useState(!1),[W,Y]=R.useState({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[],owner:""});R.useEffect(()=>{a(Ma())},[a]),R.useEffect(()=>{const ie=ge=>{const de=ge.detail.property;de&&se(de)};return window.addEventListener("editProperty",ie),()=>{window.removeEventListener("editProperty",ie)}},[]);const le=ie=>{const{name:ge,value:de}=ie.target;Y(ue=>({...ue,[ge]:ge==="id"||ge==="bedrooms"||ge==="bathrooms"||ge==="maxGuests"?parseInt(de)||0:de}))},F=ie=>{const ge=ie.target.value.split(",").map(de=>de.trim()).filter(de=>de);Y(de=>({...de,amenities:ge}))},Z=async()=>{W.hostkitId&&W.hostkitApiKey&&await a(af({hostkitId:W.hostkitId,apiKey:W.hostkitApiKey}))},be=ie=>{const ge=Array.from(ie.target.files||[]);console.log("🔍 Files selected:",ge.length,ge.map(de=>de.name)),I(de=>[...de,...ge])},Ae=ie=>{I(ge=>ge.filter((de,ue)=>ue!==ie))},ee=async()=>{if(console.log("🔍 handleImageUpload called with:",{localSelectedProperty:J,selectedImages:pe,selectedImagesLength:pe.length,selectedImagesDetails:pe.map(ie=>({name:ie.name,size:ie.size,type:ie.type}))}),!J||pe.length===0){console.log("❌ No property selected or no images selected");return}console.log("🔍 Starting image upload:",{propertyId:J.id,selectedImages:pe.length,imageNames:pe.map(ie=>ie.name)}),B(!0);try{const ie=await y0(J.id.toString(),pe);if(console.log("✅ Images uploaded successfully:",ie),console.log("🔍 Response property images:",ie.property?.images),console.log("🔍 Current localSelectedProperty images:",J.images),ie.property&&ie.property.images){const de={...J,images:ie.property.images};console.log("🔍 Setting localSelectedProperty to:",de.images),G(de)}a(Ma()),r?(console.log("🔄 Calling onPropertyUpdate callback to refresh parent properties"),r()):console.log("⚠️ No onPropertyUpdate callback provided"),I([]);const ge=document.getElementById("image-upload");ge&&(ge.value="")}catch(ie){console.error("❌ Error uploading images:",ie),console.error("❌ Error details:",ie.response?.data||ie.message)}finally{B(!1)}},D=async ie=>{if(J)try{const ge=ie.split("/").pop();console.log("🔍 Deleting image:",{imageUrl:ie,filename:ge});const de=await lv(J.id.toString(),ge||ie);console.log("✅ Image deleted successfully:",de);const ue=J.images.filter(Pe=>Pe!==ie);G({...J,images:ue}),a(Ma()),r&&r()}catch(ge){console.error("❌ Error deleting image:",ge)}},te=async ie=>{if(ie.preventDefault(),console.log("🔍 Form submission debug:",{showEditForm:P,selectedProperty:d?d.id:null,selectedPropertyId:d?._id,localSelectedProperty:J?J.id:null,localSelectedPropertyId:J?._id,formData:Object.keys(W)}),P&&J){const ge={...W};console.log("🔍 Original formData:",W),(!ge.images||ge.images.length===0)&&(delete ge.images,console.log("🔄 Excluding empty images field from update to preserve existing images")),console.log("🔍 Final updateData:",ge),console.log("✅ Calling updatePropertyAsync with:",{propertyId:J._id,propertyData:ge});const de=await a(vd({propertyId:J._id,propertyData:ge}));console.log("🔍 Update result:",de),vd.fulfilled.match(de)?(console.log("✅ Property update successful"),E(!1),V(),a(Ma()),r&&r()):vd.rejected.match(de)&&(console.error("❌ Property update failed:",de.payload),console.error("❌ Update error details:",de.error),console.error("❌ Full result object:",de),alert(`Property update failed: ${de.payload||de.error||"Unknown error"}`))}else{console.log("❌ Calling createPropertyAsync instead of update - this is the problem!"),console.log("showEditForm:",P),console.log("selectedProperty:",d),console.log("localSelectedProperty:",J);try{const ge=await a(Su(W));if(Su.fulfilled.match(ge)){if(pe.length>0)try{B(!0),await y0(W.id.toString(),pe),console.log("✅ Images uploaded successfully for new property:",W.id),I([])}catch(de){console.error("❌ Error uploading images:",de)}finally{B(!1)}L(!1),V(),await a(Ma()),r&&r()}}catch(ge){console.error("Error creating property:",ge)}}},se=ie=>{console.log("🔍 handleEdit called with property:",{id:ie.id,_id:ie._id,name:ie.name,hostkitApiKey:ie.hostkitApiKey?"Present":"Missing",hostkitApiKeyLength:ie.hostkitApiKey?ie.hostkitApiKey.length:0,allPropertyKeys:Object.keys(ie)}),G(ie),Mh(ie);const ge={id:ie.id,name:ie.name,address:ie.address,type:ie.type,bedrooms:ie.bedrooms,bathrooms:ie.bathrooms,maxGuests:ie.maxGuests,hostkitId:ie.hostkitId,hostkitApiKey:ie.hostkitApiKey||"",status:ie.status,images:ie.images||[],amenities:ie.amenities||[],owner:ie.isAdminOwned?"admin":ie.owner?._id||""};console.log("🔍 Setting form data with hostkitApiKey:",ge.hostkitApiKey?"Present":"Empty"),console.log("🔍 hostkitApiKey value:",ge.hostkitApiKey),Y(ge),E(!0),console.log("✅ showEditForm set to true, localSelectedProperty set")},fe=async()=>{d&&(await a(nf(d._id)),N||(z(!1),Mh(null),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:d.id||d._id,propertyName:d.name}})),r&&r()))},V=()=>{Y({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[]}),G(null),I([]),a(E6())},ye=({property:ie})=>{const ge=J&&J.id===ie.id?J:ie,de=ge.images&&ge.images.length>0?lf(ge.images[0]):"No images";return console.log("🔍 PropertyCard rendering:",{propertyName:ge.name,propertyId:ge.id,images:ge.images,imageUrl:de,usingLocalState:J&&J.id===ie.id,fullProperty:ge}),e.jsx("div",{className:"card hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"mb-4",children:ge.images&&ge.images.length>0?e.jsx("img",{src:lf(ge.images[0]),alt:ge.name,className:"w-full h-48 object-cover rounded-md",onError:ue=>{console.error("❌ Image failed to load:",ue.currentTarget.src)},onLoad:ue=>{console.log("✅ Image loaded successfully:",ue.currentTarget.src)}}):e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-md flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(np,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Property Image"})]})})}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:ge.name}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(yd,{className:"h-4 w-4 mr-1"}),ge.address]})]}),e.jsx("span",{className:`badge ${ge.status==="active"?"badge-success":ge.status==="inactive"?"badge-warning":"badge-error"}`,children:ge.status})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(np,{className:"h-4 w-4 mr-1"}),ie.type]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Hostkit ID:"}),e.jsx("div",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:ie.hostkitId})]}),ie.amenities&&ie.amenities.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Amenities:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.amenities.slice(0,3).map((ue,Pe)=>e.jsx("span",{className:"badge badge-secondary text-xs",children:ue},Pe)),ie.amenities.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",ie.amenities.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>se(ie),className:"btn-outline btn-sm flex-1",disabled:m||!C,title:C?"":"Only owners can edit properties",children:[e.jsx(Pl,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>{a(Mh(ie)),z(!0)},className:"btn-outline btn-sm text-red-600 border-red-300 hover:bg-red-50",disabled:p||!C,title:C?"":"Only owners can delete properties",children:e.jsx(Mu,{className:"h-4 w-4"})})]})]})})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Property Management"}),e.jsx("p",{className:"text-gray-600",children:C?"Manage your properties and Hostkit integrations":"View properties (Read-only mode)"}),!C&&e.jsxs("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm bg-amber-100 text-amber-800",children:[e.jsx(In,{className:"h-4 w-4 mr-1"}),"Read only access"]})]})}),N&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(In,{className:"h-4 w-4"}),e.jsx("span",{children:N}),e.jsx("button",{onClick:()=>a(cy()),className:"ml-auto",children:e.jsx(Sl,{className:"h-4 w-4"})})]}),u?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(uu,{className:"h-8 w-8 animate-spin text-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading properties..."})]}):k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(np,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first property to get started"}),e.jsxs("button",{onClick:()=>{V(),a(cy()),L(!0)},className:"btn-primary",disabled:!C,title:C?"":"Only owners can create properties",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(ie=>e.jsx(ye,{property:ie},ie._id))}),(S||P)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:P?"Edit Property":"Add New Property"}),e.jsx("button",{onClick:()=>{L(!1),E(!1),V()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Sl,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID *"}),e.jsx("input",{type:"number",name:"id",value:W.id||"",onChange:le,className:"input",required:!0,disabled:P})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{name:"type",value:W.type,onChange:le,className:"input",required:!0,children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",name:"name",value:W.name,onChange:le,className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),e.jsxs("select",{name:"owner",value:W.owner,onChange:le,className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),s.map(ie=>e.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:W.address,onChange:le,className:"input",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",name:"bedrooms",value:W.bedrooms,onChange:le,className:"input",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",name:"bathrooms",value:W.bathrooms,onChange:le,className:"input",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",name:"maxGuests",value:W.maxGuests,onChange:le,className:"input",min:"1",required:!0})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",name:"hostkitId",value:W.hostkitId,onChange:le,className:"input font-mono",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),e.jsx("input",{type:"password",name:"hostkitApiKey",value:W.hostkitApiKey,onChange:le,className:"input font-mono",required:!0})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{type:"button",onClick:Z,className:"btn-outline btn-sm",disabled:v||!W.hostkitId||!W.hostkitApiKey,children:v?e.jsxs(e.Fragment,{children:[e.jsx(uu,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E3,{className:"h-4 w-4 mr-2"}),"Test Connection"]})}),y&&e.jsx("div",{className:`mt-2 p-3 rounded-md ${y.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[y.success?e.jsx(Fn,{className:"h-4 w-4 mr-2"}):e.jsx(Sl,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:y.message})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amenities (comma-separated)"}),e.jsx("input",{type:"text",value:W.amenities?.join(", ")||"",onChange:F,className:"input",placeholder:"WiFi, Kitchen, Pool, Parking"})]}),P&&J&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),J.images&&J.images.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Images:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:J.images.map((ie,ge)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:lf(ie),alt:`Property ${ge+1}`,className:"w-full h-24 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:()=>D(ie),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},ge))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:be,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80"}),pe.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((ie,ge)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:ie.name}),e.jsx("button",{type:"button",onClick:()=>I(de=>de.filter((ue,Pe)=>Pe!==ge)),className:"text-red-500 hover:text-red-700",children:"×"})]},ge))})]}),e.jsx("button",{type:"button",onClick:()=>{console.log("🔍 Upload button clicked, selectedImages:",pe.length),ee()},disabled:pe.length===0||U,className:"btn-outline btn-sm",children:U?e.jsxs(e.Fragment,{children:[e.jsx(uu,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D3,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})]})]}),S&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:be,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),pe.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((ie,ge)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:ie.name}),e.jsx("button",{type:"button",onClick:()=>Ae(ge),className:"text-red-500 hover:text-red-700",children:e.jsx(Kr,{className:"h-4 w-4"})})]},ge))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),E(!1),V()},className:"btn-outline flex-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:h||m||!C,title:C?"":"Only owners can create/update properties",children:h||m?e.jsxs(e.Fragment,{children:[e.jsx(uu,{className:"h-4 w-4 mr-2 animate-spin"}),P?"Updating...":"Creating..."]}):P?"Update Property":"Create Property"})]})]})]})})}),M&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(In,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Property"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',d.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{z(!1),Mh(null)},className:"btn-outline flex-1",children:"Cancel"}),e.jsx("button",{onClick:fe,className:"btn-primary bg-red-600 hover:bg-red-700 flex-1",disabled:p||!C,title:C?"":"Only owners can delete properties",children:p?e.jsxs(e.Fragment,{children:[e.jsx(uu,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})})]})},W8=({propertyId:t,startDate:r,endDate:s})=>{const[a,o]=R.useState({bookings:[],blockedDates:[],availableDates:[]}),[l,d]=R.useState(!1),[u,h]=R.useState(null),{token:m}=Ft(y=>y.auth),p=async()=>{if(!(!t||!m)){d(!0),h(null);try{const y=await Ct.get(`/calendar/${t}?startDate=${r}&endDate=${s}`);console.log("Calendar API response:",y);const k={bookings:y.bookings||y.result||[],blockedDates:y.blockedDates||[],availableDates:y.availableDates||[]};console.log("Structured calendar data:",k),o(k)}catch(y){console.error("Calendar fetch error:",y),h(y.message||"Failed to fetch calendar data")}finally{d(!1)}}},v=async(y,k,C)=>{if(!(!t||!m)){d(!0),h(null);try{const S=await Ct.put(`/calendar/${t}`,{startDate:y,endDate:k,status:C});return await p(),S}catch(S){throw h(S.message||"Failed to update calendar"),S}finally{d(!1)}}},N=async()=>{};return R.useEffect(()=>{t&&r&&s&&m&&(console.log("useCalendar: Fetching calendar data for:",{propertyId:t,startDate:r,endDate:s}),p())},[t,r,s,m]),{calendarData:a,isLoading:l,error:u,fetchCalendarData:p,updateCalendar:v,fetchBookings:N}},G8=async(t,r)=>await Ct.get(`/calendar/${t}/date/${r}`),K8=async(t,r,s)=>{console.log("API: Fetching calendar pricing for:",{listingId:t,year:r,month:s});const a=await Ct.get(`/calendar/${t}/month/${r}/${s}`);return console.log("API: Raw response:",a),console.log("API: Pricing data:",a.pricingData),a.pricingData},C1=async(t,r,s,a)=>await Ct.put("/calendar",{listingId:t,startDate:r,endDate:s,isAvailable:a}),Y8=({propertyId:t,onDateSelect:r})=>{const s=As(),{user:a}=Ft(Ye=>Ye.auth),[o,l]=R.useState(t||null),[d,u]=R.useState(new Date),[h,m]=R.useState(null),[p,v]=R.useState(!1),[N,y]=R.useState(!1),[k,C]=R.useState(null),[S,L]=R.useState(null),[P,E]=R.useState(!1),[M,z]=R.useState({}),[he,X]=R.useState(!1),[J,G]=R.useState(0),[pe,I]=R.useState(1),[U,B]=R.useState(!1),W=new Date(d.getFullYear(),d.getMonth()-1,1).toISOString().split("T")[0],Y=new Date(d.getFullYear(),d.getMonth()+2,0).toISOString().split("T")[0],{token:le}=Ft(Ye=>Ye.auth),F=Ft(Ye=>Ye.propertyManagement.properties);R.useEffect(()=>{F.length===0&&s(Ma())},[s,F.length]);const{calendarData:Z,isLoading:be,error:Ae,updateCalendar:ee}=W8({propertyId:o,startDate:W,endDate:Y});R.useEffect(()=>{F.length>0&&!o&&l(F[0].id)},[F,o]);const D={bookings:Z?.bookings||[],blockedDates:Z?.blockedDates||[],availableDates:Z?.availableDates||[],calendar:Z?.result||[]},te=Ye=>{u(rt=>{const et=new Date(rt);return Ye==="prev"?et.setMonth(rt.getMonth()-1):et.setMonth(rt.getMonth()+1),et})},se=async()=>{if(o)try{X(!0);const Ye=d.getFullYear(),rt=d.getMonth();console.log("Fetching monthly pricing data:",{selectedPropertyId:o,year:Ye,month:rt});const et=await K8(o,Ye,rt);console.log("Received monthly pricing data:",et),console.log("Sample pricing data keys:",Object.keys(et).slice(0,5)),console.log("Sample pricing data values:",Object.values(et).slice(0,3)),z(et)}catch(Ye){if(console.error("Failed to fetch monthly pricing data:",Ye),Ye&&typeof Ye=="object"&&"response"in Ye&&Ye.response&&typeof Ye.response=="object"&&"status"in Ye.response&&Ye.response.status===401){console.error("Authentication failed - token may be expired. Please refresh the page."),alert("Your session has expired. Please refresh the page to continue.");return}const rt=d.getFullYear(),et=d.getMonth(),$e=new Date(rt,et+1,0),re={};for(let ce=1;ce<=$e.getDate();ce++){const Oe=new Date(rt,et,ce).toISOString().split("T")[0];re[Oe]={price:289,minimumStay:2,status:"available"}}z(re)}finally{X(!1)}};R.useEffect(()=>{se()},[d,o]);const fe=async Ye=>{if(!ld(a?.role||null)){alert("Only owners can manage calendar dates. You can view the calendar but cannot make changes.");return}C(Ye),y(!0),E(!0);try{const rt=Ye.toISOString().split("T")[0],et=await G8(o||392776,rt);L(et),G(et.price||0),I(et.minimumStay||1)}catch(rt){console.error("Failed to fetch calendar date data:",rt),L({date:Ye.toISOString().split("T")[0],status:"available",price:null,minimumStay:null,checkInAvailable:!0,checkOutAvailable:!0})}finally{E(!1)}if(!h)m({start:Ye.toISOString().split("T")[0],end:Ye.toISOString().split("T")[0]});else{const rt=new Date(h.start),et=new Date(h.end),$e=Ye;$e<rt?m({start:$e.toISOString().split("T")[0],end:h.end}):$e>et?m({start:h.start,end:$e.toISOString().split("T")[0]}):m(null)}},V=async()=>{if(!(!h||!o)){v(!0);try{await ee(h.start,h.end,"blocked"),m(null)}catch(Ye){console.error("Failed to block dates:",Ye)}finally{v(!1)}}},ye=async()=>{if(!(!h||!o)){v(!0);try{await ee(h.start,h.end,"available"),m(null)}catch(Ye){console.error("Failed to unblock dates:",Ye)}finally{v(!1)}}},ie=async()=>{if(!(!k||!o)){v(!0);try{const Ye=k.getFullYear(),rt=String(k.getMonth()+1).padStart(2,"0"),et=String(k.getDate()).padStart(2,"0"),$e=`${Ye}-${rt}-${et}`;console.log("Blocking date:",{clickedDate:k,dateStr:$e});const re=await C1(o,$e,$e,0);console.log("Date blocked successfully:",re),y(!1),r&&r($e),window.location.reload()}catch(Ye){console.error("Failed to block date:",Ye),alert("Failed to block date. Please try again.")}finally{v(!1)}}},ge=async()=>{if(!(!k||!o)){v(!0);try{const Ye=k.getFullYear(),rt=String(k.getMonth()+1).padStart(2,"0"),et=String(k.getDate()).padStart(2,"0"),$e=`${Ye}-${rt}-${et}`;console.log("Unblocking date:",{clickedDate:k,dateStr:$e});const re=await C1(o,$e,$e,1);console.log("Date unblocked successfully:",re),y(!1),r&&r($e),window.location.reload()}catch(Ye){console.error("Failed to unblock date:",Ye),alert("Failed to unblock date. Please try again.")}finally{v(!1)}}},de=Ye=>{if(!h)return!1;const rt=Ye.toISOString().split("T")[0];return rt>=h.start&&rt<=h.end},ue=Ye=>{const rt=Ye.getFullYear(),et=String(Ye.getMonth()+1).padStart(2,"0"),$e=String(Ye.getDate()).padStart(2,"0"),re=`${rt}-${et}-${$e}`;return console.log("Checking if date is blocked:",re,{blockedDates:D.blockedDates,bookings:D.bookings}),Array.isArray(D.blockedDates)&&D.blockedDates.some(je=>{if(je.date===re)return je.status==="unavailable"||je.status==="blocked";if(je.startDate&&je.endDate){const Oe=new Date(je.startDate),Re=new Date(je.endDate),Fe=new Date(re);return Fe>=Oe&&Fe<=Re&&(je.status==="unavailable"||je.status==="blocked")}return!1})?(console.log(`Date ${re} is blocked via blockedDates`),!0):Array.isArray(D.bookings)&&D.bookings.some(je=>je.date===re?je.status==="unavailable"||je.status==="blocked":!1)?(console.log(`Date ${re} is blocked via result array`),!0):!1},Pe=Ye=>{const rt=Ye.getFullYear(),et=String(Ye.getMonth()+1).padStart(2,"0"),$e=String(Ye.getDate()).padStart(2,"0"),re=`${rt}-${et}-${$e}`;return D.bookings.some(ce=>{const je=ce.arrivalDate||ce.checkIn,Oe=ce.departureDate||ce.checkOut,Re=ce.status||ce.bookingStatus,Fe=new Date(je),We=new Date(Oe),at=new Date(re);return at>=Fe&&at<=We&&(Re==="Modified"||Re==="Confirmed"||Re==="Paid")})},Xe=Ye=>{const rt=Ye.getFullYear(),et=String(Ye.getMonth()+1).padStart(2,"0"),$e=String(Ye.getDate()).padStart(2,"0"),re=`${rt}-${et}-${$e}`;if(Array.isArray(D.bookings)){const ce=D.bookings.find(je=>{const Oe=je.arrivalDate||je.checkIn,Re=je.departureDate||je.checkOut,Fe=je.status||je.bookingStatus,We=new Date(Oe),at=new Date(Re),nt=new Date(re);return nt>=We&&nt<=at&&(Fe==="Modified"||Fe==="Confirmed"||Fe==="Paid")});if(ce)return{guestName:ce.guestName||"Guest",guestCount:(ce.adults||0)+(ce.children||0),isCheckInDay:re===(ce.arrivalDate||ce.checkIn),isCheckOutDay:re===(ce.departureDate||ce.checkOut),checkInTime:ce.checkInTime||"16:00",checkOutTime:ce.checkOutTime||"11:00"}}return null},Me=Ye=>{const rt=Ye.getFullYear(),et=String(Ye.getMonth()+1).padStart(2,"0"),$e=String(Ye.getDate()).padStart(2,"0"),re=`${rt}-${et}-${$e}`;return Array.isArray(D.bookings)?D.bookings.filter(ce=>{const je=ce.arrivalDate||ce.checkIn,Oe=ce.departureDate||ce.checkOut,Re=ce.status||ce.bookingStatus,Fe=new Date(je),We=new Date(Oe),at=new Date(re);return(at.getTime()===Fe.getTime()||at.getTime()===We.getTime()||at>Fe&&at<We)&&(Re==="Modified"||Re==="Confirmed"||Re==="Paid")}).map(ce=>{const je=ce.arrivalDate||ce.checkIn,Oe=ce.departureDate||ce.checkOut,Re=new Date(je),Fe=new Date(Oe),We=new Date(re);return{guestName:ce.guestName||"Guest",guestCount:(ce.adults||0)+(ce.children||0),isCheckInDay:We.getTime()===Re.getTime(),isCheckOutDay:We.getTime()===Fe.getTime(),checkInTime:ce.checkInTime||"16:00",checkOutTime:ce.checkOutTime||"11:00",isStaying:We>Re&&We<Fe}}):[]},me=()=>{const Ye=d.getFullYear(),rt=d.getMonth(),et=new Date(Ye,rt,1),$e=new Date(Ye,rt+1,0),re=new Date(et);re.setDate(re.getDate()-et.getDay());const ce=new Date($e);ce.setDate(ce.getDate()+(6-$e.getDay()));const je=[],Oe=new Date(re);for(;Oe<=ce;)je.push(new Date(Oe)),Oe.setDate(Oe.getDate()+1);return je.map((Re,Fe)=>{const We=Re.getMonth()===rt,at=Re.toDateString()===new Date().toDateString(),nt=Pe(Re);Xe(Re);const it=ue(Re),wt=de(Re);return e.jsxs("div",{className:`
              relative min-h-[120px] p-0 group
              ${We?"bg-gray-50":"bg-gray-100"}
              ${at?"bg-blue-50":""}
              ${nt?"bg-teal-50":""}
              ${it?"bg-red-50":""}
              ${wt?"bg-green-100 border-2 border-green-400":""}
              ${(()=>{const ot=Re.getFullYear(),Ut=String(Re.getMonth()+1).padStart(2,"0"),qt=String(Re.getDate()).padStart(2,"0"),lt=`${ot}-${Ut}-${qt}`,xt=M[lt];return xt?.status==="reserved"?"bg-teal-50":xt?.status==="blocked"?"bg-red-50":""})()}
            `,style:{overflow:"visible"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 p-2",children:[e.jsx("span",{className:`
               text-sm font-medium px-2 py-1 rounded
               ${We?"text-gray-900 bg-gray-200":"text-gray-400 bg-gray-100"}
               ${at?"text-blue-600 bg-blue-100":""}
               ${wt?"text-green-800 bg-green-200 font-bold":""}
               ${it?"text-red-800 bg-red-200 font-bold":""}
             `,children:Re.getDate()}),it&&e.jsx("span",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded font-bold",children:"BLOCKED"})]}),We&&(()=>{const ot=Re.getFullYear(),Ut=String(Re.getMonth()+1).padStart(2,"0"),qt=String(Re.getDate()).padStart(2,"0"),lt=`${ot}-${Ut}-${qt}`,xt=M[lt];return he?e.jsx("div",{className:"absolute bottom-1 right-1 px-3 py-2 bg-gray-100 rounded-md text-xs text-gray-400 z-20 shadow-md",children:"Loading..."}):e.jsxs("div",{className:`absolute bottom-1 right-1 px-3 py-2 bg-gray-100 rounded-md space-y-1 z-20 shadow-md transition-opacity duration-200 ${xt?.status==="reserved"?"opacity-0 group-hover:opacity-100":"opacity-100"}`,children:[e.jsxs("div",{className:`text-xs font-semibold ${xt?.status==="reserved"?"text-teal-700":xt?.status==="blocked"?"text-red-700":"text-gray-700"}`,children:["€",xt?.price||"N/A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[xt?.minimumStay||"N/A"," nights min"]}),xt?.status==="reserved"&&e.jsx("div",{className:"text-xs text-teal-600 font-bold",children:"RESERVED"}),xt?.status==="blocked"&&e.jsx("div",{className:"text-xs text-red-600 font-bold",children:"BLOCKED"})]})})(),nt&&(()=>{const ot=Me(Re);return e.jsx("div",{className:"mt-2 relative",style:{height:"40px"},children:ot.map((Ut,qt)=>{const lt=Ut.isCheckInDay,xt=Ut.isCheckOutDay;Ut.isStaying;let Gt,Nt,Rt,Pt;if(xt&&!lt)Gt="40px",Nt="0px",Rt="30%",Pt="0px";else if(lt&&!xt)Gt="40px",Nt="0px",Rt="70%",Pt="30%";else{if(xt&&lt)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bg-teal-500 flex items-center px-2",style:{left:"-6px",top:"0px",height:"40px",width:"30%",zIndex:10,borderRadius:"0 6px 6px 0"},children:e.jsx("div",{className:"flex-1"})},`${qt}-checkout`),e.jsx("div",{className:"absolute bg-teal-500 flex items-center px-2",style:{left:"30%",top:"0px",height:"40px",width:"70%",zIndex:10,borderRadius:"0"},children:e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:Ut.guestName?Ut.guestName.charAt(0).toUpperCase():"G"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-white truncate",children:Ut.guestName}),e.jsxs("div",{className:"text-xs text-teal-100",children:[Ut.guestCount," guests"]})]})]})},`${qt}-checkin`)]});Gt="40px",Nt="0px",Rt="100%",Pt="0px"}return e.jsxs("div",{className:"absolute bg-teal-500 flex items-center px-2",style:{left:Pt==="0px"?"-9px":Pt,right:Pt==="0px"?"-9px":"0px",top:Nt,height:Gt,width:Rt,zIndex:10,borderRadius:lt?"6px 0 0 6px":xt?"0 6px 6px 0":"0"},children:[lt&&e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:Ut.guestName?Ut.guestName.charAt(0).toUpperCase():"G"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-white truncate",children:Ut.guestName}),e.jsxs("div",{className:"text-xs text-teal-100",children:[Ut.guestCount," guests"]})]})]}),xt&&!lt&&e.jsx("div",{className:"flex-1"})]},qt)})})})(),e.jsx("button",{onClick:()=>fe(Re),disabled:!We||nt||!ld(a?.role||null),className:`absolute inset-0 w-full h-full opacity-0 ${ld(a?.role||null)?"cursor-pointer disabled:cursor-not-allowed":"cursor-not-allowed"}`,title:ld(a?.role||null)?"":"Only owners can manage calendar dates"})]},Fe)})};return be?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ae?e.jsxs("div",{className:"flex items-center justify-center p-8 text-red-600",children:[e.jsx(In,{className:"h-5 w-5 mr-2"}),Ae]}):o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Property Calendar"}),!ld(a?.role||null)&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-amber-100 text-amber-800 rounded-md text-xs",children:[e.jsx(hc,{className:"h-3 w-3"}),e.jsx("span",{children:"View Only"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:ld(a?.role||null)?"Manage availability and view bookings":"View availability and bookings (read-only)"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsx(Ba,{properties:F,selectedId:o,onChange:l})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("button",{onClick:()=>te("prev"),className:"p-3 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:e.jsx(b3,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>te("next"),className:"p-3 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:e.jsx(v3,{className:"h-5 w-5 text-gray-600"})})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 bg-gray-100 p-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Ye=>e.jsx("div",{className:"p-3 text-center text-sm font-semibold text-gray-600 bg-white rounded-lg border border-gray-200",children:Ye},Ye))}),e.jsx("div",{className:"grid grid-cols-7 gap-0 bg-gray-100 p-0 rounded-lg",children:me()})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-6 text-sm text-gray-600 bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-green-50 border border-green-300 rounded mr-2"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Booked"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-red-50 border border-red-300 rounded mr-2"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Blocked"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-white border border-gray-300 rounded mr-2"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Available"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-teal-100 border border-teal-300 rounded mr-2"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Guest Details"})]})]}),h&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Selected: ",h.start," to ",h.end]}),e.jsx("p",{className:"text-xs text-blue-700",children:"Click to block or unblock these dates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:V,disabled:p,className:"btn-primary btn-sm",children:[p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Kr,{className:"h-4 w-4 mr-1"}),"Block Dates"]}),e.jsxs("button",{onClick:ye,disabled:p,className:"btn-outline btn-sm",children:[p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.jsx(Eo,{className:"h-4 w-4 mr-1"}),"Unblock Dates"]}),e.jsx("button",{onClick:()=>m(null),className:"text-blue-600 hover:text-blue-800",children:"Cancel"})]})]})}),N&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Date"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Date:"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:k.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),P?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading date data..."})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Date Status:"}),e.jsx("div",{className:"flex items-center space-x-2",children:S?.status==="unavailable"||ue(k)?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(Kr,{className:"h-3 w-3 mr-1"}),"Blocked"]}):Pe(k)?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:[e.jsx(Eo,{className:"h-3 w-3 mr-1"}),"Booked"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Eo,{className:"h-3 w-3 mr-1"}),"Available"]})})]})}),e.jsxs("div",{className:"flex space-x-3",children:[!Pe(k)&&e.jsx(e.Fragment,{children:ue(k)?e.jsx("button",{onClick:ge,disabled:p,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Unblock Date"]})}):e.jsx("button",{onClick:ie,disabled:p,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Block Date"]})})}),e.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Close"})]}),Pe(k)&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:"This date is booked and cannot be blocked or unblocked."})})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(en,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500",children:"Please select a property to view its calendar and bookings."})]})})},J8=()=>{const t=As(),[r]=qu(),[s,a]=R.useState({propertyId:void 0,startDate:void 0,endDate:void 0}),{isAuthenticated:o}=Ft(l=>l.auth);return R.useEffect(()=>{o&&t(Wi())},[t,o]),$0(),R.useEffect(()=>{const l=r.get("propertyId"),d=r.get("startDate"),u=r.get("endDate"),h=r.get("period");(l||d||u)&&a({propertyId:l?parseInt(l):void 0,startDate:d||void 0,endDate:u||void 0}),h&&console.log(`Applied ${h==="thisMonth"?"this month":h==="lastMonth"?"last month":h} calendar filters for property ${l}`)},[r]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Property Calendar"}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["Manage your property availability and view bookings",s.propertyId&&` for Property ${s.propertyId}`]})]}),e.jsx("div",{children:e.jsx(Y8,{propertyId:s.propertyId})})]})},Q8=({propertyId:t,month:r})=>{const[s,a]=R.useState(null),[o,l]=R.useState(!1),[d,u]=R.useState(null),{token:h}=Ft(v=>v.auth),m=async()=>{if(!(!r||!h)){l(!0),u(null);try{const v=await fetch(`/api/performance/${t}?month=${r}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!v.ok){const y=await v.text();throw console.error("Performance API error:",v.status,y),new Error(`Failed to fetch performance data: ${v.status}`)}const N=await v.json();a(N)}catch(v){console.error("Performance fetch error:",v),u(v.message||"Failed to fetch performance data")}finally{l(!1)}}},p=()=>{m()};return R.useEffect(()=>{r&&m()},[t,r]),{performanceData:s,isLoading:o,error:d,refreshData:p}},X8=({propertyId:t,month:r})=>{const[s,a]=R.useState(t||392776),[o,l]=R.useState(r||new Date().toISOString().slice(0,7)),d=Ft(k=>k.propertyManagement.properties),{token:u}=Ft(k=>k.auth),{performanceData:h,isLoading:m,error:p,refreshData:v}=Q8({propertyId:s||392776,month:o}),N=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(k),y=()=>{const k=[],C=new Date;for(let S=0;S<12;S++){const L=new Date(C.getFullYear(),C.getMonth()-S,1),P=L.toISOString().slice(0,7),E=L.toLocaleDateString("en-US",{month:"long",year:"numeric"});k.push({value:P,label:E})}return k};return m?e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):p?e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx("p",{className:"font-medium",children:"Error loading performance data"}),e.jsx("p",{className:"text-sm",children:p}),e.jsx("button",{onClick:v,className:"mt-2 text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Performance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue, commission, and payout overview"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsx(Ba,{properties:d,selectedId:s,onChange:a}),e.jsx("select",{value:o,onChange:k=>l(k.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:y().map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh data",children:e.jsx(Mr,{className:"h-5 w-5"})})]})]}),h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gross Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.grossRevenue)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(N3,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.commissionTotal)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h.commissionPercent,"% of gross"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(wu,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cleaning Fees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.cleaningFees)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deducted from gross"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(pa,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Net Payout"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:N(h.netPayout)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your earnings"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(fi,{className:"h-6 w-6 text-green-600"})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Gross Revenue"}),e.jsx("span",{className:"font-medium",children:N(h.grossRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[e.jsxs("span",{children:["Commission (",h.commissionPercent,"%)"]}),e.jsxs("span",{className:"font-medium",children:["-",N(h.commissionTotal)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[e.jsx("span",{children:"Cleaning Fees"}),e.jsxs("span",{className:"font-medium",children:["-",N(h.cleaningFees)]})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between items-center font-bold text-lg",children:[e.jsx("span",{children:"Net Payout"}),e.jsx("span",{className:"text-green-600",children:N(h.netPayout)})]})]})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg border p-6 text-center text-gray-500",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No performance data available for the selected month"})]})]}):e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"No performance data available"}),e.jsx("p",{className:"text-sm",children:"Select a property and month to view performance metrics"})]})})})},Z8=()=>{const{propertyId:t}=A0(),[r]=qu(),[s,a]=R.useState({propertyId:t?parseInt(t):void 0,month:void 0}),[o,l]=R.useState(null);return R.useEffect(()=>{const d=r.get("startDate");r.get("endDate");const u=r.get("period");if(d){const m=new Date(d).toISOString().slice(0,7);a({propertyId:t?parseInt(t):void 0,month:m})}if(u){const h=u==="thisMonth"?"this month":u==="lastMonth"?"last month":u;console.log(`Applied ${h} performance filters for property ${t}`),l({propertyId:t?parseInt(t):void 0,period:h,month:d?new Date(d).toISOString().slice(0,7):void 0})}},[r,t]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Property Performance"}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["Track your monthly performance metrics and revenue breakdown",t&&` for Property ${t}`]}),o&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Showing ",o.period," data",o.propertyId&&` for Property ${o.propertyId}`,o.month&&` (${o.month})`]})]})})]}),e.jsx("div",{children:e.jsx(X8,{propertyId:s.propertyId,month:s.month})})]})},eA=()=>{As();const[t,r]=R.useState([]),[s,a]=R.useState("2025-01"),[o,l]=R.useState(null),[d,u]=R.useState(null),[h,m]=R.useState(!0),[p,v]=R.useState("overview"),{properties:N,isLoading:y}=Ft(P=>P.propertyManagement),{token:k}=Ft(P=>P.auth);R.useEffect(()=>{C()},[t,s]);const C=async()=>{if(k){m(!0);try{const P=await fetch(`/api/portfolio/overview?propertyIds=${t.join(",")}&month=${s}`,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(P.ok){const M=await P.json();l(M)}const E=await fetch(`/api/portfolio/trends?propertyIds=${t.join(",")}&months=2024-12,2025-01,2025-02`,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(E.ok){const M=await E.json();u(M)}}catch(P){console.error("Error fetching portfolio data:",P)}finally{m(!1)}}},S=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(P),L=P=>P==null?"0.0%":`${P>=0?"+":""}${P.toFixed(1)}%`;return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading portfolio data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Portfolio Management"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Multi-property performance overview and analytics"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsxs("button",{onClick:C,className:"btn-primary btn-sm",disabled:h,children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Properties"}),e.jsx(Ba,{properties:N,selectedId:t[0],onChange:P=>r(P?[P]:[]),placeholder:"Select Properties"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("input",{type:"month",value:s,onChange:P=>a(P.target.value),className:"input"})]})]})})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:Tu},{id:"trends",name:"Trends",icon:fi},{id:"comparison",name:"Comparison",icon:y3}].map(P=>{const E=P.icon;return e.jsxs("button",{onClick:()=>v(P.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${p===P.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),P.name]},P.id)})})}),p==="overview"&&e.jsx("div",{className:"space-y-6",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Gi,{className:"h-4 w-4 text-primary-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(o.totalRevenue||0)}),e.jsxs("div",{className:"flex items-center mt-1",children:[(o.revenueGrowth||0)>=0?e.jsx(fi,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(wu,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${(o.revenueGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:L(o.revenueGrowth)})]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-success-100 rounded-full flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-success-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalBookings||0}),e.jsxs("p",{className:"text-sm text-gray-500",children:[o.totalNights||0," nights"]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-warning-100 rounded-full flex items-center justify-center",children:e.jsx(en,{className:"h-4 w-4 text-warning-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(o.averageOccupancy||0).toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[(o.occupancyGrowth||0)>=0?e.jsx(fi,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(wu,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${(o.occupancyGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:L(o.occupancyGrowth)})]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Gi,{className:"h-4 w-4 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Daily Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(o.averageDailyRate||0)})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Performance"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Property"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:(o.properties||[]).map(P=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.name})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:S(P.revenue||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:P.bookings||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-900",children:[(P.occupancy||0).toFixed(1),"%"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:S(P.adr||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsx("button",{className:"p-1 text-blue-400 hover:text-blue-600",title:"View Details",children:e.jsx(ks,{className:"h-4 w-4"})})})})]},P.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(en,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Portfolio Data"}),e.jsx("p",{className:"text-gray-500",children:"Select a property and month to view portfolio metrics."})]})}),p==="trends"&&d&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Trends"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"})]})}),e.jsx("tbody",{children:(d.monthlyData||[]).map((P,E)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:P.month})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:S(P.revenue||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:P.bookings||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-900",children:[(P.occupancy||0).toFixed(1),"%"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:S(P.adr||0)})})]},P.month))})]})})})]})}),p==="comparison"&&d&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Comparison"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(d.propertyComparison||[]).map(P=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:P.propertyName}),e.jsxs("div",{className:"flex items-center",children:[P.trend==="up"&&e.jsx(fi,{className:"h-4 w-4 text-green-500"}),P.trend==="down"&&e.jsx(wu,{className:"h-4 w-4 text-red-500"}),P.trend==="stable"&&e.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Performance Score"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(P.performance||0).toFixed(1),"/10"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${(P.performance||0)/10*100}%`}})})]})]},P.propertyId))})})]})})]})},tA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(null),[o,l]=R.useState(!0),[d,u]=R.useState(392776),[h,m]=R.useState(""),[p,v]=R.useState(""),[N,y]=R.useState(""),[k,C]=R.useState(""),[S,L]=R.useState(!1),[P,E]=R.useState(null),[M,z]=R.useState("all"),{properties:he}=Ft(F=>F.properties),{token:X,user:J}=Ft(F=>F.auth);R.useEffect(()=>{G()},[d,h,N,k]);const G=async()=>{if(!(!X||!d)){l(!0);try{const F=new URLSearchParams;F.append("propertyId",d.toString()),h&&F.append("status",h),N&&F.append("startDate",N),k&&F.append("endDate",k);const Z=await fetch(`/api/credit-notes?${F.toString()}`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(Z.ok){const be=await Z.json();r(be.creditNotes||[]);const Ae=be.creditNotes?.filter(fe=>fe.status==="pending").length||0,ee=be.creditNotes?.filter(fe=>fe.status==="approved").length||0,D=be.creditNotes?.filter(fe=>fe.status==="rejected").length||0,te=be.creditNotes?.reduce((fe,V)=>fe+V.amount,0)||0,se=be.creditNotes?.filter(fe=>fe.status==="pending").reduce((fe,V)=>fe+V.amount,0)||0;a({totalPending:Ae,totalApproved:ee,totalRejected:D,totalAmount:te,pendingAmount:se})}}catch(F){console.error("Error fetching credit notes:",F)}finally{l(!1)}}},pe=async F=>{if(X)try{(await fetch(`/api/credit-notes/${F}/approve`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}})).ok&&(G(),L(!1))}catch(Z){console.error("Error approving credit note:",Z)}},I=async(F,Z)=>{if(X)try{(await fetch(`/api/credit-notes/${F}/reject`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify({reason:Z})})).ok&&(G(),L(!1))}catch(be){console.error("Error rejecting credit note:",be)}},U=F=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(F),B=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),W=F=>{const Z=new Date;switch(F){case"7d":return new Date(Z.getTime()-10080*60*1e3).toISOString().split("T")[0];case"30d":return new Date(Z.getTime()-720*60*60*1e3).toISOString().split("T")[0];case"90d":return new Date(Z.getTime()-2160*60*60*1e3).toISOString().split("T")[0];case"1y":return new Date(Z.getFullYear()-1,Z.getMonth(),Z.getDate()).toISOString().split("T")[0];default:return new Date(Z.getTime()-720*60*60*1e3).toISOString().split("T")[0]}},Y=F=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",processed:"bg-blue-100 text-blue-800"})[F]||"bg-gray-100 text-gray-800",le=t.filter(F=>{const Z=p===""||F.guestName.toLowerCase().includes(p.toLowerCase())||F.bookingId.toLowerCase().includes(p.toLowerCase()),be=M==="all"||F.status===M;return Z&&be});return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading credit notes..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Credit Notes"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage credit note requests and approvals"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0"})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{properties:he,selectedId:d,onChange:u,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:h,onChange:F=>m(F.target.value),className:"input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processed",children:"Processed"})]})]}),e.jsxs("div",{className:"w-full lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:N,onChange:F=>y(F.target.value),className:"input"})]}),e.jsxs("div",{className:"w-full lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:k,onChange:F=>C(F.target.value),className:"input"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(O0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:F=>v(F.target.value),placeholder:"Search by guest name or booking ID...",className:"input pl-10"})]})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{y(W("7d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"7D"}),e.jsx("button",{onClick:()=>{y(W("30d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"30D"}),e.jsx("button",{onClick:()=>{y(W("90d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"90D"}),e.jsx("button",{onClick:()=>{y(W("1y")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"1Y"})]}),e.jsxs("button",{onClick:()=>{y(""),C(""),m(""),v("")},className:"btn-outline btn-sm",children:[e.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(kl,{className:"h-4 w-4 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalPending}),e.jsx("p",{className:"text-sm text-gray-500",children:U(s.pendingAmount)})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Eo,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalApproved})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Kr,{className:"h-4 w-4 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalRejected})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Gi,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U(s.totalAmount)})]})]})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Credit Notes",count:t.length},{id:"pending",name:"Pending",count:s?.totalPending||0},{id:"approved",name:"Approved",count:s?.totalApproved||0},{id:"rejected",name:"Rejected",count:s?.totalRejected||0}].map(F=>e.jsxs("button",{onClick:()=>z(F.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${M===F.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[F.name,F.count>0&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full",children:F.count})]},F.id))})}),e.jsx("div",{className:"space-y-4",children:le.map(F=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(F.status)}`,children:F.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",F.bookingId]}),e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:B(F.requestedDate)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:F.guestName}),e.jsx("p",{className:"text-gray-700 mb-2",children:F.reason}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gi,{className:"h-4 w-4 mr-1"}),U(F.amount)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oo,{className:"h-4 w-4 mr-1"}),F.requestedBy]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1"}),F.propertyName]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>{E(F),L(!0)},className:"btn-outline btn-sm",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"View Details"]}),F.status==="pending"&&J?.role&&(Gx(J.role)||Kx(J.role))&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>pe(F.id),className:"btn-success btn-sm",children:[e.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs("button",{onClick:()=>I(F.id,"Rejected by manager"),className:"btn-danger btn-sm",children:[e.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})})},F.id))}),le.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($2,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No credit notes found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No credit notes are currently available for this property."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Credit notes are fetched from the Hostkit API. If you need to create credit notes, please use the Hostkit system directly."]})})]}),S&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Credit Note Details"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Y(P.status)}`,children:P.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",P.bookingId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U(P.amount)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"})]})]}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:P.guestName}),e.jsx("p",{className:"text-gray-700",children:P.reason})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Note ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.bookingId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.propertyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:U(P.amount)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(P.status)}`,children:P.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested By"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.requestedBy})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:B(P.requestedDate)})]}),P.approvedBy&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.approvedBy})]}),P.approvedDate&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:B(P.approvedDate)})]})]})]}),P.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900",children:P.notes})})]}),P.invoiceId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Invoice ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:P.invoiceId})]}),P.creditNoteUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credit Note URL"}),e.jsxs("a",{href:P.creditNoteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"View Credit Note"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),P.status==="pending"&&J?.role&&(Gx(J.role)||Kx(J.role))&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>pe(P.id),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors",children:[e.jsx(Eo,{className:"h-4 w-4 mr-2 inline"}),"Approve"]}),e.jsxs("button",{onClick:()=>I(P.id,"Rejected by manager"),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:[e.jsx(Kr,{className:"h-4 w-4 mr-2 inline"}),"Reject"]})]})]})]})})})]})},rA=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Expenses"}),e.jsx("p",{className:"text-gray-600",children:"Expenses management coming soon..."})]})})}),sA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(null),[o,l]=R.useState(!1),[d,u]=R.useState(392776),[h,m]=R.useState(""),[p,v]=R.useState("all"),[N,y]=R.useState(!1),[k,C]=R.useState(null),[S,L]=R.useState(""),[P,E]=R.useState(!1),[M,z]=R.useState([]),{properties:he}=Ft(F=>F.properties),{token:X,user:J}=Ft(F=>F.auth);R.useEffect(()=>{G(),pe()},[d,h]);const G=async()=>{if(!(!X||!d)){l(!0);try{const F=await fetch(`/api/reviews/${d}`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}}),Z=await fetch(`/api/reviews/${d}/stats`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(F.ok&&Z.ok){const be=await F.json(),Ae=await Z.json();console.log("Reviews API Response:",be),console.log("Stats API Response:",Ae);let ee=be||[];if(h){const ie=new Date;let ge;switch(h){case"last7":ge=new Date(ie.getTime()-10080*60*1e3);break;case"last30":ge=new Date(ie.getTime()-720*60*60*1e3);break;case"last60":ge=new Date(ie.getTime()-1440*60*60*1e3);break;default:ge=new Date(0)}const de=ee.length;ee=ee.filter(ue=>new Date(ue.reviewDate)>=ge),console.log(`Date filter "${h}": ${de} -> ${ee.length} reviews`)}r(ee);const D=ee.length,te=D>0?ee.reduce((ie,ge)=>ie+ge.rating,0)/D:Ae.averageRating||0,se=[5,4,3,2,1].map(ie=>{const ge=ee.filter(de=>de.rating===ie).length;return{rating:ie,count:ge,percentage:D>0?ge/D*100:0}}),fe=["Airbnb","Booking.com","VRBO"].map(ie=>{const ge=ee.filter(Pe=>Pe.platform===ie),de=ge.length,ue=de>0?ge.reduce((Pe,Xe)=>Pe+Xe.rating,0)/de:0;return{platform:ie,count:de,averageRating:ue}}).filter(ie=>ie.count>0),V=ee.filter(ie=>ie.responseText).length,ye=D>0?V/D*100:0;a({averageRating:te,totalReviews:D,ratingDistribution:se,platformBreakdown:fe,recentTrend:"up",responseRate:ye})}else console.error("Failed to fetch reviews or stats"),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}catch(F){console.error("Error fetching reviews:",F),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}finally{l(!1)}}},pe=async()=>{if(X)try{const F=await fetch("/api/property-mappings",{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(F.ok){const Z=await F.json();z(Z.mappings||[])}}catch(F){console.error("Error fetching property mappings:",F)}},I=async()=>{if(!(!X||!d)){l(!0);try{const F=await fetch(`/api/reviews/${d}/sync`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(F.ok){const Z=await F.json();alert(`Successfully synced ${Z.syncedCount} reviews!`),G()}else{const Z=await F.json();alert(`Failed to sync reviews: ${Z.message||"Unknown error"}`)}}catch(F){console.error("Error syncing reviews:",F),alert("Error syncing reviews. Please try again.")}finally{l(!1)}}},U=async()=>{if(!(!k||!S.trim()||!X))try{const F=await fetch(`/api/reviews/${k.reviewId}/response`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify({responseText:S})});if(F.ok)y(!1),L(""),C(null),G(),alert("Response submitted successfully!");else{const Z=await F.json();alert(`Failed to submit response: ${Z.message||"Unknown error"}`)}}catch(F){console.error("Error submitting response:",F),alert("Error submitting response. Please try again.")}},B=F=>Array.from({length:5},(Z,be)=>e.jsx(rf,{className:`h-4 w-4 ${be<F?"text-yellow-400 fill-current":"text-gray-300"}`},be)),W=F=>F>=4.5?"text-green-600":F>=3.5?"text-yellow-600":F>=2.5?"text-orange-600":"text-red-600",Y=F=>({airbnb:"bg-pink-100 text-pink-800","booking.com":"bg-blue-100 text-blue-800",vrbo:"bg-purple-100 text-purple-800"})[F]||"bg-gray-100 text-gray-800",le=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reviews & Ratings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage guest reviews and maintain your reputation"})]})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{properties:he,selectedId:d,onChange:u,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter"}),e.jsxs("select",{value:h,onChange:F=>m(F.target.value),className:"input text-sm",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"last7",children:"Last 7 Days"}),e.jsx("option",{value:"last30",children:"Last 30 Days"}),e.jsx("option",{value:"last60",children:"Last 60 Days"})]})]})]})})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(rf,{className:"h-4 w-4 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),e.jsx("p",{className:`text-2xl font-bold ${W(s.averageRating)}`,children:(s.averageRating||0).toFixed(1)}),e.jsx("div",{className:"flex items-center mt-1",children:B(Math.round(s.averageRating))})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(op,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalReviews})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(lp,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Response Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(s.responseRate||0).toFixed(0),"%"]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.recentTrend==="up"?e.jsx(fi,{className:"h-4 w-4 text-green-600"}):s.recentTrend==="down"?e.jsx(wu,{className:"h-4 w-4 text-red-600"}):e.jsx(Tu,{className:"h-4 w-4 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trend"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 capitalize",children:s.recentTrend})]})]})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Reviews",icon:op},{id:"unresponded",name:"Unresponded",icon:lp},{id:"analytics",name:"Analytics",icon:Tu}].map(F=>{const Z=F.icon;return e.jsxs("button",{onClick:()=>v(F.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${p===F.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),F.name,F.id==="unresponded"&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full",children:t.filter(be=>!be.responseText).length})]},F.id)})})}),(p==="all"||p==="unresponded")&&e.jsx("div",{className:"space-y-4",children:t.filter(F=>p==="all"||!F.responseText).length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(op,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:h?`No reviews found for the selected time period (${h==="last7"?"Last 7 days":h==="last30"?"Last 30 days":"Last 60 days"}). Try selecting "All Time" to see all reviews.`:d?"This property has no reviews yet.":"No reviews match your current filters."}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:()=>m(""),className:"btn-secondary",children:"Show All Time"}),e.jsx("button",{onClick:I,className:"btn-primary",children:"Sync Reviews"})]})]}):t.filter(F=>p==="all"||!F.responseText).map(F=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"flex items-center",children:B(F.rating)}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(F.platform)}`,children:F.platform}),F.isVerified&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:F.reviewText}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oo,{className:"h-4 w-4 mr-1"}),F.guestName]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),le(F.reviewDate)]})]}),F.responseText&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Your Response"}),e.jsx("span",{className:"text-xs text-gray-500",children:le(F.responseDate)})]}),e.jsx("p",{className:"text-gray-700",children:F.responseText})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!F.responseText&&e.jsxs("button",{onClick:()=>{C(F),y(!0)},className:"btn-primary btn-sm",children:[e.jsx(lp,{className:"h-4 w-4 mr-2"}),"Respond"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"View Details",children:e.jsx(ks,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"Flag Review",children:e.jsx(j3,{className:"h-4 w-4"})})]})]})})},F._id))}),p==="analytics"&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rating Distribution"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"space-y-3",children:s.ratingDistribution.map(({rating:F,count:Z,percentage:be})=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center w-16",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:F}),e.jsx(rf,{className:"h-4 w-4 text-yellow-400 fill-current ml-1"})]}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${be}%`}})})}),e.jsxs("div",{className:"flex items-center space-x-2 w-20",children:[e.jsx("span",{className:"text-sm text-gray-600",children:Z}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",(be||0).toFixed(0),"%)"]})]})]},F))})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Performance"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.platformBreakdown.map(({platform:F,count:Z,averageRating:be})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(F)}`,children:F}),e.jsx("div",{className:"flex items-center",children:B(Math.round(be))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reviews"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average"}),e.jsx("span",{className:`text-sm font-medium ${W(be)}`,children:(be||0).toFixed(1)})]})]})]},F))})})]})]}),N&&k&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Respond to Review"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[B(k.rating),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["by ",k.guestName]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:k.reviewText})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),e.jsx("textarea",{value:S,onChange:F=>L(F.target.value),className:"input",rows:4,placeholder:"Write a professional response to this review...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{onClick:U,className:"btn-primary btn-sm",disabled:!S.trim(),children:"Submit Response"})]})]})]})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Integration Settings"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Environment Variables Required"}),e.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_TOKEN"})," - Your Hostaway API token (already configured)"]}),e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_ACCOUNT_ID"})," - Your Hostaway account ID (already configured)"]}),e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_API_BASE"})," - Hostaway API base URL (already configured)"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Property Mappings"}),e.jsx("div",{className:"space-y-3",children:M.map(F=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:F.propertyName}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",F.internalId]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hostaway Property ID"}),e.jsx("input",{type:"text",value:F.platformMappings.hostaway||"",className:"w-full text-xs border border-gray-300 rounded px-2 py-1",placeholder:"Hostaway property ID (e.g., 392776)"})]})})]},F.internalId))})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"API Status"}),e.jsxs("div",{className:"space-y-2 text-xs text-green-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Hostaway:"})," ✅ Already configured and ready to use"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Reviews API:"})," ✅ Connected to Hostaway Reviews endpoints"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Response API:"})," ✅ Can post responses to reviews"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>E(!1),className:"btn-outline btn-sm",children:"Close"}),e.jsx("button",{onClick:()=>{alert("Property mappings updated! (This would save to database in production)"),E(!1)},className:"btn-primary btn-sm",children:"Save Changes"})]})]})})})]})},nA=()=>{const{user:t}=Ft(z=>z.auth),[r,s]=R.useState([]),[a,o]=R.useState(""),[l,d]=R.useState(""),[u,h]=R.useState(""),[m,p]=R.useState(25),[v,N]=R.useState(!1),[y,k]=R.useState(""),[C,S]=R.useState(null);R.useEffect(()=>{const z=new Date,he=z.getFullYear();let J=z.getMonth()-1,G=he;J<0&&(J=11,G=he-1);const pe=new Date(G,J,1),I=new Date(G,J+1,0),U=B=>{const W=B.getFullYear(),Y=String(B.getMonth()+1).padStart(2,"0"),le=String(B.getDate()).padStart(2,"0");return`${W}-${Y}-${le}`};d(U(pe)),h(U(I))},[]),R.useEffect(()=>{(async()=>{try{const he=await z0();s(he.properties||[])}catch(he){console.error("Error fetching properties:",he),k("Failed to fetch properties")}})()},[]);const L=async()=>{if(!a||!l||!u){k("Please select property and date range");return}N(!0),k("");try{const z={startDate:l,endDate:u,year:new Date(l).getFullYear().toString(),month:(new Date(l).getMonth()+1).toString(),commissionPercentage:m.toString()},he=await Ct.get(`/owner-statements/property/${a}`,{params:z});console.log("API Response:",he),S(he)}catch(z){console.error("Error generating statements:",z),k(z instanceof Error?z.message:"Failed to generate statements")}finally{N(!1)}},P=z=>new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(z),E=z=>new Date(z).toLocaleDateString("en-EU"),M=()=>{if(!C||C.length===0)return;const z=C[0],he=z.revenue.total,X=he*.15,J=z.expenses.fees,G=z.expenses.commission,pe=he-X-J-G,U=[["OWNER STATEMENT DETAILED BREAKDOWN"],["Property ID","Property Name","Period","Generated At"],[z.propertyId.toString(),z.propertyName,`${z.period.startDate} to ${z.period.endDate}`,new Date(z.createdAt).toLocaleString()],[],["CALCULATION SUMMARY"],["Gross Amount (sum of all invoices)",P(he)],["Portal Commission (15% of gross)",P(X)],["Cleaning Fee (from reservation API)",P(J)],["Management Commission (25% of gross-cleaning)",P(G)],["Final Amount to Owner",P(pe)],[],["RESERVATION BREAKDOWN"],["Reservation Code","Guest Name","Check-in","Check-out","Received Amount","Host Commission","Cleaning Fee","Invoiced Value","Provider"],...z.reservations.map(le=>[le.rcode,`${le.firstname} ${le.lastname}`,E(new Date(parseInt(le.arrival)*1e3).toISOString()),E(new Date(parseInt(le.departure)*1e3).toISOString()),P(le.received_amount),P(le.host_commission),P(le.cleaning_fee),P(le.invoiced_value),le.provider]),[],["INVOICE BREAKDOWN"],["Invoice ID","Invoice Date","Invoice Value","Status","Type"],...z.invoices&&z.invoices.length>0?z.invoices.map(le=>[le.id||le.refid||"N/A",le.date?E(le.date):"N/A",P(le.value||le.amount||0),le.status||"N/A",le.type||"N/A"]):[["No invoices available for this period"]],[],["COMMISSION BREAKDOWN"],["Commission Type","Percentage","Formula","Amount"],["Portal Commission","15%","15% of Gross",P(X)],["Management Commission",`${m}%`,`${m}% of (Gross - Cleaning Fee)`,P(G)],["Total Commission",`${15+m}%`,"Portal + Management",P(X+G)],[],["FINAL SUMMARY"],["Total Reservations",z.reservations.length],["Total Revenue (sum of all invoices)",P(he)],["Total Deductions",P(X+J+G)],["Final Amount to Owner",P(pe)]].map(le=>le.join(",")).join(`
`),B=new Blob([U],{type:"text/csv"}),W=window.URL.createObjectURL(B),Y=document.createElement("a");Y.href=W,Y.download=`owner-statement-detailed-${z.propertyId}-${z.period.startDate}-${z.period.endDate}.csv`,Y.click(),window.URL.revokeObjectURL(W)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Jx,{className:"w-6 h-6 mr-2"}),"Owner Statements"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate financial statements for property owners"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsxs("select",{value:a,onChange:z=>o(z.target.value?parseInt(z.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Property"}),r.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l,onChange:z=>d(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:u,onChange:z=>h(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t?.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Management Commission Rate (Ignored for admin properties)"}),e.jsxs("select",{value:m,onChange:z=>p(parseInt(z.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10%"}),e.jsx("option",{value:25,children:"25%"}),e.jsx("option",{value:30,children:"30%"})]})]})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx("button",{onClick:L,disabled:v||!a||!l||!u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jx,{className:"w-4 h-4 mr-2"}),"Generate Statements"]})})}),y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600",children:y})}),C&&C.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Owner Statement Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Calculation Base:"}),e.jsx("span",{className:"font-semibold",children:"Invoices"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Gross Amount (sum of all invoices):"}),e.jsx("span",{className:"font-semibold",children:P(C[0].revenue.total)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Portal Commission (15% of gross):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",P(C[0].revenue.total*.15)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Cleaning Fee (from reservation API):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",P(C[0].expenses.fees)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Management Commission (25% of gross-cleaning):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",P(C[0].expenses.commission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Additional Fees:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",P(C[0].expenses.other)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Expenses:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",P(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-green-50 rounded-lg px-4",children:[e.jsx("span",{className:"text-green-600 font-bold text-lg",children:"Final Amount to Owner:"}),e.jsx("span",{className:"text-green-600 font-bold text-lg",children:P(C[0].revenue.total-C[0].revenue.total*.15-C[0].expenses.fees-C[0].expenses.commission-C[0].expenses.other)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Name:"}),e.jsx("span",{className:"font-semibold",children:C[0].propertyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property ID:"}),e.jsx("span",{className:"font-semibold",children:C[0].propertyId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-semibold",children:C[0].status})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Period:"}),e.jsxs("span",{className:"font-semibold",children:[E(C[0].period.startDate)," - ",E(C[0].period.endDate)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-semibold",children:E(C[0].createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Commission Rate:"}),e.jsxs("span",{className:"font-semibold",children:[m,"%"]})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})]})]})})})},pd={async getUserProfile(){return Ct.get("/settings/profile")},async updateUserProfile(t){return Ct.put("/settings/profile",t)},async getNotificationSettings(){return Ct.get("/settings/notifications")},async updateNotificationSettings(t){return Ct.put("/settings/notifications",t)},async getSecuritySettings(){return Ct.get("/settings/security")},async updateSecuritySettings(t){return Ct.put("/settings/security",t)}},aA=()=>{const[t,r]=R.useState("profile"),[s,a]=R.useState(!1),[o,l]=R.useState(!1),[d,u]=R.useState(!1),[h,m]=R.useState(null),[p,v]=R.useState({firstName:"",lastName:"",email:"",phone:"",role:""}),[N,y]=R.useState({emailNotifications:!0,bookingAlerts:!0,paymentAlerts:!0,maintenanceAlerts:!1,weeklyReports:!0,monthlyReports:!0}),[k,C]=R.useState({twoFactorEnabled:!1,sessionTimeout:30,loginAlerts:!0}),[S,L]=R.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[P,E]=R.useState([]),{user:M,token:z}=Ft(Y=>Y.auth),he=As();R.useEffect(()=>{M&&v({firstName:M.firstName||"",lastName:M.lastName||"",email:M.email||"",phone:"",role:M.role||""})},[M]),R.useEffect(()=>{X()},[]);const X=async()=>{if(z){a(!0);try{const Y=await pd.getNotificationSettings();y(Y);const le=await pd.getSecuritySettings();C(le),E([{id:"1",name:"Hostaway API",key:"ha_***",lastUsed:"2024-01-15",createdAt:"2024-01-15"},{id:"2",name:"Hostkit API",key:"hk_***",lastUsed:"2024-01-14",createdAt:"2024-01-14"}])}catch(Y){console.error("Error fetching settings:",Y),m({type:"error",text:"Failed to load settings"})}finally{a(!1)}}},J=async()=>{if(z){l(!0);try{const Y=await pd.updateUserProfile({name:`${p.firstName} ${p.lastName}`.trim(),phone:p.phone});m({type:"success",text:Y.message}),he(xd())}catch(Y){m({type:"error",text:Y.response?.data?.message||"Error updating profile"})}finally{l(!1)}}},G=async()=>{if(z){l(!0);try{const Y=await pd.updateNotificationSettings(N);m({type:"success",text:Y.message})}catch(Y){m({type:"error",text:Y.response?.data?.message||"Error updating notification settings"})}finally{l(!1)}}},pe=async()=>{if(z){l(!0);try{const Y=await pd.updateSecuritySettings(k);m({type:"success",text:Y.message})}catch(Y){m({type:"error",text:Y.response?.data?.message||"Error updating security settings"})}finally{l(!1)}}},I=async()=>{if(z){if(S.newPassword!==S.confirmPassword){m({type:"error",text:"New passwords do not match"});return}l(!0);try{await new Promise(Y=>setTimeout(Y,1e3)),m({type:"success",text:"Password changed successfully"}),L({currentPassword:"",newPassword:"",confirmPassword:""})}catch{m({type:"error",text:"Error changing password"})}finally{l(!1)}}},U=async()=>{if(!z)return;const Y=prompt("Enter a name for the API key:");if(Y){l(!0);try{await new Promise(F=>setTimeout(F,1e3));const le={id:Date.now().toString(),name:Y,key:"new_key_***",lastUsed:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString().split("T")[0]};E([...P,le]),m({type:"success",text:"API key created successfully"})}catch{m({type:"error",text:"Error creating API key"})}finally{l(!1)}}},B=async Y=>{if(z&&confirm("Are you sure you want to delete this API key?")){l(!0);try{await new Promise(le=>setTimeout(le,1e3)),E(P.filter(le=>le.id!==Y)),m({type:"success",text:"API key deleted successfully"})}catch{m({type:"error",text:"Error deleting API key"})}finally{l(!1)}}},W=Y=>new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ru,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage your account settings and preferences"})]}),h&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center ${h.type==="success"?"bg-green-50 text-green-800":h.type==="error"?"bg-red-50 text-red-800":"bg-blue-50 text-blue-800"}`,children:[h.type==="success"?e.jsx(Eo,{className:"h-5 w-5 mr-2"}):h.type==="error"?e.jsx(Kr,{className:"h-5 w-5 mr-2"}):e.jsx(n0,{className:"h-5 w-5 mr-2"}),h.text,e.jsx("button",{onClick:()=>m(null),className:"ml-auto text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"profile",name:"Profile",icon:Oo},{id:"notifications",name:"Notifications",icon:q2},{id:"security",name:"Security",icon:js},{id:"api",name:"API Keys",icon:tf}].map(Y=>{const le=Y.icon;return e.jsxs("button",{onClick:()=>r(Y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${t===Y.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),Y.name]},Y.id)})})}),t==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:p.firstName,onChange:Y=>v({...p,firstName:Y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:p.lastName,onChange:Y=>v({...p,lastName:Y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:p.email,onChange:Y=>v({...p,email:Y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:p.phone,onChange:Y=>v({...p,phone:Y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:p.role,disabled:!0,className:"input bg-gray-50"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:J,disabled:o,className:"btn-primary",children:[e.jsx(cc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",value:S.currentPassword,onChange:Y=>L({...S,currentPassword:Y.target.value}),className:"input pr-10"}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?e.jsx(Ki,{className:"h-4 w-4"}):e.jsx(ks,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:S.newPassword,onChange:Y=>L({...S,newPassword:Y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:S.confirmPassword,onChange:Y=>L({...S,confirmPassword:Y.target.value}),className:"input"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:I,disabled:o,className:"btn-primary",children:[e.jsx(cc,{className:"h-4 w-4 mr-2"}),o?"Changing...":"Change Password"]})})]})]})]}),t==="notifications"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Notifications"})}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"space-y-4",children:[{key:"emailNotifications",label:"Email Notifications",description:"Receive email notifications"},{key:"bookingAlerts",label:"Booking Alerts",description:"Get notified about new bookings"},{key:"paymentAlerts",label:"Payment Alerts",description:"Get notified about payments"},{key:"maintenanceAlerts",label:"Maintenance Alerts",description:"Get notified about maintenance issues"},{key:"weeklyReports",label:"Weekly Reports",description:"Receive weekly performance reports"},{key:"monthlyReports",label:"Monthly Reports",description:"Receive monthly performance reports"}].map(Y=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:Y.label}),e.jsx("p",{className:"text-sm text-gray-500",children:Y.description})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N[Y.key],onChange:le=>y({...N,[Y.key]:le.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},Y.key))}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:G,disabled:o,className:"btn-primary",children:[e.jsx(cc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Settings"]})})]})]})}),t==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.twoFactorEnabled,onChange:Y=>C({...k,twoFactorEnabled:Y.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsxs("select",{value:k.sessionTimeout,onChange:Y=>C({...k,sessionTimeout:parseInt(Y.target.value)}),className:"input",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:480,children:"8 hours"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when someone logs into your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.loginAlerts,onChange:Y=>C({...k,loginAlerts:Y.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:pe,disabled:o,className:"btn-primary",children:[e.jsx(cc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Settings"]})})]})]})}),t==="api"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"API Keys"}),e.jsxs("button",{onClick:U,disabled:o,className:"btn-primary btn-sm",children:[e.jsx(tf,{className:"h-4 w-4 mr-2"}),"Create API Key"]})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[P.map(Y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:Y.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",Y.createdAt?W(Y.createdAt):"Unknown",Y.lastUsed&&` • Last used: ${W(Y.lastUsed)}`]}),e.jsxs("p",{className:"text-xs text-gray-400 font-mono mt-1",children:[Y.key.substring(0,8),"...",Y.key.substring(Y.key.length-8)]})]}),e.jsx("button",{onClick:()=>B(Y.id),className:"btn-danger btn-sm",children:"Delete"})]},Y.id)),P.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tf,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No API Keys"}),e.jsx("p",{className:"text-gray-500",children:"Create your first API key to get started."})]})]})})]})})]})},iA=()=>{const[t,r]=R.useState(!1),[s,a]=R.useState(!1),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState({firstName:"",lastName:"",email:"",phone:"",role:""}),{user:p,token:v}=Ft(S=>S.auth),N=As();R.useEffect(()=>{if(p){const S=(p.name||"").split(" ");m({firstName:S[0]||"",lastName:S.slice(1).join(" ")||"",email:p.email||"",phone:"",role:p.role||""})}},[p]);const y=async()=>{if(v){l(!0);try{const S=await pd.updateUserProfile({name:`${h.firstName} ${h.lastName}`.trim(),phone:h.phone});u({type:"success",text:S.message}),N(xd()),r(!1)}catch(S){u({type:"error",text:S.response?.data?.message||"Error updating profile"})}finally{l(!1)}}},k=()=>{if(p){const S=(p.name||"").split(" ");m({firstName:S[0]||"",lastName:S.slice(1).join(" ")||"",email:p.email||"",phone:"",role:p.role||""})}r(!1),u(null)},C=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"View and manage your profile information"})]}),d&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center ${d.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[d.type==="success"?e.jsx(cc,{className:"h-5 w-5 mr-2"}):e.jsx(Kr,{className:"h-5 w-5 mr-2"}),d.text,e.jsx("button",{onClick:()=>u(null),className:"ml-auto text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),t?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:k,className:"btn-secondary btn-sm",children:[e.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:y,disabled:o,className:"btn-primary btn-sm",children:[e.jsx(cc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]}):e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary btn-sm",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Oo,{className:"h-4 w-4 inline mr-2"}),"First Name"]}),e.jsx("input",{type:"text",value:h.firstName,onChange:S=>m({...h,firstName:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Oo,{className:"h-4 w-4 inline mr-2"}),"Last Name"]}),e.jsx("input",{type:"text",value:h.lastName,onChange:S=>m({...h,lastName:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Al,{className:"h-4 w-4 inline mr-2"}),"Email"]}),e.jsx("input",{type:"email",value:h.email,disabled:!0,className:"input bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(T0,{className:"h-4 w-4 inline mr-2"}),"Phone"]}),e.jsx("input",{type:"tel",value:h.phone,onChange:S=>m({...h,phone:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`,placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(js,{className:"h-4 w-4 inline mr-2"}),"Role"]}),e.jsx("input",{type:"text",value:h.role,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ns,{className:"h-4 w-4 inline mr-2"}),"Member Since"]}),e.jsx("input",{type:"text",value:p?.createdAt?C(p.createdAt):"N/A",disabled:!0,className:"input bg-gray-50"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Status"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${p?.isVerified?"bg-green-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p?.isVerified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(js,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:p?.role||"User"})]})]})})]})]})},oA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState([]),[o,l]=R.useState(!0),[d,u]=R.useState(0),[h,m]=R.useState({}),[p,v]=R.useState(392776),[N,y]=R.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}),[k,C]=R.useState(!1),[S,L]=R.useState(!1),[P,E]=R.useState(!1),[M,z]=R.useState(null),[he,X]=R.useState("all"),[J,G]=R.useState([]),[pe,I]=R.useState("single"),[U,B]=R.useState([p||392776]),[W,Y]=R.useState("events"),{properties:le}=Ft(ue=>ue.properties),{token:F,user:Z}=Ft(ue=>ue.auth);R.useEffect(()=>{F&&(be(),Ae())},[F,p,N]);const be=async()=>{if(!F||!p){console.log("No token or property selected for fetching events"),l(!1);return}l(!0);try{const ue=new URLSearchParams({propertyId:p.toString(),startDate:N.start,endDate:N.end});console.log("Fetching advanced calendar events from:",`/advanced-calendar/events?${ue}`),console.log("Using token:",F.substring(0,20)+"...");const Pe=await Ct.get(`/advanced-calendar/events?${ue}`);console.log("Advanced calendar events data received:",Pe),r(Pe.events||[]),u(Pe.total||0),m(Pe.sources||{})}catch(ue){console.error("Error fetching advanced calendar events:",ue),r([])}finally{l(!1)}},Ae=async()=>{if(!F){console.log("No token available for fetching bulk operations");return}try{console.log("Fetching bulk operations from:","/advanced-calendar/bulk-operations");const ue=await Ct.get("/advanced-calendar/bulk-operations");console.log("Bulk operations data received:",ue),a(ue.operations||[])}catch(ue){console.error("Error fetching bulk operations:",ue),a([])}},ee=async ue=>{if(!(!F||!p))try{await Ct.post("/advanced-calendar/events",{...ue,propertyId:p}),be(),C(!1)}catch(Pe){console.error("Error creating event:",Pe)}},D=async ue=>{if(!(!F||!ue.id))try{await Ct.put(`/advanced-calendar/events/${ue.id}`,ue),be(),L(!1),z(null)}catch(Pe){console.error("Error updating event:",Pe)}},te=async ue=>{if(F&&confirm("Are you sure you want to delete this event?"))try{await Ct.delete(`/advanced-calendar/events/${ue}`),be()}catch(Pe){console.error("Error deleting event:",Pe)}},se=async ue=>{if(F)try{await Ct.post("/advanced-calendar/bulk-operations",ue),Ae(),E(!1)}catch(Pe){console.error("Error creating bulk operation:",Pe)}},fe=ue=>new Date(ue).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),V=ue=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(ue),ye=ue=>({block:"bg-red-100 text-red-800",price_update:"bg-blue-100 text-blue-800",minimum_stay:"bg-yellow-100 text-yellow-800",maintenance:"bg-orange-100 text-orange-800",cleaning:"bg-green-100 text-green-800"})[ue]||"bg-gray-100 text-gray-800",ie=ue=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[ue]||"bg-gray-100 text-gray-800",ge=ue=>({hostaway:"bg-blue-100 text-blue-800",hostkit:"bg-purple-100 text-purple-800",manual:"bg-gray-100 text-gray-800"})[ue]||"bg-gray-100 text-gray-800",de=ue=>{switch(ue){case"hostaway":return e.jsx(en,{className:"h-3 w-3"});case"hostkit":return e.jsx(Ru,{className:"h-3 w-3"});case"manual":return e.jsx(Pl,{className:"h-3 w-3"});default:return e.jsx(n0,{className:"h-3 w-3"})}};return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading calendar events..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Advanced Calendar"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage calendar events, bulk operations, and pricing"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>E(!0),className:"btn-outline btn-sm",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Bulk Operations"]}),e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary btn-sm",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{properties:le,selectedId:p,onChange:v,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:N.start,onChange:ue=>y({...N,start:ue.target.value}),className:"input"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:N.end,onChange:ue=>y({...N,end:ue.target.value}),className:"input"})]})]})})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"events",name:"Calendar Events",icon:ns},{id:"bulk",name:"Bulk Operations",icon:Ou},{id:"templates",name:"Templates",icon:cc}].map(ue=>{const Pe=ue.icon;return e.jsxs("button",{onClick:()=>Y(ue.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${W===ue.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),ue.name]},ue.id)})})}),W==="events"&&e.jsx("div",{className:"space-y-4",children:t.map(ue=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ye(ue.type)}`,children:ue.type.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ie(ue.status)}`,children:ue.status}),ue.source&&e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ge(ue.source)}`,children:[de(ue.source),e.jsx("span",{className:"ml-1",children:ue.source})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[fe(ue.startDate)," - ",fe(ue.endDate)]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ue.title}),ue.description&&e.jsx("p",{className:"text-gray-700 mb-2",children:ue.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1"}),ue.propertyName]}),ue.price&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gi,{className:"h-4 w-4 mr-1"}),V(ue.price)]}),ue.minimumStay&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(kl,{className:"h-4 w-4 mr-1"}),ue.minimumStay," nights min"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"h-4 w-4 mr-1"}),ue.createdBy]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>{z(ue),L(!0)},className:"btn-outline btn-sm",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>te(ue.id),className:"btn-danger btn-sm",children:[e.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})},ue.id))}),W==="bulk"&&e.jsx("div",{className:"space-y-4",children:s.map(ue=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ye(ue.type)}`,children:ue.type.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ie(ue.status)}`,children:ue.status}),e.jsx("span",{className:"text-sm text-gray-500",children:fe(ue.createdAt)})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Bulk ",ue.type.replace("_"," ")," Operation"]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1"}),ue.properties.length," properties"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),ue.dates.length," dates"]}),ue.parameters.price&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gi,{className:"h-4 w-4 mr-1"}),V(ue.parameters.price)]})]}),ue.results&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[e.jsx(Fn,{className:"h-4 w-4 inline mr-1"}),ue.results.success," successful"]}),e.jsxs("span",{className:"text-red-600",children:[e.jsx(In,{className:"h-4 w-4 inline mr-1"}),ue.results.failed," failed"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:ue.status==="completed"&&e.jsxs("button",{className:"btn-outline btn-sm",children:[e.jsx(n0,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})})},ue.id))}),W==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Templates"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Maintenance Block",type:"block",description:"Block dates for maintenance work"},{name:"Cleaning Schedule",type:"cleaning",description:"Schedule cleaning between bookings"},{name:"Price Increase",type:"price_update",description:"Increase prices for peak season"},{name:"Minimum Stay Update",type:"minimum_stay",description:"Set minimum stay requirements"},{name:"Holiday Block",type:"block",description:"Block dates for personal use"},{name:"Seasonal Pricing",type:"price_update",description:"Apply seasonal pricing rules"}].map((ue,Pe)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:ue.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:ue.description}),e.jsx("button",{className:"btn-outline btn-sm w-full",children:"Use Template"})]},Pe))})})]})}),t.length===0&&W==="events"&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No events match your current filters."}),e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary btn-sm",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Create Your First Event"]})]}),s.length===0&&W==="bulk"&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ou,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bulk operations found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create bulk operations to manage multiple properties at once."}),e.jsxs("button",{onClick:()=>E(!0),className:"btn-primary btn-sm",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Create Bulk Operation"]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Event"}),e.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target);let Xe=[];pe==="single"?Xe=[p||392776]:Xe=U.length>0?U:[p||392776],Xe.forEach(Me=>{const me={propertyId:Me,type:Pe.get("type"),title:Pe.get("title"),description:Pe.get("description"),startDate:Pe.get("startDate"),endDate:Pe.get("endDate"),price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0};ee(me)})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"eventPropertySelection",value:"single",checked:pe==="single",onChange:ue=>I(ue.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Current Property"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"eventPropertySelection",value:"multiple",checked:pe==="multiple",onChange:ue=>I(ue.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),pe==="multiple"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>B(le.map(ue=>ue.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>B([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),e.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[U.length," selected"]})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:le.map(ue=>e.jsxs("label",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",checked:U.includes(ue.id),onChange:Pe=>{Pe.target.checked?B([...U,ue.id]):B(U.filter(Xe=>Xe!==ue.id))},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:ue.name})]},ue.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"block",children:"Block"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{name:"title",type:"text",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{name:"startDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{name:"endDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),e.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),I("single"),B([p||392776])},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Event"})]})]})]})}),S&&M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Event"}),e.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target),Xe={id:M.id,propertyId:M.propertyId,type:Pe.get("type"),title:Pe.get("title"),description:Pe.get("description"),startDate:Pe.get("startDate"),endDate:Pe.get("endDate"),price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0};D(Xe)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs("div",{className:"p-2 bg-gray-50 rounded-md text-sm text-gray-600",children:[M.propertyName," (ID: ",M.propertyId,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",defaultValue:M.type,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"block",children:"Block"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{name:"title",type:"text",defaultValue:M.title,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:M.description,className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{name:"startDate",type:"date",defaultValue:M.startDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{name:"endDate",type:"date",defaultValue:M.endDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),e.jsx("input",{name:"price",type:"number",step:"0.01",defaultValue:M.price,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",defaultValue:M.minimumStay,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),z(null)},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Update Event"})]})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Bulk Operation"}),e.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target);let Xe=[];he==="all"?Xe=le.map(me=>me.id):Xe=J.length>0?J:[p||392776];const Me={type:Pe.get("type"),properties:Xe,dates:[Pe.get("date")],parameters:{price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0,reason:Pe.get("reason"),maintenanceType:Pe.get("maintenanceType"),cleaningType:Pe.get("cleaningType"),checkInAvailable:Pe.get("checkInAvailable")==="true",checkOutAvailable:Pe.get("checkOutAvailable")==="true"}};se(Me)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",onChange:ue=>{document.getElementById("price-field")?.classList.add("hidden"),document.getElementById("minimum-stay-field")?.classList.add("hidden"),document.getElementById("maintenance-field")?.classList.add("hidden"),document.getElementById("cleaning-field")?.classList.add("hidden"),document.getElementById("coa-cod-field")?.classList.add("hidden");const Pe=ue.target.value;Pe==="price_update"?document.getElementById("price-field")?.classList.remove("hidden"):Pe==="minimum_stay_update"?document.getElementById("minimum-stay-field")?.classList.remove("hidden"):Pe==="maintenance"?document.getElementById("maintenance-field")?.classList.remove("hidden"):Pe==="cleaning"?document.getElementById("cleaning-field")?.classList.remove("hidden"):Pe==="coa_cod"&&document.getElementById("coa-cod-field")?.classList.remove("hidden")},children:[e.jsx("option",{value:"block_dates",children:"Block Dates"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay_update",children:"Minimum Stay Update"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"}),e.jsx("option",{value:"coa_cod",children:"Check-in/Check-out Control"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"propertySelection",value:"all",checked:he==="all",onChange:ue=>X(ue.target.value),className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:["All Properties (",le.length,")"]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"propertySelection",value:"selected",checked:he==="selected",onChange:ue=>X(ue.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),he==="selected"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>G(le.map(ue=>ue.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>G([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),e.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[J.length," selected"]})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:le.map(ue=>e.jsxs("label",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",checked:J.includes(ue.id),onChange:Pe=>{Pe.target.checked?G([...J,ue.id]):G(J.filter(Xe=>Xe!==ue.id))},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:ue.name})]},ue.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{name:"date",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"price-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),e.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"minimum-stay-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"maintenance-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maintenance Type"}),e.jsx("input",{name:"maintenanceType",type:"text",placeholder:"e.g., HVAC, Plumbing, Electrical",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"cleaning-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cleaning Type"}),e.jsx("input",{name:"cleaningType",type:"text",placeholder:"e.g., Deep Clean, Regular Clean, Post-Construction",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsx("div",{id:"coa-cod-field",className:"hidden",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Available"}),e.jsxs("select",{name:"checkInAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Available"}),e.jsxs("select",{name:"checkOutAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason/Description"}),e.jsx("input",{name:"reason",type:"text",placeholder:"Optional reason or description",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{E(!1),X("all"),G([])},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Bulk Operation"})]})]})]})})]})},lA=()=>{const t=As(),{properties:r}=Ft(V=>V.properties),[s,a]=R.useState("automations"),[o,l]=R.useState([]),[d,u]=R.useState([]),[h,m]=R.useState([]),[p,v]=R.useState(!0),[N,y]=R.useState({}),[k,C]=R.useState(null),[S,L]=R.useState(!1),[P,E]=R.useState(!1),[M,z]=R.useState(!1),[he,X]=R.useState(!1),[J,G]=R.useState(null),[pe,I]=R.useState(null),[U,B]=R.useState({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:null});R.useEffect(()=>{t(Wi())},[t]),R.useEffect(()=>{W()},[k]);const W=async()=>{v(!0);try{const ye={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},ie=k?`?propertyId=${k}`:"",[ge,de,ue]=await Promise.all([fetch(`/automations${ie}`,{headers:ye}),fetch("/automations/templates",{headers:ye}),fetch("/automations/activity?limit=50",{headers:ye})]);if(ge.ok){const Pe=await ge.json();console.log("Automations data received:",Pe),l(Pe.automations||[])}else console.error("Automations request failed:",ge.status);if(de.ok){const Pe=await de.json();console.log("Templates data received:",Pe),u(Pe.templates||[])}else console.error("Templates request failed:",de.status);if(ue.ok){const Pe=await ue.json();console.log("Activities data received:",Pe),m(Pe.activities||[])}else console.error("Activities request failed:",ue.status)}catch(V){console.error("Error fetching data:",V)}finally{v(!1)}},Y=async V=>{y(ye=>({...ye,[`run-${V}`]:!0}));try{const ye=localStorage.getItem("token");(await fetch(`/automations/${V}/run`,{method:"POST",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"}})).ok&&await W()}catch(ye){console.error("Error running automation:",ye)}finally{y(ye=>({...ye,[`run-${V}`]:!1}))}},le=V=>{const ye=o.find(ie=>ie.id===V);ye&&(G(ye),z(!0))},F=V=>{const ye=o.find(ie=>ie.id===V);ye&&(I(ye),X(!0))},Z=()=>{B({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:k}),L(!0)},be=async()=>{try{const V=localStorage.getItem("token");(await fetch("/automations",{method:"POST",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify(U)})).ok?(L(!1),await W()):console.error("Failed to create automation")}catch(V){console.error("Error creating automation:",V)}},Ae=async V=>{y(ye=>({...ye,[`template-${V}`]:!0}));try{const ye=localStorage.getItem("token");(await fetch(`/automations/templates/${V}/create`,{method:"POST",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"}})).ok&&(await W(),E(!1))}catch(ye){console.error("Error creating from template:",ye)}finally{y(ye=>({...ye,[`template-${V}`]:!1}))}},ee=V=>{switch(V){case"saft_generation":return Yi;case"siba_alerts":return bd;case"calendar_sync":return kl;default:return cp}},D=V=>{switch(V){case"saft_generation":return"bg-blue-100 text-blue-800";case"siba_alerts":return"bg-orange-100 text-orange-800";case"calendar_sync":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},te=V=>{switch(V){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"disabled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=V=>{switch(V){case"success":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},fe=V=>new Date(V).toLocaleDateString();return p?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 animate-spin text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading automations..."})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Automations"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automate your property management workflows"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(ap,{className:"h-4 w-4 mr-2"}),"Templates"]}),e.jsxs("button",{onClick:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Create Automation"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx(Ba,{properties:r,selectedId:k,onChange:C,placeholder:"All Properties"})]})})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"automations",name:"My Automations",icon:cp},{id:"templates",name:"Templates",icon:ap},{id:"activity",name:"Activity",icon:kl}].map(V=>{const ye=V.icon;return e.jsxs("button",{onClick:()=>a(V.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${s===V.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),V.name]},V.id)})})}),s==="automations"&&e.jsx("div",{className:"space-y-6",children:o&&o.length>0?o.map(V=>{const ye=ee(V.type);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ye,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(V.type)}`,children:V.type}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te(V.status)}`,children:V.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Schedule: ",V.schedule]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.name}),e.jsx("p",{className:"text-gray-700 mb-3",children:V.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Runs: ",V.runCount]}),V.lastRunAt&&e.jsxs("span",{children:["Last run: ",fe(V.lastRunAt)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>Y(V.id),disabled:N[`run-${V.id}`],className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[N[`run-${V.id}`]?e.jsx(Mr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(_3,{className:"h-4 w-4 mr-2"}),N[`run-${V.id}`]?"Running...":"Run"]}),e.jsxs("button",{onClick:()=>le(V.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>F(V.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},V.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No automations found"}),e.jsx("p",{className:"text-gray-500",children:"Create your first automation to get started."})]})}),s==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d&&d.length>0?d.map(V=>{const ye=ee(V.type);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(V.type)}`,children:V.type})]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Template"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.name}),e.jsx("p",{className:"text-gray-700 mb-4 flex-grow",children:V.description}),e.jsxs("button",{onClick:()=>Ae(V.id),disabled:N[`template-${V.id}`],className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[N[`template-${V.id}`]?e.jsx(Mr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx($i,{className:"h-4 w-4 mr-2"}),N[`template-${V.id}`]?"Creating...":"Use Template"]})]})},V.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(ap,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates available"}),e.jsx("p",{className:"text-gray-500",children:"Templates will appear here when available."})]})})}),s==="activity"&&e.jsx("div",{className:"space-y-6",children:h&&h.length>0?h.map(V=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${se(V.status)}`,children:V.status}),e.jsx("span",{className:"text-sm text-gray-500",children:fe(V.timestamp)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.automationName}),e.jsx("p",{className:"text-gray-700 mb-2",children:V.message}),V.details&&e.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-800",children:V.automationId==="saft_monthly"&&V.details.saftDownloadUrl?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SAFT-T File Generated"}),e.jsxs("p",{className:"text-gray-600",children:["Property ",V.details.propertyId," - ",V.details.year,"-",V.details.month?.toString().padStart(2,"0")]})]}),e.jsxs("button",{onClick:()=>{const ye=document.createElement("a");ye.href=V.details.saftDownloadUrl,ye.download=V.details.fileName,ye.click()},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Download SAFT-T"]})]}):e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(V.details,null,2)})})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},V.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity found"}),e.jsx("p",{className:"text-gray-500",children:"Activity logs will appear here when automations run."})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Automation"})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:U.name,onChange:V=>B({...U,name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Enter automation name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:U.description,onChange:V=>B({...U,description:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Describe what this automation does"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:U.type,onChange:V=>B({...U,type:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"saft_generation",children:"SAFT-T Generation"}),e.jsx("option",{value:"siba_alerts",children:"SIBA Alerts"}),e.jsx("option",{value:"calendar_sync",children:"Calendar Sync"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:U.schedule,onChange:V=>B({...U,schedule:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsxs("select",{value:U.propertyId||"",onChange:V=>B({...U,propertyId:V.target.value?Number(V.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Properties"}),r&&r.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),e.jsx("textarea",{value:JSON.stringify(U.config,null,2),onChange:V=>{try{const ye=JSON.parse(V.target.value);B({...U,config:ye})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{onClick:be,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Create Automation"})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automation Templates"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d&&d.length>0?d.map(V=>{const ye=ee(V.type);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ye,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(V.type)}`,children:V.type})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:V.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:V.description}),e.jsx("button",{onClick:()=>Ae(V.id),disabled:N[`template-${V.id}`],className:"w-full inline-flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:N[`template-${V.id}`]?"Creating...":"Use Template"})]},V.id)}):e.jsx("div",{className:"col-span-2 text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No templates available"})})})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:()=>E(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"})})]})}),M&&J&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const V=ee(J.type);return e.jsx(V,{className:"h-6 w-6 text-gray-400"})})(),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:J.name}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(J.type)}`,children:J.type}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te(J.status)}`,children:J.status})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:J.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Schedule"}),e.jsx("p",{className:"text-gray-600",children:J.schedule})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Run Count"}),e.jsx("p",{className:"text-gray-600",children:J.runCount})]})]}),J.lastRunAt&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Last Run"}),e.jsx("p",{className:"text-gray-600",children:fe(J.lastRunAt)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Configuration"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 overflow-x-auto",children:JSON.stringify(J.config,null,2)})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>z(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"}),e.jsx("button",{onClick:()=>F(J.id),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Automation"})]})]})}),he&&pe&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const V=ee(pe.type);return e.jsx(V,{className:"h-6 w-6 text-gray-400"})})(),e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Edit ",pe.name]})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:pe.name,onChange:V=>I({...pe,name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:pe.description,onChange:V=>I({...pe,description:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:pe.schedule,onChange:V=>I({...pe,schedule:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:pe.status,onChange:V=>I({...pe,status:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),e.jsx("textarea",{value:JSON.stringify(pe.config,null,2),onChange:V=>{try{const ye=JSON.parse(V.target.value);I({...pe,config:ye})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>X(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{const V=localStorage.getItem("token");(await fetch(`/automations/${pe.id}`,{method:"PUT",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify(pe)})).ok?(X(!1),await W()):console.error("Failed to update automation")}catch(V){console.error("Error updating automation:",V)}},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"})]})]})})]})})},cA=()=>{const{user:t}=Ft(L=>L.auth);pi();const[r,s]=R.useState(()=>{const L=new Date;return L.getMonth()===0?L.getFullYear()-1:L.getFullYear()}),[a,o]=R.useState(()=>{const L=new Date;return L.getMonth()===0?12:L.getMonth()}),[l,d]=R.useState(""),[u,h]=R.useState(!1),[m,p]=R.useState(null),[v,N]=R.useState(""),y=Array.from({length:5},(L,P)=>new Date().getFullYear()-2+P),k=[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}],C=async()=>{if(!l){N("Please enter invoicing VAT ID");return}h(!0),N(""),p(null);try{const L=new URLSearchParams({year:r.toString(),month:a.toString(),invoicing_nif:l}),P=await fetch(`/api/saft?${L}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(P.ok){const E=await P.json();p(E)}else{const E=await P.json();N(E.message||"Failed to retrieve SAFT-T")}}catch(L){N("Network error occurred"),console.error("SAFT retrieval error:",L)}finally{h(!1)}},S=()=>{if(m?.saft){const L=atob(m.saft),P=new Array(L.length);for(let X=0;X<L.length;X++)P[X]=L.charCodeAt(X);const E=new Uint8Array(P),M=new Blob([E],{type:"application/xml"}),z=window.URL.createObjectURL(M),he=document.createElement("a");he.href=z,he.download=`SAFT-T_${r}_${a}.xml`,document.body.appendChild(he),he.click(),document.body.removeChild(he),window.URL.revokeObjectURL(z)}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(a0,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SAFT-T Retrieval"})]}),e.jsx("p",{className:"text-gray-600",children:"Retrieve existing SAFT (Sistema de Apuramento de Faturas e Transações) files for Portuguese tax compliance."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoicing VAT ID (NIF)"}),e.jsx("input",{type:"text",value:l,onChange:L=>d(L.target.value),placeholder:"e.g., 234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ns,{className:"w-4 h-4 inline mr-2"}),"Year"]}),e.jsx("select",{value:r,onChange:L=>s(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(L=>e.jsx("option",{value:L,children:L},L))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{value:a,onChange:L=>o(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(L=>e.jsx("option",{value:L.value,children:L.name},L.value))})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>C(),disabled:u||!l,className:"w-full md:w-auto px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Retrieving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(a0,{className:"w-4 h-4"}),e.jsx("span",{children:"Retrieve SAFT-T"})]})})}),v&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md flex items-start space-x-3",children:[e.jsx(In,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:v})]})]}),m&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-start space-x-3",children:[e.jsx(Fn,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"SAFT-T Retrieved Successfully"}),e.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Generated:"})," ",new Date(m.generated).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sent:"})," ",new Date(m.sent).toLocaleString()]})]}),e.jsxs("button",{onClick:()=>S(),className:"mt-3 inline-flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[e.jsx(Gu,{className:"w-4 h-4"}),e.jsx("span",{children:"Download SAFT-T File"})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"About SAFT-T"}),e.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:"The SAFT-T (Sistema de Apuramento de Faturas e Transações - Transmissão) is a Portuguese tax compliance system that requires businesses to submit detailed transaction data to the tax authorities. This tool helps you retrieve existing SAFT-T files for the specified period and invoicing VAT ID."}),e.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mt-2",children:"The SAFT-T file contains all invoice and transaction data and can be submitted directly to the Portuguese tax authorities."})]})]})},dA=async t=>(await Ct.get(`/api/properties/${t}`)).data,uA=()=>{const{propertyId:t}=A0(),r=pi(),[s,a]=R.useState(null),[o,l]=R.useState(!0),[d,u]=R.useState("");R.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(t){l(!0),u("");try{const p=await dA(t);a(p)}catch(p){u(p.message||"Failed to fetch property details")}finally{l(!1)}}},m=()=>{r(-1)};return o?e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C3,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600",children:"Loading property details..."})]})})}):d?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(yc,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(In,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error Loading Property"}),e.jsx("p",{className:"text-red-700 mt-2",children:d}),e.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Try Again"})]})]})})]}):s?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(yc,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(en,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.property_name})]}),e.jsxs("p",{className:"text-gray-600",children:["Property ID: ",s.id]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(en,{className:"w-5 h-5 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.property_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property ID"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.activated==="1"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.activated==="1"?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.owner})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(yd,{className:"w-5 h-5 mr-2 text-blue-600"}),"Location"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.cp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.localidade})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coordinates"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.lat,", ",s.lon]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx($2,{className:"w-5 h-5 mr-2 text-blue-600"}),"Tax Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIF (Tax ID)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nif})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Invoicing NIF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.invoicing_nif})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Order"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.seforder})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Code"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.sefcode})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ns,{className:"w-5 h-5 mr-2 text-blue-600"}),"Check-in/Check-out Times"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-in Time"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.default_checkin,":00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-out Time"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.default_checkout,":00"]})]})]})]})]}),e.jsxs("div",{className:"mt-8 flex space-x-4",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Data"}),e.jsx("button",{onClick:()=>r(`/saft?property=${s.id}`),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Generate SAFT-T"})]})]}):e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Property Not Found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The requested property could not be found."})]})})},hA=({onClose:t})=>{const[r,s]=R.useState([]),[a,o]=R.useState(""),[l,d]=R.useState(""),[u,h]=R.useState(""),[m,p]=R.useState(null),[v,N]=R.useState(!1),[y,k]=R.useState("");R.useEffect(()=>{C();const E=new Date,M=new Date(E.getFullYear(),E.getMonth(),1),z=new Date(E.getFullYear(),E.getMonth()+1,0);d(M.toISOString().split("T")[0]),h(z.toISOString().split("T")[0])},[]);const C=async()=>{try{const E=await em();s(E)}catch(E){console.error("Error fetching properties:",E)}},S=async()=>{if(!a||!l||!u){k("Please select a property and date range");return}N(!0),k("");try{const E=await v6(parseInt(a),l,u);p(E)}catch(E){k(E.response?.data?.message||"Error generating statement")}finally{N(!1)}},L=E=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(E),P=()=>{if(!m)return;const E=[["Property Statement",""],["Property ID",m.property.id],["Property Name",m.property.name],["Owner",m.property.owner],["Period",`${m.period.startDate} to ${m.period.endDate}`],[""],["Calculations","Amount (€)"],["Gross Amount",m.calculations.grossAmount.toFixed(2)],["Portal Commission (15%)",m.calculations.portalCommission.toFixed(2)],["Cleaning Fee (€75 × invoices)",m.calculations.cleaningFee.toFixed(2)],["Management Commission",m.calculations.managementCommission.toFixed(2)],["Final Owner Amount",m.calculations.finalOwnerAmount.toFixed(2)],[""],["Invoice Count",m.invoiceCount],[""],["Invoices",""],["Invoice ID","Name","Value (€)","Date","Series"],...m.invoices.map(X=>[X.id,X.name,X.value.toFixed(2),X.date,X.series])].map(X=>X.join(",")).join(`
`),M=new Blob([E],{type:"text/csv"}),z=window.URL.createObjectURL(M),he=document.createElement("a");he.href=z,he.download=`owner-statement-${m.property.id}-${m.period.startDate}-${m.period.endDate}.csv`,he.click(),window.URL.revokeObjectURL(z)};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Statement"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and view property owner financial statements"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Property"}),e.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Choose a property..."}),r.map(E=>e.jsxs("option",{value:E.id,children:[E.name," (ID: ",E.id,") - ",E.isAdminOwned?"Admin":E.owner?.name||"Unassigned"]},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:l,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(ns,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:u,onChange:E=>h(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(ns,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Management Commission Rate (Ignored for admin properties)"}),e.jsxs("select",{value:m?.property?.isAdminOwned?"0":"25",disabled:m?.property?.isAdminOwned,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m?.property?.isAdminOwned?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"0",children:"0% (Admin Properties)"}),e.jsx("option",{value:"25",children:"25% (Owner Properties)"})]}),m?.property?.isAdminOwned&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin-owned property (0% commission)"}),!m?.property?.isAdminOwned&&m&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Owner-owned property (25% commission)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:S,disabled:v||!a||!l||!u,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Generate Statements"]})})})]}),y&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600",children:y})})]}),m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Owner Statement Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Calculation Base:"}),e.jsx("span",{className:"font-semibold",children:"Invoices"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Gross Amount:"}),e.jsx("span",{className:"font-semibold",children:L(m.calculations.grossAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Portal Commission (15%):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.portalCommission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Cleaning Fee (€75 × ",m.invoiceCount,"):"]}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.cleaningFee)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Management Commission (",m.property.isAdminOwned?"0%":"25%","):"]}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.managementCommission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Additional Fees:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Expenses:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-green-50 rounded-lg px-4",children:[e.jsx("span",{className:"text-green-600 font-bold text-lg",children:"Final Owner Amount:"}),e.jsx("span",{className:"text-green-600 font-bold text-lg",children:L(m.calculations.finalOwnerAmount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Name:"}),e.jsx("span",{className:"font-semibold",children:m.property.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property ID:"}),e.jsx("span",{className:"font-semibold",children:m.property.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Owner:"}),e.jsx("span",{className:"font-semibold",children:m.property.owner})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Period:"}),e.jsxs("span",{className:"font-semibold",children:[m.period.startDate," - ",m.period.endDate]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Invoice Count:"}),e.jsx("span",{className:"font-semibold",children:m.invoiceCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Type:"}),e.jsx("span",{className:"font-semibold",children:m.property.isAdminOwned?"Admin Property":"Owner Property"})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})]})})},fA=({onSuccess:t,onCancel:r})=>{const s=Y=>Y==="accountant"?"accountant":"owner",[a,o]=R.useState({name:"",email:"",phone:"",hostkitApiId:"",hostkitApiKey:"",hostkitApiSecret:"",password:"",role:"owner"}),[l,d]=R.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",amenities:"WiFi, Kitchen, Pool, Parking"}),[u,h]=R.useState(!1),[m,p]=R.useState(!1),[v,N]=R.useState(""),[y,k]=R.useState([]),[C,S]=R.useState(!1),[L,P]=R.useState(!1),[E,M]=R.useState(!1),[z,he]=R.useState([]),[X,J]=R.useState([]);R.useEffect(()=>{a.role==="accountant"&&(async()=>{try{const le=await em();J(le)}catch(le){console.error("Error fetching properties:",le)}})()},[a.role]);const G=async Y=>{Y.preventDefault(),p(!0),N("");try{console.log("Creating user with data:",a);const le={...a,...u&&l.name&&l.id&&{propertyData:l},...a.role==="accountant"&&z.length>0&&{assignedProperties:z}},F=await nb(le);if(console.log("User created successfully:",F),!F||!F._id)throw new Error("Invalid response from createOwner API");if(u&&l.name&&l.id&&(console.log("Creating property with data:",l),console.log("Property created and assigned to owner:",F._id),y.length>0))try{S(!0);const{uploadPropertyImages:Z}=await xa(async()=>{const{uploadPropertyImages:be}=await Promise.resolve().then(()=>cv);return{uploadPropertyImages:be}},void 0);await Z(l.id,y),console.log("Images uploaded successfully for property:",l.id),k([])}catch(Z){console.error("Error uploading images:",Z)}finally{S(!1)}t()}catch(le){console.error("Error creating owner:",le),N(le.response?.data?.message||le.message||"Failed to create owner")}finally{p(!1)}},pe=Y=>{o(le=>({...le,[Y.target.name]:Y.target.value}))},I=Y=>{const le=Array.from(Y.target.files||[]);k(F=>[...F,...le]),console.log("Images selected for upload:",le.map(F=>F.name))},U=Y=>{k(le=>le.filter((F,Z)=>Z!==Y))},B=Y=>{he(Y?X.map(le=>le._id):[])},W=(Y,le)=>{he(le?F=>[...F,Y]:F=>F.filter(Z=>Z!==Y))};return e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:v}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:pe,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${a.role==="accountant"?"accountant":"owner"} name`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:pe,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:pe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),e.jsxs("select",{name:"role",value:a.role,onChange:Y=>o(le=>({...le,role:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"accountant",children:"Accountant"})]})]}),a.role==="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API ID"}),e.jsx("input",{type:"text",name:"hostkitApiId",value:a.hostkitApiId||"",onChange:pe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Hostkit API ID (e.g., 10028)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E?"text":"password",name:"hostkitApiKey",value:a.hostkitApiKey,onChange:pe,className:"w-full px-3 py-2 pr-12 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Hostkit API Key"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>M(!E),children:E?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:L?"text":"password",name:"password",value:a.password,onChange:pe,className:"w-full px-3 py-2 pr-12 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter password for this ${a.role==="accountant"?"accountant":"owner"}`}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>P(!L),children:L?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-6",children:[a.role==="owner"&&e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeProperty",checked:u,onChange:Y=>h(Y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"includeProperty",className:"ml-2 text-sm font-medium text-gray-700",children:["Also create a property for this ",s(a.role)]})]}),a.role==="accountant"&&e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Assign Properties to Accountant"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:z.length===X.length&&X.length>0,onChange:Y=>B(Y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-medium text-gray-700",children:["Select All Properties (",X.length," available)"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:X.map(Y=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`property-${Y._id}`,checked:z.includes(Y._id),onChange:le=>W(Y._id,le.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:`property-${Y._id}`,className:"ml-2 text-sm text-gray-700",children:[Y.name," (ID: ",Y.id,")"]})]},Y._id))}),z.length>0&&e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["✓ ",z.length," property(ies) selected"]})]}),u&&e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway Property ID *"}),e.jsx("input",{type:"number",value:l.id,onChange:Y=>d(le=>({...le,id:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 392777",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{value:l.type,onChange:Y=>d(le=>({...le,type:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:Y=>d(le=>({...le,name:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property name",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",value:l.address,onChange:Y=>d(le=>({...le,address:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property address",required:u})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",min:"0",value:l.bedrooms,onChange:Y=>d(le=>({...le,bedrooms:parseInt(Y.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",min:"0",value:l.bathrooms,onChange:Y=>d(le=>({...le,bathrooms:parseInt(Y.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",min:"1",value:l.maxGuests,onChange:Y=>d(le=>({...le,maxGuests:parseInt(Y.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",value:l.hostkitId,onChange:Y=>d(le=>({...le,hostkitId:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10030",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amenities (comma-separated)"}),e.jsx("input",{type:"text",value:l.amenities,onChange:Y=>d(le=>({...le,amenities:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"WiFi, Kitchen, Pool, Parking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:I,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),y.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((Y,le)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:Y.name}),e.jsx("button",{type:"button",onClick:()=>U(le),className:"text-red-500 hover:text-red-700",children:e.jsx(Kr,{className:"h-4 w-4"})})]},le))})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||C,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:m?"Creating...":C?"Uploading Images...":u?`Create ${a.role==="accountant"?"Accountant":"Owner"} & Property`:`Create ${a.role==="accountant"?"Accountant":"Owner"}`})]})]})},mA=({owners:t,onSuccess:r,onCancel:s})=>{const[a,o]=R.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",amenities:["WiFi","Kitchen","Pool","Parking"],owner:""}),[l,d]=R.useState("WiFi, Kitchen, Pool, Parking"),[u,h]=R.useState(!1),[m,p]=R.useState(""),[v,N]=R.useState([]),[y,k]=R.useState(!1),[C,S]=R.useState(!1),L=async z=>{z.preventDefault(),h(!0),p("");try{const he={...a,id:parseInt(a.id)||0,amenities:Array.isArray(a.amenities)?a.amenities:a.amenities.split(",").map(G=>G.trim()).filter(G=>G)};console.log("Creating property with data:",he);const{createProperty:X}=await xa(async()=>{const{createProperty:G}=await Promise.resolve().then(()=>_6);return{createProperty:G}},void 0),J=await X(he);if(console.log("Property created successfully:",J),v.length>0)try{k(!0);const{uploadPropertyImages:G}=await xa(async()=>{const{uploadPropertyImages:pe}=await Promise.resolve().then(()=>cv);return{uploadPropertyImages:pe}},void 0);await G(he.id.toString(),v),console.log("✅ Images uploaded successfully for new property:",he.id),N([])}catch(G){console.error("❌ Error uploading images:",G)}finally{k(!1)}r()}catch(he){p(he.message||"Failed to create property")}finally{h(!1)}},P=z=>{const{name:he,value:X}=z.target;o(J=>({...J,[he]:he==="bedrooms"||he==="bathrooms"||he==="maxGuests"?parseInt(X)||0:X}))},E=z=>{const he=z.target.value;console.log("🔍 Amenities input changed:",he),d(he);const X=he.split(",").map(J=>J.trim()).filter(J=>J);o(J=>({...J,amenities:X}))},M=z=>{z.target.files&&N(Array.from(z.target.files))};return e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:m}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway Property ID *"}),e.jsx("input",{type:"number",name:"id",value:a.id,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 392777",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{name:"type",value:a.type,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),e.jsxs("select",{name:"owner",value:a.owner,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),t.map(z=>e.jsx("option",{value:z._id,children:z.name},z._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:a.address,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property address",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",name:"bedrooms",value:a.bedrooms,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",name:"bathrooms",value:a.bathrooms,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",name:"maxGuests",value:a.maxGuests,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",name:"hostkitId",value:a.hostkitId,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"e.g., 10030",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:C?"text":"password",name:"hostkitApiKey",value:a.hostkitApiKey,onChange:P,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",required:!0}),e.jsx("button",{type:"button",onClick:()=>S(!C),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C?e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amenities (comma separated)"}),e.jsx("input",{type:"text",value:l,onChange:E,onKeyDown:z=>{console.log("🔍 Key pressed:",z.key,"Code:",z.code),z.key===" "&&console.log("🔍 Space key detected!")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"WiFi, Kitchen, Pool, Parking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:M,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),v.length>0&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[v.length," image(s) selected"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Creating...":y?"Uploading Images...":"Create Property"})]})]})},pA=({accountant:t,availableProperties:r,onUpdate:s,onCancel:a})=>{const[o,l]=R.useState({name:t.name,email:t.email,phone:t.phone||"",password:""}),[d,u]=R.useState(t.assignedProperties.map(S=>S._id)),[h,m]=R.useState(!1),[p,v]=R.useState(!1),N=async S=>{S.preventDefault(),v(!0);try{const L={name:o.name,email:o.email,phone:o.phone,...o.password&&{password:o.password},assignedProperties:d};await s(L)}catch(L){console.error("Error updating accountant:",L)}finally{v(!1)}},y=S=>{l(L=>({...L,[S.target.name]:S.target.value}))},k=S=>{u(S?r.map(L=>L._id):[])},C=(S,L)=>{u(L?P=>[...P,S]:P=>P.filter(E=>E!==S))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit Accountant"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update accountant details and property assignments"})]}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx(Kr,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(pa,{className:"h-5 w-5 mr-2 text-blue-600"}),"Accountant Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter accountant name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ru,{className:"h-5 w-5 mr-2 text-green-600"}),"Security Settings"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password (Leave blank to keep current)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",name:"password",value:o.password,onChange:y,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter new password (optional)"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(en,{className:"h-5 w-5 mr-2 text-purple-600"}),"Property Assignment"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:d.length===r.length&&r.length>0,onChange:S=>k(S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-semibold text-gray-700",children:"Select All Properties"})]}),e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[r.length," available"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-gray-200 rounded-lg p-4 bg-white",children:r.map(S=>e.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:[e.jsx("input",{type:"checkbox",id:`property-${S._id}`,checked:d.includes(S._id),onChange:L=>C(S._id,L.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:`property-${S._id}`,className:"ml-3 text-sm text-gray-700 flex-1",children:[e.jsx("div",{className:"font-medium",children:S.name||S.title||"Unnamed Property"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",S.id||S._id,S.owner&&e.jsxs("span",{className:"ml-2",children:["• Owner: ",S.owner.name]})]})]})]},S._id))}),d.length>0&&e.jsx("div",{className:"mt-4 flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-sm text-green-700 font-medium",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),d.length," property(ies) selected"]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 border border-transparent rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:p?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Accountant"})]})]})})]})})},gA=()=>{const{user:t}=Ft(de=>de.auth),[r,s]=R.useState(null),[a,o]=R.useState([]),[l,d]=R.useState([]),[u,h]=R.useState([]),[m,p]=R.useState("all"),[v,N]=R.useState("all"),[y,k]=R.useState(!0),[C,S]=R.useState(!1),[L,P]=R.useState(!1),[E,M]=R.useState(!1),[z,he]=R.useState(!1),[X,J]=R.useState(null),[G,pe]=R.useState(null),[I,U]=R.useState(!1),[B,W]=R.useState(null),[Y,le]=R.useState(!1);R.useEffect(()=>{F()},[]),R.useEffect(()=>{Z()},[m]);const F=async()=>{try{k(!0),console.log("Fetching dashboard data...");const[de,ue,Pe]=await Promise.all([g6(),sb(),x6()]);console.log("Dashboard stats:",de),console.log("Owners data:",ue),console.log("Accountants data:",Pe),s(de),o(ue),d(Pe)}catch(de){console.error("Error fetching dashboard data:",de)}finally{k(!1)}},Z=async()=>{try{const de=m==="all"?void 0:m;console.log("🔍 fetchProperties called with selectedOwnerId:",m,"ownerId param:",de);const ue=await em(de);console.log("🔍 fetchProperties received:",ue),Array.isArray(ue)?(console.log("🔍 fetchProperties received:",ue.length,"properties"),console.log("🔍 fetchProperties property owners:",ue.map(Pe=>({id:Pe.id,name:Pe.name,owner:Pe.owner}))),h(ue)):(console.error("🔍 fetchProperties received non-array data:",ue),h([]))}catch(de){console.error("Error fetching properties:",de),h([])}},be=de=>{console.log("🔍 handleOwnerChange called. New ownerId:",de),console.log("🔍 Current selectedOwnerId:",m),p(de)},Ae=()=>{if(m==="all")return"All Owners";if(m==="admin")return"Admin";const de=a.find(ue=>ue._id===m);return de?de.name:"Unknown Owner"},ee=()=>{if(v==="all")return"All Accountants";const de=l.find(ue=>ue._id===v);return de?de.name:"Unknown Accountant"},D=()=>v==="all"?l:l.filter(de=>de._id===v),te=de=>{W(de),U(!0)},se=de=>{const ue=document.querySelector("[data-property-management]");ue?(ue.scrollIntoView({behavior:"smooth"}),window.dispatchEvent(new CustomEvent("editProperty",{detail:{property:de}}))):alert("Please use the Property Management section below to edit properties.")},fe=async(de,ue)=>{if(window.confirm(`Are you sure you want to delete "${ue}"? This action cannot be undone.`))try{await k6(de.toString()),console.log(`Property ${de} deleted successfully`),Z(),F(),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:de,propertyName:ue}}))}catch(Pe){console.error("Error deleting property:",Pe),alert("Failed to delete property. Please try again.")}},V=de=>{J(de),M(!0)},ye=de=>{pe(de),he(!0)},ie=async de=>{if(G)try{await y6(G._id,{name:de.name,email:de.email,phone:de.phone,password:de.password}),console.log(`Accountant ${G.name} basic info updated successfully`),de.assignedProperties!==void 0&&(await b6(G._id,de.assignedProperties),console.log(`Accountant ${G.name} property assignments updated successfully`)),F(),he(!1),pe(null)}catch(ue){console.error("Error updating accountant:",ue),alert("Failed to update accountant. Please try again.")}},ge=async de=>{if(window.confirm(`Are you sure you want to delete "${de.name}"? This action cannot be undone and will remove them from all assigned properties.`))try{await w6(de._id),console.log(`Accountant ${de.name} deleted successfully`),F()}catch(ue){console.error("Error deleting accountant:",ue),alert("Failed to delete accountant. Please try again.")}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-lg border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-black bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsxs("p",{className:"mt-2 text-lg text-gray-600",children:["Welcome back, ",e.jsx("span",{className:"font-semibold text-black",children:t?.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:de=>be(de.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Owners"}),e.jsx("option",{value:"admin",children:"Admin"}),a.map(de=>e.jsx("option",{value:de._id,children:de.name},de._id))]}),e.jsx(Cf,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:v,onChange:de=>N(de.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Accountants"}),l.map(de=>e.jsx("option",{value:de._id,children:de.name},de._id))]}),e.jsx(Cf,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-xl rounded-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(pa,{className:"h-6 w-6 text-white"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Owners"}),e.jsx("dd",{className:"text-3xl font-bold text-gray-900 mt-1",children:r?.totalOwners||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-xl rounded-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(pa,{className:"h-6 w-6 text-white"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Accountants"}),e.jsx("dd",{className:"text-3xl font-bold text-gray-900 mt-1",children:r?.totalAccountants||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-xl rounded-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(en,{className:"h-6 w-6 text-white"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Properties"}),e.jsx("dd",{className:"text-3xl font-bold text-gray-900 mt-1",children:r?.totalProperties||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-xl rounded-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(fi,{className:"h-6 w-6 text-white"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Current View"}),e.jsxs("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:[Ae()," | ",ee()]})]})})]})})})]}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Properties (",Ae(),")"]}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor your property portfolio"})]}),e.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center px-4 py-3 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx($i,{className:"h-5 w-5 mr-2"}),"Add Property"]})]}),u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(en,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new property."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(de=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.isAdminOwned?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:de.isAdminOwned?"Admin Owned":"Owner Owned"})}),e.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-1",children:de.name||de.title||"Unnamed Property"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1"}),"ID: ",de.id||de._id]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(pa,{className:"h-4 w-4 mr-1"}),de.isAdminOwned?"Admin":de.owner?.name||"Unassigned"]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsx("button",{onClick:()=>te(de),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Property Details",children:e.jsx(ks,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>se(de),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Property",children:e.jsx(Pl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>fe(de.id||de._id,de.name||de.title||"Unnamed Property"),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Property",children:e.jsx(Mu,{className:"h-4 w-4"})})]})]},de._id))})]})}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Accountants (",ee(),")"]}),e.jsx("p",{className:"text-gray-600",children:"Manage accountant access and property assignments"})]})}),D().length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pa,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No accountants"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new accountant."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D().map(de=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Accountant"})}),e.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:de.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),de.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),de.phone||"Phone not provided"]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsx("button",{onClick:()=>V(de),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Accountant Details",children:e.jsx(ks,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ye(de),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Accountant",children:e.jsx(Pl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ge(de),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Accountant",children:e.jsx(Mu,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Assigned Properties"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:de.assignedPropertiesCount})]}),de.assignedProperties.length>0&&e.jsxs("div",{className:"space-y-2",children:[de.assignedProperties.slice(0,3).map(ue=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:ue.name})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",ue.id]})]},ue._id)),de.assignedProperties.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 italic text-center py-1",children:["+",de.assignedProperties.length-3," more properties"]})]})]})]},de._id))})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Property"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsx(mA,{owners:a,onSuccess:()=>{P(!1),Z()},onCancel:()=>P(!1)})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New User"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsx(fA,{onSuccess:()=>{S(!1),F()},onCancel:()=>S(!1)})]})})}),E&&X&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Accountant Details"}),e.jsx("button",{onClick:()=>{M(!1),J(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:X.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:X.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:X.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Properties"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[X.assignedPropertiesCount," properties"]})]}),X.assignedProperties.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property List"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:X.assignedProperties.map(de=>e.jsxs("div",{className:"px-3 py-1 bg-blue-50 border border-blue-200 rounded text-sm",children:[de.name," (ID: ",de.id,")"]},de._id))})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsx("button",{onClick:()=>{M(!1),J(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),z&&G&&e.jsx(pA,{accountant:G,availableProperties:u,onUpdate:ie,onCancel:()=>{he(!1),pe(null)}}),I&&B&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Property Details"}),e.jsx("button",{onClick:()=>{U(!1),W(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.name||B.title||"Unnamed Property"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.id||B._id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.isAdminOwned?"Admin":B.owner?.name||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.type||"Not specified"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.bedrooms||"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.bathrooms||"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.maxGuests||"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:B.status||"Active"})]}),B.images&&B.images.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[B.images.length," image(s)"]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsx("button",{onClick:()=>{U(!1),W(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),e.jsx("div",{className:"bg-white shadow rounded-lg mt-6","data-property-management":!0,children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Full Properties Management (",Ae(),")"]})}),e.jsx(dv,{filteredProperties:u,onPropertyUpdate:Z,owners:a})]})})]}),Y&&e.jsx(hA,{onClose:()=>le(!1)})]})},xA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(!0),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState({name:"",email:"",phone:"",role:"owner",password:""}),[p,v]=R.useState(!1),[N,y]=R.useState(!1),[k,C]=R.useState(null),[S,L]=R.useState([]),[P,E]=R.useState("");R.useEffect(()=>{M()},[]);const M=async()=>{try{a(!0);const I=await sb();r(I)}catch(I){console.error("Error fetching owners:",I)}finally{a(!1)}},z=async I=>{I.preventDefault();try{d?await N6(d._id,h):await nb(h),await M(),l(!1),u(null),m({name:"",email:"",phone:"",role:"owner",password:""})}catch(U){console.error("Error saving owner:",U)}},he=I=>{u(I),m({name:I.name,email:I.email,phone:I.phone||"",role:I.role,password:""}),l(!0)},X=async I=>{if(window.confirm("Are you sure you want to delete this owner?"))try{await j6(I),await M()}catch(U){console.error("Error deleting owner:",U)}},J=async I=>{try{const U=await em();L(U),C(I),y(!0)}catch(U){console.error("Error fetching properties:",U)}},G=async()=>{if(!(!k||!P))try{await S6(k._id,parseInt(P)),y(!1),C(null),E(""),await M()}catch(I){console.error("Error assigning property:",I)}},pe=()=>{l(!1),u(null),m({name:"",email:"",phone:"",role:"owner",hostkitApiKey:"",hostkitApiSecret:""})};return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage property owners and their API credentials"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Add Owner"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"API Keys"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Oo,{className:"h-5 w-5 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",I._id.slice(-8)]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[e.jsx(Al,{className:"h-4 w-4 mr-2 text-gray-400"}),I.email]}),I.phone&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[e.jsx(T0,{className:"h-4 w-4 mr-2 text-gray-400"}),I.phone]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.role==="admin"?"bg-purple-100 text-purple-800":I.role==="owner"?"bg-green-100 text-green-800":I.role==="accountant"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx(js,{className:"h-3 w-3 mr-1"}),I.role]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:I.hasApiKeys?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(tf,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Configured"})]}):e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Kr,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Not Set"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:I.isVerified?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(Fn,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Verified"})]}):e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(Sl,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Pending"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>he(I),className:"text-green-600 hover:text-green-900",title:"Edit Owner",children:e.jsx(Pl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>J(I),className:"text-blue-600 hover:text-blue-900",title:"Assign Property",children:e.jsx(en,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>X(I._id),className:"text-red-600 hover:text-red-900",title:"Delete Owner",children:e.jsx(Mu,{className:"h-4 w-4"})})]})})]},I._id))})]})})})})}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d?"Edit Owner":"Add New Owner"}),e.jsx("button",{onClick:pe,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Sl,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:I=>m({...h,name:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:h.email,onChange:I=>m({...h,email:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone (Optional)"}),e.jsx("input",{type:"tel",value:h.phone,onChange:I=>m({...h,phone:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",d?"(Leave blank to keep current)":"*"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:h.password,onChange:I=>m({...h,password:I.target.value}),className:"mt-1 block w-full pr-12 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:d?"Enter new password (optional)":"Enter password",required:!d}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!p),children:p?e.jsx(Ki,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:pe,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:d?"Update Owner":"Create Owner"})]})]})]})})}),N&&k&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Assign Property to ",k.name]}),e.jsx("button",{onClick:()=>{y(!1),C(null),E("")},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Kr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Property"}),e.jsxs("select",{value:P,onChange:I=>E(I.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Choose a property..."}),S.map(I=>e.jsxs("option",{value:I._id,children:[I.name," (ID: ",I.id,")"]},I._id))]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),C(null),E("")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsxs("button",{onClick:G,disabled:!P,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(A3,{className:"h-4 w-4 mr-2 inline"}),"Assign Property"]})]})]})]})})})]})},yA=({children:t,roles:r})=>{const{isAuthenticated:s,user:a}=Ft(o=>o.auth);return s?r&&a&&!r.includes(a.role)?e.jsx(Ui,{to:"/dashboard/owner",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Ui,{to:"/auth/login",replace:!0})};function bA(){const t=As(),{isAuthenticated:r,isLoading:s,user:a}=Ft(o=>o.auth);return R.useEffect(()=>{r&&!a&&t(xd())},[t,r,a]),s&&r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(bc,{size:"lg"})}):e.jsx(m3,{children:e.jsxs(Mw,{children:[e.jsxs(Qt,{path:"/auth/*",element:e.jsx($3,{}),children:[e.jsx(Qt,{path:"login",element:e.jsx(m6,{})}),e.jsx(Qt,{path:"signup",element:e.jsx(A6,{})}),e.jsx(Qt,{path:"forgot-password",element:e.jsx(C6,{})}),e.jsx(Qt,{path:"reset-password",element:e.jsx(P6,{})}),e.jsx(Qt,{index:!0,element:e.jsx(Ui,{to:"/auth/login",replace:!0})})]}),e.jsxs(Qt,{path:"/*",element:e.jsx(yA,{children:e.jsx(z3,{})}),children:[e.jsx(Qt,{index:!0,element:e.jsx(Ui,{to:"/dashboard/owner",replace:!0})}),e.jsx(Qt,{path:"dashboard",element:e.jsx(Ui,{to:"/dashboard/owner",replace:!0})}),e.jsx(Qt,{path:"dashboard/owner",element:e.jsx(dy,{})}),e.jsx(Qt,{path:"dashboard/accountant",element:e.jsx(dy,{})}),e.jsx(Qt,{path:"admin/dashboard",element:e.jsx(gA,{})}),e.jsx(Qt,{path:"admin/owners",element:e.jsx(xA,{})}),e.jsx(Qt,{path:"bookings",element:e.jsx(G6,{})}),e.jsx(Qt,{path:"bookings/:bookingId",element:e.jsx(hy,{})}),e.jsx(Qt,{path:"invoices",element:e.jsx(J6,{})}),e.jsx(Qt,{path:"tourist-tax",element:e.jsx(q8,{})}),e.jsx(Qt,{path:"tourist-tax/booking/:reservationId",element:e.jsx(hy,{})}),e.jsx(Qt,{path:"siba",element:e.jsx(V8,{})}),e.jsx(Qt,{path:"siba-manager",element:e.jsx(H8,{})}),e.jsx(Qt,{path:"saft",element:e.jsx(cA,{})}),e.jsx(Qt,{path:"property/:propertyId",element:e.jsx(uA,{})}),e.jsx(Qt,{path:"property-management",element:e.jsx(dv,{})}),e.jsx(Qt,{path:"calendar",element:e.jsx(J8,{})}),e.jsx(Qt,{path:"performance/:propertyId?",element:e.jsx(Z8,{})}),e.jsx(Qt,{path:"portfolio",element:e.jsx(eA,{})}),e.jsx(Qt,{path:"credit-notes",element:e.jsx(tA,{})}),e.jsx(Qt,{path:"expenses",element:e.jsx(rA,{})}),e.jsx(Qt,{path:"reviews",element:e.jsx(sA,{})}),e.jsx(Qt,{path:"owner-statements",element:e.jsx(nA,{})}),e.jsx(Qt,{path:"profile",element:e.jsx(iA,{})}),e.jsx(Qt,{path:"settings",element:e.jsx(aA,{})}),e.jsx(Qt,{path:"advanced-calendar",element:e.jsx(oA,{})}),e.jsx(Qt,{path:"automations",element:e.jsx(lA,{})}),e.jsx(Qt,{path:"properties",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Properties"}),e.jsx("p",{children:"Coming soon..."})]})})]}),e.jsx(Qt,{path:"/",element:r&&a?e.jsx(Ui,{to:"/dashboard/owner",replace:!0}):e.jsx(Ui,{to:"/auth/login",replace:!0})}),e.jsx(Qt,{path:"*",element:r&&a?e.jsx(Ui,{to:"/dashboard/owner",replace:!0}):e.jsx(Ui,{to:"/auth/login",replace:!0})})]})})}const vA=cj({reducer:{auth:h3,properties:F6,propertyManagement:D6,bookings:B6,invoices:Y6,touristTax:U8,siba:$8,sibaManager:H6,notifications:M3},middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),wA=new $5({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:300*1e3}}});Zv.createRoot(document.getElementById("root")).render(e.jsx(Ln.StrictMode,{children:e.jsx(g5,{store:vA,children:e.jsx(H5,{client:wA,children:e.jsxs(Ww,{children:[e.jsx(bA,{}),e.jsx(RN,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb",borderRadius:"0.75rem"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}));export{pr as _,Ct as a,NA as c,P1 as g};
