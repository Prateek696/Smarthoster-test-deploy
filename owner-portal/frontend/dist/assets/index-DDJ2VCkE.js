function lw(e,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gm={exports:{}},fu={},Km={exports:{}},nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function cw(){if(ax)return nr;ax=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function j(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function N(T,L,Y){this.props=T,this.context=L,this.refs=P,this.updater=Y||y}N.prototype.isReactComponent={},N.prototype.setState=function(T,L){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,L,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function C(){}C.prototype=N.prototype;function F(T,L,Y){this.props=T,this.context=L,this.refs=P,this.updater=Y||y}var D=F.prototype=new C;D.constructor=F,A(D,N.prototype),D.isPureReactComponent=!0;var M=Array.isArray,U=Object.prototype.hasOwnProperty,Q={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function re(T,L,Y){var ne,ie={},V=null,fe=null;if(L!=null)for(ne in L.ref!==void 0&&(fe=L.ref),L.key!==void 0&&(V=""+L.key),L)U.call(L,ne)&&!J.hasOwnProperty(ne)&&(ie[ne]=L[ne]);var he=arguments.length-2;if(he===1)ie.children=Y;else if(1<he){for(var pe=Array(he),Ce=0;Ce<he;Ce++)pe[Ce]=arguments[Ce+2];ie.children=pe}if(T&&T.defaultProps)for(ne in he=T.defaultProps,he)ie[ne]===void 0&&(ie[ne]=he[ne]);return{$$typeof:e,type:T,key:V,ref:fe,props:ie,_owner:Q.current}}function K(T,L){return{$$typeof:e,type:T.type,key:L,ref:T.ref,props:T.props,_owner:T._owner}}function de(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function E(T){var L={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Y){return L[Y]})}var I=/\/+/g;function H(T,L){return typeof T=="object"&&T!==null&&T.key!=null?E(""+T.key):L.toString(36)}function te(T,L,Y,ne,ie){var V=typeof T;(V==="undefined"||V==="boolean")&&(T=null);var fe=!1;if(T===null)fe=!0;else switch(V){case"string":case"number":fe=!0;break;case"object":switch(T.$$typeof){case e:case r:fe=!0}}if(fe)return fe=T,ie=ie(fe),T=ne===""?"."+H(fe,0):ne,M(ie)?(Y="",T!=null&&(Y=T.replace(I,"$&/")+"/"),te(ie,L,Y,"",function(Ce){return Ce})):ie!=null&&(de(ie)&&(ie=K(ie,Y+(!ie.key||fe&&fe.key===ie.key?"":(""+ie.key).replace(I,"$&/")+"/")+T)),L.push(ie)),1;if(fe=0,ne=ne===""?".":ne+":",M(T))for(var he=0;he<T.length;he++){V=T[he];var pe=ne+H(V,he);fe+=te(V,L,Y,pe,ie)}else if(pe=j(T),typeof pe=="function")for(T=pe.call(T),he=0;!(V=T.next()).done;)V=V.value,pe=ne+H(V,he++),fe+=te(V,L,Y,pe,ie);else if(V==="object")throw L=String(T),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return fe}function we(T,L,Y){if(T==null)return T;var ne=[],ie=0;return te(T,ne,"","",function(V){return L.call(Y,V,ie++)}),ne}function se(T){if(T._status===-1){var L=T._result;L=L(),L.then(function(Y){(T._status===0||T._status===-1)&&(T._status=1,T._result=Y)},function(Y){(T._status===0||T._status===-1)&&(T._status=2,T._result=Y)}),T._status===-1&&(T._status=0,T._result=L)}if(T._status===1)return T._result.default;throw T._result}var $={current:null},ee={transition:null},ge={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Q};function Se(){throw Error("act(...) is not supported in production builds of React.")}return nr.Children={map:we,forEach:function(T,L,Y){we(T,function(){L.apply(this,arguments)},Y)},count:function(T){var L=0;return we(T,function(){L++}),L},toArray:function(T){return we(T,function(L){return L})||[]},only:function(T){if(!de(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},nr.Component=N,nr.Fragment=n,nr.Profiler=o,nr.PureComponent=F,nr.StrictMode=a,nr.Suspense=h,nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,nr.act=Se,nr.cloneElement=function(T,L,Y){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ne=A({},T.props),ie=T.key,V=T.ref,fe=T._owner;if(L!=null){if(L.ref!==void 0&&(V=L.ref,fe=Q.current),L.key!==void 0&&(ie=""+L.key),T.type&&T.type.defaultProps)var he=T.type.defaultProps;for(pe in L)U.call(L,pe)&&!J.hasOwnProperty(pe)&&(ne[pe]=L[pe]===void 0&&he!==void 0?he[pe]:L[pe])}var pe=arguments.length-2;if(pe===1)ne.children=Y;else if(1<pe){he=Array(pe);for(var Ce=0;Ce<pe;Ce++)he[Ce]=arguments[Ce+2];ne.children=he}return{$$typeof:e,type:T.type,key:ie,ref:V,props:ne,_owner:fe}},nr.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},nr.createElement=re,nr.createFactory=function(T){var L=re.bind(null,T);return L.type=T,L},nr.createRef=function(){return{current:null}},nr.forwardRef=function(T){return{$$typeof:u,render:T}},nr.isValidElement=de,nr.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:se}},nr.memo=function(T,L){return{$$typeof:p,type:T,compare:L===void 0?null:L}},nr.startTransition=function(T){var L=ee.transition;ee.transition={};try{T()}finally{ee.transition=L}},nr.unstable_act=Se,nr.useCallback=function(T,L){return $.current.useCallback(T,L)},nr.useContext=function(T){return $.current.useContext(T)},nr.useDebugValue=function(){},nr.useDeferredValue=function(T){return $.current.useDeferredValue(T)},nr.useEffect=function(T,L){return $.current.useEffect(T,L)},nr.useId=function(){return $.current.useId()},nr.useImperativeHandle=function(T,L,Y){return $.current.useImperativeHandle(T,L,Y)},nr.useInsertionEffect=function(T,L){return $.current.useInsertionEffect(T,L)},nr.useLayoutEffect=function(T,L){return $.current.useLayoutEffect(T,L)},nr.useMemo=function(T,L){return $.current.useMemo(T,L)},nr.useReducer=function(T,L,Y){return $.current.useReducer(T,L,Y)},nr.useRef=function(T){return $.current.useRef(T)},nr.useState=function(T){return $.current.useState(T)},nr.useSyncExternalStore=function(T,L,Y){return $.current.useSyncExternalStore(T,L,Y)},nr.useTransition=function(){return $.current.useTransition()},nr.version="18.3.1",nr}var ix;function Mf(){return ix||(ix=1,Km.exports=cw()),Km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function dw(){if(ox)return fu;ox=1;var e=Mf(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,p){var m,b={},j=null,y=null;p!==void 0&&(j=""+p),h.key!==void 0&&(j=""+h.key),h.ref!==void 0&&(y=h.ref);for(m in h)a.call(h,m)&&!l.hasOwnProperty(m)&&(b[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)b[m]===void 0&&(b[m]=h[m]);return{$$typeof:r,type:u,key:j,ref:y,props:b,_owner:o.current}}return fu.Fragment=n,fu.jsx=d,fu.jsxs=d,fu}var lx;function uw(){return lx||(lx=1,Gm.exports=dw()),Gm.exports}var t=uw(),O=Mf();const Fs=B1(O),hw=lw({__proto__:null,default:Fs},[O]);var Rh={},Ym={exports:{}},ra={},Jm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function fw(){return cx||(cx=1,(function(e){function r(ee,ge){var Se=ee.length;ee.push(ge);e:for(;0<Se;){var T=Se-1>>>1,L=ee[T];if(0<o(L,ge))ee[T]=ge,ee[Se]=L,Se=T;else break e}}function n(ee){return ee.length===0?null:ee[0]}function a(ee){if(ee.length===0)return null;var ge=ee[0],Se=ee.pop();if(Se!==ge){ee[0]=Se;e:for(var T=0,L=ee.length,Y=L>>>1;T<Y;){var ne=2*(T+1)-1,ie=ee[ne],V=ne+1,fe=ee[V];if(0>o(ie,Se))V<L&&0>o(fe,ie)?(ee[T]=fe,ee[V]=Se,T=V):(ee[T]=ie,ee[ne]=Se,T=ne);else if(V<L&&0>o(fe,Se))ee[T]=fe,ee[V]=Se,T=V;else break e}}return ge}function o(ee,ge){var Se=ee.sortIndex-ge.sortIndex;return Se!==0?Se:ee.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var h=[],p=[],m=1,b=null,j=3,y=!1,A=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ee){for(var ge=n(p);ge!==null;){if(ge.callback===null)a(p);else if(ge.startTime<=ee)a(p),ge.sortIndex=ge.expirationTime,r(h,ge);else break;ge=n(p)}}function M(ee){if(P=!1,D(ee),!A)if(n(h)!==null)A=!0,se(U);else{var ge=n(p);ge!==null&&$(M,ge.startTime-ee)}}function U(ee,ge){A=!1,P&&(P=!1,C(re),re=-1),y=!0;var Se=j;try{for(D(ge),b=n(h);b!==null&&(!(b.expirationTime>ge)||ee&&!E());){var T=b.callback;if(typeof T=="function"){b.callback=null,j=b.priorityLevel;var L=T(b.expirationTime<=ge);ge=e.unstable_now(),typeof L=="function"?b.callback=L:b===n(h)&&a(h),D(ge)}else a(h);b=n(h)}if(b!==null)var Y=!0;else{var ne=n(p);ne!==null&&$(M,ne.startTime-ge),Y=!1}return Y}finally{b=null,j=Se,y=!1}}var Q=!1,J=null,re=-1,K=5,de=-1;function E(){return!(e.unstable_now()-de<K)}function I(){if(J!==null){var ee=e.unstable_now();de=ee;var ge=!0;try{ge=J(!0,ee)}finally{ge?H():(Q=!1,J=null)}}else Q=!1}var H;if(typeof F=="function")H=function(){F(I)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,we=te.port2;te.port1.onmessage=I,H=function(){we.postMessage(null)}}else H=function(){N(I,0)};function se(ee){J=ee,Q||(Q=!0,H())}function $(ee,ge){re=N(function(){ee(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){A||y||(A=!0,se(U))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(ee){switch(j){case 1:case 2:case 3:var ge=3;break;default:ge=j}var Se=j;j=ge;try{return ee()}finally{j=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,ge){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Se=j;j=ee;try{return ge()}finally{j=Se}},e.unstable_scheduleCallback=function(ee,ge,Se){var T=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?T+Se:T):Se=T,ee){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Se+L,ee={id:m++,callback:ge,priorityLevel:ee,startTime:Se,expirationTime:L,sortIndex:-1},Se>T?(ee.sortIndex=Se,r(p,ee),n(h)===null&&ee===n(p)&&(P?(C(re),re=-1):P=!0,$(M,Se-T))):(ee.sortIndex=L,r(h,ee),A||y||(A=!0,se(U))),ee},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(ee){var ge=j;return function(){var Se=j;j=ge;try{return ee.apply(this,arguments)}finally{j=Se}}}})(Qm)),Qm}var dx;function mw(){return dx||(dx=1,Jm.exports=fw()),Jm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function pw(){if(ux)return ra;ux=1;var e=Mf(),r=mw();function n(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(s,i){d(s,i),d(s+"Capture",i)}function d(s,i){for(o[s]=i,s=0;s<i.length;s++)a.add(i[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},b={};function j(s){return h.call(b,s)?!0:h.call(m,s)?!1:p.test(s)?b[s]=!0:(m[s]=!0,!1)}function y(s,i,c,g){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return g?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function A(s,i,c,g){if(i===null||typeof i>"u"||y(s,i,c,g))return!0;if(g)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function P(s,i,c,g,v,S,q){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=s,this.type=i,this.sanitizeURL=S,this.removeEmptyString=q}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new P(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];N[i]=new P(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new P(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new P(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new P(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new P(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new P(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new P(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new P(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function F(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(C,F);N[i]=new P(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(C,F);N[i]=new P(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(C,F);N[i]=new P(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new P(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new P(s,1,!1,s.toLowerCase(),null,!0,!0)});function D(s,i,c,g){var v=N.hasOwnProperty(i)?N[i]:null;(v!==null?v.type!==0:g||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,c,v,g)&&(c=null),g||v===null?j(i)&&(c===null?s.removeAttribute(i):s.setAttribute(i,""+c)):v.mustUseProperty?s[v.propertyName]=c===null?v.type===3?!1:"":c:(i=v.attributeName,g=v.attributeNamespace,c===null?s.removeAttribute(i):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,g?s.setAttributeNS(g,i,c):s.setAttribute(i,c))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),Q=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),ee=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var Se=Object.assign,T;function L(s){if(T===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);T=i&&i[1]||""}return`
`+T+s}var Y=!1;function ne(s,i){if(!s||Y)return"";Y=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Oe){var g=Oe}Reflect.construct(s,[],i)}else{try{i.call()}catch(Oe){g=Oe}s.call(i.prototype)}else{try{throw Error()}catch(Oe){g=Oe}s()}}catch(Oe){if(Oe&&g&&typeof Oe.stack=="string"){for(var v=Oe.stack.split(`
`),S=g.stack.split(`
`),q=v.length-1,me=S.length-1;1<=q&&0<=me&&v[q]!==S[me];)me--;for(;1<=q&&0<=me;q--,me--)if(v[q]!==S[me]){if(q!==1||me!==1)do if(q--,me--,0>me||v[q]!==S[me]){var ve=`
`+v[q].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=q&&0<=me);break}}}finally{Y=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?L(s):""}function ie(s){switch(s.tag){case 5:return L(s.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function V(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case J:return"Fragment";case Q:return"Portal";case K:return"Profiler";case re:return"StrictMode";case H:return"Suspense";case te:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case E:return(s.displayName||"Context")+".Consumer";case de:return(s._context.displayName||"Context")+".Provider";case I:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case we:return i=s.displayName||null,i!==null?i:V(s.type)||"Memo";case se:i=s._payload,s=s._init;try{return V(s(i))}catch{}}return null}function fe(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(i);case 8:return i===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function he(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function pe(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ce(s){var i=pe(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),g=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,S=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return v.call(this)},set:function(q){g=""+q,S.call(this,q)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ue(s){s._valueTracker||(s._valueTracker=Ce(s))}function Pe(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),g="";return s&&(g=pe(s)?s.checked?"true":"false":s.value),s=g,s!==c?(i.setValue(s),!0):!1}function Ge(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Te(s,i){var c=i.checked;return Se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function W(s,i){var c=i.defaultValue==null?"":i.defaultValue,g=i.checked!=null?i.checked:i.defaultChecked;c=he(i.value!=null?i.value:c),s._wrapperState={initialChecked:g,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function He(s,i){i=i.checked,i!=null&&D(s,"checked",i,!1)}function je(s,i){He(s,i);var c=he(i.value),g=i.type;if(c!=null)g==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?$e(s,i.type,c):i.hasOwnProperty("defaultValue")&&$e(s,i.type,he(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Ze(s,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var g=i.type;if(!(g!=="submit"&&g!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,c||i===s.value||(s.value=i),s.defaultValue=i}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function $e(s,i,c){(i!=="number"||Ge(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var le=Array.isArray;function xe(s,i,c,g){if(s=s.options,i){i={};for(var v=0;v<c.length;v++)i["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=i.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&g&&(s[c].defaultSelected=!0)}else{for(c=""+he(c),i=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,g&&(s[v].defaultSelected=!0);return}i!==null||s[v].disabled||(i=s[v])}i!==null&&(i.selected=!0)}}function De(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return Se({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ze(s,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(n(92));if(le(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),c=i}s._wrapperState={initialValue:he(c)}}function Ye(s,i){var c=he(i.value),g=he(i.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),i.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),g!=null&&(s.defaultValue=""+g)}function Ue(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Xe(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Xe(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ot,dt=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,g,v){MSApp.execUnsafeLocalFunction(function(){return s(i,c,g,v)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ot.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Pt(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mr=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(s){mr.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),ut[i]=ut[s]})});function Xt(s,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ut.hasOwnProperty(s)&&ut[s]?(""+i).trim():i+"px"}function ct(s,i){s=s.style;for(var c in i)if(i.hasOwnProperty(c)){var g=c.indexOf("--")===0,v=Xt(c,i[c],g);c==="float"&&(c="cssFloat"),g?s.setProperty(c,v):s[c]=v}}var Mt=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zt(s,i){if(i){if(Mt[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Lt(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kt=null;function qt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Je=null,it=null,lt=null;function at(s){if(s=nl(s)){if(typeof Je!="function")throw Error(n(280));var i=s.stateNode;i&&(i=Yl(i),Je(s.stateNode,s.type,i))}}function kt(s){it?lt?lt.push(s):lt=[s]:it=s}function Dt(){if(it){var s=it,i=lt;if(lt=it=null,at(s),i)for(s=0;s<i.length;s++)at(i[s])}}function Bt(s,i){return s(i)}function wr(){}var It=!1;function ht(s,i,c){if(It)return s(i,c);It=!0;try{return Bt(s,i,c)}finally{It=!1,(it!==null||lt!==null)&&(wr(),Dt())}}function cr(s,i){var c=s.stateNode;if(c===null)return null;var g=Yl(c);if(g===null)return null;c=g[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var Lr=!1;if(u)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Lr=!1}function Mn(s,i,c,g,v,S,q,me,ve){var Oe=Array.prototype.slice.call(arguments,3);try{i.apply(c,Oe)}catch(tt){this.onError(tt)}}var ar=!1,Nr=null,tr=!1,Bn=null,bn={onError:function(s){ar=!0,Nr=s}};function yr(s,i,c,g,v,S,q,me,ve){ar=!1,Nr=null,Mn.apply(bn,arguments)}function ns(s,i,c,g,v,S,q,me,ve){if(yr.apply(this,arguments),ar){if(ar){var Oe=Nr;ar=!1,Nr=null}else throw Error(n(198));tr||(tr=!0,Bn=Oe)}}function Hr(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function Un(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function ln(s){if(Hr(s)!==s)throw Error(n(188))}function Qi(s){var i=s.alternate;if(!i){if(i=Hr(s),i===null)throw Error(n(188));return i!==s?null:s}for(var c=s,g=i;;){var v=c.return;if(v===null)break;var S=v.alternate;if(S===null){if(g=v.return,g!==null){c=g;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===c)return ln(v),s;if(S===g)return ln(v),i;S=S.sibling}throw Error(n(188))}if(c.return!==g.return)c=v,g=S;else{for(var q=!1,me=v.child;me;){if(me===c){q=!0,c=v,g=S;break}if(me===g){q=!0,g=v,c=S;break}me=me.sibling}if(!q){for(me=S.child;me;){if(me===c){q=!0,c=S,g=v;break}if(me===g){q=!0,g=S,c=v;break}me=me.sibling}if(!q)throw Error(n(189))}}if(c.alternate!==g)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:i}function oa(s){return s=Qi(s),s!==null?wi(s):null}function wi(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=wi(s);if(i!==null)return i;s=s.sibling}return null}var Xi=r.unstable_scheduleCallback,Zi=r.unstable_cancelCallback,Ro=r.unstable_shouldYield,Md=r.unstable_requestPaint,Er=r.unstable_now,Ac=r.unstable_getCurrentPriorityLevel,Mo=r.unstable_ImmediatePriority,Ts=r.unstable_UserBlockingPriority,Ni=r.unstable_NormalPriority,Cc=r.unstable_LowPriority,Bo=r.unstable_IdlePriority,eo=null,Os=null;function Pc(s){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(eo,s,void 0,(s.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:_c,Bd=Math.log,cn=Math.LN2;function _c(s){return s>>>=0,s===0?32:31-(Bd(s)/cn|0)|0}var to=64,Gs=4194304;function la(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function gs(s,i){var c=s.pendingLanes;if(c===0)return 0;var g=0,v=s.suspendedLanes,S=s.pingedLanes,q=c&268435455;if(q!==0){var me=q&~v;me!==0?g=la(me):(S&=q,S!==0&&(g=la(S)))}else q=c&~v,q!==0?g=la(q):S!==0&&(g=la(S));if(g===0)return 0;if(i!==0&&i!==g&&(i&v)===0&&(v=g&-g,S=i&-i,v>=S||v===16&&(S&4194240)!==0))return i;if((g&4)!==0&&(g|=c&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=g;0<i;)c=31-Wn(i),v=1<<c,g|=s[c],i&=~v;return g}function ro(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(s,i){for(var c=s.suspendedLanes,g=s.pingedLanes,v=s.expirationTimes,S=s.pendingLanes;0<S;){var q=31-Wn(S),me=1<<q,ve=v[q];ve===-1?((me&c)===0||(me&g)!==0)&&(v[q]=ro(me,i)):ve<=i&&(s.expiredLanes|=me),S&=~me}}function no(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Dc(){var s=to;return to<<=1,(to&4194240)===0&&(to=64),s}function El(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function so(s,i,c){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Wn(i),s[i]=c}function Aa(s,i){var c=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<c;){var v=31-Wn(c),S=1<<v;i[v]=0,g[v]=-1,s[v]=-1,c&=~S}}function Uo(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var g=31-Wn(c),v=1<<g;v&i|s[g]&i&&(s[g]|=i),c&=~v}}var lr=0;function Va(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var qo,Fl,Lc,Ec,zo,Ha=!1,ca=[],Ca=null,xs=null,Ks=null,Ut=new Map,ao=new Map,Pa=[],Ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(s,i){switch(s){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Ut.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(i.pointerId)}}function Rs(s,i,c,g,v,S){return s===null||s.nativeEvent!==S?(s={blockedOn:i,domEventName:c,eventSystemFlags:g,nativeEvent:S,targetContainers:[v]},i!==null&&(i=nl(i),i!==null&&Fl(i)),s):(s.eventSystemFlags|=g,i=s.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),s)}function Wa(s,i,c,g,v){switch(i){case"focusin":return Ca=Rs(Ca,s,i,c,g,v),!0;case"dragenter":return xs=Rs(xs,s,i,c,g,v),!0;case"mouseover":return Ks=Rs(Ks,s,i,c,g,v),!0;case"pointerover":var S=v.pointerId;return Ut.set(S,Rs(Ut.get(S)||null,s,i,c,g,v)),!0;case"gotpointercapture":return S=v.pointerId,ao.set(S,Rs(ao.get(S)||null,s,i,c,g,v)),!0}return!1}function Ic(s){var i=Ei(s.target);if(i!==null){var c=Hr(i);if(c!==null){if(i=c.tag,i===13){if(i=Un(c),i!==null){s.blockedOn=i,zo(s.priority,function(){Lc(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $o(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=oo(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var g=new c.constructor(c.type,c);Kt=g,c.target.dispatchEvent(g),Kt=null}else return i=nl(c),i!==null&&Fl(i),s.blockedOn=c,!1;i.shift()}return!0}function io(s,i,c){$o(s)&&c.delete(i)}function Il(){Ha=!1,Ca!==null&&$o(Ca)&&(Ca=null),xs!==null&&$o(xs)&&(xs=null),Ks!==null&&$o(Ks)&&(Ks=null),Ut.forEach(io),ao.forEach(io)}function da(s,i){s.blockedOn===i&&(s.blockedOn=null,Ha||(Ha=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Il)))}function _a(s){function i(v){return da(v,s)}if(0<ca.length){da(ca[0],s);for(var c=1;c<ca.length;c++){var g=ca[c];g.blockedOn===s&&(g.blockedOn=null)}}for(Ca!==null&&da(Ca,s),xs!==null&&da(xs,s),Ks!==null&&da(Ks,s),Ut.forEach(i),ao.forEach(i),c=0;c<Pa.length;c++)g=Pa[c],g.blockedOn===s&&(g.blockedOn=null);for(;0<Pa.length&&(c=Pa[0],c.blockedOn===null);)Ic(c),c.blockedOn===null&&Pa.shift()}var ua=M.ReactCurrentBatchConfig,Vo=!0;function Tl(s,i,c,g){var v=lr,S=ua.transition;ua.transition=null;try{lr=1,Ga(s,i,c,g)}finally{lr=v,ua.transition=S}}function Ol(s,i,c,g){var v=lr,S=ua.transition;ua.transition=null;try{lr=4,Ga(s,i,c,g)}finally{lr=v,ua.transition=S}}function Ga(s,i,c,g){if(Vo){var v=oo(s,i,c,g);if(v===null)Wl(s,i,g,Da,c),Fc(s,g);else if(Wa(v,s,i,c,g))g.stopPropagation();else if(Fc(s,g),i&4&&-1<Ud.indexOf(s)){for(;v!==null;){var S=nl(v);if(S!==null&&qo(S),S=oo(s,i,c,g),S===null&&Wl(s,i,g,Da,c),S===v)break;v=S}v!==null&&g.stopPropagation()}else Wl(s,i,g,null,c)}}var Da=null;function oo(s,i,c,g){if(Da=null,s=qt(g),s=Ei(s),s!==null)if(i=Hr(s),i===null)s=null;else if(c=i.tag,c===13){if(s=Un(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Da=s,null}function lo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ac()){case Mo:return 1;case Ts:return 4;case Ni:case Cc:return 16;case Bo:return 536870912;default:return 16}default:return 16}}var Ys=null,Ka=null,ji=null;function Ho(){if(ji)return ji;var s,i=Ka,c=i.length,g,v="value"in Ys?Ys.value:Ys.textContent,S=v.length;for(s=0;s<c&&i[s]===v[s];s++);var q=c-s;for(g=1;g<=q&&i[c-g]===v[S-g];g++);return ji=v.slice(s,1<g?1-g:void 0)}function Gn(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Ms(){return!0}function w(){return!1}function R(s){function i(c,g,v,S,q){this._reactName=c,this._targetInst=v,this.type=g,this.nativeEvent=S,this.target=q,this.currentTarget=null;for(var me in s)s.hasOwnProperty(me)&&(c=s[me],this[me]=c?c(S):S[me]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ms:w,this.isPropagationStopped=w,this}return Se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),i}var ce={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ye=R(ce),Ae=Se({},ce,{view:0,detail:0}),Ve=R(Ae),Qe,xt,bt,Tt=Se({},Ae,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bt&&(bt&&s.type==="mousemove"?(Qe=s.screenX-bt.screenX,xt=s.screenY-bt.screenY):xt=Qe=0,bt=s),Qe)},movementY:function(s){return"movementY"in s?s.movementY:xt}}),Wt=R(Tt),dr=Se({},Tt,{dataTransfer:0}),qr=R(dr),dn=Se({},Ae,{relatedTarget:0}),pr=R(dn),vn=Se({},ce,{animationName:0,elapsedTime:0,pseudoElement:0}),un=R(vn),qn=Se({},ce,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ya=R(qn),ki=Se({},ce,{data:0}),Tc=R(ki),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},co={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rl(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=ha[s])?!!i[s]:!1}function Si(){return Rl}var Ai=Se({},Ae,{key:function(s){if(s.key){var i=Oc[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Gn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?co[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(s){return s.type==="keypress"?Gn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ln=R(Ai),Ja=Se({},Tt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),La=R(Ja),Wo=Se({},Ae,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),Ml=R(Wo),ss=Se({},ce,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rc=R(ss),Go=Se({},Tt,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Mc=R(Go),wn=[9,13,27,32],ys=u&&"CompositionEvent"in window,Qa=null;u&&"documentMode"in document&&(Qa=document.documentMode);var Bl=u&&"TextEvent"in window&&!Qa,Xa=u&&(!ys||Qa&&8<Qa&&11>=Qa),uo=" ",as=!1;function is(s,i){switch(s){case"keyup":return wn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ci(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var os=!1;function Pi(s,i){switch(s){case"compositionend":return Ci(i);case"keypress":return i.which!==32?null:(as=!0,uo);case"textInput":return s=i.data,s===uo&&as?null:s;default:return null}}function Ul(s,i){if(os)return s==="compositionend"||!ys&&is(s,i)?(s=Ho(),ji=Ka=Ys=null,os=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Xa&&i.locale!=="ko"?null:i.data;default:return null}}var _i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!_i[s.type]:i==="textarea"}function Bc(s,i,c,g){kt(g),i=Hc(i,"onChange"),0<i.length&&(c=new ye("onChange","change",null,c,g),s.push({event:c,listeners:i}))}var bs=null,vs=null;function Ko(s){Vl(s,0)}function Di(s){var i=bo(s);if(Pe(i))return s}function Yo(s,i){if(s==="change")return i}var ho=!1;if(u){var Za;if(u){var ei="oninput"in document;if(!ei){var Ea=document.createElement("div");Ea.setAttribute("oninput","return;"),ei=typeof Ea.oninput=="function"}Za=ei}else Za=!1;ho=Za&&(!document.documentMode||9<document.documentMode)}function Jo(){bs&&(bs.detachEvent("onpropertychange",ws),vs=bs=null)}function ws(s){if(s.propertyName==="value"&&Di(vs)){var i=[];Bc(i,vs,s,qt(s)),ht(Ko,i)}}function Fa(s,i,c){s==="focusin"?(Jo(),bs=i,vs=c,bs.attachEvent("onpropertychange",ws)):s==="focusout"&&Jo()}function Pr(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Di(vs)}function _r(s,i){if(s==="click")return Di(i)}function Zr(s,i){if(s==="input"||s==="change")return Di(i)}function en(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Nn=typeof Object.is=="function"?Object.is:en;function Ia(s,i){if(Nn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),g=Object.keys(i);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var v=c[g];if(!h.call(i,v)||!Nn(s[v],i[v]))return!1}return!0}function fa(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qo(s,i){var c=fa(s);s=0;for(var g;c;){if(c.nodeType===3){if(g=s+c.textContent.length,s<=i&&g>=i)return{node:c,offset:i-s};s=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=fa(c)}}function qd(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?qd(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function zd(){for(var s=window,i=Ge();i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=Ge(s.document)}return i}function Uc(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function th(s){var i=zd(),c=s.focusedElem,g=s.selectionRange;if(i!==c&&c&&c.ownerDocument&&qd(c.ownerDocument.documentElement,c)){if(g!==null&&Uc(c)){if(i=g.start,s=g.end,s===void 0&&(s=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(s,c.value.length);else if(s=(i=c.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var v=c.textContent.length,S=Math.min(g.start,v);g=g.end===void 0?S:Math.min(g.end,v),!s.extend&&S>g&&(v=g,g=S,S=v),v=Qo(c,S);var q=Qo(c,g);v&&q&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==q.node||s.focusOffset!==q.offset)&&(i=i.createRange(),i.setStart(v.node,v.offset),s.removeAllRanges(),S>g?(s.addRange(i),s.extend(q.node,q.offset)):(i.setEnd(q.node,q.offset),s.addRange(i)))}}for(i=[],s=c;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)s=i[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var rh=u&&"documentMode"in document&&11>=document.documentMode,fo=null,qc=null,Xo=null,zc=!1;function $d(s,i,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zc||fo==null||fo!==Ge(g)||(g=fo,"selectionStart"in g&&Uc(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Xo&&Ia(Xo,g)||(Xo=g,g=Hc(qc,"onSelect"),0<g.length&&(i=new ye("onSelect","select",null,i,c),s.push({event:i,listeners:g}),i.target=fo)))}function ql(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var mo={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},po={},Vd={};u&&(Vd=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function zl(s){if(po[s])return po[s];if(!mo[s])return s;var i=mo[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in Vd)return po[s]=i[c];return s}var Hd=zl("animationend"),Wd=zl("animationiteration"),Gd=zl("animationstart"),Kd=zl("transitionend"),Yd=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(s,i){Yd.set(s,i),l(i,[s])}for(var Zo=0;Zo<Jd.length;Zo++){var ls=Jd[Zo],Js=ls.toLowerCase(),$c=ls[0].toUpperCase()+ls.slice(1);Ta(Js,"on"+$c)}Ta(Hd,"onAnimationEnd"),Ta(Wd,"onAnimationIteration"),Ta(Gd,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Kd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function $l(s,i,c){var g=s.type||"unknown-event";s.currentTarget=c,ns(g,i,void 0,s),s.currentTarget=null}function Vl(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var g=s[c],v=g.event;g=g.listeners;e:{var S=void 0;if(i)for(var q=g.length-1;0<=q;q--){var me=g[q],ve=me.instance,Oe=me.currentTarget;if(me=me.listener,ve!==S&&v.isPropagationStopped())break e;$l(v,me,Oe),S=ve}else for(q=0;q<g.length;q++){if(me=g[q],ve=me.instance,Oe=me.currentTarget,me=me.listener,ve!==S&&v.isPropagationStopped())break e;$l(v,me,Oe),S=ve}}}if(tr)throw s=Bn,tr=!1,Bn=null,s}function jr(s,i){var c=i[js];c===void 0&&(c=i[js]=new Set);var g=s+"__bubble";c.has(g)||(Hl(i,s,2,!1),c.add(g))}function Vc(s,i,c){var g=0;i&&(g|=4),Hl(c,s,g,i)}var el="_reactListening"+Math.random().toString(36).slice(2);function go(s){if(!s[el]){s[el]=!0,a.forEach(function(c){c!=="selectionchange"&&(nh.has(c)||Vc(c,!1,s),Vc(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[el]||(i[el]=!0,Vc("selectionchange",!1,i))}}function Hl(s,i,c,g){switch(lo(i)){case 1:var v=Tl;break;case 4:v=Ol;break;default:v=Ga}c=v.bind(null,i,c,s),v=void 0,!Lr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),g?v!==void 0?s.addEventListener(i,c,{capture:!0,passive:v}):s.addEventListener(i,c,!0):v!==void 0?s.addEventListener(i,c,{passive:v}):s.addEventListener(i,c,!1)}function Wl(s,i,c,g,v){var S=g;if((i&1)===0&&(i&2)===0&&g!==null)e:for(;;){if(g===null)return;var q=g.tag;if(q===3||q===4){var me=g.stateNode.containerInfo;if(me===v||me.nodeType===8&&me.parentNode===v)break;if(q===4)for(q=g.return;q!==null;){var ve=q.tag;if((ve===3||ve===4)&&(ve=q.stateNode.containerInfo,ve===v||ve.nodeType===8&&ve.parentNode===v))return;q=q.return}for(;me!==null;){if(q=Ei(me),q===null)return;if(ve=q.tag,ve===5||ve===6){g=S=q;continue e}me=me.parentNode}}g=g.return}ht(function(){var Oe=S,tt=qt(c),rt=[];e:{var et=Yd.get(s);if(et!==void 0){var ft=ye,Nt=s;switch(s){case"keypress":if(Gn(c)===0)break e;case"keydown":case"keyup":ft=Ln;break;case"focusin":Nt="focus",ft=pr;break;case"focusout":Nt="blur",ft=pr;break;case"beforeblur":case"afterblur":ft=pr;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=qr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Ml;break;case Hd:case Wd:case Gd:ft=un;break;case Kd:ft=Rc;break;case"scroll":ft=Ve;break;case"wheel":ft=Mc;break;case"copy":case"cut":case"paste":ft=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=La}var St=(i&4)!==0,Sn=!St&&s==="scroll",Ee=St?et!==null?et+"Capture":null:et;St=[];for(var ke=Oe,Ie;ke!==null;){Ie=ke;var nt=Ie.stateNode;if(Ie.tag===5&&nt!==null&&(Ie=nt,Ee!==null&&(nt=cr(ke,Ee),nt!=null&&St.push(Gl(ke,nt,Ie)))),Sn)break;ke=ke.return}0<St.length&&(et=new ft(et,Nt,null,c,tt),rt.push({event:et,listeners:St}))}}if((i&7)===0){e:{if(et=s==="mouseover"||s==="pointerover",ft=s==="mouseout"||s==="pointerout",et&&c!==Kt&&(Nt=c.relatedTarget||c.fromElement)&&(Ei(Nt)||Nt[Kn]))break e;if((ft||et)&&(et=tt.window===tt?tt:(et=tt.ownerDocument)?et.defaultView||et.parentWindow:window,ft?(Nt=c.relatedTarget||c.toElement,ft=Oe,Nt=Nt?Ei(Nt):null,Nt!==null&&(Sn=Hr(Nt),Nt!==Sn||Nt.tag!==5&&Nt.tag!==6)&&(Nt=null)):(ft=null,Nt=Oe),ft!==Nt)){if(St=Wt,nt="onMouseLeave",Ee="onMouseEnter",ke="mouse",(s==="pointerout"||s==="pointerover")&&(St=La,nt="onPointerLeave",Ee="onPointerEnter",ke="pointer"),Sn=ft==null?et:bo(ft),Ie=Nt==null?et:bo(Nt),et=new St(nt,ke+"leave",ft,c,tt),et.target=Sn,et.relatedTarget=Ie,nt=null,Ei(tt)===Oe&&(St=new St(Ee,ke+"enter",Nt,c,tt),St.target=Ie,St.relatedTarget=Sn,nt=St),Sn=nt,ft&&Nt)t:{for(St=ft,Ee=Nt,ke=0,Ie=St;Ie;Ie=xo(Ie))ke++;for(Ie=0,nt=Ee;nt;nt=xo(nt))Ie++;for(;0<ke-Ie;)St=xo(St),ke--;for(;0<Ie-ke;)Ee=xo(Ee),Ie--;for(;ke--;){if(St===Ee||Ee!==null&&St===Ee.alternate)break t;St=xo(St),Ee=xo(Ee)}St=null}else St=null;ft!==null&&sh(rt,et,ft,St,!1),Nt!==null&&Sn!==null&&sh(rt,Sn,Nt,St,!0)}}e:{if(et=Oe?bo(Oe):window,ft=et.nodeName&&et.nodeName.toLowerCase(),ft==="select"||ft==="input"&&et.type==="file")var _t=Yo;else if(Wr(et))if(ho)_t=Zr;else{_t=Pr;var Ot=Fa}else(ft=et.nodeName)&&ft.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(_t=_r);if(_t&&(_t=_t(s,Oe))){Bc(rt,_t,c,tt);break e}Ot&&Ot(s,et,Oe),s==="focusout"&&(Ot=et._wrapperState)&&Ot.controlled&&et.type==="number"&&$e(et,"number",et.value)}switch(Ot=Oe?bo(Oe):window,s){case"focusin":(Wr(Ot)||Ot.contentEditable==="true")&&(fo=Ot,qc=Oe,Xo=null);break;case"focusout":Xo=qc=fo=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,$d(rt,c,tt);break;case"selectionchange":if(rh)break;case"keydown":case"keyup":$d(rt,c,tt)}var Rt;if(ys)e:{switch(s){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else os?is(s,c)&&($t="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&($t="onCompositionStart");$t&&(Xa&&c.locale!=="ko"&&(os||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&os&&(Rt=Ho()):(Ys=tt,Ka="value"in Ys?Ys.value:Ys.textContent,os=!0)),Ot=Hc(Oe,$t),0<Ot.length&&($t=new Tc($t,s,null,c,tt),rt.push({event:$t,listeners:Ot}),Rt?$t.data=Rt:(Rt=Ci(c),Rt!==null&&($t.data=Rt)))),(Rt=Bl?Pi(s,c):Ul(s,c))&&(Oe=Hc(Oe,"onBeforeInput"),0<Oe.length&&(tt=new Tc("onBeforeInput","beforeinput",null,c,tt),rt.push({event:tt,listeners:Oe}),tt.data=Rt))}Vl(rt,i)})}function Gl(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Hc(s,i){for(var c=i+"Capture",g=[];s!==null;){var v=s,S=v.stateNode;v.tag===5&&S!==null&&(v=S,S=cr(s,c),S!=null&&g.unshift(Gl(s,S,v)),S=cr(s,i),S!=null&&g.push(Gl(s,S,v))),s=s.return}return g}function xo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function sh(s,i,c,g,v){for(var S=i._reactName,q=[];c!==null&&c!==g;){var me=c,ve=me.alternate,Oe=me.stateNode;if(ve!==null&&ve===g)break;me.tag===5&&Oe!==null&&(me=Oe,v?(ve=cr(c,S),ve!=null&&q.unshift(Gl(c,ve,me))):v||(ve=cr(c,S),ve!=null&&q.push(Gl(c,ve,me)))),c=c.return}q.length!==0&&s.push({event:i,listeners:q})}var om=/\r\n?/g,lm=/\u0000|\uFFFD/g;function ah(s){return(typeof s=="string"?s:""+s).replace(om,`
`).replace(lm,"")}function Wc(s,i,c){if(i=ah(i),ah(s)!==i&&c)throw Error(n(425))}function tl(){}var Kl=null,yo=null;function Qd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,ih=typeof clearTimeout=="function"?clearTimeout:void 0,oh=typeof Promise=="function"?Promise:void 0,cm=typeof queueMicrotask=="function"?queueMicrotask:typeof oh<"u"?function(s){return oh.resolve(null).then(s).catch(dm)}:Xd;function dm(s){setTimeout(function(){throw s})}function Zd(s,i){var c=i,g=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(g===0){s.removeChild(v),_a(i);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=v}while(c);_a(i)}function cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function Qs(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Oa="__reactFiber$"+Ns,rl="__reactProps$"+Ns,Kn="__reactContainer$"+Ns,js="__reactEvents$"+Ns,um="__reactListeners$"+Ns,hm="__reactHandles$"+Ns;function Ei(s){var i=s[Oa];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Kn]||c[Oa]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=Qs(s);s!==null;){if(c=s[Oa])return c;s=Qs(s)}return i}s=c,c=s.parentNode}return null}function nl(s){return s=s[Oa]||s[Kn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function bo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Yl(s){return s[rl]||null}var eu=[],ti=-1;function ma(s){return{current:s}}function xr(s){0>ti||(s.current=eu[ti],eu[ti]=null,ti--)}function br(s,i){ti++,eu[ti]=s.current,s.current=i}var Fi={},zn=ma(Fi),ks=ma(!1),vo=Fi;function sl(s,i){var c=s.type.contextTypes;if(!c)return Fi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===i)return g.__reactInternalMemoizedMaskedChildContext;var v={},S;for(S in c)v[S]=i[S];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=v),v}function Ss(s){return s=s.childContextTypes,s!=null}function Gc(){xr(ks),xr(zn)}function lh(s,i,c){if(zn.current!==Fi)throw Error(n(168));br(zn,i),br(ks,c)}function tu(s,i,c){var g=s.stateNode;if(i=i.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var v in g)if(!(v in i))throw Error(n(108,fe(s)||"Unknown",v));return Se({},c,g)}function wo(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fi,vo=zn.current,br(zn,s),br(ks,ks.current),!0}function ch(s,i,c){var g=s.stateNode;if(!g)throw Error(n(169));c?(s=tu(s,i,vo),g.__reactInternalMemoizedMergedChildContext=s,xr(ks),xr(zn),br(zn,s)):xr(ks),br(ks,c)}var ri=null,Jl=!1,f=!1;function x(s){ri===null?ri=[s]:ri.push(s)}function k(s){Jl=!0,x(s)}function _(){if(!f&&ri!==null){f=!0;var s=0,i=lr;try{var c=ri;for(lr=1;s<c.length;s++){var g=c[s];do g=g(!0);while(g!==null)}ri=null,Jl=!1}catch(v){throw ri!==null&&(ri=ri.slice(s+1)),Xi(Mo,_),v}finally{lr=i,f=!1}}return null}var B=[],z=0,G=null,X=0,Z=[],ae=0,be=null,Le=1,oe="";function Ne(s,i){B[z++]=X,B[z++]=G,G=s,X=i}function _e(s,i,c){Z[ae++]=Le,Z[ae++]=oe,Z[ae++]=be,be=s;var g=Le;s=oe;var v=32-Wn(g)-1;g&=~(1<<v),c+=1;var S=32-Wn(i)+v;if(30<S){var q=v-v%5;S=(g&(1<<q)-1).toString(32),g>>=q,v-=q,Le=1<<32-Wn(i)+v|c<<v|g,oe=S+s}else Le=1<<S|c<<v|g,oe=s}function qe(s){s.return!==null&&(Ne(s,1),_e(s,1,0))}function Fe(s){for(;s===G;)G=B[--z],B[z]=null,X=B[--z],B[z]=null;for(;s===be;)be=Z[--ae],Z[ae]=null,oe=Z[--ae],Z[ae]=null,Le=Z[--ae],Z[ae]=null}var Re=null,Be=null,We=!1,Ke=null;function At(s,i){var c=qa(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=s,i=s.deletions,i===null?(s.deletions=[c],s.flags|=16):i.push(c)}function pt(s,i){switch(s.tag){case 5:var c=s.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,Re=s,Be=cs(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,Re=s,Be=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=be!==null?{id:Le,overflow:oe}:null,s.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=qa(18,null,null,0),c.stateNode=i,c.return=s,s.child=c,Re=s,Be=null,!0):!1;default:return!1}}function Gt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function vt(s){if(We){var i=Be;if(i){var c=i;if(!pt(s,i)){if(Gt(s))throw Error(n(418));i=cs(c.nextSibling);var g=Re;i&&pt(s,i)?At(g,c):(s.flags=s.flags&-4097|2,We=!1,Re=s)}}else{if(Gt(s))throw Error(n(418));s.flags=s.flags&-4097|2,We=!1,Re=s}}}function rr(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Re=s}function Gr(s){if(s!==Re)return!1;if(!We)return rr(s),We=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Qd(s.type,s.memoizedProps)),i&&(i=Be)){if(Gt(s))throw Yt(),Error(n(418));for(;i;)At(s,i),i=cs(i.nextSibling)}if(rr(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(i===0){Be=cs(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}s=s.nextSibling}Be=null}}else Be=Re?cs(s.stateNode.nextSibling):null;return!0}function Yt(){for(var s=Be;s;)s=cs(s.nextSibling)}function gt(){Be=Re=null,We=!1}function st(s){Ke===null?Ke=[s]:Ke.push(s)}var tn=M.ReactCurrentBatchConfig;function zt(s,i,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var g=c.stateNode}if(!g)throw Error(n(147,s));var v=g,S=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(q){var me=v.refs;q===null?delete me[S]:me[S]=q},i._stringRef=S,i)}if(typeof s!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,s))}return s}function er(s,i){throw s=Object.prototype.toString.call(i),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function Dr(s){var i=s._init;return i(s._payload)}function En(s){function i(Ee,ke){if(s){var Ie=Ee.deletions;Ie===null?(Ee.deletions=[ke],Ee.flags|=16):Ie.push(ke)}}function c(Ee,ke){if(!s)return null;for(;ke!==null;)i(Ee,ke),ke=ke.sibling;return null}function g(Ee,ke){for(Ee=new Map;ke!==null;)ke.key!==null?Ee.set(ke.key,ke):Ee.set(ke.index,ke),ke=ke.sibling;return Ee}function v(Ee,ke){return Ee=ml(Ee,ke),Ee.index=0,Ee.sibling=null,Ee}function S(Ee,ke,Ie){return Ee.index=Ie,s?(Ie=Ee.alternate,Ie!==null?(Ie=Ie.index,Ie<ke?(Ee.flags|=2,ke):Ie):(Ee.flags|=2,ke)):(Ee.flags|=1048576,ke)}function q(Ee){return s&&Ee.alternate===null&&(Ee.flags|=2),Ee}function me(Ee,ke,Ie,nt){return ke===null||ke.tag!==6?(ke=qm(Ie,Ee.mode,nt),ke.return=Ee,ke):(ke=v(ke,Ie),ke.return=Ee,ke)}function ve(Ee,ke,Ie,nt){var _t=Ie.type;return _t===J?tt(Ee,ke,Ie.props.children,nt,Ie.key):ke!==null&&(ke.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===se&&Dr(_t)===ke.type)?(nt=v(ke,Ie.props),nt.ref=zt(Ee,ke,Ie),nt.return=Ee,nt):(nt=_h(Ie.type,Ie.key,Ie.props,null,Ee.mode,nt),nt.ref=zt(Ee,ke,Ie),nt.return=Ee,nt)}function Oe(Ee,ke,Ie,nt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Ie.containerInfo||ke.stateNode.implementation!==Ie.implementation?(ke=zm(Ie,Ee.mode,nt),ke.return=Ee,ke):(ke=v(ke,Ie.children||[]),ke.return=Ee,ke)}function tt(Ee,ke,Ie,nt,_t){return ke===null||ke.tag!==7?(ke=sc(Ie,Ee.mode,nt,_t),ke.return=Ee,ke):(ke=v(ke,Ie),ke.return=Ee,ke)}function rt(Ee,ke,Ie){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=qm(""+ke,Ee.mode,Ie),ke.return=Ee,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case U:return Ie=_h(ke.type,ke.key,ke.props,null,Ee.mode,Ie),Ie.ref=zt(Ee,null,ke),Ie.return=Ee,Ie;case Q:return ke=zm(ke,Ee.mode,Ie),ke.return=Ee,ke;case se:var nt=ke._init;return rt(Ee,nt(ke._payload),Ie)}if(le(ke)||ge(ke))return ke=sc(ke,Ee.mode,Ie,null),ke.return=Ee,ke;er(Ee,ke)}return null}function et(Ee,ke,Ie,nt){var _t=ke!==null?ke.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return _t!==null?null:me(Ee,ke,""+Ie,nt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case U:return Ie.key===_t?ve(Ee,ke,Ie,nt):null;case Q:return Ie.key===_t?Oe(Ee,ke,Ie,nt):null;case se:return _t=Ie._init,et(Ee,ke,_t(Ie._payload),nt)}if(le(Ie)||ge(Ie))return _t!==null?null:tt(Ee,ke,Ie,nt,null);er(Ee,Ie)}return null}function ft(Ee,ke,Ie,nt,_t){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return Ee=Ee.get(Ie)||null,me(ke,Ee,""+nt,_t);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case U:return Ee=Ee.get(nt.key===null?Ie:nt.key)||null,ve(ke,Ee,nt,_t);case Q:return Ee=Ee.get(nt.key===null?Ie:nt.key)||null,Oe(ke,Ee,nt,_t);case se:var Ot=nt._init;return ft(Ee,ke,Ie,Ot(nt._payload),_t)}if(le(nt)||ge(nt))return Ee=Ee.get(Ie)||null,tt(ke,Ee,nt,_t,null);er(ke,nt)}return null}function Nt(Ee,ke,Ie,nt){for(var _t=null,Ot=null,Rt=ke,$t=ke=0,Zn=null;Rt!==null&&$t<Ie.length;$t++){Rt.index>$t?(Zn=Rt,Rt=null):Zn=Rt.sibling;var gr=et(Ee,Rt,Ie[$t],nt);if(gr===null){Rt===null&&(Rt=Zn);break}s&&Rt&&gr.alternate===null&&i(Ee,Rt),ke=S(gr,ke,$t),Ot===null?_t=gr:Ot.sibling=gr,Ot=gr,Rt=Zn}if($t===Ie.length)return c(Ee,Rt),We&&Ne(Ee,$t),_t;if(Rt===null){for(;$t<Ie.length;$t++)Rt=rt(Ee,Ie[$t],nt),Rt!==null&&(ke=S(Rt,ke,$t),Ot===null?_t=Rt:Ot.sibling=Rt,Ot=Rt);return We&&Ne(Ee,$t),_t}for(Rt=g(Ee,Rt);$t<Ie.length;$t++)Zn=ft(Rt,Ee,$t,Ie[$t],nt),Zn!==null&&(s&&Zn.alternate!==null&&Rt.delete(Zn.key===null?$t:Zn.key),ke=S(Zn,ke,$t),Ot===null?_t=Zn:Ot.sibling=Zn,Ot=Zn);return s&&Rt.forEach(function(pl){return i(Ee,pl)}),We&&Ne(Ee,$t),_t}function St(Ee,ke,Ie,nt){var _t=ge(Ie);if(typeof _t!="function")throw Error(n(150));if(Ie=_t.call(Ie),Ie==null)throw Error(n(151));for(var Ot=_t=null,Rt=ke,$t=ke=0,Zn=null,gr=Ie.next();Rt!==null&&!gr.done;$t++,gr=Ie.next()){Rt.index>$t?(Zn=Rt,Rt=null):Zn=Rt.sibling;var pl=et(Ee,Rt,gr.value,nt);if(pl===null){Rt===null&&(Rt=Zn);break}s&&Rt&&pl.alternate===null&&i(Ee,Rt),ke=S(pl,ke,$t),Ot===null?_t=pl:Ot.sibling=pl,Ot=pl,Rt=Zn}if(gr.done)return c(Ee,Rt),We&&Ne(Ee,$t),_t;if(Rt===null){for(;!gr.done;$t++,gr=Ie.next())gr=rt(Ee,gr.value,nt),gr!==null&&(ke=S(gr,ke,$t),Ot===null?_t=gr:Ot.sibling=gr,Ot=gr);return We&&Ne(Ee,$t),_t}for(Rt=g(Ee,Rt);!gr.done;$t++,gr=Ie.next())gr=ft(Rt,Ee,$t,gr.value,nt),gr!==null&&(s&&gr.alternate!==null&&Rt.delete(gr.key===null?$t:gr.key),ke=S(gr,ke,$t),Ot===null?_t=gr:Ot.sibling=gr,Ot=gr);return s&&Rt.forEach(function(ow){return i(Ee,ow)}),We&&Ne(Ee,$t),_t}function Sn(Ee,ke,Ie,nt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===J&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case U:e:{for(var _t=Ie.key,Ot=ke;Ot!==null;){if(Ot.key===_t){if(_t=Ie.type,_t===J){if(Ot.tag===7){c(Ee,Ot.sibling),ke=v(Ot,Ie.props.children),ke.return=Ee,Ee=ke;break e}}else if(Ot.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===se&&Dr(_t)===Ot.type){c(Ee,Ot.sibling),ke=v(Ot,Ie.props),ke.ref=zt(Ee,Ot,Ie),ke.return=Ee,Ee=ke;break e}c(Ee,Ot);break}else i(Ee,Ot);Ot=Ot.sibling}Ie.type===J?(ke=sc(Ie.props.children,Ee.mode,nt,Ie.key),ke.return=Ee,Ee=ke):(nt=_h(Ie.type,Ie.key,Ie.props,null,Ee.mode,nt),nt.ref=zt(Ee,ke,Ie),nt.return=Ee,Ee=nt)}return q(Ee);case Q:e:{for(Ot=Ie.key;ke!==null;){if(ke.key===Ot)if(ke.tag===4&&ke.stateNode.containerInfo===Ie.containerInfo&&ke.stateNode.implementation===Ie.implementation){c(Ee,ke.sibling),ke=v(ke,Ie.children||[]),ke.return=Ee,Ee=ke;break e}else{c(Ee,ke);break}else i(Ee,ke);ke=ke.sibling}ke=zm(Ie,Ee.mode,nt),ke.return=Ee,Ee=ke}return q(Ee);case se:return Ot=Ie._init,Sn(Ee,ke,Ot(Ie._payload),nt)}if(le(Ie))return Nt(Ee,ke,Ie,nt);if(ge(Ie))return St(Ee,ke,Ie,nt);er(Ee,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ke!==null&&ke.tag===6?(c(Ee,ke.sibling),ke=v(ke,Ie),ke.return=Ee,Ee=ke):(c(Ee,ke),ke=qm(Ie,Ee.mode,nt),ke.return=Ee,Ee=ke),q(Ee)):c(Ee,ke)}return Sn}var hn=En(!0),zr=En(!1),jn=ma(null),Fn=null,Rr=null,ir=null;function ur(){ir=Rr=Fn=null}function Mr(s){var i=jn.current;xr(jn),s._currentValue=i}function hr(s,i,c){for(;s!==null;){var g=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,g!==null&&(g.childLanes|=i)):g!==null&&(g.childLanes&i)!==i&&(g.childLanes|=i),s===c)break;s=s.return}}function Kr(s,i){Fn=s,ir=Rr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(Zs=!0),s.firstContext=null)}function Yr(s){var i=s._currentValue;if(ir!==s)if(s={context:s,memoizedValue:i,next:null},Rr===null){if(Fn===null)throw Error(n(308));Rr=s,Fn.dependencies={lanes:0,firstContext:s}}else Rr=Rr.next=s;return i}var kr=null;function Yn(s){kr===null?kr=[s]:kr.push(s)}function vr(s,i,c,g){var v=i.interleaved;return v===null?(c.next=c,Yn(i)):(c.next=v.next,v.next=c),i.interleaved=c,Sr(s,g)}function Sr(s,i){s.lanes|=i;var c=s.alternate;for(c!==null&&(c.lanes|=i),c=s,s=s.return;s!==null;)s.childLanes|=i,c=s.alternate,c!==null&&(c.childLanes|=i),c=s,s=s.return;return c.tag===3?c.stateNode:null}var fn=!1;function $n(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function rn(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function nn(s,i,c){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(fr&2)!==0){var v=g.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),g.pending=i,Sr(s,c)}return v=g.interleaved,v===null?(i.next=i,Yn(g)):(i.next=v.next,v.next=i),g.interleaved=i,Sr(s,c)}function Jn(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var g=i.lanes;g&=s.pendingLanes,c|=g,i.lanes=c,Uo(s,c)}}function Ar(s,i){var c=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var v=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var q={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};S===null?v=S=q:S=S.next=q,c=c.next}while(c!==null);S===null?v=S=i:S=S.next=i}else v=S=i;c={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:g.shared,effects:g.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}function Qn(s,i,c,g){var v=s.updateQueue;fn=!1;var S=v.firstBaseUpdate,q=v.lastBaseUpdate,me=v.shared.pending;if(me!==null){v.shared.pending=null;var ve=me,Oe=ve.next;ve.next=null,q===null?S=Oe:q.next=Oe,q=ve;var tt=s.alternate;tt!==null&&(tt=tt.updateQueue,me=tt.lastBaseUpdate,me!==q&&(me===null?tt.firstBaseUpdate=Oe:me.next=Oe,tt.lastBaseUpdate=ve))}if(S!==null){var rt=v.baseState;q=0,tt=Oe=ve=null,me=S;do{var et=me.lane,ft=me.eventTime;if((g&et)===et){tt!==null&&(tt=tt.next={eventTime:ft,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var Nt=s,St=me;switch(et=i,ft=c,St.tag){case 1:if(Nt=St.payload,typeof Nt=="function"){rt=Nt.call(ft,rt,et);break e}rt=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=St.payload,et=typeof Nt=="function"?Nt.call(ft,rt,et):Nt,et==null)break e;rt=Se({},rt,et);break e;case 2:fn=!0}}me.callback!==null&&me.lane!==0&&(s.flags|=64,et=v.effects,et===null?v.effects=[me]:et.push(me))}else ft={eventTime:ft,lane:et,tag:me.tag,payload:me.payload,callback:me.callback,next:null},tt===null?(Oe=tt=ft,ve=rt):tt=tt.next=ft,q|=et;if(me=me.next,me===null){if(me=v.shared.pending,me===null)break;et=me,me=et.next,et.next=null,v.lastBaseUpdate=et,v.shared.pending=null}}while(!0);if(tt===null&&(ve=rt),v.baseState=ve,v.firstBaseUpdate=Oe,v.lastBaseUpdate=tt,i=v.shared.interleaved,i!==null){v=i;do q|=v.lane,v=v.next;while(v!==i)}else S===null&&(v.shared.lanes=0);ec|=q,s.lanes=q,s.memoizedState=rt}}function Xs(s,i,c){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var g=s[i],v=g.callback;if(v!==null){if(g.callback=null,g=c,typeof v!="function")throw Error(n(191,v));v.call(g)}}}var pa={},In=ma(pa),sn=ma(pa),Ii=ma(pa);function ni(s){if(s===pa)throw Error(n(174));return s}function al(s,i){switch(br(Ii,i),br(sn,s),br(In,pa),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:wt(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=wt(i,s)}xr(In),br(In,i)}function Ra(){xr(In),xr(sn),xr(Ii)}function dh(s){ni(Ii.current);var i=ni(In.current),c=wt(i,s.type);i!==c&&(br(sn,s),br(In,c))}function ru(s){sn.current===s&&(xr(In),xr(sn))}var Fr=ma(0);function ga(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var nu=[];function su(){for(var s=0;s<nu.length;s++)nu[s]._workInProgressVersionPrimary=null;nu.length=0}var Kc=M.ReactCurrentDispatcher,Yc=M.ReactCurrentBatchConfig,Ma=0,Br=null,mn=null,an=null,il=!1,si=!1,ol=0,fm=0;function kn(){throw Error(n(321))}function Jc(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Nn(s[c],i[c]))return!1;return!0}function Ql(s,i,c,g,v,S){if(Ma=S,Br=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Kc.current=s===null||s.memoizedState===null?Fv:Iv,s=c(g,v),si){S=0;do{if(si=!1,ol=0,25<=S)throw Error(n(301));S+=1,an=mn=null,i.updateQueue=null,Kc.current=Tv,s=c(g,v)}while(si)}if(Kc.current=ph,i=mn!==null&&mn.next!==null,Ma=0,an=mn=Br=null,il=!1,i)throw Error(n(300));return s}function Ba(){var s=ol!==0;return ol=0,s}function xa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Br.memoizedState=an=s:an=an.next=s,an}function Bs(){if(mn===null){var s=Br.alternate;s=s!==null?s.memoizedState:null}else s=mn.next;var i=an===null?Br.memoizedState:an.next;if(i!==null)an=i,mn=s;else{if(s===null)throw Error(n(310));mn=s,s={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},an===null?Br.memoizedState=an=s:an=an.next=s}return an}function Xl(s,i){return typeof i=="function"?i(s):i}function Qc(s){var i=Bs(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var g=mn,v=g.baseQueue,S=c.pending;if(S!==null){if(v!==null){var q=v.next;v.next=S.next,S.next=q}g.baseQueue=v=S,c.pending=null}if(v!==null){S=v.next,g=g.baseState;var me=q=null,ve=null,Oe=S;do{var tt=Oe.lane;if((Ma&tt)===tt)ve!==null&&(ve=ve.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),g=Oe.hasEagerState?Oe.eagerState:s(g,Oe.action);else{var rt={lane:tt,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ve===null?(me=ve=rt,q=g):ve=ve.next=rt,Br.lanes|=tt,ec|=tt}Oe=Oe.next}while(Oe!==null&&Oe!==S);ve===null?q=g:ve.next=me,Nn(g,i.memoizedState)||(Zs=!0),i.memoizedState=g,i.baseState=q,i.baseQueue=ve,c.lastRenderedState=g}if(s=c.interleaved,s!==null){v=s;do S=v.lane,Br.lanes|=S,ec|=S,v=v.next;while(v!==s)}else v===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ti(s){var i=Bs(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var g=c.dispatch,v=c.pending,S=i.memoizedState;if(v!==null){c.pending=null;var q=v=v.next;do S=s(S,q.action),q=q.next;while(q!==v);Nn(S,i.memoizedState)||(Zs=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),c.lastRenderedState=S}return[S,g]}function uh(){}function au(s,i){var c=Br,g=Bs(),v=i(),S=!Nn(g.memoizedState,v);if(S&&(g.memoizedState=v,Zs=!0),g=g.queue,ed(fh.bind(null,c,g,s),[s]),g.getSnapshot!==i||S||an!==null&&an.memoizedState.tag&1){if(c.flags|=2048,Us(9,iu.bind(null,c,g,v,i),void 0,null),Xn===null)throw Error(n(349));(Ma&30)!==0||hh(c,i,v)}return v}function hh(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=Br.updateQueue,i===null?(i={lastEffect:null,stores:null},Br.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function iu(s,i,c,g){i.value=c,i.getSnapshot=g,ll(i)&&Xc(s)}function fh(s,i,c){return c(function(){ll(i)&&Xc(s)})}function ll(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Nn(s,c)}catch{return!0}}function Xc(s){var i=Sr(s,1);i!==null&&ci(i,s,1,-1)}function Zl(s){var i=xa();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:s},i.queue=s,s=s.dispatch=Ev.bind(null,Br,s),[i.memoizedState,s]}function Us(s,i,c,g){return s={tag:s,create:i,destroy:c,deps:g,next:null},i=Br.updateQueue,i===null?(i={lastEffect:null,stores:null},Br.updateQueue=i,i.lastEffect=s.next=s):(c=i.lastEffect,c===null?i.lastEffect=s.next=s:(g=c.next,c.next=s,s.next=g,i.lastEffect=s)),s}function ai(){return Bs().memoizedState}function ya(s,i,c,g){var v=xa();Br.flags|=s,v.memoizedState=Us(1|i,c,void 0,g===void 0?null:g)}function No(s,i,c,g){var v=Bs();g=g===void 0?null:g;var S=void 0;if(mn!==null){var q=mn.memoizedState;if(S=q.destroy,g!==null&&Jc(g,q.deps)){v.memoizedState=Us(i,c,S,g);return}}Br.flags|=s,v.memoizedState=Us(1|i,c,S,g)}function Zc(s,i){return ya(8390656,8,s,i)}function ed(s,i){return No(2048,8,s,i)}function mh(s,i){return No(4,2,s,i)}function td(s,i){return No(4,4,s,i)}function rd(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function ng(s,i,c){return c=c!=null?c.concat([s]):null,No(4,4,rd.bind(null,i,s),c)}function mm(){}function sg(s,i){var c=Bs();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Jc(i,g[1])?g[0]:(c.memoizedState=[s,i],s)}function ag(s,i){var c=Bs();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Jc(i,g[1])?g[0]:(s=s(),c.memoizedState=[s,i],s)}function ig(s,i,c){return(Ma&21)===0?(s.baseState&&(s.baseState=!1,Zs=!0),s.memoizedState=c):(Nn(c,i)||(c=Dc(),Br.lanes|=c,ec|=c,s.baseState=!0),i)}function Dv(s,i){var c=lr;lr=c!==0&&4>c?c:4,s(!0);var g=Yc.transition;Yc.transition={};try{s(!1),i()}finally{lr=c,Yc.transition=g}}function og(){return Bs().memoizedState}function Lv(s,i,c){var g=hl(s);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},lg(s))cg(i,c);else if(c=vr(s,i,c,g),c!==null){var v=zs();ci(c,s,g,v),dg(c,i,g)}}function Ev(s,i,c){var g=hl(s),v={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(lg(s))cg(i,v);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var q=i.lastRenderedState,me=S(q,c);if(v.hasEagerState=!0,v.eagerState=me,Nn(me,q)){var ve=i.interleaved;ve===null?(v.next=v,Yn(i)):(v.next=ve.next,ve.next=v),i.interleaved=v;return}}catch{}finally{}c=vr(s,i,v,g),c!==null&&(v=zs(),ci(c,s,g,v),dg(c,i,g))}}function lg(s){var i=s.alternate;return s===Br||i!==null&&i===Br}function cg(s,i){si=il=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function dg(s,i,c){if((c&4194240)!==0){var g=i.lanes;g&=s.pendingLanes,c|=g,i.lanes=c,Uo(s,c)}}var ph={readContext:Yr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},Fv={readContext:Yr,useCallback:function(s,i){return xa().memoizedState=[s,i===void 0?null:i],s},useContext:Yr,useEffect:Zc,useImperativeHandle:function(s,i,c){return c=c!=null?c.concat([s]):null,ya(4194308,4,rd.bind(null,i,s),c)},useLayoutEffect:function(s,i){return ya(4194308,4,s,i)},useInsertionEffect:function(s,i){return ya(4,2,s,i)},useMemo:function(s,i){var c=xa();return i=i===void 0?null:i,s=s(),c.memoizedState=[s,i],s},useReducer:function(s,i,c){var g=xa();return i=c!==void 0?c(i):i,g.memoizedState=g.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},g.queue=s,s=s.dispatch=Lv.bind(null,Br,s),[g.memoizedState,s]},useRef:function(s){var i=xa();return s={current:s},i.memoizedState=s},useState:Zl,useDebugValue:mm,useDeferredValue:function(s){return xa().memoizedState=s},useTransition:function(){var s=Zl(!1),i=s[0];return s=Dv.bind(null,s[1]),xa().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,c){var g=Br,v=xa();if(We){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),Xn===null)throw Error(n(349));(Ma&30)!==0||hh(g,i,c)}v.memoizedState=c;var S={value:c,getSnapshot:i};return v.queue=S,Zc(fh.bind(null,g,S,s),[s]),g.flags|=2048,Us(9,iu.bind(null,g,S,c,i),void 0,null),c},useId:function(){var s=xa(),i=Xn.identifierPrefix;if(We){var c=oe,g=Le;c=(g&~(1<<32-Wn(g)-1)).toString(32)+c,i=":"+i+"R"+c,c=ol++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=fm++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},Iv={readContext:Yr,useCallback:sg,useContext:Yr,useEffect:ed,useImperativeHandle:ng,useInsertionEffect:mh,useLayoutEffect:td,useMemo:ag,useReducer:Qc,useRef:ai,useState:function(){return Qc(Xl)},useDebugValue:mm,useDeferredValue:function(s){var i=Bs();return ig(i,mn.memoizedState,s)},useTransition:function(){var s=Qc(Xl)[0],i=Bs().memoizedState;return[s,i]},useMutableSource:uh,useSyncExternalStore:au,useId:og,unstable_isNewReconciler:!1},Tv={readContext:Yr,useCallback:sg,useContext:Yr,useEffect:ed,useImperativeHandle:ng,useInsertionEffect:mh,useLayoutEffect:td,useMemo:ag,useReducer:Ti,useRef:ai,useState:function(){return Ti(Xl)},useDebugValue:mm,useDeferredValue:function(s){var i=Bs();return mn===null?i.memoizedState=s:ig(i,mn.memoizedState,s)},useTransition:function(){var s=Ti(Xl)[0],i=Bs().memoizedState;return[s,i]},useMutableSource:uh,useSyncExternalStore:au,useId:og,unstable_isNewReconciler:!1};function ii(s,i){if(s&&s.defaultProps){i=Se({},i),s=s.defaultProps;for(var c in s)i[c]===void 0&&(i[c]=s[c]);return i}return i}function pm(s,i,c,g){i=s.memoizedState,c=c(g,i),c=c==null?i:Se({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var gh={isMounted:function(s){return(s=s._reactInternals)?Hr(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var g=zs(),v=hl(s),S=rn(g,v);S.payload=i,c!=null&&(S.callback=c),i=nn(s,S,v),i!==null&&(ci(i,s,v,g),Jn(i,s,v))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var g=zs(),v=hl(s),S=rn(g,v);S.tag=1,S.payload=i,c!=null&&(S.callback=c),i=nn(s,S,v),i!==null&&(ci(i,s,v,g),Jn(i,s,v))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=zs(),g=hl(s),v=rn(c,g);v.tag=2,i!=null&&(v.callback=i),i=nn(s,v,g),i!==null&&(ci(i,s,g,c),Jn(i,s,g))}};function ug(s,i,c,g,v,S,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,S,q):i.prototype&&i.prototype.isPureReactComponent?!Ia(c,g)||!Ia(v,S):!0}function hg(s,i,c){var g=!1,v=Fi,S=i.contextType;return typeof S=="object"&&S!==null?S=Yr(S):(v=Ss(i)?vo:zn.current,g=i.contextTypes,S=(g=g!=null)?sl(s,v):Fi),i=new i(c,S),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=gh,s.stateNode=i,i._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=S),i}function fg(s,i,c,g){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,g),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,g),i.state!==s&&gh.enqueueReplaceState(i,i.state,null)}function gm(s,i,c,g){var v=s.stateNode;v.props=c,v.state=s.memoizedState,v.refs={},$n(s);var S=i.contextType;typeof S=="object"&&S!==null?v.context=Yr(S):(S=Ss(i)?vo:zn.current,v.context=sl(s,S)),v.state=s.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(pm(s,i,S,c),v.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(i=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),i!==v.state&&gh.enqueueReplaceState(v,v.state,null),Qn(s,c,v,g),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function nd(s,i){try{var c="",g=i;do c+=ie(g),g=g.return;while(g);var v=c}catch(S){v=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:i,stack:v,digest:null}}function xm(s,i,c){return{value:s,source:null,stack:c??null,digest:i??null}}function ym(s,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var Ov=typeof WeakMap=="function"?WeakMap:Map;function mg(s,i,c){c=rn(-1,c),c.tag=3,c.payload={element:null};var g=i.value;return c.callback=function(){jh||(jh=!0,Fm=g),ym(s,i)},c}function pg(s,i,c){c=rn(-1,c),c.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var v=i.value;c.payload=function(){return g(v)},c.callback=function(){ym(s,i)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(c.callback=function(){ym(s,i),typeof g!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var q=i.stack;this.componentDidCatch(i.value,{componentStack:q!==null?q:""})}),c}function gg(s,i,c){var g=s.pingCache;if(g===null){g=s.pingCache=new Ov;var v=new Set;g.set(i,v)}else v=g.get(i),v===void 0&&(v=new Set,g.set(i,v));v.has(c)||(v.add(c),s=Jv.bind(null,s,i,c),i.then(s,s))}function xg(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function yg(s,i,c,g,v){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=rn(-1,1),i.tag=2,nn(c,i,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var Rv=M.ReactCurrentOwner,Zs=!1;function qs(s,i,c,g){i.child=s===null?zr(i,null,c,g):hn(i,s.child,c,g)}function bg(s,i,c,g,v){c=c.render;var S=i.ref;return Kr(i,v),g=Ql(s,i,c,g,S,v),c=Ba(),s!==null&&!Zs?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~v,jo(s,i,v)):(We&&c&&qe(i),i.flags|=1,qs(s,i,g,v),i.child)}function vg(s,i,c,g,v){if(s===null){var S=c.type;return typeof S=="function"&&!Um(S)&&S.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=S,wg(s,i,S,g,v)):(s=_h(c.type,null,g,i,i.mode,v),s.ref=i.ref,s.return=i,i.child=s)}if(S=s.child,(s.lanes&v)===0){var q=S.memoizedProps;if(c=c.compare,c=c!==null?c:Ia,c(q,g)&&s.ref===i.ref)return jo(s,i,v)}return i.flags|=1,s=ml(S,g),s.ref=i.ref,s.return=i,i.child=s}function wg(s,i,c,g,v){if(s!==null){var S=s.memoizedProps;if(Ia(S,g)&&s.ref===i.ref)if(Zs=!1,i.pendingProps=g=S,(s.lanes&v)!==0)(s.flags&131072)!==0&&(Zs=!0);else return i.lanes=s.lanes,jo(s,i,v)}return bm(s,i,c,g,v)}function Ng(s,i,c){var g=i.pendingProps,v=g.children,S=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(ad,ba),ba|=c;else{if((c&1073741824)===0)return s=S!==null?S.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,br(ad,ba),ba|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:c,br(ad,ba),ba|=g}else S!==null?(g=S.baseLanes|c,i.memoizedState=null):g=c,br(ad,ba),ba|=g;return qs(s,i,v,c),i.child}function jg(s,i){var c=i.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function bm(s,i,c,g,v){var S=Ss(c)?vo:zn.current;return S=sl(i,S),Kr(i,v),c=Ql(s,i,c,g,S,v),g=Ba(),s!==null&&!Zs?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~v,jo(s,i,v)):(We&&g&&qe(i),i.flags|=1,qs(s,i,c,v),i.child)}function kg(s,i,c,g,v){if(Ss(c)){var S=!0;wo(i)}else S=!1;if(Kr(i,v),i.stateNode===null)yh(s,i),hg(i,c,g),gm(i,c,g,v),g=!0;else if(s===null){var q=i.stateNode,me=i.memoizedProps;q.props=me;var ve=q.context,Oe=c.contextType;typeof Oe=="object"&&Oe!==null?Oe=Yr(Oe):(Oe=Ss(c)?vo:zn.current,Oe=sl(i,Oe));var tt=c.getDerivedStateFromProps,rt=typeof tt=="function"||typeof q.getSnapshotBeforeUpdate=="function";rt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me!==g||ve!==Oe)&&fg(i,q,g,Oe),fn=!1;var et=i.memoizedState;q.state=et,Qn(i,g,q,v),ve=i.memoizedState,me!==g||et!==ve||ks.current||fn?(typeof tt=="function"&&(pm(i,c,tt,g),ve=i.memoizedState),(me=fn||ug(i,c,me,g,et,ve,Oe))?(rt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(i.flags|=4194308)):(typeof q.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=g,i.memoizedState=ve),q.props=g,q.state=ve,q.context=Oe,g=me):(typeof q.componentDidMount=="function"&&(i.flags|=4194308),g=!1)}else{q=i.stateNode,As(s,i),me=i.memoizedProps,Oe=i.type===i.elementType?me:ii(i.type,me),q.props=Oe,rt=i.pendingProps,et=q.context,ve=c.contextType,typeof ve=="object"&&ve!==null?ve=Yr(ve):(ve=Ss(c)?vo:zn.current,ve=sl(i,ve));var ft=c.getDerivedStateFromProps;(tt=typeof ft=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me!==rt||et!==ve)&&fg(i,q,g,ve),fn=!1,et=i.memoizedState,q.state=et,Qn(i,g,q,v);var Nt=i.memoizedState;me!==rt||et!==Nt||ks.current||fn?(typeof ft=="function"&&(pm(i,c,ft,g),Nt=i.memoizedState),(Oe=fn||ug(i,c,Oe,g,et,Nt,ve)||!1)?(tt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(g,Nt,ve),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(g,Nt,ve)),typeof q.componentDidUpdate=="function"&&(i.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof q.componentDidUpdate!="function"||me===s.memoizedProps&&et===s.memoizedState||(i.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===s.memoizedProps&&et===s.memoizedState||(i.flags|=1024),i.memoizedProps=g,i.memoizedState=Nt),q.props=g,q.state=Nt,q.context=ve,g=Oe):(typeof q.componentDidUpdate!="function"||me===s.memoizedProps&&et===s.memoizedState||(i.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===s.memoizedProps&&et===s.memoizedState||(i.flags|=1024),g=!1)}return vm(s,i,c,g,S,v)}function vm(s,i,c,g,v,S){jg(s,i);var q=(i.flags&128)!==0;if(!g&&!q)return v&&ch(i,c,!1),jo(s,i,S);g=i.stateNode,Rv.current=i;var me=q&&typeof c.getDerivedStateFromError!="function"?null:g.render();return i.flags|=1,s!==null&&q?(i.child=hn(i,s.child,null,S),i.child=hn(i,null,me,S)):qs(s,i,me,S),i.memoizedState=g.state,v&&ch(i,c,!0),i.child}function Sg(s){var i=s.stateNode;i.pendingContext?lh(s,i.pendingContext,i.pendingContext!==i.context):i.context&&lh(s,i.context,!1),al(s,i.containerInfo)}function Ag(s,i,c,g,v){return gt(),st(v),i.flags|=256,qs(s,i,c,g),i.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function Nm(s){return{baseLanes:s,cachePool:null,transitions:null}}function Cg(s,i,c){var g=i.pendingProps,v=Fr.current,S=!1,q=(i.flags&128)!==0,me;if((me=q)||(me=s!==null&&s.memoizedState===null?!1:(v&2)!==0),me?(S=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),br(Fr,v&1),s===null)return vt(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(q=g.children,s=g.fallback,S?(g=i.mode,S=i.child,q={mode:"hidden",children:q},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=q):S=Dh(q,g,0,null),s=sc(s,g,c,null),S.return=i,s.return=i,S.sibling=s,i.child=S,i.child.memoizedState=Nm(c),i.memoizedState=wm,s):jm(i,q));if(v=s.memoizedState,v!==null&&(me=v.dehydrated,me!==null))return Mv(s,i,q,g,me,v,c);if(S){S=g.fallback,q=i.mode,v=s.child,me=v.sibling;var ve={mode:"hidden",children:g.children};return(q&1)===0&&i.child!==v?(g=i.child,g.childLanes=0,g.pendingProps=ve,i.deletions=null):(g=ml(v,ve),g.subtreeFlags=v.subtreeFlags&14680064),me!==null?S=ml(me,S):(S=sc(S,q,c,null),S.flags|=2),S.return=i,g.return=i,g.sibling=S,i.child=g,g=S,S=i.child,q=s.child.memoizedState,q=q===null?Nm(c):{baseLanes:q.baseLanes|c,cachePool:null,transitions:q.transitions},S.memoizedState=q,S.childLanes=s.childLanes&~c,i.memoizedState=wm,g}return S=s.child,s=S.sibling,g=ml(S,{mode:"visible",children:g.children}),(i.mode&1)===0&&(g.lanes=c),g.return=i,g.sibling=null,s!==null&&(c=i.deletions,c===null?(i.deletions=[s],i.flags|=16):c.push(s)),i.child=g,i.memoizedState=null,g}function jm(s,i){return i=Dh({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function xh(s,i,c,g){return g!==null&&st(g),hn(i,s.child,null,c),s=jm(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Mv(s,i,c,g,v,S,q){if(c)return i.flags&256?(i.flags&=-257,g=xm(Error(n(422))),xh(s,i,q,g)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(S=g.fallback,v=i.mode,g=Dh({mode:"visible",children:g.children},v,0,null),S=sc(S,v,q,null),S.flags|=2,g.return=i,S.return=i,g.sibling=S,i.child=g,(i.mode&1)!==0&&hn(i,s.child,null,q),i.child.memoizedState=Nm(q),i.memoizedState=wm,S);if((i.mode&1)===0)return xh(s,i,q,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var me=g.dgst;return g=me,S=Error(n(419)),g=xm(S,g,void 0),xh(s,i,q,g)}if(me=(q&s.childLanes)!==0,Zs||me){if(g=Xn,g!==null){switch(q&-q){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|q))!==0?0:v,v!==0&&v!==S.retryLane&&(S.retryLane=v,Sr(s,v),ci(g,s,v,-1))}return Bm(),g=xm(Error(n(421))),xh(s,i,q,g)}return v.data==="$?"?(i.flags|=128,i.child=s.child,i=Qv.bind(null,s),v._reactRetry=i,null):(s=S.treeContext,Be=cs(v.nextSibling),Re=i,We=!0,Ke=null,s!==null&&(Z[ae++]=Le,Z[ae++]=oe,Z[ae++]=be,Le=s.id,oe=s.overflow,be=i),i=jm(i,g.children),i.flags|=4096,i)}function Pg(s,i,c){s.lanes|=i;var g=s.alternate;g!==null&&(g.lanes|=i),hr(s.return,i,c)}function km(s,i,c,g,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:v}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=c,S.tailMode=v)}function _g(s,i,c){var g=i.pendingProps,v=g.revealOrder,S=g.tail;if(qs(s,i,g.children,c),g=Fr.current,(g&2)!==0)g=g&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Pg(s,c,i);else if(s.tag===19)Pg(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(br(Fr,g),(i.mode&1)===0)i.memoizedState=null;else switch(v){case"forwards":for(c=i.child,v=null;c!==null;)s=c.alternate,s!==null&&ga(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=i.child,i.child=null):(v=c.sibling,c.sibling=null),km(i,!1,v,c,S);break;case"backwards":for(c=null,v=i.child,i.child=null;v!==null;){if(s=v.alternate,s!==null&&ga(s)===null){i.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}km(i,!0,c,null,S);break;case"together":km(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function yh(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function jo(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),ec|=i.lanes,(c&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(n(153));if(i.child!==null){for(s=i.child,c=ml(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=ml(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function Bv(s,i,c){switch(i.tag){case 3:Sg(i),gt();break;case 5:dh(i);break;case 1:Ss(i.type)&&wo(i);break;case 4:al(i,i.stateNode.containerInfo);break;case 10:var g=i.type._context,v=i.memoizedProps.value;br(jn,g._currentValue),g._currentValue=v;break;case 13:if(g=i.memoizedState,g!==null)return g.dehydrated!==null?(br(Fr,Fr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?Cg(s,i,c):(br(Fr,Fr.current&1),s=jo(s,i,c),s!==null?s.sibling:null);br(Fr,Fr.current&1);break;case 19:if(g=(c&i.childLanes)!==0,(s.flags&128)!==0){if(g)return _g(s,i,c);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),br(Fr,Fr.current),g)break;return null;case 22:case 23:return i.lanes=0,Ng(s,i,c)}return jo(s,i,c)}var Dg,Sm,Lg,Eg;Dg=function(s,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Sm=function(){},Lg=function(s,i,c,g){var v=s.memoizedProps;if(v!==g){s=i.stateNode,ni(In.current);var S=null;switch(c){case"input":v=Te(s,v),g=Te(s,g),S=[];break;case"select":v=Se({},v,{value:void 0}),g=Se({},g,{value:void 0}),S=[];break;case"textarea":v=De(s,v),g=De(s,g),S=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=tl)}Zt(c,g);var q;c=null;for(Oe in v)if(!g.hasOwnProperty(Oe)&&v.hasOwnProperty(Oe)&&v[Oe]!=null)if(Oe==="style"){var me=v[Oe];for(q in me)me.hasOwnProperty(q)&&(c||(c={}),c[q]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(o.hasOwnProperty(Oe)?S||(S=[]):(S=S||[]).push(Oe,null));for(Oe in g){var ve=g[Oe];if(me=v?.[Oe],g.hasOwnProperty(Oe)&&ve!==me&&(ve!=null||me!=null))if(Oe==="style")if(me){for(q in me)!me.hasOwnProperty(q)||ve&&ve.hasOwnProperty(q)||(c||(c={}),c[q]="");for(q in ve)ve.hasOwnProperty(q)&&me[q]!==ve[q]&&(c||(c={}),c[q]=ve[q])}else c||(S||(S=[]),S.push(Oe,c)),c=ve;else Oe==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,me=me?me.__html:void 0,ve!=null&&me!==ve&&(S=S||[]).push(Oe,ve)):Oe==="children"?typeof ve!="string"&&typeof ve!="number"||(S=S||[]).push(Oe,""+ve):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Oe)?(ve!=null&&Oe==="onScroll"&&jr("scroll",s),S||me===ve||(S=[])):(S=S||[]).push(Oe,ve))}c&&(S=S||[]).push("style",c);var Oe=S;(i.updateQueue=Oe)&&(i.flags|=4)}},Eg=function(s,i,c,g){c!==g&&(i.flags|=4)};function ou(s,i){if(!We)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Cs(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,g=0;if(i)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=g,s.childLanes=c,i}function Uv(s,i,c){var g=i.pendingProps;switch(Fe(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(i),null;case 1:return Ss(i.type)&&Gc(),Cs(i),null;case 3:return g=i.stateNode,Ra(),xr(ks),xr(zn),su(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Gr(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ke!==null&&(Om(Ke),Ke=null))),Sm(s,i),Cs(i),null;case 5:ru(i);var v=ni(Ii.current);if(c=i.type,s!==null&&i.stateNode!=null)Lg(s,i,c,g,v),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!g){if(i.stateNode===null)throw Error(n(166));return Cs(i),null}if(s=ni(In.current),Gr(i)){g=i.stateNode,c=i.type;var S=i.memoizedProps;switch(g[Oa]=i,g[rl]=S,s=(i.mode&1)!==0,c){case"dialog":jr("cancel",g),jr("close",g);break;case"iframe":case"object":case"embed":jr("load",g);break;case"video":case"audio":for(v=0;v<Li.length;v++)jr(Li[v],g);break;case"source":jr("error",g);break;case"img":case"image":case"link":jr("error",g),jr("load",g);break;case"details":jr("toggle",g);break;case"input":W(g,S),jr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},jr("invalid",g);break;case"textarea":ze(g,S),jr("invalid",g)}Zt(c,S),v=null;for(var q in S)if(S.hasOwnProperty(q)){var me=S[q];q==="children"?typeof me=="string"?g.textContent!==me&&(S.suppressHydrationWarning!==!0&&Wc(g.textContent,me,s),v=["children",me]):typeof me=="number"&&g.textContent!==""+me&&(S.suppressHydrationWarning!==!0&&Wc(g.textContent,me,s),v=["children",""+me]):o.hasOwnProperty(q)&&me!=null&&q==="onScroll"&&jr("scroll",g)}switch(c){case"input":ue(g),Ze(g,S,!0);break;case"textarea":ue(g),Ue(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=tl)}g=v,i.updateQueue=g,g!==null&&(i.flags|=4)}else{q=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Xe(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=q.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=q.createElement(c,{is:g.is}):(s=q.createElement(c),c==="select"&&(q=s,g.multiple?q.multiple=!0:g.size&&(q.size=g.size))):s=q.createElementNS(s,c),s[Oa]=i,s[rl]=g,Dg(s,i,!1,!1),i.stateNode=s;e:{switch(q=Lt(c,g),c){case"dialog":jr("cancel",s),jr("close",s),v=g;break;case"iframe":case"object":case"embed":jr("load",s),v=g;break;case"video":case"audio":for(v=0;v<Li.length;v++)jr(Li[v],s);v=g;break;case"source":jr("error",s),v=g;break;case"img":case"image":case"link":jr("error",s),jr("load",s),v=g;break;case"details":jr("toggle",s),v=g;break;case"input":W(s,g),v=Te(s,g),jr("invalid",s);break;case"option":v=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},v=Se({},g,{value:void 0}),jr("invalid",s);break;case"textarea":ze(s,g),v=De(s,g),jr("invalid",s);break;default:v=g}Zt(c,v),me=v;for(S in me)if(me.hasOwnProperty(S)){var ve=me[S];S==="style"?ct(s,ve):S==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&dt(s,ve)):S==="children"?typeof ve=="string"?(c!=="textarea"||ve!=="")&&Pt(s,ve):typeof ve=="number"&&Pt(s,""+ve):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(o.hasOwnProperty(S)?ve!=null&&S==="onScroll"&&jr("scroll",s):ve!=null&&D(s,S,ve,q))}switch(c){case"input":ue(s),Ze(s,g,!1);break;case"textarea":ue(s),Ue(s);break;case"option":g.value!=null&&s.setAttribute("value",""+he(g.value));break;case"select":s.multiple=!!g.multiple,S=g.value,S!=null?xe(s,!!g.multiple,S,!1):g.defaultValue!=null&&xe(s,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=tl)}switch(c){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Cs(i),null;case 6:if(s&&i.stateNode!=null)Eg(s,i,s.memoizedProps,g);else{if(typeof g!="string"&&i.stateNode===null)throw Error(n(166));if(c=ni(Ii.current),ni(In.current),Gr(i)){if(g=i.stateNode,c=i.memoizedProps,g[Oa]=i,(S=g.nodeValue!==c)&&(s=Re,s!==null))switch(s.tag){case 3:Wc(g.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Wc(g.nodeValue,c,(s.mode&1)!==0)}S&&(i.flags|=4)}else g=(c.nodeType===9?c:c.ownerDocument).createTextNode(g),g[Oa]=i,i.stateNode=g}return Cs(i),null;case 13:if(xr(Fr),g=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(We&&Be!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Yt(),gt(),i.flags|=98560,S=!1;else if(S=Gr(i),g!==null&&g.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Oa]=i}else gt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Cs(i),S=!1}else Ke!==null&&(Om(Ke),Ke=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(Fr.current&1)!==0?Vn===0&&(Vn=3):Bm())),i.updateQueue!==null&&(i.flags|=4),Cs(i),null);case 4:return Ra(),Sm(s,i),s===null&&go(i.stateNode.containerInfo),Cs(i),null;case 10:return Mr(i.type._context),Cs(i),null;case 17:return Ss(i.type)&&Gc(),Cs(i),null;case 19:if(xr(Fr),S=i.memoizedState,S===null)return Cs(i),null;if(g=(i.flags&128)!==0,q=S.rendering,q===null)if(g)ou(S,!1);else{if(Vn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(q=ga(s),q!==null){for(i.flags|=128,ou(S,!1),g=q.updateQueue,g!==null&&(i.updateQueue=g,i.flags|=4),i.subtreeFlags=0,g=c,c=i.child;c!==null;)S=c,s=g,S.flags&=14680066,q=S.alternate,q===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=q.childLanes,S.lanes=q.lanes,S.child=q.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=q.memoizedProps,S.memoizedState=q.memoizedState,S.updateQueue=q.updateQueue,S.type=q.type,s=q.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return br(Fr,Fr.current&1|2),i.child}s=s.sibling}S.tail!==null&&Er()>id&&(i.flags|=128,g=!0,ou(S,!1),i.lanes=4194304)}else{if(!g)if(s=ga(q),s!==null){if(i.flags|=128,g=!0,c=s.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),ou(S,!0),S.tail===null&&S.tailMode==="hidden"&&!q.alternate&&!We)return Cs(i),null}else 2*Er()-S.renderingStartTime>id&&c!==1073741824&&(i.flags|=128,g=!0,ou(S,!1),i.lanes=4194304);S.isBackwards?(q.sibling=i.child,i.child=q):(c=S.last,c!==null?c.sibling=q:i.child=q,S.last=q)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=Er(),i.sibling=null,c=Fr.current,br(Fr,g?c&1|2:c&1),i):(Cs(i),null);case 22:case 23:return Mm(),g=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(i.flags|=8192),g&&(i.mode&1)!==0?(ba&1073741824)!==0&&(Cs(i),i.subtreeFlags&6&&(i.flags|=8192)):Cs(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function qv(s,i){switch(Fe(i),i.tag){case 1:return Ss(i.type)&&Gc(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ra(),xr(ks),xr(zn),su(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return ru(i),null;case 13:if(xr(Fr),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(n(340));gt()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return xr(Fr),null;case 4:return Ra(),null;case 10:return Mr(i.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var bh=!1,Ps=!1,zv=typeof WeakSet=="function"?WeakSet:Set,yt=null;function sd(s,i){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){pn(s,i,g)}else c.current=null}function Am(s,i,c){try{c()}catch(g){pn(s,i,g)}}var Fg=!1;function $v(s,i){if(Kl=Vo,s=zd(),Uc(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var v=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var q=0,me=-1,ve=-1,Oe=0,tt=0,rt=s,et=null;t:for(;;){for(var ft;rt!==c||v!==0&&rt.nodeType!==3||(me=q+v),rt!==S||g!==0&&rt.nodeType!==3||(ve=q+g),rt.nodeType===3&&(q+=rt.nodeValue.length),(ft=rt.firstChild)!==null;)et=rt,rt=ft;for(;;){if(rt===s)break t;if(et===c&&++Oe===v&&(me=q),et===S&&++tt===g&&(ve=q),(ft=rt.nextSibling)!==null)break;rt=et,et=rt.parentNode}rt=ft}c=me===-1||ve===-1?null:{start:me,end:ve}}else c=null}c=c||{start:0,end:0}}else c=null;for(yo={focusedElem:s,selectionRange:c},Vo=!1,yt=i;yt!==null;)if(i=yt,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,yt=s;else for(;yt!==null;){i=yt;try{var Nt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Nt!==null){var St=Nt.memoizedProps,Sn=Nt.memoizedState,Ee=i.stateNode,ke=Ee.getSnapshotBeforeUpdate(i.elementType===i.type?St:ii(i.type,St),Sn);Ee.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Ie=i.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(nt){pn(i,i.return,nt)}if(s=i.sibling,s!==null){s.return=i.return,yt=s;break}yt=i.return}return Nt=Fg,Fg=!1,Nt}function lu(s,i,c){var g=i.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&s)===s){var S=v.destroy;v.destroy=void 0,S!==void 0&&Am(i,c,S)}v=v.next}while(v!==g)}}function vh(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&s)===s){var g=c.create;c.destroy=g()}c=c.next}while(c!==i)}}function Cm(s){var i=s.ref;if(i!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof i=="function"?i(s):i.current=s}}function Ig(s){var i=s.alternate;i!==null&&(s.alternate=null,Ig(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Oa],delete i[rl],delete i[js],delete i[um],delete i[hm])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tg(s){return s.tag===5||s.tag===3||s.tag===4}function Og(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Pm(s,i,c){var g=s.tag;if(g===5||g===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=tl));else if(g!==4&&(s=s.child,s!==null))for(Pm(s,i,c),s=s.sibling;s!==null;)Pm(s,i,c),s=s.sibling}function _m(s,i,c){var g=s.tag;if(g===5||g===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(_m(s,i,c),s=s.sibling;s!==null;)_m(s,i,c),s=s.sibling}var ds=null,oi=!1;function cl(s,i,c){for(c=c.child;c!==null;)Rg(s,i,c),c=c.sibling}function Rg(s,i,c){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(eo,c)}catch{}switch(c.tag){case 5:Ps||sd(c,i);case 6:var g=ds,v=oi;ds=null,cl(s,i,c),ds=g,oi=v,ds!==null&&(oi?(s=ds,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):ds.removeChild(c.stateNode));break;case 18:ds!==null&&(oi?(s=ds,c=c.stateNode,s.nodeType===8?Zd(s.parentNode,c):s.nodeType===1&&Zd(s,c),_a(s)):Zd(ds,c.stateNode));break;case 4:g=ds,v=oi,ds=c.stateNode.containerInfo,oi=!0,cl(s,i,c),ds=g,oi=v;break;case 0:case 11:case 14:case 15:if(!Ps&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var S=v,q=S.destroy;S=S.tag,q!==void 0&&((S&2)!==0||(S&4)!==0)&&Am(c,i,q),v=v.next}while(v!==g)}cl(s,i,c);break;case 1:if(!Ps&&(sd(c,i),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(me){pn(c,i,me)}cl(s,i,c);break;case 21:cl(s,i,c);break;case 22:c.mode&1?(Ps=(g=Ps)||c.memoizedState!==null,cl(s,i,c),Ps=g):cl(s,i,c);break;default:cl(s,i,c)}}function Mg(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new zv),i.forEach(function(g){var v=Xv.bind(null,s,g);c.has(g)||(c.add(g),g.then(v,v))})}}function li(s,i){var c=i.deletions;if(c!==null)for(var g=0;g<c.length;g++){var v=c[g];try{var S=s,q=i,me=q;e:for(;me!==null;){switch(me.tag){case 5:ds=me.stateNode,oi=!1;break e;case 3:ds=me.stateNode.containerInfo,oi=!0;break e;case 4:ds=me.stateNode.containerInfo,oi=!0;break e}me=me.return}if(ds===null)throw Error(n(160));Rg(S,q,v),ds=null,oi=!1;var ve=v.alternate;ve!==null&&(ve.return=null),v.return=null}catch(Oe){pn(v,i,Oe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Bg(i,s),i=i.sibling}function Bg(s,i){var c=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(li(i,s),Oi(s),g&4){try{lu(3,s,s.return),vh(3,s)}catch(St){pn(s,s.return,St)}try{lu(5,s,s.return)}catch(St){pn(s,s.return,St)}}break;case 1:li(i,s),Oi(s),g&512&&c!==null&&sd(c,c.return);break;case 5:if(li(i,s),Oi(s),g&512&&c!==null&&sd(c,c.return),s.flags&32){var v=s.stateNode;try{Pt(v,"")}catch(St){pn(s,s.return,St)}}if(g&4&&(v=s.stateNode,v!=null)){var S=s.memoizedProps,q=c!==null?c.memoizedProps:S,me=s.type,ve=s.updateQueue;if(s.updateQueue=null,ve!==null)try{me==="input"&&S.type==="radio"&&S.name!=null&&He(v,S),Lt(me,q);var Oe=Lt(me,S);for(q=0;q<ve.length;q+=2){var tt=ve[q],rt=ve[q+1];tt==="style"?ct(v,rt):tt==="dangerouslySetInnerHTML"?dt(v,rt):tt==="children"?Pt(v,rt):D(v,tt,rt,Oe)}switch(me){case"input":je(v,S);break;case"textarea":Ye(v,S);break;case"select":var et=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!S.multiple;var ft=S.value;ft!=null?xe(v,!!S.multiple,ft,!1):et!==!!S.multiple&&(S.defaultValue!=null?xe(v,!!S.multiple,S.defaultValue,!0):xe(v,!!S.multiple,S.multiple?[]:"",!1))}v[rl]=S}catch(St){pn(s,s.return,St)}}break;case 6:if(li(i,s),Oi(s),g&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,S=s.memoizedProps;try{v.nodeValue=S}catch(St){pn(s,s.return,St)}}break;case 3:if(li(i,s),Oi(s),g&4&&c!==null&&c.memoizedState.isDehydrated)try{_a(i.containerInfo)}catch(St){pn(s,s.return,St)}break;case 4:li(i,s),Oi(s);break;case 13:li(i,s),Oi(s),v=s.child,v.flags&8192&&(S=v.memoizedState!==null,v.stateNode.isHidden=S,!S||v.alternate!==null&&v.alternate.memoizedState!==null||(Em=Er())),g&4&&Mg(s);break;case 22:if(tt=c!==null&&c.memoizedState!==null,s.mode&1?(Ps=(Oe=Ps)||tt,li(i,s),Ps=Oe):li(i,s),Oi(s),g&8192){if(Oe=s.memoizedState!==null,(s.stateNode.isHidden=Oe)&&!tt&&(s.mode&1)!==0)for(yt=s,tt=s.child;tt!==null;){for(rt=yt=tt;yt!==null;){switch(et=yt,ft=et.child,et.tag){case 0:case 11:case 14:case 15:lu(4,et,et.return);break;case 1:sd(et,et.return);var Nt=et.stateNode;if(typeof Nt.componentWillUnmount=="function"){g=et,c=et.return;try{i=g,Nt.props=i.memoizedProps,Nt.state=i.memoizedState,Nt.componentWillUnmount()}catch(St){pn(g,c,St)}}break;case 5:sd(et,et.return);break;case 22:if(et.memoizedState!==null){zg(rt);continue}}ft!==null?(ft.return=et,yt=ft):zg(rt)}tt=tt.sibling}e:for(tt=null,rt=s;;){if(rt.tag===5){if(tt===null){tt=rt;try{v=rt.stateNode,Oe?(S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(me=rt.stateNode,ve=rt.memoizedProps.style,q=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,me.style.display=Xt("display",q))}catch(St){pn(s,s.return,St)}}}else if(rt.tag===6){if(tt===null)try{rt.stateNode.nodeValue=Oe?"":rt.memoizedProps}catch(St){pn(s,s.return,St)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===s)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===s)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===s)break e;tt===rt&&(tt=null),rt=rt.return}tt===rt&&(tt=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:li(i,s),Oi(s),g&4&&Mg(s);break;case 21:break;default:li(i,s),Oi(s)}}function Oi(s){var i=s.flags;if(i&2){try{e:{for(var c=s.return;c!==null;){if(Tg(c)){var g=c;break e}c=c.return}throw Error(n(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Pt(v,""),g.flags&=-33);var S=Og(s);_m(s,S,v);break;case 3:case 4:var q=g.stateNode.containerInfo,me=Og(s);Pm(s,me,q);break;default:throw Error(n(161))}}catch(ve){pn(s,s.return,ve)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Vv(s,i,c){yt=s,Ug(s)}function Ug(s,i,c){for(var g=(s.mode&1)!==0;yt!==null;){var v=yt,S=v.child;if(v.tag===22&&g){var q=v.memoizedState!==null||bh;if(!q){var me=v.alternate,ve=me!==null&&me.memoizedState!==null||Ps;me=bh;var Oe=Ps;if(bh=q,(Ps=ve)&&!Oe)for(yt=v;yt!==null;)q=yt,ve=q.child,q.tag===22&&q.memoizedState!==null?$g(v):ve!==null?(ve.return=q,yt=ve):$g(v);for(;S!==null;)yt=S,Ug(S),S=S.sibling;yt=v,bh=me,Ps=Oe}qg(s)}else(v.subtreeFlags&8772)!==0&&S!==null?(S.return=v,yt=S):qg(s)}}function qg(s){for(;yt!==null;){var i=yt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ps||vh(5,i);break;case 1:var g=i.stateNode;if(i.flags&4&&!Ps)if(c===null)g.componentDidMount();else{var v=i.elementType===i.type?c.memoizedProps:ii(i.type,c.memoizedProps);g.componentDidUpdate(v,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&Xs(i,S,g);break;case 3:var q=i.updateQueue;if(q!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}Xs(i,q,c)}break;case 5:var me=i.stateNode;if(c===null&&i.flags&4){c=me;var ve=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&c.focus();break;case"img":ve.src&&(c.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Oe=i.alternate;if(Oe!==null){var tt=Oe.memoizedState;if(tt!==null){var rt=tt.dehydrated;rt!==null&&_a(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ps||i.flags&512&&Cm(i)}catch(et){pn(i,i.return,et)}}if(i===s){yt=null;break}if(c=i.sibling,c!==null){c.return=i.return,yt=c;break}yt=i.return}}function zg(s){for(;yt!==null;){var i=yt;if(i===s){yt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,yt=c;break}yt=i.return}}function $g(s){for(;yt!==null;){var i=yt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{vh(4,i)}catch(ve){pn(i,c,ve)}break;case 1:var g=i.stateNode;if(typeof g.componentDidMount=="function"){var v=i.return;try{g.componentDidMount()}catch(ve){pn(i,v,ve)}}var S=i.return;try{Cm(i)}catch(ve){pn(i,S,ve)}break;case 5:var q=i.return;try{Cm(i)}catch(ve){pn(i,q,ve)}}}catch(ve){pn(i,i.return,ve)}if(i===s){yt=null;break}var me=i.sibling;if(me!==null){me.return=i.return,yt=me;break}yt=i.return}}var Hv=Math.ceil,wh=M.ReactCurrentDispatcher,Dm=M.ReactCurrentOwner,Ua=M.ReactCurrentBatchConfig,fr=0,Xn=null,Tn=null,us=0,ba=0,ad=ma(0),Vn=0,cu=null,ec=0,Nh=0,Lm=0,du=null,ea=null,Em=0,id=1/0,ko=null,jh=!1,Fm=null,dl=null,kh=!1,ul=null,Sh=0,uu=0,Im=null,Ah=-1,Ch=0;function zs(){return(fr&6)!==0?Er():Ah!==-1?Ah:Ah=Er()}function hl(s){return(s.mode&1)===0?1:(fr&2)!==0&&us!==0?us&-us:tn.transition!==null?(Ch===0&&(Ch=Dc()),Ch):(s=lr,s!==0||(s=window.event,s=s===void 0?16:lo(s.type)),s)}function ci(s,i,c,g){if(50<uu)throw uu=0,Im=null,Error(n(185));so(s,c,g),((fr&2)===0||s!==Xn)&&(s===Xn&&((fr&2)===0&&(Nh|=c),Vn===4&&fl(s,us)),ta(s,g),c===1&&fr===0&&(i.mode&1)===0&&(id=Er()+500,Jl&&_()))}function ta(s,i){var c=s.callbackNode;Xr(s,i);var g=gs(s,s===Xn?us:0);if(g===0)c!==null&&Zi(c),s.callbackNode=null,s.callbackPriority=0;else if(i=g&-g,s.callbackPriority!==i){if(c!=null&&Zi(c),i===1)s.tag===0?k(Hg.bind(null,s)):x(Hg.bind(null,s)),cm(function(){(fr&6)===0&&_()}),c=null;else{switch(Va(g)){case 1:c=Mo;break;case 4:c=Ts;break;case 16:c=Ni;break;case 536870912:c=Bo;break;default:c=Ni}c=Zg(c,Vg.bind(null,s))}s.callbackPriority=i,s.callbackNode=c}}function Vg(s,i){if(Ah=-1,Ch=0,(fr&6)!==0)throw Error(n(327));var c=s.callbackNode;if(od()&&s.callbackNode!==c)return null;var g=gs(s,s===Xn?us:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||i)i=Ph(s,g);else{i=g;var v=fr;fr|=2;var S=Gg();(Xn!==s||us!==i)&&(ko=null,id=Er()+500,rc(s,i));do try{Kv();break}catch(me){Wg(s,me)}while(!0);ur(),wh.current=S,fr=v,Tn!==null?i=0:(Xn=null,us=0,i=Vn)}if(i!==0){if(i===2&&(v=no(s),v!==0&&(g=v,i=Tm(s,v))),i===1)throw c=cu,rc(s,0),fl(s,g),ta(s,Er()),c;if(i===6)fl(s,g);else{if(v=s.current.alternate,(g&30)===0&&!Wv(v)&&(i=Ph(s,g),i===2&&(S=no(s),S!==0&&(g=S,i=Tm(s,S))),i===1))throw c=cu,rc(s,0),fl(s,g),ta(s,Er()),c;switch(s.finishedWork=v,s.finishedLanes=g,i){case 0:case 1:throw Error(n(345));case 2:nc(s,ea,ko);break;case 3:if(fl(s,g),(g&130023424)===g&&(i=Em+500-Er(),10<i)){if(gs(s,0)!==0)break;if(v=s.suspendedLanes,(v&g)!==g){zs(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=Xd(nc.bind(null,s,ea,ko),i);break}nc(s,ea,ko);break;case 4:if(fl(s,g),(g&4194240)===g)break;for(i=s.eventTimes,v=-1;0<g;){var q=31-Wn(g);S=1<<q,q=i[q],q>v&&(v=q),g&=~S}if(g=v,g=Er()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Hv(g/1960))-g,10<g){s.timeoutHandle=Xd(nc.bind(null,s,ea,ko),g);break}nc(s,ea,ko);break;case 5:nc(s,ea,ko);break;default:throw Error(n(329))}}}return ta(s,Er()),s.callbackNode===c?Vg.bind(null,s):null}function Tm(s,i){var c=du;return s.current.memoizedState.isDehydrated&&(rc(s,i).flags|=256),s=Ph(s,i),s!==2&&(i=ea,ea=c,i!==null&&Om(i)),s}function Om(s){ea===null?ea=s:ea.push.apply(ea,s)}function Wv(s){for(var i=s;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var v=c[g],S=v.getSnapshot;v=v.value;try{if(!Nn(S(),v))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fl(s,i){for(i&=~Lm,i&=~Nh,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var c=31-Wn(i),g=1<<c;s[c]=-1,i&=~g}}function Hg(s){if((fr&6)!==0)throw Error(n(327));od();var i=gs(s,0);if((i&1)===0)return ta(s,Er()),null;var c=Ph(s,i);if(s.tag!==0&&c===2){var g=no(s);g!==0&&(i=g,c=Tm(s,g))}if(c===1)throw c=cu,rc(s,0),fl(s,i),ta(s,Er()),c;if(c===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,nc(s,ea,ko),ta(s,Er()),null}function Rm(s,i){var c=fr;fr|=1;try{return s(i)}finally{fr=c,fr===0&&(id=Er()+500,Jl&&_())}}function tc(s){ul!==null&&ul.tag===0&&(fr&6)===0&&od();var i=fr;fr|=1;var c=Ua.transition,g=lr;try{if(Ua.transition=null,lr=1,s)return s()}finally{lr=g,Ua.transition=c,fr=i,(fr&6)===0&&_()}}function Mm(){ba=ad.current,xr(ad)}function rc(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,ih(c)),Tn!==null)for(c=Tn.return;c!==null;){var g=c;switch(Fe(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Gc();break;case 3:Ra(),xr(ks),xr(zn),su();break;case 5:ru(g);break;case 4:Ra();break;case 13:xr(Fr);break;case 19:xr(Fr);break;case 10:Mr(g.type._context);break;case 22:case 23:Mm()}c=c.return}if(Xn=s,Tn=s=ml(s.current,null),us=ba=i,Vn=0,cu=null,Lm=Nh=ec=0,ea=du=null,kr!==null){for(i=0;i<kr.length;i++)if(c=kr[i],g=c.interleaved,g!==null){c.interleaved=null;var v=g.next,S=c.pending;if(S!==null){var q=S.next;S.next=v,g.next=q}c.pending=g}kr=null}return s}function Wg(s,i){do{var c=Tn;try{if(ur(),Kc.current=ph,il){for(var g=Br.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}il=!1}if(Ma=0,an=mn=Br=null,si=!1,ol=0,Dm.current=null,c===null||c.return===null){Vn=1,cu=i,Tn=null;break}e:{var S=s,q=c.return,me=c,ve=i;if(i=us,me.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Oe=ve,tt=me,rt=tt.tag;if((tt.mode&1)===0&&(rt===0||rt===11||rt===15)){var et=tt.alternate;et?(tt.updateQueue=et.updateQueue,tt.memoizedState=et.memoizedState,tt.lanes=et.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var ft=xg(q);if(ft!==null){ft.flags&=-257,yg(ft,q,me,S,i),ft.mode&1&&gg(S,Oe,i),i=ft,ve=Oe;var Nt=i.updateQueue;if(Nt===null){var St=new Set;St.add(ve),i.updateQueue=St}else Nt.add(ve);break e}else{if((i&1)===0){gg(S,Oe,i),Bm();break e}ve=Error(n(426))}}else if(We&&me.mode&1){var Sn=xg(q);if(Sn!==null){(Sn.flags&65536)===0&&(Sn.flags|=256),yg(Sn,q,me,S,i),st(nd(ve,me));break e}}S=ve=nd(ve,me),Vn!==4&&(Vn=2),du===null?du=[S]:du.push(S),S=q;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var Ee=mg(S,ve,i);Ar(S,Ee);break e;case 1:me=ve;var ke=S.type,Ie=S.stateNode;if((S.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(dl===null||!dl.has(Ie)))){S.flags|=65536,i&=-i,S.lanes|=i;var nt=pg(S,me,i);Ar(S,nt);break e}}S=S.return}while(S!==null)}Yg(c)}catch(_t){i=_t,Tn===c&&c!==null&&(Tn=c=c.return);continue}break}while(!0)}function Gg(){var s=wh.current;return wh.current=ph,s===null?ph:s}function Bm(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),Xn===null||(ec&268435455)===0&&(Nh&268435455)===0||fl(Xn,us)}function Ph(s,i){var c=fr;fr|=2;var g=Gg();(Xn!==s||us!==i)&&(ko=null,rc(s,i));do try{Gv();break}catch(v){Wg(s,v)}while(!0);if(ur(),fr=c,wh.current=g,Tn!==null)throw Error(n(261));return Xn=null,us=0,Vn}function Gv(){for(;Tn!==null;)Kg(Tn)}function Kv(){for(;Tn!==null&&!Ro();)Kg(Tn)}function Kg(s){var i=Xg(s.alternate,s,ba);s.memoizedProps=s.pendingProps,i===null?Yg(s):Tn=i,Dm.current=null}function Yg(s){var i=s;do{var c=i.alternate;if(s=i.return,(i.flags&32768)===0){if(c=Uv(c,i,ba),c!==null){Tn=c;return}}else{if(c=qv(c,i),c!==null){c.flags&=32767,Tn=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Vn=6,Tn=null;return}}if(i=i.sibling,i!==null){Tn=i;return}Tn=i=s}while(i!==null);Vn===0&&(Vn=5)}function nc(s,i,c){var g=lr,v=Ua.transition;try{Ua.transition=null,lr=1,Yv(s,i,c,g)}finally{Ua.transition=v,lr=g}return null}function Yv(s,i,c,g){do od();while(ul!==null);if((fr&6)!==0)throw Error(n(327));c=s.finishedWork;var v=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=c.lanes|c.childLanes;if(Aa(s,S),s===Xn&&(Tn=Xn=null,us=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||kh||(kh=!0,Zg(Ni,function(){return od(),null})),S=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||S){S=Ua.transition,Ua.transition=null;var q=lr;lr=1;var me=fr;fr|=4,Dm.current=null,$v(s,c),Bg(c,s),th(yo),Vo=!!Kl,yo=Kl=null,s.current=c,Vv(c),Md(),fr=me,lr=q,Ua.transition=S}else s.current=c;if(kh&&(kh=!1,ul=s,Sh=v),S=s.pendingLanes,S===0&&(dl=null),Pc(c.stateNode),ta(s,Er()),i!==null)for(g=s.onRecoverableError,c=0;c<i.length;c++)v=i[c],g(v.value,{componentStack:v.stack,digest:v.digest});if(jh)throw jh=!1,s=Fm,Fm=null,s;return(Sh&1)!==0&&s.tag!==0&&od(),S=s.pendingLanes,(S&1)!==0?s===Im?uu++:(uu=0,Im=s):uu=0,_(),null}function od(){if(ul!==null){var s=Va(Sh),i=Ua.transition,c=lr;try{if(Ua.transition=null,lr=16>s?16:s,ul===null)var g=!1;else{if(s=ul,ul=null,Sh=0,(fr&6)!==0)throw Error(n(331));var v=fr;for(fr|=4,yt=s.current;yt!==null;){var S=yt,q=S.child;if((yt.flags&16)!==0){var me=S.deletions;if(me!==null){for(var ve=0;ve<me.length;ve++){var Oe=me[ve];for(yt=Oe;yt!==null;){var tt=yt;switch(tt.tag){case 0:case 11:case 15:lu(8,tt,S)}var rt=tt.child;if(rt!==null)rt.return=tt,yt=rt;else for(;yt!==null;){tt=yt;var et=tt.sibling,ft=tt.return;if(Ig(tt),tt===Oe){yt=null;break}if(et!==null){et.return=ft,yt=et;break}yt=ft}}}var Nt=S.alternate;if(Nt!==null){var St=Nt.child;if(St!==null){Nt.child=null;do{var Sn=St.sibling;St.sibling=null,St=Sn}while(St!==null)}}yt=S}}if((S.subtreeFlags&2064)!==0&&q!==null)q.return=S,yt=q;else e:for(;yt!==null;){if(S=yt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:lu(9,S,S.return)}var Ee=S.sibling;if(Ee!==null){Ee.return=S.return,yt=Ee;break e}yt=S.return}}var ke=s.current;for(yt=ke;yt!==null;){q=yt;var Ie=q.child;if((q.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=q,yt=Ie;else e:for(q=ke;yt!==null;){if(me=yt,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:vh(9,me)}}catch(_t){pn(me,me.return,_t)}if(me===q){yt=null;break e}var nt=me.sibling;if(nt!==null){nt.return=me.return,yt=nt;break e}yt=me.return}}if(fr=v,_(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(eo,s)}catch{}g=!0}return g}finally{lr=c,Ua.transition=i}}return!1}function Jg(s,i,c){i=nd(c,i),i=mg(s,i,1),s=nn(s,i,1),i=zs(),s!==null&&(so(s,1,i),ta(s,i))}function pn(s,i,c){if(s.tag===3)Jg(s,s,c);else for(;i!==null;){if(i.tag===3){Jg(i,s,c);break}else if(i.tag===1){var g=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(dl===null||!dl.has(g))){s=nd(c,s),s=pg(i,s,1),i=nn(i,s,1),s=zs(),i!==null&&(so(i,1,s),ta(i,s));break}}i=i.return}}function Jv(s,i,c){var g=s.pingCache;g!==null&&g.delete(i),i=zs(),s.pingedLanes|=s.suspendedLanes&c,Xn===s&&(us&c)===c&&(Vn===4||Vn===3&&(us&130023424)===us&&500>Er()-Em?rc(s,0):Lm|=c),ta(s,i)}function Qg(s,i){i===0&&((s.mode&1)===0?i=1:(i=Gs,Gs<<=1,(Gs&130023424)===0&&(Gs=4194304)));var c=zs();s=Sr(s,i),s!==null&&(so(s,i,c),ta(s,c))}function Qv(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),Qg(s,c)}function Xv(s,i){var c=0;switch(s.tag){case 13:var g=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(i),Qg(s,c)}var Xg;Xg=function(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps||ks.current)Zs=!0;else{if((s.lanes&c)===0&&(i.flags&128)===0)return Zs=!1,Bv(s,i,c);Zs=(s.flags&131072)!==0}else Zs=!1,We&&(i.flags&1048576)!==0&&_e(i,X,i.index);switch(i.lanes=0,i.tag){case 2:var g=i.type;yh(s,i),s=i.pendingProps;var v=sl(i,zn.current);Kr(i,c),v=Ql(null,i,g,s,v,c);var S=Ba();return i.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ss(g)?(S=!0,wo(i)):S=!1,i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,$n(i),v.updater=gh,i.stateNode=v,v._reactInternals=i,gm(i,g,s,c),i=vm(null,i,g,!0,S,c)):(i.tag=0,We&&S&&qe(i),qs(null,i,v,c),i=i.child),i;case 16:g=i.elementType;e:{switch(yh(s,i),s=i.pendingProps,v=g._init,g=v(g._payload),i.type=g,v=i.tag=ew(g),s=ii(g,s),v){case 0:i=bm(null,i,g,s,c);break e;case 1:i=kg(null,i,g,s,c);break e;case 11:i=bg(null,i,g,s,c);break e;case 14:i=vg(null,i,g,ii(g.type,s),c);break e}throw Error(n(306,g,""))}return i;case 0:return g=i.type,v=i.pendingProps,v=i.elementType===g?v:ii(g,v),bm(s,i,g,v,c);case 1:return g=i.type,v=i.pendingProps,v=i.elementType===g?v:ii(g,v),kg(s,i,g,v,c);case 3:e:{if(Sg(i),s===null)throw Error(n(387));g=i.pendingProps,S=i.memoizedState,v=S.element,As(s,i),Qn(i,g,null,c);var q=i.memoizedState;if(g=q.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){v=nd(Error(n(423)),i),i=Ag(s,i,g,c,v);break e}else if(g!==v){v=nd(Error(n(424)),i),i=Ag(s,i,g,c,v);break e}else for(Be=cs(i.stateNode.containerInfo.firstChild),Re=i,We=!0,Ke=null,c=zr(i,null,g,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(gt(),g===v){i=jo(s,i,c);break e}qs(s,i,g,c)}i=i.child}return i;case 5:return dh(i),s===null&&vt(i),g=i.type,v=i.pendingProps,S=s!==null?s.memoizedProps:null,q=v.children,Qd(g,v)?q=null:S!==null&&Qd(g,S)&&(i.flags|=32),jg(s,i),qs(s,i,q,c),i.child;case 6:return s===null&&vt(i),null;case 13:return Cg(s,i,c);case 4:return al(i,i.stateNode.containerInfo),g=i.pendingProps,s===null?i.child=hn(i,null,g,c):qs(s,i,g,c),i.child;case 11:return g=i.type,v=i.pendingProps,v=i.elementType===g?v:ii(g,v),bg(s,i,g,v,c);case 7:return qs(s,i,i.pendingProps,c),i.child;case 8:return qs(s,i,i.pendingProps.children,c),i.child;case 12:return qs(s,i,i.pendingProps.children,c),i.child;case 10:e:{if(g=i.type._context,v=i.pendingProps,S=i.memoizedProps,q=v.value,br(jn,g._currentValue),g._currentValue=q,S!==null)if(Nn(S.value,q)){if(S.children===v.children&&!ks.current){i=jo(s,i,c);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var me=S.dependencies;if(me!==null){q=S.child;for(var ve=me.firstContext;ve!==null;){if(ve.context===g){if(S.tag===1){ve=rn(-1,c&-c),ve.tag=2;var Oe=S.updateQueue;if(Oe!==null){Oe=Oe.shared;var tt=Oe.pending;tt===null?ve.next=ve:(ve.next=tt.next,tt.next=ve),Oe.pending=ve}}S.lanes|=c,ve=S.alternate,ve!==null&&(ve.lanes|=c),hr(S.return,c,i),me.lanes|=c;break}ve=ve.next}}else if(S.tag===10)q=S.type===i.type?null:S.child;else if(S.tag===18){if(q=S.return,q===null)throw Error(n(341));q.lanes|=c,me=q.alternate,me!==null&&(me.lanes|=c),hr(q,c,i),q=S.sibling}else q=S.child;if(q!==null)q.return=S;else for(q=S;q!==null;){if(q===i){q=null;break}if(S=q.sibling,S!==null){S.return=q.return,q=S;break}q=q.return}S=q}qs(s,i,v.children,c),i=i.child}return i;case 9:return v=i.type,g=i.pendingProps.children,Kr(i,c),v=Yr(v),g=g(v),i.flags|=1,qs(s,i,g,c),i.child;case 14:return g=i.type,v=ii(g,i.pendingProps),v=ii(g.type,v),vg(s,i,g,v,c);case 15:return wg(s,i,i.type,i.pendingProps,c);case 17:return g=i.type,v=i.pendingProps,v=i.elementType===g?v:ii(g,v),yh(s,i),i.tag=1,Ss(g)?(s=!0,wo(i)):s=!1,Kr(i,c),hg(i,g,v),gm(i,g,v,c),vm(null,i,g,!0,s,c);case 19:return _g(s,i,c);case 22:return Ng(s,i,c)}throw Error(n(156,i.tag))};function Zg(s,i){return Xi(s,i)}function Zv(s,i,c,g){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(s,i,c,g){return new Zv(s,i,c,g)}function Um(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ew(s){if(typeof s=="function")return Um(s)?1:0;if(s!=null){if(s=s.$$typeof,s===I)return 11;if(s===we)return 14}return 2}function ml(s,i){var c=s.alternate;return c===null?(c=qa(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function _h(s,i,c,g,v,S){var q=2;if(g=s,typeof s=="function")Um(s)&&(q=1);else if(typeof s=="string")q=5;else e:switch(s){case J:return sc(c.children,v,S,i);case re:q=8,v|=8;break;case K:return s=qa(12,c,i,v|2),s.elementType=K,s.lanes=S,s;case H:return s=qa(13,c,i,v),s.elementType=H,s.lanes=S,s;case te:return s=qa(19,c,i,v),s.elementType=te,s.lanes=S,s;case $:return Dh(c,v,S,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case de:q=10;break e;case E:q=9;break e;case I:q=11;break e;case we:q=14;break e;case se:q=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return i=qa(q,c,i,v),i.elementType=s,i.type=g,i.lanes=S,i}function sc(s,i,c,g){return s=qa(7,s,g,i),s.lanes=c,s}function Dh(s,i,c,g){return s=qa(22,s,g,i),s.elementType=$,s.lanes=c,s.stateNode={isHidden:!1},s}function qm(s,i,c){return s=qa(6,s,null,i),s.lanes=c,s}function zm(s,i,c){return i=qa(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function tw(s,i,c,g,v){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function $m(s,i,c,g,v,S,q,me,ve){return s=new tw(s,i,c,me,ve),i===1?(i=1,S===!0&&(i|=8)):i=0,S=qa(3,null,null,i),s.current=S,S.stateNode=s,S.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},$n(S),s}function rw(s,i,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:g==null?null:""+g,children:s,containerInfo:i,implementation:c}}function ex(s){if(!s)return Fi;s=s._reactInternals;e:{if(Hr(s)!==s||s.tag!==1)throw Error(n(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ss(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(s.tag===1){var c=s.type;if(Ss(c))return tu(s,c,i)}return i}function tx(s,i,c,g,v,S,q,me,ve){return s=$m(c,g,!0,s,v,S,q,me,ve),s.context=ex(null),c=s.current,g=zs(),v=hl(c),S=rn(g,v),S.callback=i??null,nn(c,S,v),s.current.lanes=v,so(s,v,g),ta(s,g),s}function Lh(s,i,c,g){var v=i.current,S=zs(),q=hl(v);return c=ex(c),i.context===null?i.context=c:i.pendingContext=c,i=rn(S,q),i.payload={element:s},g=g===void 0?null:g,g!==null&&(i.callback=g),s=nn(v,i,q),s!==null&&(ci(s,v,q,S),Jn(s,v,q)),q}function Eh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function rx(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function Vm(s,i){rx(s,i),(s=s.alternate)&&rx(s,i)}function nw(){return null}var nx=typeof reportError=="function"?reportError:function(s){console.error(s)};function Hm(s){this._internalRoot=s}Fh.prototype.render=Hm.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(n(409));Lh(s,i,null,null)},Fh.prototype.unmount=Hm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;tc(function(){Lh(null,s,null,null)}),i[Kn]=null}};function Fh(s){this._internalRoot=s}Fh.prototype.unstable_scheduleHydration=function(s){if(s){var i=Ec();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Pa.length&&i!==0&&i<Pa[c].priority;c++);Pa.splice(c,0,s),c===0&&Ic(s)}};function Wm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ih(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function sx(){}function sw(s,i,c,g,v){if(v){if(typeof g=="function"){var S=g;g=function(){var Oe=Eh(q);S.call(Oe)}}var q=tx(i,g,s,0,null,!1,!1,"",sx);return s._reactRootContainer=q,s[Kn]=q.current,go(s.nodeType===8?s.parentNode:s),tc(),q}for(;v=s.lastChild;)s.removeChild(v);if(typeof g=="function"){var me=g;g=function(){var Oe=Eh(ve);me.call(Oe)}}var ve=$m(s,0,!1,null,null,!1,!1,"",sx);return s._reactRootContainer=ve,s[Kn]=ve.current,go(s.nodeType===8?s.parentNode:s),tc(function(){Lh(i,ve,c,g)}),ve}function Th(s,i,c,g,v){var S=c._reactRootContainer;if(S){var q=S;if(typeof v=="function"){var me=v;v=function(){var ve=Eh(q);me.call(ve)}}Lh(i,q,s,v)}else q=sw(c,i,s,v,g);return Eh(q)}qo=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var c=la(i.pendingLanes);c!==0&&(Uo(i,c|1),ta(i,Er()),(fr&6)===0&&(id=Er()+500,_()))}break;case 13:tc(function(){var g=Sr(s,1);if(g!==null){var v=zs();ci(g,s,1,v)}}),Vm(s,1)}},Fl=function(s){if(s.tag===13){var i=Sr(s,134217728);if(i!==null){var c=zs();ci(i,s,134217728,c)}Vm(s,134217728)}},Lc=function(s){if(s.tag===13){var i=hl(s),c=Sr(s,i);if(c!==null){var g=zs();ci(c,s,i,g)}Vm(s,i)}},Ec=function(){return lr},zo=function(s,i){var c=lr;try{return lr=s,i()}finally{lr=c}},Je=function(s,i,c){switch(i){case"input":if(je(s,c),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var g=c[i];if(g!==s&&g.form===s.form){var v=Yl(g);if(!v)throw Error(n(90));Pe(g),je(g,v)}}}break;case"textarea":Ye(s,c);break;case"select":i=c.value,i!=null&&xe(s,!!c.multiple,i,!1)}},Bt=Rm,wr=tc;var aw={usingClientEntryPoint:!1,Events:[nl,bo,Yl,kt,Dt,Rm]},hu={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iw={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=oa(s),s===null?null:s.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||nw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{eo=Oh.inject(iw),Os=Oh}catch{}}return ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aw,ra.createPortal=function(s,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(i))throw Error(n(200));return rw(s,i,null,c)},ra.createRoot=function(s,i){if(!Wm(s))throw Error(n(299));var c=!1,g="",v=nx;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=$m(s,1,!1,null,null,c,!1,g,v),s[Kn]=i.current,go(s.nodeType===8?s.parentNode:s),new Hm(i)},ra.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=oa(i),s=s===null?null:s.stateNode,s},ra.flushSync=function(s){return tc(s)},ra.hydrate=function(s,i,c){if(!Ih(i))throw Error(n(200));return Th(null,s,i,!0,c)},ra.hydrateRoot=function(s,i,c){if(!Wm(s))throw Error(n(405));var g=c!=null&&c.hydratedSources||null,v=!1,S="",q=nx;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onRecoverableError!==void 0&&(q=c.onRecoverableError)),i=tx(i,null,s,1,c??null,v,!1,S,q),s[Kn]=i.current,go(s),g)for(s=0;s<g.length;s++)c=g[s],v=c._getVersion,v=v(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,v]:i.mutableSourceEagerHydrationData.push(c,v);return new Fh(i)},ra.render=function(s,i,c){if(!Ih(i))throw Error(n(200));return Th(null,s,i,!1,c)},ra.unmountComponentAtNode=function(s){if(!Ih(s))throw Error(n(40));return s._reactRootContainer?(tc(function(){Th(null,null,s,!1,function(){s._reactRootContainer=null,s[Kn]=null})}),!0):!1},ra.unstable_batchedUpdates=Rm,ra.unstable_renderSubtreeIntoContainer=function(s,i,c,g){if(!Ih(c))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Th(s,i,c,!1,g)},ra.version="18.3.1-next-f1338f8080-20240426",ra}var hx;function U1(){if(hx)return Ym.exports;hx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Ym.exports=pw(),Ym.exports}var fx;function gw(){if(fx)return Rh;fx=1;var e=U1();return Rh.createRoot=e.createRoot,Rh.hydrateRoot=e.hydrateRoot,Rh}var xw=gw();const yw=B1(xw);var Xm={exports:{}},Zm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function bw(){if(mx)return Zm;mx=1;var e=Mf();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,d=e.useMemo,u=e.useDebugValue;return Zm.useSyncExternalStoreWithSelector=function(h,p,m,b,j){var y=o(null);if(y.current===null){var A={hasValue:!1,value:null};y.current=A}else A=y.current;y=d(function(){function N(U){if(!C){if(C=!0,F=U,U=b(U),j!==void 0&&A.hasValue){var Q=A.value;if(j(Q,U))return D=Q}return D=U}if(Q=D,n(F,U))return Q;var J=b(U);return j!==void 0&&j(Q,J)?(F=U,Q):(F=U,D=J)}var C=!1,F,D,M=m===void 0?null:m;return[function(){return N(p())},M===null?void 0:function(){return N(M())}]},[p,m,b,j]);var P=a(h,y[0],y[1]);return l(function(){A.hasValue=!0,A.value=P},[P]),u(P),P},Zm}var px;function vw(){return px||(px=1,Xm.exports=bw()),Xm.exports}var ww=vw();function Nw(e){e()}function jw(){let e=null,r=null;return{clear(){e=null,r=null},notify(){Nw(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var gx={notify(){},get:()=>[]};function kw(e,r){let n,a=gx,o=0,l=!1;function d(P){m();const N=a.subscribe(P);let C=!1;return()=>{C||(C=!0,N(),b())}}function u(){a.notify()}function h(){A.onStateChange&&A.onStateChange()}function p(){return l}function m(){o++,n||(n=e.subscribe(h),a=jw())}function b(){o--,n&&o===0&&(n(),n=void 0,a.clear(),a=gx)}function j(){l||(l=!0,m())}function y(){l&&(l=!1,b())}const A={addNestedSub:d,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:p,trySubscribe:j,tryUnsubscribe:y,getListeners:()=>a};return A}var Sw=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Aw=Sw(),Cw=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Pw=Cw(),_w=()=>Aw||Pw?O.useLayoutEffect:O.useEffect,Dw=_w(),Lw=Symbol.for("react-redux-context"),Ew=typeof globalThis<"u"?globalThis:{};function Fw(){if(!O.createContext)return{};const e=Ew[Lw]??=new Map;let r=e.get(O.createContext);return r||(r=O.createContext(null),e.set(O.createContext,r)),r}var Sl=Fw();function Iw(e){const{children:r,context:n,serverState:a,store:o}=e,l=O.useMemo(()=>{const h=kw(o);return{store:o,subscription:h,getServerState:a?()=>a:void 0}},[o,a]),d=O.useMemo(()=>o.getState(),[o]);Dw(()=>{const{subscription:h}=l;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[l,d]);const u=n||Sl;return O.createElement(u.Provider,{value:l},r)}var Tw=Iw;function S0(e=Sl){return function(){return O.useContext(e)}}var q1=S0();function z1(e=Sl){const r=e===Sl?q1:S0(e),n=()=>{const{store:a}=r();return a};return Object.assign(n,{withTypes:()=>n}),n}var Ow=z1();function Rw(e=Sl){const r=e===Sl?Ow:z1(e),n=()=>r().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var rs=Rw(),Mw=(e,r)=>e===r;function Bw(e=Sl){const r=e===Sl?q1:S0(e),n=(a,o={})=>{const{equalityFn:l=Mw}=typeof o=="function"?{equalityFn:o}:o,d=r(),{store:u,subscription:h,getServerState:p}=d;O.useRef(!0);const m=O.useCallback({[a.name](j){return a(j)}}[a.name],[a]),b=ww.useSyncExternalStoreWithSelector(h.addNestedSub,u.getState,p||u.getState,m,l);return O.useDebugValue(b),b};return Object.assign(n,{withTypes:()=>n}),n}var Ht=Bw(),Bf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Uf=typeof window>"u"||"Deno"in globalThis;function ui(){}function Uw(e,r){return typeof e=="function"?e(r):e}function qw(e){return typeof e=="number"&&e>=0&&e!==1/0}function zw(e,r){return Math.max(e+(r||0)-Date.now(),0)}function zp(e,r){return typeof e=="function"?e(r):e}function $w(e,r){return typeof e=="function"?e(r):e}function xx(e,r){const{type:n="all",exact:a,fetchStatus:o,predicate:l,queryKey:d,stale:u}=e;if(d){if(a){if(r.queryHash!==A0(d,r.options))return!1}else if(!Iu(r.queryKey,d))return!1}if(n!=="all"){const h=r.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||o&&o!==r.state.fetchStatus||l&&!l(r))}function yx(e,r){const{exact:n,status:a,predicate:o,mutationKey:l}=e;if(l){if(!r.options.mutationKey)return!1;if(n){if(Fu(r.options.mutationKey)!==Fu(l))return!1}else if(!Iu(r.options.mutationKey,l))return!1}return!(a&&r.state.status!==a||o&&!o(r))}function A0(e,r){return(r?.queryKeyHashFn||Fu)(e)}function Fu(e){return JSON.stringify(e,(r,n)=>$p(n)?Object.keys(n).sort().reduce((a,o)=>(a[o]=n[o],a),{}):n)}function Iu(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(n=>Iu(e[n],r[n])):!1}function $1(e,r){if(e===r)return e;const n=bx(e)&&bx(r);if(n||$p(e)&&$p(r)){const a=n?e:Object.keys(e),o=a.length,l=n?r:Object.keys(r),d=l.length,u=n?[]:{},h=new Set(a);let p=0;for(let m=0;m<d;m++){const b=n?m:l[m];(!n&&h.has(b)||n)&&e[b]===void 0&&r[b]===void 0?(u[b]=void 0,p++):(u[b]=$1(e[b],r[b]),u[b]===e[b]&&e[b]!==void 0&&p++)}return o===d&&p===o?e:u}return r}function bx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $p(e){if(!vx(e))return!1;const r=e.constructor;if(r===void 0)return!0;const n=r.prototype;return!(!vx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vx(e){return Object.prototype.toString.call(e)==="[object Object]"}function Vw(e){return new Promise(r=>{setTimeout(r,e)})}function Hw(e,r,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,r):n.structuralSharing!==!1?$1(e,r):r}function Ww(e,r,n=0){const a=[...e,r];return n&&a.length>n?a.slice(1):a}function Gw(e,r,n=0){const a=[r,...e];return n&&a.length>n?a.slice(0,-1):a}var C0=Symbol();function V1(e,r){return!e.queryFn&&r?.initialPromise?()=>r.initialPromise:!e.queryFn||e.queryFn===C0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Kw=class extends Bf{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Uf&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},H1=new Kw,Yw=class extends Bf{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Uf&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},vf=new Yw;function Jw(){let e,r;const n=new Promise((o,l)=>{e=o,r=l});n.status="pending",n.catch(()=>{});function a(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{a({status:"fulfilled",value:o}),e(o)},n.reject=o=>{a({status:"rejected",reason:o}),r(o)},n}function Qw(e){return Math.min(1e3*2**e,3e4)}function W1(e){return(e??"online")==="online"?vf.isOnline():!0}var Vp=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function G1(e){let r=!1,n=0,a;const o=Jw(),l=()=>o.status!=="pending",d=P=>{if(!l()){const N=new Vp(P);j(N),e.onCancel?.(N)}},u=()=>{r=!0},h=()=>{r=!1},p=()=>H1.isFocused()&&(e.networkMode==="always"||vf.isOnline())&&e.canRun(),m=()=>W1(e.networkMode)&&e.canRun(),b=P=>{l()||(a?.(),o.resolve(P))},j=P=>{l()||(a?.(),o.reject(P))},y=()=>new Promise(P=>{a=N=>{(l()||p())&&P(N)},e.onPause?.()}).then(()=>{a=void 0,l()||e.onContinue?.()}),A=()=>{if(l())return;let P;const N=n===0?e.initialPromise:void 0;try{P=N??e.fn()}catch(C){P=Promise.reject(C)}Promise.resolve(P).then(b).catch(C=>{if(l())return;const F=e.retry??(Uf?0:3),D=e.retryDelay??Qw,M=typeof D=="function"?D(n,C):D,U=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,C);if(r||!U){j(C);return}n++,e.onFail?.(n,C),Vw(M).then(()=>p()?void 0:y()).then(()=>{r?j(C):A()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(a?.(),o),cancelRetry:u,continueRetry:h,canStart:m,start:()=>(m()?A():y().then(A),o)}}var Xw=e=>setTimeout(e,0);function Zw(){let e=[],r=0,n=u=>{u()},a=u=>{u()},o=Xw;const l=u=>{r?e.push(u):o(()=>{n(u)})},d=()=>{const u=e;e=[],u.length&&o(()=>{a(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;r++;try{h=u()}finally{r--,r||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{o=u}}}var Vs=Zw(),K1=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qw(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Uf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},e5=class extends K1{#e;#t;#r;#s;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=r5(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,r){const n=Hw(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),n}setState(e,r){this.#a({type:"setState",state:e,setStateOptions:r})}cancel(e){const r=this.#n?.promise;return this.#n?.cancel(e),r?r.then(ui).catch(ui):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>$w(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===C0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zp(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zw(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,r){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},o=()=>{const u=V1(this.options,r),p=(()=>{const m={client:this.#s,queryKey:this.queryKey,meta:this.meta};return a(m),m})();return this.#o=!1,this.options.persister?this.options.persister(u,p,this):u(p)},d=(()=>{const u={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return a(u),u})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#n=G1({initialPromise:r?.initialPromise,fn:d.fetchFn,onCancel:u=>{u instanceof Vp&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,h)=>{this.#a({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const u=await this.#n.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Vp){if(u.silent)return this.#n.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...t5(n.data,this.options),fetchMeta:e.meta??null};case"success":const a={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Vs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function t5(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W1(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function r5(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,n=r!==void 0,a=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var n5=class extends Bf{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,r,n){const a=r.queryKey,o=r.queryHash??A0(a,r);let l=this.get(o);return l||(l=new e5({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=this.#e.get(e.queryHash);r&&(e.destroy(),r===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>xx(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>xx(e,n)):r}notify(e){Vs.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Vs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},s5=class extends K1{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||a5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(r=>r!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const r=()=>{this.#s({type:"continue"})};this.#r=G1({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#s({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",a=!this.#r.canStart();try{if(n)r();else{this.#s({type:"pending",variables:e,isPaused:a}),await this.#t.config.onMutate?.(e,this);const l=await this.options.onMutate?.(e);l!==this.state.context&&this.#s({type:"pending",context:l,variables:e,isPaused:a})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,e,this.state.context,this),await this.options.onSuccess?.(o,e,this.state.context),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,e,this.state.context),this.#s({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,e,this.state.context,this),await this.options.onError?.(o,e,this.state.context),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,e,this.state.context),o}finally{this.#s({type:"error",error:o})}}finally{this.#t.runNext(this)}}#s(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function a5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var i5=class extends Bf{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,r,n){const a=new s5({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(r),state:n});return this.add(a),a}add(e){this.#e.add(e);const r=Mh(e);if(typeof r=="string"){const n=this.#t.get(r);n?n.push(e):this.#t.set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const r=Mh(e);if(typeof r=="string"){const n=this.#t.get(r);if(n)if(n.length>1){const a=n.indexOf(e);a!==-1&&n.splice(a,1)}else n[0]===e&&this.#t.delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Mh(e);if(typeof r=="string"){const a=this.#t.get(r)?.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){const r=Mh(e);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Vs.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const r={exact:!0,...e};return this.getAll().find(n=>yx(r,n))}findAll(e={}){return this.getAll().filter(r=>yx(e,r))}notify(e){Vs.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Vs.batch(()=>Promise.all(e.map(r=>r.continue().catch(ui))))}};function Mh(e){return e.options.scope?.id}function wx(e){return{onFetch:(r,n)=>{const a=r.options,o=r.fetchOptions?.meta?.fetchMore?.direction,l=r.state.data?.pages||[],d=r.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let m=!1;const b=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(r.signal.aborted?m=!0:r.signal.addEventListener("abort",()=>{m=!0}),r.signal)})},j=V1(r.options,r.fetchOptions),y=async(A,P,N)=>{if(m)return Promise.reject();if(P==null&&A.pages.length)return Promise.resolve(A);const F=(()=>{const Q={client:r.client,queryKey:r.queryKey,pageParam:P,direction:N?"backward":"forward",meta:r.options.meta};return b(Q),Q})(),D=await j(F),{maxPages:M}=r.options,U=N?Gw:Ww;return{pages:U(A.pages,D,M),pageParams:U(A.pageParams,P,M)}};if(o&&l.length){const A=o==="backward",P=A?o5:Nx,N={pages:l,pageParams:d},C=P(a,N);u=await y(N,C,A)}else{const A=e??l.length;do{const P=h===0?d[0]??a.initialPageParam:Nx(a,u);if(h>0&&P==null)break;u=await y(u,P),h++}while(h<A)}return u};r.options.persister?r.fetchFn=()=>r.options.persister?.(p,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},n):r.fetchFn=p}}}function Nx(e,{pages:r,pageParams:n}){const a=r.length-1;return r.length>0?e.getNextPageParam(r[a],r,n[a],n):void 0}function o5(e,{pages:r,pageParams:n}){return r.length>0?e.getPreviousPageParam?.(r[0],r,n[0],n):void 0}var l5=class{#e;#t;#r;#s;#n;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new n5,this.#t=e.mutationCache||new i5,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=H1.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=vf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),n=this.#e.build(this,r),a=n.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(zp(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:r,state:n})=>{const a=n.data;return[r,a]})}setQueryData(e,r,n){const a=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(a.queryHash)?.state.data,d=Uw(r,l);if(d!==void 0)return this.#e.build(this,a).setData(d,{...n,manual:!0})}setQueriesData(e,r,n){return Vs.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,r,n)]))}getQueryState(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state}removeQueries(e){const r=this.#e;Vs.batch(()=>{r.findAll(e).forEach(n=>{r.remove(n)})})}resetQueries(e,r){const n=this.#e;return Vs.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const n={revert:!0,...r},a=Vs.batch(()=>this.#e.findAll(e).map(o=>o.cancel(n)));return Promise.all(a).then(ui).catch(ui)}invalidateQueries(e,r={}){return Vs.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},r)))}refetchQueries(e,r={}){const n={...r,cancelRefetch:r.cancelRefetch??!0},a=Vs.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,n);return n.throwOnError||(l=l.catch(ui)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(ui)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const n=this.#e.build(this,r);return n.isStaleByTime(zp(r.staleTime,n))?n.fetch(r):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ui).catch(ui)}fetchInfiniteQuery(e){return e.behavior=wx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ui).catch(ui)}ensureInfiniteQueryData(e){return e.behavior=wx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return vf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,r){this.#s.set(Fu(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...this.#s.values()],n={};return r.forEach(a=>{Iu(e,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(e,r){this.#n.set(Fu(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...this.#n.values()],n={};return r.forEach(a=>{Iu(e,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const r={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=A0(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===C0&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},c5=O.createContext(void 0),d5=({client:e,children:r})=>(O.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(c5.Provider,{value:e,children:r}));U1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tu.apply(this,arguments)}var wl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(wl||(wl={}));const jx="popstate";function u5(e){e===void 0&&(e={});function r(a,o){let{pathname:l,search:d,hash:u}=a.location;return Hp("",{pathname:l,search:d,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:wf(o)}return f5(r,n,null,e)}function _n(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Y1(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function h5(){return Math.random().toString(36).substr(2,8)}function kx(e,r){return{usr:e.state,key:e.key,idx:r}}function Hp(e,r,n,a){return n===void 0&&(n=null),Tu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Ld(r):r,{state:n,key:r&&r.key||a||h5()})}function wf(e){let{pathname:r="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Ld(e){let r={};if(e){let n=e.indexOf("#");n>=0&&(r.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(r.search=e.substr(a),e=e.substr(0,a)),e&&(r.pathname=e)}return r}function f5(e,r,n,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,u=wl.Pop,h=null,p=m();p==null&&(p=0,d.replaceState(Tu({},d.state,{idx:p}),""));function m(){return(d.state||{idx:null}).idx}function b(){u=wl.Pop;let N=m(),C=N==null?null:N-p;p=N,h&&h({action:u,location:P.location,delta:C})}function j(N,C){u=wl.Push;let F=Hp(P.location,N,C);p=m()+1;let D=kx(F,p),M=P.createHref(F);try{d.pushState(D,"",M)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(M)}l&&h&&h({action:u,location:P.location,delta:1})}function y(N,C){u=wl.Replace;let F=Hp(P.location,N,C);p=m();let D=kx(F,p),M=P.createHref(F);d.replaceState(D,"",M),l&&h&&h({action:u,location:P.location,delta:0})}function A(N){let C=o.location.origin!=="null"?o.location.origin:o.location.href,F=typeof N=="string"?N:wf(N);return F=F.replace(/ $/,"%20"),_n(C,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,C)}let P={get action(){return u},get location(){return e(o,d)},listen(N){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(jx,b),h=N,()=>{o.removeEventListener(jx,b),h=null}},createHref(N){return r(o,N)},createURL:A,encodeLocation(N){let C=A(N);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:j,replace:y,go(N){return d.go(N)}};return P}var Sx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Sx||(Sx={}));function m5(e,r,n){return n===void 0&&(n="/"),p5(e,r,n)}function p5(e,r,n,a){let o=typeof r=="string"?Ld(r):r,l=P0(o.pathname||"/",n);if(l==null)return null;let d=J1(e);g5(d);let u=null;for(let h=0;u==null&&h<d.length;++h){let p=P5(l);u=S5(d[h],p)}return u}function J1(e,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let o=(l,d,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};h.relativePath.startsWith("/")&&(_n(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let p=jl([a,h.relativePath]),m=n.concat(h);l.children&&l.children.length>0&&(_n(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),J1(l.children,r,m,p)),!(l.path==null&&!l.index)&&r.push({path:p,score:j5(p,l.index),routesMeta:m})};return e.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))o(l,d);else for(let h of Q1(l.path))o(l,d,h)}),r}function Q1(e){let r=e.split("/");if(r.length===0)return[];let[n,...a]=r,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=Q1(a.join("/")),u=[];return u.push(...d.map(h=>h===""?l:[l,h].join("/"))),o&&u.push(...d),u.map(h=>e.startsWith("/")&&h===""?"/":h)}function g5(e){e.sort((r,n)=>r.score!==n.score?n.score-r.score:k5(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const x5=/^:[\w-]+$/,y5=3,b5=2,v5=1,w5=10,N5=-2,Ax=e=>e==="*";function j5(e,r){let n=e.split("/"),a=n.length;return n.some(Ax)&&(a+=N5),r&&(a+=b5),n.filter(o=>!Ax(o)).reduce((o,l)=>o+(x5.test(l)?y5:l===""?v5:w5),a)}function k5(e,r){return e.length===r.length&&e.slice(0,-1).every((a,o)=>a===r[o])?e[e.length-1]-r[r.length-1]:0}function S5(e,r,n){let{routesMeta:a}=e,o={},l="/",d=[];for(let u=0;u<a.length;++u){let h=a[u],p=u===a.length-1,m=l==="/"?r:r.slice(l.length)||"/",b=A5({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),j=h.route;if(!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:jl([l,b.pathname]),pathnameBase:E5(jl([l,b.pathnameBase])),route:j}),b.pathnameBase!=="/"&&(l=jl([l,b.pathnameBase]))}return d}function A5(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=C5(e.path,e.caseSensitive,e.end),o=r.match(n);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:a.reduce((p,m,b)=>{let{paramName:j,isOptional:y}=m;if(j==="*"){let P=u[b]||"";d=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?p[j]=void 0:p[j]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:d,pattern:e}}function C5(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Y1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,h)=>(a.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),a]}function P5(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Y1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function P0(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function _5(e,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:o=""}=typeof e=="string"?Ld(e):e;return{pathname:n?n.startsWith("/")?n:D5(n,r):r,search:F5(a),hash:I5(o)}}function D5(e,r){let n=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ep(e,r,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L5(e){return e.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function _0(e,r){let n=L5(e);return r?n.map((a,o)=>o===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function D0(e,r,n,a){a===void 0&&(a=!1);let o;typeof e=="string"?o=Ld(e):(o=Tu({},e),_n(!o.pathname||!o.pathname.includes("?"),ep("?","pathname","search",o)),_n(!o.pathname||!o.pathname.includes("#"),ep("#","pathname","hash",o)),_n(!o.search||!o.search.includes("#"),ep("#","search","hash",o)));let l=e===""||o.pathname==="",d=l?"/":o.pathname,u;if(d==null)u=n;else{let b=r.length-1;if(!a&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),b-=1;o.pathname=j.join("/")}u=b>=0?r[b]:"/"}let h=_5(o,u),p=d&&d!=="/"&&d.endsWith("/"),m=(l||d===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}const jl=e=>e.join("/").replace(/\/\/+/g,"/"),E5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,I5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const X1=["post","put","patch","delete"];new Set(X1);const O5=["get",...X1];new Set(O5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ou.apply(this,arguments)}const L0=O.createContext(null),R5=O.createContext(null),Dl=O.createContext(null),qf=O.createContext(null),Yi=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Z1=O.createContext(null);function M5(e,r){let{relative:n}=r===void 0?{}:r;Ed()||_n(!1);let{basename:a,navigator:o}=O.useContext(Dl),{hash:l,pathname:d,search:u}=tb(e,{relative:n}),h=d;return a!=="/"&&(h=d==="/"?a:jl([a,d])),o.createHref({pathname:h,search:u,hash:l})}function Ed(){return O.useContext(qf)!=null}function Nc(){return Ed()||_n(!1),O.useContext(qf).location}function eb(e){O.useContext(Dl).static||O.useLayoutEffect(e)}function xi(){let{isDataRoute:e}=O.useContext(Yi);return e?Z5():B5()}function B5(){Ed()||_n(!1);let e=O.useContext(L0),{basename:r,future:n,navigator:a}=O.useContext(Dl),{matches:o}=O.useContext(Yi),{pathname:l}=Nc(),d=JSON.stringify(_0(o,n.v7_relativeSplatPath)),u=O.useRef(!1);return eb(()=>{u.current=!0}),O.useCallback(function(p,m){if(m===void 0&&(m={}),!u.current)return;if(typeof p=="number"){a.go(p);return}let b=D0(p,JSON.parse(d),l,m.relative==="path");e==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:jl([r,b.pathname])),(m.replace?a.replace:a.push)(b,m.state,m)},[r,a,d,l,e])}const U5=O.createContext(null);function q5(e){let r=O.useContext(Yi).outlet;return r&&O.createElement(U5.Provider,{value:e},r)}function E0(){let{matches:e}=O.useContext(Yi),r=e[e.length-1];return r?r.params:{}}function tb(e,r){let{relative:n}=r===void 0?{}:r,{future:a}=O.useContext(Dl),{matches:o}=O.useContext(Yi),{pathname:l}=Nc(),d=JSON.stringify(_0(o,a.v7_relativeSplatPath));return O.useMemo(()=>D0(e,JSON.parse(d),l,n==="path"),[e,d,l,n])}function z5(e,r){return $5(e,r)}function $5(e,r,n,a){Ed()||_n(!1);let{navigator:o}=O.useContext(Dl),{matches:l}=O.useContext(Yi),d=l[l.length-1],u=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let p=Nc(),m;if(r){var b;let N=typeof r=="string"?Ld(r):r;h==="/"||(b=N.pathname)!=null&&b.startsWith(h)||_n(!1),m=N}else m=p;let j=m.pathname||"/",y=j;if(h!=="/"){let N=h.replace(/^\//,"").split("/");y="/"+j.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=m5(e,{pathname:y}),P=K5(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:jl([h,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:jl([h,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,a);return r&&P?O.createElement(qf.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:wl.Pop}},P):P}function V5(){let e=X5(),r=T5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},r),n?O.createElement("pre",{style:o},n):null,null)}const H5=O.createElement(V5,null);class W5 extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?O.createElement(Yi.Provider,{value:this.props.routeContext},O.createElement(Z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G5(e){let{routeContext:r,match:n,children:a}=e,o=O.useContext(L0);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Yi.Provider,{value:r},a)}function K5(e,r,n,a){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,u=(o=n)==null?void 0:o.errors;if(u!=null){let m=d.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);m>=0||_n(!1),d=d.slice(0,Math.min(d.length,m+1))}let h=!1,p=-1;if(n&&a&&a.v7_partialHydration)for(let m=0;m<d.length;m++){let b=d[m];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=m),b.route.id){let{loaderData:j,errors:y}=n,A=b.route.loader&&j[b.route.id]===void 0&&(!y||y[b.route.id]===void 0);if(b.route.lazy||A){h=!0,p>=0?d=d.slice(0,p+1):d=[d[0]];break}}}return d.reduceRight((m,b,j)=>{let y,A=!1,P=null,N=null;n&&(y=u&&b.route.id?u[b.route.id]:void 0,P=b.route.errorElement||H5,h&&(p<0&&j===0?(eN("route-fallback"),A=!0,N=null):p===j&&(A=!0,N=b.route.hydrateFallbackElement||null)));let C=r.concat(d.slice(0,j+1)),F=()=>{let D;return y?D=P:A?D=N:b.route.Component?D=O.createElement(b.route.Component,null):b.route.element?D=b.route.element:D=m,O.createElement(G5,{match:b,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:D})};return n&&(b.route.ErrorBoundary||b.route.errorElement||j===0)?O.createElement(W5,{location:n.location,revalidation:n.revalidation,component:P,error:y,children:F(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):F()},null)}var rb=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(rb||{}),nb=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(nb||{});function Y5(e){let r=O.useContext(L0);return r||_n(!1),r}function J5(e){let r=O.useContext(R5);return r||_n(!1),r}function Q5(e){let r=O.useContext(Yi);return r||_n(!1),r}function sb(e){let r=Q5(),n=r.matches[r.matches.length-1];return n.route.id||_n(!1),n.route.id}function X5(){var e;let r=O.useContext(Z1),n=J5(),a=sb();return r!==void 0?r:(e=n.errors)==null?void 0:e[a]}function Z5(){let{router:e}=Y5(rb.UseNavigateStable),r=sb(nb.UseNavigateStable),n=O.useRef(!1);return eb(()=>{n.current=!0}),O.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Ou({fromRouteId:r},l)))},[e,r])}const Cx={};function eN(e,r,n){Cx[e]||(Cx[e]=!0)}function tN(e,r){e?.v7_startTransition,e?.v7_relativeSplatPath}function Ui(e){let{to:r,replace:n,state:a,relative:o}=e;Ed()||_n(!1);let{future:l,static:d}=O.useContext(Dl),{matches:u}=O.useContext(Yi),{pathname:h}=Nc(),p=xi(),m=D0(r,_0(u,l.v7_relativeSplatPath),h,o==="path"),b=JSON.stringify(m);return O.useEffect(()=>p(JSON.parse(b),{replace:n,state:a,relative:o}),[p,b,o,n,a]),null}function ab(e){return q5(e.context)}function sr(e){_n(!1)}function rN(e){let{basename:r="/",children:n=null,location:a,navigationType:o=wl.Pop,navigator:l,static:d=!1,future:u}=e;Ed()&&_n(!1);let h=r.replace(/^\/*/,"/"),p=O.useMemo(()=>({basename:h,navigator:l,static:d,future:Ou({v7_relativeSplatPath:!1},u)}),[h,u,l,d]);typeof a=="string"&&(a=Ld(a));let{pathname:m="/",search:b="",hash:j="",state:y=null,key:A="default"}=a,P=O.useMemo(()=>{let N=P0(m,h);return N==null?null:{location:{pathname:N,search:b,hash:j,state:y,key:A},navigationType:o}},[h,m,b,j,y,A,o]);return P==null?null:O.createElement(Dl.Provider,{value:p},O.createElement(qf.Provider,{children:n,value:P}))}function nN(e){let{children:r,location:n}=e;return z5(Wp(r),n)}new Promise(()=>{});function Wp(e,r){r===void 0&&(r=[]);let n=[];return O.Children.forEach(e,(a,o)=>{if(!O.isValidElement(a))return;let l=[...r,o];if(a.type===O.Fragment){n.push.apply(n,Wp(a.props.children,l));return}a.type!==sr&&_n(!1),!a.props.index||!a.props.children||_n(!1);let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Wp(a.props.children,l)),n.push(d)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gp.apply(this,arguments)}function sN(e,r){if(e==null)return{};var n={},a=Object.keys(e),o,l;for(l=0;l<a.length;l++)o=a[l],!(r.indexOf(o)>=0)&&(n[o]=e[o]);return n}function aN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iN(e,r){return e.button===0&&(!r||r==="_self")&&!aN(e)}function Kp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,n)=>{let a=e[n];return r.concat(Array.isArray(a)?a.map(o=>[n,o]):[[n,a]])},[]))}function oN(e,r){let n=Kp(e);return r&&r.forEach((a,o)=>{n.has(o)||r.getAll(o).forEach(l=>{n.append(o,l)})}),n}const lN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cN="6";try{window.__reactRouterVersion=cN}catch{}const dN="startTransition",Px=hw[dN];function uN(e){let{basename:r,children:n,future:a,window:o}=e,l=O.useRef();l.current==null&&(l.current=u5({window:o,v5Compat:!0}));let d=l.current,[u,h]=O.useState({action:d.action,location:d.location}),{v7_startTransition:p}=a||{},m=O.useCallback(b=>{p&&Px?Px(()=>h(b)):h(b)},[h,p]);return O.useLayoutEffect(()=>d.listen(m),[d,m]),O.useEffect(()=>tN(a),[a]),O.createElement(rN,{basename:r,children:n,location:u.location,navigationType:u.action,navigator:d,future:a})}const hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wi=O.forwardRef(function(r,n){let{onClick:a,relative:o,reloadDocument:l,replace:d,state:u,target:h,to:p,preventScrollReset:m,viewTransition:b}=r,j=sN(r,lN),{basename:y}=O.useContext(Dl),A,P=!1;if(typeof p=="string"&&fN.test(p)&&(A=p,hN))try{let D=new URL(window.location.href),M=p.startsWith("//")?new URL(D.protocol+p):new URL(p),U=P0(M.pathname,y);M.origin===D.origin&&U!=null?p=U+M.search+M.hash:P=!0}catch{}let N=M5(p,{relative:o}),C=mN(p,{replace:d,state:u,target:h,preventScrollReset:m,relative:o,viewTransition:b});function F(D){a&&a(D),D.defaultPrevented||C(D)}return O.createElement("a",Gp({},j,{href:A||N,onClick:P||l?a:F,ref:n,target:h}))});var _x;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_x||(_x={}));var Dx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dx||(Dx={}));function mN(e,r){let{target:n,replace:a,state:o,preventScrollReset:l,relative:d,viewTransition:u}=r===void 0?{}:r,h=xi(),p=Nc(),m=tb(e,{relative:d});return O.useCallback(b=>{if(iN(b,n)){b.preventDefault();let j=a!==void 0?a:wf(p)===wf(m);h(e,{replace:j,state:o,preventScrollReset:l,relative:d,viewTransition:u})}},[p,h,m,a,o,n,e,l,d,u])}function Fd(e){let r=O.useRef(Kp(e)),n=O.useRef(!1),a=Nc(),o=O.useMemo(()=>oN(a.search,n.current?null:r.current),[a.search]),l=xi(),d=O.useCallback((u,h)=>{const p=Kp(typeof u=="function"?u(o):u);n.current=!0,l("?"+p,h)},[l,o]);return[o,d]}let pN={data:""},gN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||pN,xN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yN=/\/\*[^]*?\*\/|  +/g,Lx=/\n+/g,yl=(e,r)=>{let n="",a="",o="";for(let l in e){let d=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+d+";":a+=l[1]=="f"?yl(d,l):l+"{"+yl(d,l[1]=="k"?"":r)+"}":typeof d=="object"?a+=yl(d,r?r.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):d!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=yl.p?yl.p(l,d):l+":"+d+";")}return n+(r&&o?r+"{"+o+"}":o)+a},So={},ib=e=>{if(typeof e=="object"){let r="";for(let n in e)r+=n+ib(e[n]);return r}return e},bN=(e,r,n,a,o)=>{let l=ib(e),d=So[l]||(So[l]=(h=>{let p=0,m=11;for(;p<h.length;)m=101*m+h.charCodeAt(p++)>>>0;return"go"+m})(l));if(!So[d]){let h=l!==e?e:(p=>{let m,b,j=[{}];for(;m=xN.exec(p.replace(yN,""));)m[4]?j.shift():m[3]?(b=m[3].replace(Lx," ").trim(),j.unshift(j[0][b]=j[0][b]||{})):j[0][m[1]]=m[2].replace(Lx," ").trim();return j[0]})(e);So[d]=yl(o?{["@keyframes "+d]:h}:h,n?"":"."+d)}let u=n&&So.g?So.g:null;return n&&(So.g=So[d]),((h,p,m,b)=>{b?p.data=p.data.replace(b,h):p.data.indexOf(h)===-1&&(p.data=m?h+p.data:p.data+h)})(So[d],r,a,u),d},vN=(e,r,n)=>e.reduce((a,o,l)=>{let d=r[l];if(d&&d.call){let u=d(n),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;d=h?"."+h:u&&typeof u=="object"?u.props?"":yl(u,""):u===!1?"":u}return a+o+(d??"")},"");function zf(e){let r=this||{},n=e.call?e(r.p):e;return bN(n.unshift?n.raw?vN(n,[].slice.call(arguments,1),r.p):n.reduce((a,o)=>Object.assign(a,o&&o.call?o(r.p):o),{}):n,gN(r.target),r.g,r.o,r.k)}let ob,Yp,Jp;zf.bind({g:1});let Eo=zf.bind({k:1});function wN(e,r,n,a){yl.p=r,ob=e,Yp=n,Jp=a}function Ll(e,r){let n=this||{};return function(){let a=arguments;function o(l,d){let u=Object.assign({},l),h=u.className||o.className;n.p=Object.assign({theme:Yp&&Yp()},u),n.o=/ *go\d+/.test(h),u.className=zf.apply(n,a)+(h?" "+h:"");let p=e;return e[0]&&(p=u.as||e,delete u.as),Jp&&p[0]&&Jp(u),ob(p,u)}return o}}var NN=e=>typeof e=="function",Nf=(e,r)=>NN(e)?e(r):e,jN=(()=>{let e=0;return()=>(++e).toString()})(),lb=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");e=!r||r.matches}return e}})(),kN=20,F0="default",cb=(e,r)=>{let{toastLimit:n}=e.settings;switch(r.type){case 0:return{...e,toasts:[r.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(d=>d.id===r.toast.id?{...d,...r.toast}:d)};case 2:let{toast:a}=r;return cb(e,{type:e.toasts.find(d=>d.id===a.id)?1:0,toast:a});case 3:let{toastId:o}=r;return{...e,toasts:e.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return r.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(d=>d.id!==r.toastId)};case 5:return{...e,pausedAt:r.time};case 6:let l=r.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+l}))}}},Zh=[],db={toasts:[],pausedAt:void 0,settings:{toastLimit:kN}},$i={},ub=(e,r=F0)=>{$i[r]=cb($i[r]||db,e),Zh.forEach(([n,a])=>{n===r&&a($i[r])})},hb=e=>Object.keys($i).forEach(r=>ub(e,r)),SN=e=>Object.keys($i).find(r=>$i[r].toasts.some(n=>n.id===e)),$f=(e=F0)=>r=>{ub(r,e)},AN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CN=(e={},r=F0)=>{let[n,a]=O.useState($i[r]||db),o=O.useRef($i[r]);O.useEffect(()=>(o.current!==$i[r]&&a($i[r]),Zh.push([r,a]),()=>{let d=Zh.findIndex(([u])=>u===r);d>-1&&Zh.splice(d,1)}),[r]);let l=n.toasts.map(d=>{var u,h,p;return{...e,...e[d.type],...d,removeDelay:d.removeDelay||((u=e[d.type])==null?void 0:u.removeDelay)||e?.removeDelay,duration:d.duration||((h=e[d.type])==null?void 0:h.duration)||e?.duration||AN[d.type],style:{...e.style,...(p=e[d.type])==null?void 0:p.style,...d.style}}});return{...n,toasts:l}},PN=(e,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||jN()}),$u=e=>(r,n)=>{let a=PN(r,e,n);return $f(a.toasterId||SN(a.id))({type:2,toast:a}),a.id},Hn=(e,r)=>$u("blank")(e,r);Hn.error=$u("error");Hn.success=$u("success");Hn.loading=$u("loading");Hn.custom=$u("custom");Hn.dismiss=(e,r)=>{let n={type:3,toastId:e};r?$f(r)(n):hb(n)};Hn.dismissAll=e=>Hn.dismiss(void 0,e);Hn.remove=(e,r)=>{let n={type:4,toastId:e};r?$f(r)(n):hb(n)};Hn.removeAll=e=>Hn.remove(void 0,e);Hn.promise=(e,r,n)=>{let a=Hn.loading(r.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=r.success?Nf(r.success,o):void 0;return l?Hn.success(l,{id:a,...n,...n?.success}):Hn.dismiss(a),o}).catch(o=>{let l=r.error?Nf(r.error,o):void 0;l?Hn.error(l,{id:a,...n,...n?.error}):Hn.dismiss(a)}),e};var _N=1e3,DN=(e,r="default")=>{let{toasts:n,pausedAt:a}=CN(e,r),o=O.useRef(new Map).current,l=O.useCallback((b,j=_N)=>{if(o.has(b))return;let y=setTimeout(()=>{o.delete(b),d({type:4,toastId:b})},j);o.set(b,y)},[]);O.useEffect(()=>{if(a)return;let b=Date.now(),j=n.map(y=>{if(y.duration===1/0)return;let A=(y.duration||0)+y.pauseDuration-(b-y.createdAt);if(A<0){y.visible&&Hn.dismiss(y.id);return}return setTimeout(()=>Hn.dismiss(y.id,r),A)});return()=>{j.forEach(y=>y&&clearTimeout(y))}},[n,a,r]);let d=O.useCallback($f(r),[r]),u=O.useCallback(()=>{d({type:5,time:Date.now()})},[d]),h=O.useCallback((b,j)=>{d({type:1,toast:{id:b,height:j}})},[d]),p=O.useCallback(()=>{a&&d({type:6,time:Date.now()})},[a,d]),m=O.useCallback((b,j)=>{let{reverseOrder:y=!1,gutter:A=8,defaultPosition:P}=j||{},N=n.filter(D=>(D.position||P)===(b.position||P)&&D.height),C=N.findIndex(D=>D.id===b.id),F=N.filter((D,M)=>M<C&&D.visible).length;return N.filter(D=>D.visible).slice(...y?[F+1]:[0,F]).reduce((D,M)=>D+(M.height||0)+A,0)},[n]);return O.useEffect(()=>{n.forEach(b=>{if(b.dismissed)l(b.id,b.removeDelay);else{let j=o.get(b.id);j&&(clearTimeout(j),o.delete(b.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:h,startPause:u,endPause:p,calculateOffset:m}}},LN=Eo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,EN=Eo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FN=Eo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,IN=Ll("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${EN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,TN=Eo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ON=Ll("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${TN} 1s linear infinite;
`,RN=Eo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MN=Eo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BN=Ll("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UN=Ll("div")`
  position: absolute;
`,qN=Ll("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zN=Eo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$N=Ll("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,VN=({toast:e})=>{let{icon:r,type:n,iconTheme:a}=e;return r!==void 0?typeof r=="string"?O.createElement($N,null,r):r:n==="blank"?null:O.createElement(qN,null,O.createElement(ON,{...a}),n!=="loading"&&O.createElement(UN,null,n==="error"?O.createElement(IN,{...a}):O.createElement(BN,{...a})))},HN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,WN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,GN="0%{opacity:0;} 100%{opacity:1;}",KN="0%{opacity:1;} 100%{opacity:0;}",YN=Ll("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,JN=Ll("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,QN=(e,r)=>{let n=e.includes("top")?1:-1,[a,o]=lb()?[GN,KN]:[HN(n),WN(n)];return{animation:r?`${Eo(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Eo(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},XN=O.memo(({toast:e,position:r,style:n,children:a})=>{let o=e.height?QN(e.position||r||"top-center",e.visible):{opacity:0},l=O.createElement(VN,{toast:e}),d=O.createElement(JN,{...e.ariaProps},Nf(e.message,e));return O.createElement(YN,{className:e.className,style:{...o,...n,...e.style}},typeof a=="function"?a({icon:l,message:d}):O.createElement(O.Fragment,null,l,d))});wN(O.createElement);var ZN=({id:e,className:r,style:n,onHeightUpdate:a,children:o})=>{let l=O.useCallback(d=>{if(d){let u=()=>{let h=d.getBoundingClientRect().height;a(e,h)};u(),new MutationObserver(u).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return O.createElement("div",{ref:l,className:r,style:n},o)},ej=(e,r)=>{let n=e.includes("top"),a=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:lb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...a,...o}},tj=zf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Bh=16,rj=({reverseOrder:e,position:r="top-center",toastOptions:n,gutter:a,children:o,toasterId:l,containerStyle:d,containerClassName:u})=>{let{toasts:h,handlers:p}=DN(n,l);return O.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Bh,left:Bh,right:Bh,bottom:Bh,pointerEvents:"none",...d},className:u,onMouseEnter:p.startPause,onMouseLeave:p.endPause},h.map(m=>{let b=m.position||r,j=p.calculateOffset(m,{reverseOrder:e,gutter:a,defaultPosition:r}),y=ej(b,j);return O.createElement(ZN,{id:m.id,key:m.id,onHeightUpdate:p.updateHeight,className:m.visible?tj:"",style:y},m.type==="custom"?Nf(m.message,m):o?o(m):O.createElement(XN,{toast:m,position:b}))}))},or=Hn;function hs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nj=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ex=nj,tp=()=>Math.random().toString(36).substring(7).split("").join("."),sj={INIT:`@@redux/INIT${tp()}`,REPLACE:`@@redux/REPLACE${tp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tp()}`},jf=sj;function I0(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function fb(e,r,n){if(typeof e!="function")throw new Error(hs(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(hs(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(hs(1));return n(fb)(e,r)}let a=e,o=r,l=new Map,d=l,u=0,h=!1;function p(){d===l&&(d=new Map,l.forEach((N,C)=>{d.set(C,N)}))}function m(){if(h)throw new Error(hs(3));return o}function b(N){if(typeof N!="function")throw new Error(hs(4));if(h)throw new Error(hs(5));let C=!0;p();const F=u++;return d.set(F,N),function(){if(C){if(h)throw new Error(hs(6));C=!1,p(),d.delete(F),l=null}}}function j(N){if(!I0(N))throw new Error(hs(7));if(typeof N.type>"u")throw new Error(hs(8));if(typeof N.type!="string")throw new Error(hs(17));if(h)throw new Error(hs(9));try{h=!0,o=a(o,N)}finally{h=!1}return(l=d).forEach(F=>{F()}),N}function y(N){if(typeof N!="function")throw new Error(hs(10));a=N,j({type:jf.REPLACE})}function A(){const N=b;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(hs(11));function F(){const M=C;M.next&&M.next(m())}return F(),{unsubscribe:N(F)}},[Ex](){return this}}}return j({type:jf.INIT}),{dispatch:j,subscribe:b,getState:m,replaceReducer:y,[Ex]:A}}function aj(e){Object.keys(e).forEach(r=>{const n=e[r];if(typeof n(void 0,{type:jf.INIT})>"u")throw new Error(hs(12));if(typeof n(void 0,{type:jf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hs(13))})}function ij(e){const r=Object.keys(e),n={};for(let l=0;l<r.length;l++){const d=r[l];typeof e[d]=="function"&&(n[d]=e[d])}const a=Object.keys(n);let o;try{aj(n)}catch(l){o=l}return function(d={},u){if(o)throw o;let h=!1;const p={};for(let m=0;m<a.length;m++){const b=a[m],j=n[b],y=d[b],A=j(y,u);if(typeof A>"u")throw u&&u.type,new Error(hs(14));p[b]=A,h=h||A!==y}return h=h||a.length!==Object.keys(d).length,h?p:d}}function kf(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,n)=>(...a)=>r(n(...a)))}function oj(...e){return r=>(n,a)=>{const o=r(n,a);let l=()=>{throw new Error(hs(15))};const d={getState:o.getState,dispatch:(h,...p)=>l(h,...p)},u=e.map(h=>h(d));return l=kf(...u)(o.dispatch),{...o,dispatch:l}}}function lj(e){return I0(e)&&"type"in e&&typeof e.type=="string"}var mb=Symbol.for("immer-nothing"),Fx=Symbol.for("immer-draftable"),ka=Symbol.for("immer-state");function hi(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function fc(e){return!!e&&!!e[ka]}function Fo(e){return e?pb(e)||Array.isArray(e)||!!e[Fx]||!!e.constructor?.[Fx]||Hf(e)||Wf(e):!1}var cj=Object.prototype.constructor.toString();function pb(e){if(!e||typeof e!="object")return!1;const r=Ad(e);if(r===null)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===cj}function Sf(e,r){Vf(e)===0?Reflect.ownKeys(e).forEach(n=>{r(n,e[n],e)}):e.forEach((n,a)=>r(a,n,e))}function Vf(e){const r=e[ka];return r?r.type_:Array.isArray(e)?1:Hf(e)?2:Wf(e)?3:0}function Qp(e,r){return Vf(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function gb(e,r,n){const a=Vf(e);a===2?e.set(r,n):a===3?e.add(n):e[r]=n}function dj(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Hf(e){return e instanceof Map}function Wf(e){return e instanceof Set}function ic(e){return e.copy_||e.base_}function Xp(e,r){if(Hf(e))return new Map(e);if(Wf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=pb(e);if(r===!0||r==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[ka];let o=Reflect.ownKeys(a);for(let l=0;l<o.length;l++){const d=o[l],u=a[d];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[d]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[d]})}return Object.create(Ad(e),a)}else{const a=Ad(e);if(a!==null&&n)return{...e};const o=Object.create(a);return Object.assign(o,e)}}function T0(e,r=!1){return Gf(e)||fc(e)||!Fo(e)||(Vf(e)>1&&(e.set=e.add=e.clear=e.delete=uj),Object.freeze(e),r&&Object.entries(e).forEach(([n,a])=>T0(a,!0))),e}function uj(){hi(2)}function Gf(e){return Object.isFrozen(e)}var hj={};function mc(e){const r=hj[e];return r||hi(0,e),r}var Ru;function xb(){return Ru}function fj(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ix(e,r){r&&(mc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function Zp(e){e0(e),e.drafts_.forEach(mj),e.drafts_=null}function e0(e){e===Ru&&(Ru=e.parent_)}function Tx(e){return Ru=fj(Ru,e)}function mj(e){const r=e[ka];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Ox(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return e!==void 0&&e!==n?(n[ka].modified_&&(Zp(r),hi(4)),Fo(e)&&(e=Af(r,e),r.parent_||Cf(r,e)),r.patches_&&mc("Patches").generateReplacementPatches_(n[ka].base_,e,r.patches_,r.inversePatches_)):e=Af(r,n,[]),Zp(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==mb?e:void 0}function Af(e,r,n){if(Gf(r))return r;const a=r[ka];if(!a)return Sf(r,(o,l)=>Rx(e,a,r,o,l,n)),r;if(a.scope_!==e)return r;if(!a.modified_)return Cf(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const o=a.copy_;let l=o,d=!1;a.type_===3&&(l=new Set(o),o.clear(),d=!0),Sf(l,(u,h)=>Rx(e,a,o,u,h,n,d)),Cf(e,o,!1),n&&e.patches_&&mc("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function Rx(e,r,n,a,o,l,d){if(fc(o)){const u=l&&r&&r.type_!==3&&!Qp(r.assigned_,a)?l.concat(a):void 0,h=Af(e,o,u);if(gb(n,a,h),fc(h))e.canAutoFreeze_=!1;else return}else d&&n.add(o);if(Fo(o)&&!Gf(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Af(e,o),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&Cf(e,o)}}function Cf(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&T0(r,n)}function pj(e,r){const n=Array.isArray(e),a={type_:n?1:0,scope_:r?r.scope_:xb(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=a,l=O0;n&&(o=[a],l=Mu);const{revoke:d,proxy:u}=Proxy.revocable(o,l);return a.draft_=u,a.revoke_=d,u}var O0={get(e,r){if(r===ka)return e;const n=ic(e);if(!Qp(n,r))return gj(e,n,r);const a=n[r];return e.finalized_||!Fo(a)?a:a===rp(e.base_,r)?(np(e),e.copy_[r]=r0(a,e)):a},has(e,r){return r in ic(e)},ownKeys(e){return Reflect.ownKeys(ic(e))},set(e,r,n){const a=yb(ic(e),r);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const o=rp(ic(e),r),l=o?.[ka];if(l&&l.base_===n)return e.copy_[r]=n,e.assigned_[r]=!1,!0;if(dj(n,o)&&(n!==void 0||Qp(e.base_,r)))return!0;np(e),t0(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_[r]=!0),!0},deleteProperty(e,r){return rp(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,np(e),t0(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=ic(e),a=Reflect.getOwnPropertyDescriptor(n,r);return a&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:a.enumerable,value:n[r]}},defineProperty(){hi(11)},getPrototypeOf(e){return Ad(e.base_)},setPrototypeOf(){hi(12)}},Mu={};Sf(O0,(e,r)=>{Mu[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Mu.deleteProperty=function(e,r){return Mu.set.call(this,e,r,void 0)};Mu.set=function(e,r,n){return O0.set.call(this,e[0],r,n,e[0])};function rp(e,r){const n=e[ka];return(n?ic(n):e)[r]}function gj(e,r,n){const a=yb(r,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function yb(e,r){if(!(r in e))return;let n=Ad(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,r);if(a)return a;n=Ad(n)}}function t0(e){e.modified_||(e.modified_=!0,e.parent_&&t0(e.parent_))}function np(e){e.copy_||(e.copy_=Xp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var xj=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,n,a)=>{if(typeof r=="function"&&typeof n!="function"){const l=n;n=r;const d=this;return function(h=l,...p){return d.produce(h,m=>n.call(this,m,...p))}}typeof n!="function"&&hi(6),a!==void 0&&typeof a!="function"&&hi(7);let o;if(Fo(r)){const l=Tx(this),d=r0(r,void 0);let u=!0;try{o=n(d),u=!1}finally{u?Zp(l):e0(l)}return Ix(l,a),Ox(o,l)}else if(!r||typeof r!="object"){if(o=n(r),o===void 0&&(o=r),o===mb&&(o=void 0),this.autoFreeze_&&T0(o,!0),a){const l=[],d=[];mc("Patches").generateReplacementPatches_(r,o,l,d),a(l,d)}return o}else hi(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(d,...u)=>this.produceWithPatches(d,h=>r(h,...u));let a,o;return[this.produce(r,n,(d,u)=>{a=d,o=u}),a,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Fo(e)||hi(8),fc(e)&&(e=yj(e));const r=Tx(this),n=r0(e,void 0);return n[ka].isManual_=!0,e0(r),n}finishDraft(e,r){const n=e&&e[ka];(!n||!n.isManual_)&&hi(9);const{scope_:a}=n;return Ix(a,r),Ox(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const o=r[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(r=r.slice(n+1));const a=mc("Patches").applyPatches_;return fc(e)?a(e,r):this.produce(e,o=>a(o,r))}};function r0(e,r){const n=Hf(e)?mc("MapSet").proxyMap_(e,r):Wf(e)?mc("MapSet").proxySet_(e,r):pj(e,r);return(r?r.scope_:xb()).drafts_.push(n),n}function yj(e){return fc(e)||hi(10,e),bb(e)}function bb(e){if(!Fo(e)||Gf(e))return e;const r=e[ka];let n;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=Xp(e,r.scope_.immer_.useStrictShallowCopy_)}else n=Xp(e,!0);return Sf(n,(a,o)=>{gb(n,a,bb(o))}),r&&(r.finalized_=!1),n}var Sa=new xj,vb=Sa.produce;Sa.produceWithPatches.bind(Sa);Sa.setAutoFreeze.bind(Sa);Sa.setUseStrictShallowCopy.bind(Sa);Sa.applyPatches.bind(Sa);Sa.createDraft.bind(Sa);Sa.finishDraft.bind(Sa);function wb(e){return({dispatch:n,getState:a})=>o=>l=>typeof l=="function"?l(n,a,e):o(l)}var bj=wb(),vj=wb,wj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?kf:kf.apply(null,arguments)},Nj=e=>e&&typeof e.match=="function";function vu(e,r){function n(...a){if(r){let o=r(...a);if(!o)throw new Error(Lo(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>lj(a)&&a.type===e,n}var Nb=class bu extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,bu.prototype)}static get[Symbol.species](){return bu}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new bu(...r[0].concat(this)):new bu(...r.concat(this))}};function Mx(e){return Fo(e)?vb(e,()=>{}):e}function Uh(e,r,n){return e.has(r)?e.get(r):e.set(r,n(r)).get(r)}function jj(e){return typeof e=="boolean"}var kj=()=>function(r){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:o=!0,actionCreatorCheck:l=!0}=r??{};let d=new Nb;return n&&(jj(n)?d.push(bj):d.push(vj(n.extraArgument))),d},Sj="RTK_autoBatch",Bx=e=>r=>{setTimeout(r,e)},Aj=(e={type:"raf"})=>r=>(...n)=>{const a=r(...n);let o=!0,l=!1,d=!1;const u=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Bx(10):e.type==="callback"?e.queueNotification:Bx(e.timeout),p=()=>{d=!1,l&&(l=!1,u.forEach(m=>m()))};return Object.assign({},a,{subscribe(m){const b=()=>o&&m(),j=a.subscribe(b);return u.add(m),()=>{j(),u.delete(m)}},dispatch(m){try{return o=!m?.meta?.[Sj],l=!o,l&&(d||(d=!0,h(p))),a.dispatch(m)}finally{o=!0}}})},Cj=e=>function(n){const{autoBatch:a=!0}=n??{};let o=new Nb(e);return a&&o.push(Aj(typeof a=="object"?a:void 0)),o};function Pj(e){const r=kj(),{reducer:n=void 0,middleware:a,devTools:o=!0,preloadedState:l=void 0,enhancers:d=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(I0(n))u=ij(n);else throw new Error(Lo(1));let h;typeof a=="function"?h=a(r):h=r();let p=kf;o&&(p=wj({trace:!1,...typeof o=="object"&&o}));const m=oj(...h),b=Cj(m);let j=typeof d=="function"?d(b):b();const y=p(...j);return fb(u,l,y)}function jb(e){const r={},n=[];let a;const o={addCase(l,d){const u=typeof l=="string"?l:l.type;if(!u)throw new Error(Lo(28));if(u in r)throw new Error(Lo(29));return r[u]=d,o},addMatcher(l,d){return n.push({matcher:l,reducer:d}),o},addDefaultCase(l){return a=l,o}};return e(o),[r,n,a]}function _j(e){return typeof e=="function"}function Dj(e,r){let[n,a,o]=jb(r),l;if(_j(e))l=()=>Mx(e());else{const u=Mx(e);l=()=>u}function d(u=l(),h){let p=[n[h.type],...a.filter(({matcher:m})=>m(h)).map(({reducer:m})=>m)];return p.filter(m=>!!m).length===0&&(p=[o]),p.reduce((m,b)=>{if(b)if(fc(m)){const y=b(m,h);return y===void 0?m:y}else{if(Fo(m))return vb(m,j=>b(j,h));{const j=b(m,h);if(j===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return m},u)}return d.getInitialState=l,d}var Lj=(e,r)=>Nj(e)?e.match(r):e(r);function Ej(...e){return r=>e.some(n=>Lj(n,r))}var Fj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ij=(e=21)=>{let r="",n=e;for(;n--;)r+=Fj[Math.random()*64|0];return r},Tj=["name","message","stack","code"],sp=class{constructor(e,r){this.payload=e,this.meta=r}_type},Ux=class{constructor(e,r){this.payload=e,this.meta=r}_type},Oj=e=>{if(typeof e=="object"&&e!==null){const r={};for(const n of Tj)typeof e[n]=="string"&&(r[n]=e[n]);return r}return{message:String(e)}},qx="External signal was aborted",Ur=(()=>{function e(r,n,a){const o=vu(r+"/fulfilled",(h,p,m,b)=>({payload:h,meta:{...b||{},arg:m,requestId:p,requestStatus:"fulfilled"}})),l=vu(r+"/pending",(h,p,m)=>({payload:void 0,meta:{...m||{},arg:p,requestId:h,requestStatus:"pending"}})),d=vu(r+"/rejected",(h,p,m,b,j)=>({payload:b,error:(a&&a.serializeError||Oj)(h||"Rejected"),meta:{...j||{},arg:m,requestId:p,rejectedWithValue:!!b,requestStatus:"rejected",aborted:h?.name==="AbortError",condition:h?.name==="ConditionError"}}));function u(h,{signal:p}={}){return(m,b,j)=>{const y=a?.idGenerator?a.idGenerator(h):Ij(),A=new AbortController;let P,N;function C(D){N=D,A.abort()}p&&(p.aborted?C(qx):p.addEventListener("abort",()=>C(qx),{once:!0}));const F=(async function(){let D;try{let U=a?.condition?.(h,{getState:b,extra:j});if(Mj(U)&&(U=await U),U===!1||A.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const Q=new Promise((J,re)=>{P=()=>{re({name:"AbortError",message:N||"Aborted"})},A.signal.addEventListener("abort",P)});m(l(y,h,a?.getPendingMeta?.({requestId:y,arg:h},{getState:b,extra:j}))),D=await Promise.race([Q,Promise.resolve(n(h,{dispatch:m,getState:b,extra:j,requestId:y,signal:A.signal,abort:C,rejectWithValue:(J,re)=>new sp(J,re),fulfillWithValue:(J,re)=>new Ux(J,re)})).then(J=>{if(J instanceof sp)throw J;return J instanceof Ux?o(J.payload,y,h,J.meta):o(J,y,h)})])}catch(U){D=U instanceof sp?d(null,y,h,U.payload,U.meta):d(U,y,h)}finally{P&&A.signal.removeEventListener("abort",P)}return a&&!a.dispatchConditionRejection&&d.match(D)&&D.meta.condition||m(D),D})();return Object.assign(F,{abort:C,requestId:y,arg:h,unwrap(){return F.then(Rj)}})}}return Object.assign(u,{pending:l,rejected:d,fulfilled:o,settled:Ej(d,o),typePrefix:r})}return e.withTypes=()=>e,e})();function Rj(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Mj(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Bj=Symbol.for("rtk-slice-createasyncthunk");function Uj(e,r){return`${e}/${r}`}function qj({creators:e}={}){const r=e?.asyncThunk?.[Bj];return function(a){const{name:o,reducerPath:l=o}=a;if(!o)throw new Error(Lo(11));const d=(typeof a.reducers=="function"?a.reducers($j()):a.reducers)||{},u=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(D,M){const U=typeof D=="string"?D:D.type;if(!U)throw new Error(Lo(12));if(U in h.sliceCaseReducersByType)throw new Error(Lo(13));return h.sliceCaseReducersByType[U]=M,p},addMatcher(D,M){return h.sliceMatchers.push({matcher:D,reducer:M}),p},exposeAction(D,M){return h.actionCreators[D]=M,p},exposeCaseReducer(D,M){return h.sliceCaseReducersByName[D]=M,p}};u.forEach(D=>{const M=d[D],U={reducerName:D,type:Uj(o,D),createNotation:typeof a.reducers=="function"};Hj(M)?Gj(U,M,p,r):Vj(U,M,p)});function m(){const[D={},M=[],U=void 0]=typeof a.extraReducers=="function"?jb(a.extraReducers):[a.extraReducers],Q={...D,...h.sliceCaseReducersByType};return Dj(a.initialState,J=>{for(let re in Q)J.addCase(re,Q[re]);for(let re of h.sliceMatchers)J.addMatcher(re.matcher,re.reducer);for(let re of M)J.addMatcher(re.matcher,re.reducer);U&&J.addDefaultCase(U)})}const b=D=>D,j=new Map,y=new WeakMap;let A;function P(D,M){return A||(A=m()),A(D,M)}function N(){return A||(A=m()),A.getInitialState()}function C(D,M=!1){function U(J){let re=J[D];return typeof re>"u"&&M&&(re=Uh(y,U,N)),re}function Q(J=b){const re=Uh(j,M,()=>new WeakMap);return Uh(re,J,()=>{const K={};for(const[de,E]of Object.entries(a.selectors??{}))K[de]=zj(E,J,()=>Uh(y,J,N),M);return K})}return{reducerPath:D,getSelectors:Q,get selectors(){return Q(U)},selectSlice:U}}const F={name:o,reducer:P,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...C(l),injectInto(D,{reducerPath:M,...U}={}){const Q=M??l;return D.inject({reducerPath:Q,reducer:P},U),{...F,...C(Q,!0)}}};return F}}function zj(e,r,n,a){function o(l,...d){let u=r(l);return typeof u>"u"&&a&&(u=n()),e(u,...d)}return o.unwrapped=e,o}var To=qj();function $j(){function e(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:e}}function Vj({type:e,reducerName:r,createNotation:n},a,o){let l,d;if("reducer"in a){if(n&&!Wj(a))throw new Error(Lo(17));l=a.reducer,d=a.prepare}else l=a;o.addCase(e,l).exposeCaseReducer(r,l).exposeAction(r,d?vu(e,d):vu(e))}function Hj(e){return e._reducerDefinitionType==="asyncThunk"}function Wj(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Gj({type:e,reducerName:r},n,a,o){if(!o)throw new Error(Lo(18));const{payloadCreator:l,fulfilled:d,pending:u,rejected:h,settled:p,options:m}=n,b=o(e,l,m);a.exposeAction(r,b),d&&a.addCase(b.fulfilled,d),u&&a.addCase(b.pending,u),h&&a.addCase(b.rejected,h),p&&a.addMatcher(b.settled,p),a.exposeCaseReducer(r,{fulfilled:d||qh,pending:u||qh,rejected:h||qh,settled:p||qh})}function qh(){}function Lo(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function kb(e,r){return function(){return e.apply(r,arguments)}}const{toString:Kj}=Object.prototype,{getPrototypeOf:R0}=Object,{iterator:Kf,toStringTag:Sb}=Symbol,Yf=(e=>r=>{const n=Kj.call(r);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),yi=e=>(e=e.toLowerCase(),r=>Yf(r)===e),Jf=e=>r=>typeof r===e,{isArray:Id}=Array,Bu=Jf("undefined");function Vu(e){return e!==null&&!Bu(e)&&e.constructor!==null&&!Bu(e.constructor)&&sa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ab=yi("ArrayBuffer");function Yj(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Ab(e.buffer),r}const Jj=Jf("string"),sa=Jf("function"),Cb=Jf("number"),Hu=e=>e!==null&&typeof e=="object",Qj=e=>e===!0||e===!1,ef=e=>{if(Yf(e)!=="object")return!1;const r=R0(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Sb in e)&&!(Kf in e)},Xj=e=>{if(!Hu(e)||Vu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zj=yi("Date"),e4=yi("File"),t4=yi("Blob"),r4=yi("FileList"),n4=e=>Hu(e)&&sa(e.pipe),s4=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||sa(e.append)&&((r=Yf(e))==="formdata"||r==="object"&&sa(e.toString)&&e.toString()==="[object FormData]"))},a4=yi("URLSearchParams"),[i4,o4,l4,c4]=["ReadableStream","Request","Response","Headers"].map(yi),d4=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wu(e,r,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,o;if(typeof e!="object"&&(e=[e]),Id(e))for(a=0,o=e.length;a<o;a++)r.call(null,e[a],a,e);else{if(Vu(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let u;for(a=0;a<d;a++)u=l[a],r.call(null,e[u],u,e)}}function Pb(e,r){if(Vu(e))return null;r=r.toLowerCase();const n=Object.keys(e);let a=n.length,o;for(;a-- >0;)if(o=n[a],r===o.toLowerCase())return o;return null}const cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_b=e=>!Bu(e)&&e!==cc;function n0(){const{caseless:e}=_b(this)&&this||{},r={},n=(a,o)=>{const l=e&&Pb(r,o)||o;ef(r[l])&&ef(a)?r[l]=n0(r[l],a):ef(a)?r[l]=n0({},a):Id(a)?r[l]=a.slice():r[l]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Wu(arguments[a],n);return r}const u4=(e,r,n,{allOwnKeys:a}={})=>(Wu(r,(o,l)=>{n&&sa(o)?e[l]=kb(o,n):e[l]=o},{allOwnKeys:a}),e),h4=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),f4=(e,r,n,a)=>{e.prototype=Object.create(r.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),n&&Object.assign(e.prototype,n)},m4=(e,r,n,a)=>{let o,l,d;const u={};if(r=r||{},e==null)return r;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)d=o[l],(!a||a(d,e,r))&&!u[d]&&(r[d]=e[d],u[d]=!0);e=n!==!1&&R0(e)}while(e&&(!n||n(e,r))&&e!==Object.prototype);return r},p4=(e,r,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=r.length;const a=e.indexOf(r,n);return a!==-1&&a===n},g4=e=>{if(!e)return null;if(Id(e))return e;let r=e.length;if(!Cb(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=e[r];return n},x4=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&R0(Uint8Array)),y4=(e,r)=>{const a=(e&&e[Kf]).call(e);let o;for(;(o=a.next())&&!o.done;){const l=o.value;r.call(e,l[0],l[1])}},b4=(e,r)=>{let n;const a=[];for(;(n=e.exec(r))!==null;)a.push(n);return a},v4=yi("HTMLFormElement"),w4=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,o){return a.toUpperCase()+o}),zx=(({hasOwnProperty:e})=>(r,n)=>e.call(r,n))(Object.prototype),N4=yi("RegExp"),Db=(e,r)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Wu(n,(o,l)=>{let d;(d=r(o,l,e))!==!1&&(a[l]=d||o)}),Object.defineProperties(e,a)},j4=e=>{Db(e,(r,n)=>{if(sa(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(sa(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},k4=(e,r)=>{const n={},a=o=>{o.forEach(l=>{n[l]=!0})};return Id(e)?a(e):a(String(e).split(r)),n},S4=()=>{},A4=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function C4(e){return!!(e&&sa(e.append)&&e[Sb]==="FormData"&&e[Kf])}const P4=e=>{const r=new Array(10),n=(a,o)=>{if(Hu(a)){if(r.indexOf(a)>=0)return;if(Vu(a))return a;if(!("toJSON"in a)){r[o]=a;const l=Id(a)?[]:{};return Wu(a,(d,u)=>{const h=n(d,o+1);!Bu(h)&&(l[u]=h)}),r[o]=void 0,l}}return a};return n(e,0)},_4=yi("AsyncFunction"),D4=e=>e&&(Hu(e)||sa(e))&&sa(e.then)&&sa(e.catch),Lb=((e,r)=>e?setImmediate:r?((n,a)=>(cc.addEventListener("message",({source:o,data:l})=>{o===cc&&l===n&&a.length&&a.shift()()},!1),o=>{a.push(o),cc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",sa(cc.postMessage)),L4=typeof queueMicrotask<"u"?queueMicrotask.bind(cc):typeof process<"u"&&process.nextTick||Lb,E4=e=>e!=null&&sa(e[Kf]),Me={isArray:Id,isArrayBuffer:Ab,isBuffer:Vu,isFormData:s4,isArrayBufferView:Yj,isString:Jj,isNumber:Cb,isBoolean:Qj,isObject:Hu,isPlainObject:ef,isEmptyObject:Xj,isReadableStream:i4,isRequest:o4,isResponse:l4,isHeaders:c4,isUndefined:Bu,isDate:Zj,isFile:e4,isBlob:t4,isRegExp:N4,isFunction:sa,isStream:n4,isURLSearchParams:a4,isTypedArray:x4,isFileList:r4,forEach:Wu,merge:n0,extend:u4,trim:d4,stripBOM:h4,inherits:f4,toFlatObject:m4,kindOf:Yf,kindOfTest:yi,endsWith:p4,toArray:g4,forEachEntry:y4,matchAll:b4,isHTMLForm:v4,hasOwnProperty:zx,hasOwnProp:zx,reduceDescriptors:Db,freezeMethods:j4,toObjectSet:k4,toCamelCase:w4,noop:S4,toFiniteNumber:A4,findKey:Pb,global:cc,isContextDefined:_b,isSpecCompliantForm:C4,toJSONObject:P4,isAsyncFn:_4,isThenable:D4,setImmediate:Lb,asap:L4,isIterable:E4};function Qt(e,r,n,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}Me.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const Eb=Qt.prototype,Fb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fb[e]={value:e}});Object.defineProperties(Qt,Fb);Object.defineProperty(Eb,"isAxiosError",{value:!0});Qt.from=(e,r,n,a,o,l)=>{const d=Object.create(Eb);return Me.toFlatObject(e,d,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Qt.call(d,e.message,r,n,a,o),d.cause=e,d.name=e.name,l&&Object.assign(d,l),d};const F4=null;function s0(e){return Me.isPlainObject(e)||Me.isArray(e)}function Ib(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function $x(e,r,n){return e?e.concat(r).map(function(o,l){return o=Ib(o),!n&&l?"["+o+"]":o}).join(n?".":""):r}function I4(e){return Me.isArray(e)&&!e.some(s0)}const T4=Me.toFlatObject(Me,{},null,function(r){return/^is[A-Z]/.test(r)});function Qf(e,r,n){if(!Me.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,n=Me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,N){return!Me.isUndefined(N[P])});const a=n.metaTokens,o=n.visitor||m,l=n.dots,d=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(r);if(!Me.isFunction(o))throw new TypeError("visitor must be a function");function p(A){if(A===null)return"";if(Me.isDate(A))return A.toISOString();if(Me.isBoolean(A))return A.toString();if(!h&&Me.isBlob(A))throw new Qt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(A)||Me.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function m(A,P,N){let C=A;if(A&&!N&&typeof A=="object"){if(Me.endsWith(P,"{}"))P=a?P:P.slice(0,-2),A=JSON.stringify(A);else if(Me.isArray(A)&&I4(A)||(Me.isFileList(A)||Me.endsWith(P,"[]"))&&(C=Me.toArray(A)))return P=Ib(P),C.forEach(function(D,M){!(Me.isUndefined(D)||D===null)&&r.append(d===!0?$x([P],M,l):d===null?P:P+"[]",p(D))}),!1}return s0(A)?!0:(r.append($x(N,P,l),p(A)),!1)}const b=[],j=Object.assign(T4,{defaultVisitor:m,convertValue:p,isVisitable:s0});function y(A,P){if(!Me.isUndefined(A)){if(b.indexOf(A)!==-1)throw Error("Circular reference detected in "+P.join("."));b.push(A),Me.forEach(A,function(C,F){(!(Me.isUndefined(C)||C===null)&&o.call(r,C,Me.isString(F)?F.trim():F,P,j))===!0&&y(C,P?P.concat(F):[F])}),b.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return y(e),r}function Vx(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function M0(e,r){this._pairs=[],e&&Qf(e,this,r)}const Tb=M0.prototype;Tb.append=function(r,n){this._pairs.push([r,n])};Tb.toString=function(r){const n=r?function(a){return r.call(this,a,Vx)}:Vx;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function O4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ob(e,r,n){if(!r)return e;const a=n&&n.encode||O4;Me.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let l;if(o?l=o(r,n):l=Me.isURLSearchParams(r)?r.toString():new M0(r,n).toString(a),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Hx{constructor(){this.handlers=[]}use(r,n,a){return this.handlers.push({fulfilled:r,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Me.forEach(this.handlers,function(a){a!==null&&r(a)})}}const Rb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R4=typeof URLSearchParams<"u"?URLSearchParams:M0,M4=typeof FormData<"u"?FormData:null,B4=typeof Blob<"u"?Blob:null,U4={isBrowser:!0,classes:{URLSearchParams:R4,FormData:M4,Blob:B4},protocols:["http","https","file","blob","url","data"]},B0=typeof window<"u"&&typeof document<"u",a0=typeof navigator=="object"&&navigator||void 0,q4=B0&&(!a0||["ReactNative","NativeScript","NS"].indexOf(a0.product)<0),z4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$4=B0&&window.location.href||"http://localhost",V4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:B0,hasStandardBrowserEnv:q4,hasStandardBrowserWebWorkerEnv:z4,navigator:a0,origin:$4},Symbol.toStringTag,{value:"Module"})),Is={...V4,...U4};function H4(e,r){return Qf(e,new Is.classes.URLSearchParams,{visitor:function(n,a,o,l){return Is.isNode&&Me.isBuffer(n)?(this.append(a,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function W4(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function G4(e){const r={},n=Object.keys(e);let a;const o=n.length;let l;for(a=0;a<o;a++)l=n[a],r[l]=e[l];return r}function Mb(e){function r(n,a,o,l){let d=n[l++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),h=l>=n.length;return d=!d&&Me.isArray(o)?o.length:d,h?(Me.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!u):((!o[d]||!Me.isObject(o[d]))&&(o[d]=[]),r(n,a,o[d],l)&&Me.isArray(o[d])&&(o[d]=G4(o[d])),!u)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){const n={};return Me.forEachEntry(e,(a,o)=>{r(W4(a),o,n,0)}),n}return null}function K4(e,r,n){if(Me.isString(e))try{return(r||JSON.parse)(e),Me.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const Gu={transitional:Rb,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const a=n.getContentType()||"",o=a.indexOf("application/json")>-1,l=Me.isObject(r);if(l&&Me.isHTMLForm(r)&&(r=new FormData(r)),Me.isFormData(r))return o?JSON.stringify(Mb(r)):r;if(Me.isArrayBuffer(r)||Me.isBuffer(r)||Me.isStream(r)||Me.isFile(r)||Me.isBlob(r)||Me.isReadableStream(r))return r;if(Me.isArrayBufferView(r))return r.buffer;if(Me.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return H4(r,this.formSerializer).toString();if((u=Me.isFileList(r))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Qf(u?{"files[]":r}:r,h&&new h,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),K4(r)):r}],transformResponse:[function(r){const n=this.transitional||Gu.transitional,a=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Me.isResponse(r)||Me.isReadableStream(r))return r;if(r&&Me.isString(r)&&(a&&!this.responseType||o)){const d=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(d)throw u.name==="SyntaxError"?Qt.from(u,Qt.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Is.classes.FormData,Blob:Is.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{Gu.headers[e]={}});const Y4=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),J4=e=>{const r={};let n,a,o;return e&&e.split(`
`).forEach(function(d){o=d.indexOf(":"),n=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!n||r[n]&&Y4[n])&&(n==="set-cookie"?r[n]?r[n].push(a):r[n]=[a]:r[n]=r[n]?r[n]+", "+a:a)}),r},Wx=Symbol("internals");function mu(e){return e&&String(e).trim().toLowerCase()}function tf(e){return e===!1||e==null?e:Me.isArray(e)?e.map(tf):String(e)}function Q4(e){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)r[a[1]]=a[2];return r}const X4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ap(e,r,n,a,o){if(Me.isFunction(a))return a.call(this,r,n);if(o&&(r=n),!!Me.isString(r)){if(Me.isString(a))return r.indexOf(a)!==-1;if(Me.isRegExp(a))return a.test(r)}}function Z4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,a)=>n.toUpperCase()+a)}function e3(e,r){const n=Me.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(o,l,d){return this[a].call(this,r,o,l,d)},configurable:!0})})}let aa=class{constructor(r){r&&this.set(r)}set(r,n,a){const o=this;function l(u,h,p){const m=mu(h);if(!m)throw new Error("header name must be a non-empty string");const b=Me.findKey(o,m);(!b||o[b]===void 0||p===!0||p===void 0&&o[b]!==!1)&&(o[b||h]=tf(u))}const d=(u,h)=>Me.forEach(u,(p,m)=>l(p,m,h));if(Me.isPlainObject(r)||r instanceof this.constructor)d(r,n);else if(Me.isString(r)&&(r=r.trim())&&!X4(r))d(J4(r),n);else if(Me.isObject(r)&&Me.isIterable(r)){let u={},h,p;for(const m of r){if(!Me.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[p=m[0]]=(h=u[p])?Me.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}d(u,n)}else r!=null&&l(n,r,a);return this}get(r,n){if(r=mu(r),r){const a=Me.findKey(this,r);if(a){const o=this[a];if(!n)return o;if(n===!0)return Q4(o);if(Me.isFunction(n))return n.call(this,o,a);if(Me.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=mu(r),r){const a=Me.findKey(this,r);return!!(a&&this[a]!==void 0&&(!n||ap(this,this[a],a,n)))}return!1}delete(r,n){const a=this;let o=!1;function l(d){if(d=mu(d),d){const u=Me.findKey(a,d);u&&(!n||ap(a,a[u],u,n))&&(delete a[u],o=!0)}}return Me.isArray(r)?r.forEach(l):l(r),o}clear(r){const n=Object.keys(this);let a=n.length,o=!1;for(;a--;){const l=n[a];(!r||ap(this,this[l],l,r,!0))&&(delete this[l],o=!0)}return o}normalize(r){const n=this,a={};return Me.forEach(this,(o,l)=>{const d=Me.findKey(a,l);if(d){n[d]=tf(o),delete n[l];return}const u=r?Z4(l):String(l).trim();u!==l&&delete n[l],n[u]=tf(o),a[u]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return Me.forEach(this,(a,o)=>{a!=null&&a!==!1&&(n[o]=r&&Me.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const a=new this(r);return n.forEach(o=>a.set(o)),a}static accessor(r){const a=(this[Wx]=this[Wx]={accessors:{}}).accessors,o=this.prototype;function l(d){const u=mu(d);a[u]||(e3(o,d),a[u]=!0)}return Me.isArray(r)?r.forEach(l):l(r),this}};aa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(aa.prototype,({value:e},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(a){this[n]=a}}});Me.freezeMethods(aa);function ip(e,r){const n=this||Gu,a=r||n,o=aa.from(a.headers);let l=a.data;return Me.forEach(e,function(u){l=u.call(n,l,o.normalize(),r?r.status:void 0)}),o.normalize(),l}function Bb(e){return!!(e&&e.__CANCEL__)}function Td(e,r,n){Qt.call(this,e??"canceled",Qt.ERR_CANCELED,r,n),this.name="CanceledError"}Me.inherits(Td,Qt,{__CANCEL__:!0});function Ub(e,r,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):r(new Qt("Request failed with status code "+n.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function t3(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function r3(e,r){e=e||10;const n=new Array(e),a=new Array(e);let o=0,l=0,d;return r=r!==void 0?r:1e3,function(h){const p=Date.now(),m=a[l];d||(d=p),n[o]=h,a[o]=p;let b=l,j=0;for(;b!==o;)j+=n[b++],b=b%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),p-d<r)return;const y=m&&p-m;return y?Math.round(j*1e3/y):void 0}}function n3(e,r){let n=0,a=1e3/r,o,l;const d=(p,m=Date.now())=>{n=m,o=null,l&&(clearTimeout(l),l=null),e(...p)};return[(...p)=>{const m=Date.now(),b=m-n;b>=a?d(p,m):(o=p,l||(l=setTimeout(()=>{l=null,d(o)},a-b)))},()=>o&&d(o)]}const Pf=(e,r,n=3)=>{let a=0;const o=r3(50,250);return n3(l=>{const d=l.loaded,u=l.lengthComputable?l.total:void 0,h=d-a,p=o(h),m=d<=u;a=d;const b={loaded:d,total:u,progress:u?d/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&m?(u-d)/p:void 0,event:l,lengthComputable:u!=null,[r?"download":"upload"]:!0};e(b)},n)},Gx=(e,r)=>{const n=e!=null;return[a=>r[0]({lengthComputable:n,total:e,loaded:a}),r[1]]},Kx=e=>(...r)=>Me.asap(()=>e(...r)),s3=Is.hasStandardBrowserEnv?((e,r)=>n=>(n=new URL(n,Is.origin),e.protocol===n.protocol&&e.host===n.host&&(r||e.port===n.port)))(new URL(Is.origin),Is.navigator&&/(msie|trident)/i.test(Is.navigator.userAgent)):()=>!0,a3=Is.hasStandardBrowserEnv?{write(e,r,n,a,o,l){const d=[e+"="+encodeURIComponent(r)];Me.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),Me.isString(a)&&d.push("path="+a),Me.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function i3(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function o3(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function qb(e,r,n){let a=!i3(r);return e&&(a||n==!1)?o3(e,r):r}const Yx=e=>e instanceof aa?{...e}:e;function pc(e,r){r=r||{};const n={};function a(p,m,b,j){return Me.isPlainObject(p)&&Me.isPlainObject(m)?Me.merge.call({caseless:j},p,m):Me.isPlainObject(m)?Me.merge({},m):Me.isArray(m)?m.slice():m}function o(p,m,b,j){if(Me.isUndefined(m)){if(!Me.isUndefined(p))return a(void 0,p,b,j)}else return a(p,m,b,j)}function l(p,m){if(!Me.isUndefined(m))return a(void 0,m)}function d(p,m){if(Me.isUndefined(m)){if(!Me.isUndefined(p))return a(void 0,p)}else return a(void 0,m)}function u(p,m,b){if(b in r)return a(p,m);if(b in e)return a(void 0,p)}const h={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(p,m,b)=>o(Yx(p),Yx(m),b,!0)};return Me.forEach(Object.keys({...e,...r}),function(m){const b=h[m]||o,j=b(e[m],r[m],m);Me.isUndefined(j)&&b!==u||(n[m]=j)}),n}const zb=e=>{const r=pc({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:l,headers:d,auth:u}=r;r.headers=d=aa.from(d),r.url=Ob(qb(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Me.isFormData(n)){if(Is.hasStandardBrowserEnv||Is.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((h=d.getContentType())!==!1){const[p,...m]=h?h.split(";").map(b=>b.trim()).filter(Boolean):[];d.setContentType([p||"multipart/form-data",...m].join("; "))}}if(Is.hasStandardBrowserEnv&&(a&&Me.isFunction(a)&&(a=a(r)),a||a!==!1&&s3(r.url))){const p=o&&l&&a3.read(l);p&&d.set(o,p)}return r},l3=typeof XMLHttpRequest<"u",c3=l3&&function(e){return new Promise(function(n,a){const o=zb(e);let l=o.data;const d=aa.from(o.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=o,m,b,j,y,A;function P(){y&&y(),A&&A(),o.cancelToken&&o.cancelToken.unsubscribe(m),o.signal&&o.signal.removeEventListener("abort",m)}let N=new XMLHttpRequest;N.open(o.method.toUpperCase(),o.url,!0),N.timeout=o.timeout;function C(){if(!N)return;const D=aa.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:D,config:e,request:N};Ub(function(J){n(J),P()},function(J){a(J),P()},U),N=null}"onloadend"in N?N.onloadend=C:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(C)},N.onabort=function(){N&&(a(new Qt("Request aborted",Qt.ECONNABORTED,e,N)),N=null)},N.onerror=function(){a(new Qt("Network Error",Qt.ERR_NETWORK,e,N)),N=null},N.ontimeout=function(){let M=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const U=o.transitional||Rb;o.timeoutErrorMessage&&(M=o.timeoutErrorMessage),a(new Qt(M,U.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,e,N)),N=null},l===void 0&&d.setContentType(null),"setRequestHeader"in N&&Me.forEach(d.toJSON(),function(M,U){N.setRequestHeader(U,M)}),Me.isUndefined(o.withCredentials)||(N.withCredentials=!!o.withCredentials),u&&u!=="json"&&(N.responseType=o.responseType),p&&([j,A]=Pf(p,!0),N.addEventListener("progress",j)),h&&N.upload&&([b,y]=Pf(h),N.upload.addEventListener("progress",b),N.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(m=D=>{N&&(a(!D||D.type?new Td(null,e,N):D),N.abort(),N=null)},o.cancelToken&&o.cancelToken.subscribe(m),o.signal&&(o.signal.aborted?m():o.signal.addEventListener("abort",m)));const F=t3(o.url);if(F&&Is.protocols.indexOf(F)===-1){a(new Qt("Unsupported protocol "+F+":",Qt.ERR_BAD_REQUEST,e));return}N.send(l||null)})},d3=(e,r)=>{const{length:n}=e=e?e.filter(Boolean):[];if(r||n){let a=new AbortController,o;const l=function(p){if(!o){o=!0,u();const m=p instanceof Error?p:this.reason;a.abort(m instanceof Qt?m:new Td(m instanceof Error?m.message:m))}};let d=r&&setTimeout(()=>{d=null,l(new Qt(`timeout ${r} of ms exceeded`,Qt.ETIMEDOUT))},r);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),e=null)};e.forEach(p=>p.addEventListener("abort",l));const{signal:h}=a;return h.unsubscribe=()=>Me.asap(u),h}},u3=function*(e,r){let n=e.byteLength;if(n<r){yield e;return}let a=0,o;for(;a<n;)o=a+r,yield e.slice(a,o),a=o},h3=async function*(e,r){for await(const n of f3(e))yield*u3(n,r)},f3=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:n,value:a}=await r.read();if(n)break;yield a}}finally{await r.cancel()}},Jx=(e,r,n,a)=>{const o=h3(e,r);let l=0,d,u=h=>{d||(d=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:p,value:m}=await o.next();if(p){u(),h.close();return}let b=m.byteLength;if(n){let j=l+=b;n(j)}h.enqueue(new Uint8Array(m))}catch(p){throw u(p),p}},cancel(h){return u(h),o.return()}},{highWaterMark:2})},Xf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$b=Xf&&typeof ReadableStream=="function",m3=Xf&&(typeof TextEncoder=="function"?(e=>r=>e.encode(r))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Vb=(e,...r)=>{try{return!!e(...r)}catch{return!1}},p3=$b&&Vb(()=>{let e=!1;const r=new Request(Is.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!r}),Qx=64*1024,i0=$b&&Vb(()=>Me.isReadableStream(new Response("").body)),_f={stream:i0&&(e=>e.body)};Xf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!_f[r]&&(_f[r]=Me.isFunction(e[r])?n=>n[r]():(n,a)=>{throw new Qt(`Response type '${r}' is not supported`,Qt.ERR_NOT_SUPPORT,a)})})})(new Response);const g3=async e=>{if(e==null)return 0;if(Me.isBlob(e))return e.size;if(Me.isSpecCompliantForm(e))return(await new Request(Is.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(e)||Me.isArrayBuffer(e))return e.byteLength;if(Me.isURLSearchParams(e)&&(e=e+""),Me.isString(e))return(await m3(e)).byteLength},x3=async(e,r)=>{const n=Me.toFiniteNumber(e.getContentLength());return n??g3(r)},y3=Xf&&(async e=>{let{url:r,method:n,data:a,signal:o,cancelToken:l,timeout:d,onDownloadProgress:u,onUploadProgress:h,responseType:p,headers:m,withCredentials:b="same-origin",fetchOptions:j}=zb(e);p=p?(p+"").toLowerCase():"text";let y=d3([o,l&&l.toAbortSignal()],d),A;const P=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let N;try{if(h&&p3&&n!=="get"&&n!=="head"&&(N=await x3(m,a))!==0){let U=new Request(r,{method:"POST",body:a,duplex:"half"}),Q;if(Me.isFormData(a)&&(Q=U.headers.get("content-type"))&&m.setContentType(Q),U.body){const[J,re]=Gx(N,Pf(Kx(h)));a=Jx(U.body,Qx,J,re)}}Me.isString(b)||(b=b?"include":"omit");const C="credentials"in Request.prototype;A=new Request(r,{...j,signal:y,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:a,duplex:"half",credentials:C?b:void 0});let F=await fetch(A,j);const D=i0&&(p==="stream"||p==="response");if(i0&&(u||D&&P)){const U={};["status","statusText","headers"].forEach(K=>{U[K]=F[K]});const Q=Me.toFiniteNumber(F.headers.get("content-length")),[J,re]=u&&Gx(Q,Pf(Kx(u),!0))||[];F=new Response(Jx(F.body,Qx,J,()=>{re&&re(),P&&P()}),U)}p=p||"text";let M=await _f[Me.findKey(_f,p)||"text"](F,e);return!D&&P&&P(),await new Promise((U,Q)=>{Ub(U,Q,{data:M,headers:aa.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:A})})}catch(C){throw P&&P(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,e,A),{cause:C.cause||C}):Qt.from(C,C&&C.code,e,A)}}),o0={http:F4,xhr:c3,fetch:y3};Me.forEach(o0,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const Xx=e=>`- ${e}`,b3=e=>Me.isFunction(e)||e===null||e===!1,Hb={getAdapter:e=>{e=Me.isArray(e)?e:[e];const{length:r}=e;let n,a;const o={};for(let l=0;l<r;l++){n=e[l];let d;if(a=n,!b3(n)&&(a=o0[(d=String(n)).toLowerCase()],a===void 0))throw new Qt(`Unknown adapter '${d}'`);if(a)break;o[d||"#"+l]=a}if(!a){const l=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=r?l.length>1?`since :
`+l.map(Xx).join(`
`):" "+Xx(l[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:o0};function op(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Td(null,e)}function Zx(e){return op(e),e.headers=aa.from(e.headers),e.data=ip.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Hb.getAdapter(e.adapter||Gu.adapter)(e).then(function(a){return op(e),a.data=ip.call(e,e.transformResponse,a),a.headers=aa.from(a.headers),a},function(a){return Bb(a)||(op(e),a&&a.response&&(a.response.data=ip.call(e,e.transformResponse,a.response),a.response.headers=aa.from(a.response.headers))),Promise.reject(a)})}const Wb="1.11.0",Zf={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Zf[e]=function(a){return typeof a===e||"a"+(r<1?"n ":" ")+e}});const ey={};Zf.transitional=function(r,n,a){function o(l,d){return"[Axios v"+Wb+"] Transitional option '"+l+"'"+d+(a?". "+a:"")}return(l,d,u)=>{if(r===!1)throw new Qt(o(d," has been removed"+(n?" in "+n:"")),Qt.ERR_DEPRECATED);return n&&!ey[d]&&(ey[d]=!0,console.warn(o(d," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(l,d,u):!0}};Zf.spelling=function(r){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function v3(e,r,n){if(typeof e!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let o=a.length;for(;o-- >0;){const l=a[o],d=r[l];if(d){const u=e[l],h=u===void 0||d(u,l,e);if(h!==!0)throw new Qt("option "+l+" must be "+h,Qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qt("Unknown option "+l,Qt.ERR_BAD_OPTION)}}const rf={assertOptions:v3,validators:Zf},Ri=rf.validators;let uc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Hx,response:new Hx}}async request(r,n){try{return await this._request(r,n)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=pc(this.defaults,n);const{transitional:a,paramsSerializer:o,headers:l}=n;a!==void 0&&rf.assertOptions(a,{silentJSONParsing:Ri.transitional(Ri.boolean),forcedJSONParsing:Ri.transitional(Ri.boolean),clarifyTimeoutError:Ri.transitional(Ri.boolean)},!1),o!=null&&(Me.isFunction(o)?n.paramsSerializer={serialize:o}:rf.assertOptions(o,{encode:Ri.function,serialize:Ri.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),rf.assertOptions(n,{baseUrl:Ri.spelling("baseURL"),withXsrfToken:Ri.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&Me.merge(l.common,l[n.method]);l&&Me.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),n.headers=aa.concat(d,l);const u=[];let h=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(n)===!1||(h=h&&P.synchronous,u.unshift(P.fulfilled,P.rejected))});const p=[];this.interceptors.response.forEach(function(P){p.push(P.fulfilled,P.rejected)});let m,b=0,j;if(!h){const A=[Zx.bind(this),void 0];for(A.unshift(...u),A.push(...p),j=A.length,m=Promise.resolve(n);b<j;)m=m.then(A[b++],A[b++]);return m}j=u.length;let y=n;for(b=0;b<j;){const A=u[b++],P=u[b++];try{y=A(y)}catch(N){P.call(this,N);break}}try{m=Zx.call(this,y)}catch(A){return Promise.reject(A)}for(b=0,j=p.length;b<j;)m=m.then(p[b++],p[b++]);return m}getUri(r){r=pc(this.defaults,r);const n=qb(r.baseURL,r.url,r.allowAbsoluteUrls);return Ob(n,r.params,r.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(r){uc.prototype[r]=function(n,a){return this.request(pc(a||{},{method:r,url:n,data:(a||{}).data}))}});Me.forEach(["post","put","patch"],function(r){function n(a){return function(l,d,u){return this.request(pc(u||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}uc.prototype[r]=n(),uc.prototype[r+"Form"]=n(!0)});let w3=class Gb{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const a=this;this.promise.then(o=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](o);a._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(u=>{a.subscribe(u),l=u}).then(o);return d.cancel=function(){a.unsubscribe(l)},d},r(function(l,d,u){a.reason||(a.reason=new Td(l,d,u),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=a=>{r.abort(a)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Gb(function(o){r=o}),cancel:r}}};function N3(e){return function(n){return e.apply(null,n)}}function j3(e){return Me.isObject(e)&&e.isAxiosError===!0}const l0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(l0).forEach(([e,r])=>{l0[r]=e});function Kb(e){const r=new uc(e),n=kb(uc.prototype.request,r);return Me.extend(n,uc.prototype,r,{allOwnKeys:!0}),Me.extend(n,r,null,{allOwnKeys:!0}),n.create=function(o){return Kb(pc(e,o))},n}const Tr=Kb(Gu);Tr.Axios=uc;Tr.CanceledError=Td;Tr.CancelToken=w3;Tr.isCancel=Bb;Tr.VERSION=Wb;Tr.toFormData=Qf;Tr.AxiosError=Qt;Tr.Cancel=Tr.CanceledError;Tr.all=function(r){return Promise.all(r)};Tr.spread=N3;Tr.isAxiosError=j3;Tr.mergeConfig=pc;Tr.AxiosHeaders=aa;Tr.formToJSON=e=>Mb(Me.isHTMLForm(e)?new FormData(e):e);Tr.getAdapter=Hb.getAdapter;Tr.HttpStatusCode=l0;Tr.default=Tr;const{Axios:TC,AxiosError:OC,CanceledError:RC,isCancel:MC,CancelToken:BC,VERSION:UC,all:qC,Cancel:zC,isAxiosError:$C,spread:VC,toFormData:HC,AxiosHeaders:WC,HttpStatusCode:GC,formToJSON:KC,getAdapter:YC,mergeConfig:JC}=Tr,Yb=e=>{if(!e)return"An unexpected error occurred. Please try again.";let r="";if(typeof e=="string")r=e;else if(e.message)r=e.message;else if(e.response?.data?.message)r=e.response.data.message;else if(e.response?.data?.error)r=e.response.data.error;else return"An unexpected error occurred. Please try again.";const n=r.toLowerCase();return n.includes("hostkit")||n.includes("hostaway")?n.includes("rate limit")||n.includes("too many requests")?"Network service is temporarily busy. Please try again in 1 minute.":n.includes("unauthorized")||n.includes("invalid")||n.includes("expired")?"Network authentication failed. Please try again in 1 minute.":n.includes("not found")||n.includes("404")?"Requested resource not available. Please try again in 1 minute.":n.includes("timeout")||n.includes("connection")?"Network connection timeout. Please try again in 1 minute.":n.includes("server error")||n.includes("500")?"Network service temporarily unavailable. Please try again in 1 minute.":n.includes("api")&&n.includes("error")?"Network service error. Please try again in 1 minute.":"Network service temporarily unavailable. Please try again in 1 minute.":r},lp=e=>{const r=Yb(e);return r.includes("Network service")||r.includes("Please try again in 1 minute")?r:r.includes("failed")||r.includes("error")?"Operation failed. Please try again in 1 minute.":"An unexpected error occurred. Please try again in 1 minute."},k3="http://localhost:5000".replace(/\/$/,"");class S3{client;constructor(){this.client=Tr.create({baseURL:k3,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(r=>{const n=localStorage.getItem("token");return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r,r=>{const{response:n}=r;if(!n)return console.error("Network error. Please check your connection."),Promise.reject(r);switch(n.status){case 401:localStorage.removeItem("token"),window.location.href="/auth/login",console.error("Session expired. Please login again.");break;case 403:console.error("You do not have permission to perform this action.");break;case 404:console.error("Resource not found.");break;case 422:if(n.data?.errors){const o=n.data.errors;console.error("Validation errors:",o)}else console.error(n.data?.message||"Validation error.");break;case 429:console.error("Too many requests. Please try again later.");break;case 500:console.error("Server error. Please try again later.");break;default:const a=Yb(n.data?.message||"An unexpected error occurred.");console.error(a)}return Promise.reject(r)})}async get(r,n){return(await this.client.get(r,n)).data}async post(r,n,a){return(await this.client.post(r,n,a)).data}async put(r,n,a){return(await this.client.put(r,n,a)).data}async patch(r,n,a){return(await this.client.patch(r,n,a)).data}async delete(r,n){return(await this.client.delete(r,n)).data}async uploadFile(r,n,a){const o=new FormData;o.append("file",n);const l={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u=>{if(a&&u.total){const h=Math.round(u.loaded*100/u.total);a(h)}}};return(await this.client.post(r,o,l)).data}async downloadFile(r,n){const a=await this.client.get(r,{responseType:"blob"}),o=new Blob([a.data]),l=window.URL.createObjectURL(o),d=document.createElement("a");d.href=l,d.download=n||"download",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(l)}}const Ft=new S3,ld={main:"http://localhost:5000".replace(/\/$/,""),auth:"http://localhost:5000".replace(/\/$/,"")},A3={maxRetries:3,initialDelay:1e3,maxDelay:5e3,backoffFactor:2,retryableStatuses:[400,500,502,503,504],onRetry:()=>{}};async function cd(e,r={}){const n={...A3,...r};let a=null;for(let o=0;o<=n.maxRetries;o++)try{return(await e()).data}catch(l){const d=l;a=d;const u=d.response?.status,h=u&&n.retryableStatuses.includes(u),p=o===n.maxRetries;if(!h||p)throw l;const m=Math.min(n.initialDelay*Math.pow(n.backoffFactor,o),n.maxDelay);n.onRetry(o+1,d),await new Promise(b=>setTimeout(b,m))}throw a||new Error("Request failed")}const jc={async sendLoginOTP(e){return cd(()=>Tr.post(`${ld.auth}/auth/send-login-otp`,e),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(`🔄 Retrying OTP request (attempt ${r}/3) - server is waking up...`)}})},async verifyLoginOTP(e){return cd(()=>Tr.post(`${ld.auth}/auth/verify-login-otp`,e),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(`🔄 Retrying OTP verification (attempt ${r}/3)...`)}})},async sendSignupOTP(e){return cd(()=>Tr.post(`${ld.auth}/auth/send-signup-otp`,e),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(`🔄 Retrying signup OTP (attempt ${r}/3) - server is waking up...`)}})},async verifySignupOTP(e){return cd(()=>Tr.post(`${ld.auth}/auth/verify-signup-otp`,e),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(`🔄 Retrying signup verification (attempt ${r}/3)...`)}})},async getCurrentUser(){return Ft.get("/auth/me")},async forgotPassword(e){return cd(()=>Tr.post(`${ld.auth}/auth/forgot-password`,e),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(`🔄 Retrying password reset OTP (attempt ${r}/3) - server is waking up...`)}})},async resetPassword(e){const r={email:e.email,otp:e.otp,code:e.otp,newPassword:e.password};return cd(()=>Tr.post(`${ld.auth}/auth/reset-password`,r),{maxRetries:3,initialDelay:2e3,onRetry:n=>{console.log(`🔄 Retrying password reset (attempt ${n}/3)...`)}})},async logout(){return Ft.post("/auth/logout")}},nf=e=>{if(!e||typeof e!="string")return"user";switch(e.toLowerCase()){case"admin":return"admin";case"owner":return"owner";case"accountant":return"accountant";case"user":default:return"user"}},em=(e,r)=>e?r.includes(e):!1,C3=e=>em(e,["admin"]),ty=e=>em(e,["owner"]),ry=e=>em(e,["accountant"]),P3=e=>em(e,["admin","owner"]),ac=e=>P3(e),_3=e=>C3(e),D3={user:localStorage.getItem("user")?(()=>{const e=JSON.parse(localStorage.getItem("user"));return{...e,role:nf(e.role)}})():null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},wu=Ur("auth/sendLoginOTP",async(e,{rejectWithValue:r})=>{try{return await jc.sendLoginOTP(e)}catch(n){return r(n.response?.data?.message||"Failed to send OTP")}}),sf=Ur("auth/verifyLoginOTP",async(e,{rejectWithValue:r})=>{try{const n=await jc.verifyLoginOTP(e);return localStorage.setItem("token",n.accessToken),{...n,token:n.accessToken}}catch(n){return r(n.response?.data?.message||"Invalid OTP")}}),Nu=Ur("auth/sendSignupOTP",async(e,{rejectWithValue:r})=>{try{return await jc.sendSignupOTP(e)}catch(n){return r(n.response?.data?.message||"Failed to send OTP")}}),af=Ur("auth/verifySignupOTP",async(e,{rejectWithValue:r})=>{try{const n=await jc.verifySignupOTP(e);return localStorage.setItem("token",n.accessToken),{...n,token:n.accessToken}}catch(n){return r(n.response?.data?.message||"Invalid OTP")}}),ju=Ur("auth/getCurrentUser",async(e,{rejectWithValue:r})=>{try{return await jc.getCurrentUser()}catch(n){return localStorage.removeItem("token"),r(n.response?.data?.message||"Failed to get user")}}),U0=Ur("auth/logout",async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),null)),Jb=To({name:"auth",initialState:D3,reducers:{clearError:e=>{e.error=null},setToken:(e,r)=>{e.token=r.payload,e.isAuthenticated=!0,localStorage.setItem("token",r.payload)}},extraReducers:e=>{e.addCase(wu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(wu.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(wu.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload}).addCase(sf.pending,r=>{r.isLoading=!0,r.error=null}).addCase(sf.fulfilled,(r,n)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...n.payload.user,role:nf(n.payload.user.role)};r.user=a,r.token=n.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(sf.rejected,(r,n)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=n.payload}).addCase(Nu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Nu.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(Nu.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload}).addCase(af.pending,r=>{r.isLoading=!0,r.error=null}).addCase(af.fulfilled,(r,n)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...n.payload.user,role:nf(n.payload.user.role)};r.user=a,r.token=n.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(af.rejected,(r,n)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=n.payload}).addCase(ju.pending,r=>{r.isLoading=!0}).addCase(ju.fulfilled,(r,n)=>{r.isLoading=!1;const a={...n.payload,role:nf(n.payload.role)};r.user=a,r.isAuthenticated=!0}).addCase(ju.rejected,r=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(U0.fulfilled,r=>{r.user=null,r.token=null,r.isAuthenticated=!1,r.isLoading=!1,r.error=null})}}),{clearError:L3,setToken:QC}=Jb.actions,E3=Jb.reducer,Qb=O.createContext(void 0),F3={en:{"dashboard.title":"Dashboard","dashboard.welcome":"Welcome to Owner Portal","dashboard.overview":"Overview","dashboard.properties":"Properties","dashboard.bookings":"Bookings","dashboard.revenue":"Revenue","dashboard.occupancy":"Occupancy Rate","dashboard.averageRate":"Average Rate","dashboard.totalRevenue":"Total Revenue","dashboard.totalBookings":"Total Bookings","dashboard.activeProperties":"Active Properties","dashboard.pendingReviews":"Pending Reviews","dashboard.description":"Here's what's happening with your properties today. Manage your portfolio with ease and maximize your rental income.","dashboard.recentBookings":"Recent Bookings","dashboard.latestReservations":"Latest reservations across your properties","dashboard.quickActions":"Quick Actions","dashboard.manageEfficiently":"Manage your properties efficiently","dashboard.yourProperties":"Your Properties","dashboard.managePortfolio":"Manage and monitor your property portfolio","dashboard.viewCalendar":"View Calendar","dashboard.manageBookings":"Manage Bookings","dashboard.viewInvoices":"View Invoices","dashboard.getSAFT":"Get SAFT-T","dashboard.noBookings":"No recent bookings found","dashboard.bookingsWillAppear":"Bookings will appear here once you have reservations","dashboard.activePropertiesCount":"Active Properties","dashboard.noPropertiesFound":"No Properties Found","dashboard.addFirstProperty":"Add your first property to start tracking bookings and revenue","greeting.morning":"Good morning","greeting.afternoon":"Good afternoon","greeting.evening":"Good evening","property.name":"Property Name","property.address":"Address","property.type":"Type","property.status":"Status","property.guests":"Max Guests","property.bedrooms":"Bedrooms","property.bathrooms":"Bathrooms","property.amenities":"Amenities","property.actions":"Actions","property.edit":"Edit","property.delete":"Delete","property.view":"View","property.bookings":"Bookings","property.invoices":"Invoices","property.calendar":"Calendar","property.add":"Add Property","admin.dashboard":"Admin Dashboard","admin.welcomeBack":"Welcome back","admin.allOwners":"All Owners","admin.allAccountants":"All Accountants","admin.addUser":"Add User","admin.totalOwners":"Total Owners","admin.totalAccountants":"Total Accountants","admin.totalProperties":"Total Properties","admin.totalRevenue":"Total Revenue","admin.loadingDashboard":"Loading Admin Dashboard...","admin.ownersManagement":"Owners Management","admin.manageOwners":"Manage property owners and their company information","admin.addOwner":"Add Owner","admin.propertiesAllOwners":"Properties (All Owners)","admin.managePortfolio":"Manage and monitor your property portfolio","admin.addProperty":"Add Property","admin.accountantsAllAccountants":"Accountants (All Accountants)","admin.manageAccountants":"Manage accountant access and property assignments","admin.noAccountants":"No accountants","admin.getStartedAddAccountant":"Get started by adding a new accountant","admin.getStartedAddOwner":"Get started by adding your first property owner","admin.getStartedAddProperty":"Get started by adding a new property","admin.currentView":"Current View","admin.adminOwned":"Admin Owned","admin.ownerOwned":"Owner Owned","admin.edit":"Edit","admin.delete":"Delete","admin.verified":"Verified","admin.company":"company","admin.companies":"companies","admin.pending":"Pending","admin.owner":"Owner","admin.accountant":"Accountant","admin.id":"ID","admin.active":"active","bookings.title":"Bookings","bookings.manageReservations":"Manage reservations and guest communications","bookings.loading":"Loading bookings...","bookings.selectProperty":"Please select a property to view its bookings.","bookings.showingData":"Showing {period} data","bookings.forProperty":"for Property {propertyId}","bookings.dateRange":"({startDate} to {endDate})","bookings.clearFilters":"Clear Filters","bookings.property":"Property:","bookings.status":"Status","bookings.allStatuses":"All Statuses","bookings.modified":"Modified","bookings.inquiry":"Inquiry","bookings.inquiryPreapproved":"Inquiry Pre-approved","bookings.cancelled":"Cancelled","bookings.dateRangeLabel":"Date Range","bookings.selectDateRange":"Select Date Range","bookings.lastMonth":"Last Month","bookings.last3Months":"Last 3 Months","bookings.checkinFrom":"Check-in From","bookings.checkinTo":"Check-in To","bookings.clearAll":"Clear All","bookings.applyFilters":"Apply Filters","bookings.guest":"Guest","bookings.propertyLabel":"Property","bookings.checkin":"Check-in","bookings.checkout":"Check-out","bookings.amount":"Amount","bookings.actions":"Actions","bookings.viewDetails":"View Details","bookings.bookingDetails":"Booking Details & SIBA Manager","bookings.bookingInformation":"Booking Information","bookings.guestName":"Guest Name:","bookings.propertyColon":"Property:","bookings.checkinLabel":"Check-in:","bookings.checkoutLabel":"Check-out:","bookings.adults":"Adults:","bookings.children":"Children:","bookings.nights":"Nights:","bookings.platform":"Platform:","bookings.totalAmount":"Total Amount:","bookings.noBookingsFound":"No bookings found","bookings.selectPropertyFirst":"Please select a property to view bookings","calendar.title":"Property Calendar","calendar.loading":"Loading Calendar...","calendar.noPropertySelected":"No Property Selected","calendar.selectPropertyToView":"Please select a property to view its calendar and bookings.","calendar.viewOnly":"View Only","calendar.manageAvailability":"Manage your property availability and view bookings","calendar.viewAvailability":"View availability and bookings (read-only)","calendar.day.sun":"Sun","calendar.day.mon":"Mon","calendar.day.tue":"Tue","calendar.day.wed":"Wed","calendar.day.thu":"Thu","calendar.day.fri":"Fri","calendar.day.sat":"Sat","calendar.status.booked":"Booked","calendar.status.blocked":"Blocked","calendar.status.available":"Available","calendar.status.guestDetails":"Guest Details","calendar.selected":"Selected: {start} to {end}","calendar.clickToBlockUnblock":"Click to block or unblock these dates","calendar.blockDates":"Block Dates","calendar.unblockDates":"Unblock Dates","calendar.cancel":"Cancel","calendar.multiDateSelection":"Multi-Date Selection","calendar.selectionInstructions":'Click "Start Selection" → Click start date → Hover to end date → Click end date',"calendar.startSelection":"Start Selection","calendar.selectingDateRange":"Selecting Date Range","calendar.hoverToPreview":"Hover to preview range, then click to complete selection","calendar.doubleClickMode":"Double-Click Mode: {count} date{plural} selected","calendar.hoverToAdd":"Hover over dates to add them to selection","calendar.blockAll":"Block All ({count})","calendar.unblockAll":"Unblock All ({count})","calendar.exitMode":"Exit Mode","calendar.manageDate":"Manage Date","calendar.selectedDate":"Selected Date:","calendar.dateStatus":"Date Status:","calendar.unblockDate":"Unblock Date","calendar.blockDate":"Block Date","calendar.dateBookedCannotBlock":"This date is booked and cannot be blocked or unblocked.","calendar.loadingDateData":"Loading date data...","calendar.loadingShort":"Loading...","calendar.blockedCaps":"BLOCKED","calendar.reserved":"RESERVED","calendar.nightsMin":"nights min","calendar.guests":"guests","calendar.onlyOwnersCanManage":"Only owners can manage calendar dates","calendar.onlyOwnersCanManageAlert":"Only owners can manage calendar dates. You can view the calendar but cannot make changes.","calendar.sessionExpired":"Your session has expired. Please refresh the page to continue.","invoices.title":"Invoices","invoices.manageGuestInvoices":"Manage guest invoices and billing","invoices.loading":"Loading Invoices...","invoices.filters":"Filters","invoices.property":"Property","invoices.dateRange":"Date Range","invoices.fromDate":"From Date","invoices.toDate":"To Date","invoices.lastMonth":"Last Month","invoices.last3Months":"Last 3 Months","invoices.clearAll":"Clear All","invoices.applyFilters":"Apply Filters","invoices.noInvoicesFound":"No invoices found","invoices.noInvoicesAvailable":"No invoices are currently available for this property.","invoices.invoice":"Invoice","invoices.guest":"Guest","invoices.propertyLabel":"Property","invoices.date":"Date","invoices.amount":"Amount","invoices.status":"Status","invoices.actions":"Actions","invoices.closed":"Closed","invoices.open":"Open","invoices.downloading":"Downloading...","invoices.downloadInvoice":"Download Invoice","saft.title":"SAFT-T Retrieval","saft.description":"Retrieve existing SAFT (Sistema de Apuramento de Faturas e Transações) files for Portuguese tax compliance.","saft.companySelection":"Company Selection","saft.selectCompany":"Select a company...","saft.enterNifManually":"Or enter NIF manually:","saft.nifPlaceholder":"e.g., 234567890","saft.year":"Year","saft.month":"Month","saft.retrieving":"Retrieving...","saft.retrieveSaft":"Retrieve SAFT-T","saft.saftNotAvailable":"SAFT File Not Available","saft.tipNotGenerated":"💡 Tip: SAFT files are typically generated at the end of each month. Try selecting a previous month.","saft.retrievedSuccessfully":"SAFT-T Retrieved Successfully","saft.generated":"Generated","saft.sent":"Sent","saft.downloadSaftFile":"Download SAFT-T File","saft.aboutSaft":"About SAFT-T","saft.aboutDescription1":"The SAFT-T (Sistema de Apuramento de Faturas e Transações - Transmissão) is a Portuguese tax compliance system that requires businesses to submit detailed transaction data to the tax authorities. This tool helps you retrieve existing SAFT-T files for the specified period and invoicing VAT ID.","saft.aboutDescription2":"The SAFT-T file contains all invoice and transaction data and can be submitted directly to the Portuguese tax authorities.","saft.month.january":"January","saft.month.february":"February","saft.month.march":"March","saft.month.april":"April","saft.month.may":"May","saft.month.june":"June","saft.month.july":"July","saft.month.august":"August","saft.month.september":"September","saft.month.october":"October","saft.month.november":"November","saft.month.december":"December","ownerStatements.title":"Owner Statements","ownerStatements.description":"Generate financial statements for property owners","ownerStatements.property":"Property","ownerStatements.selectProperty":"Select Property","ownerStatements.startDate":"Start Date","ownerStatements.endDate":"End Date","ownerStatements.managementCommissionRate":"Management Commission Rate (Ignored for admin properties)","ownerStatements.generating":"Generating...","ownerStatements.generateStatements":"Generate Statements","ownerStatements.generatingStatements":"Generating statements...","ownerStatements.propertyInformation":"Property Information","ownerStatements.propertyName":"Property Name:","ownerStatements.propertyId":"Property ID:","ownerStatements.status":"Status:","ownerStatements.period":"Period:","ownerStatements.created":"Created:","ownerStatements.commissionRate":"Commission Rate:","ownerStatements.detailedFinancialBreakdown":"Detailed Financial Breakdown","ownerStatements.downloadCsv":"Download CSV","ownerStatements.downloadPdf":"Download PDF","ownerStatements.detailedReport":"DETAILED REPORT","ownerStatements.propertyOwner":"Property Owner","ownerStatements.calculationBasis":"Calculation basis:","ownerStatements.commissionableAmount":"Commissionable amount:","ownerStatements.commissionableAmountNote":"(Received amount + Host commission) - Cleaning fee","ownerStatements.rule":"Rule:","ownerStatements.managementCommissions":"Management commissions:","ownerStatements.cleaningFees":"Cleaning fees:","ownerStatements.cleaningFeesNote":"incl. VAT","ownerStatements.hostCommissions":"Host commissions:","ownerStatements.extraFees":"Extra fees:","ownerStatements.expenses":"Expenses:","ownerStatements.issuer":"Issuer:","ownerStatements.recipient":"Recipient:","ownerStatements.totalToInvoice":"TOTAL TO INVOICE:","ownerStatements.totalToPay":"TOTAL TO PAY:","ownerStatements.totalToPayNote":"(Received amounts - Total to invoice)","ownerStatements.tableProperty":"Property","ownerStatements.tableInvoice":"Invoice","ownerStatements.tableReservation":"Reservation","ownerStatements.tableReceivedAmount":"Received amount","ownerStatements.tableHostCommission":"Host commission","ownerStatements.tableCleaningFee":"Cleaning fee","ownerStatements.tableMgmtCommission":"Mgmt commission","ownerStatements.tableTotal":"Total","sibaManager.title":"SIBA Manager Dashboard","sibaManager.underDevelopment":"Under Development","sibaManager.description":"We are currently working on enhancing the SIBA Manager Dashboard with new features and improvements. This section will be available soon with comprehensive SIBA compliance monitoring capabilities.","sibaManager.comingSoon":"Coming Soon","auth.welcomeBack":"Welcome back","auth.signInToDashboard":"Sign in to your property management dashboard","auth.emailAddress":"Email address","auth.enterEmail":"Enter your email","auth.password":"Password","auth.enterPassword":"Enter your password","auth.sendOTP":"Send OTP","auth.forgotPassword":"Forgot your password?","auth.noAccount":"Don't have an account?","auth.signUpFree":"Sign up for free","auth.forgotPasswordTitle":"Forgot your password?","auth.forgotPasswordDescription":"No worries! Enter your email and we'll send you a reset OTP.","auth.sendResetOTP":"Send reset OTP","auth.backToLogin":"Back to login","auth.resetPasswordTitle":"Reset your password","auth.resetPasswordDescription":"Enter your email, OTP code, and new password below.","auth.accountCreation":"Account Creation","auth.contactAdmin":"Contact your administrator to request account creation","auth.firstName":"First Name","auth.lastName":"Last Name","auth.phoneNumber":"Phone Number","auth.confirmPassword":"Confirm Password","auth.enterFirstName":"Enter your first name","auth.enterLastName":"Enter your last name","auth.enterPhoneNumber":"Enter your phone number","auth.confirmYourPassword":"Confirm your password","auth.accountType":"Account Type","auth.adminAccountUnavailable":"Admin Account (Unavailable)","auth.alreadyExists":"(Already exists)","auth.contactAdminForAccount":"Contact Administrator for Account Creation","auth.alreadyHaveAccount":"Already have an account?","auth.signInHere":"Sign in here","auth.accountCreationByAdmin":"Account Creation by Administrator","auth.allAccountsCreatedByAdmin":"All user accounts are created by the system administrator. Please contact your administrator to request account creation.","auth.toRequestAccount":"To request an account:","auth.contactSystemAdmin":"Contact your system administrator","auth.provideEmailAndRole":"Provide your email address and role requirements","auth.adminWillCreateAccount":"Administrator will create your account and send login credentials","marketing.manageProperties":"Manage your properties with confidence","marketing.platformDescription":"Track bookings, monitor performance, handle compliance, and maximize your rental income with our comprehensive property management platform.","marketing.realTimeBooking":"Real-time booking management","marketing.financialTracking":"Financial performance tracking","marketing.complianceReporting":"Automated compliance reporting","marketing.multiPropertyDashboard":"Multi-property dashboard","marketing.joinOwners":"Join thousands of property owners","marketing.journeyDescription":"Start your property management journey with our comprehensive platform designed to maximize your rental income and streamline operations.","marketing.easyOnboarding":"Easy property onboarding","marketing.automatedBookings":"Automated booking management","marketing.financialReporting":"Financial reporting & analytics","marketing.customerSupport":"24/7 customer support","bookingDetail.reportTitle":"Booking Detail Report","bookingDetail.generatedOn":"Generated on:","bookingDetail.basicInformation":"Basic Information","bookingDetail.hostawayReservationId":"Hostaway Reservation ID:","bookingDetail.channelReservationId":"Channel Reservation ID:","bookingDetail.property":"Property:","bookingDetail.guestName":"Guest Name:","bookingDetail.guestEmail":"Guest Email:","bookingDetail.guestPhone":"Guest Phone:","bookingDetail.datesDuration":"Dates & Duration","bookingDetail.checkin":"Check-in:","bookingDetail.checkout":"Check-out:","bookingDetail.totalNights":"Total Nights:","bookingDetail.checkinTime":"Check-in Time:","bookingDetail.checkoutTime":"Check-out Time:","bookingDetail.guestInformation":"Guest Information","bookingDetail.adults":"Adults:","bookingDetail.children":"Children:","bookingDetail.totalGuests":"Total Guests:","bookingDetail.bookingDetails":"Booking Details","bookingDetail.platform":"Platform:","bookingDetail.status":"Status:","bookingDetail.paymentStatus":"Payment Status:","bookingDetail.financialBreakdown":"Financial Breakdown","bookingDetail.totalRevenue":"Total Revenue:","bookingDetail.finalAmountNote":"Final amount - includes all fees (cleaning, city tax, etc.)","bookingDetail.cityTax":"City Tax:","bookingDetail.specialRequests":"Special Requests","bookingDetail.notProvided":"Not provided","bookingDetail.backToBookings":"Back to Bookings","bookingDetail.printPdf":"Print PDF","bookingDetail.guestEmailNotProvided":"Not provided by platform (privacy policy)","bookingDetail.confirmed":"Confirmed","bookingDetail.modified":"Modified","bookingDetail.cancelled":"Cancelled","bookingDetail.pending":"Pending","nav.dashboard":"Dashboard","nav.adminPanel":"Admin Panel","nav.ownerManagement":"Owner Management","nav.properties":"Properties","nav.bookings":"Bookings","nav.invoices":"Invoices","nav.sibaManager":"SIBA Manager","nav.saft":"SAFT-T","nav.calendar":"Calendar","nav.reviews":"Reviews","nav.performance":"Performance","nav.portfolio":"Portfolio","nav.creditNotes":"Credit Notes","nav.expenses":"Expenses","nav.ownerStatements":"Owner Statements","nav.settings":"Settings","nav.profile":"Profile","nav.signOut":"Sign Out","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.edit":"Edit","common.delete":"Delete","common.view":"View","common.close":"Close","common.yes":"Yes","common.no":"No","common.confirm":"Confirm","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.refresh":"Refresh","language.english":"English","language.portuguese":"Português","language.french":"Français","language.switch":"Switch Language","status.active":"Active","status.inactive":"Inactive","status.pending":"Pending","status.completed":"Completed","status.cancelled":"Cancelled","calendar.month":"Month","calendar.week":"Week","calendar.day":"Day","calendar.today":"Today","calendar.booked":"Booked","calendar.available":"Available","calendar.blocked":"Blocked","calendar.price":"Price","calendar.minStay":"Min Stay","notification.newBooking":"New Booking","notification.paymentReceived":"Payment Received","notification.reviewReceived":"New Review","notification.maintenanceRequest":"Maintenance Request","notification.title":"Notifications","notification.markAllRead":"Mark all read","notification.noNotifications":"No notifications"},pt:{"dashboard.title":"Painel de Controle","dashboard.welcome":"Bem-vindo ao Portal do Proprietário","dashboard.overview":"Visão Geral","dashboard.properties":"Propriedades","dashboard.bookings":"Reservas","dashboard.revenue":"Receita","dashboard.occupancy":"Taxa de Ocupação","dashboard.averageRate":"Taxa Média","dashboard.totalRevenue":"Receita Total","dashboard.totalBookings":"Total de Reservas","dashboard.activeProperties":"Propriedades Ativas","dashboard.pendingReviews":"Avaliações Pendentes","dashboard.description":"Aqui está o que está acontecendo com suas propriedades hoje. Gerencie seu portfólio com facilidade e maximize sua receita de aluguel.","dashboard.recentBookings":"Reservas Recentes","dashboard.latestReservations":"Últimas reservas em suas propriedades","dashboard.quickActions":"Ações Rápidas","dashboard.manageEfficiently":"Gerencie suas propriedades com eficiência","dashboard.yourProperties":"Suas Propriedades","dashboard.managePortfolio":"Gerencie e monitore seu portfólio de propriedades","dashboard.viewCalendar":"Ver Calendário","dashboard.manageBookings":"Gerenciar Reservas","dashboard.viewInvoices":"Ver Faturas","dashboard.getSAFT":"Obter SAFT-T","dashboard.noBookings":"Nenhuma reserva recente encontrada","dashboard.bookingsWillAppear":"As reservas aparecerão aqui assim que você tiver reservas","dashboard.activePropertiesCount":"Propriedades Ativas","dashboard.noPropertiesFound":"Nenhuma Propriedade Encontrada","dashboard.addFirstProperty":"Adicione sua primeira propriedade para começar a rastrear reservas e receita","greeting.morning":"Bom dia","greeting.afternoon":"Boa tarde","greeting.evening":"Boa noite","property.name":"Nome da Propriedade","property.address":"Endereço","property.type":"Tipo","property.status":"Status","property.guests":"Hóspedes Máx","property.bedrooms":"Quartos","property.bathrooms":"Banheiros","property.amenities":"Comodidades","property.actions":"Ações","property.edit":"Editar","property.delete":"Excluir","property.view":"Visualizar","property.bookings":"Reservas","property.invoices":"Faturas","property.calendar":"Calendário","property.add":"Adicionar Propriedade","admin.dashboard":"Painel de Administração","admin.welcomeBack":"Bem-vindo de volta","admin.allOwners":"Todos os Proprietários","admin.allAccountants":"Todos os Contadores","admin.addUser":"Adicionar Usuário","admin.totalOwners":"Total de Proprietários","admin.totalAccountants":"Total de Contadores","admin.totalProperties":"Total de Propriedades","admin.totalRevenue":"Receita Total","admin.loadingDashboard":"Carregando Painel de Administração...","admin.ownersManagement":"Gestão de Proprietários","admin.manageOwners":"Gerir proprietários e suas informações da empresa","admin.addOwner":"Adicionar Proprietário","admin.propertiesAllOwners":"Propriedades (Todos os Proprietários)","admin.managePortfolio":"Gerir e monitorizar o seu portfólio de propriedades","admin.addProperty":"Adicionar Propriedade","admin.accountantsAllAccountants":"Contadores (Todos os Contadores)","admin.manageAccountants":"Gerir acesso de contadores e atribuições de propriedades","admin.noAccountants":"Nenhum contador","admin.getStartedAddAccountant":"Comece adicionando um novo contador","admin.getStartedAddOwner":"Comece adicionando seu primeiro proprietário","admin.getStartedAddProperty":"Comece adicionando uma nova propriedade","admin.currentView":"Visualização Atual","admin.adminOwned":"Propriedade Admin","admin.ownerOwned":"Propriedade do Proprietário","admin.edit":"Editar","admin.delete":"Excluir","admin.verified":"Verificado","admin.company":"empresa","admin.companies":"empresas","admin.pending":"Pendente","admin.owner":"Proprietário","admin.accountant":"Contador","admin.id":"ID","admin.active":"ativo","bookings.title":"Reservas","bookings.manageReservations":"Gerir reservas e comunicações com hóspedes","bookings.loading":"Carregando reservas...","bookings.selectProperty":"Por favor, selecione uma propriedade para ver as suas reservas.","bookings.showingData":"Mostrando dados {period}","bookings.forProperty":"para a propriedade {propertyId}","bookings.dateRange":"({startDate} a {endDate})","bookings.clearFilters":"Limpar filtros","bookings.property":"Propriedade:","bookings.status":"Status","bookings.allStatuses":"Todos os status","bookings.modified":"Modificado","bookings.inquiry":"Consulta","bookings.inquiryPreapproved":"Consulta pré-aprovada","bookings.cancelled":"Cancelado","bookings.dateRangeLabel":"Intervalo de datas","bookings.selectDateRange":"Selecionar intervalo de datas","bookings.lastMonth":"Mês passado","bookings.last3Months":"Últimos 3 meses","bookings.checkinFrom":"Check-in de","bookings.checkinTo":"Check-in até","bookings.clearAll":"Limpar tudo","bookings.applyFilters":"Aplicar filtros","bookings.guest":"Hóspede","bookings.propertyLabel":"Propriedade","bookings.checkin":"Check-in","bookings.checkout":"Check-out","bookings.amount":"Valor","bookings.actions":"Ações","bookings.viewDetails":"Ver detalhes","bookings.bookingDetails":"Detalhes da reserva e gerenciador SIBA","bookings.bookingInformation":"Informações da reserva","bookings.guestName":"Nome do hóspede:","bookings.propertyColon":"Propriedade:","bookings.checkinLabel":"Check-in:","bookings.checkoutLabel":"Check-out:","bookings.adults":"Adultos:","bookings.children":"Crianças:","bookings.nights":"Noites:","bookings.platform":"Plataforma:","bookings.totalAmount":"Valor total:","bookings.noBookingsFound":"Nenhuma reserva encontrada","bookings.selectPropertyFirst":"Por favor, selecione uma propriedade para ver as reservas","calendar.title":"Calendário da Propriedade","calendar.loading":"Carregando Calendário...","calendar.noPropertySelected":"Nenhuma Propriedade Selecionada","calendar.selectPropertyToView":"Por favor, selecione uma propriedade para ver seu calendário e reservas.","calendar.viewOnly":"Somente Leitura","calendar.manageAvailability":"Gerencie a disponibilidade da sua propriedade e visualize reservas","calendar.viewAvailability":"Visualize disponibilidade e reservas (somente leitura)","calendar.day.sun":"Dom","calendar.day.mon":"Seg","calendar.day.tue":"Ter","calendar.day.wed":"Qua","calendar.day.thu":"Qui","calendar.day.fri":"Sex","calendar.day.sat":"Sáb","calendar.status.booked":"Reservado","calendar.status.blocked":"Bloqueado","calendar.status.available":"Disponível","calendar.status.guestDetails":"Detalhes dos Hóspedes","calendar.selected":"Selecionado: {start} a {end}","calendar.clickToBlockUnblock":"Clique para bloquear ou desbloquear essas datas","calendar.blockDates":"Bloquear Datas","calendar.unblockDates":"Desbloquear Datas","calendar.cancel":"Cancelar","calendar.multiDateSelection":"Seleção Multi-Data","calendar.selectionInstructions":'Clique em "Iniciar Seleção" → Clique na data de início → Passe o mouse até a data final → Clique na data final',"calendar.startSelection":"Iniciar Seleção","calendar.selectingDateRange":"Selecionando Intervalo de Datas","calendar.hoverToPreview":"Passe o mouse para visualizar o intervalo, depois clique para completar a seleção","calendar.doubleClickMode":"Modo Duplo-Clique: {count} data{plural} selecionada{plural}","calendar.hoverToAdd":"Passe o mouse sobre as datas para adicioná-las à seleção","calendar.blockAll":"Bloquear Tudo ({count})","calendar.unblockAll":"Desbloquear Tudo ({count})","calendar.exitMode":"Sair do Modo","calendar.manageDate":"Gerenciar Data","calendar.selectedDate":"Data Selecionada:","calendar.dateStatus":"Status da Data:","calendar.unblockDate":"Desbloquear Data","calendar.blockDate":"Bloquear Data","calendar.dateBookedCannotBlock":"Esta data está reservada e não pode ser bloqueada ou desbloqueada.","calendar.loadingDateData":"Carregando dados da data...","calendar.loadingShort":"Carregando...","calendar.blockedCaps":"BLOQUEADO","calendar.reserved":"RESERVADO","calendar.nightsMin":"noites mín","calendar.guests":"hóspedes","calendar.onlyOwnersCanManage":"Apenas proprietários podem gerenciar datas do calendário","calendar.onlyOwnersCanManageAlert":"Apenas proprietários podem gerenciar datas do calendário. Você pode visualizar o calendário mas não pode fazer alterações.","calendar.sessionExpired":"Sua sessão expirou. Por favor, atualize a página para continuar.","invoices.title":"Faturas","invoices.manageGuestInvoices":"Gerenciar faturas de hóspedes e cobrança","invoices.loading":"Carregando faturas...","invoices.filters":"Filtros","invoices.property":"Propriedade","invoices.dateRange":"Período","invoices.fromDate":"Data de início","invoices.toDate":"Data de fim","invoices.lastMonth":"Mês passado","invoices.last3Months":"Últimos 3 meses","invoices.clearAll":"Limpar tudo","invoices.applyFilters":"Aplicar filtros","invoices.noInvoicesFound":"Nenhuma fatura encontrada","invoices.noInvoicesAvailable":"Nenhuma fatura está atualmente disponível para esta propriedade.","invoices.invoice":"Fatura","invoices.guest":"Hóspede","invoices.propertyLabel":"Propriedade","invoices.date":"Data","invoices.amount":"Valor","invoices.status":"Status","invoices.actions":"Ações","invoices.closed":"Fechado","invoices.open":"Aberto","invoices.downloading":"Baixando...","invoices.downloadInvoice":"Baixar fatura","saft.title":"Recuperação SAFT-T","saft.description":"Recuperar arquivos SAFT (Sistema de Apuramento de Faturas e Transações) existentes para conformidade fiscal portuguesa.","saft.companySelection":"Seleção da Empresa","saft.selectCompany":"Selecionar uma empresa...","saft.enterNifManually":"Ou inserir NIF manualmente:","saft.nifPlaceholder":"ex., 234567890","saft.year":"Ano","saft.month":"Mês","saft.retrieving":"Recuperando...","saft.retrieveSaft":"Recuperar SAFT-T","saft.saftNotAvailable":"Arquivo SAFT não disponível","saft.tipNotGenerated":"💡 Dica: Os arquivos SAFT são tipicamente gerados no final de cada mês. Tente selecionar um mês anterior.","saft.retrievedSuccessfully":"SAFT-T recuperado com sucesso","saft.generated":"Gerado","saft.sent":"Enviado","saft.downloadSaftFile":"Baixar arquivo SAFT-T","saft.aboutSaft":"Sobre SAFT-T","saft.aboutDescription1":"O SAFT-T (Sistema de Apuramento de Faturas e Transações - Transmissão) é um sistema de conformidade fiscal português que exige que as empresas submetam dados detalhados de transações às autoridades fiscais. Esta ferramenta ajuda você a recuperar arquivos SAFT-T existentes para o período e ID de IVA de faturação especificados.","saft.aboutDescription2":"O arquivo SAFT-T contém todos os dados de fatura e transação e pode ser submetido diretamente às autoridades fiscais portuguesas.","saft.month.january":"Janeiro","saft.month.february":"Fevereiro","saft.month.march":"Março","saft.month.april":"Abril","saft.month.may":"Maio","saft.month.june":"Junho","saft.month.july":"Julho","saft.month.august":"Agosto","saft.month.september":"Setembro","saft.month.october":"Outubro","saft.month.november":"Novembro","saft.month.december":"Dezembro","ownerStatements.title":"Declarações do Proprietário","ownerStatements.description":"Gerar declarações financeiras para proprietários","ownerStatements.property":"Propriedade","ownerStatements.selectProperty":"Selecionar Propriedade","ownerStatements.startDate":"Data de Início","ownerStatements.endDate":"Data de Fim","ownerStatements.managementCommissionRate":"Taxa de Comissão de Gestão (Ignorada para propriedades admin)","ownerStatements.generating":"Gerando...","ownerStatements.generateStatements":"Gerar Declarações","ownerStatements.generatingStatements":"Gerando declarações...","ownerStatements.propertyInformation":"Informações da Propriedade","ownerStatements.propertyName":"Nome da Propriedade:","ownerStatements.propertyId":"ID da Propriedade:","ownerStatements.status":"Status:","ownerStatements.period":"Período:","ownerStatements.created":"Criado:","ownerStatements.commissionRate":"Taxa de Comissão:","ownerStatements.detailedFinancialBreakdown":"Detalhamento Financeiro Detalhado","ownerStatements.downloadCsv":"Baixar CSV","ownerStatements.downloadPdf":"Baixar PDF","ownerStatements.detailedReport":"RELATÓRIO DETALHADO","ownerStatements.propertyOwner":"Proprietário da Propriedade","ownerStatements.calculationBasis":"Base de cálculo:","ownerStatements.commissionableAmount":"Valor comissionável:","ownerStatements.commissionableAmountNote":"(Valor recebido + Comissão do anfitrião) - Taxa de limpeza","ownerStatements.rule":"Regra:","ownerStatements.managementCommissions":"Comissões de gestão:","ownerStatements.cleaningFees":"Taxas de limpeza:","ownerStatements.cleaningFeesNote":"incl. IVA","ownerStatements.hostCommissions":"Comissões do anfitrião:","ownerStatements.extraFees":"Taxas extras:","ownerStatements.expenses":"Despesas:","ownerStatements.issuer":"Emissor:","ownerStatements.recipient":"Destinatário:","ownerStatements.totalToInvoice":"TOTAL A FATURAR:","ownerStatements.totalToPay":"TOTAL A PAGAR:","ownerStatements.totalToPayNote":"(Valores recebidos - Total a faturar)","ownerStatements.tableProperty":"Propriedade","ownerStatements.tableInvoice":"Fatura","ownerStatements.tableReservation":"Reserva","ownerStatements.tableReceivedAmount":"Valor recebido","ownerStatements.tableHostCommission":"Comissão do anfitrião","ownerStatements.tableCleaningFee":"Taxa de limpeza","ownerStatements.tableMgmtCommission":"Comissão de gestão","ownerStatements.tableTotal":"Total","sibaManager.title":"Painel do Gestor SIBA","sibaManager.underDevelopment":"Em Desenvolvimento","sibaManager.description":"Estamos atualmente trabalhando na melhoria do Painel do Gestor SIBA com novos recursos e melhorias. Esta seção estará disponível em breve com capacidades abrangentes de monitoramento de conformidade SIBA.","sibaManager.comingSoon":"Em Breve","auth.welcomeBack":"Bem-vindo de volta","auth.signInToDashboard":"Entre no seu painel de gerenciamento de propriedades","auth.emailAddress":"Endereço de email","auth.enterEmail":"Digite seu email","auth.password":"Senha","auth.enterPassword":"Digite sua senha","auth.sendOTP":"Enviar OTP","auth.forgotPassword":"Esqueceu sua senha?","auth.noAccount":"Não tem uma conta?","auth.signUpFree":"Cadastre-se gratuitamente","auth.forgotPasswordTitle":"Esqueceu sua senha?","auth.forgotPasswordDescription":"Sem problemas! Digite seu email e enviaremos um OTP de redefinição.","auth.sendResetOTP":"Enviar OTP de redefinição","auth.backToLogin":"Voltar ao login","auth.resetPasswordTitle":"Redefinir sua senha","auth.resetPasswordDescription":"Digite seu email, código OTP e nova senha abaixo.","auth.accountCreation":"Criação de Conta","auth.contactAdmin":"Entre em contato com seu administrador para solicitar a criação de conta","auth.firstName":"Primeiro Nome","auth.lastName":"Sobrenome","auth.phoneNumber":"Número de Telefone","auth.confirmPassword":"Confirmar Senha","auth.enterFirstName":"Digite seu primeiro nome","auth.enterLastName":"Digite seu sobrenome","auth.enterPhoneNumber":"Digite seu número de telefone","auth.confirmYourPassword":"Confirme sua senha","auth.accountType":"Tipo de Conta","auth.adminAccountUnavailable":"Conta de Administrador (Indisponível)","auth.alreadyExists":"(Já existe)","auth.contactAdminForAccount":"Contatar Administrador para Criação de Conta","auth.alreadyHaveAccount":"Já tem uma conta?","auth.signInHere":"Entre aqui","auth.accountCreationByAdmin":"Criação de Conta pelo Administrador","auth.allAccountsCreatedByAdmin":"Todas as contas de usuário são criadas pelo administrador do sistema. Entre em contato com seu administrador para solicitar a criação de conta.","auth.toRequestAccount":"Para solicitar uma conta:","auth.contactSystemAdmin":"Entre em contato com seu administrador do sistema","auth.provideEmailAndRole":"Forneça seu endereço de email e requisitos de função","auth.adminWillCreateAccount":"O administrador criará sua conta e enviará as credenciais de login","marketing.manageProperties":"Gerencie suas propriedades com confiança","marketing.platformDescription":"Acompanhe reservas, monitore performance, gerencie conformidade e maximize sua receita de aluguel com nossa plataforma abrangente de gerenciamento de propriedades.","marketing.realTimeBooking":"Gerenciamento de reservas em tempo real","marketing.financialTracking":"Acompanhamento de performance financeira","marketing.complianceReporting":"Relatórios de conformidade automatizados","marketing.multiPropertyDashboard":"Painel multi-propriedades","marketing.joinOwners":"Junte-se a milhares de proprietários","marketing.journeyDescription":"Inicie sua jornada de gerenciamento de propriedades com nossa plataforma abrangente projetada para maximizar sua receita de aluguel e otimizar operações.","marketing.easyOnboarding":"Integração fácil de propriedades","marketing.automatedBookings":"Gerenciamento automatizado de reservas","marketing.financialReporting":"Relatórios e análises financeiras","marketing.customerSupport":"Suporte ao cliente 24/7","bookingDetail.reportTitle":"Relatório de Detalhes da Reserva","bookingDetail.generatedOn":"Gerado em:","bookingDetail.basicInformation":"Informações Básicas","bookingDetail.hostawayReservationId":"ID da Reserva Hostaway:","bookingDetail.channelReservationId":"ID da Reserva do Canal:","bookingDetail.property":"Propriedade:","bookingDetail.guestName":"Nome do Hóspede:","bookingDetail.guestEmail":"Email do Hóspede:","bookingDetail.guestPhone":"Telefone do Hóspede:","bookingDetail.datesDuration":"Datas e Duração","bookingDetail.checkin":"Check-in:","bookingDetail.checkout":"Check-out:","bookingDetail.totalNights":"Total de Noites:","bookingDetail.checkinTime":"Hora de Check-in:","bookingDetail.checkoutTime":"Hora de Check-out:","bookingDetail.guestInformation":"Informações do Hóspede","bookingDetail.adults":"Adultos:","bookingDetail.children":"Crianças:","bookingDetail.totalGuests":"Total de Hóspedes:","bookingDetail.bookingDetails":"Detalhes da Reserva","bookingDetail.platform":"Plataforma:","bookingDetail.status":"Status:","bookingDetail.paymentStatus":"Status do Pagamento:","bookingDetail.financialBreakdown":"Análise Financeira","bookingDetail.totalRevenue":"Receita Total:","bookingDetail.finalAmountNote":"Valor final - inclui todas as taxas (limpeza, taxa da cidade, etc.)","bookingDetail.cityTax":"Taxa da Cidade:","bookingDetail.specialRequests":"Pedidos Especiais","bookingDetail.notProvided":"Não fornecido","bookingDetail.backToBookings":"Voltar às Reservas","bookingDetail.printPdf":"Imprimir PDF","bookingDetail.guestEmailNotProvided":"Não fornecido pela plataforma (política de privacidade)","bookingDetail.confirmed":"Confirmado","bookingDetail.modified":"Modificado","bookingDetail.cancelled":"Cancelado","bookingDetail.pending":"Pendente","nav.dashboard":"Painel","nav.adminPanel":"Painel Admin","nav.ownerManagement":"Gestão de Proprietários","nav.properties":"Propriedades","nav.bookings":"Reservas","nav.invoices":"Faturas","nav.sibaManager":"Gestor SIBA","nav.saft":"SAFT-T","nav.calendar":"Calendário","nav.reviews":"Avaliações","nav.performance":"Desempenho","nav.portfolio":"Portfólio","nav.creditNotes":"Notas de Crédito","nav.expenses":"Despesas","nav.ownerStatements":"Extratos do Proprietário","nav.settings":"Configurações","nav.profile":"Perfil","nav.signOut":"Sair","common.loading":"Carregando...","common.error":"Erro","common.success":"Sucesso","common.save":"Salvar","common.cancel":"Cancelar","common.edit":"Editar","common.delete":"Excluir","common.view":"Visualizar","common.close":"Fechar","common.yes":"Sim","common.no":"Não","common.confirm":"Confirmar","common.search":"Pesquisar","common.filter":"Filtrar","common.sort":"Ordenar","common.refresh":"Atualizar","language.english":"English","language.portuguese":"Português","language.switch":"Alterar Idioma","status.active":"Ativo","status.inactive":"Inativo","status.pending":"Pendente","status.completed":"Concluído","status.cancelled":"Cancelado","calendar.month":"Mês","calendar.week":"Semana","calendar.day":"Dia","calendar.today":"Hoje","calendar.booked":"Reservado","calendar.available":"Disponível","calendar.blocked":"Bloqueado","calendar.price":"Preço","calendar.minStay":"Estadia Mín","notification.newBooking":"Nova Reserva","notification.paymentReceived":"Pagamento Recebido","notification.reviewReceived":"Nova Avaliação","notification.maintenanceRequest":"Solicitação de Manutenção","notification.title":"Notificações","notification.markAllRead":"Marcar todas como lidas","notification.noNotifications":"Nenhuma notificação"},fr:{"dashboard.title":"Tableau de bord","dashboard.welcome":"Bienvenue dans le Portail Propriétaire","dashboard.overview":"Aperçu","dashboard.properties":"Propriétés","dashboard.bookings":"Réservations","dashboard.revenue":"Revenus","dashboard.occupancy":"Taux d'occupation","dashboard.averageRate":"Taux moyen","dashboard.totalRevenue":"Revenus totaux","dashboard.totalBookings":"Total des réservations","dashboard.activeProperties":"Propriétés actives","dashboard.pendingReviews":"Avis en attente","dashboard.description":"Voici ce qui se passe avec vos propriétés aujourd'hui. Gérez votre portefeuille facilement et maximisez vos revenus locatifs.","dashboard.recentBookings":"Réservations récentes","dashboard.latestReservations":"Dernières réservations sur vos propriétés","dashboard.quickActions":"Actions rapides","dashboard.manageEfficiently":"Gérez vos propriétés efficacement","dashboard.yourProperties":"Vos propriétés","dashboard.managePortfolio":"Gérez et surveillez votre portefeuille de propriétés","dashboard.viewCalendar":"Voir le calendrier","dashboard.manageBookings":"Gérer les réservations","dashboard.viewInvoices":"Voir les factures","dashboard.getSAFT":"Obtenir SAFT-T","dashboard.noBookings":"Aucune réservation récente trouvée","dashboard.bookingsWillAppear":"Les réservations apparaîtront ici une fois que vous aurez des réservations","dashboard.activePropertiesCount":"Propriétés actives","dashboard.noPropertiesFound":"Aucune propriété trouvée","dashboard.addFirstProperty":"Ajoutez votre première propriété pour commencer à suivre les réservations et les revenus","greeting.morning":"Bonjour","greeting.afternoon":"Bon après-midi","greeting.evening":"Bonsoir","property.name":"Nom de la propriété","property.address":"Adresse","property.type":"Type","property.status":"Statut","property.guests":"Invités max","property.bedrooms":"Chambres","property.bathrooms":"Salles de bain","property.amenities":"Équipements","property.actions":"Actions","property.edit":"Modifier","property.delete":"Supprimer","property.view":"Voir","property.bookings":"Réservations","property.invoices":"Factures","property.calendar":"Calendrier","property.add":"Ajouter une propriété","admin.dashboard":"Tableau de bord administrateur","admin.welcomeBack":"Bon retour","admin.allOwners":"Tous les propriétaires","admin.allAccountants":"Tous les comptables","admin.addUser":"Ajouter un utilisateur","admin.totalOwners":"Total des propriétaires","admin.totalAccountants":"Total des comptables","admin.totalProperties":"Total des propriétés","admin.totalRevenue":"Revenus totaux","admin.loadingDashboard":"Chargement du tableau de bord administrateur...","admin.ownersManagement":"Gestion des propriétaires","admin.manageOwners":"Gérer les propriétaires et leurs informations d'entreprise","admin.addOwner":"Ajouter un propriétaire","admin.propertiesAllOwners":"Propriétés (Tous les propriétaires)","admin.managePortfolio":"Gérer et surveiller votre portefeuille de propriétés","admin.addProperty":"Ajouter une propriété","admin.accountantsAllAccountants":"Comptables (Tous les comptables)","admin.manageAccountants":"Gérer l'accès des comptables et les affectations de propriétés","admin.noAccountants":"Aucun comptable","admin.getStartedAddAccountant":"Commencez par ajouter un nouveau comptable","admin.getStartedAddOwner":"Commencez par ajouter votre premier propriétaire","admin.getStartedAddProperty":"Commencez par ajouter une nouvelle propriété","admin.currentView":"Vue actuelle","admin.adminOwned":"Propriété admin","admin.ownerOwned":"Propriété propriétaire","admin.edit":"Modifier","admin.delete":"Supprimer","admin.verified":"Vérifié","admin.company":"entreprise","admin.companies":"entreprises","admin.pending":"En attente","admin.owner":"Propriétaire","admin.accountant":"Comptable","admin.id":"ID","admin.active":"actif","bookings.title":"Réservations","bookings.manageReservations":"Gérer les réservations et les communications avec les invités","bookings.loading":"Chargement des réservations...","bookings.selectProperty":"Veuillez sélectionner une propriété pour voir ses réservations.","bookings.showingData":"Affichage des données {period}","bookings.forProperty":"pour la propriété {propertyId}","bookings.dateRange":"({startDate} à {endDate})","bookings.clearFilters":"Effacer les filtres","bookings.property":"Propriété:","bookings.status":"Statut","bookings.allStatuses":"Tous les statuts","bookings.modified":"Modifié","bookings.inquiry":"Enquête","bookings.inquiryPreapproved":"Enquête pré-approuvée","bookings.cancelled":"Annulé","bookings.dateRangeLabel":"Plage de dates","bookings.selectDateRange":"Sélectionner la plage de dates","bookings.lastMonth":"Le mois dernier","bookings.last3Months":"Les 3 derniers mois","bookings.checkinFrom":"Arrivée du","bookings.checkinTo":"Arrivée au","bookings.clearAll":"Tout effacer","bookings.applyFilters":"Appliquer les filtres","bookings.guest":"Invité","bookings.propertyLabel":"Propriété","bookings.checkin":"Arrivée","bookings.checkout":"Départ","bookings.amount":"Montant","bookings.actions":"Actions","bookings.viewDetails":"Voir les détails","bookings.bookingDetails":"Détails de la réservation et gestionnaire SIBA","bookings.bookingInformation":"Informations de réservation","bookings.guestName":"Nom de l'invité:","bookings.propertyColon":"Propriété:","bookings.checkinLabel":"Arrivée:","bookings.checkoutLabel":"Départ:","bookings.adults":"Adultes:","bookings.children":"Enfants:","bookings.nights":"Nuits:","bookings.platform":"Plateforme:","bookings.totalAmount":"Montant total:","bookings.noBookingsFound":"Aucune réservation trouvée","bookings.selectPropertyFirst":"Veuillez sélectionner une propriété pour voir les réservations","calendar.title":"Calendrier de la propriété","calendar.loading":"Chargement du calendrier...","calendar.noPropertySelected":"Aucune propriété sélectionnée","calendar.selectPropertyToView":"Veuillez sélectionner une propriété pour voir son calendrier et ses réservations.","calendar.viewOnly":"Lecture seule","calendar.manageAvailability":"Gérez la disponibilité de votre propriété et consultez les réservations","calendar.viewAvailability":"Consultez la disponibilité et les réservations (lecture seule)","calendar.day.sun":"Dim","calendar.day.mon":"Lun","calendar.day.tue":"Mar","calendar.day.wed":"Mer","calendar.day.thu":"Jeu","calendar.day.fri":"Ven","calendar.day.sat":"Sam","calendar.status.booked":"Réservé","calendar.status.blocked":"Bloqué","calendar.status.available":"Disponible","calendar.status.guestDetails":"Détails des invités","calendar.selected":"Sélectionné : {start} à {end}","calendar.clickToBlockUnblock":"Cliquez pour bloquer ou débloquer ces dates","calendar.blockDates":"Bloquer les dates","calendar.unblockDates":"Débloquer les dates","calendar.cancel":"Annuler","calendar.multiDateSelection":"Sélection multi-dates","calendar.selectionInstructions":`Cliquez sur "Commencer la sélection" → Cliquez sur la date de début → Survolez jusqu'à la date de fin → Cliquez sur la date de fin`,"calendar.startSelection":"Commencer la sélection","calendar.selectingDateRange":"Sélection de la plage de dates","calendar.hoverToPreview":"Survolez pour prévisualiser la plage, puis cliquez pour terminer la sélection","calendar.doubleClickMode":"Mode double-clic : {count} date{plural} sélectionnée{plural}","calendar.hoverToAdd":"Survolez les dates pour les ajouter à la sélection","calendar.blockAll":"Tout bloquer ({count})","calendar.unblockAll":"Tout débloquer ({count})","calendar.exitMode":"Quitter le mode","calendar.manageDate":"Gérer la date","calendar.selectedDate":"Date sélectionnée :","calendar.dateStatus":"Statut de la date :","calendar.unblockDate":"Débloquer la date","calendar.blockDate":"Bloquer la date","calendar.dateBookedCannotBlock":"Cette date est réservée et ne peut pas être bloquée ou débloquée.","calendar.loadingDateData":"Chargement des données de date...","calendar.loadingShort":"Chargement...","calendar.blockedCaps":"BLOQUÉ","calendar.reserved":"RÉSERVÉ","calendar.nightsMin":"nuits min","calendar.guests":"invités","calendar.onlyOwnersCanManage":"Seuls les propriétaires peuvent gérer les dates du calendrier","calendar.onlyOwnersCanManageAlert":"Seuls les propriétaires peuvent gérer les dates du calendrier. Vous pouvez consulter le calendrier mais ne pouvez pas apporter de modifications.","calendar.sessionExpired":"Votre session a expiré. Veuillez actualiser la page pour continuer.","invoices.title":"Factures","invoices.manageGuestInvoices":"Gérer les factures des invités et la facturation","invoices.loading":"Chargement des factures...","invoices.filters":"Filtres","invoices.property":"Propriété","invoices.dateRange":"Plage de dates","invoices.fromDate":"Date de début","invoices.toDate":"Date de fin","invoices.lastMonth":"Le mois dernier","invoices.last3Months":"Les 3 derniers mois","invoices.clearAll":"Tout effacer","invoices.applyFilters":"Appliquer les filtres","invoices.noInvoicesFound":"Aucune facture trouvée","invoices.noInvoicesAvailable":"Aucune facture n'est actuellement disponible pour cette propriété.","invoices.invoice":"Facture","invoices.guest":"Invité","invoices.propertyLabel":"Propriété","invoices.date":"Date","invoices.amount":"Montant","invoices.status":"Statut","invoices.actions":"Actions","invoices.closed":"Fermé","invoices.open":"Ouvert","invoices.downloading":"Téléchargement...","invoices.downloadInvoice":"Télécharger la facture","saft.title":"Récupération SAFT-T","saft.description":"Récupérer les fichiers SAFT (Sistema de Apuramento de Faturas e Transações) existants pour la conformité fiscale portugaise.","saft.companySelection":"Sélection de l'entreprise","saft.selectCompany":"Sélectionner une entreprise...","saft.enterNifManually":"Ou saisir le NIF manuellement :","saft.nifPlaceholder":"ex., 234567890","saft.year":"Année","saft.month":"Mois","saft.retrieving":"Récupération...","saft.retrieveSaft":"Récupérer SAFT-T","saft.saftNotAvailable":"Fichier SAFT non disponible","saft.tipNotGenerated":"💡 Conseil : Les fichiers SAFT sont généralement générés à la fin de chaque mois. Essayez de sélectionner un mois précédent.","saft.retrievedSuccessfully":"SAFT-T récupéré avec succès","saft.generated":"Généré","saft.sent":"Envoyé","saft.downloadSaftFile":"Télécharger le fichier SAFT-T","saft.aboutSaft":"À propos de SAFT-T","saft.aboutDescription1":"Le SAFT-T (Sistema de Apuramento de Faturas e Transações - Transmissão) est un système de conformité fiscale portugaise qui exige que les entreprises soumettent des données de transaction détaillées aux autorités fiscales. Cet outil vous aide à récupérer les fichiers SAFT-T existants pour la période et l'ID TVA de facturation spécifiés.","saft.aboutDescription2":"Le fichier SAFT-T contient toutes les données de facture et de transaction et peut être soumis directement aux autorités fiscales portugaises.","saft.month.january":"Janvier","saft.month.february":"Février","saft.month.march":"Mars","saft.month.april":"Avril","saft.month.may":"Mai","saft.month.june":"Juin","saft.month.july":"Juillet","saft.month.august":"Août","saft.month.september":"Septembre","saft.month.october":"Octobre","saft.month.november":"Novembre","saft.month.december":"Décembre","ownerStatements.title":"Déclarations des Propriétaires","ownerStatements.description":"Générer des déclarations financières pour les propriétaires","ownerStatements.property":"Propriété","ownerStatements.selectProperty":"Sélectionner une propriété","ownerStatements.startDate":"Date de début","ownerStatements.endDate":"Date de fin","ownerStatements.managementCommissionRate":"Taux de commission de gestion (Ignoré pour les propriétés admin)","ownerStatements.generating":"Génération...","ownerStatements.generateStatements":"Générer les déclarations","ownerStatements.generatingStatements":"Génération des déclarations...","ownerStatements.propertyInformation":"Informations sur la propriété","ownerStatements.propertyName":"Nom de la propriété :","ownerStatements.propertyId":"ID de la propriété :","ownerStatements.status":"Statut :","ownerStatements.period":"Période :","ownerStatements.created":"Créé :","ownerStatements.commissionRate":"Taux de commission :","ownerStatements.detailedFinancialBreakdown":"Répartition financière détaillée","ownerStatements.downloadCsv":"Télécharger CSV","ownerStatements.downloadPdf":"Télécharger PDF","ownerStatements.detailedReport":"RAPPORT DÉTAILLÉ","ownerStatements.propertyOwner":"Propriétaire de la Propriété","ownerStatements.calculationBasis":"Base de calcul:","ownerStatements.commissionableAmount":"Montant commissionnable:","ownerStatements.commissionableAmountNote":"(Montant reçu + Commission hôte) - Frais de nettoyage","ownerStatements.rule":"Règle:","ownerStatements.managementCommissions":"Commissions de gestion:","ownerStatements.cleaningFees":"Frais de nettoyage:","ownerStatements.cleaningFeesNote":"incl. TVA","ownerStatements.hostCommissions":"Commissions hôte:","ownerStatements.extraFees":"Frais supplémentaires:","ownerStatements.expenses":"Dépenses:","ownerStatements.issuer":"Émetteur:","ownerStatements.recipient":"Destinataire:","ownerStatements.totalToInvoice":"TOTAL À FACTURER:","ownerStatements.totalToPay":"TOTAL À PAYER:","ownerStatements.totalToPayNote":"(Montants reçus - Total à facturer)","ownerStatements.tableProperty":"Propriété","ownerStatements.tableInvoice":"Facture","ownerStatements.tableReservation":"Réservation","ownerStatements.tableReceivedAmount":"Montant reçu","ownerStatements.tableHostCommission":"Commission hôte","ownerStatements.tableCleaningFee":"Frais de nettoyage","ownerStatements.tableMgmtCommission":"Commission de gestion","ownerStatements.tableTotal":"Total","sibaManager.title":"Tableau de Bord du Gestionnaire SIBA","sibaManager.underDevelopment":"En Développement","sibaManager.description":"Nous travaillons actuellement sur l'amélioration du Tableau de Bord du Gestionnaire SIBA avec de nouvelles fonctionnalités et améliorations. Cette section sera bientôt disponible avec des capacités complètes de surveillance de la conformité SIBA.","sibaManager.comingSoon":"Bientôt Disponible","auth.welcomeBack":"Bon retour","auth.signInToDashboard":"Connectez-vous à votre tableau de bord de gestion de propriétés","auth.emailAddress":"Adresse e-mail","auth.enterEmail":"Entrez votre e-mail","auth.password":"Mot de passe","auth.enterPassword":"Entrez votre mot de passe","auth.sendOTP":"Envoyer OTP","auth.forgotPassword":"Mot de passe oublié?","auth.noAccount":"Vous n'avez pas de compte?","auth.signUpFree":"Inscrivez-vous gratuitement","auth.forgotPasswordTitle":"Mot de passe oublié?","auth.forgotPasswordDescription":"Pas de souci! Entrez votre e-mail et nous vous enverrons un OTP de réinitialisation.","auth.sendResetOTP":"Envoyer OTP de réinitialisation","auth.backToLogin":"Retour à la connexion","auth.resetPasswordTitle":"Réinitialiser votre mot de passe","auth.resetPasswordDescription":"Entrez votre e-mail, code OTP et nouveau mot de passe ci-dessous.","auth.accountCreation":"Création de Compte","auth.contactAdmin":"Contactez votre administrateur pour demander la création de compte","auth.firstName":"Prénom","auth.lastName":"Nom de famille","auth.phoneNumber":"Numéro de téléphone","auth.confirmPassword":"Confirmer le mot de passe","auth.enterFirstName":"Entrez votre prénom","auth.enterLastName":"Entrez votre nom de famille","auth.enterPhoneNumber":"Entrez votre numéro de téléphone","auth.confirmYourPassword":"Confirmez votre mot de passe","auth.accountType":"Type de compte","auth.adminAccountUnavailable":"Compte administrateur (Indisponible)","auth.alreadyExists":"(Existe déjà)","auth.contactAdminForAccount":"Contacter l'administrateur pour la création de compte","auth.alreadyHaveAccount":"Vous avez déjà un compte?","auth.signInHere":"Connectez-vous ici","auth.accountCreationByAdmin":"Création de Compte par l'Administrateur","auth.allAccountsCreatedByAdmin":"Tous les comptes utilisateur sont créés par l'administrateur système. Veuillez contacter votre administrateur pour demander la création de compte.","auth.toRequestAccount":"Pour demander un compte:","auth.contactSystemAdmin":"Contactez votre administrateur système","auth.provideEmailAndRole":"Fournissez votre adresse e-mail et vos exigences de rôle","auth.adminWillCreateAccount":"L'administrateur créera votre compte et enverra les identifiants de connexion","marketing.manageProperties":"Gérez vos propriétés en toute confiance","marketing.platformDescription":"Suivez les réservations, surveillez les performances, gérez la conformité et maximisez vos revenus locatifs avec notre plateforme complète de gestion de propriétés.","marketing.realTimeBooking":"Gestion des réservations en temps réel","marketing.financialTracking":"Suivi des performances financières","marketing.complianceReporting":"Rapports de conformité automatisés","marketing.multiPropertyDashboard":"Tableau de bord multi-propriétés","marketing.joinOwners":"Rejoignez des milliers de propriétaires","marketing.journeyDescription":"Commencez votre parcours de gestion de propriétés avec notre plateforme complète conçue pour maximiser vos revenus locatifs et rationaliser les opérations.","marketing.easyOnboarding":"Intégration facile des propriétés","marketing.automatedBookings":"Gestion automatisée des réservations","marketing.financialReporting":"Rapports et analyses financiers","marketing.customerSupport":"Support client 24/7","bookingDetail.reportTitle":"Rapport de Détails de Réservation","bookingDetail.generatedOn":"Généré le:","bookingDetail.basicInformation":"Informations de Base","bookingDetail.hostawayReservationId":"ID de Réservation Hostaway:","bookingDetail.channelReservationId":"ID de Réservation du Canal:","bookingDetail.property":"Propriété:","bookingDetail.guestName":"Nom de l'Invité:","bookingDetail.guestEmail":"Email de l'Invité:","bookingDetail.guestPhone":"Téléphone de l'Invité:","bookingDetail.datesDuration":"Dates et Durée","bookingDetail.checkin":"Arrivée:","bookingDetail.checkout":"Départ:","bookingDetail.totalNights":"Total des Nuits:","bookingDetail.checkinTime":"Heure d'Arrivée:","bookingDetail.checkoutTime":"Heure de Départ:","bookingDetail.guestInformation":"Informations de l'Invité","bookingDetail.adults":"Adultes:","bookingDetail.children":"Enfants:","bookingDetail.totalGuests":"Total des Invités:","bookingDetail.bookingDetails":"Détails de la Réservation","bookingDetail.platform":"Plateforme:","bookingDetail.status":"Statut:","bookingDetail.paymentStatus":"Statut du Paiement:","bookingDetail.financialBreakdown":"Analyse Financière","bookingDetail.totalRevenue":"Revenus Totaux:","bookingDetail.finalAmountNote":"Montant final - inclut tous les frais (nettoyage, taxe de séjour, etc.)","bookingDetail.cityTax":"Taxe de Séjour:","bookingDetail.specialRequests":"Demandes Spéciales","bookingDetail.notProvided":"Non fourni","bookingDetail.backToBookings":"Retour aux Réservations","bookingDetail.printPdf":"Imprimer PDF","bookingDetail.guestEmailNotProvided":"Non fourni par la plateforme (politique de confidentialité)","bookingDetail.confirmed":"Confirmé","bookingDetail.modified":"Modifié","bookingDetail.cancelled":"Annulé","bookingDetail.pending":"En attente","nav.dashboard":"Tableau de bord","nav.adminPanel":"Panneau d'administration","nav.ownerManagement":"Gestion des propriétaires","nav.properties":"Propriétés","nav.bookings":"Réservations","nav.invoices":"Factures","nav.sibaManager":"Gestionnaire SIBA","nav.saft":"SAFT-T","nav.calendar":"Calendrier","nav.reviews":"Avis","nav.performance":"Performance","nav.portfolio":"Portefeuille","nav.creditNotes":"Notes de crédit","nav.expenses":"Dépenses","nav.ownerStatements":"Relevés propriétaire","nav.settings":"Paramètres","nav.profile":"Profil","nav.signOut":"Se déconnecter","common.loading":"Chargement...","common.error":"Erreur","common.success":"Succès","common.save":"Enregistrer","common.cancel":"Annuler","common.edit":"Modifier","common.delete":"Supprimer","common.view":"Voir","common.close":"Fermer","common.yes":"Oui","common.no":"Non","common.confirm":"Confirmer","common.search":"Rechercher","common.filter":"Filtrer","common.sort":"Trier","common.refresh":"Actualiser","language.english":"English","language.portuguese":"Português","language.french":"Français","language.switch":"Changer de langue","status.active":"Actif","status.inactive":"Inactif","status.pending":"En attente","status.completed":"Terminé","status.cancelled":"Annulé","calendar.month":"Mois","calendar.week":"Semaine","calendar.day":"Jour","calendar.today":"Aujourd'hui","calendar.booked":"Réservé","calendar.available":"Disponible","calendar.blocked":"Bloqué","calendar.price":"Prix","calendar.minStay":"Séjour min","notification.newBooking":"Nouvelle réservation","notification.paymentReceived":"Paiement reçu","notification.reviewReceived":"Nouvel avis","notification.maintenanceRequest":"Demande de maintenance","notification.title":"Notifications","notification.markAllRead":"Tout marquer comme lu","notification.noNotifications":"Aucune notification"}},I3=({children:e})=>{const[r,n]=O.useState(()=>{const l=localStorage.getItem("language");return l&&["en","pt","fr"].includes(l)?l:"en"});O.useEffect(()=>{localStorage.setItem("language",r)},[r]);const o={language:r,setLanguage:n,t:l=>F3[r][l]||l};return t.jsx(Qb.Provider,{value:o,children:e})},Vr=()=>{const e=O.useContext(Qb);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xb=(...e)=>e.filter((r,n,a)=>!!r&&a.indexOf(r)===n).join(" ");/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=O.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...u},h)=>O.createElement("svg",{ref:h,...O3,width:r,height:r,stroke:e,strokeWidth:a?Number(n)*24/Number(r):n,className:Xb("lucide",o),...u},[...d.map(([p,m])=>O.createElement(p,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(e,r)=>{const n=O.forwardRef(({className:a,...o},l)=>O.createElement(R3,{ref:l,iconNode:r,className:Xb(`lucide-${T3(e)}`,a),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=mt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=mt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=mt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=mt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=mt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=mt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=mt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=mt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=mt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=mt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=mt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=mt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=mt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=mt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=mt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=mt("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=mt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=mt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=mt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=mt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=mt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=mt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=mt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=mt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=mt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=mt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=mt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=mt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=mt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=mt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=mt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=mt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=mt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=mt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=mt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=mt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=mt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=mt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=mt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=mt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=mt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=mt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=mt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=mt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=mt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),tm="/assets/Real-logo-D3Cla3EV.jpg",Ku=({className:e="",size:r="md"})=>{const n={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"};return t.jsx("img",{src:tm,alt:"Logo",className:`${n[r]} ${e}`})},rk=({isOpen:e,onClose:r})=>{const n=Nc(),a=rs(),{user:o}=Ht(m=>m.auth),{t:l}=Vr(),d=[{name:l("nav.dashboard"),href:"/dashboard/owner",icon:W3},{name:l("nav.adminPanel"),href:"/admin/dashboard",icon:z3,roles:["admin"]},{name:l("nav.saft"),href:"/saft",icon:d0},{name:l("nav.bookings"),href:"/bookings",icon:M3},{name:l("nav.invoices"),href:"/invoices",icon:Cl},{name:l("nav.calendar"),href:"/calendar",icon:on},{name:l("nav.sibaManager"),href:"/siba-manager",icon:fs},{name:l("nav.properties"),href:"/property-management",icon:ms},{name:l("nav.ownerStatements"),href:"/owner-statements",icon:Cl}];O.useEffect(()=>{r()},[n.pathname,r]);const u=()=>{a(U0())},h=d.filter(m=>!m.roles||o&&m.roles.includes(o.role)),p=m=>m==="/dashboard/owner"?n.pathname==="/"||n.pathname==="/dashboard"||n.pathname.startsWith("/dashboard/owner"):n.pathname===m||n.pathname.startsWith(m);return t.jsxs(t.Fragment,{children:[e&&t.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:r})}),t.jsx("nav",{className:`w-64 bg-white shadow-sm min-h-screen ${e?"fixed inset-y-0 left-0 z-50 translate-x-0":"hidden lg:block lg:fixed lg:inset-y-0 lg:left-0 lg:z-40"}`,children:t.jsxs("div",{className:"p-4 space-y-2",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg mr-3 border border-gray-200 shadow-sm",children:t.jsx(Ku,{size:"md"})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[t.jsx("span",{className:"text-gray-900",children:"Owner"}),t.jsx("span",{className:"text-[#5FFF56]",children:"Portal"})]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Property Management"})]})]}),t.jsx("div",{className:"space-y-2",children:h.map(m=>{const b=m.icon,j=p(m.href);return t.jsxs(Wi,{to:m.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${j?"bg-[#5FFF56] bg-opacity-20 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(b,{className:"w-5 h-5"}),t.jsx("span",{children:m.name}),m.badge&&t.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:m.badge})]},m.name)})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("button",{onClick:u,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[t.jsx(t2,{className:"mr-3 h-5 w-5 text-gray-500"}),l("nav.signOut")]})})]})})]})},Yu="/assets/Britain-CX6qiVb6.png",Ju="/assets/Portugal-HzfMC1jl.png",Qu="/assets/France-BE16J29T.png",nk=({onMenuClick:e})=>{const[r,n]=O.useState(!1),a=rs();xi();const{t:o,language:l,setLanguage:d}=Vr(),{user:u}=Ht(b=>b.auth),h=()=>{a(U0())},p=b=>{d(b)},m=[{code:"en",image:Yu,alt:"English"},{code:"pt",image:Ju,alt:"Português"},{code:"fr",image:Qu,alt:"Français"}];return t.jsx("header",{className:"bg-white shadow-sm border-b fixed top-0 left-0 right-0 z-30 lg:left-64",children:t.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("button",{onClick:e,className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100 mr-2",children:t.jsx(Y3,{className:"h-6 w-6"})})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex items-center space-x-2",children:m.map(b=>t.jsx("button",{onClick:()=>p(b.code),className:`p-1 rounded-md transition-all duration-200 hover:scale-110 ${l===b.code?"ring-2 ring-blue-500 ring-offset-1 bg-blue-50":"hover:bg-gray-100"}`,title:b.alt,children:t.jsx("img",{src:b.image,alt:b.alt,className:"w-6 h-4 object-cover rounded-sm"})},b.code))}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>n(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-500/20 rounded-full border border-blue-200",children:t.jsx("span",{className:"text-xs font-bold text-gray-900 opacity-70",children:(u?.firstName||u?.name||u?.username||u?.email||"U").charAt(0).toUpperCase()})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900",children:u?.firstName||u?.name||u?.username||"John"}),t.jsx("p",{className:"text-xs text-blue-600 font-semibold capitalize",children:u?.role?.toLowerCase()||"Owner"})]}),t.jsx(Uu,{className:"h-3 w-3 text-gray-500"})]}),r&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-50",children:t.jsxs("div",{className:"p-2",children:[t.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 mb-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:u?.firstName||u?.name||u?.username||"User"}),t.jsx("p",{className:"text-xs text-gray-500",children:u?.email})]}),t.jsxs("button",{onClick:h,className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:[t.jsx(t2,{className:"h-4 w-4 mr-3"}),o("nav.signOut")]})]})})]})]})]})})})},sk=()=>{const[e,r]=O.useState(!1);return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(nk,{onMenuClick:()=>r(!0)}),t.jsxs("div",{className:"flex",children:[t.jsx(rk,{isOpen:e,onClose:()=>r(!1)}),t.jsx("main",{className:"flex-1 p-8 bg-white lg:ml-64 pt-24",children:t.jsx(ab,{})})]})]})},ak=()=>{const e=xi(),{isAuthenticated:r}=Ht(n=>n.auth);return O.useEffect(()=>{r&&e("/dashboard")},[r,e]),t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsx(ab,{})})};var Xu=e=>e.type==="checkbox",dc=e=>e instanceof Date,$s=e=>e==null;const n2=e=>typeof e=="object";var Dn=e=>!$s(e)&&!Array.isArray(e)&&n2(e)&&!dc(e),ik=e=>Dn(e)&&e.target?Xu(e.target)?e.target.checked:e.target.value:e,ok=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lk=(e,r)=>e.has(ok(r)),ck=e=>{const r=e.constructor&&e.constructor.prototype;return Dn(r)&&r.hasOwnProperty("isPrototypeOf")},$0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function es(e){let r;const n=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!($0&&(e instanceof Blob||a))&&(n||Dn(e)))if(r=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!ck(e))r=e;else for(const o in e)e.hasOwnProperty(o)&&(r[o]=es(e[o]));else return e;return r}var rm=e=>/^\w*$/.test(e),Rn=e=>e===void 0,V0=e=>Array.isArray(e)?e.filter(Boolean):[],H0=e=>V0(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ct=(e,r,n)=>{if(!r||!Dn(e))return n;const a=(rm(r)?[r]:H0(r)).reduce((o,l)=>$s(o)?o:o[l],e);return Rn(a)||a===e?Rn(e[r])?n:e[r]:a},qi=e=>typeof e=="boolean",Qr=(e,r,n)=>{let a=-1;const o=rm(r)?[r]:H0(r),l=o.length,d=l-1;for(;++a<l;){const u=o[a];let h=n;if(a!==d){const p=e[u];h=Dn(p)||Array.isArray(p)?p:isNaN(+o[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=h,e=e[u]}};const ly={BLUR:"blur",FOCUS_OUT:"focusout"},fi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ao={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dk=Fs.createContext(null);dk.displayName="HookFormContext";var uk=(e,r,n,a=!0)=>{const o={defaultValues:r._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const d=l;return r._proxyFormState[d]!==fi.all&&(r._proxyFormState[d]=!a||fi.all),e[d]}});return o};const hk=typeof window<"u"?Fs.useLayoutEffect:Fs.useEffect;var Vi=e=>typeof e=="string",fk=(e,r,n,a,o)=>Vi(e)?(a&&r.watch.add(e),Ct(n,e,o)):Array.isArray(e)?e.map(l=>(a&&r.watch.add(l),Ct(n,l))):(a&&(r.watchAll=!0),n),h0=e=>$s(e)||!n2(e);function vl(e,r,n=new WeakSet){if(h0(e)||h0(r))return e===r;if(dc(e)&&dc(r))return e.getTime()===r.getTime();const a=Object.keys(e),o=Object.keys(r);if(a.length!==o.length)return!1;if(n.has(e)||n.has(r))return!0;n.add(e),n.add(r);for(const l of a){const d=e[l];if(!o.includes(l))return!1;if(l!=="ref"){const u=r[l];if(dc(d)&&dc(u)||Dn(d)&&Dn(u)||Array.isArray(d)&&Array.isArray(u)?!vl(d,u,n):d!==u)return!1}}return!0}var mk=(e,r,n,a,o)=>r?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:o||!0}}:{},Au=e=>Array.isArray(e)?e:[e],cy=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}},na=e=>Dn(e)&&!Object.keys(e).length,W0=e=>e.type==="file",mi=e=>typeof e=="function",Lf=e=>{if(!$0)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},s2=e=>e.type==="select-multiple",G0=e=>e.type==="radio",pk=e=>G0(e)||Xu(e),pp=e=>Lf(e)&&e.isConnected;function gk(e,r){const n=r.slice(0,-1).length;let a=0;for(;a<n;)e=Rn(e)?a++:e[r[a++]];return e}function xk(e){for(const r in e)if(e.hasOwnProperty(r)&&!Rn(e[r]))return!1;return!0}function On(e,r){const n=Array.isArray(r)?r:rm(r)?[r]:H0(r),a=n.length===1?e:gk(e,n),o=n.length-1,l=n[o];return a&&delete a[l],o!==0&&(Dn(a)&&na(a)||Array.isArray(a)&&xk(a))&&On(e,n.slice(0,-1)),e}var a2=e=>{for(const r in e)if(mi(e[r]))return!0;return!1};function Ef(e,r={}){const n=Array.isArray(e);if(Dn(e)||n)for(const a in e)Array.isArray(e[a])||Dn(e[a])&&!a2(e[a])?(r[a]=Array.isArray(e[a])?[]:{},Ef(e[a],r[a])):$s(e[a])||(r[a]=!0);return r}function i2(e,r,n){const a=Array.isArray(e);if(Dn(e)||a)for(const o in e)Array.isArray(e[o])||Dn(e[o])&&!a2(e[o])?Rn(r)||h0(n[o])?n[o]=Array.isArray(e[o])?Ef(e[o],[]):{...Ef(e[o])}:i2(e[o],$s(r)?{}:r[o],n[o]):n[o]=!vl(e[o],r[o]);return n}var pu=(e,r)=>i2(e,r,Ef(r));const dy={value:!1,isValid:!1},uy={value:!0,isValid:!0};var o2=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Rn(e[0].attributes.value)?Rn(e[0].value)||e[0].value===""?uy:{value:e[0].value,isValid:!0}:uy:dy}return dy},l2=(e,{valueAsNumber:r,valueAsDate:n,setValueAs:a})=>Rn(e)?e:r?e===""?NaN:e&&+e:n&&Vi(e)?new Date(e):a?a(e):e;const hy={isValid:!1,value:null};var c2=e=>Array.isArray(e)?e.reduce((r,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:r,hy):hy;function fy(e){const r=e.ref;return W0(r)?r.files:G0(r)?c2(e.refs).value:s2(r)?[...r.selectedOptions].map(({value:n})=>n):Xu(r)?o2(e.refs).value:l2(Rn(r.value)?e.ref.value:r.value,e)}var yk=(e,r,n,a)=>{const o={};for(const l of e){const d=Ct(r,l);d&&Qr(o,l,d._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:a}},Ff=e=>e instanceof RegExp,gu=e=>Rn(e)?e:Ff(e)?e.source:Dn(e)?Ff(e.value)?e.value.source:e.value:e,my=e=>({isOnSubmit:!e||e===fi.onSubmit,isOnBlur:e===fi.onBlur,isOnChange:e===fi.onChange,isOnAll:e===fi.all,isOnTouch:e===fi.onTouched});const py="AsyncFunction";var bk=e=>!!e&&!!e.validate&&!!(mi(e.validate)&&e.validate.constructor.name===py||Dn(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===py)),vk=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),gy=(e,r,n)=>!n&&(r.watchAll||r.watch.has(e)||[...r.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const Cu=(e,r,n,a)=>{for(const o of n||Object.keys(e)){const l=Ct(e,o);if(l){const{_f:d,...u}=l;if(d){if(d.refs&&d.refs[0]&&r(d.refs[0],o)&&!a)return!0;if(d.ref&&r(d.ref,d.name)&&!a)return!0;if(Cu(u,r))break}else if(Dn(u)&&Cu(u,r))break}}};function xy(e,r,n){const a=Ct(e,n);if(a||rm(n))return{error:a,name:n};const o=n.split(".");for(;o.length;){const l=o.join("."),d=Ct(r,l),u=Ct(e,l);if(d&&!Array.isArray(d)&&n!==l)return{name:n};if(u&&u.type)return{name:l,error:u};if(u&&u.root&&u.root.type)return{name:`${l}.root`,error:u.root};o.pop()}return{name:n}}var wk=(e,r,n,a)=>{n(e);const{name:o,...l}=e;return na(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(d=>r[d]===(!a||fi.all))},Nk=(e,r,n)=>!e||!r||e===r||Au(e).some(a=>a&&(n?a===r:a.startsWith(r)||r.startsWith(a))),jk=(e,r,n,a,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(r||e):(n?a.isOnBlur:o.isOnBlur)?!e:(n?a.isOnChange:o.isOnChange)?e:!0,kk=(e,r)=>!V0(Ct(e,r)).length&&On(e,r),Sk=(e,r,n)=>{const a=Au(Ct(e,n));return Qr(a,"root",r[n]),Qr(e,n,a),e},of=e=>Vi(e);function yy(e,r,n="validate"){if(of(e)||Array.isArray(e)&&e.every(of)||qi(e)&&!e)return{type:n,message:of(e)?e:"",ref:r}}var dd=e=>Dn(e)&&!Ff(e)?e:{value:e,message:""},by=async(e,r,n,a,o,l)=>{const{ref:d,refs:u,required:h,maxLength:p,minLength:m,min:b,max:j,pattern:y,validate:A,name:P,valueAsNumber:N,mount:C}=e._f,F=Ct(n,P);if(!C||r.has(P))return{};const D=u?u[0]:d,M=I=>{o&&D.reportValidity&&(D.setCustomValidity(qi(I)?"":I||""),D.reportValidity())},U={},Q=G0(d),J=Xu(d),re=Q||J,K=(N||W0(d))&&Rn(d.value)&&Rn(F)||Lf(d)&&d.value===""||F===""||Array.isArray(F)&&!F.length,de=mk.bind(null,P,a,U),E=(I,H,te,we=Ao.maxLength,se=Ao.minLength)=>{const $=I?H:te;U[P]={type:I?we:se,message:$,ref:d,...de(I?we:se,$)}};if(l?!Array.isArray(F)||!F.length:h&&(!re&&(K||$s(F))||qi(F)&&!F||J&&!o2(u).isValid||Q&&!c2(u).isValid)){const{value:I,message:H}=of(h)?{value:!!h,message:h}:dd(h);if(I&&(U[P]={type:Ao.required,message:H,ref:D,...de(Ao.required,H)},!a))return M(H),U}if(!K&&(!$s(b)||!$s(j))){let I,H;const te=dd(j),we=dd(b);if(!$s(F)&&!isNaN(F)){const se=d.valueAsNumber||F&&+F;$s(te.value)||(I=se>te.value),$s(we.value)||(H=se<we.value)}else{const se=d.valueAsDate||new Date(F),$=Se=>new Date(new Date().toDateString()+" "+Se),ee=d.type=="time",ge=d.type=="week";Vi(te.value)&&F&&(I=ee?$(F)>$(te.value):ge?F>te.value:se>new Date(te.value)),Vi(we.value)&&F&&(H=ee?$(F)<$(we.value):ge?F<we.value:se<new Date(we.value))}if((I||H)&&(E(!!I,te.message,we.message,Ao.max,Ao.min),!a))return M(U[P].message),U}if((p||m)&&!K&&(Vi(F)||l&&Array.isArray(F))){const I=dd(p),H=dd(m),te=!$s(I.value)&&F.length>+I.value,we=!$s(H.value)&&F.length<+H.value;if((te||we)&&(E(te,I.message,H.message),!a))return M(U[P].message),U}if(y&&!K&&Vi(F)){const{value:I,message:H}=dd(y);if(Ff(I)&&!F.match(I)&&(U[P]={type:Ao.pattern,message:H,ref:d,...de(Ao.pattern,H)},!a))return M(H),U}if(A){if(mi(A)){const I=await A(F,n),H=yy(I,D);if(H&&(U[P]={...H,...de(Ao.validate,H.message)},!a))return M(H.message),U}else if(Dn(A)){let I={};for(const H in A){if(!na(I)&&!a)break;const te=yy(await A[H](F,n),D,H);te&&(I={...te,...de(H,te.message)},M(te.message),a&&(U[P]=I))}if(!na(I)&&(U[P]={ref:D,...I},!a))return U}}return M(!0),U};const Ak={mode:fi.onSubmit,reValidateMode:fi.onChange,shouldFocusError:!0};function Ck(e={}){let r={...Ak,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:mi(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},o=Dn(r.defaultValues)||Dn(r.values)?es(r.defaultValues||r.values)||{}:{},l=r.shouldUnregister?{}:es(o),d={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...m};const j={array:cy(),state:cy()},y=r.criteriaMode===fi.all,A=le=>xe=>{clearTimeout(p),p=setTimeout(le,xe)},P=async le=>{if(!r.disabled&&(m.isValid||b.isValid||le)){const xe=r.resolver?na((await J()).errors):await K(a,!0);xe!==n.isValid&&j.state.next({isValid:xe})}},N=(le,xe)=>{!r.disabled&&(m.isValidating||m.validatingFields||b.isValidating||b.validatingFields)&&((le||Array.from(u.mount)).forEach(De=>{De&&(xe?Qr(n.validatingFields,De,xe):On(n.validatingFields,De))}),j.state.next({validatingFields:n.validatingFields,isValidating:!na(n.validatingFields)}))},C=(le,xe=[],De,ze,Ye=!0,Ue=!0)=>{if(ze&&De&&!r.disabled){if(d.action=!0,Ue&&Array.isArray(Ct(a,le))){const Xe=De(Ct(a,le),ze.argA,ze.argB);Ye&&Qr(a,le,Xe)}if(Ue&&Array.isArray(Ct(n.errors,le))){const Xe=De(Ct(n.errors,le),ze.argA,ze.argB);Ye&&Qr(n.errors,le,Xe),kk(n.errors,le)}if((m.touchedFields||b.touchedFields)&&Ue&&Array.isArray(Ct(n.touchedFields,le))){const Xe=De(Ct(n.touchedFields,le),ze.argA,ze.argB);Ye&&Qr(n.touchedFields,le,Xe)}(m.dirtyFields||b.dirtyFields)&&(n.dirtyFields=pu(o,l)),j.state.next({name:le,isDirty:E(le,xe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Qr(l,le,xe)},F=(le,xe)=>{Qr(n.errors,le,xe),j.state.next({errors:n.errors})},D=le=>{n.errors=le,j.state.next({errors:n.errors,isValid:!1})},M=(le,xe,De,ze)=>{const Ye=Ct(a,le);if(Ye){const Ue=Ct(l,le,Rn(De)?Ct(o,le):De);Rn(Ue)||ze&&ze.defaultChecked||xe?Qr(l,le,xe?Ue:fy(Ye._f)):te(le,Ue),d.mount&&P()}},U=(le,xe,De,ze,Ye)=>{let Ue=!1,Xe=!1;const wt={name:le};if(!r.disabled){if(!De||ze){(m.isDirty||b.isDirty)&&(Xe=n.isDirty,n.isDirty=wt.isDirty=E(),Ue=Xe!==wt.isDirty);const ot=vl(Ct(o,le),xe);Xe=!!Ct(n.dirtyFields,le),ot?On(n.dirtyFields,le):Qr(n.dirtyFields,le,!0),wt.dirtyFields=n.dirtyFields,Ue=Ue||(m.dirtyFields||b.dirtyFields)&&Xe!==!ot}if(De){const ot=Ct(n.touchedFields,le);ot||(Qr(n.touchedFields,le,De),wt.touchedFields=n.touchedFields,Ue=Ue||(m.touchedFields||b.touchedFields)&&ot!==De)}Ue&&Ye&&j.state.next(wt)}return Ue?wt:{}},Q=(le,xe,De,ze)=>{const Ye=Ct(n.errors,le),Ue=(m.isValid||b.isValid)&&qi(xe)&&n.isValid!==xe;if(r.delayError&&De?(h=A(()=>F(le,De)),h(r.delayError)):(clearTimeout(p),h=null,De?Qr(n.errors,le,De):On(n.errors,le)),(De?!vl(Ye,De):Ye)||!na(ze)||Ue){const Xe={...ze,...Ue&&qi(xe)?{isValid:xe}:{},errors:n.errors,name:le};n={...n,...Xe},j.state.next(Xe)}},J=async le=>{N(le,!0);const xe=await r.resolver(l,r.context,yk(le||u.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return N(le),xe},re=async le=>{const{errors:xe}=await J(le);if(le)for(const De of le){const ze=Ct(xe,De);ze?Qr(n.errors,De,ze):On(n.errors,De)}else n.errors=xe;return xe},K=async(le,xe,De={valid:!0})=>{for(const ze in le){const Ye=le[ze];if(Ye){const{_f:Ue,...Xe}=Ye;if(Ue){const wt=u.array.has(Ue.name),ot=Ye._f&&bk(Ye._f);ot&&m.validatingFields&&N([ze],!0);const dt=await by(Ye,u.disabled,l,y,r.shouldUseNativeValidation&&!xe,wt);if(ot&&m.validatingFields&&N([ze]),dt[Ue.name]&&(De.valid=!1,xe))break;!xe&&(Ct(dt,Ue.name)?wt?Sk(n.errors,dt,Ue.name):Qr(n.errors,Ue.name,dt[Ue.name]):On(n.errors,Ue.name))}!na(Xe)&&await K(Xe,xe,De)}}return De.valid},de=()=>{for(const le of u.unMount){const xe=Ct(a,le);xe&&(xe._f.refs?xe._f.refs.every(De=>!pp(De)):!pp(xe._f.ref))&&fe(le)}u.unMount=new Set},E=(le,xe)=>!r.disabled&&(le&&xe&&Qr(l,le,xe),!vl(Se(),o)),I=(le,xe,De)=>fk(le,u,{...d.mount?l:Rn(xe)?o:Vi(le)?{[le]:xe}:xe},De,xe),H=le=>V0(Ct(d.mount?l:o,le,r.shouldUnregister?Ct(o,le,[]):[])),te=(le,xe,De={})=>{const ze=Ct(a,le);let Ye=xe;if(ze){const Ue=ze._f;Ue&&(!Ue.disabled&&Qr(l,le,l2(xe,Ue)),Ye=Lf(Ue.ref)&&$s(xe)?"":xe,s2(Ue.ref)?[...Ue.ref.options].forEach(Xe=>Xe.selected=Ye.includes(Xe.value)):Ue.refs?Xu(Ue.ref)?Ue.refs.forEach(Xe=>{(!Xe.defaultChecked||!Xe.disabled)&&(Array.isArray(Ye)?Xe.checked=!!Ye.find(wt=>wt===Xe.value):Xe.checked=Ye===Xe.value||!!Ye)}):Ue.refs.forEach(Xe=>Xe.checked=Xe.value===Ye):W0(Ue.ref)?Ue.ref.value="":(Ue.ref.value=Ye,Ue.ref.type||j.state.next({name:le,values:es(l)})))}(De.shouldDirty||De.shouldTouch)&&U(le,Ye,De.shouldTouch,De.shouldDirty,!0),De.shouldValidate&&ge(le)},we=(le,xe,De)=>{for(const ze in xe){if(!xe.hasOwnProperty(ze))return;const Ye=xe[ze],Ue=le+"."+ze,Xe=Ct(a,Ue);(u.array.has(le)||Dn(Ye)||Xe&&!Xe._f)&&!dc(Ye)?we(Ue,Ye,De):te(Ue,Ye,De)}},se=(le,xe,De={})=>{const ze=Ct(a,le),Ye=u.array.has(le),Ue=es(xe);Qr(l,le,Ue),Ye?(j.array.next({name:le,values:es(l)}),(m.isDirty||m.dirtyFields||b.isDirty||b.dirtyFields)&&De.shouldDirty&&j.state.next({name:le,dirtyFields:pu(o,l),isDirty:E(le,Ue)})):ze&&!ze._f&&!$s(Ue)?we(le,Ue,De):te(le,Ue,De),gy(le,u)&&j.state.next({...n,name:le}),j.state.next({name:d.mount?le:void 0,values:es(l)})},$=async le=>{d.mount=!0;const xe=le.target;let De=xe.name,ze=!0;const Ye=Ct(a,De),Ue=ot=>{ze=Number.isNaN(ot)||dc(ot)&&isNaN(ot.getTime())||vl(ot,Ct(l,De,ot))},Xe=my(r.mode),wt=my(r.reValidateMode);if(Ye){let ot,dt;const Pt=xe.type?fy(Ye._f):ik(le),ut=le.type===ly.BLUR||le.type===ly.FOCUS_OUT,mr=!vk(Ye._f)&&!r.resolver&&!Ct(n.errors,De)&&!Ye._f.deps||jk(ut,Ct(n.touchedFields,De),n.isSubmitted,wt,Xe),Xt=gy(De,u,ut);Qr(l,De,Pt),ut?(!xe||!xe.readOnly)&&(Ye._f.onBlur&&Ye._f.onBlur(le),h&&h(0)):Ye._f.onChange&&Ye._f.onChange(le);const ct=U(De,Pt,ut),Mt=!na(ct)||Xt;if(!ut&&j.state.next({name:De,type:le.type,values:es(l)}),mr)return(m.isValid||b.isValid)&&(r.mode==="onBlur"?ut&&P():ut||P()),Mt&&j.state.next({name:De,...Xt?{}:ct});if(!ut&&Xt&&j.state.next({...n}),r.resolver){const{errors:Zt}=await J([De]);if(Ue(Pt),ze){const Lt=xy(n.errors,a,De),Kt=xy(Zt,a,Lt.name||De);ot=Kt.error,De=Kt.name,dt=na(Zt)}}else N([De],!0),ot=(await by(Ye,u.disabled,l,y,r.shouldUseNativeValidation))[De],N([De]),Ue(Pt),ze&&(ot?dt=!1:(m.isValid||b.isValid)&&(dt=await K(a,!0)));ze&&(Ye._f.deps&&ge(Ye._f.deps),Q(De,dt,ot,ct))}},ee=(le,xe)=>{if(Ct(n.errors,xe)&&le.focus)return le.focus(),1},ge=async(le,xe={})=>{let De,ze;const Ye=Au(le);if(r.resolver){const Ue=await re(Rn(le)?le:Ye);De=na(Ue),ze=le?!Ye.some(Xe=>Ct(Ue,Xe)):De}else le?(ze=(await Promise.all(Ye.map(async Ue=>{const Xe=Ct(a,Ue);return await K(Xe&&Xe._f?{[Ue]:Xe}:Xe)}))).every(Boolean),!(!ze&&!n.isValid)&&P()):ze=De=await K(a);return j.state.next({...!Vi(le)||(m.isValid||b.isValid)&&De!==n.isValid?{}:{name:le},...r.resolver||!le?{isValid:De}:{},errors:n.errors}),xe.shouldFocus&&!ze&&Cu(a,ee,le?Ye:u.mount),ze},Se=le=>{const xe={...d.mount?l:o};return Rn(le)?xe:Vi(le)?Ct(xe,le):le.map(De=>Ct(xe,De))},T=(le,xe)=>({invalid:!!Ct((xe||n).errors,le),isDirty:!!Ct((xe||n).dirtyFields,le),error:Ct((xe||n).errors,le),isValidating:!!Ct(n.validatingFields,le),isTouched:!!Ct((xe||n).touchedFields,le)}),L=le=>{le&&Au(le).forEach(xe=>On(n.errors,xe)),j.state.next({errors:le?n.errors:{}})},Y=(le,xe,De)=>{const ze=(Ct(a,le,{_f:{}})._f||{}).ref,Ye=Ct(n.errors,le)||{},{ref:Ue,message:Xe,type:wt,...ot}=Ye;Qr(n.errors,le,{...ot,...xe,ref:ze}),j.state.next({name:le,errors:n.errors,isValid:!1}),De&&De.shouldFocus&&ze&&ze.focus&&ze.focus()},ne=(le,xe)=>mi(le)?j.state.subscribe({next:De=>"values"in De&&le(I(void 0,xe),De)}):I(le,xe,!0),ie=le=>j.state.subscribe({next:xe=>{Nk(le.name,xe.name,le.exact)&&wk(xe,le.formState||m,je,le.reRenderRoot)&&le.callback({values:{...l},...n,...xe,defaultValues:o})}}).unsubscribe,V=le=>(d.mount=!0,b={...b,...le.formState},ie({...le,formState:b})),fe=(le,xe={})=>{for(const De of le?Au(le):u.mount)u.mount.delete(De),u.array.delete(De),xe.keepValue||(On(a,De),On(l,De)),!xe.keepError&&On(n.errors,De),!xe.keepDirty&&On(n.dirtyFields,De),!xe.keepTouched&&On(n.touchedFields,De),!xe.keepIsValidating&&On(n.validatingFields,De),!r.shouldUnregister&&!xe.keepDefaultValue&&On(o,De);j.state.next({values:es(l)}),j.state.next({...n,...xe.keepDirty?{isDirty:E()}:{}}),!xe.keepIsValid&&P()},he=({disabled:le,name:xe})=>{(qi(le)&&d.mount||le||u.disabled.has(xe))&&(le?u.disabled.add(xe):u.disabled.delete(xe))},pe=(le,xe={})=>{let De=Ct(a,le);const ze=qi(xe.disabled)||qi(r.disabled);return Qr(a,le,{...De||{},_f:{...De&&De._f?De._f:{ref:{name:le}},name:le,mount:!0,...xe}}),u.mount.add(le),De?he({disabled:qi(xe.disabled)?xe.disabled:r.disabled,name:le}):M(le,!0,xe.value),{...ze?{disabled:xe.disabled||r.disabled}:{},...r.progressive?{required:!!xe.required,min:gu(xe.min),max:gu(xe.max),minLength:gu(xe.minLength),maxLength:gu(xe.maxLength),pattern:gu(xe.pattern)}:{},name:le,onChange:$,onBlur:$,ref:Ye=>{if(Ye){pe(le,xe),De=Ct(a,le);const Ue=Rn(Ye.value)&&Ye.querySelectorAll&&Ye.querySelectorAll("input,select,textarea")[0]||Ye,Xe=pk(Ue),wt=De._f.refs||[];if(Xe?wt.find(ot=>ot===Ue):Ue===De._f.ref)return;Qr(a,le,{_f:{...De._f,...Xe?{refs:[...wt.filter(pp),Ue,...Array.isArray(Ct(o,le))?[{}]:[]],ref:{type:Ue.type,name:le}}:{ref:Ue}}}),M(le,!1,void 0,Ue)}else De=Ct(a,le,{}),De._f&&(De._f.mount=!1),(r.shouldUnregister||xe.shouldUnregister)&&!(lk(u.array,le)&&d.action)&&u.unMount.add(le)}}},Ce=()=>r.shouldFocusError&&Cu(a,ee,u.mount),ue=le=>{qi(le)&&(j.state.next({disabled:le}),Cu(a,(xe,De)=>{const ze=Ct(a,De);ze&&(xe.disabled=ze._f.disabled||le,Array.isArray(ze._f.refs)&&ze._f.refs.forEach(Ye=>{Ye.disabled=ze._f.disabled||le}))},0,!1))},Pe=(le,xe)=>async De=>{let ze;De&&(De.preventDefault&&De.preventDefault(),De.persist&&De.persist());let Ye=es(l);if(j.state.next({isSubmitting:!0}),r.resolver){const{errors:Ue,values:Xe}=await J();n.errors=Ue,Ye=es(Xe)}else await K(a);if(u.disabled.size)for(const Ue of u.disabled)On(Ye,Ue);if(On(n.errors,"root"),na(n.errors)){j.state.next({errors:{}});try{await le(Ye,De)}catch(Ue){ze=Ue}}else xe&&await xe({...n.errors},De),Ce(),setTimeout(Ce);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:na(n.errors)&&!ze,submitCount:n.submitCount+1,errors:n.errors}),ze)throw ze},Ge=(le,xe={})=>{Ct(a,le)&&(Rn(xe.defaultValue)?se(le,es(Ct(o,le))):(se(le,xe.defaultValue),Qr(o,le,es(xe.defaultValue))),xe.keepTouched||On(n.touchedFields,le),xe.keepDirty||(On(n.dirtyFields,le),n.isDirty=xe.defaultValue?E(le,es(Ct(o,le))):E()),xe.keepError||(On(n.errors,le),m.isValid&&P()),j.state.next({...n}))},Te=(le,xe={})=>{const De=le?es(le):o,ze=es(De),Ye=na(le),Ue=Ye?o:ze;if(xe.keepDefaultValues||(o=De),!xe.keepValues){if(xe.keepDirtyValues){const Xe=new Set([...u.mount,...Object.keys(pu(o,l))]);for(const wt of Array.from(Xe))Ct(n.dirtyFields,wt)?Qr(Ue,wt,Ct(l,wt)):se(wt,Ct(Ue,wt))}else{if($0&&Rn(le))for(const Xe of u.mount){const wt=Ct(a,Xe);if(wt&&wt._f){const ot=Array.isArray(wt._f.refs)?wt._f.refs[0]:wt._f.ref;if(Lf(ot)){const dt=ot.closest("form");if(dt){dt.reset();break}}}}if(xe.keepFieldsRef)for(const Xe of u.mount)se(Xe,Ct(Ue,Xe));else a={}}l=r.shouldUnregister?xe.keepDefaultValues?es(o):{}:es(Ue),j.array.next({values:{...Ue}}),j.state.next({values:{...Ue}})}u={mount:xe.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!m.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues,d.watch=!!r.shouldUnregister,j.state.next({submitCount:xe.keepSubmitCount?n.submitCount:0,isDirty:Ye?!1:xe.keepDirty?n.isDirty:!!(xe.keepDefaultValues&&!vl(le,o)),isSubmitted:xe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ye?{}:xe.keepDirtyValues?xe.keepDefaultValues&&l?pu(o,l):n.dirtyFields:xe.keepDefaultValues&&le?pu(o,le):xe.keepDirty?n.dirtyFields:{},touchedFields:xe.keepTouched?n.touchedFields:{},errors:xe.keepErrors?n.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},W=(le,xe)=>Te(mi(le)?le(l):le,xe),He=(le,xe={})=>{const De=Ct(a,le),ze=De&&De._f;if(ze){const Ye=ze.refs?ze.refs[0]:ze.ref;Ye.focus&&(Ye.focus(),xe.shouldSelect&&mi(Ye.select)&&Ye.select())}},je=le=>{n={...n,...le}},$e={control:{register:pe,unregister:fe,getFieldState:T,handleSubmit:Pe,setError:Y,_subscribe:ie,_runSchema:J,_focusError:Ce,_getWatch:I,_getDirty:E,_setValid:P,_setFieldArray:C,_setDisabledField:he,_setErrors:D,_getFieldArray:H,_reset:Te,_resetDefaultValues:()=>mi(r.defaultValues)&&r.defaultValues().then(le=>{W(le,r.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:de,_disableForm:ue,_subjects:j,_proxyFormState:m,get _fields(){return a},get _formValues(){return l},get _state(){return d},set _state(le){d=le},get _defaultValues(){return o},get _names(){return u},set _names(le){u=le},get _formState(){return n},get _options(){return r},set _options(le){r={...r,...le}}},subscribe:V,trigger:ge,register:pe,handleSubmit:Pe,watch:ne,setValue:se,getValues:Se,reset:W,resetField:Ge,clearErrors:L,unregister:fe,setError:Y,setFocus:He,getFieldState:T};return{...$e,formControl:$e}}function Pk(e={}){const r=Fs.useRef(void 0),n=Fs.useRef(void 0),[a,o]=Fs.useState({isDirty:!1,isValidating:!1,isLoading:mi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:mi(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:a},e.defaultValues&&!mi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...u}=Ck(e);r.current={...u,formState:a}}const l=r.current.control;return l._options=e,hk(()=>{const d=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(u=>({...u,isReady:!0})),l._formState.isReady=!0,d},[l]),Fs.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),Fs.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),Fs.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),Fs.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),Fs.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==a.isDirty&&l._subjects.state.next({isDirty:d})}},[l,a.isDirty]),Fs.useEffect(()=>{e.values&&!vl(e.values,n.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),n.current=e.values,o(d=>({...d}))):l._resetDefaultValues()},[l,e.values]),Fs.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),r.current.formState=uk(a,l),r.current}function d2(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(n=d2(e[r]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function _k(){for(var e,r,n=0,a="",o=arguments.length;n<o;n++)(e=arguments[n])&&(r=d2(e))&&(a&&(a+=" "),a+=r);return a}const bc=({size:e="md",className:r,color:n="primary"})=>{const a={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},o={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return t.jsx("div",{className:_k("animate-spin rounded-full border-2 border-t-transparent",a[e],o[n],r)})},u2=({length:e=6,onComplete:r,disabled:n=!1,className:a=""})=>{const[o,l]=O.useState(new Array(e).fill("")),d=O.useRef([]);O.useEffect(()=>{d.current[0]&&d.current[0].focus()},[]);const u=(m,b)=>{if(n||(b.length>1&&(b=b.slice(-1)),!/^\d*$/.test(b)))return;const j=[...o];j[m]=b,l(j),b&&m<e-1&&d.current[m+1]?.focus();const y=j.join("");y.length===e&&!y.includes("")&&r(y)},h=(m,b)=>{if(!n){if(b.key==="Backspace")if(o[m]){const j=[...o];j[m]="",l(j)}else m>0&&d.current[m-1]?.focus();b.key==="ArrowLeft"&&m>0&&d.current[m-1]?.focus(),b.key==="ArrowRight"&&m<e-1&&d.current[m+1]?.focus()}},p=m=>{if(n)return;m.preventDefault();const b=m.clipboardData.getData("text").replace(/\D/g,"").slice(0,e);if(b.length>0){const j=[...o];for(let P=0;P<b.length&&P<e;P++)j[P]=b[P];l(j);const y=Math.min(b.length,e-1);d.current[y]?.focus();const A=j.join("");A.length===e&&!A.includes("")&&r(A)}};return t.jsx("div",{className:`flex justify-center space-x-3 ${a}`,children:o.map((m,b)=>t.jsx("input",{ref:j=>d.current[b]=j,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:m,onChange:j=>u(b,j.target.value),onKeyDown:j=>h(b,j),onPaste:p,disabled:n,className:`
            w-12 h-12 text-center text-xl font-semibold border-2 rounded-lg
            focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500
            transition-all duration-200
            ${n?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-gray-200 text-gray-900 hover:border-gray-300"}
          `},b))})},Dk=()=>{const[e,r]=O.useState("email"),[n,a]=O.useState(""),[o,l]=O.useState(""),[d,u]=O.useState(!1),[h,p]=O.useState(!1),m=rs(),b=xi(),{isLoading:j,error:y,isAuthenticated:A,user:P}=Ht(I=>I.auth),{t:N,language:C,setLanguage:F}=Vr(),D=[{code:"en",image:Yu,alt:"English"},{code:"pt",image:Ju,alt:"Português"},{code:"fr",image:Qu,alt:"Français"}],M=I=>{F(I)},{register:U,handleSubmit:Q,formState:{errors:J}}=Pk({defaultValues:{email:"",password:""}});O.useEffect(()=>{A&&P&&b("/dashboard/owner")},[A,P,b]),O.useEffect(()=>{y&&(or.error(y),m(L3()))},[y,m]);const re=async I=>{const H=or.loading("Connecting to server...");try{await m(wu({email:I.email,password:I.password})).unwrap(),a(I.email),l(I.password),r("otp"),u(!0),or.dismiss(H),or.success("OTP sent to your email!")}catch{or.dismiss(H)}},K=async I=>{try{const H=await m(sf({email:n,otp:I})).unwrap();or.success("Welcome back!"),b("/dashboard/owner")}catch{}},de=async()=>{const I=or.loading("Resending OTP...");try{await m(wu({email:n,password:o})).unwrap(),or.dismiss(I),or.success("OTP resent to your email!")}catch{or.dismiss(I)}},E=()=>{r("email"),u(!1),a(""),l("")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(Ku,{size:"lg",className:"text-green-600"})})}),t.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:N("auth.welcomeBack")}),t.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:N("auth.signInToDashboard")}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex items-center space-x-2 bg-white/80 backdrop-blur-sm rounded-full px-3 py-2 shadow-sm border border-gray-200",children:D.map(I=>t.jsx("button",{onClick:()=>M(I.code),className:`p-1 rounded-md transition-all duration-200 hover:scale-110 ${C===I.code?"ring-2 ring-green-500 ring-offset-1 bg-green-50":"hover:bg-gray-100"}`,title:I.alt,children:t.jsx("img",{src:I.image,alt:I.alt,className:"w-5 h-4 object-cover rounded-sm"})},I.code))})})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e==="email"?t.jsxs("form",{onSubmit:Q(re),className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.emailAddress")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{...U("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${J.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterEmail")})]}),J.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.email.message})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.password")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Dd,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{...U("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:h?"text":"password",className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${J.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterPassword")}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!h),children:h?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),J.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.password.message})]}),t.jsx("button",{type:"submit",disabled:j,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:j?t.jsx(bc,{size:"sm",className:"mr-2"}):t.jsxs(t.Fragment,{children:[N("auth.sendOTP"),t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),t.jsx("div",{className:"text-center",children:t.jsx(Wi,{to:"/auth/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200",children:N("auth.forgotPassword")})})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(fs,{className:"h-8 w-8 text-green-600"})})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Enter Verification Code"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",t.jsx("span",{className:"font-medium text-gray-900",children:n})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(u2,{onComplete:K,disabled:j,length:6}),t.jsx("button",{type:"button",onClick:()=>{const I=document.querySelectorAll('input[type="text"]'),H=Array.from(I).map(te=>te.value).join("");H.length===6&&K(H)},disabled:j,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:j?t.jsx(bc,{size:"sm",className:"mr-2"}):t.jsxs(t.Fragment,{children:["Verify Code",t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:de,disabled:j,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:E,disabled:j,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"← Back to email"})})]})]})}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-gray-500",children:[N("auth.noAccount")," ",t.jsx(Wi,{to:"/auth/signup",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:N("auth.signUpFree")})]})})]})}),t.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),t.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),t.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:t.jsxs("div",{className:"max-w-md",children:[t.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6 leading-tight",children:N("marketing.manageProperties")}),t.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:N("marketing.platformDescription")}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.realTimeBooking")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.financialTracking")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.complianceReporting")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.multiPropertyDashboard")})]})]})]})})]})]})},h2=async()=>(await Ft.get("/admin/check-admin-exists")).data.exists,f2=async()=>(await Ft.get("/admin/dashboard/stats")).data,nm=async()=>(await Ft.get("/admin/owners")).data,m2=async()=>(await Ft.get("/admin/accountants")).data,p2=async(e,r)=>(await Ft.put(`/admin/accountants/${e}`,r)).data.data,g2=async(e,r)=>(await Ft.put(`/admin/accountants/${e}/properties`,{assignedProperties:r})).data.data,x2=async(e,r,n)=>(await Ft.get(`/admin/properties/${e}/owner-statement?startDate=${r}&endDate=${n}`)).data.statement,y2=async e=>{await Ft.delete(`/admin/accountants/${e}`)},K0=async e=>{const r=await Ft.post("/admin/owners",e);return console.log("🔍 createOwner API response:",r),r.data.data||r.data},b2=async(e,r)=>(await Ft.put(`/admin/owners/${e}`,r)).data,Y0=async e=>{await Ft.delete(`/admin/owners/${e}`)},Zu=async e=>{const r=e?`/admin/properties?ownerId=${e}`:"/admin/properties",n=await Ft.get(r);return console.log("🔍 getAllProperties response:",n),n.data&&n.data.data?n.data.data:n.data&&n.data.properties?n.data.properties:Array.isArray(n.data)?n.data:(console.error("Unexpected response structure:",n),[])},v2=async(e,r)=>(await Ft.post(`/admin/owners/${e}/assign-property`,{propertyId:r})).data,w2=async e=>(await Ft.delete(`/admin/properties/${e}`)).data,Lk=Object.freeze(Object.defineProperty({__proto__:null,assignPropertyToOwner:v2,checkAdminExists:h2,createOwner:K0,deleteAccountant:y2,deleteOwner:Y0,deleteProperty:w2,generateOwnerStatement:x2,getAdminDashboardStats:f2,getAllAccountants:m2,getAllOwners:nm,getAllProperties:Zu,updateAccountant:p2,updateAccountantProperties:g2,updateOwner:b2},Symbol.toStringTag,{value:"Module"})),Ek=()=>{const[e,r]=O.useState("form"),[n,a]=O.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",role:"admin"}),[o,l]=O.useState(!1),[d,u]=O.useState(!1),[h,p]=O.useState({}),[m,b]=O.useState(!1),j=rs(),{isLoading:y,isAuthenticated:A,error:P}=Ht(E=>E.auth),{t:N,language:C,setLanguage:F}=Vr(),D=[{code:"en",image:Yu,alt:"English"},{code:"pt",image:Ju,alt:"Português"},{code:"fr",image:Qu,alt:"Français"}],M=E=>{F(E)},U=()=>{const E={};return n.firstName.trim()||(E.firstName="First name is required"),n.lastName.trim()||(E.lastName="Last name is required"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(E.email="Email is invalid"):E.email="Email is required",n.phone.trim()||(E.phone="Phone is required"),n.password?n.password.length<6&&(E.password="Password must be at least 6 characters"):E.password="Password is required",n.password!==n.confirmPassword&&(E.confirmPassword="Passwords do not match"),E};if(O.useEffect(()=>{(async()=>{try{console.log("🔍 Checking admin existence...");const I=await h2();console.log("🔍 Admin exists:",I),b(I)}catch(I){console.error("❌ Error checking admin existence:",I),b(!0)}})()},[]),A)return t.jsx(Ui,{to:"/dashboard",replace:!0});const Q=E=>{const{name:I,value:H}=E.target;a(te=>({...te,[I]:H})),h[I]&&p(te=>({...te,[I]:""}))},J=async E=>{if(E.preventDefault(),m){alert("Account creation is disabled. Please contact your administrator to request an account.");return}const I=U();if(Object.keys(I).length>0){p(I);return}p({});const H=or.loading("Connecting to server...");try{await j(Nu({email:n.email,name:`${n.firstName} ${n.lastName}`,phone:n.phone,password:n.password,role:n.role})).unwrap(),or.dismiss(H),r("otp")}catch{or.dismiss(H)}},re=async E=>{try{await j(af({name:`${n.firstName} ${n.lastName}`,email:n.email,phone:n.phone,password:n.password,otp:E,role:n.role})).unwrap()}catch{}},K=async()=>{try{await j(Nu({name:`${n.firstName} ${n.lastName}`,email:n.email,phone:n.phone,password:n.password,role:n.role})).unwrap()}catch{}},de=()=>{r("form")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(Ku,{size:"lg",className:"rounded-lg"})})}),t.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:N("auth.accountCreation")}),t.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:N("auth.contactAdmin")}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex items-center space-x-2 bg-white/80 backdrop-blur-sm rounded-full px-3 py-2 shadow-sm border border-gray-200",children:D.map(E=>t.jsx("button",{onClick:()=>M(E.code),className:`p-1 rounded-md transition-all duration-200 hover:scale-110 ${C===E.code?"ring-2 ring-green-500 ring-offset-1 bg-green-50":"hover:bg-gray-100"}`,title:E.alt,children:t.jsx("img",{src:E.image,alt:E.alt,className:"w-5 h-4 object-cover rounded-sm"})},E.code))})})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e==="form"?t.jsxs("form",{onSubmit:J,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.firstName")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Pl,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:n.firstName,onChange:Q,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.firstName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterFirstName")})]}),h.firstName&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.firstName})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.lastName")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Pl,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:n.lastName,onChange:Q,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.lastName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterLastName")})]}),h.lastName&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lastName})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.emailAddress")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,onChange:Q,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterEmail")})]}),h.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.phoneNumber")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(q0,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:n.phone,onChange:Q,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.phone?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterPhoneNumber")})]}),h.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.password")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Dd,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:n.password,onChange:Q,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.enterPassword")}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:N("auth.confirmPassword")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Dd,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:n.confirmPassword,onChange:Q,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:N("auth.confirmYourPassword")}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.confirmPassword})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:N("auth.accountType")}),m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(fs,{className:"h-6 w-6 text-blue-600 mt-0.5"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:N("auth.accountCreationByAdmin")}),t.jsx("p",{className:"text-sm text-blue-700 mb-3",children:N("auth.allAccountsCreatedByAdmin")}),t.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:[t.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:N("auth.toRequestAccount")}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsxs("li",{children:["• ",N("auth.contactSystemAdmin")]}),t.jsxs("li",{children:["• ",N("auth.provideEmailAndRole")]}),t.jsxs("li",{children:["• ",N("auth.adminWillCreateAccount")]})]})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-gray-300 bg-gray-100 rounded-xl",children:[t.jsx(fs,{className:"h-5 w-5 mr-2 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-400",children:N("auth.adminAccountUnavailable")}),t.jsx("span",{className:"ml-2 text-xs text-gray-400",children:N("auth.alreadyExists")})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 mb-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(fs,{className:"h-6 w-6 text-green-600 mt-0.5"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-green-900 mb-2",children:"Create First Administrator Account"}),t.jsx("p",{className:"text-sm text-green-700 mb-3",children:"You are creating the first administrator account for this system. The administrator will be responsible for creating all other user accounts."}),t.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-3",children:[t.jsx("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Administrator privileges include:"}),t.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[t.jsx("li",{children:"• Create and manage owner accounts"}),t.jsx("li",{children:"• Create and manage accountant accounts"}),t.jsx("li",{children:"• Manage properties and bookings"}),t.jsx("li",{children:"• Access system settings and reports"})]})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-green-300 bg-green-50 rounded-xl",children:[t.jsx(fs,{className:"h-5 w-5 mr-2 text-green-600"}),t.jsx("span",{className:"font-medium text-green-800",children:"Administrator Account"}),t.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(System Administrator)"})]})]})]})]}),m?t.jsxs("button",{type:"button",disabled:!0,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-gray-400 bg-gray-200 cursor-not-allowed transition-all duration-300",children:[t.jsx(fs,{className:"mr-2 h-4 w-4"}),N("auth.contactAdminForAccount")]}):t.jsx("button",{type:"submit",disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:y?t.jsxs(t.Fragment,{children:[t.jsx(bc,{size:"sm"}),t.jsx("span",{className:"ml-2",children:"Creating Administrator Account..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(fs,{className:"mr-2 h-4 w-4"}),"Create Administrator Account"]})})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(fs,{className:"h-8 w-8 text-green-600"})})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verify Your Account"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",t.jsx("span",{className:"font-medium text-gray-900",children:n.email})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(u2,{onComplete:re,disabled:y,length:6}),t.jsx("button",{type:"button",onClick:()=>{const E=document.querySelectorAll('input[type="text"]'),I=Array.from(E).map(H=>H.value).join("");I.length===6&&re(I)},disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb]/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:y?t.jsx(bc,{size:"sm",className:"mr-2"}):t.jsxs(t.Fragment,{children:["Verify & Create Account",t.jsx(tk,{className:"ml-2 h-4 w-4 group-hover:scale-110 transition-transform"})]})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:K,disabled:y,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:de,disabled:y,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"← Back to form"})})]})]})}),P&&t.jsxs("div",{className:"rounded-xl bg-red-50 p-4 mb-6",children:[t.jsx("p",{className:"text-sm text-red-800",children:P}),t.jsx("p",{className:"text-xs text-red-600 mt-2",children:"💡 Make sure the backend server is running on port 5000"})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-gray-500",children:[N("auth.alreadyHaveAccount")," ",t.jsx(Wi,{to:"/auth/login",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:N("auth.signInHere")})]})})]})}),t.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),t.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),t.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:t.jsxs("div",{className:"max-w-md",children:[t.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6 leading-tight",children:N("marketing.joinOwners")}),t.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:N("marketing.journeyDescription")}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.easyOnboarding")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.automatedBookings")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.financialReporting")})]}),t.jsxs("div",{className:"flex items-center group",children:[t.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),t.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:N("marketing.customerSupport")})]})]})]})})]})]})},Fk=()=>{const[e,r]=O.useState(""),[n,a]=O.useState(!1),[o,l]=O.useState(!1),{t:d,language:u,setLanguage:h}=Vr(),p=[{code:"en",image:Yu,alt:"English"},{code:"pt",image:Ju,alt:"Português"},{code:"fr",image:Qu,alt:"Français"}],m=j=>{h(j)},b=async j=>{j.preventDefault(),a(!0);const y=or.loading("Connecting to server...");try{await jc.forgotPassword({email:e}),or.dismiss(y),or.success("Password reset OTP sent to your email!"),l(!0)}catch(A){or.dismiss(y),console.error("❌ Forgot Password Error:",A),console.error("❌ Error Response:",A.response?.data),console.error("❌ Error Status:",A.response?.status);const P=A.response?.data?.message||A.message||"Failed to send reset OTP";or.error(P)}finally{a(!1)}};return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(xc,{className:"h-10 w-10 text-green-600"})})}),t.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Check your email"}),t.jsxs("p",{className:"text-base text-gray-600 leading-relaxed",children:["We've sent a password reset OTP to ",t.jsx("strong",{className:"text-gray-900",children:e})]}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or contact support."})]}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6 space-y-4",children:[t.jsxs(Wi,{to:`/auth/reset-password?email=${encodeURIComponent(e)}`,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb] transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Enter OTP to reset password",t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]}),t.jsxs(Wi,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200",children:[t.jsx(gc,{className:"h-4 w-4 mr-2"}),d("auth.backToLogin")]})]})]})})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(Ku,{size:"lg",className:"rounded-lg"})})}),t.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:d("auth.forgotPasswordTitle")}),t.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:d("auth.forgotPasswordDescription")}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex items-center space-x-2 bg-white/80 backdrop-blur-sm rounded-full px-3 py-2 shadow-sm border border-gray-200",children:p.map(j=>t.jsx("button",{onClick:()=>m(j.code),className:`p-1 rounded-md transition-all duration-200 hover:scale-110 ${u===j.code?"ring-2 ring-green-500 ring-offset-1 bg-green-50":"hover:bg-gray-100"}`,title:j.alt,children:t.jsx("img",{src:j.image,alt:j.alt,className:"w-5 h-4 object-cover rounded-sm"})},j.code))})})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:d("auth.emailAddress")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:j=>r(j.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300",placeholder:d("auth.enterEmail")})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:n?t.jsxs(t.Fragment,{children:[t.jsx(bc,{size:"sm",className:"mr-2"}),"Sending reset OTP..."]}):t.jsxs(t.Fragment,{children:[d("auth.sendResetOTP"),t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),t.jsx("div",{className:"text-center",children:t.jsxs(Wi,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[t.jsx(gc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},Ik=()=>{const[e]=Fd(),r=e.get("email")||"",[n,a]=O.useState({email:r,otp:"",password:"",confirmPassword:""}),[o,l]=O.useState(!1),[d,u]=O.useState(!1),[h,p]=O.useState(!1),{t:m,language:b,setLanguage:j}=Vr(),y=[{code:"en",image:Yu,alt:"English"},{code:"pt",image:Ju,alt:"Português"},{code:"fr",image:Qu,alt:"Français"}],A=Q=>{j(Q)},[P,N]=O.useState(!1),[C,F]=O.useState({});O.useEffect(()=>{r&&a(Q=>({...Q,email:r}))},[r]);const D=Q=>{const{name:J,value:re}=Q.target;a(K=>({...K,[J]:re})),C[J]&&F(K=>({...K,[J]:""}))},M=()=>{const Q={};return n.email?/\S+@\S+\.\S+/.test(n.email)||(Q.email="Email is invalid"):Q.email="Email is required",n.otp?n.otp.length!==6&&(Q.otp="OTP must be 6 digits"):Q.otp="OTP is required",n.password?n.password.length<6&&(Q.password="Password must be at least 6 characters"):Q.password="Password is required",n.confirmPassword?n.password!==n.confirmPassword&&(Q.confirmPassword="Passwords do not match"):Q.confirmPassword="Please confirm your password",F(Q),Object.keys(Q).length===0},U=async Q=>{if(Q.preventDefault(),!M())return;p(!0);const J=or.loading("Connecting to server...");try{await jc.resetPassword({email:n.email,otp:n.otp,password:n.password}),or.dismiss(J),or.success("Password reset successfully!"),N(!0)}catch(re){or.dismiss(J),console.error("Error:",re),or.error(re.response?.data?.message||"Failed to reset password")}finally{p(!1)}};return P?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(Ws,{className:"h-10 w-10 text-green-600"})})}),t.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Password reset successful"}),t.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Your password has been successfully reset. You can now sign in with your new password."})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t.jsxs(Wi,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb] transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Continue to login",t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]})})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:t.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:t.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:t.jsx(Ku,{size:"lg",className:"rounded-lg"})})}),t.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:m("auth.resetPasswordTitle")}),t.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:m("auth.resetPasswordDescription")}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex items-center space-x-2 bg-white/80 backdrop-blur-sm rounded-full px-3 py-2 shadow-sm border border-gray-200",children:y.map(Q=>t.jsx("button",{onClick:()=>A(Q.code),className:`p-1 rounded-md transition-all duration-200 hover:scale-110 ${b===Q.code?"ring-2 ring-green-500 ring-offset-1 bg-green-50":"hover:bg-gray-100"}`,title:Q.alt,children:t.jsx("img",{src:Q.image,alt:Q.alt,className:"w-5 h-4 object-cover rounded-sm"})},Q.code))})})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t.jsxs("form",{onSubmit:U,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,readOnly:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed",placeholder:"Enter your email"})]}),!n.email&&t.jsxs("p",{className:"mt-1 text-sm text-amber-600",children:["Please request a password reset from the"," ",t.jsx(Wi,{to:"/auth/forgot-password",className:"underline font-medium",children:"forgot password page"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-500 mb-2",children:"OTP Code"}),t.jsx("input",{id:"otp",name:"otp",type:"text",required:!0,maxLength:6,value:n.otp,onChange:D,className:`w-full px-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${C.otp?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter 6-digit OTP"}),C.otp&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.otp})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Dd,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:n.password,onChange:D,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${C.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your new password"}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),C.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.password})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"Confirm New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Dd,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:n.confirmPassword,onChange:D,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${C.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Confirm your new password"}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),C.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.confirmPassword})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:h?t.jsxs(t.Fragment,{children:[t.jsx(bc,{size:"sm",className:"mr-2"}),"Resetting password..."]}):t.jsxs(t.Fragment,{children:["Reset password",t.jsx(Cd,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),t.jsx("div",{className:"text-center",children:t.jsxs(Wi,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[t.jsx(gc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},sm=async()=>{const e=Date.now(),r=Math.random().toString(36).substring(7);return await Ft.get(`/property-management?t=${e}&r=${r}&nocache=true`)},J0=async e=>{console.log("🔍 createProperty API called with:",{propertyData:Object.keys(e),url:"/admin/properties",method:"POST"});const r=await Ft.post("/admin/properties",e);return console.log("✅ createProperty API response:",r),r.data},N2=async(e,r)=>{console.log("🔍 updateProperty API called with:",{propertyId:e,propertyData:Object.keys(r),url:`/property-management/${e}`,method:"PUT"});const n=await Ft.put(`/property-management/${e}`,r);if(console.log("✅ updateProperty API response:",n),console.log("🔍 Response type:",typeof n),!n)throw console.error("❌ Invalid response from apiClient.put:",n),new Error("Invalid response from server");return n},j2=async e=>(await Ft.delete(`/admin/properties/${e}`)).data,k2=async(e,r)=>(await Ft.post("/property-management/test-hostkit",{hostkitId:e,apiKey:r})).data,S2=async(e,r)=>{const n={};return e&&(n.startDate=e),r&&(n.endDate=r),(await Ft.get("/property-management/dashboard/metrics",{params:n})).data},Tk=Object.freeze(Object.defineProperty({__proto__:null,createProperty:J0,deleteProperty:j2,getDashboardMetrics:S2,getProperties:sm,testHostkitConnection:k2,updateProperty:N2},Symbol.toStringTag,{value:"Module"})),Ok={properties:[],dashboardMetrics:null,selectedProperty:null,isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isTesting:!1,error:null,hostkitTestResult:null},zi=Ur("propertyManagement/fetchProperties",async(e,{rejectWithValue:r})=>{try{const n=await sm();return n&&typeof n=="object"?n:{properties:[],total:0}}catch(n){return console.error("Failed to fetch properties:",n),r(n.response?.data?.message||"Failed to fetch properties")}}),Pu=Ur("propertyManagement/createProperty",async(e,{rejectWithValue:r})=>{try{return await J0(e)}catch(n){return r(n.response?.data?.message||"Failed to create property")}}),vd=Ur("propertyManagement/updateProperty",async({propertyId:e,propertyData:r},{rejectWithValue:n})=>{try{console.log("🔍 Redux updatePropertyAsync calling API with:",{propertyId:e,propertyData:Object.keys(r)});const a=await N2(e,r);return console.log("🔍 Redux updatePropertyAsync received response:",a),console.log("🔍 Response type:",typeof a),a}catch(a){return console.error("❌ Redux updatePropertyAsync error:",a),n(a.response?.data?.message||"Failed to update property")}}),lf=Ur("propertyManagement/deleteProperty",async(e,{rejectWithValue:r})=>{try{return await j2(e),e}catch(n){return r(n.response?.data?.message||"Failed to delete property")}}),cf=Ur("propertyManagement/testHostkitConnection",async({hostkitId:e,apiKey:r},{rejectWithValue:n})=>{try{return await k2(e,r)}catch(a){return n(a.response?.data?.message||"Failed to test Hostkit connection")}}),df=Ur("propertyManagement/fetchDashboardMetrics",async({startDate:e,endDate:r}={},{rejectWithValue:n})=>{try{return await S2(e,r)}catch(a){return n(a.response?.data?.message||"Failed to fetch dashboard metrics")}}),A2=To({name:"propertyManagement",initialState:Ok,reducers:{clearError:e=>{e.error=null},clearHostkitTestResult:e=>{e.hostkitTestResult=null},setSelectedProperty:(e,r)=>{e.selectedProperty=r.payload}},extraReducers:e=>{e.addCase(zi.pending,r=>{r.isLoading=!0,r.error=null}).addCase(zi.fulfilled,(r,n)=>{r.isLoading=!1,n.payload&&n.payload.properties&&Array.isArray(n.payload.properties)?r.properties=n.payload.properties:r.properties=[]}).addCase(zi.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload,r.properties=[]}).addCase(Pu.pending,r=>{r.isCreating=!0,r.error=null}).addCase(Pu.fulfilled,(r,n)=>{r.isCreating=!1,r.properties.unshift(n.payload.property),r.hostkitTestResult=n.payload.hostkitTest}).addCase(Pu.rejected,(r,n)=>{r.isCreating=!1,r.error=n.payload}).addCase(vd.pending,r=>{r.isUpdating=!0,r.error=null}).addCase(vd.fulfilled,(r,n)=>{if(r.isUpdating=!1,console.log("🔍 Redux updatePropertyAsync.fulfilled payload:",n.payload),n.payload&&n.payload.property){const a=n.payload.property,o=r.properties.findIndex(l=>l._id===a._id);o!==-1&&(r.properties[o]=a),r.selectedProperty?._id===a._id&&(r.selectedProperty=a)}else console.error("❌ Invalid payload structure in updatePropertyAsync.fulfilled:",n.payload)}).addCase(vd.rejected,(r,n)=>{r.isUpdating=!1,r.error=n.payload}).addCase(lf.pending,r=>{r.isDeleting=!0,r.error=null}).addCase(lf.fulfilled,(r,n)=>{r.isDeleting=!1,r.properties=r.properties.filter(a=>a._id!==n.payload),r.selectedProperty?._id===n.payload&&(r.selectedProperty=null)}).addCase(lf.rejected,(r,n)=>{r.isDeleting=!1,r.error=n.payload}).addCase(cf.pending,r=>{r.isTesting=!0,r.error=null}).addCase(cf.fulfilled,(r,n)=>{r.isTesting=!1,r.hostkitTestResult=n.payload}).addCase(cf.rejected,(r,n)=>{r.isTesting=!1,r.error=n.payload}).addCase(df.pending,r=>{r.isLoading=!0,r.error=null}).addCase(df.fulfilled,(r,n)=>{r.isLoading=!1,r.dashboardMetrics=n.payload}).addCase(df.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{clearError:vy,clearHostkitTestResult:Rk,setSelectedProperty:$h}=A2.actions,Mk=A2.reducer,Bk={properties:[],selectedProperty:null,isLoading:!1,error:null},Gi=Ur("properties/fetchProperties",async(e,{rejectWithValue:r})=>{try{const n=Date.now(),a=Math.random().toString(36).substring(7),o=await Ft.get(`/property-management?t=${n}&r=${a}&nocache=true`);return o&&typeof o=="object"?o:{properties:[],total:0}}catch(n){return r(n.response?.data?.message||"Failed to fetch properties")}}),C2=To({name:"properties",initialState:Bk,reducers:{setSelectedProperty:(e,r)=>{e.selectedProperty=r.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Gi.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Gi.fulfilled,(r,n)=>{r.isLoading=!1,n.payload&&n.payload.properties&&Array.isArray(n.payload.properties)?r.properties=n.payload.properties:r.properties=[],r.error=null}).addCase(Gi.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{setSelectedProperty:XC,clearError:ZC}=C2.actions,Uk=C2.reducer,Q0=()=>{const e=rs();O.useEffect(()=>{const r=n=>{console.log("🔄 Property deleted globally, refreshing all property lists:",n.detail),e(Gi())};return window.addEventListener("propertyDeleted",r),()=>{window.removeEventListener("propertyDeleted",r)}},[e])},uf=e=>{const r="http://localhost:5000",n=e.startsWith("/")?e.slice(1):e;return`${r}/${n}`},wy=()=>{const e=rs(),r=xi(),{user:n,isAuthenticated:a}=Ht(N=>N.auth),{t:o}=Vr(),{dashboardMetrics:l,properties:d,isLoading:u}=Ht(N=>N.propertyManagement),[h,p]=O.useState("real");Q0(),O.useEffect(()=>{a&&e(Gi())},[e,a]);const m=()=>{const N=new Date,C=N.getMonth(),F=N.getFullYear(),D=new Date(F,C,1),M=new Date(F,C+1,0),U=Q=>{const J=Q.getFullYear(),re=String(Q.getMonth()+1).padStart(2,"0"),K=String(Q.getDate()).padStart(2,"0");return`${J}-${re}-${K}`};return{startDate:U(D),endDate:U(M)}};O.useEffect(()=>{e(zi());const N=new Date().getFullYear(),C=`${N}-01-01`,F=`${N}-12-31`;e(df({startDate:C,endDate:F}))},[e]);const b=()=>{const N=new Date().getHours();return N<12?o("greeting.morning"):N<18?o("greeting.afternoon"):o("greeting.evening")},j=()=>{const N=new Date,C=N.getMonth()===0?11:N.getMonth()-1,F=N.getMonth()===0?N.getFullYear()-1:N.getFullYear();return{month:C,year:F}},y=()=>{const N=new Date,C=new Date(N.getFullYear(),N.getMonth()-1,1),F=new Date(N.getFullYear(),N.getMonth(),0),D=M=>{const U=M.getFullYear(),Q=String(M.getMonth()+1).padStart(2,"0"),J=String(M.getDate()).padStart(2,"0");return`${U}-${Q}-${J}`};return{startDate:D(C),endDate:D(F)}},A=(N,C)=>{switch(C){case"bookings":const F=m();r(`/bookings?propertyId=${N}&startDate=${F.startDate}&endDate=${F.endDate}&period=thisMonth`);break;case"invoices":const D=y();r(`/invoices?propertyId=${N}&startDate=${D.startDate}&endDate=${D.endDate}&period=lastMonth`);break;case"calendar":const M=m();r(`/calendar?propertyId=${N}&startDate=${M.startDate}&endDate=${M.endDate}&period=thisMonth`);break;default:r(`/properties/${N}`)}},P={totalRevenue:l?.totalRevenue||0,totalBookings:l?.totalBookings||0,occupancyRate:l?.averageOccupancy||0,avgDailyRate:l?.averageDailyRate||0,recentBookings:l?.recentBookings||[],properties:d||[]};return u&&d.length===0?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Dashboard..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[t.jsx("div",{className:"relative overflow-hidden",children:t.jsx("div",{className:"container mx-auto px-4 py-16",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{className:"max-w-2xl",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 mb-6 shadow-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-[#0ea5e9] rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm font-semibold text-gray-700",children:o("dashboard.title")})]}),t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 leading-tight",children:[b(),", ",t.jsx("span",{className:"gradient-text",children:n?.firstName||n?.name||n?.email}),"! 👋"]}),t.jsx("p",{className:"text-lg lg:text-xl text-gray-700 mb-8 leading-relaxed",children:o("dashboard.description")}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"w-4 h-4 bg-[#0ea5e9] rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Live Data"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx(pi,{className:"h-5 w-5 text-blue-600"}),t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Real-time Updates"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx(dp,{className:"h-5 w-5 text-blue-600"}),t.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[P.properties.length," ",o("dashboard.properties")]})]})]})]})})})}),t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("div",{className:"mt-4",children:t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:o("dashboard.quickActions")}),t.jsx("p",{className:"text-sm text-gray-600",children:o("dashboard.manageEfficiently")})]}),t.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center shadow-sm border border-blue-200",children:t.jsx(Pd,{className:"h-5 w-5 text-blue-700 opacity-70"})})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsxs("a",{href:"/calendar",className:"group flex flex-col items-center p-3 bg-blue-50/50 rounded-xl hover:bg-blue-100/50 transition-all duration-300 hover:scale-105 hover:shadow-sm border border-blue-100",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-sm border border-blue-200",children:t.jsx(on,{className:"h-5 w-5 text-blue-700 opacity-70"})}),t.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.viewCalendar")})]}),t.jsxs("a",{href:"/bookings",className:"group flex flex-col items-center p-3 bg-green-50/50 rounded-xl hover:bg-green-100/50 transition-all duration-300 hover:scale-105 hover:shadow-sm border border-green-100",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-sm border border-green-200",children:t.jsx(wa,{className:"h-5 w-5 text-green-700 opacity-70"})}),t.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.manageBookings")})]}),t.jsxs("a",{href:"/invoices",className:"group flex flex-col items-center p-3 bg-purple-50/50 rounded-xl hover:bg-purple-100/50 transition-all duration-300 hover:scale-105 hover:shadow-sm border border-purple-100",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-sm border border-purple-200",children:t.jsx(Io,{className:"h-5 w-5 text-purple-700 opacity-70"})}),t.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.viewInvoices")})]}),t.jsxs("button",{onClick:()=>{const{month:N,year:C}=j();r(`/saft?month=${N}&year=${C}`)},className:"group flex flex-col items-center p-3 bg-orange-50/50 rounded-xl hover:bg-orange-100/50 transition-all duration-300 hover:scale-105 hover:shadow-sm w-full border border-orange-100",children:[t.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-sm border border-orange-200",children:t.jsx(Cl,{className:"h-5 w-5 text-orange-700 opacity-70"})}),t.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.getSAFT")})]})]})]})}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-1",children:o("dashboard.yourProperties")}),t.jsx("p",{className:"text-sm text-gray-600",children:o("dashboard.managePortfolio")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl border border-white/30 shadow-md",children:[t.jsx("div",{className:"w-2 h-2 bg-[#2563eb] rounded-full animate-pulse"}),t.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:[P.properties.length," ",o("dashboard.activePropertiesCount")]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.properties.length>0?P.properties.map((N,C)=>t.jsxs("div",{className:"group bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:[t.jsxs("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:[N.images&&N.images.length>0?t.jsx("img",{src:uf(N.images[0]),alt:N.name,className:"w-full h-full object-cover",onError:F=>{console.error("❌ Dashboard image failed to load:",F.currentTarget.src)},onLoad:F=>{console.log("✅ Dashboard image loaded successfully:",F.currentTarget.src)}}):t.jsxs("div",{className:"text-center",children:[t.jsx(dp,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Property Image"})]}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold shadow-sm ${N.status==="active"?"bg-green-500/60 text-white":N.status==="inactive"?"bg-gray-500/20 text-gray-900 border border-gray-200":"bg-yellow-500/20 text-gray-900 border border-yellow-200"}`,children:N.status||"Active"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-1 truncate",children:N.name}),t.jsx("p",{className:"text-gray-600 text-xs truncate",children:N.address||"Lisbon, Portugal"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:o("property.type")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:N.type})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:o("property.bedrooms")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:N.bedrooms})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:o("property.guests")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:N.maxGuests})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[t.jsx("button",{onClick:F=>{F.stopPropagation(),A(N.id,"bookings")},className:"px-2 py-2 bg-green-500/20 text-gray-900 rounded-lg hover:bg-green-500/30 transition-all duration-300 font-semibold shadow-sm hover:shadow-md text-xs border border-green-200",children:o("property.bookings")}),t.jsx("button",{onClick:F=>{F.stopPropagation(),A(N.id,"invoices")},className:"px-2 py-2 bg-purple-500/20 text-gray-900 rounded-lg hover:bg-purple-500/30 transition-all duration-300 font-semibold shadow-sm hover:shadow-md text-xs border border-purple-200",children:o("property.invoices")}),t.jsx("button",{onClick:F=>{F.stopPropagation(),A(N.id,"calendar")},className:"px-2 py-2 bg-blue-500/20 text-gray-900 rounded-lg hover:bg-blue-500/30 transition-all duration-300 font-semibold shadow-sm hover:shadow-md text-xs border border-blue-200",children:o("property.calendar")})]})]})]},N._id||N.id||C)):t.jsxs("div",{className:"col-span-full text-center py-16",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-3xl flex items-center justify-center mx-auto mb-6",children:t.jsx(dp,{className:"h-10 w-10 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:o("dashboard.noPropertiesFound")}),t.jsx("p",{className:"text-gray-500 mb-6",children:o("dashboard.addFirstProperty")}),t.jsx("button",{className:"px-6 py-3 bg-blue-500/20 text-blue-700 rounded-2xl hover:bg-blue-500/30 transition-all duration-300 font-bold shadow-sm hover:shadow-md border border-blue-200",children:o("property.add")})]})})]})]}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute top-1/4 right-1/4 w-40 h-40 bg-[#0ea5e9]/10 rounded-full blur-3xl "}),t.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-32 h-32 bg-[#10b981]/10 rounded-full blur-3xl -delayed"}),t.jsx("div",{className:"absolute top-1/2 right-1/3 w-24 h-24 bg-[#8b5cf6]/10 rounded-full blur-2xl "}),t.jsx("div",{className:"absolute top-3/4 left-1/3 w-20 h-20 bg-[#f97316]/10 rounded-full blur-2xl -delayed"}),t.jsx("div",{className:"absolute top-1/6 left-1/2 w-16 h-16 bg-[#0ea5e9]/10 rounded-full blur-xl "})]})]})},qk="modulepreload",zk=function(e){return"/"+e},Ny={},ja=function(r,n,a){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=h(n.map(p=>{if(p=zk(p),p in Ny)return;Ny[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const j=document.createElement("link");if(j.rel=m?"stylesheet":qk,m||(j.as="script"),j.crossOrigin="",j.href=p,u&&j.setAttribute("nonce",u),document.head.appendChild(j),m)return new Promise((y,A)=>{j.addEventListener("load",y),j.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return r().catch(l)})},$k={bookings:[],isLoading:!1,error:null,filters:{}},Do=Ur("bookings/fetchBookings",async(e,{rejectWithValue:r})=>{try{const{bookingsAPI:n}=await ja(async()=>{const{bookingsAPI:d}=await import("./bookings.api-DYDp0T-E.js");return{bookingsAPI:d}},[]),a=await n.getBookings(e),l=(Array.isArray(a)?a:a.bookings||[]).map(d=>({...d,propertyId:e.propertyId}));return Array.isArray(a)?l:{...a,bookings:l}}catch(n){return r(n.response?.data?.message||n.message||"Failed to fetch bookings")}}),P2=To({name:"bookings",initialState:$k,reducers:{setFilters:(e,r)=>{e.filters={...e.filters,...r.payload}},setBookings:(e,r)=>{e.bookings=r.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Do.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Do.fulfilled,(r,n)=>{r.isLoading=!1,r.bookings=Array.isArray(n.payload)?n.payload:n.payload.bookings||[]}).addCase(Do.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{setFilters:ud,setBookings:Vk,clearError:e8}=P2.actions,Hk=P2.reducer,za=({properties:e,selectedId:r,onChange:n,placeholder:a="Select Property",className:o=""})=>(e.find(l=>l.id===r),t.jsxs("div",{className:`relative ${o}`,children:[t.jsxs("select",{value:r||"",onChange:l=>n(l.target.value?parseInt(l.target.value):null),className:"w-full px-4 py-3 pr-10 appearance-none cursor-pointer bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[t.jsx("option",{value:"",className:"bg-white text-gray-900",children:a}),e.map(l=>t.jsx("option",{value:l.id,className:"bg-white text-gray-900",children:l.name},l.id))]}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:t.jsx(Uu,{className:"h-5 w-5 text-gray-500"})})]})),_2=(e,r)=>{const n=r.properties.properties.find(a=>a.id===e);return n?n.name:`Property ${e}`},Od={validateSibaSubmission:async(e,r)=>{try{return await Ft.post("/siba-manager/validate",{propertyId:e,reservationData:r})}catch(n){throw console.error("SIBA validation error:",n),new Error(n.response?.data?.error||"SIBA validation failed")}},sendSibaSubmission:async(e,r)=>{try{return await Ft.post("/siba-manager/send",{propertyId:e,reservationData:r})}catch(n){throw console.error("SIBA submission error:",n),new Error(n.response?.data?.error||"SIBA submission failed")}},getBulkSibaDashboard:async()=>{try{return await Ft.get("/siba-manager/dashboard")}catch(e){throw console.error("Bulk SIBA dashboard error:",e),new Error(e.response?.data?.error||"Failed to fetch SIBA dashboard")}},getSibaStatus:async e=>{try{return await Ft.get(`/siba-manager/status/${e}`)}catch(r){throw console.error("SIBA status error:",r),new Error(r.response?.data?.error||"Failed to fetch SIBA status")}},bulkValidateSiba:async e=>{try{return await Ft.post("/siba-manager/bulk-validate",{reservations:e})}catch(r){throw console.error("Bulk SIBA validation error:",r),new Error(r.response?.data?.error||"Bulk SIBA validation failed")}},bulkSendSiba:async e=>{try{return await Ft.post("/siba-manager/bulk-send",{reservations:e})}catch(r){throw console.error("Bulk SIBA submission error:",r),new Error(r.response?.data?.error||"Bulk SIBA submission failed")}}},hf=Ur("sibaManager/validateSubmission",async({propertyId:e,reservationData:r})=>(await Od.validateSibaSubmission(e,r)).validation),ff=Ur("sibaManager/sendSubmission",async({propertyId:e,reservationData:r})=>await Od.sendSibaSubmission(e,r)),gp=Ur("sibaManager/fetchBulkDashboard",async()=>await Od.getBulkSibaDashboard()),Wk=Ur("sibaManager/fetchSibaStatus",async e=>(await Od.getSibaStatus(e)).status),xp=Ur("sibaManager/bulkValidate",async e=>(await Od.bulkValidateSiba(e)).validations),yp=Ur("sibaManager/bulkSend",async e=>await Od.bulkSendSiba(e)),Gk={validation:{isLoading:!1,result:null,error:null},submission:{isLoading:!1,result:null,error:null},bulkDashboard:{isLoading:!1,data:[],summary:null,error:null},propertyStatuses:{},bulkOperations:{validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}},D2=To({name:"sibaManager",initialState:Gk,reducers:{clearValidation:e=>{e.validation={isLoading:!1,result:null,error:null}},clearSubmission:e=>{e.submission={isLoading:!1,result:null,error:null}},clearBulkDashboard:e=>{e.bulkDashboard={isLoading:!1,data:[],summary:null,error:null}},clearBulkOperations:e=>{e.bulkOperations={validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}}},extraReducers:e=>{e.addCase(hf.pending,r=>{r.validation.isLoading=!0,r.validation.error=null}).addCase(hf.fulfilled,(r,n)=>{r.validation.isLoading=!1,r.validation.result=n.payload}).addCase(hf.rejected,(r,n)=>{r.validation.isLoading=!1,r.validation.error=n.error.message||"Validation failed"}),e.addCase(ff.pending,r=>{r.submission.isLoading=!0,r.submission.error=null}).addCase(ff.fulfilled,(r,n)=>{r.submission.isLoading=!1,r.submission.result=n.payload}).addCase(ff.rejected,(r,n)=>{r.submission.isLoading=!1,r.submission.error=n.error.message||"Submission failed"}),e.addCase(gp.pending,r=>{r.bulkDashboard.isLoading=!0,r.bulkDashboard.error=null}).addCase(gp.fulfilled,(r,n)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.data=n.payload.data,r.bulkDashboard.summary=n.payload.summary}).addCase(gp.rejected,(r,n)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.error=n.error.message||"Failed to fetch dashboard"}),e.addCase(Wk.fulfilled,(r,n)=>{const a=n.meta?.arg;a&&(r.propertyStatuses[a]=n.payload)}),e.addCase(xp.pending,r=>{r.bulkOperations.validation.isLoading=!0,r.bulkOperations.validation.error=null}).addCase(xp.fulfilled,(r,n)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.results=n.payload}).addCase(xp.rejected,(r,n)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.error=n.error.message||"Bulk validation failed"}),e.addCase(yp.pending,r=>{r.bulkOperations.submission.isLoading=!0,r.bulkOperations.submission.error=null}).addCase(yp.fulfilled,(r,n)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.results=n.payload}).addCase(yp.rejected,(r,n)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.error=n.error.message||"Bulk submission failed"})}}),{clearValidation:Kk,clearSubmission:Yk,clearBulkDashboard:t8,clearBulkOperations:r8}=D2.actions,Jk=D2.reducer,Qk=({reservation:e,propertyId:r,onSibaSent:n})=>{const a=rs(),{validation:o,submission:l}=Ht(A=>A.sibaManager),[d,u]=O.useState(!1),[h,p]=O.useState(!1),m=async()=>{a(Kk()),await a(hf({propertyId:r,reservationData:e})),u(!0)},b=async()=>{a(Yk());const A=await a(ff({propertyId:r,reservationData:e}));A.payload?.success&&A.payload?.submissionId&&(n?.(A.payload.submissionId),p(!0))},j=A=>{switch(A){case"green":return t.jsx(Ws,{className:"h-5 w-5 text-green-600"});case"amber":return t.jsx(z0,{className:"h-5 w-5 text-yellow-600"});case"red":return t.jsx(Ki,{className:"h-5 w-5 text-red-600"});default:return t.jsx(fs,{className:"h-5 w-5 text-gray-400"})}},y=A=>{switch(A){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(fs,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SIBA Manager Tools"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Validate and send SIBA submission for this reservation"})]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-xs text-gray-500",children:["Property ID: ",r]})})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:m,disabled:o.isLoading,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.isLoading?t.jsx(xn,{className:"h-4 w-4 animate-spin"}):t.jsx(e2,{className:"h-4 w-4"}),t.jsx("span",{children:o.isLoading?"Validating...":"Validate SIBA"})]}),t.jsxs("button",{onClick:b,disabled:l.isLoading||!o.result?.isValid,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.isLoading?t.jsx(xn,{className:"h-4 w-4 animate-spin"}):t.jsx(X3,{className:"h-4 w-4"}),t.jsx("span",{children:l.isLoading?"Sending...":"Send SIBA"})]})]}),d&&o.result&&t.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(o.result.isValid?"green":"red")}`,children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[j(o.result.isValid?"green":"red"),t.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Validation ",o.result.isValid?"Successful":"Failed"]})]}),o.result.errors.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Errors:"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.errors.map((A,P)=>t.jsx("li",{className:"text-sm text-red-700",children:A},P))})]}),o.result.warnings.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Information:"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.warnings.map((A,P)=>t.jsx("li",{className:"text-sm text-blue-700",children:A.includes("not found in")||A.includes("unavailable")||A.includes("No reservation code")?"This reservation requires manual processing. SIBA submission will be recorded locally.":lp(A)},P))})]}),o.result.isValid&&t.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(Ws,{className:"h-4 w-4 text-green-600"}),t.jsx("h5",{className:"text-sm font-medium text-green-800",children:"Ready for SIBA Submission"})]}),t.jsx("p",{className:"text-sm text-green-700",children:"All required information is valid. You can proceed with SIBA submission."})]}),o.result.isValid&&o.result.validationData&&t.jsxs("div",{className:"bg-white/50 p-3 rounded-lg",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Validation Data:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Guest Count:"})," ",o.result.validationData.guestCount]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Nights:"})," ",o.result.validationData.nights]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Check-in:"})," ",new Date(o.result.validationData.checkIn).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Check-out:"})," ",new Date(o.result.validationData.checkOut).toLocaleDateString()]})]})]})]}),h&&l.result&&t.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(l.result.success?"green":"red")}`,children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[j(l.result.success?"green":"red"),t.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["SIBA Submission ",l.result.success?"Successful":"Failed"]})]}),l.result.success?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-green-700",children:[t.jsx("span",{className:"font-medium",children:"Submission ID:"})," ",l.result.submissionId]}),t.jsx("p",{className:"text-sm text-green-700",children:"SIBA submission has been successfully sent to the municipal authorities."})]}):t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Submission Errors:"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:l.result.errors?.map((A,P)=>t.jsx("li",{className:"text-sm text-red-700",children:A},P))})]})]}),o.error&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:lp(o.error)})}),l.error&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:lp(l.error)})})]})},Xk=()=>{const{t:e}=Vr(),[r,n]=Fd(),[a,o]=O.useState(""),[l,d]=O.useState(!0),[u,h]=O.useState(null),[p,m]=O.useState(!1),[b,j]=O.useState(null),[y,A]=O.useState({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),[P,N]=O.useState(""),C=rs(),F=xi(),{bookings:D,isLoading:M,error:U,filters:Q}=Ht(T=>T.bookings),{properties:J}=Ht(T=>T.properties),{isAuthenticated:re}=Ht(T=>T.auth);Q0(),O.useEffect(()=>{re&&C(Gi())},[C,re]),O.useEffect(()=>{J.length>0&&!Q.propertyId&&(console.log("🔍 Bookings: Auto-selecting first property:",J[0]),C(ud({propertyId:J[0].id})))},[J,Q.propertyId,C]);const K=()=>{const T=new Date,L=T.getMonth(),Y=T.getFullYear(),ne=new Date(Y,L,1),ie=new Date(Y,L+1,0),V=fe=>{const he=fe.getFullYear(),pe=String(fe.getMonth()+1).padStart(2,"0"),Ce=String(fe.getDate()).padStart(2,"0");return`${he}-${pe}-${Ce}`};return{startDate:V(ne),endDate:V(ie)}},de=T=>{const L=new Date,Y=L.toISOString().split("T")[0];switch(T){case"lastMonth":const ne=new Date(L.getFullYear(),L.getMonth()-1,1),ie=new Date(L.getFullYear(),L.getMonth(),0);return{startDate:ne.toISOString().split("T")[0],endDate:ie.toISOString().split("T")[0]};case"last3Months":return{startDate:new Date(L.getFullYear(),L.getMonth()-3,1).toISOString().split("T")[0],endDate:Y};default:const fe=new Date(L.getFullYear(),L.getMonth()-1,1),he=new Date(L.getFullYear(),L.getMonth(),0);return{startDate:fe.toISOString().split("T")[0],endDate:he.toISOString().split("T")[0]}}};O.useEffect(()=>{const T=r.get("propertyId"),L=r.get("startDate"),Y=r.get("endDate"),ne=r.get("period");if(T||L||Y){if(A({propertyId:T?parseInt(T):null,startDate:L||"",endDate:Y||"",status:"",platform:""}),C(ud({propertyId:T?parseInt(T):void 0,dateRange:L&&Y?{start:L,end:Y}:void 0,status:""})),T&&C(Do({propertyId:parseInt(T),startDate:L||void 0,endDate:Y||void 0})),ne){const ie=ne==="thisMonth"?"this month":ne==="lastMonth"?"last month":ne;console.log(`Applied ${ie} filters for property ${T}`),j({propertyId:T?parseInt(T):void 0,period:ie,startDate:L||void 0,endDate:Y||void 0})}}else{const ie=K();A(V=>({...V,startDate:ie.startDate,endDate:ie.endDate})),C(ud({dateRange:{start:ie.startDate,end:ie.endDate}})),console.log("Auto-selected current month:",ie)}},[r,C]),O.useEffect(()=>{if(y.startDate&&y.endDate&&!y.propertyId&&J.length>0){const T=J[0];T&&(A(L=>({...L,propertyId:T.id})),C(Do({propertyId:T.id,startDate:y.startDate,endDate:y.endDate})),console.log(`Auto-fetching bookings for property ${T.id} (${T.name}) for current month`))}},[y.startDate,y.endDate,y.propertyId,J,C]);const E=T=>_2(T,{properties:{properties:J}}),I=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(T),H=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),te=(T,L)=>{A(Y=>({...Y,[T]:L}))},we=()=>{const T={propertyId:y.propertyId||void 0,status:y.status||void 0,dateRange:y.startDate&&y.endDate?{start:y.startDate,end:y.endDate}:void 0};C(ud(T)),d(!1);const L=y.propertyId;L&&C(Do({propertyId:L,startDate:y.startDate,endDate:y.endDate}))},se=()=>{A({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),C(ud({})),C(Vk([]))},$=(T,L)=>{F(`/bookings/${T}?propertyId=${L}`)},ee=()=>{m(!1),h(null)},Se=D.map(T=>({id:T.id?.toString()||T.id,propertyId:T.propertyId,guestName:T.guestName||"Unknown Guest",bookingId:T.id?.toString()||"N/A",checkInDate:T.arrivalDate||T.checkIn,checkOutDate:T.departureDate||T.checkOut,totalAmount:T.totalPrice||0,status:T.status||"pending",paymentStatus:T.paymentStatus,platform:T.provider||T.platform||"Direct",guestEmail:T.guestEmail,guestPhone:T.guestPhone,nights:T.nights||1,adults:T.adults||1,children:T.children||0,specialRequests:"",createdAt:T.createdAt,updatedAt:T.updatedAt})).filter(T=>{const L=T.guestName?.toLowerCase().includes(a.toLowerCase())||T.propertyId?.toString().includes(a)||T.bookingId?.toLowerCase().includes(a.toLowerCase()),Y=!y.propertyId||T.propertyId===y.propertyId,ne=!y.status||T.paymentStatus?.toLowerCase()===y.status.toLowerCase()||T.status===y.status,ie=!y.platform||T.platform===y.platform;return L&&Y&&ne&&ie});return M?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:e("bookings.loading")})]})}):U?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ki,{className:"w-8 h-8 text-red-600"})}),t.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Error loading bookings"}),t.jsx("p",{className:"text-gray-600 mb-4",children:U}),t.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]})}):Q.propertyId?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:e("bookings.title")}),t.jsx("p",{className:"text-lg text-gray-600",children:e("bookings.manageReservations")}),b&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:[e("bookings.showingData").replace("{period}",b.period||""),b.propertyId&&` ${e("bookings.forProperty").replace("{propertyId}",b.propertyId.toString())}`,b.startDate&&b.endDate&&` ${e("bookings.dateRange").replace("{startDate}",new Date(b.startDate).toLocaleDateString()).replace("{endDate}",new Date(b.endDate).toLocaleDateString())}`]})]}),t.jsx("button",{onClick:()=>{j(null),n({}),A({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),C(ud({propertyId:void 0,dateRange:void 0,status:""}))},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:e("bookings.clearFilters")})]})})]}),t.jsx("div",{className:"flex gap-4 mt-6 lg:mt-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700",children:e("bookings.property")}),t.jsx(za,{selectedId:y.propertyId,onChange:T=>{te("propertyId",T),T&&C(Do({propertyId:T}))},properties:J})]})})]})})}),t.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-4 pt-20",children:[t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:t.jsxs("button",{onClick:()=>d(!l),className:`px-4 py-2 rounded-lg font-semibold shadow-sm transition-all duration-300 flex items-center gap-1 border ${l?"bg-blue-500/20 text-gray-900 border-blue-200 hover:bg-blue-500/30":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:[t.jsx(_d,{className:"w-4 h-4 opacity-70"}),"Filters"]})}),l&&t.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-lg border border-gray-100/50 shadow-md",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Property"}),t.jsx(za,{selectedId:y.propertyId,onChange:T=>te("propertyId",T),properties:J})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("bookings.status")}),t.jsxs("select",{value:y.status,onChange:T=>te("status",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",children:[t.jsx("option",{value:"",children:e("bookings.allStatuses")}),t.jsx("option",{value:"Modified",children:e("bookings.modified")}),t.jsx("option",{value:"In Enquiry",children:e("bookings.inquiry")}),t.jsx("option",{value:"inquiryPreapproved",children:e("bookings.inquiryPreapproved")}),t.jsx("option",{value:"Cancelled",children:e("bookings.cancelled")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date Range"}),t.jsxs("select",{value:P,onChange:T=>{N(T.target.value);const{startDate:L,endDate:Y}=de(T.target.value);A(ne=>({...ne,startDate:L,endDate:Y}))},className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",children:[t.jsx("option",{value:"",children:e("bookings.selectDateRange")}),t.jsx("option",{value:"lastMonth",children:e("bookings.lastMonth")}),t.jsx("option",{value:"last3Months",children:e("bookings.last3Months")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("bookings.checkinFrom")}),t.jsx("input",{type:"date",value:y.startDate,onChange:T=>te("startDate",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("bookings.checkinTo")}),t.jsx("input",{type:"date",value:y.endDate,onChange:T=>te("endDate",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md"})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[t.jsx("button",{onClick:se,className:"px-4 py-2 bg-white text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-300 font-semibold shadow-md",children:e("bookings.clearAll")}),t.jsx("button",{onClick:we,className:"px-4 py-2 bg-blue-500/20 text-gray-900 rounded-lg hover:bg-blue-500/30 transition-all duration-300 font-semibold shadow-sm hover:shadow-md border border-blue-200",children:e("bookings.applyFilters")})]})]})]}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.guest")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.property")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.checkin")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.checkout")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.amount")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.status")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("bookings.actions")})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:Se.map((T,L)=>t.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center shadow-sm border border-blue-200",children:t.jsx("span",{className:"text-sm font-bold text-gray-900 opacity-70",children:T.guestName?.charAt(0)||"G"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm group-hover:text-blue-600 transition-colors",children:T.guestName||"Guest"}),t.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["ID: ",T.bookingId]})]})]})}),t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:E(T.propertyId||0)}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Algarve, Portugal"})]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("p",{className:"font-semibold text-gray-900",children:H(T.checkInDate||"")})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("p",{className:"font-semibold text-gray-900",children:H(T.checkOutDate||"")})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:"font-bold text-gray-900 text-sm",children:I(T.totalAmount||0)})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-bold shadow-md ${T.status==="Modified"?"bg-blue-100 text-blue-800":T.status==="In Enquiry"||T.status==="inquiryPreapproved"?"bg-yellow-100 text-yellow-800":T.status==="Cancelled"?"bg-red-100 text-red-800":T.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:T.status||T.paymentStatus||"Pending"})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{onClick:()=>$(T.id,T.propertyId||392776),className:"p-2 bg-blue-500/20 text-gray-900 rounded-lg hover:bg-blue-500/30 transition-all duration-300 shadow-sm hover:shadow-md border border-blue-200",title:e("bookings.viewDetails"),children:t.jsx(ps,{className:"w-4 h-4 opacity-70"})})})})]},T.id))})]})})})]}),p&&u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e("bookings.bookingDetails")}),t.jsx("button",{onClick:ee,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:t.jsx(on,{className:"h-5 w-5 text-blue-600"})}),e("bookings.bookingInformation")]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.guestName")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:u.guestName})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.propertyLabel")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:E(u.propertyId)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.checkinLabel")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:H(u.checkInDate)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.checkoutLabel")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:H(u.checkOutDate)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.adults")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:u.adults})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.children")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:u.children})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:e("bookings.totalAmount")}),t.jsx("span",{className:"text-gray-900 font-semibold",children:I(u.totalAmount)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600 font-medium",children:[e("bookings.status"),":"]}),t.jsx("span",{className:`font-semibold ${u.paymentStatus==="Paid"?"text-green-600":u.paymentStatus==="Pending"?"text-yellow-600":"text-red-600"}`,children:u.status||u.paymentStatus})]})]})]})}),t.jsx("div",{className:"space-y-6",children:t.jsx(Qk,{reservation:u,propertyId:u.propertyId,onSibaSent:T=>{console.log("SIBA submitted with ID:",T)}})})]})]})})})]}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ku,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),t.jsx("p",{className:"text-gray-500 mb-4",children:e("bookings.selectProperty")}),t.jsx("button",{onClick:()=>d(!0),className:"btn btn-primary",children:"Select Property"})]})})})},jy=()=>{const{bookingId:e}=E0(),[r]=Fd(),n=r.get("propertyId"),{t:a}=Vr(),o=xi(),[l,d]=O.useState(null),[u,h]=O.useState(!0),[p,m]=O.useState(null),{token:b}=Ht(y=>y.auth);O.useEffect(()=>{(async()=>{if(!e||!n){m("Missing booking ID or property ID"),h(!1);return}try{h(!0),m(null);const A=await Ft.get(`/bookings/detail/${e}?propertyId=${n}`);d(A)}catch(A){console.error("Error fetching booking detail:",A),m(A.message||"Failed to fetch booking details")}finally{h(!1)}})()},[e,n,b]);const j=()=>{if(!l)return;const y=window.open("","_blank");if(!y){alert("Please allow popups to download PDF");return}const A=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Booking Detail Report - ${l.id}</title>
        <style>
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            line-height: 1.6;
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 15px; 
            margin-bottom: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
          }
          .header .logo {
            height: 60px;
            width: auto;
          }
          .header .title-section {
            flex: 1;
          }
          .header h1 { 
            margin: 0; 
            color: #333; 
            font-size: 24px;
          }
          .header p { 
            margin: 5px 0 0 0; 
            color: #666; 
            font-size: 14px;
          }
          .section { 
            margin-bottom: 25px; 
            page-break-inside: avoid;
          }
          .section h3 { 
            color: #333; 
            border-bottom: 1px solid #ccc; 
            padding-bottom: 8px; 
            margin-bottom: 15px;
            font-size: 18px;
          }
          .info-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 8px; 
            padding: 5px 0;
          }
          .label { 
            font-weight: bold; 
            color: #333;
            flex: 1;
          }
          .value { 
            color: #666; 
            flex: 1;
            text-align: right;
          }
          .financial { 
            background-color: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            border: 1px solid #e9ecef;
          }
          .financial .info-row {
            border-bottom: 1px solid #e9ecef;
            padding: 8px 0;
          }
          .financial .info-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 16px;
            color: #333;
          }
          .special-requests {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${tm}" alt="Company Logo" class="logo" />
          <div class="title-section">
            <h1>${a("bookingDetail.reportTitle")}</h1>
            <p>${a("bookingDetail.generatedOn")} ${new Date().toLocaleString()}</p>
          </div>
        </div>
        
        <div class="section">
          <h3>${a("bookingDetail.basicInformation")}</h3>
          <div class="info-row">
            <span class="label">${a("bookingDetail.hostawayReservationId")}</span>
            <span class="value">${l.hostawayReservationId||l.id||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.channelReservationId")}</span>
            <span class="value">${l.channelReservationId||l.reservationId||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.property")}</span>
            <span class="value">${l.propertyName}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.guestName")}</span>
            <span class="value">${l.guestName}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.guestEmail")}</span>
            <span class="value">${l.guestEmail}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.guestPhone")}</span>
            <span class="value">${l.guestPhone||a("bookingDetail.notProvided")}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>${a("bookingDetail.datesDuration")}</h3>
          <div class="info-row">
            <span class="label">${a("bookingDetail.checkin")}</span>
            <span class="value">${new Date(l.arrivalDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.checkout")}</span>
            <span class="value">${new Date(l.departureDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.totalNights")}</span>
            <span class="value">${l.nights}</span>
          </div>
          ${l.checkInTime?`
          <div class="info-row">
            <span class="label">${a("bookingDetail.checkinTime")}</span>
            <span class="value">${l.checkInTime}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.checkoutTime")}</span>
            <span class="value">${l.checkOutTime}</span>
          </div>
          `:""}
        </div>
        
        <div class="section">
          <h3>${a("bookingDetail.guestInformation")}</h3>
          <div class="info-row">
            <span class="label">${a("bookingDetail.adults")}</span>
            <span class="value">${l.adults}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.children")}</span>
            <span class="value">${l.children}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.totalGuests")}</span>
            <span class="value">${l.totalGuests}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>${a("bookingDetail.bookingDetails")}</h3>
          <div class="info-row">
            <span class="label">${a("bookingDetail.platform")}</span>
            <span class="value">${l.provider}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.status")}</span>
            <span class="value">${l.status}</span>
          </div>
          <div class="info-row">
            <span class="label">${a("bookingDetail.paymentStatus")}</span>
            <span class="value">${l.paymentStatus}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>${a("bookingDetail.financialBreakdown")}</h3>
          <div class="financial">
            <div class="info-row">
              <span class="label">${a("bookingDetail.totalRevenue")}</span>
              <span class="value">€${l.totalPrice?.toFixed(2)}</span>
            </div>
            <div class="info-row" style="background-color: #f8f9fa; padding: 8px; border-radius: 4px;">
              <span class="label" style="font-style: italic;">Note:</span>
              <span class="value" style="font-style: italic;">${a("bookingDetail.finalAmountNote")}</span>
            </div>
            ${l.cityTax?`
            <div class="info-row">
              <span class="label">${a("bookingDetail.cityTax")}</span>
              <span class="value">€${l.cityTax?.toFixed(2)}</span>
            </div>
            `:""}
          </div>
        </div>
        
        ${l.specialRequests?`
        <div class="section">
          <h3>${a("bookingDetail.specialRequests")}</h3>
          <div class="special-requests">
            <p>${l.specialRequests}</p>
          </div>
        </div>
        `:""}
        
        <script>
          // Auto-print when window loads
          window.onload = function() {
            setTimeout(function() {
              window.print();
              // Close window after printing
              setTimeout(function() {
                window.close();
              }, 1000);
            }, 500);
          };
        <\/script>
      </body>
      </html>
    `;y.document.write(A),y.document.close()};return u?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading booking details..."})]})}):p?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(kl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Booking"}),t.jsx("p",{className:"text-gray-600 mb-4",children:p}),t.jsx("button",{onClick:()=>o("/bookings"),className:"btn-primary",children:a("bookingDetail.backToBookings")})]})}):l?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{onClick:()=>o("/bookings"),className:"btn-outline btn-sm mr-4",children:[t.jsx(gc,{className:"h-4 w-4 mr-2"}),a("bookingDetail.backToBookings")]}),t.jsxs("h1",{className:"text-xl font-semibold text-white",children:["Booking Details - ",l.id]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:j,className:"btn-outline btn-sm",children:[t.jsx(Oo,{className:"h-4 w-4 mr-2"}),a("bookingDetail.printPdf")]})})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a("bookingDetail.basicInformation")})}),t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[t.jsx(Ws,{className:"h-4 w-4 text-green-500 mr-2"}),a("bookingDetail.hostawayReservationId")]}),t.jsx("input",{type:"text",value:l.hostawayReservationId||l.id||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[t.jsx(Ws,{className:"h-4 w-4 text-green-500 mr-2"}),a("bookingDetail.channelReservationId")]}),t.jsx("input",{type:"text",value:l.channelReservationId||l.reservationId||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.guestName")}),t.jsx("p",{className:"text-sm text-gray-900",children:l.guestName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.platform")}),t.jsx("p",{className:"text-sm text-gray-900 capitalize",children:l.provider})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.status")}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a("bookingDetail.datesDuration")})}),t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.checkin")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.arrivalDate).toLocaleDateString()})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.checkout")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("p",{className:"text-sm text-gray-900",children:new Date(l.departureDate).toLocaleDateString()})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.totalNights")}),t.jsx("p",{className:"text-2xl font-bold text-primary-600",children:l.nights})]})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a("bookingDetail.guestInformation")})}),t.jsxs("div",{className:"card-content",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.guestEmail")}),t.jsx("p",{className:"text-sm text-gray-900",children:l.guestEmail})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.guestPhone")}),t.jsx("p",{className:"text-sm text-gray-900",children:l.guestPhone||a("bookingDetail.notProvided")})]})]}),t.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.adults")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(wa,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("p",{className:"text-sm text-gray-900",children:l.adults})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.children")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(wa,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("p",{className:"text-sm text-gray-900",children:l.children})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.totalGuests")}),t.jsx("p",{className:"text-2xl font-bold text-primary-600",children:l.totalGuests})]})]}),l.specialRequests&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("bookingDetail.specialRequests")}),t.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:l.specialRequests})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[l.currentTaxFormatted&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Information"})}),t.jsxs("div",{className:"card-content space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Tax"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.currentTaxFormatted})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Tax"}),t.jsx("p",{className:"text-2xl font-bold text-success-600",children:l.estimatedTotalTaxFormatted})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax per Night"}),t.jsx("p",{className:"text-sm text-gray-900",children:l.estimatedTaxPerNightFormatted})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Taxable Nights:"}),t.jsx("span",{className:"font-medium",children:l.taxableNights})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Exempt Nights:"}),t.jsx("span",{className:"font-medium",children:l.exemptNights})]})]})]})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a("bookingDetail.financialBreakdown")})}),t.jsxs("div",{className:"card-content space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("bookingDetail.totalRevenue")}),t.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:["€",l.totalPrice?.toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a("bookingDetail.finalAmountNote")})]}),l.checkInTime&&t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:a("bookingDetail.checkinTime")}),t.jsx("span",{className:"font-medium",children:l.checkInTime})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:a("bookingDetail.checkoutTime")}),t.jsx("span",{className:"font-medium",children:l.checkOutTime})]})]})]})]}),l.taxImplemented!==void 0&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Status"})}),t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[l.taxImplemented?t.jsx(Ws,{className:"h-5 w-5 text-green-500 mr-2"}):t.jsx(kl,{className:"h-5 w-5 text-yellow-500 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:l.taxImplemented?"Tax Implemented":"Tax Not Implemented"})]})})]})]})]})})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(kl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Booking Not Found"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"The requested booking could not be found."}),t.jsxs("button",{onClick:()=>o("/bookings"),className:"btn-primary",children:[t.jsx(gc,{className:"h-4 w-4 mr-2"}),a("bookingDetail.backToBookings")]})]})})},Zk={invoices:[],isLoading:!1,error:null,summary:{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0}},wd=Ur("invoices/fetchInvoices",async(e,{rejectWithValue:r})=>{try{console.log("🔍 fetchInvoicesAsync called with params:",e);const{invoicesAPI:n}=await ja(async()=>{const{invoicesAPI:o}=await import("./invoices.api-kieSHy1x.js");return{invoicesAPI:o}},[]),a=await n.getInvoices(e);return console.log("🔍 fetchInvoicesAsync received result:",a),a}catch(n){return console.error("❌ fetchInvoicesAsync error:",n),r(n.response?.data?.message||"Failed to fetch invoices")}}),L2=To({name:"invoices",initialState:Zk,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(wd.pending,r=>{r.isLoading=!0,r.error=null}).addCase(wd.fulfilled,(r,n)=>{r.isLoading=!1;const a=Array.isArray(n.payload)?n.payload:[],o=l=>`Property ${l}`;r.invoices=a.map(l=>{const d=parseFloat(l.value||"0");return{id:l.id||"",propertyId:l.propertyId||0,propertyName:o(l.propertyId||0),guestName:l.name||l.guestName||"Unknown Guest",date:l.date||new Date().toISOString(),value:d,valueFormatted:`€${d.toFixed(2)}`,vat:0,vatFormatted:"€0.00",total:d,totalFormatted:`€${d.toFixed(2)}`,status:l.closed?"paid":l.partial?"partial":"pending",invoiceUrl:l.invoice_url||"#",closed:l.closed||!1,partial:l.partial||!1}}),r.summary=r.invoices.reduce((l,d)=>(l.totalAmount+=d.total,d.status==="paid"?l.paidAmount+=d.total:d.status==="pending"||d.status==="partial"?l.pendingAmount+=d.total:d.status==="overdue"&&(l.overdueAmount+=d.total),l),{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0})}).addCase(wd.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{clearError:n8}=L2.actions,eS=L2.reducer,tS=()=>{const{t:e}=Vr(),[r,n]=Fd(),[a,o]=O.useState(""),[l,d]=O.useState(!0),[u,h]=O.useState("lastMonth"),[p,m]=O.useState(null),b=rs(),{invoices:j,isLoading:y,summary:A}=Ht(se=>se.invoices),{properties:P}=Ht(se=>se.properties),{isAuthenticated:N}=Ht(se=>se.auth);O.useEffect(()=>{N&&b(Gi())},[b,N]);const[C,F]=O.useState(null),[D,M]=O.useState(""),[U,Q]=O.useState(""),J=()=>{const se=new Date,$=se.getMonth()===0?11:se.getMonth()-1,ee=se.getMonth()===0?se.getFullYear()-1:se.getFullYear(),ge=new Date(ee,$,1),Se=new Date(ee,$+1,0),T=L=>{const Y=L.getFullYear(),ne=String(L.getMonth()+1).padStart(2,"0"),ie=String(L.getDate()).padStart(2,"0");return`${Y}-${ne}-${ie}`};return{startDate:T(ge),endDate:T(Se)}};O.useEffect(()=>{const se=r.get("propertyId"),$=r.get("startDate"),ee=r.get("endDate"),ge=r.get("period");if(se||$||ee)F(se?parseInt(se):null),M($||""),Q(ee||""),se&&b(wd({propertyId:parseInt(se),startDate:$||void 0,endDate:ee||void 0})),ge&&console.log(`Applied ${ge==="thisMonth"?"this month":ge==="lastMonth"?"last month":ge} filters for property ${se}`);else{const Se=J();M(Se.startDate),Q(Se.endDate),console.log("Auto-selected last month:",Se)}},[r]),O.useEffect(()=>{if(P.length>0&&!C){const se=P[0];F(se.id),console.log("Auto-selected first property:",se.name)}},[P,C]);const re=se=>_2(se,{properties:{properties:P}});O.useEffect(()=>{if(D&&U&&!C&&P.length>0){const se=P[0];se&&(F(se.id),b(wd({propertyId:se.id,startDate:D,endDate:U})),console.log(`Auto-fetching invoices for property ${se.id} (${se.name}) for last month`))}},[D,U,C,P,b]);const K=()=>{C&&(console.log("🔍 fetchInvoices called with propertyId:",C),b(wd({propertyId:C,startDate:D||void 0,endDate:U||void 0})))},de=async se=>{const $=se.invoice_url||se.invoiceUrl;if(console.log("🔍 Invoice data for download:",{id:se.id,invoice_url:se.invoice_url,invoiceUrl:se.invoiceUrl,finalUrl:$}),$&&$!=="#"){m(se.id);try{console.log(`🔄 Downloading invoice ${se.id} via Vercel API proxy with URL: ${$}`);const ee=`/api/invoice-proxy?url=${encodeURIComponent($)}`,ge=await fetch(ee);if(!ge.ok)throw new Error(`HTTP error! status: ${ge.status}`);const Se=await ge.blob(),T=window.URL.createObjectURL(Se),L=document.createElement("a");L.href=T,L.download=`invoice_${se.id}.pdf`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(T),console.log(`✅ Download initiated for invoice ${se.id}`)}catch(ee){console.error("Error downloading invoice:",ee),alert("Failed to download invoice. Please try again.")}finally{m(null)}}else console.log("❌ No valid invoice URL found:",{invoice_url:se.invoice_url,invoiceUrl:se.invoiceUrl}),alert("Invoice URL not available for download")};O.useEffect(()=>{console.log("🔍 Properties loaded:",P.map(se=>({id:se.id,name:se.name}))),P.length>0&&!C&&(console.log("🔍 Setting selectedPropertyId to first property:",P[0].id,P[0].name),F(P[0].id))},[P,C]),O.useEffect(()=>{C&&K()},[C]);const E=se=>{const $=new Date,ee=$.toISOString().split("T")[0];switch(se){case"lastMonth":const ge=new Date($.getFullYear(),$.getMonth()-1,1),Se=new Date($.getFullYear(),$.getMonth(),0);return{startDate:ge.toISOString().split("T")[0],endDate:Se.toISOString().split("T")[0]};case"last3Months":return{startDate:new Date($.getFullYear(),$.getMonth()-3,1).toISOString().split("T")[0],endDate:ee};default:const L=new Date($.getFullYear(),$.getMonth()-1,1),Y=new Date($.getFullYear(),$.getMonth(),0);return{startDate:L.toISOString().split("T")[0],endDate:Y.toISOString().split("T")[0]}}},I=se=>new Date(se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=j.reduce((se,$)=>{const ee=`${$.id}-${$.propertyId}`;return se.has(ee)||se.set(ee,$),se},new Map).values(),te=Array.from(H);console.log(`[INVOICE DEDUP] Removed ${j.length-te.length} duplicate invoices. Original: ${j.length}, Unique: ${te.length}`);const we=te.filter(se=>{const $=!C||se.propertyId===C;$||console.log(`[INVOICE FILTER] Filtering out invoice ${se.id} from property ${se.propertyId} (selected: ${C})`);const ee=se.guestName.toLowerCase().includes(a.toLowerCase())||se.propertyName.toLowerCase().includes(a.toLowerCase())||se.id.toLowerCase().includes(a.toLowerCase());return $&&ee});return console.log(`[INVOICE FILTER] Final result: ${we.length} invoices for property ${C}`),we.reduce((se,$)=>se+$.total,0),we.filter(se=>se.status==="paid").reduce((se,$)=>se+$.total,0),we.filter(se=>se.status==="pending").reduce((se,$)=>se+$.total,0),we.filter(se=>se.status==="overdue").reduce((se,$)=>se+$.total,0),y?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:e("invoices.loading")})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:e("invoices.title")}),t.jsx("p",{className:"text-lg text-gray-600",children:e("invoices.manageGuestInvoices")})]})})})}),t.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-4 pt-20",children:[t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:t.jsxs("button",{onClick:()=>d(!l),className:`px-4 py-2 rounded-lg font-semibold shadow-sm transition-all duration-300 flex items-center gap-1 border ${l?"bg-blue-500/20 text-gray-900 border-blue-200 hover:bg-blue-500/30":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:[t.jsx(_d,{className:"w-4 h-4 opacity-70"}),e("invoices.filters")]})}),l&&t.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-lg border border-gray-100/50 shadow-md",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("invoices.property")}),t.jsx(za,{selectedId:C,onChange:F,properties:P,className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("invoices.dateRange")}),t.jsxs("select",{value:u,onChange:se=>{h(se.target.value);const{startDate:$,endDate:ee}=E(se.target.value);M($),Q(ee)},className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",children:[t.jsx("option",{value:"lastMonth",children:e("invoices.lastMonth")}),t.jsx("option",{value:"last3Months",children:e("invoices.last3Months")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("invoices.fromDate")}),t.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",value:D,onChange:se=>M(se.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:e("invoices.toDate")}),t.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",value:U,onChange:se=>Q(se.target.value)})]})]}),t.jsx("div",{className:"flex items-center justify-end mt-8",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-white text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-300 font-semibold shadow-md",children:e("invoices.clearAll")}),t.jsx("button",{onClick:K,className:"px-4 py-2 bg-blue-500/20 text-gray-900 rounded-lg hover:bg-blue-500/30 transition-all duration-300 font-semibold shadow-sm hover:shadow-md border border-blue-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!C,children:e("invoices.applyFilters")})]})})]})]}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:we.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx(Cl,{className:"h-16 w-16 mx-auto text-gray-400 mb-6"}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:e("invoices.noInvoicesFound")}),t.jsx("p",{className:"text-lg text-gray-600 mb-6",children:e("invoices.noInvoicesAvailable")})]}):t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.invoice")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.guest")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.property")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.date")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.amount")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.status")}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:e("invoices.actions")})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:we.map((se,$)=>t.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center shadow-sm border border-blue-200",children:t.jsx(Cl,{className:"h-4 w-4 text-gray-900 opacity-70"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm group-hover:text-blue-600 transition-colors",children:se.id}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:se.closed?e("invoices.closed"):e("invoices.open")})]})]})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:se.guestName})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:re(se.propertyId||0)})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{className:"font-semibold text-gray-900",children:I(se.date)})]})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:"font-bold text-gray-900 text-sm",children:se.valueFormatted})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-bold shadow-md ${se.status==="paid"?"bg-green-100 text-green-800":se.status==="pending"?"bg-yellow-100 text-yellow-800":se.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:se.status})}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{onClick:()=>de(se),disabled:p===se.id,className:`p-2 rounded-lg transition-all duration-300 shadow-sm hover:shadow-md border border-blue-200 ${p===se.id?"bg-blue-500/40 text-gray-900 cursor-not-allowed":"bg-blue-500/20 text-gray-900 hover:bg-blue-500/30"}`,title:p===se.id?e("invoices.downloading"):e("invoices.downloadInvoice"),children:p===se.id?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}):t.jsx(Oo,{className:"w-4 h-4 opacity-70"})})})})]},`${se.id}-${se.propertyId}-${$}`))})]})})})]})]})};function Cr(e){"@babel/helpers - typeof";return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cr(e)}var gi=Uint8Array,Na=Uint16Array,X0=Int32Array,Z0=new gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eg=new gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ky=new gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E2=function(e,r){for(var n=new Na(31),a=0;a<31;++a)n[a]=r+=1<<e[a-1];for(var o=new X0(n[30]),a=1;a<30;++a)for(var l=n[a];l<n[a+1];++l)o[l]=l-n[a]<<5|a;return{b:n,r:o}},F2=E2(Z0,2),rS=F2.b,f0=F2.r;rS[28]=258,f0[258]=28;var nS=E2(eg,0),Sy=nS.r,m0=new Na(32768);for(var $r=0;$r<32768;++$r){var gl=($r&43690)>>1|($r&21845)<<1;gl=(gl&52428)>>2|(gl&13107)<<2,gl=(gl&61680)>>4|(gl&3855)<<4,m0[$r]=((gl&65280)>>8|(gl&255)<<8)>>1}var _u=(function(e,r,n){for(var a=e.length,o=0,l=new Na(r);o<a;++o)e[o]&&++l[e[o]-1];var d=new Na(r);for(o=1;o<r;++o)d[o]=d[o-1]+l[o-1]<<1;var u;if(n){u=new Na(1<<r);var h=15-r;for(o=0;o<a;++o)if(e[o])for(var p=o<<4|e[o],m=r-e[o],b=d[e[o]-1]++<<m,j=b|(1<<m)-1;b<=j;++b)u[m0[b]>>h]=p}else for(u=new Na(a),o=0;o<a;++o)e[o]&&(u[o]=m0[d[e[o]-1]++]>>15-e[o]);return u}),vc=new gi(288);for(var $r=0;$r<144;++$r)vc[$r]=8;for(var $r=144;$r<256;++$r)vc[$r]=9;for(var $r=256;$r<280;++$r)vc[$r]=7;for(var $r=280;$r<288;++$r)vc[$r]=8;var If=new gi(32);for(var $r=0;$r<32;++$r)If[$r]=5;var sS=_u(vc,9,0),aS=_u(If,5,0),I2=function(e){return(e+7)/8|0},iS=function(e,r,n){return(n==null||n>e.length)&&(n=e.length),new gi(e.subarray(r,n))},Co=function(e,r,n){n<<=r&7;var a=r/8|0;e[a]|=n,e[a+1]|=n>>8},xu=function(e,r,n){n<<=r&7;var a=r/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},bp=function(e,r){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var o=n.length,l=n.slice();if(!o)return{t:O2,l:0};if(o==1){var d=new gi(n[0].s+1);return d[n[0].s]=1,{t:d,l:1}}n.sort(function(U,Q){return U.f-Q.f}),n.push({s:-1,f:25001});var u=n[0],h=n[1],p=0,m=1,b=2;for(n[0]={s:-1,f:u.f+h.f,l:u,r:h};m!=o-1;)u=n[n[p].f<n[b].f?p++:b++],h=n[p!=m&&n[p].f<n[b].f?p++:b++],n[m++]={s:-1,f:u.f+h.f,l:u,r:h};for(var j=l[0].s,a=1;a<o;++a)l[a].s>j&&(j=l[a].s);var y=new Na(j+1),A=p0(n[m-1],y,0);if(A>r){var a=0,P=0,N=A-r,C=1<<N;for(l.sort(function(Q,J){return y[J.s]-y[Q.s]||Q.f-J.f});a<o;++a){var F=l[a].s;if(y[F]>r)P+=C-(1<<A-y[F]),y[F]=r;else break}for(P>>=N;P>0;){var D=l[a].s;y[D]<r?P-=1<<r-y[D]++-1:++a}for(;a>=0&&P;--a){var M=l[a].s;y[M]==r&&(--y[M],++P)}A=r}return{t:new gi(y),l:A}},p0=function(e,r,n){return e.s==-1?Math.max(p0(e.l,r,n+1),p0(e.r,r,n+1)):r[e.s]=n},Ay=function(e){for(var r=e.length;r&&!e[--r];);for(var n=new Na(++r),a=0,o=e[0],l=1,d=function(h){n[a++]=h},u=1;u<=r;++u)if(e[u]==o&&u!=r)++l;else{if(!o&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(o),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(o);l=1,o=e[u]}return{c:n.subarray(0,a),n:r}},yu=function(e,r){for(var n=0,a=0;a<r.length;++a)n+=e[a]*r[a];return n},T2=function(e,r,n){var a=n.length,o=I2(r+2);e[o]=a&255,e[o+1]=a>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var l=0;l<a;++l)e[o+l+4]=n[l];return(o+4+a)*8},Cy=function(e,r,n,a,o,l,d,u,h,p,m){Co(r,m++,n),++o[256];for(var b=bp(o,15),j=b.t,y=b.l,A=bp(l,15),P=A.t,N=A.l,C=Ay(j),F=C.c,D=C.n,M=Ay(P),U=M.c,Q=M.n,J=new Na(19),re=0;re<F.length;++re)++J[F[re]&31];for(var re=0;re<U.length;++re)++J[U[re]&31];for(var K=bp(J,7),de=K.t,E=K.l,I=19;I>4&&!de[ky[I-1]];--I);var H=p+5<<3,te=yu(o,vc)+yu(l,If)+d,we=yu(o,j)+yu(l,P)+d+14+3*I+yu(J,de)+2*J[16]+3*J[17]+7*J[18];if(h>=0&&H<=te&&H<=we)return T2(r,m,e.subarray(h,h+p));var se,$,ee,ge;if(Co(r,m,1+(we<te)),m+=2,we<te){se=_u(j,y,0),$=j,ee=_u(P,N,0),ge=P;var Se=_u(de,E,0);Co(r,m,D-257),Co(r,m+5,Q-1),Co(r,m+10,I-4),m+=14;for(var re=0;re<I;++re)Co(r,m+3*re,de[ky[re]]);m+=3*I;for(var T=[F,U],L=0;L<2;++L)for(var Y=T[L],re=0;re<Y.length;++re){var ne=Y[re]&31;Co(r,m,Se[ne]),m+=de[ne],ne>15&&(Co(r,m,Y[re]>>5&127),m+=Y[re]>>12)}}else se=sS,$=vc,ee=aS,ge=If;for(var re=0;re<u;++re){var ie=a[re];if(ie>255){var ne=ie>>18&31;xu(r,m,se[ne+257]),m+=$[ne+257],ne>7&&(Co(r,m,ie>>23&31),m+=Z0[ne]);var V=ie&31;xu(r,m,ee[V]),m+=ge[V],V>3&&(xu(r,m,ie>>5&8191),m+=eg[V])}else xu(r,m,se[ie]),m+=$[ie]}return xu(r,m,se[256]),m+$[256]},oS=new X0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),O2=new gi(0),lS=function(e,r,n,a,o,l){var d=l.z||e.length,u=new gi(a+d+5*(1+Math.ceil(d/7e3))+o),h=u.subarray(a,u.length-o),p=l.l,m=(l.r||0)&7;if(r){m&&(h[0]=l.r>>3);for(var b=oS[r-1],j=b>>13,y=b&8191,A=(1<<n)-1,P=l.p||new Na(32768),N=l.h||new Na(A+1),C=Math.ceil(n/3),F=2*C,D=function(Te){return(e[Te]^e[Te+1]<<C^e[Te+2]<<F)&A},M=new X0(25e3),U=new Na(288),Q=new Na(32),J=0,re=0,K=l.i||0,de=0,E=l.w||0,I=0;K+2<d;++K){var H=D(K),te=K&32767,we=N[H];if(P[te]=we,N[H]=te,E<=K){var se=d-K;if((J>7e3||de>24576)&&(se>423||!p)){m=Cy(e,h,0,M,U,Q,re,de,I,K-I,m),de=J=re=0,I=K;for(var $=0;$<286;++$)U[$]=0;for(var $=0;$<30;++$)Q[$]=0}var ee=2,ge=0,Se=y,T=te-we&32767;if(se>2&&H==D(K-T))for(var L=Math.min(j,se)-1,Y=Math.min(32767,K),ne=Math.min(258,se);T<=Y&&--Se&&te!=we;){if(e[K+ee]==e[K+ee-T]){for(var ie=0;ie<ne&&e[K+ie]==e[K+ie-T];++ie);if(ie>ee){if(ee=ie,ge=T,ie>L)break;for(var V=Math.min(T,ie-2),fe=0,$=0;$<V;++$){var he=K-T+$&32767,pe=P[he],Ce=he-pe&32767;Ce>fe&&(fe=Ce,we=he)}}}te=we,we=P[te],T+=te-we&32767}if(ge){M[de++]=268435456|f0[ee]<<18|Sy[ge];var ue=f0[ee]&31,Pe=Sy[ge]&31;re+=Z0[ue]+eg[Pe],++U[257+ue],++Q[Pe],E=K+ee,++J}else M[de++]=e[K],++U[e[K]]}}for(K=Math.max(K,E);K<d;++K)M[de++]=e[K],++U[e[K]];m=Cy(e,h,p,M,U,Q,re,de,I,K-I,m),p||(l.r=m&7|h[m/8|0]<<3,m-=7,l.h=N,l.p=P,l.i=K,l.w=E)}else{for(var K=l.w||0;K<d+p;K+=65535){var Ge=K+65535;Ge>=d&&(h[m/8|0]=p,Ge=d),m=T2(h,m+1,e.subarray(K,Ge))}l.i=d}return iS(u,0,a+I2(m)+o)},R2=function(){var e=1,r=0;return{p:function(n){for(var a=e,o=r,l=n.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)o+=a+=n[d];a=(a&65535)+15*(a>>16),o=(o&65535)+15*(o>>16)}e=a,r=o},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},cS=function(e,r,n,a,o){if(!o&&(o={l:1},r.dictionary)){var l=r.dictionary.subarray(-32768),d=new gi(l.length+e.length);d.set(l),d.set(e,l.length),e=d,o.w=l.length}return lS(e,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,n,a,o)},M2=function(e,r,n){for(;n;++r)e[r]=n,n>>>=8},dS=function(e,r){var n=r.level,a=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=a<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var o=R2();o.p(r.dictionary),M2(e,2,o.d())}};function g0(e,r){r||(r={});var n=R2();n.p(e);var a=cS(e,r,r.dictionary?6:2,4);return dS(a,r),M2(a,a.length-4,n.d()),a}var uS=typeof TextDecoder<"u"&&new TextDecoder,hS=0;try{uS.decode(O2,{stream:!0}),hS=1}catch{}function fS(e){if(Array.isArray(e))return e}function mS(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,o,l,d,u=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,r!==0)for(;!(h=(a=l.call(n)).done)&&(u.push(a.value),u.length!==r);h=!0);}catch(m){p=!0,o=m}finally{try{if(!h&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return u}}function Py(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=Array(r);n<r;n++)a[n]=e[n];return a}function pS(e,r){if(e){if(typeof e=="string")return Py(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Py(e,r):void 0}}function gS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _y(e,r){return fS(e)||mS(e,r)||pS(e,r)||gS()}function Dy(e,r="utf8"){return new TextDecoder(r).decode(e)}const xS=new TextEncoder;function yS(e){return xS.encode(e)}const bS=1024*8,vS=(()=>{const e=new Uint8Array(4),r=new Uint32Array(e.buffer);return!((r[0]=1)&e[0])})(),vp={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class tg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=bS,n={}){let a=!1;typeof r=="number"?r=new ArrayBuffer(r):(a=!0,this.lastWrittenByte=r.byteLength);const o=n.offset?n.offset>>>0:0,l=r.byteLength-o;let d=o;(ArrayBuffer.isView(r)||r instanceof tg)&&(r.byteLength!==r.buffer.byteLength&&(d=r.byteOffset+o),r=r.buffer),a?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=r,this.length=l,this.byteLength=l,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,l),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const a=(this.offset+r)*2,o=new Uint8Array(a);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,n){const a=vp[n].BYTES_PER_ELEMENT*r,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+a);if(this.littleEndian===vS&&n!=="uint8"&&n!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+a));u.reverse();const h=new vp[n](u.buffer);return this.offset+=a,h.reverse(),h}const d=new vp[n](l);return this.offset+=a,d}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let n="";for(let a=0;a<r;a++)n+=this.readChar();return n}readUtf8(r=1){return Dy(this.readBytes(r))}decodeText(r=1,n="utf8"){return Dy(this.readBytes(r),n)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let n=0;n<r.length;n++)this._data.setUint8(this.offset++,r[n]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let n=0;n<r.length;n++)this.writeUint8(r.charCodeAt(n));return this}writeUtf8(r){return this.writeBytes(yS(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Rd(e){let r=e.length;for(;--r>=0;)e[r]=0}const wS=3,NS=258,B2=29,jS=256,kS=jS+1+B2,U2=30,SS=512,AS=new Array((kS+2)*2);Rd(AS);const CS=new Array(U2*2);Rd(CS);const PS=new Array(SS);Rd(PS);const _S=new Array(NS-wS+1);Rd(_S);const DS=new Array(B2);Rd(DS);const LS=new Array(U2);Rd(LS);const ES=(e,r,n,a)=>{let o=e&65535|0,l=e>>>16&65535|0,d=0;for(;n!==0;){d=n>2e3?2e3:n,n-=d;do o=o+r[a++]|0,l=l+o|0;while(--d);o%=65521,l%=65521}return o|l<<16|0};var x0=ES;const FS=()=>{let e,r=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;r[n]=e}return r},IS=new Uint32Array(FS()),TS=(e,r,n,a)=>{const o=IS,l=a+n;e^=-1;for(let d=a;d<l;d++)e=e>>>8^o[(e^r[d])&255];return e^-1};var Mi=TS,y0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const OS=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var RS=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const a in n)OS(n,a)&&(e[a]=n[a])}}return e},MS=e=>{let r=0;for(let a=0,o=e.length;a<o;a++)r+=e[a].length;const n=new Uint8Array(r);for(let a=0,o=0,l=e.length;a<l;a++){let d=e[a];n.set(d,o),o+=d.length}return n},z2={assign:RS,flattenChunks:MS};let $2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$2=!1}const qu=new Uint8Array(256);for(let e=0;e<256;e++)qu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qu[254]=qu[254]=1;var BS=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,n,a,o,l,d=e.length,u=0;for(o=0;o<d;o++)n=e.charCodeAt(o),(n&64512)===55296&&o+1<d&&(a=e.charCodeAt(o+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),o++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(r=new Uint8Array(u),l=0,o=0;l<u;o++)n=e.charCodeAt(o),(n&64512)===55296&&o+1<d&&(a=e.charCodeAt(o+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),o++)),n<128?r[l++]=n:n<2048?(r[l++]=192|n>>>6,r[l++]=128|n&63):n<65536?(r[l++]=224|n>>>12,r[l++]=128|n>>>6&63,r[l++]=128|n&63):(r[l++]=240|n>>>18,r[l++]=128|n>>>12&63,r[l++]=128|n>>>6&63,r[l++]=128|n&63);return r};const US=(e,r)=>{if(r<65534&&e.subarray&&$2)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let a=0;a<r;a++)n+=String.fromCharCode(e[a]);return n};var qS=(e,r)=>{const n=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let a,o;const l=new Array(n*2);for(o=0,a=0;a<n;){let d=e[a++];if(d<128){l[o++]=d;continue}let u=qu[d];if(u>4){l[o++]=65533,a+=u-1;continue}for(d&=u===2?31:u===3?15:7;u>1&&a<n;)d=d<<6|e[a++]&63,u--;if(u>1){l[o++]=65533;continue}d<65536?l[o++]=d:(d-=65536,l[o++]=55296|d>>10&1023,l[o++]=56320|d&1023)}return US(l,o)},zS=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let n=r-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?r:n+qu[e[n]]>r?n:r},b0={string2buf:BS,buf2string:qS,utf8border:zS};function $S(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var VS=$S;const Vh=16209,HS=16191;var WS=function(r,n){let a,o,l,d,u,h,p,m,b,j,y,A,P,N,C,F,D,M,U,Q,J,re,K,de;const E=r.state;a=r.next_in,K=r.input,o=a+(r.avail_in-5),l=r.next_out,de=r.output,d=l-(n-r.avail_out),u=l+(r.avail_out-257),h=E.dmax,p=E.wsize,m=E.whave,b=E.wnext,j=E.window,y=E.hold,A=E.bits,P=E.lencode,N=E.distcode,C=(1<<E.lenbits)-1,F=(1<<E.distbits)-1;e:do{A<15&&(y+=K[a++]<<A,A+=8,y+=K[a++]<<A,A+=8),D=P[y&C];t:for(;;){if(M=D>>>24,y>>>=M,A-=M,M=D>>>16&255,M===0)de[l++]=D&65535;else if(M&16){U=D&65535,M&=15,M&&(A<M&&(y+=K[a++]<<A,A+=8),U+=y&(1<<M)-1,y>>>=M,A-=M),A<15&&(y+=K[a++]<<A,A+=8,y+=K[a++]<<A,A+=8),D=N[y&F];r:for(;;){if(M=D>>>24,y>>>=M,A-=M,M=D>>>16&255,M&16){if(Q=D&65535,M&=15,A<M&&(y+=K[a++]<<A,A+=8,A<M&&(y+=K[a++]<<A,A+=8)),Q+=y&(1<<M)-1,Q>h){r.msg="invalid distance too far back",E.mode=Vh;break e}if(y>>>=M,A-=M,M=l-d,Q>M){if(M=Q-M,M>m&&E.sane){r.msg="invalid distance too far back",E.mode=Vh;break e}if(J=0,re=j,b===0){if(J+=p-M,M<U){U-=M;do de[l++]=j[J++];while(--M);J=l-Q,re=de}}else if(b<M){if(J+=p+b-M,M-=b,M<U){U-=M;do de[l++]=j[J++];while(--M);if(J=0,b<U){M=b,U-=M;do de[l++]=j[J++];while(--M);J=l-Q,re=de}}}else if(J+=b-M,M<U){U-=M;do de[l++]=j[J++];while(--M);J=l-Q,re=de}for(;U>2;)de[l++]=re[J++],de[l++]=re[J++],de[l++]=re[J++],U-=3;U&&(de[l++]=re[J++],U>1&&(de[l++]=re[J++]))}else{J=l-Q;do de[l++]=de[J++],de[l++]=de[J++],de[l++]=de[J++],U-=3;while(U>2);U&&(de[l++]=de[J++],U>1&&(de[l++]=de[J++]))}}else if((M&64)===0){D=N[(D&65535)+(y&(1<<M)-1)];continue r}else{r.msg="invalid distance code",E.mode=Vh;break e}break}}else if((M&64)===0){D=P[(D&65535)+(y&(1<<M)-1)];continue t}else if(M&32){E.mode=HS;break e}else{r.msg="invalid literal/length code",E.mode=Vh;break e}break}}while(a<o&&l<u);U=A>>3,a-=U,A-=U<<3,y&=(1<<A)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<u?257+(u-l):257-(l-u),E.hold=y,E.bits=A};const hd=15,Ly=852,Ey=592,Fy=0,wp=1,Iy=2,GS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),KS=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),YS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),QS=(e,r,n,a,o,l,d,u)=>{const h=u.bits;let p=0,m=0,b=0,j=0,y=0,A=0,P=0,N=0,C=0,F=0,D,M,U,Q,J,re=null,K;const de=new Uint16Array(hd+1),E=new Uint16Array(hd+1);let I=null,H,te,we;for(p=0;p<=hd;p++)de[p]=0;for(m=0;m<a;m++)de[r[n+m]]++;for(y=h,j=hd;j>=1&&de[j]===0;j--);if(y>j&&(y=j),j===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<j&&de[b]===0;b++);for(y<b&&(y=b),N=1,p=1;p<=hd;p++)if(N<<=1,N-=de[p],N<0)return-1;if(N>0&&(e===Fy||j!==1))return-1;for(E[1]=0,p=1;p<hd;p++)E[p+1]=E[p]+de[p];for(m=0;m<a;m++)r[n+m]!==0&&(d[E[r[n+m]]++]=m);if(e===Fy?(re=I=d,K=20):e===wp?(re=GS,I=KS,K=257):(re=YS,I=JS,K=0),F=0,m=0,p=b,J=l,A=y,P=0,U=-1,C=1<<y,Q=C-1,e===wp&&C>Ly||e===Iy&&C>Ey)return 1;for(;;){H=p-P,d[m]+1<K?(te=0,we=d[m]):d[m]>=K?(te=I[d[m]-K],we=re[d[m]-K]):(te=96,we=0),D=1<<p-P,M=1<<A,b=M;do M-=D,o[J+(F>>P)+M]=H<<24|te<<16|we|0;while(M!==0);for(D=1<<p-1;F&D;)D>>=1;if(D!==0?(F&=D-1,F+=D):F=0,m++,--de[p]===0){if(p===j)break;p=r[n+d[m]]}if(p>y&&(F&Q)!==U){for(P===0&&(P=y),J+=b,A=p-P,N=1<<A;A+P<j&&(N-=de[A+P],!(N<=0));)A++,N<<=1;if(C+=1<<A,e===wp&&C>Ly||e===Iy&&C>Ey)return 1;U=F&Q,o[U]=y<<24|A<<16|J-l|0}}return F!==0&&(o[J+F]=p-P<<24|64<<16|0),u.bits=y,0};var Du=QS;const XS=0,V2=1,H2=2,{Z_FINISH:Ty,Z_BLOCK:ZS,Z_TREES:Hh,Z_OK:wc,Z_STREAM_END:e6,Z_NEED_DICT:t6,Z_STREAM_ERROR:$a,Z_DATA_ERROR:W2,Z_MEM_ERROR:G2,Z_BUF_ERROR:r6,Z_DEFLATED:Oy}=q2,am=16180,Ry=16181,My=16182,By=16183,Uy=16184,qy=16185,zy=16186,$y=16187,Vy=16188,Hy=16189,Tf=16190,Po=16191,Np=16192,Wy=16193,jp=16194,Gy=16195,Ky=16196,Yy=16197,Jy=16198,Wh=16199,Gh=16200,Qy=16201,Xy=16202,Zy=16203,e1=16204,t1=16205,kp=16206,r1=16207,n1=16208,Jr=16209,K2=16210,Y2=16211,n6=852,s6=592,a6=15,i6=a6,s1=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function o6(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kc=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<am||r.mode>Y2?1:0},J2=e=>{if(kc(e))return $a;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=am,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(n6),r.distcode=r.distdyn=new Int32Array(s6),r.sane=1,r.back=-1,wc},Q2=e=>{if(kc(e))return $a;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,J2(e)},X2=(e,r)=>{let n;if(kc(e))return $a;const a=e.state;return r<0?(n=0,r=-r):(n=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?$a:(a.window!==null&&a.wbits!==r&&(a.window=null),a.wrap=n,a.wbits=r,Q2(e))},Z2=(e,r)=>{if(!e)return $a;const n=new o6;e.state=n,n.strm=e,n.window=null,n.mode=am;const a=X2(e,r);return a!==wc&&(e.state=null),a},l6=e=>Z2(e,i6);let a1=!0,Sp,Ap;const c6=e=>{if(a1){Sp=new Int32Array(512),Ap=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Du(V2,e.lens,0,288,Sp,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Du(H2,e.lens,0,32,Ap,0,e.work,{bits:5}),a1=!1}e.lencode=Sp,e.lenbits=9,e.distcode=Ap,e.distbits=5},ev=(e,r,n,a)=>{let o;const l=e.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),a>=l.wsize?(l.window.set(r.subarray(n-l.wsize,n),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>a&&(o=a),l.window.set(r.subarray(n-a,n-a+o),l.wnext),a-=o,a?(l.window.set(r.subarray(n-a,n),0),l.wnext=a,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},d6=(e,r)=>{let n,a,o,l,d,u,h,p,m,b,j,y,A,P,N=0,C,F,D,M,U,Q,J,re;const K=new Uint8Array(4);let de,E;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kc(e)||!e.output||!e.input&&e.avail_in!==0)return $a;n=e.state,n.mode===Po&&(n.mode=Np),d=e.next_out,o=e.output,h=e.avail_out,l=e.next_in,a=e.input,u=e.avail_in,p=n.hold,m=n.bits,b=u,j=h,re=wc;e:for(;;)switch(n.mode){case am:if(n.wrap===0){n.mode=Np;break}for(;m<16;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(n.wrap&2&&p===35615){n.wbits===0&&(n.wbits=15),n.check=0,K[0]=p&255,K[1]=p>>>8&255,n.check=Mi(n.check,K,2,0),p=0,m=0,n.mode=Ry;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((p&255)<<8)+(p>>8))%31){e.msg="incorrect header check",n.mode=Jr;break}if((p&15)!==Oy){e.msg="unknown compression method",n.mode=Jr;break}if(p>>>=4,m-=4,J=(p&15)+8,n.wbits===0&&(n.wbits=J),J>15||J>n.wbits){e.msg="invalid window size",n.mode=Jr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=p&512?Hy:Po,p=0,m=0;break;case Ry:for(;m<16;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(n.flags=p,(n.flags&255)!==Oy){e.msg="unknown compression method",n.mode=Jr;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Jr;break}n.head&&(n.head.text=p>>8&1),n.flags&512&&n.wrap&4&&(K[0]=p&255,K[1]=p>>>8&255,n.check=Mi(n.check,K,2,0)),p=0,m=0,n.mode=My;case My:for(;m<32;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.head&&(n.head.time=p),n.flags&512&&n.wrap&4&&(K[0]=p&255,K[1]=p>>>8&255,K[2]=p>>>16&255,K[3]=p>>>24&255,n.check=Mi(n.check,K,4,0)),p=0,m=0,n.mode=By;case By:for(;m<16;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.head&&(n.head.xflags=p&255,n.head.os=p>>8),n.flags&512&&n.wrap&4&&(K[0]=p&255,K[1]=p>>>8&255,n.check=Mi(n.check,K,2,0)),p=0,m=0,n.mode=Uy;case Uy:if(n.flags&1024){for(;m<16;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.length=p,n.head&&(n.head.extra_len=p),n.flags&512&&n.wrap&4&&(K[0]=p&255,K[1]=p>>>8&255,n.check=Mi(n.check,K,2,0)),p=0,m=0}else n.head&&(n.head.extra=null);n.mode=qy;case qy:if(n.flags&1024&&(y=n.length,y>u&&(y=u),y&&(n.head&&(J=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(l,l+y),J)),n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,a,y,l)),u-=y,l+=y,n.length-=y),n.length))break e;n.length=0,n.mode=zy;case zy:if(n.flags&2048){if(u===0)break e;y=0;do J=a[l+y++],n.head&&J&&n.length<65536&&(n.head.name+=String.fromCharCode(J));while(J&&y<u);if(n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,a,y,l)),u-=y,l+=y,J)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=$y;case $y:if(n.flags&4096){if(u===0)break e;y=0;do J=a[l+y++],n.head&&J&&n.length<65536&&(n.head.comment+=String.fromCharCode(J));while(J&&y<u);if(n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,a,y,l)),u-=y,l+=y,J)break e}else n.head&&(n.head.comment=null);n.mode=Vy;case Vy:if(n.flags&512){for(;m<16;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(n.wrap&4&&p!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Jr;break}p=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Po;break;case Hy:for(;m<32;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}e.adler=n.check=s1(p),p=0,m=0,n.mode=Tf;case Tf:if(n.havedict===0)return e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=m,t6;e.adler=n.check=1,n.mode=Po;case Po:if(r===ZS||r===Hh)break e;case Np:if(n.last){p>>>=m&7,m-=m&7,n.mode=kp;break}for(;m<3;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}switch(n.last=p&1,p>>>=1,m-=1,p&3){case 0:n.mode=Wy;break;case 1:if(c6(n),n.mode=Wh,r===Hh){p>>>=2,m-=2;break e}break;case 2:n.mode=Ky;break;case 3:e.msg="invalid block type",n.mode=Jr}p>>>=2,m-=2;break;case Wy:for(p>>>=m&7,m-=m&7;m<32;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Jr;break}if(n.length=p&65535,p=0,m=0,n.mode=jp,r===Hh)break e;case jp:n.mode=Gy;case Gy:if(y=n.length,y){if(y>u&&(y=u),y>h&&(y=h),y===0)break e;o.set(a.subarray(l,l+y),d),u-=y,l+=y,h-=y,d+=y,n.length-=y;break}n.mode=Po;break;case Ky:for(;m<14;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(n.nlen=(p&31)+257,p>>>=5,m-=5,n.ndist=(p&31)+1,p>>>=5,m-=5,n.ncode=(p&15)+4,p>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Jr;break}n.have=0,n.mode=Yy;case Yy:for(;n.have<n.ncode;){for(;m<3;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.lens[I[n.have++]]=p&7,p>>>=3,m-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,de={bits:n.lenbits},re=Du(XS,n.lens,0,19,n.lencode,0,n.work,de),n.lenbits=de.bits,re){e.msg="invalid code lengths set",n.mode=Jr;break}n.have=0,n.mode=Jy;case Jy:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[p&(1<<n.lenbits)-1],C=N>>>24,F=N>>>16&255,D=N&65535,!(C<=m);){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(D<16)p>>>=C,m-=C,n.lens[n.have++]=D;else{if(D===16){for(E=C+2;m<E;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(p>>>=C,m-=C,n.have===0){e.msg="invalid bit length repeat",n.mode=Jr;break}J=n.lens[n.have-1],y=3+(p&3),p>>>=2,m-=2}else if(D===17){for(E=C+3;m<E;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}p>>>=C,m-=C,J=0,y=3+(p&7),p>>>=3,m-=3}else{for(E=C+7;m<E;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}p>>>=C,m-=C,J=0,y=11+(p&127),p>>>=7,m-=7}if(n.have+y>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Jr;break}for(;y--;)n.lens[n.have++]=J}}if(n.mode===Jr)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Jr;break}if(n.lenbits=9,de={bits:n.lenbits},re=Du(V2,n.lens,0,n.nlen,n.lencode,0,n.work,de),n.lenbits=de.bits,re){e.msg="invalid literal/lengths set",n.mode=Jr;break}if(n.distbits=6,n.distcode=n.distdyn,de={bits:n.distbits},re=Du(H2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,de),n.distbits=de.bits,re){e.msg="invalid distances set",n.mode=Jr;break}if(n.mode=Wh,r===Hh)break e;case Wh:n.mode=Gh;case Gh:if(u>=6&&h>=258){e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=m,WS(e,j),d=e.next_out,o=e.output,h=e.avail_out,l=e.next_in,a=e.input,u=e.avail_in,p=n.hold,m=n.bits,n.mode===Po&&(n.back=-1);break}for(n.back=0;N=n.lencode[p&(1<<n.lenbits)-1],C=N>>>24,F=N>>>16&255,D=N&65535,!(C<=m);){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(F&&(F&240)===0){for(M=C,U=F,Q=D;N=n.lencode[Q+((p&(1<<M+U)-1)>>M)],C=N>>>24,F=N>>>16&255,D=N&65535,!(M+C<=m);){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}p>>>=M,m-=M,n.back+=M}if(p>>>=C,m-=C,n.back+=C,n.length=D,F===0){n.mode=t1;break}if(F&32){n.back=-1,n.mode=Po;break}if(F&64){e.msg="invalid literal/length code",n.mode=Jr;break}n.extra=F&15,n.mode=Qy;case Qy:if(n.extra){for(E=n.extra;m<E;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Xy;case Xy:for(;N=n.distcode[p&(1<<n.distbits)-1],C=N>>>24,F=N>>>16&255,D=N&65535,!(C<=m);){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if((F&240)===0){for(M=C,U=F,Q=D;N=n.distcode[Q+((p&(1<<M+U)-1)>>M)],C=N>>>24,F=N>>>16&255,D=N&65535,!(M+C<=m);){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}p>>>=M,m-=M,n.back+=M}if(p>>>=C,m-=C,n.back+=C,F&64){e.msg="invalid distance code",n.mode=Jr;break}n.offset=D,n.extra=F&15,n.mode=Zy;case Zy:if(n.extra){for(E=n.extra;m<E;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Jr;break}n.mode=e1;case e1:if(h===0)break e;if(y=j-h,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Jr;break}y>n.wnext?(y-=n.wnext,A=n.wsize-y):A=n.wnext-y,y>n.length&&(y=n.length),P=n.window}else P=o,A=d-n.offset,y=n.length;y>h&&(y=h),h-=y,n.length-=y;do o[d++]=P[A++];while(--y);n.length===0&&(n.mode=Gh);break;case t1:if(h===0)break e;o[d++]=n.length,h--,n.mode=Gh;break;case kp:if(n.wrap){for(;m<32;){if(u===0)break e;u--,p|=a[l++]<<m,m+=8}if(j-=h,e.total_out+=j,n.total+=j,n.wrap&4&&j&&(e.adler=n.check=n.flags?Mi(n.check,o,j,d-j):x0(n.check,o,j,d-j)),j=h,n.wrap&4&&(n.flags?p:s1(p))!==n.check){e.msg="incorrect data check",n.mode=Jr;break}p=0,m=0}n.mode=r1;case r1:if(n.wrap&&n.flags){for(;m<32;){if(u===0)break e;u--,p+=a[l++]<<m,m+=8}if(n.wrap&4&&p!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Jr;break}p=0,m=0}n.mode=n1;case n1:re=e6;break e;case Jr:re=W2;break e;case K2:return G2;case Y2:default:return $a}return e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=u,n.hold=p,n.bits=m,(n.wsize||j!==e.avail_out&&n.mode<Jr&&(n.mode<kp||r!==Ty))&&ev(e,e.output,e.next_out,j-e.avail_out),b-=e.avail_in,j-=e.avail_out,e.total_in+=b,e.total_out+=j,n.total+=j,n.wrap&4&&j&&(e.adler=n.check=n.flags?Mi(n.check,o,j,e.next_out-j):x0(n.check,o,j,e.next_out-j)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Po?128:0)+(n.mode===Wh||n.mode===jp?256:0),(b===0&&j===0||r===Ty)&&re===wc&&(re=r6),re},u6=e=>{if(kc(e))return $a;let r=e.state;return r.window&&(r.window=null),e.state=null,wc},h6=(e,r)=>{if(kc(e))return $a;const n=e.state;return(n.wrap&2)===0?$a:(n.head=r,r.done=!1,wc)},f6=(e,r)=>{const n=r.length;let a,o,l;return kc(e)||(a=e.state,a.wrap!==0&&a.mode!==Tf)?$a:a.mode===Tf&&(o=1,o=x0(o,r,n,0),o!==a.check)?W2:(l=ev(e,r,n,n),l?(a.mode=K2,G2):(a.havedict=1,wc))};var m6=Q2,p6=X2,g6=J2,x6=l6,y6=Z2,b6=d6,v6=u6,w6=h6,N6=f6,j6="pako inflate (from Nodeca project)",_o={inflateReset:m6,inflateReset2:p6,inflateResetKeep:g6,inflateInit:x6,inflateInit2:y6,inflate:b6,inflateEnd:v6,inflateGetHeader:w6,inflateSetDictionary:N6,inflateInfo:j6};function k6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var S6=k6;const tv=Object.prototype.toString,{Z_NO_FLUSH:A6,Z_FINISH:C6,Z_OK:zu,Z_STREAM_END:Cp,Z_NEED_DICT:Pp,Z_STREAM_ERROR:P6,Z_DATA_ERROR:i1,Z_MEM_ERROR:_6}=q2;function eh(e){this.options=z2.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VS,this.strm.avail_out=0;let n=_o.inflateInit2(this.strm,r.windowBits);if(n!==zu)throw new Error(y0[n]);if(this.header=new S6,_o.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=b0.string2buf(r.dictionary):tv.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(n=_o.inflateSetDictionary(this.strm,r.dictionary),n!==zu)))throw new Error(y0[n])}eh.prototype.push=function(e,r){const n=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let l,d,u;if(this.ended)return!1;for(r===~~r?d=r:d=r===!0?C6:A6,tv.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),l=_o.inflate(n,d),l===Pp&&o&&(l=_o.inflateSetDictionary(n,o),l===zu?l=_o.inflate(n,d):l===i1&&(l=Pp));n.avail_in>0&&l===Cp&&n.state.wrap>0&&e[n.next_in]!==0;)_o.inflateReset(n),l=_o.inflate(n,d);switch(l){case P6:case i1:case Pp:case _6:return this.onEnd(l),this.ended=!0,!1}if(u=n.avail_out,n.next_out&&(n.avail_out===0||l===Cp))if(this.options.to==="string"){let h=b0.utf8border(n.output,n.next_out),p=n.next_out-h,m=b0.buf2string(n.output,h);n.next_out=p,n.avail_out=a-p,p&&n.output.set(n.output.subarray(h,h+p),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(l===zu&&u===0)){if(l===Cp)return l=_o.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};eh.prototype.onData=function(e){this.chunks.push(e)};eh.prototype.onEnd=function(e){e===zu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z2.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function D6(e,r){const n=new eh(r);if(n.push(e),n.err)throw n.msg||y0[n.err];return n.result}var L6=eh,E6=D6,F6={Inflate:L6,inflate:E6};const{Inflate:I6,inflate:T6}=F6;var o1=I6,O6=T6;const rv=[];for(let e=0;e<256;e++){let r=e;for(let n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;rv[e]=r}const l1=4294967295;function R6(e,r,n){let a=e;for(let o=0;o<n;o++)a=rv[(a^r[o])&255]^a>>>8;return a}function M6(e,r){return(R6(l1,e,r)^l1)>>>0}function c1(e,r,n){const a=e.readUint32(),o=M6(new Uint8Array(e.buffer,e.byteOffset+e.offset-r-4,r),r);if(o!==a)throw new Error(`CRC mismatch for chunk ${n}. Expected ${a}, found ${o}`)}function nv(e,r,n){for(let a=0;a<n;a++)r[a]=e[a]}function sv(e,r,n,a){let o=0;for(;o<a;o++)r[o]=e[o];for(;o<n;o++)r[o]=e[o]+r[o-a]&255}function av(e,r,n,a){let o=0;if(n.length===0)for(;o<a;o++)r[o]=e[o];else for(;o<a;o++)r[o]=e[o]+n[o]&255}function iv(e,r,n,a,o){let l=0;if(n.length===0){for(;l<o;l++)r[l]=e[l];for(;l<a;l++)r[l]=e[l]+(r[l-o]>>1)&255}else{for(;l<o;l++)r[l]=e[l]+(n[l]>>1)&255;for(;l<a;l++)r[l]=e[l]+(r[l-o]+n[l]>>1)&255}}function ov(e,r,n,a,o){let l=0;if(n.length===0){for(;l<o;l++)r[l]=e[l];for(;l<a;l++)r[l]=e[l]+r[l-o]&255}else{for(;l<o;l++)r[l]=e[l]+n[l]&255;for(;l<a;l++)r[l]=e[l]+B6(r[l-o],n[l],n[l-o])&255}}function B6(e,r,n){const a=e+r-n,o=Math.abs(a-e),l=Math.abs(a-r),d=Math.abs(a-n);return o<=l&&o<=d?e:l<=d?r:n}function U6(e,r,n,a,o,l){switch(e){case 0:nv(r,n,o);break;case 1:sv(r,n,o,l);break;case 2:av(r,n,a,o);break;case 3:iv(r,n,a,o,l);break;case 4:ov(r,n,a,o,l);break;default:throw new Error(`Unsupported filter: ${e}`)}}const q6=new Uint16Array([255]),z6=new Uint8Array(q6.buffer),$6=z6[0]===255;function V6(e){const{data:r,width:n,height:a,channels:o,depth:l}=e,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(l/8)*o,h=new Uint8Array(a*n*u);let p=0;for(let m=0;m<7;m++){const b=d[m],j=Math.ceil((n-b.x)/b.xStep),y=Math.ceil((a-b.y)/b.yStep);if(j<=0||y<=0)continue;const A=j*u,P=new Uint8Array(A);for(let N=0;N<y;N++){const C=r[p++],F=r.subarray(p,p+A);p+=A;const D=new Uint8Array(A);U6(C,F,D,P,A,u),P.set(D);for(let M=0;M<j;M++){const U=b.x+M*b.xStep,Q=b.y+N*b.yStep;if(!(U>=n||Q>=a))for(let J=0;J<u;J++)h[(Q*n+U)*u+J]=D[M*u+J]}}}if(l===16){const m=new Uint16Array(h.buffer);if($6)for(let b=0;b<m.length;b++)m[b]=H6(m[b]);return m}else return h}function H6(e){return(e&255)<<8|e>>8&255}const W6=new Uint16Array([255]),G6=new Uint8Array(W6.buffer),K6=G6[0]===255,Y6=new Uint8Array(0);function d1(e){const{data:r,width:n,height:a,channels:o,depth:l}=e,d=Math.ceil(l/8)*o,u=Math.ceil(l/8*o*n),h=new Uint8Array(a*u);let p=Y6,m=0,b,j;for(let y=0;y<a;y++){switch(b=r.subarray(m+1,m+1+u),j=h.subarray(y*u,(y+1)*u),r[m]){case 0:nv(b,j,u);break;case 1:sv(b,j,u,d);break;case 2:av(b,j,p,u);break;case 3:iv(b,j,p,u,d);break;case 4:ov(b,j,p,u,d);break;default:throw new Error(`Unsupported filter: ${r[m]}`)}p=j,m+=u+1}if(l===16){const y=new Uint16Array(h.buffer);if(K6)for(let A=0;A<y.length;A++)y[A]=J6(y[A]);return y}else return h}function J6(e){return(e&255)<<8|e>>8&255}const mf=Uint8Array.of(137,80,78,71,13,10,26,10);function u1(e){if(!Q6(e.readBytes(mf.length)))throw new Error("wrong PNG signature")}function Q6(e){if(e.length<mf.length)return!1;for(let r=0;r<mf.length;r++)if(e[r]!==mf[r])return!1;return!0}const X6="tEXt",Z6=0,lv=new TextDecoder("latin1");function eA(e){if(rA(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const tA=/^[\u0000-\u00FF]*$/;function rA(e){if(!tA.test(e))throw new Error("invalid latin1 text")}function nA(e,r,n){const a=cv(r);e[a]=sA(r,n-a.length-1)}function cv(e){for(e.mark();e.readByte()!==Z6;);const r=e.offset;e.reset();const n=lv.decode(e.readBytes(r-e.offset-1));return e.skip(1),eA(n),n}function sA(e,r){return lv.decode(e.readBytes(r))}const va={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},_p={UNKNOWN:-1,DEFLATE:0},h1={UNKNOWN:-1,ADAPTIVE:0},Dp={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Kh={NONE:0,BACKGROUND:1,PREVIOUS:2},Lp={SOURCE:0,OVER:1};class aA extends tg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,n={}){super(r);const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new o1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=_p.UNKNOWN,this._filterMethod=h1.UNKNOWN,this._interlaceMethod=Dp.UNKNOWN,this._colorType=va.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(u1(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(u1(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case X6:nA(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?c1(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?c1(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=iA(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case va.GREYSCALE:a=1;break;case va.TRUECOLOUR:a=3;break;case va.INDEXED_COLOUR:a=1;break;case va.GREYSCALE_ALPHA:a=2;break;case va.TRUECOLOUR_ALPHA:a=4;break;case va.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==_p.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<n;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case va.GREYSCALE:case va.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case va.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case va.UNKNOWN:case va.GREYSCALE_ALPHA:case va.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=cv(this),a=this.readUint8();if(a!==_p.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:O6(o)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=d1({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const o=this._apng.frames.at(r-1);this.disposeFrame(a,o,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case Kh.NONE:break;case Kh.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const d=(o*r.width+l)*this._png.channels;for(let u=0;u<this._png.channels;u++)a.data[d+u]=0}break;case Kh.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,o=(l,d)=>{const u=((l+n.yOffset)*this._png.width+n.xOffset+d)*this._png.channels,h=(l*n.width+d)*this._png.channels;return{index:u,frameIndex:h}};switch(n.blendOp){case Lp.SOURCE:for(let l=0;l<n.height;l++)for(let d=0;d<n.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let p=0;p<this._png.channels;p++)r.data[u+p]=n.data[h+p]}break;case Lp.OVER:for(let l=0;l<n.height;l++)for(let d=0;d<n.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let p=0;p<this._png.channels;p++){const m=n.data[h+this._png.channels-1]/a,b=p%(this._png.channels-1)===0?1:n.data[h+p],j=Math.floor(m*b+(1-m)*r.data[u+p]);r.data[u+p]+=j}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==h1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Dp.NO_INTERLACE)this._png.data=d1({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Dp.ADAM7)this._png.data=V6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Kh.NONE,blendOp:Lp.SOURCE,data:r}),this._inflator=new o1,this._writingDataChunks=!1}}function iA(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var f1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(f1||(f1={}));function oA(e,r){return new aA(e,r).decode()}var Vt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ep(){Vt.console&&typeof Vt.console.log=="function"&&Vt.console.log.apply(Vt.console,arguments)}var Ir={log:Ep,warn:function(e){Vt.console&&(typeof Vt.console.warn=="function"?Vt.console.warn.apply(Vt.console,arguments):Ep.call(null,arguments))},error:function(e){Vt.console&&(typeof Vt.console.error=="function"?Vt.console.error.apply(Vt.console,arguments):Ep(e))}};function Fp(e,r,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){oc(a.response,r,n)},a.onerror=function(){Ir.error("could not download file")},a.send()}function m1(e){var r=new XMLHttpRequest;r.open("HEAD",e,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function Yh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}var oc=Vt.saveAs||((typeof window>"u"?"undefined":Cr(window))!=="object"||window!==Vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,r,n){var a=Vt.URL||Vt.webkitURL,o=document.createElement("a");r=r||e.name||"download",o.download=r,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?m1(o.href)?Fp(e,r,n):Yh(o,o.target="_blank"):Yh(o)):(o.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){Yh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,r,n){if(r=r||e.name||"download",typeof e=="string")if(m1(e))Fp(e,r,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){Yh(a)})}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:Cr(l)!=="object"&&(Ir.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(e,n),r)}:function(e,r,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return Fp(e,r,n);var o=e.type==="application/octet-stream",l=/constructor/i.test(Vt.HTMLElement)||Vt.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l)&&(typeof FileReader>"u"?"undefined":Cr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=d?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=m:location=m,a=null},u.readAsDataURL(e)}else{var h=Vt.URL||Vt.webkitURL,p=h.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout(function(){h.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function dv(e){var r;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<n.length;a++){var o=n[a].re,l=n[a].process,d=o.exec(e);d&&(r=l(d),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),"#"+u+h+p}}var pf=Vt.atob.bind(Vt),p1=Vt.btoa.bind(Vt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ip(e,r){var n=e[0],a=e[1],o=e[2],l=e[3];n=_s(n,a,o,l,r[0],7,-680876936),l=_s(l,n,a,o,r[1],12,-389564586),o=_s(o,l,n,a,r[2],17,606105819),a=_s(a,o,l,n,r[3],22,-1044525330),n=_s(n,a,o,l,r[4],7,-176418897),l=_s(l,n,a,o,r[5],12,1200080426),o=_s(o,l,n,a,r[6],17,-1473231341),a=_s(a,o,l,n,r[7],22,-45705983),n=_s(n,a,o,l,r[8],7,1770035416),l=_s(l,n,a,o,r[9],12,-1958414417),o=_s(o,l,n,a,r[10],17,-42063),a=_s(a,o,l,n,r[11],22,-1990404162),n=_s(n,a,o,l,r[12],7,1804603682),l=_s(l,n,a,o,r[13],12,-40341101),o=_s(o,l,n,a,r[14],17,-1502002290),n=Ds(n,a=_s(a,o,l,n,r[15],22,1236535329),o,l,r[1],5,-165796510),l=Ds(l,n,a,o,r[6],9,-1069501632),o=Ds(o,l,n,a,r[11],14,643717713),a=Ds(a,o,l,n,r[0],20,-373897302),n=Ds(n,a,o,l,r[5],5,-701558691),l=Ds(l,n,a,o,r[10],9,38016083),o=Ds(o,l,n,a,r[15],14,-660478335),a=Ds(a,o,l,n,r[4],20,-405537848),n=Ds(n,a,o,l,r[9],5,568446438),l=Ds(l,n,a,o,r[14],9,-1019803690),o=Ds(o,l,n,a,r[3],14,-187363961),a=Ds(a,o,l,n,r[8],20,1163531501),n=Ds(n,a,o,l,r[13],5,-1444681467),l=Ds(l,n,a,o,r[2],9,-51403784),o=Ds(o,l,n,a,r[7],14,1735328473),n=Ls(n,a=Ds(a,o,l,n,r[12],20,-1926607734),o,l,r[5],4,-378558),l=Ls(l,n,a,o,r[8],11,-2022574463),o=Ls(o,l,n,a,r[11],16,1839030562),a=Ls(a,o,l,n,r[14],23,-35309556),n=Ls(n,a,o,l,r[1],4,-1530992060),l=Ls(l,n,a,o,r[4],11,1272893353),o=Ls(o,l,n,a,r[7],16,-155497632),a=Ls(a,o,l,n,r[10],23,-1094730640),n=Ls(n,a,o,l,r[13],4,681279174),l=Ls(l,n,a,o,r[0],11,-358537222),o=Ls(o,l,n,a,r[3],16,-722521979),a=Ls(a,o,l,n,r[6],23,76029189),n=Ls(n,a,o,l,r[9],4,-640364487),l=Ls(l,n,a,o,r[12],11,-421815835),o=Ls(o,l,n,a,r[15],16,530742520),n=Es(n,a=Ls(a,o,l,n,r[2],23,-995338651),o,l,r[0],6,-198630844),l=Es(l,n,a,o,r[7],10,1126891415),o=Es(o,l,n,a,r[14],15,-1416354905),a=Es(a,o,l,n,r[5],21,-57434055),n=Es(n,a,o,l,r[12],6,1700485571),l=Es(l,n,a,o,r[3],10,-1894986606),o=Es(o,l,n,a,r[10],15,-1051523),a=Es(a,o,l,n,r[1],21,-2054922799),n=Es(n,a,o,l,r[8],6,1873313359),l=Es(l,n,a,o,r[15],10,-30611744),o=Es(o,l,n,a,r[6],15,-1560198380),a=Es(a,o,l,n,r[13],21,1309151649),n=Es(n,a,o,l,r[4],6,-145523070),l=Es(l,n,a,o,r[11],10,-1120210379),o=Es(o,l,n,a,r[2],15,718787259),a=Es(a,o,l,n,r[9],21,-343485551),e[0]=Nl(n,e[0]),e[1]=Nl(a,e[1]),e[2]=Nl(o,e[2]),e[3]=Nl(l,e[3])}function im(e,r,n,a,o,l){return r=Nl(Nl(r,e),Nl(a,l)),Nl(r<<o|r>>>32-o,n)}function _s(e,r,n,a,o,l,d){return im(r&n|~r&a,e,r,o,l,d)}function Ds(e,r,n,a,o,l,d){return im(r&a|n&~a,e,r,o,l,d)}function Ls(e,r,n,a,o,l,d){return im(r^n^a,e,r,o,l,d)}function Es(e,r,n,a,o,l,d){return im(n^(r|~a),e,r,o,l,d)}function uv(e){var r,n=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=e.length;r+=64)Ip(a,lA(e.substring(r-64,r)));e=e.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)o[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(Ip(a,o),r=0;r<16;r++)o[r]=0;return o[14]=8*n,Ip(a,o),a}function lA(e){var r,n=[];for(r=0;r<64;r+=4)n[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return n}var g1="0123456789abcdef".split("");function cA(e){for(var r="",n=0;n<4;n++)r+=g1[e>>8*n+4&15]+g1[e>>8*n&15];return r}function dA(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function v0(e){return uv(e).map(dA).join("")}var uA=(function(e){for(var r=0;r<e.length;r++)e[r]=cA(e[r]);return e.join("")})(uv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nl(e,r){if(uA){var n=(65535&e)+(65535&r);return(e>>16)+(r>>16)+(n>>16)<<16|65535&n}return e+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function w0(e,r){var n,a,o,l;if(e!==n){for(var d=(o=e,l=1+(256/e.length|0),new Array(l+1).join(o)),u=[],h=0;h<256;h++)u[h]=h;var p=0;for(h=0;h<256;h++){var m=u[h];p=(p+m+d.charCodeAt(h))%256,u[h]=u[p],u[p]=m}n=e,a=u}else u=a;var b=r.length,j=0,y=0,A="";for(h=0;h<b;h++)y=(y+(m=u[j=(j+1)%256]))%256,u[j]=u[y],u[y]=m,d=u[(u[j]+u[y])%256],A+=String.fromCharCode(r.charCodeAt(h)^d);return A}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var x1={print:4,modify:8,copy:16,"annot-forms":32};function gd(e,r,n,a){this.v=1,this.r=2;var o=192;e.forEach(function(u){if(x1.perm!==void 0)throw new Error("Invalid permission: "+u);o+=x1[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(r+this.padding).substr(0,32),d=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^o)),this.encryptionKey=v0(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=w0(this.encryptionKey,this.padding)}function xd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var r="",n=e.length,a=0;a<n;a++){var o=e.charCodeAt(a);r+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):e[a]}return r}function y1(e){if(Cr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(n,a,o){if(o=o||!1,typeof n!="string"||typeof a!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(n)||(r[n]={});var l=Math.random().toString(35);return r[n][l]=[a,!!o],l},this.unsubscribe=function(n){for(var a in r)if(r[a][n])return delete r[a][n],Object.keys(r[a]).length===0&&delete r[a],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var a=Array.prototype.slice.call(arguments,1),o=[];for(var l in r[n]){var d=r[n][l];try{d[0].apply(e,a)}catch(u){Vt.console&&Ir.error("jsPDF PubSub Error",u.message,u)}d[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Of(e){if(!(this instanceof Of))return new Of(e);var r="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&r.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function hv(e,r){this.gState=e,this.matrix=r,this.id="",this.objectNumber=-1}function lc(e,r,n,a,o){if(!(this instanceof lc))return new lc(e,r,n,a,o);this.type=e==="axial"?2:3,this.coords=r,this.colors=n,hv.call(this,a,o)}function yd(e,r,n,a,o){if(!(this instanceof yd))return new yd(e,r,n,a,o);this.boundingBox=e,this.xStep=r,this.yStep=n,this.stream="",this.cloneIndex=0,hv.call(this,a,o)}function Et(e){var r,n=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],o=arguments[2],l=arguments[3],d=[],u=1,h=16,p="S",m=null;Cr(e=e||{})==="object"&&(n=e.orientation,a=e.unit||a,o=e.format||o,l=e.compress||e.compressPdf||l,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(r=e.precision),e.floatPrecision!==void 0&&(h=e.floatPrecision),p=e.defaultPathOperation||"S"),d=e.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",n=(""+(n||"P")).toLowerCase();var b=e.putOnlyUsedFonts||!1,j={},y={internal:{},__private__:{}};y.__private__.PubSub=y1;var A="1.3",P=y.__private__.getPdfVersion=function(){return A};y.__private__.setPdfVersion=function(w){A=w};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return N};var C=y.__private__.getPageFormat=function(w){return N[w]};o=o||"a4";var F="compat",D="advanced",M=F;function U(){this.saveGraphicsState(),W(new ht(Pt,0,0,-Pt,0,Gn()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),p="n",M=D}function Q(){this.restoreGraphicsState(),p="S",M=F}var J=y.__private__.combineFontStyleAndFontWeight=function(w,R){if(w=="bold"&&R=="normal"||w=="bold"&&R==400||w=="normal"&&R=="italic"||w=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(w=R==400||R==="normal"?w==="italic"?"italic":"normal":R!=700&&R!=="bold"||w!=="normal"?(R==700?"bold":R)+""+w:"bold"),w};y.advancedAPI=function(w){var R=M===F;return R&&U.call(this),typeof w!="function"||(w(this),R&&Q.call(this)),this},y.compatAPI=function(w){var R=M===D;return R&&Q.call(this),typeof w!="function"||(w(this),R&&U.call(this)),this},y.isAdvancedAPI=function(){return M===D};var re,K=function(w){if(M!==D)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},de=y.roundToPrecision=y.__private__.roundToPrecision=function(w,R){var ce=r||R;if(isNaN(w)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ce).replace(/0+$/,"")};re=y.hpf=y.__private__.hpf=typeof h=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,h)}:h==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,16)};var E=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return de(w,2)},I=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return de(w,3)},H=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return M===F?w*Pt:M===D?w:void 0},te=function(w){return H((function(R){return M===F?Gn()-R:M===D?R:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(r=parseInt(w,10))};var we,se="00000000000000000000000000000000",$=y.__private__.getFileId=function(){return se},ee=y.__private__.setFileId=function(w){return se=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Xr=new gd(m.userPermissions,m.userPassword,m.ownerPassword,se)),se};y.setFileId=function(w){return ee(w),this},y.getFileId=function(){return $()};var ge=y.__private__.convertDateToPDFDate=function(w){var R=w.getTimezoneOffset(),ce=R<0?"+":"-",ye=Math.floor(Math.abs(R/60)),Ae=Math.abs(R%60),Ve=[ce,ne(ye),"'",ne(Ae),"'"].join("");return["D:",w.getFullYear(),ne(w.getMonth()+1),ne(w.getDate()),ne(w.getHours()),ne(w.getMinutes()),ne(w.getSeconds()),Ve].join("")},Se=y.__private__.convertPDFDateToDate=function(w){var R=parseInt(w.substr(2,4),10),ce=parseInt(w.substr(6,2),10)-1,ye=parseInt(w.substr(8,2),10),Ae=parseInt(w.substr(10,2),10),Ve=parseInt(w.substr(12,2),10),Qe=parseInt(w.substr(14,2),10);return new Date(R,ce,ye,Ae,Ve,Qe,0)},T=y.__private__.setCreationDate=function(w){var R;if(w===void 0&&(w=new Date),w instanceof Date)R=ge(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=w}return we=R},L=y.__private__.getCreationDate=function(w){var R=we;return w==="jsDate"&&(R=Se(we)),R};y.setCreationDate=function(w){return T(w),this},y.getCreationDate=function(w){return L(w)};var Y,ne=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},ie=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},V=0,fe=[],he=[],pe=0,Ce=[],ue=[],Pe=!1,Ge=he;y.__private__.setCustomOutputDestination=function(w){Pe=!0,Ge=w};var Te=function(w){Pe||(Ge=w)};y.__private__.resetCustomOutputDestination=function(){Pe=!1,Ge=he};var W=y.__private__.out=function(w){return w=w.toString(),pe+=w.length+1,Ge.push(w),Ge},He=y.__private__.write=function(w){return W(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},je=y.__private__.getArrayBuffer=function(w){for(var R=w.length,ce=new ArrayBuffer(R),ye=new Uint8Array(ce);R--;)ye[R]=w.charCodeAt(R);return ce},Ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Ze};var $e=e.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return $e=M===D?w/Pt:w,this};var le,xe=y.__private__.getFontSize=y.getFontSize=function(){return M===F?$e:$e*Pt},De=e.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return De=w,this},y.__private__.getR2L=y.getR2L=function(){return De};var ze,Ye=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))le=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');le=w}else le=parseInt(w,10)};y.__private__.getZoomMode=function(){return le};var Ue,Xe=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');ze=w};y.__private__.getPageMode=function(){return ze};var wt=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ue=w};y.__private__.getLayoutMode=function(){return Ue},y.__private__.setDisplayMode=y.setDisplayMode=function(w,R,ce){return Ye(w),wt(R),Xe(ce),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[w]},y.__private__.getDocumentProperties=function(){return ot},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var R in ot)ot.hasOwnProperty(R)&&w[R]&&(ot[R]=w[R]);return this},y.__private__.setDocumentProperty=function(w,R){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[w]=R};var dt,Pt,ut,mr,Xt,ct={},Mt={},Zt=[],Lt={},Kt={},qt={},Je={},it=null,lt=0,at=[],kt=new y1(y),Dt=e.hotfixes||[],Bt={},wr={},It=[],ht=function w(R,ce,ye,Ae,Ve,Qe){if(!(this instanceof w))return new w(R,ce,ye,Ae,Ve,Qe);isNaN(R)&&(R=1),isNaN(ce)&&(ce=0),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=1),isNaN(Ve)&&(Ve=0),isNaN(Qe)&&(Qe=0),this._matrix=[R,ce,ye,Ae,Ve,Qe]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(re).join(w)},ht.prototype.multiply=function(w){var R=w.sx*this.sx+w.shy*this.shx,ce=w.sx*this.shy+w.shy*this.sy,ye=w.shx*this.sx+w.sy*this.shx,Ae=w.shx*this.shy+w.sy*this.sy,Ve=w.tx*this.sx+w.ty*this.shx+this.tx,Qe=w.tx*this.shy+w.ty*this.sy+this.ty;return new ht(R,ce,ye,Ae,Ve,Qe)},ht.prototype.decompose=function(){var w=this.sx,R=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Ve=this.ty,Qe=Math.sqrt(w*w+R*R),xt=(w/=Qe)*ce+(R/=Qe)*ye;ce-=w*xt,ye-=R*xt;var bt=Math.sqrt(ce*ce+ye*ye);return xt/=bt,w*(ye/=bt)<R*(ce/=bt)&&(w=-w,R=-R,xt=-xt,Qe=-Qe),{scale:new ht(Qe,0,0,bt,0,0),translate:new ht(1,0,0,1,Ae,Ve),rotate:new ht(w,R,-R,w,0,0),skew:new ht(1,0,xt,1,0,0)}},ht.prototype.toString=function(w){return this.join(" ")},ht.prototype.inversed=function(){var w=this.sx,R=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Ve=this.ty,Qe=1/(w*ye-R*ce),xt=ye*Qe,bt=-R*Qe,Tt=-ce*Qe,Wt=w*Qe;return new ht(xt,bt,Tt,Wt,-xt*Ae-Tt*Ve,-bt*Ae-Wt*Ve)},ht.prototype.applyToPoint=function(w){var R=w.x*this.sx+w.y*this.shx+this.tx,ce=w.x*this.shy+w.y*this.sy+this.ty;return new Da(R,ce)},ht.prototype.applyToRectangle=function(w){var R=this.applyToPoint(w),ce=this.applyToPoint(new Da(w.x+w.w,w.y+w.h));return new oo(R.x,R.y,ce.x-R.x,ce.y-R.y)},ht.prototype.clone=function(){var w=this.sx,R=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Ve=this.ty;return new ht(w,R,ce,ye,Ae,Ve)},y.Matrix=ht;var cr=y.matrixMult=function(w,R){return R.multiply(w)},Lr=new ht(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Lr;var Or=function(w,R){if(!Kt[w]){var ce=(R instanceof lc?"Sh":"P")+(Object.keys(Lt).length+1).toString(10);R.id=ce,Kt[w]=ce,Lt[ce]=R,kt.publish("addPattern",R)}};y.ShadingPattern=lc,y.TilingPattern=yd,y.addShadingPattern=function(w,R){return K("addShadingPattern()"),Or(w,R),this},y.beginTilingPattern=function(w){K("beginTilingPattern()"),Ys(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,R){K("endTilingPattern()"),R.stream=ue[Y].join(`
`),Or(w,R),kt.publish("endTilingPattern",R),It.pop().restore()};var Mn,ar=y.__private__.newObject=function(){var w=Nr();return tr(w,!0),w},Nr=y.__private__.newObjectDeferred=function(){return V++,fe[V]=function(){return pe},V},tr=function(w,R){return R=typeof R=="boolean"&&R,fe[w]=pe,R&&W(w+" 0 obj"),w},Bn=y.__private__.newAdditionalObject=function(){var w={objId:Nr(),content:""};return Ce.push(w),w},bn=Nr(),yr=Nr(),ns=y.__private__.decodeColorString=function(w){var R=w.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length!==5||R[4]!=="k"&&R[4]!=="K"||(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var ce=parseFloat(R[0]);R=[ce,ce,ce,"r"]}for(var ye="#",Ae=0;Ae<3;Ae++)ye+=("0"+Math.floor(255*parseFloat(R[Ae])).toString(16)).slice(-2);return ye},Hr=y.__private__.encodeColorString=function(w){var R;typeof w=="string"&&(w={ch1:w});var ce=w.ch1,ye=w.ch2,Ae=w.ch3,Ve=w.ch4,Qe=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var xt=new dv(ce);if(xt.ok)ce=xt.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var bt=parseInt(ce.substr(1),16);ce=bt>>16&255,ye=bt>>8&255,Ae=255&bt}if(ye===void 0||Ve===void 0&&ce===ye&&ye===Ae)R=typeof ce=="string"?ce+" "+Qe[0]:w.precision===2?E(ce/255)+" "+Qe[0]:I(ce/255)+" "+Qe[0];else if(Ve===void 0||Cr(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return["1.","1.","1.",Qe[1]].join(" ");R=typeof ce=="string"?[ce,ye,Ae,Qe[1]].join(" "):w.precision===2?[E(ce/255),E(ye/255),E(Ae/255),Qe[1]].join(" "):[I(ce/255),I(ye/255),I(Ae/255),Qe[1]].join(" ")}else R=typeof ce=="string"?[ce,ye,Ae,Ve,Qe[2]].join(" "):w.precision===2?[E(ce),E(ye),E(Ae),E(Ve),Qe[2]].join(" "):[I(ce),I(ye),I(Ae),I(Ve),Qe[2]].join(" ");return R},Un=y.__private__.getFilters=function(){return d},ln=y.__private__.putStream=function(w){var R=(w=w||{}).data||"",ce=w.filters||Un(),ye=w.alreadyAppliedFilters||[],Ae=w.addLength1||!1,Ve=R.length,Qe=w.objectId,xt=function(vn){return vn};if(m!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(xt=Xr.encryptor(Qe,0));var bt={};ce===!0&&(ce=["FlateEncode"]);var Tt=w.additionalKeyValues||[],Wt=(bt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(R,ce):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(bt.data.length!==0&&(Tt.push({key:"Length",value:bt.data.length}),Ae===!0&&Tt.push({key:"Length1",value:Ve})),Wt.length!=0)if(Wt.split("/").length-1==1)Tt.push({key:"Filter",value:Wt});else{Tt.push({key:"Filter",value:"["+Wt+"]"});for(var dr=0;dr<Tt.length;dr+=1)if(Tt[dr].key==="DecodeParms"){for(var qr=[],dn=0;dn<bt.reverseChain.split("/").length-1;dn+=1)qr.push("null");qr.push(Tt[dr].value),Tt[dr].value="["+qr.join(" ")+"]"}}W("<<");for(var pr=0;pr<Tt.length;pr++)W("/"+Tt[pr].key+" "+Tt[pr].value);W(">>"),bt.data.length!==0&&(W("stream"),W(xt(bt.data)),W("endstream"))},Qi=y.__private__.putPage=function(w){var R=w.number,ce=w.data,ye=w.objId,Ae=w.contentsObjId;tr(ye,!0),W("<</Type /Page"),W("/Parent "+w.rootDictionaryObjId+" 0 R"),W("/Resources "+w.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(re(w.mediaBox.bottomLeftX))+" "+parseFloat(re(w.mediaBox.bottomLeftY))+" "+re(w.mediaBox.topRightX)+" "+re(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&W("/CropBox ["+re(w.cropBox.bottomLeftX)+" "+re(w.cropBox.bottomLeftY)+" "+re(w.cropBox.topRightX)+" "+re(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&W("/BleedBox ["+re(w.bleedBox.bottomLeftX)+" "+re(w.bleedBox.bottomLeftY)+" "+re(w.bleedBox.topRightX)+" "+re(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&W("/TrimBox ["+re(w.trimBox.bottomLeftX)+" "+re(w.trimBox.bottomLeftY)+" "+re(w.trimBox.topRightX)+" "+re(w.trimBox.topRightY)+"]"),w.artBox!==null&&W("/ArtBox ["+re(w.artBox.bottomLeftX)+" "+re(w.artBox.bottomLeftY)+" "+re(w.artBox.topRightX)+" "+re(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&W("/UserUnit "+w.userUnit),kt.publish("putPage",{objId:ye,pageContext:at[R],pageNumber:R,page:ce}),W("/Contents "+Ae+" 0 R"),W(">>"),W("endobj");var Ve=ce.join(`
`);return M===D&&(Ve+=`
Q`),tr(Ae,!0),ln({data:Ve,filters:Un(),objectId:Ae}),W("endobj"),ye},oa=y.__private__.putPages=function(){var w,R,ce=[];for(w=1;w<=lt;w++)at[w].objId=Nr(),at[w].contentsObjId=Nr();for(w=1;w<=lt;w++)ce.push(Qi({number:w,data:ue[w],objId:at[w].objId,contentsObjId:at[w].contentsObjId,mediaBox:at[w].mediaBox,cropBox:at[w].cropBox,bleedBox:at[w].bleedBox,trimBox:at[w].trimBox,artBox:at[w].artBox,userUnit:at[w].userUnit,rootDictionaryObjId:bn,resourceDictionaryObjId:yr}));tr(bn,!0),W("<</Type /Pages");var ye="/Kids [";for(R=0;R<lt;R++)ye+=ce[R]+" 0 R ";W(ye+"]"),W("/Count "+lt),W(">>"),W("endobj"),kt.publish("postPutPages")},wi=function(w){kt.publish("putFont",{font:w,out:W,newObject:ar,putStream:ln}),w.isAlreadyPutted!==!0&&(w.objectNumber=ar(),W("<<"),W("/Type /Font"),W("/BaseFont /"+xd(w.postScriptName)),W("/Subtype /Type1"),typeof w.encoding=="string"&&W("/Encoding /"+w.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Xi=function(w){w.objectNumber=ar();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[re(w.x),re(w.y),re(w.x+w.width),re(w.y+w.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ce=w.pages[1].join(`
`);ln({data:ce,additionalKeyValues:R,objectId:w.objectNumber}),W("endobj")},Zi=function(w,R){R||(R=21);var ce=ar(),ye=(function(Qe,xt){var bt,Tt=[],Wt=1/(xt-1);for(bt=0;bt<1;bt+=Wt)Tt.push(bt);if(Tt.push(1),Qe[0].offset!=0){var dr={offset:0,color:Qe[0].color};Qe.unshift(dr)}if(Qe[Qe.length-1].offset!=1){var qr={offset:1,color:Qe[Qe.length-1].color};Qe.push(qr)}for(var dn="",pr=0,vn=0;vn<Tt.length;vn++){for(bt=Tt[vn];bt>Qe[pr+1].offset;)pr++;var un=Qe[pr].offset,qn=(bt-un)/(Qe[pr+1].offset-un),Ya=Qe[pr].color,ki=Qe[pr+1].color;dn+=ie(Math.round((1-qn)*Ya[0]+qn*ki[0]).toString(16))+ie(Math.round((1-qn)*Ya[1]+qn*ki[1]).toString(16))+ie(Math.round((1-qn)*Ya[2]+qn*ki[2]).toString(16))}return dn.trim()})(w.colors,R),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+R+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ln({data:ye,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),W("endobj"),w.objectNumber=ar(),W("<< /ShadingType "+w.type),W("/ColorSpace /DeviceRGB");var Ve="/Coords ["+re(parseFloat(w.coords[0]))+" "+re(parseFloat(w.coords[1]))+" ";w.type===2?Ve+=re(parseFloat(w.coords[2]))+" "+re(parseFloat(w.coords[3])):Ve+=re(parseFloat(w.coords[2]))+" "+re(parseFloat(w.coords[3]))+" "+re(parseFloat(w.coords[4]))+" "+re(parseFloat(w.coords[5])),W(Ve+="]"),w.matrix&&W("/Matrix ["+w.matrix.toString()+"]"),W("/Function "+ce+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Ro=function(w,R){var ce=Nr(),ye=ar();R.push({resourcesOid:ce,objectOid:ye}),w.objectNumber=ye;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+w.boundingBox.map(re).join(" ")+"]"}),Ae.push({key:"XStep",value:re(w.xStep)}),Ae.push({key:"YStep",value:re(w.yStep)}),Ae.push({key:"Resources",value:ce+" 0 R"}),w.matrix&&Ae.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),ln({data:w.stream,additionalKeyValues:Ae,objectId:w.objectNumber}),W("endobj")},Md=function(w){for(var R in w.objectNumber=ar(),W("<<"),w)switch(R){case"opacity":W("/ca "+E(w[R]));break;case"stroke-opacity":W("/CA "+E(w[R]))}W(">>"),W("endobj")},Er=function(w){tr(w.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var R in W("/Font <<"),ct)ct.hasOwnProperty(R)&&(b===!1||b===!0&&j.hasOwnProperty(R))&&W("/"+R+" "+ct[R].objectNumber+" 0 R");W(">>")})(),(function(){if(Object.keys(Lt).length>0){for(var R in W("/Shading <<"),Lt)Lt.hasOwnProperty(R)&&Lt[R]instanceof lc&&Lt[R].objectNumber>=0&&W("/"+R+" "+Lt[R].objectNumber+" 0 R");kt.publish("putShadingPatternDict"),W(">>")}})(),(function(R){if(Object.keys(Lt).length>0){for(var ce in W("/Pattern <<"),Lt)Lt.hasOwnProperty(ce)&&Lt[ce]instanceof y.TilingPattern&&Lt[ce].objectNumber>=0&&Lt[ce].objectNumber<R&&W("/"+ce+" "+Lt[ce].objectNumber+" 0 R");kt.publish("putTilingPatternDict"),W(">>")}})(w.objectOid),(function(){if(Object.keys(qt).length>0){var R;for(R in W("/ExtGState <<"),qt)qt.hasOwnProperty(R)&&qt[R].objectNumber>=0&&W("/"+R+" "+qt[R].objectNumber+" 0 R");kt.publish("putGStateDict"),W(">>")}})(),(function(){for(var R in W("/XObject <<"),Bt)Bt.hasOwnProperty(R)&&Bt[R].objectNumber>=0&&W("/"+R+" "+Bt[R].objectNumber+" 0 R");kt.publish("putXobjectDict"),W(">>")})(),W(">>"),W("endobj")},Ac=function(w){Mt[w.fontName]=Mt[w.fontName]||{},Mt[w.fontName][w.fontStyle]=w.id},Mo=function(w,R,ce,ye,Ae){var Ve={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:w,fontName:R,fontStyle:ce,encoding:ye,isStandardFont:Ae||!1,metadata:{}};return kt.publish("addFont",{font:Ve,instance:this}),ct[Ve.id]=Ve,Ac(Ve),Ve.id},Ts=y.__private__.pdfEscape=y.pdfEscape=function(w,R){return(function(ce,ye){var Ae,Ve,Qe,xt,bt,Tt,Wt,dr,qr;if(Qe=(ye=ye||{}).sourceEncoding||"Unicode",bt=ye.outputEncoding,(ye.autoencode||bt)&&ct[dt].metadata&&ct[dt].metadata[Qe]&&ct[dt].metadata[Qe].encoding&&(xt=ct[dt].metadata[Qe].encoding,!bt&&ct[dt].encoding&&(bt=ct[dt].encoding),!bt&&xt.codePages&&(bt=xt.codePages[0]),typeof bt=="string"&&(bt=xt[bt]),bt)){for(Wt=!1,Tt=[],Ae=0,Ve=ce.length;Ae<Ve;Ae++)(dr=bt[ce.charCodeAt(Ae)])?Tt.push(String.fromCharCode(dr)):Tt.push(ce[Ae]),Tt[Ae].charCodeAt(0)>>8&&(Wt=!0);ce=Tt.join("")}for(Ae=ce.length;Wt===void 0&&Ae!==0;)ce.charCodeAt(Ae-1)>>8&&(Wt=!0),Ae--;if(!Wt)return ce;for(Tt=ye.noBOM?[]:[254,255],Ae=0,Ve=ce.length;Ae<Ve;Ae++){if((qr=(dr=ce.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tt.push(qr),Tt.push(dr-(qr<<8))}return String.fromCharCode.apply(void 0,Tt)})(w,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ni=y.__private__.beginPage=function(w){ue[++lt]=[],at[lt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},eo(lt),Te(ue[Y])},Cc=function(w,R){var ce,ye,Ae;switch(n=R||n,typeof w=="string"&&(ce=C(w.toLowerCase()),Array.isArray(ce)&&(ye=ce[0],Ae=ce[1])),Array.isArray(w)&&(ye=w[0]*Pt,Ae=w[1]*Pt),isNaN(ye)&&(ye=o[0],Ae=o[1]),(ye>14400||Ae>14400)&&(Ir.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ae=Math.min(14400,Ae)),o=[ye,Ae],n.substr(0,1)){case"l":Ae>ye&&(o=[Ae,ye]);break;case"p":ye>Ae&&(o=[Ae,ye])}Ni(o),ao(Ks),W(io),Tl!==0&&W(Tl+" J"),Ol!==0&&W(Ol+" j"),kt.publish("addPage",{pageNumber:lt})},Bo=function(w){w>0&&w<=lt&&(ue.splice(w,1),at.splice(w,1),lt--,Y>lt&&(Y=lt),this.setPage(Y))},eo=function(w){w>0&&w<=lt&&(Y=w)},Os=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return ue.length-1},Pc=function(w,R,ce){var ye,Ae=void 0;return ce=ce||{},w=w!==void 0?w:ct[dt].fontName,R=R!==void 0?R:ct[dt].fontStyle,ye=w.toLowerCase(),Mt[ye]!==void 0&&Mt[ye][R]!==void 0?Ae=Mt[ye][R]:Mt[w]!==void 0&&Mt[w][R]!==void 0?Ae=Mt[w][R]:ce.disableWarning===!1&&Ir.warn("Unable to look up font label for font '"+w+"', '"+R+"'. Refer to getFontList() for available fonts."),Ae||ce.noFallback||(Ae=Mt.times[R])==null&&(Ae=Mt.times.normal),Ae},Wn=y.__private__.putInfo=function(){var w=ar(),R=function(ye){return ye};for(var ce in m!==null&&(R=Xr.encryptor(w,0)),W("<<"),W("/Producer ("+Ts(R("jsPDF "+Et.version))+")"),ot)ot.hasOwnProperty(ce)&&ot[ce]&&W("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+Ts(R(ot[ce]))+")");W("/CreationDate ("+Ts(R(we))+")"),W(">>"),W("endobj")},Bd=y.__private__.putCatalog=function(w){var R=(w=w||{}).rootDictionaryObjId||bn;switch(ar(),W("<<"),W("/Type /Catalog"),W("/Pages "+R+" 0 R"),le||(le="fullwidth"),le){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+le;ce.substr(ce.length-1)==="%"&&(le=parseInt(le)/100),typeof le=="number"&&W("/OpenAction [3 0 R /XYZ null null "+E(le)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}ze&&W("/PageMode /"+ze),kt.publish("putCatalog"),W(">>"),W("endobj")},cn=y.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(V+1)),W("/Root "+V+" 0 R"),W("/Info "+(V-1)+" 0 R"),m!==null&&W("/Encrypt "+Xr.oid+" 0 R"),W("/ID [ <"+se+"> <"+se+"> ]"),W(">>")},_c=y.__private__.putHeader=function(){W("%PDF-"+A),W("%ºß¬à")},to=y.__private__.putXRef=function(){var w="0000000000";W("xref"),W("0 "+(V+1)),W("0000000000 65535 f ");for(var R=1;R<=V;R++)typeof fe[R]=="function"?W((w+fe[R]()).slice(-10)+" 00000 n "):fe[R]!==void 0?W((w+fe[R]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},Gs=y.__private__.buildDocument=function(){var w;V=0,pe=0,he=[],fe=[],Ce=[],bn=Nr(),yr=Nr(),Te(he),kt.publish("buildDocument"),_c(),oa(),(function(){kt.publish("putAdditionalObjects");for(var ce=0;ce<Ce.length;ce++){var ye=Ce[ce];tr(ye.objId,!0),W(ye.content),W("endobj")}kt.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var ce in ct)ct.hasOwnProperty(ce)&&(b===!1||b===!0&&j.hasOwnProperty(ce))&&wi(ct[ce])})(),(function(){var ce;for(ce in qt)qt.hasOwnProperty(ce)&&Md(qt[ce])})(),(function(){for(var ce in Bt)Bt.hasOwnProperty(ce)&&Xi(Bt[ce])})(),(function(ce){var ye;for(ye in Lt)Lt.hasOwnProperty(ye)&&(Lt[ye]instanceof lc?Zi(Lt[ye]):Lt[ye]instanceof yd&&Ro(Lt[ye],ce))})(w),kt.publish("putResources"),w.forEach(Er),Er({resourcesOid:yr,objectOid:Number.MAX_SAFE_INTEGER}),kt.publish("postPutResources"),m!==null&&(Xr.oid=ar(),W("<<"),W("/Filter /Standard"),W("/V "+Xr.v),W("/R "+Xr.r),W("/U <"+Xr.toHexString(Xr.U)+">"),W("/O <"+Xr.toHexString(Xr.O)+">"),W("/P "+Xr.P),W(">>"),W("endobj")),Wn(),Bd();var R=pe;return to(),cn(),W("startxref"),W(""+R),W("%%EOF"),Te(ue[Y]),he.join(`
`)},la=y.__private__.getBlob=function(w){return new Blob([je(w)],{type:"application/pdf"})},gs=y.output=y.__private__.output=(Mn=function(w,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",w){case void 0:return Gs();case"save":y.save(R.filename);break;case"arraybuffer":return je(Gs());case"blob":return la(Gs());case"bloburi":case"bloburl":if(Vt.URL!==void 0&&typeof Vt.URL.createObjectURL=="function")return Vt.URL&&Vt.URL.createObjectURL(la(Gs()))||void 0;Ir.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ye=Gs();try{ce=p1(ye)}catch{ce=p1(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+R.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(Ae=R.pdfObjectUrl,Ve="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",xt=Vt.open();return xt!==null&&xt.document.write(Qe),xt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',Tt=Vt.open();if(Tt!==null){Tt.document.write(bt);var Wt=this;Tt.document.documentElement.querySelector("#pdfViewer").onload=function(){Tt.document.title=R.filename,Tt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wt.output("bloburl"))}}return Tt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',qr=Vt.open();if(qr!==null&&(qr.document.write(dr),qr.document.title=R.filename),qr||typeof safari>"u")return qr;break;case"datauri":case"dataurl":return Vt.document.location.href=this.output("datauristring",R);default:return null}},Mn.foo=function(){try{return Mn.apply(this,arguments)}catch(ce){var w=ce.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var R="Error in function "+w.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Vt.console)throw new Error(R);Vt.console.error(R,ce),Vt.alert&&alert(R)}},Mn.foo.bar=Mn,Mn.foo),ro=function(w){return Array.isArray(Dt)===!0&&Dt.indexOf(w)>-1};switch(a){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Pt=a}var Xr=null;T(),ee();var no=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:at[w].objId,pageNumber:w,pageContext:at[w]}},Dc=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in at)if(at[R].objId===w)break;return no(R)},El=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:at[Y].objId,pageNumber:Y,pageContext:at[Y]}};y.addPage=function(){return Cc.apply(this,arguments),this},y.setPage=function(){return eo.apply(this,arguments),Te.call(this,ue[Y]),this},y.insertPage=function(w){return this.addPage(),this.movePage(Y,w),this},y.movePage=function(w,R){var ce,ye;if(w>R){ce=ue[w],ye=at[w];for(var Ae=w;Ae>R;Ae--)ue[Ae]=ue[Ae-1],at[Ae]=at[Ae-1];ue[R]=ce,at[R]=ye,this.setPage(R)}else if(w<R){ce=ue[w],ye=at[w];for(var Ve=w;Ve<R;Ve++)ue[Ve]=ue[Ve+1],at[Ve]=at[Ve+1];ue[R]=ce,at[R]=ye,this.setPage(R)}return this},y.deletePage=function(){return Bo.apply(this,arguments),this},y.__private__.text=y.text=function(w,R,ce,ye,Ae){var Ve,Qe,xt,bt,Tt,Wt,dr,qr,dn,pr=(ye=ye||{}).scope||this;if(typeof w=="number"&&typeof R=="number"&&(typeof ce=="string"||Array.isArray(ce))){var vn=ce;ce=R,R=w,w=vn}if(arguments[3]instanceof ht==0?(xt=arguments[4],bt=arguments[5],Cr(dr=arguments[3])==="object"&&dr!==null||(typeof xt=="string"&&(bt=xt,xt=null),typeof dr=="string"&&(bt=dr,dr=null),typeof dr=="number"&&(xt=dr,dr=null),ye={flags:dr,angle:xt,align:bt})):(K("The transform parameter of text() with a Matrix value"),dn=Ae),isNaN(R)||isNaN(ce)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return pr;var un,qn="",Ya=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:xs,ki=pr.internal.scaleFactor;function Tc(Pr){return Pr=Pr.split("	").join(Array(ye.TabLen||9).join(" ")),Ts(Pr,dr)}function Oc(Pr){for(var _r,Zr=Pr.concat(),en=[],Nn=Zr.length;Nn--;)typeof(_r=Zr.shift())=="string"?en.push(_r):Array.isArray(Pr)&&(_r.length===1||_r[1]===void 0&&_r[2]===void 0)?en.push(_r[0]):en.push([_r[0],_r[1],_r[2]]);return en}function co(Pr,_r){var Zr;if(typeof Pr=="string")Zr=_r(Pr)[0];else if(Array.isArray(Pr)){for(var en,Nn,Ia=Pr.concat(),fa=[],Qo=Ia.length;Qo--;)typeof(en=Ia.shift())=="string"?fa.push(_r(en)[0]):Array.isArray(en)&&typeof en[0]=="string"&&(Nn=_r(en[0],en[1],en[2]),fa.push([Nn[0],Nn[1],Nn[2]]));Zr=fa}return Zr}var ha=!1,Rl=!0;if(typeof w=="string")ha=!0;else if(Array.isArray(w)){var Si=w.concat();Qe=[];for(var Ai,Ln=Si.length;Ln--;)(typeof(Ai=Si.shift())!="string"||Array.isArray(Ai)&&typeof Ai[0]!="string")&&(Rl=!1);ha=Rl}if(ha===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Ja=$e/pr.internal.scaleFactor,La=Ja*(Ya-1);switch(ye.baseline){case"bottom":ce-=La;break;case"top":ce+=Ja-La;break;case"hanging":ce+=Ja-2*La;break;case"middle":ce+=Ja/2-La}if((Wt=ye.maxWidth||0)>0&&(typeof w=="string"?w=pr.splitTextToSize(w,Wt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Pr,_r){return Pr.concat(pr.splitTextToSize(_r,Wt))},[]))),Ve={text:w,x:R,y:ce,options:ye,mutex:{pdfEscape:Ts,activeFontKey:dt,fonts:ct,activeFontSize:$e}},kt.publish("preProcessText",Ve),w=Ve.text,xt=(ye=Ve.options).angle,dn instanceof ht==0&&xt&&typeof xt=="number"){xt*=Math.PI/180,ye.rotationDirection===0&&(xt=-xt),M===D&&(xt=-xt);var Wo=Math.cos(xt),Ml=Math.sin(xt);dn=new ht(Wo,Ml,-Ml,Wo,0,0)}else xt&&xt instanceof ht&&(dn=xt);M!==D||dn||(dn=Lr),(Tt=ye.charSpace||ua)!==void 0&&(qn+=re(H(Tt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qr=ye.horizontalScale)!==void 0&&(qn+=re(100*qr)+` Tz
`),ye.lang;var ss=-1,Rc=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Go=pr.internal.getCurrentPageInfo().pageContext;switch(Rc){case 0:case!1:case"fill":ss=0;break;case 1:case!0:case"stroke":ss=1;break;case 2:case"fillThenStroke":ss=2;break;case 3:case"invisible":ss=3;break;case 4:case"fillAndAddForClipping":ss=4;break;case 5:case"strokeAndAddPathForClipping":ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ss=6;break;case 7:case"addToPathForClipping":ss=7}var Mc=Go.usedRenderingMode!==void 0?Go.usedRenderingMode:-1;ss!==-1?qn+=ss+` Tr
`:Mc!==-1&&(qn+=`0 Tr
`),ss!==-1&&(Go.usedRenderingMode=ss),bt=ye.align||"left";var wn,ys=$e*Ya,Qa=pr.internal.pageSize.getWidth(),Bl=ct[dt];Tt=ye.charSpace||ua,Wt=ye.maxWidth||0,dr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Xa=[],uo=function(Pr){return pr.getStringUnitWidth(Pr,{font:Bl,charSpace:Tt,fontSize:$e,doKerning:!1})*$e/ki};if(Object.prototype.toString.call(w)==="[object Array]"){var as;Qe=Oc(w),bt!=="left"&&(wn=Qe.map(uo));var is,Ci=0;if(bt==="right"){R-=wn[0],w=[],Ln=Qe.length;for(var os=0;os<Ln;os++)os===0?(is=Rs(R),as=Wa(ce)):(is=H(Ci-wn[os]),as=-ys),w.push([Qe[os],is,as]),Ci=wn[os]}else if(bt==="center"){R-=wn[0]/2,w=[],Ln=Qe.length;for(var Pi=0;Pi<Ln;Pi++)Pi===0?(is=Rs(R),as=Wa(ce)):(is=H((Ci-wn[Pi])/2),as=-ys),w.push([Qe[Pi],is,as]),Ci=wn[Pi]}else if(bt==="left"){w=[],Ln=Qe.length;for(var Ul=0;Ul<Ln;Ul++)w.push(Qe[Ul])}else if(bt==="justify"&&Bl.encoding==="Identity-H"){w=[],Ln=Qe.length,Wt=Wt!==0?Wt:Qa;for(var _i=0,Wr=0;Wr<Ln;Wr++)if(as=Wr===0?Wa(ce):-ys,is=Wr===0?Rs(R):_i,Wr<Ln-1){var Bc=H((Wt-wn[Wr])/(Qe[Wr].split(" ").length-1)),bs=Qe[Wr].split(" ");w.push([bs[0]+" ",is,as]),_i=0;for(var vs=1;vs<bs.length;vs++){var Ko=(uo(bs[vs-1]+" "+bs[vs])-uo(bs[vs]))*ki+Bc;vs==bs.length-1?w.push([bs[vs],Ko,0]):w.push([bs[vs]+" ",Ko,0]),_i-=Ko}}else w.push([Qe[Wr],is,as]);w.push(["",_i,0])}else{if(bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Ln=Qe.length,Wt=Wt!==0?Wt:Qa,Wr=0;Wr<Ln;Wr++)as=Wr===0?Wa(ce):-ys,is=Wr===0?Rs(R):0,Wr<Ln-1?Xa.push(re(H((Wt-wn[Wr])/(Qe[Wr].split(" ").length-1)))):Xa.push(0),w.push([Qe[Wr],is,as])}}(typeof ye.R2L=="boolean"?ye.R2L:De)===!0&&(w=co(w,function(Pr,_r,Zr){return[Pr.split("").reverse().join(""),_r,Zr]})),Ve={text:w,x:R,y:ce,options:ye,mutex:{pdfEscape:Ts,activeFontKey:dt,fonts:ct,activeFontSize:$e}},kt.publish("postProcessText",Ve),w=Ve.text,un=Ve.mutex.isHex||!1;var Di=ct[dt].encoding;Di!=="WinAnsiEncoding"&&Di!=="StandardEncoding"||(w=co(w,function(Pr,_r,Zr){return[Tc(Pr),_r,Zr]})),Qe=Oc(w),w=[];for(var Yo,ho,Za,ei=Array.isArray(Qe[0])?1:0,Ea="",Jo=function(Pr,_r,Zr){var en="";return Zr instanceof ht?(Zr=typeof ye.angle=="number"?cr(Zr,new ht(1,0,0,1,Pr,_r)):cr(new ht(1,0,0,1,Pr,_r),Zr),M===D&&(Zr=cr(new ht(1,0,0,-1,0,0),Zr)),en=Zr.join(" ")+` Tm
`):en=re(Pr)+" "+re(_r)+` Td
`,en},ws=0;ws<Qe.length;ws++){switch(Ea="",ei){case 1:Za=(un?"<":"(")+Qe[ws][0]+(un?">":")"),Yo=parseFloat(Qe[ws][1]),ho=parseFloat(Qe[ws][2]);break;case 0:Za=(un?"<":"(")+Qe[ws]+(un?">":")"),Yo=Rs(R),ho=Wa(ce)}Xa!==void 0&&Xa[ws]!==void 0&&(Ea=Xa[ws]+` Tw
`),ws===0?w.push(Ea+Jo(Yo,ho,dn)+Za):ei===0?w.push(Ea+Za):ei===1&&w.push(Ea+Jo(Yo,ho,dn)+Za)}w=ei===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Fa=`BT
/`;return Fa+=dt+" "+$e+` Tf
`,Fa+=re($e*Ya)+` TL
`,Fa+=da+`
`,Fa+=qn,Fa+=w,W(Fa+="ET"),j[dt]=!0,pr};var so=y.__private__.clip=y.clip=function(w){return W(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return so("evenodd")},y.__private__.discardPath=y.discardPath=function(){return W("n"),this};var Aa=y.__private__.isValidStyle=function(w){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(R=!0),R};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return Aa(w)&&(p=w),this};var Uo=y.__private__.getStyle=y.getStyle=function(w){var R=p;switch(w){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=w}return R},lr=y.close=function(){return W("h"),this};y.stroke=function(){return W("S"),this},y.fill=function(w){return Va("f",w),this},y.fillEvenOdd=function(w){return Va("f*",w),this},y.fillStroke=function(w){return Va("B",w),this},y.fillStrokeEvenOdd=function(w){return Va("B*",w),this};var Va=function(w,R){Cr(R)==="object"?Lc(R,w):W(w)},qo=function(w){w===null||M===D&&w===void 0||(w=Uo(w),W(w))};function Fl(w,R,ce,ye,Ae){var Ve=new yd(R||this.boundingBox,ce||this.xStep,ye||this.yStep,this.gState,Ae||this.matrix);Ve.stream=this.stream;var Qe=w+"$$"+this.cloneIndex+++"$$";return Or(Qe,Ve),Ve}var Lc=function(w,R){var ce=Kt[w.key],ye=Lt[ce];if(ye instanceof lc)W("q"),W(Ec(R)),ye.gState&&y.setGState(ye.gState),W(w.matrix.toString()+" cm"),W("/"+ce+" sh"),W("Q");else if(ye instanceof yd){var Ae=new ht(1,0,0,-1,0,Gn());w.matrix&&(Ae=Ae.multiply(w.matrix||Lr),ce=Fl.call(ye,w.key,w.boundingBox,w.xStep,w.yStep,Ae).id),W("q"),W("/Pattern cs"),W("/"+ce+" scn"),ye.gState&&y.setGState(ye.gState),W(R),W("Q")}},Ec=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},zo=y.moveTo=function(w,R){return W(re(H(w))+" "+re(te(R))+" m"),this},Ha=y.lineTo=function(w,R){return W(re(H(w))+" "+re(te(R))+" l"),this},ca=y.curveTo=function(w,R,ce,ye,Ae,Ve){return W([re(H(w)),re(te(R)),re(H(ce)),re(te(ye)),re(H(Ae)),re(te(Ve)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,R,ce,ye,Ae){if(isNaN(w)||isNaN(R)||isNaN(ce)||isNaN(ye)||!Aa(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return M===F?this.lines([[ce-w,ye-R]],w,R,[1,1],Ae||"S"):this.lines([[ce-w,ye-R]],w,R,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,R,ce,ye,Ae,Ve){var Qe,xt,bt,Tt,Wt,dr,qr,dn,pr,vn,un,qn;if(typeof w=="number"&&(qn=ce,ce=R,R=w,w=qn),ye=ye||[1,1],Ve=Ve||!1,isNaN(R)||isNaN(ce)||!Array.isArray(w)||!Array.isArray(ye)||!Aa(Ae)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zo(R,ce),Qe=ye[0],xt=ye[1],Tt=w.length,vn=R,un=ce,bt=0;bt<Tt;bt++)(Wt=w[bt]).length===2?(vn=Wt[0]*Qe+vn,un=Wt[1]*xt+un,Ha(vn,un)):(dr=Wt[0]*Qe+vn,qr=Wt[1]*xt+un,dn=Wt[2]*Qe+vn,pr=Wt[3]*xt+un,vn=Wt[4]*Qe+vn,un=Wt[5]*xt+un,ca(dr,qr,dn,pr,vn,un));return Ve&&lr(),qo(Ae),this},y.path=function(w){for(var R=0;R<w.length;R++){var ce=w[R],ye=ce.c;switch(ce.op){case"m":zo(ye[0],ye[1]);break;case"l":Ha(ye[0],ye[1]);break;case"c":ca.apply(this,ye);break;case"h":lr()}}return this},y.__private__.rect=y.rect=function(w,R,ce,ye,Ae){if(isNaN(w)||isNaN(R)||isNaN(ce)||isNaN(ye)||!Aa(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return M===F&&(ye=-ye),W([re(H(w)),re(te(R)),re(H(ce)),re(H(ye)),"re"].join(" ")),qo(Ae),this},y.__private__.triangle=y.triangle=function(w,R,ce,ye,Ae,Ve,Qe){if(isNaN(w)||isNaN(R)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(Ve)||!Aa(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-w,ye-R],[Ae-ce,Ve-ye],[w-Ae,R-Ve]],w,R,[1,1],Qe,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,R,ce,ye,Ae,Ve,Qe){if(isNaN(w)||isNaN(R)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(Ve)||!Aa(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ce),Ve=Math.min(Ve,.5*ye),this.lines([[ce-2*Ae,0],[Ae*xt,0,Ae,Ve-Ve*xt,Ae,Ve],[0,ye-2*Ve],[0,Ve*xt,-Ae*xt,Ve,-Ae,Ve],[2*Ae-ce,0],[-Ae*xt,0,-Ae,-Ve*xt,-Ae,-Ve],[0,2*Ve-ye],[0,-Ve*xt,Ae*xt,-Ve,Ae,-Ve]],w+Ae,R,[1,1],Qe,!0),this},y.__private__.ellipse=y.ellipse=function(w,R,ce,ye,Ae){if(isNaN(w)||isNaN(R)||isNaN(ce)||isNaN(ye)||!Aa(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*ce,Qe=4/3*(Math.SQRT2-1)*ye;return zo(w+ce,R),ca(w+ce,R-Qe,w+Ve,R-ye,w,R-ye),ca(w-Ve,R-ye,w-ce,R-Qe,w-ce,R),ca(w-ce,R+Qe,w-Ve,R+ye,w,R+ye),ca(w+Ve,R+ye,w+ce,R+Qe,w+ce,R),qo(Ae),this},y.__private__.circle=y.circle=function(w,R,ce,ye){if(isNaN(w)||isNaN(R)||isNaN(ce)||!Aa(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,R,ce,ce,ye)},y.setFont=function(w,R,ce){return ce&&(R=J(R,ce)),dt=Pc(w,R,{disableWarning:!1}),this};var Ca=y.__private__.getFont=y.getFont=function(){return ct[Pc.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,R,ce={};for(w in Mt)if(Mt.hasOwnProperty(w))for(R in ce[w]=[],Mt[w])Mt[w].hasOwnProperty(R)&&ce[w].push(R);return ce},y.addFont=function(w,R,ce,ye,Ae){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(ce=J(ce,ye)),Mo.call(this,w,R,ce,Ae=Ae||"Identity-H")};var xs,Ks=e.lineWidth||.200025,Ut=y.__private__.getLineWidth=y.getLineWidth=function(){return Ks},ao=y.__private__.setLineWidth=y.setLineWidth=function(w){return Ks=w,W(re(H(w))+" w"),this};y.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(w,R){if(w=w||[],R=R||0,isNaN(R)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ce){return re(H(ce))}).join(" "),R=re(H(R)),W("["+w+"] "+R+" d"),this};var Pa=y.__private__.getLineHeight=y.getLineHeight=function(){return $e*xs};y.__private__.getLineHeight=y.getLineHeight=function(){return $e*xs};var Ud=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(xs=w),this},Fc=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return xs};Ud(e.lineHeight);var Rs=y.__private__.getHorizontalCoordinate=function(w){return H(w)},Wa=y.__private__.getVerticalCoordinate=function(w){return M===D?w:at[Y].mediaBox.topRightY-at[Y].mediaBox.bottomLeftY-H(w)},Ic=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return re(Rs(w))},$o=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return re(Wa(w))},io=e.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return ns(io)},y.__private__.setStrokeColor=y.setDrawColor=function(w,R,ce,ye){return io=Hr({ch1:w,ch2:R,ch3:ce,ch4:ye,pdfColorType:"draw",precision:2}),W(io),this};var Il=e.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return ns(Il)},y.__private__.setFillColor=y.setFillColor=function(w,R,ce,ye){return Il=Hr({ch1:w,ch2:R,ch3:ce,ch4:ye,pdfColorType:"fill",precision:2}),W(Il),this};var da=e.textColor||"0 g",_a=y.__private__.getTextColor=y.getTextColor=function(){return ns(da)};y.__private__.setTextColor=y.setTextColor=function(w,R,ce,ye){return da=Hr({ch1:w,ch2:R,ch3:ce,ch4:ye,pdfColorType:"text",precision:3}),this};var ua=e.charSpace,Vo=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(ua||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ua=w,this};var Tl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var R=y.CapJoinStyles[w];if(R===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=R,W(R+" J"),this};var Ol=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var R=y.CapJoinStyles[w];if(R===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=R,W(R+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(re(H(w))+" M"),this},y.GState=Of,y.setGState=function(w){(w=typeof w=="string"?qt[Je[w]]:Ga(null,w)).equals(it)||(W("/"+w.id+" gs"),it=w)};var Ga=function(w,R){if(!w||!Je[w]){var ce=!1;for(var ye in qt)if(qt.hasOwnProperty(ye)&&qt[ye].equals(R)){ce=!0;break}if(ce)R=qt[ye];else{var Ae="GS"+(Object.keys(qt).length+1).toString(10);qt[Ae]=R,R.id=Ae}return w&&(Je[w]=R.id),kt.publish("addGState",R),R}};y.addGState=function(w,R){return Ga(w,R),this},y.saveGraphicsState=function(){return W("q"),Zt.push({key:dt,size:$e,color:da}),this},y.restoreGraphicsState=function(){W("Q");var w=Zt.pop();return dt=w.key,$e=w.size,da=w.color,it=null,this},y.setCurrentTransformationMatrix=function(w){return W(w.toString()+" cm"),this},y.comment=function(w){return W("#"+w),this};var Da=function(w,R){var ce=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Ve){isNaN(Ve)||(ce=parseFloat(Ve))}});var ye=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Ve){isNaN(Ve)||(ye=parseFloat(Ve))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Ve){Ae=Ve.toString()}}),this},oo=function(w,R,ce,ye){Da.call(this,w,R),this.type="rect";var Ae=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Qe){isNaN(Qe)||(Ae=parseFloat(Qe))}});var Ve=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(Qe){isNaN(Qe)||(Ve=parseFloat(Qe))}}),this},lo=function(){this.page=lt,this.currentPage=Y,this.pages=ue.slice(0),this.pagesContext=at.slice(0),this.x=ut,this.y=mr,this.matrix=Xt,this.width=ji(Y),this.height=Gn(Y),this.outputDestination=Ge,this.id="",this.objectNumber=-1};lo.prototype.restore=function(){lt=this.page,Y=this.currentPage,at=this.pagesContext,ue=this.pages,ut=this.x,mr=this.y,Xt=this.matrix,Ho(Y,this.width),Ms(Y,this.height),Ge=this.outputDestination};var Ys=function(w,R,ce,ye,Ae){It.push(new lo),lt=Y=0,ue=[],ut=w,mr=R,Xt=Ae,Ni([ce,ye])};for(var Ka in y.beginFormObject=function(w,R,ce,ye,Ae){return Ys(w,R,ce,ye,Ae),this},y.endFormObject=function(w){return(function(R){if(wr[R])It.pop().restore();else{var ce=new lo,ye="Xo"+(Object.keys(Bt).length+1).toString(10);ce.id=ye,wr[R]=ye,Bt[ye]=ce,kt.publish("addFormObject",ce),It.pop().restore()}})(w),this},y.doFormObject=function(w,R){var ce=Bt[wr[w]];return W("q"),W(R.toString()+" cm"),W("/"+ce.id+" Do"),W("Q"),this},y.getFormObject=function(w){var R=Bt[wr[w]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},y.save=function(w,R){return w=w||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(oc(la(Gs()),w),typeof oc.unload=="function"&&Vt.setTimeout&&setTimeout(oc.unload,911),this):new Promise(function(ce,ye){try{var Ae=oc(la(Gs()),w);typeof oc.unload=="function"&&Vt.setTimeout&&setTimeout(oc.unload,911),ce(Ae)}catch(Ve){ye(Ve.message)}})},Et.API)Et.API.hasOwnProperty(Ka)&&(Ka==="events"&&Et.API.events.length?(function(w,R){var ce,ye,Ae;for(Ae=R.length-1;Ae!==-1;Ae--)ce=R[Ae][0],ye=R[Ae][1],w.subscribe.apply(w,[ce].concat(typeof ye=="function"?[ye]:ye))})(kt,Et.API.events):y[Ka]=Et.API[Ka]);var ji=y.getPageWidth=function(w){return(at[w=w||Y].mediaBox.topRightX-at[w].mediaBox.bottomLeftX)/Pt},Ho=y.setPageWidth=function(w,R){at[w].mediaBox.topRightX=R*Pt+at[w].mediaBox.bottomLeftX},Gn=y.getPageHeight=function(w){return(at[w=w||Y].mediaBox.topRightY-at[w].mediaBox.bottomLeftY)/Pt},Ms=y.setPageHeight=function(w,R){at[w].mediaBox.topRightY=R*Pt+at[w].mediaBox.bottomLeftY};return y.internal={pdfEscape:Ts,getStyle:Uo,getFont:Ca,getFontSize:xe,getCharSpace:Vo,getTextColor:_a,getLineHeight:Pa,getLineHeightFactor:Fc,getLineWidth:Ut,write:He,getHorizontalCoordinate:Rs,getVerticalCoordinate:Wa,getCoordinateString:Ic,getVerticalCoordinateString:$o,collections:{},newObject:ar,newAdditionalObject:Bn,newObjectDeferred:Nr,newObjectDeferredBegin:tr,getFilters:Un,putStream:ln,events:kt,scaleFactor:Pt,pageSize:{getWidth:function(){return ji(Y)},setWidth:function(w){Ho(Y,w)},getHeight:function(){return Gn(Y)},setHeight:function(w){Ms(Y,w)}},encryptionOptions:m,encryption:Xr,getEncryptor:function(w){return m!==null?Xr.encryptor(w,0):function(R){return R}},output:gs,getNumberOfPages:Os,pages:ue,out:W,f2:E,f3:I,getPageInfo:no,getPageInfoByObjId:Dc,getCurrentPageInfo:El,getPDFVersion:P,Point:Da,Rectangle:oo,Matrix:ht,hasHotfix:ro},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return ji(Y)},set:function(w){Ho(Y,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Gn(Y)},set:function(w){Ms(Y,w)},enumerable:!0,configurable:!0}),(function(w){for(var R=0,ce=Ze.length;R<ce;R++){var ye=Mo.call(this,w[R][0],w[R][1],w[R][2],Ze[R][3],!0);b===!1&&(j[ye]=!0);var Ae=w[R][0].split("-");Ac({id:ye,fontName:Ae[0],fontStyle:Ae[1]||""})}kt.publish("addFonts",{fonts:ct,dictionary:Mt})}).call(y,Ze),dt="F1",Cc(o,n),kt.publish("initialized"),y}gd.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},gd.prototype.toHexString=function(e){return e.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gd.prototype.hexToBytes=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return r.join("")},gd.prototype.processOwnerPassword=function(e,r){return w0(v0(r).substr(0,5),e)},gd.prototype.encryptor=function(e,r){var n=v0(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&r,r>>8&255)).substr(0,10);return function(a){return w0(n,a)}},Of.prototype.equals=function(e){var r,n="id,objectNumber,equals";if(!e||Cr(e)!==Cr(this))return!1;var a=0;for(r in this)if(!(n.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!e.hasOwnProperty(r)||this[r]!==e[r])return!1;a++}for(r in e)e.hasOwnProperty(r)&&n.indexOf(r)<0&&a--;return a===0},Et.API={events:[]},Et.version="3.0.2";var gn=Et.API,rg=1,Sc=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(e){return e.toFixed(2)},xl=function(e){return e.toFixed(5)};gn.__acroform__={};var ia=function(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e},b1=function(e){return e*rg},Bi=function(e){var r=new mv,n=jt.internal.getHeight(e)||0,a=jt.internal.getWidth(e)||0;return r.BBox=[0,0,Number(Jt(a)),Number(Jt(n))],r},hA=gn.__acroform__.setBit=function(e,r){if(e=e||0,r=r||0,isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<r},fA=gn.__acroform__.clearBit=function(e,r){if(e=e||0,r=r||0,isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<r)},mA=gn.__acroform__.getBit=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<r?1:0},An=gn.__acroform__.getBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mA(e,r-1)},Cn=gn.__acroform__.setBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hA(e,r-1)},Pn=gn.__acroform__.clearBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fA(e,r-1)},pA=gn.__acroform__.calculateCoordinates=function(e,r){var n=r.internal.getHorizontalCoordinate,a=r.internal.getVerticalCoordinate,o=e[0],l=e[1],d=e[2],u=e[3],h={};return h.lowerLeft_X=n(o)||0,h.lowerLeft_Y=a(l+u)||0,h.upperRight_X=n(o+d)||0,h.upperRight_Y=a(l)||0,[Number(Jt(h.lowerLeft_X)),Number(Jt(h.lowerLeft_Y)),Number(Jt(h.upperRight_X)),Number(Jt(h.upperRight_Y))]},gA=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var r=[],n=e._V||e.DV,a=N0(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(e.scope.__private__.encodeColorString(e.color)),r.push("/"+o+" "+Jt(a.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC");var l=Bi(e);return l.scope=e.scope,l.stream=r.join(`
`),l}},N0=function(e,r){var n=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=e.multiline?o.map(function(E){return E.split(`
`)}):o.map(function(E){return[E]});var l=n,d=jt.internal.getHeight(e)||0;d=d<0?-d:d;var u=jt.internal.getWidth(e)||0;u=u<0?-u:u;var h=function(E,I,H){if(E+1<o.length){var te=I+" "+o[E+1][0];return Jh(te,e,H).width<=u-4}return!1};l++;e:for(;l>0;){r="",l--;var p,m,b=Jh("3",e,l).height,j=e.multiline?d-l:(d-b)/2,y=j+=2,A=0,P=0,N=0;if(l<=0){r=`(...) Tj
`,r+="% Width of Text: "+Jh(r,e,l=12).width+", FieldWidth:"+u+`
`;break}for(var C="",F=0,D=0;D<o.length;D++)if(o.hasOwnProperty(D)){var M=!1;if(o[D].length!==1&&N!==o[D].length-1){if((b+2)*(F+2)+2>d)continue e;C+=o[D][N],M=!0,P=D,D--}else{C=(C+=o[D][N]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var U=parseInt(D),Q=h(U,C,l),J=D>=o.length-1;if(Q&&!J){C+=" ",N=0;continue}if(Q||J){if(J)P=U;else if(e.multiline&&(b+2)*(F+2)+2>d)continue e}else{if(!e.multiline||(b+2)*(F+2)+2>d)continue e;P=U}}for(var re="",K=A;K<=P;K++){var de=o[K];if(e.multiline){if(K===P){re+=de[N]+" ",N=(N+1)%de.length;continue}if(K===A){re+=de[de.length-1]+" ";continue}}re+=de[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,m=Jh(re,e,l).width,e.textAlign){case"right":p=u-m-2;break;case"center":p=(u-m)/2;break;default:p=2}r+=Jt(p)+" "+Jt(y)+` Td
`,r+="("+Sc(re)+`) Tj
`,r+=-Jt(p)+` 0 Td
`,y=-(l+2),m=0,A=M?P:P+1,F++,C=""}break}return a.text=r,a.fontSize=l,a},Jh=function(e,r,n){var a=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:r.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},xA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yA=function(e,r){var n={type:"reference",object:e};r.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===n.type&&a.object===n.object})===void 0&&r.internal.getPageInfo(e.page).pageContext.annotations.push(n)},bA=function(e,r){if(r.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(bi.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(xA)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new pv,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];l.objId=void 0,l.hasAnnotation&&yA(l,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(a,o){var l=!a;for(var d in a||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var u=a[d],h=[],p=u.Rect;if(u.Rect&&(u.Rect=pA(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=jt.createDefaultAppearanceStream(u),Cr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=gA(u);h.push({key:"AP",value:"<</N "+m+">>"}),o.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var b="";for(var j in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(j)){var y=u.appearanceStreamContent[j];if(b+="/"+j+" ",b+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var d in y)if(y.hasOwnProperty(d)){var A=y[d];typeof A=="function"&&(A=A.call(o,u)),b+="/"+d+" "+A+" ",o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A)}}else typeof(A=y)=="function"&&(A=A.call(o,u)),b+="/"+d+" "+A,o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:u.objId}),o.internal.out("endobj")}l&&(function(P,N){for(var C in P)if(P.hasOwnProperty(C)){var F=C,D=P[C];N.internal.newObjectDeferredBegin(D.objId,!0),Cr(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete P[F]}})(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},fv=gn.__acroform__.arrayToPdfArray=function(e,r,n){var a=function(d){return d};if(Array.isArray(e)){for(var o="[",l=0;l<e.length;l++)switch(l!==0&&(o+=" "),Cr(e[l])){case"boolean":case"number":case"object":o+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(r!==void 0&&n&&(a=n.internal.getEncryptor(r)),o+="("+Sc(a(e[l].toString()))+")"):o+=e[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Tp=function(e,r,n){var a=function(o){return o};return r!==void 0&&n&&(a=n.internal.getEncryptor(r)),(e=e||"").toString(),"("+Sc(a(e))+")"},Hi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hi.prototype.toString=function(){return this.objId+" 0 R"},Hi.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Hi.prototype.getKeyValueListForStream=function(){var e=[],r=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in r)if(Object.getOwnPropertyDescriptor(this,r[n]).configurable===!1){var a=r[n],o=this[a];o&&(Array.isArray(o)?e.push({key:a,value:fv(o,this.objId,this.scope)}):o instanceof Hi?(o.scope=this.scope,e.push({key:a,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:a,value:o}))}return e};var mv=function(){Hi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ia(mv,Hi);var pv=function(){Hi.call(this);var e,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(a){return a};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Sc(n(e))+")"}},set:function(n){e=n}})};ia(pv,Hi);var bi=function e(){Hi.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');r=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!An(r,3)},set:function(C){C?this.F=Cn(r,3):this.F=Pn(r,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(C){a=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(C){a[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(C){a[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(C){a[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(C){a[3]=C}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Rf)return;l="FieldObject"+e.FieldNum++}var C=function(F){return F};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Sc(C(l))+")"},set:function(C){l=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(C){l=C}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/rg:p},set:function(C){p=C}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(C){m=C}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Rf||this instanceof hc))return Tp(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=C}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof ts==0?Tp(j,this.objId,this.scope):j},set:function(C){C=C.toString(),j=this instanceof ts==0?C.substr(0,1)==="("?fd(C.substr(1,C.length-2)):fd(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?fd(j.substr(1,j.length-1)):j},set:function(C){C=C.toString(),j=this instanceof ts==1?"/"+C:C}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ts==0?Tp(y,this.objId,this.scope):y},set:function(C){C=C.toString(),y=this instanceof ts==0?C.substr(0,1)==="("?fd(C.substr(1,C.length-2)):fd(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?fd(y.substr(1,y.length-1)):y},set:function(C){C=C.toString(),y=this instanceof ts==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(C){C=!!C,P=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(C){A=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,1)},set:function(C){C?this.Ff=Cn(this.Ff,1):this.Ff=Pn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,2)},set:function(C){C?this.Ff=Cn(this.Ff,2):this.Ff=Pn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,3)},set:function(C){C?this.Ff=Cn(this.Ff,3):this.Ff=Pn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');N=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(N){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};ia(bi,Hi);var Nd=function(){bi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fv(r,this.objId,this.scope)},set:function(n){var a,o;o=[],typeof(a=n)=="string"&&(o=(function(l,d,u){u||(u=1);for(var h,p=[];h=d.exec(l);)p.push(h[u]);return p})(a,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(n){r=n,this.sort&&r.sort()},this.addOption=function(n){n=(n=n||"").toString(),r.push(n),this.sort&&r.sort()},this.removeOption=function(n,a){for(a=a||!1,n=(n=n||"").toString();r.indexOf(n)!==-1&&(r.splice(r.indexOf(n),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,18)},set:function(n){n?this.Ff=Cn(this.Ff,18):this.Ff=Pn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Cn(this.Ff,19):this.Ff=Pn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,20)},set:function(n){n?(this.Ff=Cn(this.Ff,20),r.sort()):this.Ff=Pn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,22)},set:function(n){n?this.Ff=Cn(this.Ff,22):this.Ff=Pn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(n){n?this.Ff=Cn(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,27)},set:function(n){n?this.Ff=Cn(this.Ff,27):this.Ff=Pn(this.Ff,27)}}),this.hasAppearanceStream=!1};ia(Nd,bi);var jd=function(){Nd.call(this),this.fontName="helvetica",this.combo=!1};ia(jd,Nd);var kd=function(){jd.call(this),this.combo=!0};ia(kd,jd);var gf=function(){kd.call(this),this.edit=!0};ia(gf,kd);var ts=function(){bi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,15)},set:function(n){n?this.Ff=Cn(this.Ff,15):this.Ff=Pn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,16)},set:function(n){n?this.Ff=Cn(this.Ff,16):this.Ff=Pn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,17)},set:function(n){n?this.Ff=Cn(this.Ff,17):this.Ff=Pn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(n){n?this.Ff=Cn(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+Sc(n(r[a]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Cr(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ia(ts,bi);var xf=function(){ts.call(this),this.pushButton=!0};ia(xf,ts);var Sd=function(){ts.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r!==void 0?r:[]}})};ia(Sd,ts);var Rf=function(){var e,r;bi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var n,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+Sc(o(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(o){Cr(o)==="object"&&(a=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(o){typeof o=="string"&&(a.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ia(Rf,bi),Sd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var n=this.Kids[r];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Sd.prototype.createOption=function(e){var r=new Rf;return r.Parent=this,r.optionName=e,this.Kids.push(r),vA.call(this.scope,r),r};var yf=function(){ts.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=jt.CheckBox.createAppearanceStream()};ia(yf,ts);var hc=function(){bi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,13)},set:function(r){r?this.Ff=Cn(this.Ff,13):this.Ff=Pn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,21)},set:function(r){r?this.Ff=Cn(this.Ff,21):this.Ff=Pn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(r){r?this.Ff=Cn(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,24)},set:function(r){r?this.Ff=Cn(this.Ff,24):this.Ff=Pn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,25)},set:function(r){r?this.Ff=Cn(this.Ff,25):this.Ff=Pn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(r){r?this.Ff=Cn(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){Number.isInteger(r)&&(e=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ia(hc,bi);var bf=function(){hc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,14)},set:function(e){e?this.Ff=Cn(this.Ff,14):this.Ff=Pn(this.Ff,14)}}),this.password=!0};ia(bf,hc);var jt={CheckBox:{createAppearanceStream:function(){return{N:{On:jt.CheckBox.YesNormal},D:{On:jt.CheckBox.YesPushDown,Off:jt.CheckBox.OffPushDown}}},YesPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),l=N0(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Jt(jt.internal.getWidth(e))+" "+Jt(jt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+a+" "+Jt(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),r.stream=n.join(`
`),r},YesNormal:function(e){var r=Bi(e);r.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),o=[],l=jt.internal.getHeight(e),d=jt.internal.getWidth(e),u=N0(e,e.caption);return o.push("1 g"),o.push("0 0 "+Jt(d)+" "+Jt(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Jt(d-1)+" "+Jt(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Jt(u.fontSize)+" Tf "+a),o.push(u.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(jt.internal.getWidth(e))+" "+Jt(jt.internal.getHeight(e))+" re"),n.push("f"),r.stream=n.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(e){var r={D:{Off:jt.RadioButton.Circle.OffPushDown},N:{}};return r.N[e]=jt.RadioButton.Circle.YesNormal,r.D[e]=jt.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(e){var r=Bi(e);r.scope=e.scope;var n=[],a=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var o=jt.internal.Bezier_C,l=Number((a*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+xl(jt.internal.getWidth(e)/2)+" "+xl(jt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),n.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),n.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),n.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=[],a=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*jt.internal.Bezier_C).toFixed(5)),d=Number((a*jt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xl(jt.internal.getWidth(e)/2)+" "+xl(jt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+xl(jt.internal.getWidth(e)/2)+" "+xl(jt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),n.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),n.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),n.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},OffPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=[],a=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*jt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xl(jt.internal.getWidth(e)/2)+" "+xl(jt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r}},Cross:{createAppearanceStream:function(e){var r={D:{Off:jt.RadioButton.Cross.OffPushDown},N:{}};return r.N[e]=jt.RadioButton.Cross.YesNormal,r.D[e]=jt.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(e){var r=Bi(e);r.scope=e.scope;var n=[],a=jt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Jt(jt.internal.getWidth(e)-2)+" "+Jt(jt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jt(a.x1.x)+" "+Jt(a.x1.y)+" m"),n.push(Jt(a.x2.x)+" "+Jt(a.x2.y)+" l"),n.push(Jt(a.x4.x)+" "+Jt(a.x4.y)+" m"),n.push(Jt(a.x3.x)+" "+Jt(a.x3.y)+" l"),n.push("s"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=jt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Jt(jt.internal.getWidth(e))+" "+Jt(jt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Jt(jt.internal.getWidth(e)-2)+" "+Jt(jt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Jt(n.x1.x)+" "+Jt(n.x1.y)+" m"),a.push(Jt(n.x2.x)+" "+Jt(n.x2.y)+" l"),a.push(Jt(n.x4.x)+" "+Jt(n.x4.y)+" m"),a.push(Jt(n.x3.x)+" "+Jt(n.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(e){var r=Bi(e);r.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(jt.internal.getWidth(e))+" "+Jt(jt.internal.getHeight(e))+" re"),n.push("f"),r.stream=n.join(`
`),r}}},createDefaultAppearanceStream:function(e){var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+r+" "+e.fontSize+" Tf "+n}};jt.internal={Bezier_C:.551915024494,calculateCross:function(e){var r=jt.internal.getWidth(e),n=jt.internal.getHeight(e),a=Math.min(r,n);return{x1:{x:(r-a)/2,y:(n-a)/2+a},x2:{x:(r-a)/2+a,y:(n-a)/2},x3:{x:(r-a)/2,y:(n-a)/2},x4:{x:(r-a)/2+a,y:(n-a)/2+a}}}},jt.internal.getWidth=function(e){var r=0;return Cr(e)==="object"&&(r=b1(e.Rect[2])),r},jt.internal.getHeight=function(e){var r=0;return Cr(e)==="object"&&(r=b1(e.Rect[3])),r};var vA=gn.addField=function(e){if(bA(this,e),!(e instanceof bi))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=e).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=Nd,gn.AcroFormListBox=jd,gn.AcroFormComboBox=kd,gn.AcroFormEditBox=gf,gn.AcroFormButton=ts,gn.AcroFormPushButton=xf,gn.AcroFormRadioButton=Sd,gn.AcroFormCheckBox=yf,gn.AcroFormTextField=hc,gn.AcroFormPasswordField=bf,gn.AcroFormAppearance=jt,gn.AcroForm={ChoiceField:Nd,ListBox:jd,ComboBox:kd,EditBox:gf,Button:ts,PushButton:xf,RadioButton:Sd,CheckBox:yf,TextField:hc,PasswordField:bf,Appearance:jt},Et.AcroForm={ChoiceField:Nd,ListBox:jd,ComboBox:kd,EditBox:gf,Button:ts,PushButton:xf,RadioButton:Sd,CheckBox:yf,TextField:hc,PasswordField:bf,Appearance:jt};Et.AcroForm;function gv(e){return e.reduce(function(r,n,a){return r[n]=a,r},{})}(function(e){var r="addImage_";e.__addimage__={};var n="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=e.__addimage__.getImageFileTypeByImageData=function(E,I){var H,te,we,se,$,ee=n;if((I=I||n)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(Q(E))for($ in a)for(we=a[$],H=0;H<we.length;H+=1){for(se=!0,te=0;te<we[H].length;te+=1)if(we[H][te]!==void 0&&we[H][te]!==E[te]){se=!1;break}if(se===!0){ee=$;break}}else for($ in a)for(we=a[$],H=0;H<we.length;H+=1){for(se=!0,te=0;te<we[H].length;te+=1)if(we[H][te]!==void 0&&we[H][te]!==E.charCodeAt(te)){se=!1;break}if(se===!0){ee=$;break}}return ee===n&&I!==n&&(ee=I),ee},l=function E(I){for(var H=this.internal.write,te=this.internal.putStream,we=(0,this.internal.getFilters)();we.indexOf("FlateEncode")!==-1;)we.splice(we.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:I.width}),se.push({key:"Height",value:I.height}),I.colorSpace===C.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===C.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var $="",ee=0,ge=I.transparency.length;ee<ge;ee++)$+=I.transparency[ee]+" "+I.transparency[ee]+" ";se.push({key:"Mask",value:"["+$+"]"})}I.sMask!==void 0&&se.push({key:"SMask",value:I.objectId+1+" 0 R"});var Se=I.filter!==void 0?["/"+I.filter]:void 0;if(te({data:I.data,additionalKeyValues:se,alreadyAppliedFilters:Se,objectId:I.objectId}),H("endobj"),"sMask"in I&&I.sMask!==void 0){var T=(I.predictor!=null?"/Predictor "+I.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+I.width,L={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:T,data:I.sMask};"filter"in I&&(L.filter=I.filter),E.call(this,L)}if(I.colorSpace===C.INDEXED){var Y=this.internal.newObject();te({data:re(new Uint8Array(I.palette)),objectId:Y}),H("endobj")}},d=function(){var E=this.internal.collections[r+"images"];for(var I in E)l.call(this,E[I])},u=function(){var E,I=this.internal.collections[r+"images"],H=this.internal.write;for(var te in I)H("/I"+(E=I[te]).index,E.objectId,"0","R")},h=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",u))},p=function(){var E=this.internal.collections[r+"images"];return h.call(this),E},m=function(){return Object.keys(this.internal.collections[r+"images"]).length},b=function(E){return typeof e["process"+E.toUpperCase()]=="function"},j=function(E){return Cr(E)==="object"&&E.nodeType===1},y=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var H=""+E.getAttribute("src");if(H.indexOf("data:image/")===0)return pf(unescape(H).split("base64,").pop());var te=e.loadFile(H,!0);if(te!==void 0)return te}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var we;switch(I){case"PNG":we="image/png";break;case"WEBP":we="image/webp";break;default:we="image/jpeg"}return pf(E.toDataURL(we,1).split("base64,").pop())}},A=function(E){var I=this.internal.collections[r+"images"];if(I){for(var H in I)if(E===I[H].alias)return I[H]}},P=function(E,I,H){return E||I||(E=-96,I=-96),E<0&&(E=-1*H.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*H.height*72/I/this.internal.scaleFactor),E===0&&(E=I*H.width/H.height),I===0&&(I=E*H.height/H.width),[E,I]},N=function(E,I,H,te,we,se){var $=P.call(this,H,te,we),ee=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,Se=p.call(this);if(H=$[0],te=$[1],Se[we.index]=we,se){se*=Math.PI/180;var T=Math.cos(se),L=Math.sin(se),Y=function(ie){return ie.toFixed(4)},ne=[Y(T),Y(L),Y(-1*L),Y(T),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,ee(E),ge(I+te),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([ee(H),"0","0",ee(te),"0","0","cm"].join(" "))):this.internal.write([ee(H),"0","0",ee(te),ee(E),ge(I+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+we.index+" Do"),this.internal.write("Q")},C=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=e.__addimage__.sHashCode=function(E){var I,H,te=0;if(typeof E=="string")for(H=E.length,I=0;I<H;I++)te=(te<<5)-te+E.charCodeAt(I),te|=0;else if(Q(E))for(H=E.byteLength/2,I=0;I<H;I++)te=(te<<5)-te+E[I],te|=0;return te},M=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},U=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var I=E.indexOf(",");return I<0?null:E.substring(0,I).trim().endsWith("base64")?E.substring(I+1):null};e.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var Q=e.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},J=e.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,H=new Uint8Array(I),te=0;te<I;te++)H[te]=E.charCodeAt(te);return H},re=e.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",H=Q(E)?E:new Uint8Array(E),te=0;te<H.length;te+=8192)I+=String.fromCharCode.apply(null,H.subarray(te,te+8192));return I};e.addImage=function(){var E,I,H,te,we,se,$,ee,ge;if(typeof arguments[1]=="number"?(I=n,H=arguments[1],te=arguments[2],we=arguments[3],se=arguments[4],$=arguments[5],ee=arguments[6],ge=arguments[7]):(I=arguments[1],H=arguments[2],te=arguments[3],we=arguments[4],se=arguments[5],$=arguments[6],ee=arguments[7],ge=arguments[8]),Cr(E=arguments[0])==="object"&&!j(E)&&"imageData"in E){var Se=E;E=Se.imageData,I=Se.format||I||n,H=Se.x||H||0,te=Se.y||te||0,we=Se.w||Se.width||we,se=Se.h||Se.height||se,$=Se.alias||$,ee=Se.compression||ee,ge=Se.rotation||Se.angle||ge}var T=this.internal.getFilters();if(ee===void 0&&T.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(H)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var L=K.call(this,E,I,$,ee);return N.call(this,H,te,we,se,L,ge),this};var K=function(E,I,H,te){var we,se,$;if(typeof E=="string"&&o(E)===n){E=unescape(E);var ee=de(E,!1);(ee!==""||(ee=e.loadFile(E,!0))!==void 0)&&(E=ee)}if(j(E)&&(E=y(E,I)),I=o(E,I),!b(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if((($=H)==null||$.length===0)&&(H=(function(ge){return typeof ge=="string"||Q(ge)?D(ge):Q(ge.data)?D(ge.data):null})(E)),(we=A.call(this,H))||(E instanceof Uint8Array||I==="RGBA"||(se=E,E=J(E)),we=this["process"+I.toUpperCase()](E,m.call(this),H,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in e.image_compression?ge:F.NONE})(te),se)),!we)throw new Error("An unknown error occurred whilst processing the image.");return we},de=e.__addimage__.convertBase64ToBinaryString=function(E,I){I=typeof I!="boolean"||I;var H,te="";if(typeof E=="string"){var we;H=(we=U(E))!==null&&we!==void 0?we:E;try{te=pf(H)}catch(se){if(I)throw M(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};e.getImageProperties=function(E){var I,H,te="";if(j(E)&&(E=y(E)),typeof E=="string"&&o(E)===n&&((te=de(E,!1))===""&&(te=e.loadFile(E)||""),E=te),H=o(E),!b(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(E instanceof Uint8Array||(E=J(E)),!(I=this["process"+H.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=H,I}})(Et.API),(function(e){var r=function(n){if(n!==void 0&&n!="")return!0};Et.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var a,o,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),p=n.pageContext.annotations,m=!1,b=0;b<p.length&&!m;b++)switch((a=p[b]).type){case"link":(r(a.options.url)||r(a.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var j=0;j<p.length;j++){a=p[j];var y=this.internal.pdfEscape,A=this.internal.getEncryptor(n.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(P.objId),F=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+y(C(a.contents))+")",l+=" /Popup "+N.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+y(C(F))+") >>",P.content=l;var D=P.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+d(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+D,a.open&&(l+=" /Open true"),l+=" >>",N.content=l,this.internal.write(P.objId,"0 R",N.objId,"0 R");break;case"freetext":o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var M=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+y(A(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var U=this.annotations._nameMap[a.options.name];a.options.pageNumber=U.page,a.options.top=U.y}else a.options.top||(a.options.top=0);if(o="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+y(A(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;default:var Q=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+Q+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var a=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":a.pageContext.annotations.push(n)}},e.link=function(n,a,o,l,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(n),y:p(a),w:h(n+o),h:p(a+l)},options:d,type:"link"})},e.textWithLink=function(n,a,o,l){var d,u,h=this.getTextWidth(n),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var m=this.splitTextToSize(n,u).length;d=Math.ceil(p*m)}else u=h,d=p;return this.text(n,a,o,l),o+=.2*p,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,o-p,u,d,l),h},e.getTextWidth=function(n){var a=this.internal.getFontSize();return this.getStringUnitWidth(n)*a/this.internal.scaleFactor}})(Et.API),(function(e){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(P){return r[P.charCodeAt(0)]!==void 0},d=e.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},u=e.__arabicParser__.isArabicEndLetter=function(P){return d(P)&&l(P)&&r[P.charCodeAt(0)].length<=2},h=e.__arabicParser__.isArabicAlfLetter=function(P){return d(P)&&o.indexOf(P.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return d(P)&&l(P)&&r[P.charCodeAt(0)].length>=1};var p=e.__arabicParser__.arabicLetterHasFinalForm=function(P){return d(P)&&l(P)&&r[P.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(P){return d(P)&&l(P)&&r[P.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(P){return d(P)&&l(P)&&r[P.charCodeAt(0)].length==4},b=e.__arabicParser__.resolveLigatures=function(P){var N=0,C=n,F="",D=0;for(N=0;N<P.length;N+=1)C[P.charCodeAt(N)]!==void 0?(D++,typeof(C=C[P.charCodeAt(N)])=="number"&&(F+=String.fromCharCode(C),C=n,D=0),N===P.length-1&&(C=n,F+=P.charAt(N-(D-1)),N-=D-1,D=0)):(C=n,F+=P.charAt(N-D),N-=D,D=0);return F};e.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&a[P.charCodeAt(0)]!==void 0};var j=e.__arabicParser__.getCorrectForm=function(P,N,C){return d(P)?l(P)===!1?-1:!p(P)||!d(N)&&!d(C)||!d(C)&&u(N)||u(P)&&!d(N)||u(P)&&h(N)||u(P)&&u(N)?0:m(P)&&d(N)&&!u(N)&&d(C)&&p(C)?3:u(P)||!d(C)?1:2:-1},y=function(P){var N=0,C=0,F=0,D="",M="",U="",Q=(P=P||"").split("\\s+"),J=[];for(N=0;N<Q.length;N+=1){for(J.push(""),C=0;C<Q[N].length;C+=1)D=Q[N][C],M=Q[N][C-1],U=Q[N][C+1],d(D)?(F=j(D,M,U),J[N]+=F!==-1?String.fromCharCode(r[D.charCodeAt(0)][F]):D):J[N]+=D;J[N]=b(J[N])}return J.join(" ")},A=e.__arabicParser__.processArabic=e.processArabic=function(){var P,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(N)){var F=0;for(C=[],F=0;F<N.length;F+=1)Array.isArray(N[F])?C.push([y(N[F][0]),N[F][1],N[F][2]]):C.push([y(N[F])]);P=C}else P=y(N);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};e.events.push(["preProcessText",A])})(Et.API),Et.API.autoPrint=function(e){var r;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(e){var r=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(n,a){var o;if((n=n||"2d")!=="2d")return null;for(o in a)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=a[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(Et.API),(function(e){var r={left:0,top:0,bottom:0,right:0},n=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(P){h=P}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(P){p=P}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(P){m=P}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(P){b=P}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(P){j=P}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(P){y=P}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(P){A=P}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},e.getTextDimensions=function(h,p){a.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),j=p.scaleFactor||this.internal.scaleFactor,y=0,A=0,P=0,N=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var C=p.maxWidth;C>0?typeof h=="string"?h=this.splitTextToSize(h,C):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(D,M){return D.concat(N.splitTextToSize(M,C))},[])):h=Array.isArray(h)?h:[h];for(var F=0;F<h.length;F++)y<(P=this.getStringUnitWidth(h[F],{font:b})*m)&&(y=P);return y!==0&&(A=h.length),{w:y/=j,h:Math.max((A*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/j,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=e.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,b=this.internal.__cell__.margins||r,j=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===h.lineNumber?(h.x=(p.x||0)+(p.width||0),h.y=p.y||0):p.y+p.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,y&&j&&(this.printHeaderRow(h.lineNumber,!0),h.y+=j[0].height)):h.y=p.y+p.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-m,h.y+m,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+m,{align:"center",baseline:"top",maxWidth:h.width-m-m}):this.text(h.text,h.x+m,h.y+m,{align:"left",baseline:"top",maxWidth:h.width-m-m})),this.internal.__cell__.lastCell=h,this};e.table=function(h,p,m,b,j){if(a.call(this),!m)throw new Error("No data for PDF table.");var y,A,P,N,C=[],F=[],D=[],M={},U={},Q=[],J=[],re=(j=j||{}).autoSize||!1,K=j.printHeaders!==!1,de=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,E=j.margins||Object.assign({width:this.getPageWidth()},r),I=typeof j.padding=="number"?j.padding:3,H=j.headerBackgroundColor||"#c8c8c8",te=j.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=K,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=de,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=te,this.setFontSize(de),b==null)F=C=Object.keys(m[0]),D=C.map(function(){return"left"});else if(Array.isArray(b)&&Cr(b[0])==="object")for(C=b.map(function(Se){return Se.name}),F=b.map(function(Se){return Se.prompt||Se.name||""}),D=b.map(function(Se){return Se.align||"left"}),y=0;y<b.length;y+=1)U[b[y].name]=.7499990551181103*b[y].width;else Array.isArray(b)&&typeof b[0]=="string"&&(F=C=b,D=C.map(function(){return"left"}));if(re||Array.isArray(b)&&typeof b[0]=="string")for(y=0;y<C.length;y+=1){for(M[N=C[y]]=m.map(function(Se){return Se[N]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(F[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=M[N],this.setFont(void 0,"normal"),P=0;P<A.length;P+=1)Q.push(this.getTextDimensions(A[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[N]=Math.max.apply(null,Q)+I+I,Q=[]}if(K){var we={};for(y=0;y<C.length;y+=1)we[C[y]]={},we[C[y]].text=F[y],we[C[y]].align=D[y];var se=u.call(this,we,U);J=C.map(function(Se){return new l(h,p,U[Se],se,we[Se].text,void 0,we[Se].align)}),this.setTableHeaderRow(J),this.printHeaderRow(1,!1)}var $=b.reduce(function(Se,T){return Se[T.name]=T.align,Se},{});for(y=0;y<m.length;y+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:y,data:m[y]},this);var ee=u.call(this,m[y],U);for(P=0;P<C.length;P+=1){var ge=m[y][C[P]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:y,col:P,data:ge},this),d.call(this,new l(h,p,U[C[P]],ee,ge,y+2,$[C[P]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=p,this};var u=function(h,p){var m=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(h).map(function(y){var A=h[y];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,p[y]-m-m)},this).map(function(y){return this.getLineHeightFactor()*y.length*b/j+m+m},this).reduce(function(y,A){return Math.max(y,A)},0)};e.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},e.printHeaderRow=function(h,p){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){m=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,j.push(m)),m.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,m),this.setTextColor(A)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}})(Et.API);var xv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j0=gv(yv),bv=[100,200,300,400,500,600,700,800,900],wA=gv(bv);function Op(e){var r=e.family.replace(/"|'/g,"").toLowerCase(),n=(function(l){return xv[l=l||"normal"]?l:"normal"})(e.style),a=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(e.weight),o=(function(l){return typeof j0[l=l||"normal"]=="number"?l:"normal"})(e.stretch);return{family:r,style:n,weight:a,stretch:o,src:e.src||[],ref:e.ref||{name:r,style:[o,n,a].join(" ")}}}function v1(e,r,n,a){var o;for(o=n;o>=0&&o<r.length;o+=a)if(e[r[o]])return e[r[o]];for(o=n;o>=0&&o<r.length;o-=a)if(e[r[o]])return e[r[o]]}var NA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},w1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function N1(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function j1(e){return e.trimLeft()}function jA(e,r){for(var n=0;n<e.length;){if(e.charAt(n)===r)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function kA(e){var r=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],e.substring(r[0].length)]}var Qh,k1,S1,md,Xh,A1,C1,P1,Rp=["times"];function _1(e,r,n,a){var o=4,l=L1;switch(a){case Et.API.image_compression.FAST:o=1,l=D1;break;case Et.API.image_compression.MEDIUM:o=6,l=E1;break;case Et.API.image_compression.SLOW:o=9,l=F1}e=(function(u,h,p,m){for(var b,j=u.length/h,y=new Uint8Array(u.length+j),A=[SA,D1,L1,E1,F1],P=0;P<j;P+=1){var N=P*h,C=u.subarray(N,N+h);if(m)y.set(m(C,p,b),N+P);else{for(var F=A.length,D=[],M=0;M<F;M+=1)D[M]=A[M](C,p,b);var U=CA(D.concat());y.set(D[U],N+P)}b=C}return y})(e,r,n,l);var d=g0(e,{level:o});return Et.API.__addimage__.arrayBufferToBinaryString(d)}function SA(e){var r=Array.apply([],e);return r.unshift(0),r}function D1(e,r){var n=e.length,a=[];a[0]=1;for(var o=0;o<n;o+=1){var l=e[o-r]||0;a[o+1]=e[o]-l+256&255}return a}function L1(e,r,n){var a=e.length,o=[];o[0]=2;for(var l=0;l<a;l+=1){var d=n&&n[l]||0;o[l+1]=e[l]-d+256&255}return o}function E1(e,r,n){var a=e.length,o=[];o[0]=3;for(var l=0;l<a;l+=1){var d=e[l-r]||0,u=n&&n[l]||0;o[l+1]=e[l]+256-(d+u>>>1)&255}return o}function F1(e,r,n){var a=e.length,o=[];o[0]=4;for(var l=0;l<a;l+=1){var d=AA(e[l-r]||0,n&&n[l]||0,n&&n[l-r]||0);o[l+1]=e[l]-d+256&255}return o}function AA(e,r,n){if(e===r&&r===n)return e;var a=Math.abs(r-n),o=Math.abs(e-n),l=Math.abs(e+r-n-n);return a<=o&&a<=l?e:o<=l?r:n}function CA(e){var r=e.map(function(n){return n.reduce(function(a,o){return a+Math.abs(o)},0)});return r.indexOf(Math.min.apply(null,r))}function Mp(e,r,n){var a=r*n,o=Math.floor(a/8),l=16-(a-8*o+n),d=(1<<n)-1;return vv(e,o)>>l&d}function I1(e,r,n,a){var o=n*a,l=Math.floor(o/8),d=16-(o-8*l+a),u=(1<<a)-1,h=(r&u)<<d;(function(p,m,b){if(m+1<p.byteLength)p.setUint16(m,b,!1);else{var j=b>>8&255;p.setUint8(m,j)}})(e,l,vv(e,l)&~(u<<d)&65535|h)}function vv(e,r){return r+1<e.byteLength?e.getUint16(r,!1):e.getUint8(r)<<8}function PA(e){var r=0;if(e[r++]!==71||e[r++]!==73||e[r++]!==70||e[r++]!==56||(e[r++]+1&253)!=56||e[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[r++]|e[r++]<<8,a=e[r++]|e[r++]<<8,o=e[r++],l=o>>7,d=1<<1+(7&o);e[r++],e[r++];var u=null,h=null;l&&(u=r,h=d,r+=3*d);var p=!0,m=[],b=0,j=null,y=0,A=null;for(this.width=n,this.height=a;p&&r<e.length;)switch(e[r++]){case 33:switch(e[r++]){case 255:if(e[r]!==11||e[r+1]==78&&e[r+2]==69&&e[r+3]==84&&e[r+4]==83&&e[r+5]==67&&e[r+6]==65&&e[r+7]==80&&e[r+8]==69&&e[r+9]==50&&e[r+10]==46&&e[r+11]==48&&e[r+12]==3&&e[r+13]==1&&e[r+16]==0)r+=14,A=e[r++]|e[r++]<<8,r++;else for(r+=12;;){if(!((E=e[r++])>=0))throw Error("Invalid block size");if(E===0)break;r+=E}break;case 249:if(e[r++]!==4||e[r+4]!==0)throw new Error("Invalid graphics extension block.");var P=e[r++];b=e[r++]|e[r++]<<8,j=e[r++],1&P||(j=null),y=P>>2&7,r++;break;case 254:for(;;){if(!((E=e[r++])>=0))throw Error("Invalid block size");if(E===0)break;r+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[r-1].toString(16))}break;case 44:var N=e[r++]|e[r++]<<8,C=e[r++]|e[r++]<<8,F=e[r++]|e[r++]<<8,D=e[r++]|e[r++]<<8,M=e[r++],U=M>>6&1,Q=1<<1+(7&M),J=u,re=h,K=!1;M>>7&&(K=!0,J=r,re=Q,r+=3*Q);var de=r;for(r++;;){var E;if(!((E=e[r++])>=0))throw Error("Invalid block size");if(E===0)break;r+=E}m.push({x:N,y:C,width:F,height:D,has_local_palette:K,palette_offset:J,palette_size:re,data_offset:de,data_length:r-de,transparent_index:j,interlaced:!!U,delay:b,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+e[r-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return A},this.frameInfo=function(I){if(I<0||I>=m.length)throw new Error("Frame index out of range.");return m[I]},this.decodeAndBlitFrameBGRA=function(I,H){var te=this.frameInfo(I),we=te.width*te.height,se=new Uint8Array(we);T1(e,te.data_offset,se,we);var $=te.palette_offset,ee=te.transparent_index;ee===null&&(ee=256);var ge=te.width,Se=n-ge,T=ge,L=4*(te.y*n+te.x),Y=4*((te.y+te.height)*n+te.x),ne=L,ie=4*Se;te.interlaced===!0&&(ie+=4*n*7);for(var V=8,fe=0,he=se.length;fe<he;++fe){var pe=se[fe];if(T===0&&(T=ge,(ne+=ie)>=Y&&(ie=4*Se+4*n*(V-1),ne=L+(ge+Se)*(V<<1),V>>=1)),pe===ee)ne+=4;else{var Ce=e[$+3*pe],ue=e[$+3*pe+1],Pe=e[$+3*pe+2];H[ne++]=Pe,H[ne++]=ue,H[ne++]=Ce,H[ne++]=255}--T}},this.decodeAndBlitFrameRGBA=function(I,H){var te=this.frameInfo(I),we=te.width*te.height,se=new Uint8Array(we);T1(e,te.data_offset,se,we);var $=te.palette_offset,ee=te.transparent_index;ee===null&&(ee=256);var ge=te.width,Se=n-ge,T=ge,L=4*(te.y*n+te.x),Y=4*((te.y+te.height)*n+te.x),ne=L,ie=4*Se;te.interlaced===!0&&(ie+=4*n*7);for(var V=8,fe=0,he=se.length;fe<he;++fe){var pe=se[fe];if(T===0&&(T=ge,(ne+=ie)>=Y&&(ie=4*Se+4*n*(V-1),ne=L+(ge+Se)*(V<<1),V>>=1)),pe===ee)ne+=4;else{var Ce=e[$+3*pe],ue=e[$+3*pe+1],Pe=e[$+3*pe+2];H[ne++]=Ce,H[ne++]=ue,H[ne++]=Pe,H[ne++]=255}--T}}}function T1(e,r,n,a){for(var o=e[r++],l=1<<o,d=l+1,u=d+1,h=o+1,p=(1<<h)-1,m=0,b=0,j=0,y=e[r++],A=new Int32Array(4096),P=null;;){for(;m<16&&y!==0;)b|=e[r++]<<m,m+=8,y===1?y=e[r++]:--y;if(m<h)break;var N=b&p;if(b>>=h,m-=h,N!==l){if(N===d)break;for(var C=N<u?N:P,F=0,D=C;D>l;)D=A[D]>>8,++F;var M=D;if(j+F+(C!==N?1:0)>a)return void Ir.log("Warning, gif stream longer than expected.");n[j++]=M;var U=j+=F;for(C!==N&&(n[j++]=M),D=C;F--;)D=A[D],n[--U]=255&D,D>>=8;P!==null&&u<4096&&(A[u++]=P<<8|M,u>=p+1&&h<12&&(++h,p=p<<1|1)),P=N}else u=d+1,p=(1<<(h=o+1))-1,P=null}return j!==a&&Ir.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Bp(e){var r,n,a,o,l,d=Math.floor,u=new Array(64),h=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),j=new Array(65535),y=new Array(64),A=new Array(64),P=[],N=0,C=7,F=new Array(64),D=new Array(64),M=new Array(64),U=new Array(256),Q=new Array(2048),J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],de=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],we=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(L,Y){for(var ne=0,ie=0,V=new Array,fe=1;fe<=16;fe++){for(var he=1;he<=L[fe];he++)V[Y[ie]]=[],V[Y[ie]][0]=ne,V[Y[ie]][1]=fe,ie++,ne++;ne*=2}return V}function $(L){for(var Y=L[0],ne=L[1]-1;ne>=0;)Y&1<<ne&&(N|=1<<C),ne--,--C<0&&(N==255?(ee(255),ee(0)):ee(N),C=7,N=0)}function ee(L){P.push(L)}function ge(L){ee(L>>8&255),ee(255&L)}function Se(L,Y,ne,ie,V){for(var fe,he=V[0],pe=V[240],Ce=(function($e,le){var xe,De,ze,Ye,Ue,Xe,wt,ot,dt,Pt,ut=0;for(dt=0;dt<8;++dt){xe=$e[ut],De=$e[ut+1],ze=$e[ut+2],Ye=$e[ut+3],Ue=$e[ut+4],Xe=$e[ut+5],wt=$e[ut+6];var mr=xe+(ot=$e[ut+7]),Xt=xe-ot,ct=De+wt,Mt=De-wt,Zt=ze+Xe,Lt=ze-Xe,Kt=Ye+Ue,qt=Ye-Ue,Je=mr+Kt,it=mr-Kt,lt=ct+Zt,at=ct-Zt;$e[ut]=Je+lt,$e[ut+4]=Je-lt;var kt=.707106781*(at+it);$e[ut+2]=it+kt,$e[ut+6]=it-kt;var Dt=.382683433*((Je=qt+Lt)-(at=Mt+Xt)),Bt=.5411961*Je+Dt,wr=1.306562965*at+Dt,It=.707106781*(lt=Lt+Mt),ht=Xt+It,cr=Xt-It;$e[ut+5]=cr+Bt,$e[ut+3]=cr-Bt,$e[ut+1]=ht+wr,$e[ut+7]=ht-wr,ut+=8}for(ut=0,dt=0;dt<8;++dt){xe=$e[ut],De=$e[ut+8],ze=$e[ut+16],Ye=$e[ut+24],Ue=$e[ut+32],Xe=$e[ut+40],wt=$e[ut+48];var Lr=xe+(ot=$e[ut+56]),Or=xe-ot,Mn=De+wt,ar=De-wt,Nr=ze+Xe,tr=ze-Xe,Bn=Ye+Ue,bn=Ye-Ue,yr=Lr+Bn,ns=Lr-Bn,Hr=Mn+Nr,Un=Mn-Nr;$e[ut]=yr+Hr,$e[ut+32]=yr-Hr;var ln=.707106781*(Un+ns);$e[ut+16]=ns+ln,$e[ut+48]=ns-ln;var Qi=.382683433*((yr=bn+tr)-(Un=ar+Or)),oa=.5411961*yr+Qi,wi=1.306562965*Un+Qi,Xi=.707106781*(Hr=tr+ar),Zi=Or+Xi,Ro=Or-Xi;$e[ut+40]=Ro+oa,$e[ut+24]=Ro-oa,$e[ut+8]=Zi+wi,$e[ut+56]=Zi-wi,ut++}for(dt=0;dt<64;++dt)Pt=$e[dt]*le[dt],y[dt]=Pt>0?Pt+.5|0:Pt-.5|0;return y})(L,Y),ue=0;ue<64;++ue)A[J[ue]]=Ce[ue];var Pe=A[0]-ne;ne=A[0],Pe==0?$(ie[0]):($(ie[j[fe=32767+Pe]]),$(b[fe]));for(var Ge=63;Ge>0&&A[Ge]==0;)Ge--;if(Ge==0)return $(he),ne;for(var Te,W=1;W<=Ge;){for(var He=W;A[W]==0&&W<=Ge;)++W;var je=W-He;if(je>=16){Te=je>>4;for(var Ze=1;Ze<=Te;++Ze)$(pe);je&=15}fe=32767+A[W],$(V[(je<<4)+j[fe]]),$(b[fe]),W++}return Ge!=63&&$(he),ne}function T(L){L=Math.min(Math.max(L,1),100),l!=L&&((function(Y){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var V=d((ne[ie]*Y+50)/100);V=Math.min(Math.max(V,1),255),u[J[ie]]=V}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var pe=d((fe[he]*Y+50)/100);pe=Math.min(Math.max(pe,1),255),h[J[he]]=pe}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,Pe=0;Pe<8;Pe++)for(var Ge=0;Ge<8;Ge++)p[ue]=1/(u[J[ue]]*Ce[Pe]*Ce[Ge]*8),m[ue]=1/(h[J[ue]]*Ce[Pe]*Ce[Ge]*8),ue++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),l=L)}this.encode=function(L,Y){Y&&T(Y),P=new Array,N=0,C=7,ge(65496),ge(65504),ge(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),ge(1),ge(1),ee(0),ee(0),(function(){ge(65499),ge(132),ee(0);for(var De=0;De<64;De++)ee(u[De]);ee(1);for(var ze=0;ze<64;ze++)ee(h[ze])})(),(function(De,ze){ge(65472),ge(17),ee(8),ge(ze),ge(De),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)})(L.width,L.height),(function(){ge(65476),ge(418),ee(0);for(var De=0;De<16;De++)ee(re[De+1]);for(var ze=0;ze<=11;ze++)ee(K[ze]);ee(16);for(var Ye=0;Ye<16;Ye++)ee(de[Ye+1]);for(var Ue=0;Ue<=161;Ue++)ee(E[Ue]);ee(1);for(var Xe=0;Xe<16;Xe++)ee(I[Xe+1]);for(var wt=0;wt<=11;wt++)ee(H[wt]);ee(17);for(var ot=0;ot<16;ot++)ee(te[ot+1]);for(var dt=0;dt<=161;dt++)ee(we[dt])})(),ge(65498),ge(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var ne=0,ie=0,V=0;N=0,C=7,this.encode.displayName="_encode_";for(var fe,he,pe,Ce,ue,Pe,Ge,Te,W,He=L.data,je=L.width,Ze=L.height,$e=4*je,le=0;le<Ze;){for(fe=0;fe<$e;){for(ue=$e*le+fe,Ge=-1,Te=0,W=0;W<64;W++)Pe=ue+(Te=W>>3)*$e+(Ge=4*(7&W)),le+Te>=Ze&&(Pe-=$e*(le+1+Te-Ze)),fe+Ge>=$e&&(Pe-=fe+Ge-$e+4),he=He[Pe++],pe=He[Pe++],Ce=He[Pe++],F[W]=(Q[he]+Q[pe+256|0]+Q[Ce+512|0]>>16)-128,D[W]=(Q[he+768|0]+Q[pe+1024|0]+Q[Ce+1280|0]>>16)-128,M[W]=(Q[he+1280|0]+Q[pe+1536|0]+Q[Ce+1792|0]>>16)-128;ne=Se(F,p,ne,r,a),ie=Se(D,m,ie,n,o),V=Se(M,m,V,n,o),fe+=32}le+=8}if(C>=0){var xe=[];xe[1]=C+1,xe[0]=(1<<C+1)-1,$(xe)}return ge(65497),new Uint8Array(P)},e=e||50,(function(){for(var L=String.fromCharCode,Y=0;Y<256;Y++)U[Y]=L(Y)})(),r=se(re,K),n=se(I,H),a=se(de,E),o=se(te,we),(function(){for(var L=1,Y=2,ne=1;ne<=15;ne++){for(var ie=L;ie<Y;ie++)j[32767+ie]=ne,b[32767+ie]=[],b[32767+ie][1]=ne,b[32767+ie][0]=ie;for(var V=-(Y-1);V<=-L;V++)j[32767+V]=ne,b[32767+V]=[],b[32767+V][1]=ne,b[32767+V][0]=Y-1+V;L<<=1,Y<<=1}})(),(function(){for(var L=0;L<256;L++)Q[L]=19595*L,Q[L+256|0]=38470*L,Q[L+512|0]=7471*L+32768,Q[L+768|0]=-11059*L,Q[L+1024|0]=-21709*L,Q[L+1280|0]=32768*L+8421375,Q[L+1536|0]=-27439*L,Q[L+1792|0]=-5329*L})(),T(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function di(e,r){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O1(e){function r(K){if(!K)throw Error("assert :P")}function n(K,de,E){for(var I=0;4>I;I++)if(K[de+I]!=E.charCodeAt(I))return!0;return!1}function a(K,de,E,I,H){for(var te=0;te<H;te++)K[de+te]=E[I+te]}function o(K,de,E,I){for(var H=0;H<I;H++)K[de+H]=E}function l(K){return new Int32Array(K)}function d(K,de){for(var E=[],I=0;I<K;I++)E.push(new de);return E}function u(K,de){var E=[];return(function I(H,te,we){for(var se=we[te],$=0;$<se&&(H.push(we.length>te+1?[]:new de),!(we.length<te+1));$++)I(H[$],te+1,we)})(E,0,K),E}var h=function(){var K=this;function de(f,x){for(var k=1<<x-1>>>0;f&k;)k>>>=1;return k?(f&k-1)+k:f}function E(f,x,k,_,B){r(!(_%k));do f[x+(_-=k)]=B;while(0<_)}function I(f,x,k,_,B){if(r(2328>=B),512>=B)var z=l(512);else if((z=l(B))==null)return 0;return(function(G,X,Z,ae,be,Le){var oe,Ne,_e=X,qe=1<<Z,Fe=l(16),Re=l(16);for(r(be!=0),r(ae!=null),r(G!=null),r(0<Z),Ne=0;Ne<be;++Ne){if(15<ae[Ne])return 0;++Fe[ae[Ne]]}if(Fe[0]==be)return 0;for(Re[1]=0,oe=1;15>oe;++oe){if(Fe[oe]>1<<oe)return 0;Re[oe+1]=Re[oe]+Fe[oe]}for(Ne=0;Ne<be;++Ne)oe=ae[Ne],0<ae[Ne]&&(Le[Re[oe]++]=Ne);if(Re[15]==1)return(ae=new H).g=0,ae.value=Le[0],E(G,_e,1,qe,ae),qe;var Be,We=-1,Ke=qe-1,At=0,pt=1,Gt=1,vt=1<<Z;for(Ne=0,oe=1,be=2;oe<=Z;++oe,be<<=1){if(pt+=Gt<<=1,0>(Gt-=Fe[oe]))return 0;for(;0<Fe[oe];--Fe[oe])(ae=new H).g=oe,ae.value=Le[Ne++],E(G,_e+At,be,vt,ae),At=de(At,oe)}for(oe=Z+1,be=2;15>=oe;++oe,be<<=1){if(pt+=Gt<<=1,0>(Gt-=Fe[oe]))return 0;for(;0<Fe[oe];--Fe[oe]){if(ae=new H,(At&Ke)!=We){for(_e+=vt,Be=1<<(We=oe)-Z;15>We&&!(0>=(Be-=Fe[We]));)++We,Be<<=1;qe+=vt=1<<(Be=We-Z),G[X+(We=At&Ke)].g=Be+Z,G[X+We].value=_e-X-We}ae.g=oe-Z,ae.value=Le[Ne++],E(G,_e+(At>>Z),be,vt,ae),At=de(At,oe)}}return pt!=2*Re[15]-1?0:qe})(f,x,k,_,B,z)}function H(){this.value=this.g=0}function te(){this.value=this.g=0}function we(){this.G=d(5,H),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(os,te)}function se(f,x,k,_){r(f!=null),r(x!=null),r(2147483648>_),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=k,f.Jd=x,f.Yc=k+_,f.Zc=4<=_?k+_-4+1:k,he(f)}function $(f,x){for(var k=0;0<x--;)k|=Ce(f,128)<<x;return k}function ee(f,x){var k=$(f,x);return pe(f)?-k:k}function ge(f,x,k,_){var B,z=0;for(r(f!=null),r(x!=null),r(4294967288>_),f.Sb=_,f.Ra=0,f.u=0,f.h=0,4<_&&(_=4),B=0;B<_;++B)z+=x[k+B]<<8*B;f.Ra=z,f.bb=_,f.oa=x,f.pa=k}function Se(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<_i-8>>>0,++f.bb,f.u-=8;ie(f)&&(f.h=1,f.u=0)}function T(f,x){if(r(0<=x),!f.h&&x<=Ul){var k=ne(f)&Pi[x];return f.u+=x,Se(f),k}return f.h=1,f.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(f){return f.Ra>>>(f.u&_i-1)>>>0}function ie(f){return r(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>_i}function V(f,x){f.u=x,f.h=ie(f)}function fe(f){f.u>=Wr&&(r(f.u>=Wr),Se(f))}function he(f){r(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(r(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function pe(f){return $(f,1)}function Ce(f,x){var k=f.Ca;0>f.b&&he(f);var _=f.b,B=k*x>>>8,z=(f.I>>>_>B)+0;for(z?(k-=B,f.I-=B+1<<_>>>0):k=B+1,_=k,B=0;256<=_;)B+=8,_>>=8;return _=7^B+Bc[_],f.b-=_,f.Ca=(k<<_)-1,z}function ue(f,x,k){f[x+0]=k>>24&255,f[x+1]=k>>16&255,f[x+2]=k>>8&255,f[x+3]=255&k}function Pe(f,x){return f[x+0]|f[x+1]<<8}function Ge(f,x){return Pe(f,x)|f[x+2]<<16}function Te(f,x){return Pe(f,x)|Pe(f,x+2)<<16}function W(f,x){var k=1<<x;return r(f!=null),r(0<x),f.X=l(k),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function He(f,x){r(f!=null),r(x!=null),r(f.Xa==x.Xa),a(x.X,0,f.X,0,1<<x.Xa)}function je(){this.X=[],this.Xa=this.Mb=0}function Ze(f,x,k,_){r(k!=null),r(_!=null);var B=k[0],z=_[0];return B==0&&(B=(f*z+x/2)/x),z==0&&(z=(x*B+f/2)/f),0>=B||0>=z?0:(k[0]=B,_[0]=z,1)}function $e(f,x){return f+(1<<x)-1>>>x}function le(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function xe(f,x){K[x]=function(k,_,B,z,G,X,Z){var ae;for(ae=0;ae<G;++ae){var be=K[f](X[Z+ae-1],B,z+ae);X[Z+ae]=le(k[_+ae],be)}}}function De(){this.ud=this.hd=this.jd=0}function ze(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Ye(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Ue(f,x){return Ye(f+(f-x+.5>>1))}function Xe(f,x,k){return Math.abs(x-k)-Math.abs(f-k)}function wt(f,x,k,_,B,z,G){for(_=z[G-1],k=0;k<B;++k)z[G+k]=_=le(f[x+k],_)}function ot(f,x,k,_,B){var z;for(z=0;z<k;++z){var G=f[x+z],X=G>>8&255,Z=16711935&(Z=(Z=16711935&G)+((X<<16)+X));_[B+z]=(4278255360&G)+Z>>>0}}function dt(f,x){x.jd=255&f,x.hd=f>>8&255,x.ud=f>>16&255}function Pt(f,x,k,_,B,z){var G;for(G=0;G<_;++G){var X=x[k+G],Z=X>>>8,ae=X,be=255&(be=(be=X>>>16)+((f.jd<<24>>24)*(Z<<24>>24)>>>5));ae=255&(ae=(ae+=(f.hd<<24>>24)*(Z<<24>>24)>>>5)+((f.ud<<24>>24)*(be<<24>>24)>>>5)),B[z+G]=(4278255360&X)+(be<<16)+ae}}function ut(f,x,k,_,B){K[x]=function(z,G,X,Z,ae,be,Le,oe,Ne){for(Z=Le;Z<oe;++Z)for(Le=0;Le<Ne;++Le)ae[be++]=B(X[_(z[G++])])},K[f]=function(z,G,X,Z,ae,be,Le){var oe=8>>z.b,Ne=z.Ea,_e=z.K[0],qe=z.w;if(8>oe)for(z=(1<<z.b)-1,qe=(1<<oe)-1;G<X;++G){var Fe,Re=0;for(Fe=0;Fe<Ne;++Fe)Fe&z||(Re=_(Z[ae++])),be[Le++]=B(_e[Re&qe]),Re>>=oe}else K["VP8LMapColor"+k](Z,ae,_e,qe,be,Le,G,X,Ne)}}function mr(f,x,k,_,B){for(k=x+k;x<k;){var z=f[x++];_[B++]=z>>16&255,_[B++]=z>>8&255,_[B++]=255&z}}function Xt(f,x,k,_,B){for(k=x+k;x<k;){var z=f[x++];_[B++]=z>>16&255,_[B++]=z>>8&255,_[B++]=255&z,_[B++]=z>>24&255}}function ct(f,x,k,_,B){for(k=x+k;x<k;){var z=(G=f[x++])>>16&240|G>>12&15,G=240&G|G>>28&15;_[B++]=z,_[B++]=G}}function Mt(f,x,k,_,B){for(k=x+k;x<k;){var z=(G=f[x++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;_[B++]=z,_[B++]=G}}function Zt(f,x,k,_,B){for(k=x+k;x<k;){var z=f[x++];_[B++]=255&z,_[B++]=z>>8&255,_[B++]=z>>16&255}}function Lt(f,x,k,_,B,z){if(z==0)for(k=x+k;x<k;)ue(_,((z=f[x++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),B+=32;else a(_,B,f,x,k)}function Kt(f,x){K[x][0]=K[f+"0"],K[x][1]=K[f+"1"],K[x][2]=K[f+"2"],K[x][3]=K[f+"3"],K[x][4]=K[f+"4"],K[x][5]=K[f+"5"],K[x][6]=K[f+"6"],K[x][7]=K[f+"7"],K[x][8]=K[f+"8"],K[x][9]=K[f+"9"],K[x][10]=K[f+"10"],K[x][11]=K[f+"11"],K[x][12]=K[f+"12"],K[x][13]=K[f+"13"],K[x][14]=K[f+"0"],K[x][15]=K[f+"0"]}function qt(f){return f==el||f==go||f==Hl||f==Wl}function Je(){this.eb=[],this.size=this.A=this.fb=0}function it(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function lt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Je,this.f.kb=new it,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Bt(f,x){var k=f.T,_=x.ba.f.RGBA,B=_.eb,z=_.fb+f.ka*_.A,G=js[x.ba.S],X=f.y,Z=f.O,ae=f.f,be=f.N,Le=f.ea,oe=f.W,Ne=x.cc,_e=x.dc,qe=x.Mc,Fe=x.Nc,Re=f.ka,Be=f.ka+f.T,We=f.U,Ke=We+1>>1;for(Re==0?G(X,Z,null,null,ae,be,Le,oe,ae,be,Le,oe,B,z,null,null,We):(G(x.ec,x.fc,X,Z,Ne,_e,qe,Fe,ae,be,Le,oe,B,z-_.A,B,z,We),++k);Re+2<Be;Re+=2)Ne=ae,_e=be,qe=Le,Fe=oe,be+=f.Rc,oe+=f.Rc,z+=2*_.A,G(X,(Z+=2*f.fa)-f.fa,X,Z,Ne,_e,qe,Fe,ae,be,Le,oe,B,z-_.A,B,z,We);return Z+=f.fa,f.j+Be<f.o?(a(x.ec,x.fc,X,Z,We),a(x.cc,x.dc,ae,be,Ke),a(x.Mc,x.Nc,Le,oe,Ke),k--):1&Be||G(X,Z,null,null,ae,be,Le,oe,ae,be,Le,oe,B,z+_.A,null,null,We),k}function wr(f,x,k){var _=f.F,B=[f.J];if(_!=null){var z=f.U,G=x.ba.S,X=G==Vl||G==Hl;x=x.ba.f.RGBA;var Z=[0],ae=f.ka;Z[0]=f.T,f.Kb&&(ae==0?--Z[0]:(--ae,B[0]-=f.width),f.j+f.ka+f.T==f.o&&(Z[0]=f.o-f.j-ae));var be=x.eb;ae=x.fb+ae*x.A,f=zl(_,B[0],f.width,z,Z,be,ae+(X?0:3),x.A),r(k==Z),f&&qt(G)&&po(be,ae,X,z,Z,x.A)}return 0}function It(f){var x=f.ma,k=x.ba.S,_=11>k,B=k==Li||k==$l||k==Vl||k==jr||k==12||qt(k);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!as(x.Oa,f,B?11:12))return 0;if(B&&qt(k)&&Rl(),f.da)alert("todo:use_scaling");else{if(_){if(x.Ib=Dt,f.Kb){if(k=f.U+1>>1,x.memory=l(f.U+2*k),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+k,x.Ib=Bt,Rl()}}else alert("todo:EmitYUV");B&&(x.Jb=wr,_&&co())}if(_&&!zn){for(f=0;256>f;++f)ks[f]=89858*(f-128)+ma>>ti,Ss[f]=-22014*(f-128)+ma,sl[f]=-45773*(f-128),vo[f]=113618*(f-128)+ma>>ti;for(f=xr;f<br;++f)x=76283*(f-16)+ma>>ti,Gc[f-xr]=wn(x,255),lh[f-xr]=wn(x+8>>4,15);zn=1}return 1}function ht(f){var x=f.ma,k=f.U,_=f.T;return r(!(1&f.ka)),0>=k||0>=_?0:(k=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,k),x.Dc+=k,1)}function cr(f){f.ma.memory=null}function Lr(f,x,k,_){return T(f,8)!=47?0:(x[0]=T(f,14)+1,k[0]=T(f,14)+1,_[0]=T(f,1),T(f,3)!=0?0:!f.h)}function Or(f,x){if(4>f)return f+1;var k=f-2>>1;return(2+(1&f)<<k)+T(x,k)+1}function Mn(f,x){return 120<x?x-120:1<=(k=((k=lm[x-1])>>4)*f+(8-(15&k)))?k:1;var k}function ar(f,x,k){var _=ne(k),B=f[x+=255&_].g-8;return 0<B&&(V(k,k.u+8),_=ne(k),x+=f[x].value,x+=_&(1<<B)-1),V(k,k.u+f[x].g),f[x].value}function Nr(f,x,k){return k.g+=f.g,k.value+=f.value<<x>>>0,r(8>=k.g),f.g}function tr(f,x,k){var _=f.xc;return r((x=_==0?0:f.vc[f.md*(k>>_)+(x>>_)])<f.Wb),f.Ya[x]}function Bn(f,x,k,_){var B=f.ab,z=f.c*x,G=f.C;x=G+x;var X=k,Z=_;for(_=f.Ta,k=f.Ua;0<B--;){var ae=f.gc[B],be=G,Le=x,oe=X,Ne=Z,_e=(Z=_,X=k,ae.Ea);switch(r(be<Le),r(Le<=ae.nc),ae.hc){case 2:Ko(oe,Ne,(Le-be)*_e,Z,X);break;case 0:var qe=be,Fe=Le,Re=Z,Be=X,We=(vt=ae).Ea;qe==0&&(bs(oe,Ne,null,null,1,Re,Be),wt(oe,Ne+1,0,0,We-1,Re,Be+1),Ne+=We,Be+=We,++qe);for(var Ke=1<<vt.b,At=Ke-1,pt=$e(We,vt.b),Gt=vt.K,vt=vt.w+(qe>>vt.b)*pt;qe<Fe;){var rr=Gt,Gr=vt,Yt=1;for(vs(oe,Ne,Re,Be-We,1,Re,Be);Yt<We;){var gt=(Yt&~At)+Ke;gt>We&&(gt=We),(0,ei[rr[Gr++]>>8&15])(oe,Ne+ +Yt,Re,Be+Yt-We,gt-Yt,Re,Be+Yt),Yt=gt}Ne+=We,Be+=We,++qe&At||(vt+=pt)}Le!=ae.nc&&a(Z,X-_e,Z,X+(Le-be-1)*_e,_e);break;case 1:for(_e=oe,Fe=Ne,We=(oe=ae.Ea)-(Be=oe&~(Re=(Ne=1<<ae.b)-1)),qe=$e(oe,ae.b),Ke=ae.K,ae=ae.w+(be>>ae.b)*qe;be<Le;){for(At=Ke,pt=ae,Gt=new De,vt=Fe+Be,rr=Fe+oe;Fe<vt;)dt(At[pt++],Gt),Ea(Gt,_e,Fe,Ne,Z,X),Fe+=Ne,X+=Ne;Fe<rr&&(dt(At[pt++],Gt),Ea(Gt,_e,Fe,We,Z,X),Fe+=We,X+=We),++be&Re||(ae+=qe)}break;case 3:if(oe==Z&&Ne==X&&0<ae.b){for(Fe=Z,oe=_e=X+(Le-be)*_e-(Be=(Le-be)*$e(ae.Ea,ae.b)),Ne=Z,Re=X,qe=[],Be=(We=Be)-1;0<=Be;--Be)qe[Be]=Ne[Re+Be];for(Be=We-1;0<=Be;--Be)Fe[oe+Be]=qe[Be];Di(ae,be,Le,Z,_e,Z,X)}else Di(ae,be,Le,oe,Ne,Z,X)}X=_,Z=k}Z!=k&&a(_,k,X,Z,z)}function bn(f,x){var k=f.V,_=f.Ba+f.c*f.C,B=x-f.C;if(r(x<=f.l.o),r(16>=B),0<B){var z=f.l,G=f.Ta,X=f.Ua,Z=z.width;if(Bn(f,B,k,_),B=X=[X],r((k=f.C)<(_=x)),r(z.v<z.va),_>z.o&&(_=z.o),k<z.j){var ae=z.j-k;k=z.j,B[0]+=ae*Z}if(k>=_?k=0:(B[0]+=4*z.v,z.ka=k-z.j,z.U=z.va-z.v,z.T=_-k,k=1),k){if(X=X[0],11>(k=f.ca).S){var be=k.f.RGBA,Le=(_=k.S,B=z.U,z=z.T,ae=be.eb,be.A),oe=z;for(be=be.fb+f.Ma*be.A;0<oe--;){var Ne=G,_e=X,qe=B,Fe=ae,Re=be;switch(_){case $c:Jo(Ne,_e,qe,Fe,Re);break;case Li:ws(Ne,_e,qe,Fe,Re);break;case el:ws(Ne,_e,qe,Fe,Re),po(Fe,Re,0,qe,1,0);break;case nh:_r(Ne,_e,qe,Fe,Re);break;case $l:Lt(Ne,_e,qe,Fe,Re,1);break;case go:Lt(Ne,_e,qe,Fe,Re,1),po(Fe,Re,0,qe,1,0);break;case Vl:Lt(Ne,_e,qe,Fe,Re,0);break;case Hl:Lt(Ne,_e,qe,Fe,Re,0),po(Fe,Re,1,qe,1,0);break;case jr:Fa(Ne,_e,qe,Fe,Re);break;case Wl:Fa(Ne,_e,qe,Fe,Re),Vd(Fe,Re,qe,1,0);break;case Vc:Pr(Ne,_e,qe,Fe,Re);break;default:r(0)}X+=Z,be+=Le}f.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");r(f.Ma<=k.height)}}f.C=x,r(f.C<=f.i)}function yr(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var k=f.Ya[x].G,_=f.Ya[x].H;if(0<k[1][_[1]+0].g||0<k[2][_[2]+0].g||0<k[3][_[3]+0].g)return 0}return 1}function ns(f,x,k,_,B,z){if(f.Z!=0){var G=f.qd,X=f.rd;for(r(Kn[f.Z]!=null);x<k;++x)Kn[f.Z](G,X,_,B,_,B,z),G=_,X=B,B+=z;f.qd=G,f.rd=X}}function Hr(f,x){var k=f.l.ma,_=k.Z==0||k.Z==1?f.l.j:f.C;if(_=f.C<_?_:f.C,r(x<=f.l.o),x>_){var B=f.l.width,z=k.ca,G=k.tb+B*_,X=f.V,Z=f.Ba+f.c*_,ae=f.gc;r(f.ab==1),r(ae[0].hc==3),ho(ae[0],_,x,X,Z,z,G),ns(k,_,x,z,G,B)}f.C=f.Ma=x}function Un(f,x,k,_,B,z,G){var X=f.$/_,Z=f.$%_,ae=f.m,be=f.s,Le=k+f.$,oe=Le;B=k+_*B;var Ne=k+_*z,_e=280+be.ua,qe=f.Pb?X:16777216,Fe=0<be.ua?be.Wa:null,Re=be.wc,Be=Le<Ne?tr(be,Z,X):null;r(f.C<z),r(Ne<=B);var We=!1;e:for(;;){for(;We||Le<Ne;){var Ke=0;if(X>=qe){var At=Le-k;r((qe=f).Pb),qe.wd=qe.m,qe.xd=At,0<qe.s.ua&&He(qe.s.Wa,qe.s.vb),qe=X+Wc}if(Z&Re||(Be=tr(be,Z,X)),r(Be!=null),Be.Qb&&(x[Le]=Be.qb,We=!0),!We)if(fe(ae),Be.jc){Ke=ae,At=x;var pt=Le,Gt=Be.pd[ne(Ke)&os-1];r(Be.jc),256>Gt.g?(V(Ke,Ke.u+Gt.g),At[pt]=Gt.value,Ke=0):(V(Ke,Ke.u+Gt.g-256),r(256<=Gt.value),Ke=Gt.value),Ke==0&&(We=!0)}else Ke=ar(Be.G[0],Be.H[0],ae);if(ae.h)break;if(We||256>Ke){if(!We)if(Be.nd)x[Le]=(Be.qb|Ke<<8)>>>0;else{if(fe(ae),We=ar(Be.G[1],Be.H[1],ae),fe(ae),At=ar(Be.G[2],Be.H[2],ae),pt=ar(Be.G[3],Be.H[3],ae),ae.h)break;x[Le]=(pt<<24|We<<16|Ke<<8|At)>>>0}if(We=!1,++Le,++Z>=_&&(Z=0,++X,G!=null&&X<=z&&!(X%16)&&G(f,X),Fe!=null))for(;oe<Le;)Ke=x[oe++],Fe.X[(506832829*Ke&4294967295)>>>Fe.Mb]=Ke}else if(280>Ke){if(Ke=Or(Ke-256,ae),At=ar(Be.G[4],Be.H[4],ae),fe(ae),At=Mn(_,At=Or(At,ae)),ae.h)break;if(Le-k<At||B-Le<Ke)break e;for(pt=0;pt<Ke;++pt)x[Le+pt]=x[Le+pt-At];for(Le+=Ke,Z+=Ke;Z>=_;)Z-=_,++X,G!=null&&X<=z&&!(X%16)&&G(f,X);if(r(Le<=B),Z&Re&&(Be=tr(be,Z,X)),Fe!=null)for(;oe<Le;)Ke=x[oe++],Fe.X[(506832829*Ke&4294967295)>>>Fe.Mb]=Ke}else{if(!(Ke<_e))break e;for(We=Ke-280,r(Fe!=null);oe<Le;)Ke=x[oe++],Fe.X[(506832829*Ke&4294967295)>>>Fe.Mb]=Ke;Ke=Le,r(!(We>>>(At=Fe).Xa)),x[Ke]=At.X[We],We=!0}We||r(ae.h==ie(ae))}if(f.Pb&&ae.h&&Le<B)r(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&He(f.s.vb,f.s.Wa);else{if(ae.h)break e;G?.(f,X>z?z:X),f.a=0,f.$=Le-k}return 1}return f.a=3,0}function ln(f){r(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,r(f!=null)}function Qi(){var f=new qr;return f==null?null:(f.a=0,f.xb=rl,Kt("Predictor","VP8LPredictors"),Kt("Predictor","VP8LPredictors_C"),Kt("PredictorAdd","VP8LPredictorsAdd"),Kt("PredictorAdd","VP8LPredictorsAdd_C"),Ko=ot,Ea=Pt,Jo=mr,ws=Xt,Fa=ct,Pr=Mt,_r=Zt,K.VP8LMapColor32b=Yo,K.VP8LMapColor8b=Za,f)}function oa(f,x,k,_,B){var z=1,G=[f],X=[x],Z=_.m,ae=_.s,be=null,Le=0;e:for(;;){if(k)for(;z&&T(Z,1);){var oe=G,Ne=X,_e=_,qe=1,Fe=_e.m,Re=_e.gc[_e.ab],Be=T(Fe,2);if(_e.Oc&1<<Be)z=0;else{switch(_e.Oc|=1<<Be,Re.hc=Be,Re.Ea=oe[0],Re.nc=Ne[0],Re.K=[null],++_e.ab,r(4>=_e.ab),Be){case 0:case 1:Re.b=T(Fe,3)+2,qe=oa($e(Re.Ea,Re.b),$e(Re.nc,Re.b),0,_e,Re.K),Re.K=Re.K[0];break;case 3:var We,Ke=T(Fe,8)+1,At=16<Ke?0:4<Ke?1:2<Ke?2:3;if(oe[0]=$e(Re.Ea,At),Re.b=At,We=qe=oa(Ke,1,0,_e,Re.K)){var pt,Gt=Ke,vt=Re,rr=1<<(8>>vt.b),Gr=l(rr);if(Gr==null)We=0;else{var Yt=vt.K[0],gt=vt.w;for(Gr[0]=vt.K[0][0],pt=1;pt<1*Gt;++pt)Gr[pt]=le(Yt[gt+pt],Gr[pt-1]);for(;pt<4*rr;++pt)Gr[pt]=0;vt.K[0]=null,vt.K[0]=Gr,We=1}}qe=We;break;case 2:break;default:r(0)}z=qe}}if(G=G[0],X=X[0],z&&T(Z,1)&&!(z=1<=(Le=T(Z,4))&&11>=Le)){_.a=3;break e}var st;if(st=z)t:{var tn,zt,er,Dr=_,En=G,hn=X,zr=Le,jn=k,Fn=Dr.m,Rr=Dr.s,ir=[null],ur=1,Mr=0,hr=ah[zr];r:for(;;){if(jn&&T(Fn,1)){var Kr=T(Fn,3)+2,Yr=$e(En,Kr),kr=$e(hn,Kr),Yn=Yr*kr;if(!oa(Yr,kr,0,Dr,ir))break r;for(ir=ir[0],Rr.xc=Kr,tn=0;tn<Yn;++tn){var vr=ir[tn]>>8&65535;ir[tn]=vr,vr>=ur&&(ur=vr+1)}}if(Fn.h)break r;for(zt=0;5>zt;++zt){var Sr=xo[zt];!zt&&0<zr&&(Sr+=1<<zr),Mr<Sr&&(Mr=Sr)}var fn=d(ur*hr,H),$n=ur,As=d($n,we);if(As==null)var rn=null;else r(65536>=$n),rn=As;var nn=l(Mr);if(rn==null||nn==null||fn==null){Dr.a=1;break r}var Jn=fn;for(tn=er=0;tn<ur;++tn){var Ar=rn[tn],Qn=Ar.G,Xs=Ar.H,pa=0,In=1,sn=0;for(zt=0;5>zt;++zt){Sr=xo[zt],Qn[zt]=Jn,Xs[zt]=er,!zt&&0<zr&&(Sr+=1<<zr);s:{var Ii,ni=Sr,al=Dr,Ra=nn,dh=Jn,ru=er,Fr=0,ga=al.m,nu=T(ga,1);if(o(Ra,0,0,ni),nu){var su=T(ga,1)+1,Kc=T(ga,1),Yc=T(ga,Kc==0?1:8);Ra[Yc]=1,su==2&&(Ra[Yc=T(ga,8)]=1);var Ma=1}else{var Br=l(19),mn=T(ga,4)+4;if(19<mn){al.a=3;var an=0;break s}for(Ii=0;Ii<mn;++Ii)Br[om[Ii]]=T(ga,3);var il=void 0,si=void 0,ol=al,fm=Br,kn=ni,Jc=Ra,Ql=0,Ba=ol.m,xa=8,Bs=d(128,H);n:for(;I(Bs,0,7,fm,19);){if(T(Ba,1)){var Xl=2+2*T(Ba,3);if((il=2+T(Ba,Xl))>kn)break n}else il=kn;for(si=0;si<kn&&il--;){fe(Ba);var Qc=Bs[0+(127&ne(Ba))];V(Ba,Ba.u+Qc.g);var Ti=Qc.value;if(16>Ti)Jc[si++]=Ti,Ti!=0&&(xa=Ti);else{var uh=Ti==16,au=Ti-16,hh=Hc[au],iu=T(Ba,Gl[au])+hh;if(si+iu>kn)break n;for(var fh=uh?xa:0;0<iu--;)Jc[si++]=fh}}Ql=1;break n}Ql||(ol.a=3),Ma=Ql}(Ma=Ma&&!ga.h)&&(Fr=I(dh,ru,8,Ra,ni)),Ma&&Fr!=0?an=Fr:(al.a=3,an=0)}if(an==0)break r;if(In&&sh[zt]==1&&(In=Jn[er].g==0),pa+=Jn[er].g,er+=an,3>=zt){var ll,Xc=nn[0];for(ll=1;ll<Sr;++ll)nn[ll]>Xc&&(Xc=nn[ll]);sn+=Xc}}if(Ar.nd=In,Ar.Qb=0,In&&(Ar.qb=(Qn[3][Xs[3]+0].value<<24|Qn[1][Xs[1]+0].value<<16|Qn[2][Xs[2]+0].value)>>>0,pa==0&&256>Qn[0][Xs[0]+0].value&&(Ar.Qb=1,Ar.qb+=Qn[0][Xs[0]+0].value<<8)),Ar.jc=!Ar.Qb&&6>sn,Ar.jc){var Zl,Us=Ar;for(Zl=0;Zl<os;++Zl){var ai=Zl,ya=Us.pd[ai],No=Us.G[0][Us.H[0]+ai];256<=No.value?(ya.g=No.g+256,ya.value=No.value):(ya.g=0,ya.value=0,ai>>=Nr(No,8,ya),ai>>=Nr(Us.G[1][Us.H[1]+ai],16,ya),ai>>=Nr(Us.G[2][Us.H[2]+ai],0,ya),Nr(Us.G[3][Us.H[3]+ai],24,ya))}}}Rr.vc=ir,Rr.Wb=ur,Rr.Ya=rn,Rr.yc=fn,st=1;break t}st=0}if(!(z=st)){_.a=3;break e}if(0<Le){if(ae.ua=1<<Le,!W(ae.Wa,Le)){_.a=1,z=0;break e}}else ae.ua=0;var Zc=_,ed=G,mh=X,td=Zc.s,rd=td.xc;if(Zc.c=ed,Zc.i=mh,td.md=$e(ed,rd),td.wc=rd==0?-1:(1<<rd)-1,k){_.xb=Oa;break e}if((be=l(G*X))==null){_.a=1,z=0;break e}z=(z=Un(_,be,0,G,X,X,null))&&!Z.h;break e}return z?(B!=null?B[0]=be:(r(be==null),r(k)),_.$=0,k||ln(ae)):ln(ae),z}function wi(f,x){var k=f.c*f.i,_=k+x+16*x;return r(f.c<=x),f.V=l(_),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+k+x,1)}function Xi(f,x){var k=f.C,_=x-k,B=f.V,z=f.Ba+f.c*k;for(r(x<=f.l.o);0<_;){var G=16<_?16:_,X=f.l.ma,Z=f.l.width,ae=Z*G,be=X.ca,Le=X.tb+Z*k,oe=f.Ta,Ne=f.Ua;Bn(f,G,B,z),Hd(oe,Ne,be,Le,ae),ns(X,k,k+G,be,Le,Z),_-=G,B+=G*f.c,k+=G}r(k==x),f.C=f.Ma=x}function Zi(){this.ub=this.yd=this.td=this.Rb=0}function Ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Md(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Er(){this.Yb=(function(){var f=[];return(function x(k,_,B){for(var z=B[_],G=0;G<z&&(k.push(B.length>_+1?[]:0),!(B.length<_+1));G++)x(k[G],_+1,B)})(f,0,[3,11]),f})()}function Ac(){this.jb=l(3),this.Wc=u([4,8],Er),this.Xc=u([4,17],Er)}function Mo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ts(){this.ld=this.La=this.dd=this.tc=0}function Ni(){this.Na=this.la=0}function Cc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Bo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ts),this.Y=0,this.ya=Array(new Bo),this.aa=0,this.l=new Wn}function Os(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Pc(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Zi,this.Kc=new Ro,this.ed=new Mo,this.Qa=new Md,this.Ic=this.$c=this.Aa=0,this.D=new eo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,L),this.ia=0,this.pb=d(4,Cc),this.Pa=new Ac,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Os),this.Hd=0,this.rb=Array(new Ni),this.sb=0,this.wa=Array(new Ts),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Bo),this.L=this.aa=0,this.gd=u([4,2],Ts),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bd(){var f=new Pc;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,yo||(yo=Gs)),f}function cn(f,x,k){return f.a==0&&(f.a=x,f.sc=k,f.cb=0),0}function _c(f,x,k){return 3<=k&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function to(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return cn(f,2,"null VP8Io passed to VP8GetHeaders()");var k=x.data,_=x.w,B=x.ha;if(4>B)return cn(f,7,"Truncated header.");var z=k[_+0]|k[_+1]<<8|k[_+2]<<16,G=f.Od;if(G.Rb=!(1&z),G.td=z>>1&7,G.yd=z>>4&1,G.ub=z>>5,3<G.td)return cn(f,3,"Incorrect keyframe parameters.");if(!G.yd)return cn(f,4,"Frame not displayable.");_+=3,B-=3;var X=f.Kc;if(G.Rb){if(7>B)return cn(f,7,"cannot parse picture header");if(!_c(k,_,B))return cn(f,3,"Bad code word");X.c=16383&(k[_+4]<<8|k[_+3]),X.Td=k[_+4]>>6,X.i=16383&(k[_+6]<<8|k[_+5]),X.Ud=k[_+6]>>6,_+=7,B-=7,f.za=X.c+15>>4,f.Ub=X.i+15>>4,x.width=X.c,x.height=X.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o((z=f.Pa).jb,0,255,z.jb.length),r((z=f.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,o(z.Zb,0,0,z.Zb.length),o(z.Lb,0,0,z.Lb)}if(G.ub>B)return cn(f,7,"bad partition length");se(z=f.m,k,_,G.ub),_+=G.ub,B-=G.ub,G.Rb&&(X.Ld=pe(z),X.Kd=pe(z)),X=f.Qa;var Z,ae=f.Pa;if(r(z!=null),r(X!=null),X.Cb=pe(z),X.Cb){if(X.Bb=pe(z),pe(z)){for(X.Fb=pe(z),Z=0;4>Z;++Z)X.Zb[Z]=pe(z)?ee(z,7):0;for(Z=0;4>Z;++Z)X.Lb[Z]=pe(z)?ee(z,6):0}if(X.Bb)for(Z=0;3>Z;++Z)ae.jb[Z]=pe(z)?$(z,8):255}else X.Bb=0;if(z.Ka)return cn(f,3,"cannot parse segment header");if((X=f.ed).zd=pe(z),X.Tb=$(z,6),X.wb=$(z,3),X.Pc=pe(z),X.Pc&&pe(z)){for(ae=0;4>ae;++ae)pe(z)&&(X.vd[ae]=ee(z,6));for(ae=0;4>ae;++ae)pe(z)&&(X.od[ae]=ee(z,6))}if(f.L=X.Tb==0?0:X.zd?1:2,z.Ka)return cn(f,3,"cannot parse filter header");var be=B;if(B=Z=_,_=Z+be,X=be,f.Xb=(1<<$(f.m,2))-1,be<3*(ae=f.Xb))k=7;else{for(Z+=3*ae,X-=3*ae,be=0;be<ae;++be){var Le=k[B+0]|k[B+1]<<8|k[B+2]<<16;Le>X&&(Le=X),se(f.Jc[+be],k,Z,Le),Z+=Le,X-=Le,B+=3}se(f.Jc[+ae],k,Z,X),k=Z<_?0:5}if(k!=0)return cn(f,k,"cannot parse partitions");for(k=$(Z=f.m,7),B=pe(Z)?ee(Z,4):0,_=pe(Z)?ee(Z,4):0,X=pe(Z)?ee(Z,4):0,ae=pe(Z)?ee(Z,4):0,Z=pe(Z)?ee(Z,4):0,be=f.Qa,Le=0;4>Le;++Le){if(be.Cb){var oe=be.Zb[Le];be.Fb||(oe+=k)}else{if(0<Le){f.pb[Le]=f.pb[0];continue}oe=k}var Ne=f.pb[Le];Ne.Sc[0]=tl[wn(oe+B,127)],Ne.Sc[1]=Kl[wn(oe+0,127)],Ne.Eb[0]=2*tl[wn(oe+_,127)],Ne.Eb[1]=101581*Kl[wn(oe+X,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=tl[wn(oe+ae,117)],Ne.Qc[1]=Kl[wn(oe+Z,127)],Ne.lc=oe+Z}if(!G.Rb)return cn(f,4,"Not a key frame.");for(pe(z),G=f.Pa,k=0;4>k;++k){for(B=0;8>B;++B)for(_=0;3>_;++_)for(X=0;11>X;++X)ae=Ce(z,dm[k][B][_][X])?$(z,8):oh[k][B][_][X],G.Wc[k][B].Yb[_][X]=ae;for(B=0;17>B;++B)G.Xc[k][B]=G.Wc[k][Zd[B]]}return f.kc=pe(z),f.kc&&(f.Bd=$(z,8)),f.cb=1}function Gs(f,x,k,_,B,z,G){var X=x[B].Yb[k];for(k=0;16>B;++B){if(!Ce(f,X[k+0]))return B;for(;!Ce(f,X[k+1]);)if(X=x[++B].Yb[0],k=0,B==16)return 16;var Z=x[B+1].Yb;if(Ce(f,X[k+2])){var ae=f,be=0;if(Ce(ae,(oe=X)[(Le=k)+3]))if(Ce(ae,oe[Le+6])){for(X=0,Le=2*(be=Ce(ae,oe[Le+8]))+(oe=Ce(ae,oe[Le+9+be])),be=0,oe=Qd[Le];oe[X];++X)be+=be+Ce(ae,oe[X]);be+=3+(8<<Le)}else Ce(ae,oe[Le+7])?(be=7+2*Ce(ae,165),be+=Ce(ae,145)):be=5+Ce(ae,159);else be=Ce(ae,oe[Le+4])?3+Ce(ae,oe[Le+5]):2;X=Z[2]}else be=1,X=Z[1];Z=G+Xd[B],0>(ae=f).b&&he(ae);var Le,oe=ae.b,Ne=(Le=ae.Ca>>1)-(ae.I>>oe)>>31;--ae.b,ae.Ca+=Ne,ae.Ca|=1,ae.I-=(Le+1&Ne)<<oe,z[Z]=((be^Ne)-Ne)*_[(0<B)+0]}return 16}function la(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function gs(f,x,k,_,B){B=f[x+k+32*_]+(B>>3),f[x+k+32*_]=-256&B?0>B?0:255:B}function ro(f,x,k,_,B,z){gs(f,x,0,k,_+B),gs(f,x,1,k,_+z),gs(f,x,2,k,_-z),gs(f,x,3,k,_-B)}function Xr(f){return(20091*f>>16)+f}function no(f,x,k,_){var B,z=0,G=l(16);for(B=0;4>B;++B){var X=f[x+0]+f[x+8],Z=f[x+0]-f[x+8],ae=(35468*f[x+4]>>16)-Xr(f[x+12]),be=Xr(f[x+4])+(35468*f[x+12]>>16);G[z+0]=X+be,G[z+1]=Z+ae,G[z+2]=Z-ae,G[z+3]=X-be,z+=4,x++}for(B=z=0;4>B;++B)X=(f=G[z+0]+4)+G[z+8],Z=f-G[z+8],ae=(35468*G[z+4]>>16)-Xr(G[z+12]),gs(k,_,0,0,X+(be=Xr(G[z+4])+(35468*G[z+12]>>16))),gs(k,_,1,0,Z+ae),gs(k,_,2,0,Z-ae),gs(k,_,3,0,X-be),z++,_+=32}function Dc(f,x,k,_){var B=f[x+0]+4,z=35468*f[x+4]>>16,G=Xr(f[x+4]),X=35468*f[x+1]>>16;ro(k,_,0,B+G,f=Xr(f[x+1]),X),ro(k,_,1,B+z,f,X),ro(k,_,2,B-z,f,X),ro(k,_,3,B-G,f,X)}function El(f,x,k,_,B){no(f,x,k,_),B&&no(f,x+16,k,_+4)}function so(f,x,k,_){en(f,x+0,k,_,1),en(f,x+32,k,_+128,1)}function Aa(f,x,k,_){var B;for(f=f[x+0]+4,B=0;4>B;++B)for(x=0;4>x;++x)gs(k,_,x,B,f)}function Uo(f,x,k,_){f[x+0]&&fa(f,x+0,k,_),f[x+16]&&fa(f,x+16,k,_+4),f[x+32]&&fa(f,x+32,k,_+128),f[x+48]&&fa(f,x+48,k,_+128+4)}function lr(f,x,k,_){var B,z=l(16);for(B=0;4>B;++B){var G=f[x+0+B]+f[x+12+B],X=f[x+4+B]+f[x+8+B],Z=f[x+4+B]-f[x+8+B],ae=f[x+0+B]-f[x+12+B];z[0+B]=G+X,z[8+B]=G-X,z[4+B]=ae+Z,z[12+B]=ae-Z}for(B=0;4>B;++B)G=(f=z[0+4*B]+3)+z[3+4*B],X=z[1+4*B]+z[2+4*B],Z=z[1+4*B]-z[2+4*B],ae=f-z[3+4*B],k[_+0]=G+X>>3,k[_+16]=ae+Z>>3,k[_+32]=G-X>>3,k[_+48]=ae-Z>>3,_+=64}function Va(f,x,k){var _,B=x-32,z=ls,G=255-f[B-1];for(_=0;_<k;++_){var X,Z=z,ae=G+f[x-1];for(X=0;X<k;++X)f[x+X]=Z[ae+f[B+X]];x+=32}}function qo(f,x){Va(f,x,4)}function Fl(f,x){Va(f,x,8)}function Lc(f,x){Va(f,x,16)}function Ec(f,x){var k;for(k=0;16>k;++k)a(f,x+32*k,f,x-32,16)}function zo(f,x){var k;for(k=16;0<k;--k)o(f,x,f[x-1],16),x+=32}function Ha(f,x,k){var _;for(_=0;16>_;++_)o(x,k+32*_,f,16)}function ca(f,x){var k,_=16;for(k=0;16>k;++k)_+=f[x-1+32*k]+f[x+k-32];Ha(_>>5,f,x)}function Ca(f,x){var k,_=8;for(k=0;16>k;++k)_+=f[x-1+32*k];Ha(_>>4,f,x)}function xs(f,x){var k,_=8;for(k=0;16>k;++k)_+=f[x+k-32];Ha(_>>4,f,x)}function Ks(f,x){Ha(128,f,x)}function Ut(f,x,k){return f+2*x+k+2>>2}function ao(f,x){var k,_=x-32;for(_=new Uint8Array([Ut(f[_-1],f[_+0],f[_+1]),Ut(f[_+0],f[_+1],f[_+2]),Ut(f[_+1],f[_+2],f[_+3]),Ut(f[_+2],f[_+3],f[_+4])]),k=0;4>k;++k)a(f,x+32*k,_,0,_.length)}function Pa(f,x){var k=f[x-1],_=f[x-1+32],B=f[x-1+64],z=f[x-1+96];ue(f,x+0,16843009*Ut(f[x-1-32],k,_)),ue(f,x+32,16843009*Ut(k,_,B)),ue(f,x+64,16843009*Ut(_,B,z)),ue(f,x+96,16843009*Ut(B,z,z))}function Ud(f,x){var k,_=4;for(k=0;4>k;++k)_+=f[x+k-32]+f[x-1+32*k];for(_>>=3,k=0;4>k;++k)o(f,x+32*k,_,4)}function Fc(f,x){var k=f[x-1+0],_=f[x-1+32],B=f[x-1+64],z=f[x-1-32],G=f[x+0-32],X=f[x+1-32],Z=f[x+2-32],ae=f[x+3-32];f[x+0+96]=Ut(_,B,f[x-1+96]),f[x+1+96]=f[x+0+64]=Ut(k,_,B),f[x+2+96]=f[x+1+64]=f[x+0+32]=Ut(z,k,_),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=Ut(G,z,k),f[x+3+64]=f[x+2+32]=f[x+1+0]=Ut(X,G,z),f[x+3+32]=f[x+2+0]=Ut(Z,X,G),f[x+3+0]=Ut(ae,Z,X)}function Rs(f,x){var k=f[x+1-32],_=f[x+2-32],B=f[x+3-32],z=f[x+4-32],G=f[x+5-32],X=f[x+6-32],Z=f[x+7-32];f[x+0+0]=Ut(f[x+0-32],k,_),f[x+1+0]=f[x+0+32]=Ut(k,_,B),f[x+2+0]=f[x+1+32]=f[x+0+64]=Ut(_,B,z),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=Ut(B,z,G),f[x+3+32]=f[x+2+64]=f[x+1+96]=Ut(z,G,X),f[x+3+64]=f[x+2+96]=Ut(G,X,Z),f[x+3+96]=Ut(X,Z,Z)}function Wa(f,x){var k=f[x-1+0],_=f[x-1+32],B=f[x-1+64],z=f[x-1-32],G=f[x+0-32],X=f[x+1-32],Z=f[x+2-32],ae=f[x+3-32];f[x+0+0]=f[x+1+64]=z+G+1>>1,f[x+1+0]=f[x+2+64]=G+X+1>>1,f[x+2+0]=f[x+3+64]=X+Z+1>>1,f[x+3+0]=Z+ae+1>>1,f[x+0+96]=Ut(B,_,k),f[x+0+64]=Ut(_,k,z),f[x+0+32]=f[x+1+96]=Ut(k,z,G),f[x+1+32]=f[x+2+96]=Ut(z,G,X),f[x+2+32]=f[x+3+96]=Ut(G,X,Z),f[x+3+32]=Ut(X,Z,ae)}function Ic(f,x){var k=f[x+0-32],_=f[x+1-32],B=f[x+2-32],z=f[x+3-32],G=f[x+4-32],X=f[x+5-32],Z=f[x+6-32],ae=f[x+7-32];f[x+0+0]=k+_+1>>1,f[x+1+0]=f[x+0+64]=_+B+1>>1,f[x+2+0]=f[x+1+64]=B+z+1>>1,f[x+3+0]=f[x+2+64]=z+G+1>>1,f[x+0+32]=Ut(k,_,B),f[x+1+32]=f[x+0+96]=Ut(_,B,z),f[x+2+32]=f[x+1+96]=Ut(B,z,G),f[x+3+32]=f[x+2+96]=Ut(z,G,X),f[x+3+64]=Ut(G,X,Z),f[x+3+96]=Ut(X,Z,ae)}function $o(f,x){var k=f[x-1+0],_=f[x-1+32],B=f[x-1+64],z=f[x-1+96];f[x+0+0]=k+_+1>>1,f[x+2+0]=f[x+0+32]=_+B+1>>1,f[x+2+32]=f[x+0+64]=B+z+1>>1,f[x+1+0]=Ut(k,_,B),f[x+3+0]=f[x+1+32]=Ut(_,B,z),f[x+3+32]=f[x+1+64]=Ut(B,z,z),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=z}function io(f,x){var k=f[x-1+0],_=f[x-1+32],B=f[x-1+64],z=f[x-1+96],G=f[x-1-32],X=f[x+0-32],Z=f[x+1-32],ae=f[x+2-32];f[x+0+0]=f[x+2+32]=k+G+1>>1,f[x+0+32]=f[x+2+64]=_+k+1>>1,f[x+0+64]=f[x+2+96]=B+_+1>>1,f[x+0+96]=z+B+1>>1,f[x+3+0]=Ut(X,Z,ae),f[x+2+0]=Ut(G,X,Z),f[x+1+0]=f[x+3+32]=Ut(k,G,X),f[x+1+32]=f[x+3+64]=Ut(_,k,G),f[x+1+64]=f[x+3+96]=Ut(B,_,k),f[x+1+96]=Ut(z,B,_)}function Il(f,x){var k;for(k=0;8>k;++k)a(f,x+32*k,f,x-32,8)}function da(f,x){var k;for(k=0;8>k;++k)o(f,x,f[x-1],8),x+=32}function _a(f,x,k){var _;for(_=0;8>_;++_)o(x,k+32*_,f,8)}function ua(f,x){var k,_=8;for(k=0;8>k;++k)_+=f[x+k-32]+f[x-1+32*k];_a(_>>4,f,x)}function Vo(f,x){var k,_=4;for(k=0;8>k;++k)_+=f[x+k-32];_a(_>>3,f,x)}function Tl(f,x){var k,_=4;for(k=0;8>k;++k)_+=f[x-1+32*k];_a(_>>3,f,x)}function Ol(f,x){_a(128,f,x)}function Ga(f,x,k){var _=f[x-k],B=f[x+0],z=3*(B-_)+Ta[1020+f[x-2*k]-f[x+k]],G=Zo[112+(z+4>>3)];f[x-k]=ls[255+_+Zo[112+(z+3>>3)]],f[x+0]=ls[255+B-G]}function Da(f,x,k,_){var B=f[x+0],z=f[x+k];return Js[255+f[x-2*k]-f[x-k]]>_||Js[255+z-B]>_}function oo(f,x,k,_){return 4*Js[255+f[x-k]-f[x+0]]+Js[255+f[x-2*k]-f[x+k]]<=_}function lo(f,x,k,_,B){var z=f[x-3*k],G=f[x-2*k],X=f[x-k],Z=f[x+0],ae=f[x+k],be=f[x+2*k],Le=f[x+3*k];return 4*Js[255+X-Z]+Js[255+G-ae]>_?0:Js[255+f[x-4*k]-z]<=B&&Js[255+z-G]<=B&&Js[255+G-X]<=B&&Js[255+Le-be]<=B&&Js[255+be-ae]<=B&&Js[255+ae-Z]<=B}function Ys(f,x,k,_){var B=2*_+1;for(_=0;16>_;++_)oo(f,x+_,k,B)&&Ga(f,x+_,k)}function Ka(f,x,k,_){var B=2*_+1;for(_=0;16>_;++_)oo(f,x+_*k,1,B)&&Ga(f,x+_*k,1)}function ji(f,x,k,_){var B;for(B=3;0<B;--B)Ys(f,x+=4*k,k,_)}function Ho(f,x,k,_){var B;for(B=3;0<B;--B)Ka(f,x+=4,k,_)}function Gn(f,x,k,_,B,z,G,X){for(z=2*z+1;0<B--;){if(lo(f,x,k,z,G))if(Da(f,x,k,X))Ga(f,x,k);else{var Z=f,ae=x,be=k,Le=Z[ae-2*be],oe=Z[ae-be],Ne=Z[ae+0],_e=Z[ae+be],qe=Z[ae+2*be],Fe=27*(Be=Ta[1020+3*(Ne-oe)+Ta[1020+Le-_e]])+63>>7,Re=18*Be+63>>7,Be=9*Be+63>>7;Z[ae-3*be]=ls[255+Z[ae-3*be]+Be],Z[ae-2*be]=ls[255+Le+Re],Z[ae-be]=ls[255+oe+Fe],Z[ae+0]=ls[255+Ne-Fe],Z[ae+be]=ls[255+_e-Re],Z[ae+2*be]=ls[255+qe-Be]}x+=_}}function Ms(f,x,k,_,B,z,G,X){for(z=2*z+1;0<B--;){if(lo(f,x,k,z,G))if(Da(f,x,k,X))Ga(f,x,k);else{var Z=f,ae=x,be=k,Le=Z[ae-be],oe=Z[ae+0],Ne=Z[ae+be],_e=Zo[112+(4+(qe=3*(oe-Le))>>3)],qe=Zo[112+(qe+3>>3)],Fe=_e+1>>1;Z[ae-2*be]=ls[255+Z[ae-2*be]+Fe],Z[ae-be]=ls[255+Le+qe],Z[ae+0]=ls[255+oe-_e],Z[ae+be]=ls[255+Ne-Fe]}x+=_}}function w(f,x,k,_,B,z){Gn(f,x,k,1,16,_,B,z)}function R(f,x,k,_,B,z){Gn(f,x,1,k,16,_,B,z)}function ce(f,x,k,_,B,z){var G;for(G=3;0<G;--G)Ms(f,x+=4*k,k,1,16,_,B,z)}function ye(f,x,k,_,B,z){var G;for(G=3;0<G;--G)Ms(f,x+=4,1,k,16,_,B,z)}function Ae(f,x,k,_,B,z,G,X){Gn(f,x,B,1,8,z,G,X),Gn(k,_,B,1,8,z,G,X)}function Ve(f,x,k,_,B,z,G,X){Gn(f,x,1,B,8,z,G,X),Gn(k,_,1,B,8,z,G,X)}function Qe(f,x,k,_,B,z,G,X){Ms(f,x+4*B,B,1,8,z,G,X),Ms(k,_+4*B,B,1,8,z,G,X)}function xt(f,x,k,_,B,z,G,X){Ms(f,x+4,1,B,8,z,G,X),Ms(k,_+4,1,B,8,z,G,X)}function bt(){this.ba=new lt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dr(){this.ua=0,this.Wa=new je,this.vb=new je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new we,this.yc=new H}function qr(){this.xb=this.a=0,this.l=new Wn,this.ca=new lt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dr,this.ab=0,this.gc=d(4,Wt),this.Oc=0}function dn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pr(f,x,k,_,B,z,G){for(f=f==null?0:f[x+0],x=0;x<G;++x)B[z+x]=f+k[_+x]&255,f=B[z+x]}function vn(f,x,k,_,B,z,G){var X;if(f==null)pr(null,null,k,_,B,z,G);else for(X=0;X<G;++X)B[z+X]=f[x+X]+k[_+X]&255}function un(f,x,k,_,B,z,G){if(f==null)pr(null,null,k,_,B,z,G);else{var X,Z=f[x+0],ae=Z,be=Z;for(X=0;X<G;++X)ae=be+(Z=f[x+X])-ae,be=k[_+X]+(-256&ae?0>ae?0:255:ae)&255,ae=Z,B[z+X]=be}}function qn(f,x,k,_){var B=x.width,z=x.o;if(r(f!=null&&x!=null),0>k||0>=_||k+_>z)return null;if(!f.Cc){if(f.ga==null){var G;if(f.ga=new dn,(G=f.ga==null)||(G=x.width*x.o,r(f.Gb.length==0),f.Gb=l(G),f.Uc=0,f.Gb==null?G=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,G=1),G=!G),!G){G=f.ga;var X=f.Fa,Z=f.P,ae=f.qc,be=f.mb,Le=f.nb,oe=Z+1,Ne=ae-1,_e=G.l;if(r(X!=null&&be!=null&&x!=null),Kn[0]=null,Kn[1]=pr,Kn[2]=vn,Kn[3]=un,G.ca=be,G.tb=Le,G.c=x.width,G.i=x.height,r(0<G.c&&0<G.i),1>=ae)x=0;else if(G.$a=3&X[Z+0],G.Z=X[Z+0]>>2&3,G.Lc=X[Z+0]>>4&3,Z=X[Z+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Z)x=0;else if(_e.put=ht,_e.ac=It,_e.bc=cr,_e.ma=G,_e.width=x.width,_e.height=x.height,_e.Da=x.Da,_e.v=x.v,_e.va=x.va,_e.j=x.j,_e.o=x.o,G.$a)e:{r(G.$a==1),x=Qi();t:for(;;){if(x==null){x=0;break e}if(r(G!=null),G.mc=x,x.c=G.c,x.i=G.i,x.l=G.l,x.l.ma=G,x.l.width=G.c,x.l.height=G.i,x.a=0,ge(x.m,X,oe,Ne),!oa(G.c,G.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&yr(x.s)?(G.ic=1,X=x.c*x.i,x.Ta=null,x.Ua=0,x.V=l(X),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(G.ic=0,x=wi(x,G.c)),!x))break t;x=1;break e}G.mc=null,x=0}else x=Ne>=G.c*G.i;G=!x}if(G)return null;f.ga.Lc!=1?f.Ga=0:_=z-k}r(f.ga!=null),r(k+_<=z);e:{if(x=(X=f.ga).c,z=X.l.o,X.$a==0){if(oe=f.rc,Ne=f.Vc,_e=f.Fa,Z=f.P+1+k*x,ae=f.mb,be=f.nb+k*x,r(Z<=f.P+f.qc),X.Z!=0)for(r(Kn[X.Z]!=null),G=0;G<_;++G)Kn[X.Z](oe,Ne,_e,Z,ae,be,x),oe=ae,Ne=be,be+=x,Z+=x;else for(G=0;G<_;++G)a(ae,be,_e,Z,x),oe=ae,Ne=be,be+=x,Z+=x;f.rc=oe,f.Vc=Ne}else{if(r(X.mc!=null),x=k+_,r((G=X.mc)!=null),r(x<=G.i),G.C>=x)x=1;else if(X.ic||co(),X.ic){X=G.V,oe=G.Ba,Ne=G.c;var qe=G.i,Fe=(_e=1,Z=G.$/Ne,ae=G.$%Ne,be=G.m,Le=G.s,G.$),Re=Ne*qe,Be=Ne*x,We=Le.wc,Ke=Fe<Be?tr(Le,ae,Z):null;r(Fe<=Re),r(x<=qe),r(yr(Le));t:for(;;){for(;!be.h&&Fe<Be;){if(ae&We||(Ke=tr(Le,ae,Z)),r(Ke!=null),fe(be),256>(qe=ar(Ke.G[0],Ke.H[0],be)))X[oe+Fe]=qe,++Fe,++ae>=Ne&&(ae=0,++Z<=x&&!(Z%16)&&Hr(G,Z));else{if(!(280>qe)){_e=0;break t}qe=Or(qe-256,be);var At,pt=ar(Ke.G[4],Ke.H[4],be);if(fe(be),!(Fe>=(pt=Mn(Ne,pt=Or(pt,be)))&&Re-Fe>=qe)){_e=0;break t}for(At=0;At<qe;++At)X[oe+Fe+At]=X[oe+Fe+At-pt];for(Fe+=qe,ae+=qe;ae>=Ne;)ae-=Ne,++Z<=x&&!(Z%16)&&Hr(G,Z);Fe<Be&&ae&We&&(Ke=tr(Le,ae,Z))}r(be.h==ie(be))}Hr(G,Z>x?x:Z);break t}!_e||be.h&&Fe<Re?(_e=0,G.a=be.h?5:3):G.$=Fe,x=_e}else x=Un(G,G.V,G.Ba,G.c,G.i,x,Xi);if(!x){_=0;break e}}k+_>=z&&(f.Cc=1),_=1}if(!_)return null;if(f.Cc&&((_=f.ga)!=null&&(_.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+k*B}function Ya(f,x,k,_,B,z){for(;0<B--;){var G,X=f,Z=x+(k?1:0),ae=f,be=x+(k?0:3);for(G=0;G<_;++G){var Le=ae[be+4*G];Le!=255&&(Le*=32897,X[Z+4*G+0]=X[Z+4*G+0]*Le>>23,X[Z+4*G+1]=X[Z+4*G+1]*Le>>23,X[Z+4*G+2]=X[Z+4*G+2]*Le>>23)}x+=z}}function ki(f,x,k,_,B){for(;0<_--;){var z;for(z=0;z<k;++z){var G=f[x+2*z+0],X=15&(ae=f[x+2*z+1]),Z=4369*X,ae=(240&ae|ae>>4)*Z>>16;f[x+2*z+0]=(240&G|G>>4)*Z>>16&240|(15&G|G<<4)*Z>>16>>4&15,f[x+2*z+1]=240&ae|X}x+=B}}function Tc(f,x,k,_,B,z,G,X){var Z,ae,be=255;for(ae=0;ae<B;++ae){for(Z=0;Z<_;++Z){var Le=f[x+Z];z[G+4*Z]=Le,be&=Le}x+=k,G+=X}return be!=255}function Oc(f,x,k,_,B){var z;for(z=0;z<B;++z)k[_+z]=f[x+z]>>8}function co(){po=Ya,Vd=ki,zl=Tc,Hd=Oc}function ha(f,x,k){K[f]=function(_,B,z,G,X,Z,ae,be,Le,oe,Ne,_e,qe,Fe,Re,Be,We){var Ke,At=We-1>>1,pt=X[Z+0]|ae[be+0]<<16,Gt=Le[oe+0]|Ne[_e+0]<<16;r(_!=null);var vt=3*pt+Gt+131074>>2;for(x(_[B+0],255&vt,vt>>16,qe,Fe),z!=null&&(vt=3*Gt+pt+131074>>2,x(z[G+0],255&vt,vt>>16,Re,Be)),Ke=1;Ke<=At;++Ke){var rr=X[Z+Ke]|ae[be+Ke]<<16,Gr=Le[oe+Ke]|Ne[_e+Ke]<<16,Yt=pt+rr+Gt+Gr+524296,gt=Yt+2*(rr+Gt)>>3;vt=gt+pt>>1,pt=(Yt=Yt+2*(pt+Gr)>>3)+rr>>1,x(_[B+2*Ke-1],255&vt,vt>>16,qe,Fe+(2*Ke-1)*k),x(_[B+2*Ke-0],255&pt,pt>>16,qe,Fe+(2*Ke-0)*k),z!=null&&(vt=Yt+Gt>>1,pt=gt+Gr>>1,x(z[G+2*Ke-1],255&vt,vt>>16,Re,Be+(2*Ke-1)*k),x(z[G+2*Ke+0],255&pt,pt>>16,Re,Be+(2*Ke+0)*k)),pt=rr,Gt=Gr}1&We||(vt=3*pt+Gt+131074>>2,x(_[B+We-1],255&vt,vt>>16,qe,Fe+(We-1)*k),z!=null&&(vt=3*Gt+pt+131074>>2,x(z[G+We-1],255&vt,vt>>16,Re,Be+(We-1)*k)))}}function Rl(){js[$c]=um,js[Li]=Ei,js[nh]=hm,js[$l]=nl,js[Vl]=bo,js[jr]=Yl,js[Vc]=eu,js[el]=Ei,js[go]=nl,js[Hl]=bo,js[Wl]=Yl}function Si(f){return f&-16384?0>f?0:255:f>>Fi}function Ai(f,x){return Si((19077*f>>8)+(26149*x>>8)-14234)}function Ln(f,x,k){return Si((19077*f>>8)-(6419*x>>8)-(13320*k>>8)+8708)}function Ja(f,x){return Si((19077*f>>8)+(33050*x>>8)-17685)}function La(f,x,k,_,B){_[B+0]=Ai(f,k),_[B+1]=Ln(f,x,k),_[B+2]=Ja(f,x)}function Wo(f,x,k,_,B){_[B+0]=Ja(f,x),_[B+1]=Ln(f,x,k),_[B+2]=Ai(f,k)}function Ml(f,x,k,_,B){var z=Ln(f,x,k);x=z<<3&224|Ja(f,x)>>3,_[B+0]=248&Ai(f,k)|z>>5,_[B+1]=x}function ss(f,x,k,_,B){var z=240&Ja(f,x)|15;_[B+0]=240&Ai(f,k)|Ln(f,x,k)>>4,_[B+1]=z}function Rc(f,x,k,_,B){_[B+0]=255,La(f,x,k,_,B+1)}function Go(f,x,k,_,B){Wo(f,x,k,_,B),_[B+3]=255}function Mc(f,x,k,_,B){La(f,x,k,_,B),_[B+3]=255}function wn(f,x){return 0>f?0:f>x?x:f}function ys(f,x,k){K[f]=function(_,B,z,G,X,Z,ae,be,Le){for(var oe=be+(-2&Le)*k;be!=oe;)x(_[B+0],z[G+0],X[Z+0],ae,be),x(_[B+1],z[G+0],X[Z+0],ae,be+k),B+=2,++G,++Z,be+=2*k;1&Le&&x(_[B+0],z[G+0],X[Z+0],ae,be)}}function Qa(f,x,k){return k==0?f==0?x==0?6:5:x==0?4:0:k}function Bl(f,x,k,_,B){switch(f>>>30){case 3:en(x,k,_,B,0);break;case 2:Nn(x,k,_,B);break;case 1:fa(x,k,_,B)}}function Xa(f,x){var k,_,B=x.M,z=x.Nb,G=f.oc,X=f.pc+40,Z=f.oc,ae=f.pc+584,be=f.oc,Le=f.pc+600;for(k=0;16>k;++k)G[X+32*k-1]=129;for(k=0;8>k;++k)Z[ae+32*k-1]=129,be[Le+32*k-1]=129;for(0<B?G[X-1-32]=Z[ae-1-32]=be[Le-1-32]=129:(o(G,X-32-1,127,21),o(Z,ae-32-1,127,9),o(be,Le-32-1,127,9)),_=0;_<f.za;++_){var oe=x.ya[x.aa+_];if(0<_){for(k=-1;16>k;++k)a(G,X+32*k-4,G,X+32*k+12,4);for(k=-1;8>k;++k)a(Z,ae+32*k-4,Z,ae+32*k+4,4),a(be,Le+32*k-4,be,Le+32*k+4,4)}var Ne=f.Gd,_e=f.Hd+_,qe=oe.ad,Fe=oe.Hc;if(0<B&&(a(G,X-32,Ne[_e].y,0,16),a(Z,ae-32,Ne[_e].f,0,8),a(be,Le-32,Ne[_e].ea,0,8)),oe.Za){var Re=G,Be=X-32+16;for(0<B&&(_>=f.za-1?o(Re,Be,Ne[_e].y[15],4):a(Re,Be,Ne[_e+1].y,0,4)),k=0;4>k;k++)Re[Be+128+k]=Re[Be+256+k]=Re[Be+384+k]=Re[Be+0+k];for(k=0;16>k;++k,Fe<<=2)Re=G,Be=X+tu[k],Qs[oe.Ob[k]](Re,Be),Bl(Fe,qe,16*+k,Re,Be)}else if(Re=Qa(_,B,oe.Ob[0]),cs[Re](G,X),Fe!=0)for(k=0;16>k;++k,Fe<<=2)Bl(Fe,qe,16*+k,G,X+tu[k]);for(k=oe.Gc,Re=Qa(_,B,oe.Dd),Ns[Re](Z,ae),Ns[Re](be,Le),Fe=qe,Re=Z,Be=ae,255&(oe=0|k)&&(170&oe?Ia(Fe,256,Re,Be):Qo(Fe,256,Re,Be)),oe=be,Fe=Le,255&(k>>=8)&&(170&k?Ia(qe,320,oe,Fe):Qo(qe,320,oe,Fe)),B<f.Ub-1&&(a(Ne[_e].y,0,G,X+480,16),a(Ne[_e].f,0,Z,ae+224,8),a(Ne[_e].ea,0,be,Le+224,8)),k=8*z*f.B,Ne=f.sa,_e=f.ta+16*_+16*z*f.R,qe=f.qa,oe=f.ra+8*_+k,Fe=f.Ha,Re=f.Ia+8*_+k,k=0;16>k;++k)a(Ne,_e+k*f.R,G,X+32*k,16);for(k=0;8>k;++k)a(qe,oe+k*f.B,Z,ae+32*k,8),a(Fe,Re+k*f.B,be,Le+32*k,8)}}function uo(f,x,k,_,B,z,G,X,Z){var ae=[0],be=[0],Le=0,oe=Z!=null?Z.kd:0,Ne=Z??new Tt;if(f==null||12>k)return 7;Ne.data=f,Ne.w=x,Ne.ha=k,x=[x],k=[k],Ne.gb=[Ne.gb];e:{var _e=x,qe=k,Fe=Ne.gb;if(r(f!=null),r(qe!=null),r(Fe!=null),Fe[0]=0,12<=qe[0]&&!n(f,_e[0],"RIFF")){if(n(f,_e[0]+8,"WEBP")){Fe=3;break e}var Re=Te(f,_e[0]+4);if(12>Re||4294967286<Re){Fe=3;break e}if(oe&&Re>qe[0]-8){Fe=7;break e}Fe[0]=Re,_e[0]+=12,qe[0]-=12}Fe=0}if(Fe!=0)return Fe;for(Re=0<Ne.gb[0],k=k[0];;){e:{var Be=f;qe=x,Fe=k;var We=ae,Ke=be,At=_e=[0];if((vt=Le=[Le])[0]=0,8>Fe[0])Fe=7;else{if(!n(Be,qe[0],"VP8X")){if(Te(Be,qe[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var pt=Te(Be,qe[0]+8),Gt=1+Ge(Be,qe[0]+12);if(2147483648<=Gt*(Be=1+Ge(Be,qe[0]+15))){Fe=3;break e}At!=null&&(At[0]=pt),We!=null&&(We[0]=Gt),Ke!=null&&(Ke[0]=Be),qe[0]+=18,Fe[0]-=18,vt[0]=1}Fe=0}}if(Le=Le[0],_e=_e[0],Fe!=0)return Fe;if(qe=!!(2&_e),!Re&&Le)return 3;if(z!=null&&(z[0]=!!(16&_e)),G!=null&&(G[0]=qe),X!=null&&(X[0]=0),G=ae[0],_e=be[0],Le&&qe&&Z==null){Fe=0;break}if(4>k){Fe=7;break}if(Re&&Le||!Re&&!Le&&!n(f,x[0],"ALPH")){k=[k],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{pt=f,Fe=x,Re=k;var vt=Ne.gb;We=Ne.na,Ke=Ne.P,At=Ne.Sa,Gt=22,r(pt!=null),r(Re!=null),Be=Fe[0];var rr=Re[0];for(r(We!=null),r(At!=null),We[0]=null,Ke[0]=null,At[0]=0;;){if(Fe[0]=Be,Re[0]=rr,8>rr){Fe=7;break e}var Gr=Te(pt,Be+4);if(4294967286<Gr){Fe=3;break e}var Yt=8+Gr+1&-2;if(Gt+=Yt,0<vt&&Gt>vt){Fe=3;break e}if(!n(pt,Be,"VP8 ")||!n(pt,Be,"VP8L")){Fe=0;break e}if(rr[0]<Yt){Fe=7;break e}n(pt,Be,"ALPH")||(We[0]=pt,Ke[0]=Be+8,At[0]=Gr),Be+=Yt,rr-=Yt}}if(k=k[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Fe!=0)break}k=[k],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(vt=f,Fe=x,Re=k,We=Ne.gb[0],Ke=Ne.Ja,At=Ne.xa,pt=Fe[0],Be=!n(vt,pt,"VP8 "),Gt=!n(vt,pt,"VP8L"),r(vt!=null),r(Re!=null),r(Ke!=null),r(At!=null),8>Re[0])Fe=7;else{if(Be||Gt){if(vt=Te(vt,pt+4),12<=We&&vt>We-12){Fe=3;break e}if(oe&&vt>Re[0]-8){Fe=7;break e}Ke[0]=vt,Fe[0]+=8,Re[0]-=8,At[0]=Gt}else At[0]=5<=Re[0]&&vt[pt+0]==47&&!(vt[pt+4]>>5),Ke[0]=Re[0];Fe=0}if(k=k[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],x=x[0],Fe!=0)break;if(4294967286<Ne.Ja)return 3;if(X==null||qe||(X[0]=Ne.xa?2:1),G=[G],_e=[_e],Ne.xa){if(5>k){Fe=7;break}X=G,oe=_e,qe=z,f==null||5>k?f=0:5<=k&&f[x+0]==47&&!(f[x+4]>>5)?(Re=[0],vt=[0],We=[0],ge(Ke=new Y,f,x,k),Lr(Ke,Re,vt,We)?(X!=null&&(X[0]=Re[0]),oe!=null&&(oe[0]=vt[0]),qe!=null&&(qe[0]=We[0]),f=1):f=0):f=0}else{if(10>k){Fe=7;break}X=_e,f==null||10>k||!_c(f,x+3,k-3)?f=0:(oe=f[x+0]|f[x+1]<<8|f[x+2]<<16,qe=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Ne.Ja||!qe||!f?f=0:(G&&(G[0]=qe),X&&(X[0]=f),f=1))}if(!f||(G=G[0],_e=_e[0],Le&&(ae[0]!=G||be[0]!=_e)))return 3;Z!=null&&(Z[0]=Ne,Z.offset=x-Z.w,r(4294967286>x-Z.w),r(Z.offset==Z.ha-k));break}return Fe==0||Fe==7&&Le&&Z==null?(z!=null&&(z[0]|=Ne.na!=null&&0<Ne.na.length),_!=null&&(_[0]=G),B!=null&&(B[0]=_e),0):Fe}function as(f,x,k){var _=x.width,B=x.height,z=0,G=0,X=_,Z=B;if(x.Da=f!=null&&0<f.Da,x.Da&&(X=f.cd,Z=f.bd,z=f.v,G=f.j,11>k||(z&=-2,G&=-2),0>z||0>G||0>=X||0>=Z||z+X>_||G+Z>B))return 0;if(x.v=z,x.j=G,x.va=z+X,x.o=G+Z,x.U=X,x.T=Z,x.da=f!=null&&0<f.da,x.da){if(!Ze(X,Z,k=[f.ib],z=[f.hb]))return 0;x.ib=k[0],x.hb=z[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*_/4&&x.hb<3*B/4,x.Kb=0),1}function is(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Ci(f,x,k,_){if(_==null||0>=f||0>=x)return 2;if(k!=null){if(k.Da){var B=k.cd,z=k.bd,G=-2&k.v,X=-2&k.j;if(0>G||0>X||0>=B||0>=z||G+B>f||X+z>x)return 2;f=B,x=z}if(k.da){if(!Ze(f,x,B=[k.ib],z=[k.hb]))return 2;f=B[0],x=z[0]}}_.width=f,_.height=x;e:{var Z=_.width,ae=_.height;if(f=_.S,0>=Z||0>=ae||!(f>=$c&&13>f))f=2;else{if(0>=_.Rd&&_.sd==null){G=z=B=x=0;var be=(X=Z*Jl[f])*ae;if(11>f||(z=(ae+1)/2*(x=(Z+1)/2),f==12&&(G=(B=Z)*ae)),(ae=l(be+2*z+G))==null){f=1;break e}_.sd=ae,11>f?((Z=_.f.RGBA).eb=ae,Z.fb=0,Z.A=X,Z.size=be):((Z=_.f.kb).y=ae,Z.O=0,Z.fa=X,Z.Fd=be,Z.f=ae,Z.N=0+be,Z.Ab=x,Z.Cd=z,Z.ea=ae,Z.W=0+be+z,Z.Db=x,Z.Ed=z,f==12&&(Z.F=ae,Z.J=0+be+2*z),Z.Tc=G,Z.lb=B)}if(x=1,B=_.S,z=_.width,G=_.height,B>=$c&&13>B)if(11>B)f=_.f.RGBA,x&=(X=Math.abs(f.A))*(G-1)+z<=f.size,x&=X>=z*Jl[B],x&=f.eb!=null;else{f=_.f.kb,X=(z+1)/2,be=(G+1)/2,Z=Math.abs(f.fa),ae=Math.abs(f.Ab);var Le=Math.abs(f.Db),oe=Math.abs(f.lb),Ne=oe*(G-1)+z;x&=Z*(G-1)+z<=f.Fd,x&=ae*(be-1)+X<=f.Cd,x=(x&=Le*(be-1)+X<=f.Ed)&Z>=z&ae>=X&Le>=X,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,B==12&&(x&=oe>=z,x&=Ne<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||k!=null&&k.fd&&(f=is(_)),f}var os=64,Pi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ul=24,_i=32,Wr=8,Bc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(f){return f},K.Predictor2=function(f,x,k){return x[k+0]},K.Predictor3=function(f,x,k){return x[k+1]},K.Predictor4=function(f,x,k){return x[k-1]},K.Predictor5=function(f,x,k){return ze(ze(f,x[k+1]),x[k+0])},K.Predictor6=function(f,x,k){return ze(f,x[k-1])},K.Predictor7=function(f,x,k){return ze(f,x[k+0])},K.Predictor8=function(f,x,k){return ze(x[k-1],x[k+0])},K.Predictor9=function(f,x,k){return ze(x[k+0],x[k+1])},K.Predictor10=function(f,x,k){return ze(ze(f,x[k-1]),ze(x[k+0],x[k+1]))},K.Predictor11=function(f,x,k){var _=x[k+0];return 0>=Xe(_>>24&255,f>>24&255,(x=x[k-1])>>24&255)+Xe(_>>16&255,f>>16&255,x>>16&255)+Xe(_>>8&255,f>>8&255,x>>8&255)+Xe(255&_,255&f,255&x)?_:f},K.Predictor12=function(f,x,k){var _=x[k+0];return(Ye((f>>24&255)+(_>>24&255)-((x=x[k-1])>>24&255))<<24|Ye((f>>16&255)+(_>>16&255)-(x>>16&255))<<16|Ye((f>>8&255)+(_>>8&255)-(x>>8&255))<<8|Ye((255&f)+(255&_)-(255&x)))>>>0},K.Predictor13=function(f,x,k){var _=x[k-1];return(Ue((f=ze(f,x[k+0]))>>24&255,_>>24&255)<<24|Ue(f>>16&255,_>>16&255)<<16|Ue(f>>8&255,_>>8&255)<<8|Ue(255&f,255&_))>>>0};var bs=K.PredictorAdd0;K.PredictorAdd1=wt,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var vs=K.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Ko,Di=K.ColorIndexInverseTransform,Yo=K.MapARGB,ho=K.VP8LColorIndexInverseTransformAlpha,Za=K.MapAlpha,ei=K.VP8LPredictorsAdd=[];ei.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var Ea,Jo,ws,Fa,Pr,_r,Zr,en,Nn,Ia,fa,Qo,qd,zd,Uc,th,rh,fo,qc,Xo,zc,$d,ql,mo,po,Vd,zl,Hd,Wd=l(511),Gd=l(2041),Kd=l(225),Yd=l(767),Jd=0,Ta=Gd,Zo=Kd,ls=Yd,Js=Wd,$c=0,Li=1,nh=2,$l=3,Vl=4,jr=5,Vc=6,el=7,go=8,Hl=9,Wl=10,Gl=[2,3,7],Hc=[3,3,11],xo=[280,256,256,256,40],sh=[0,1,1,1,0],om=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ah=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wc=8,tl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yo=null,Qd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ih=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Zd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cs=[],Qs=[],Ns=[],Oa=1,rl=2,Kn=[],js=[];ha("UpsampleRgbLinePair",La,3),ha("UpsampleBgrLinePair",Wo,3),ha("UpsampleRgbaLinePair",Mc,4),ha("UpsampleBgraLinePair",Go,4),ha("UpsampleArgbLinePair",Rc,4),ha("UpsampleRgba4444LinePair",ss,2),ha("UpsampleRgb565LinePair",Ml,2);var um=K.UpsampleRgbLinePair,hm=K.UpsampleBgrLinePair,Ei=K.UpsampleRgbaLinePair,nl=K.UpsampleBgraLinePair,bo=K.UpsampleArgbLinePair,Yl=K.UpsampleRgba4444LinePair,eu=K.UpsampleRgb565LinePair,ti=16,ma=1<<ti-1,xr=-227,br=482,Fi=6,zn=0,ks=l(256),vo=l(256),sl=l(256),Ss=l(256),Gc=l(br-xr),lh=l(br-xr);ys("YuvToRgbRow",La,3),ys("YuvToBgrRow",Wo,3),ys("YuvToRgbaRow",Mc,4),ys("YuvToBgraRow",Go,4),ys("YuvToArgbRow",Rc,4),ys("YuvToRgba4444Row",ss,2),ys("YuvToRgb565Row",Ml,2);var tu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wo=[0,2,8],ch=[8,7,6,4,4,2,2,2,1,1,1,1],ri=1;this.WebPDecodeRGBA=function(f,x,k,_,B){var z=Li,G=new bt,X=new lt;G.ba=X,X.S=z,X.width=[X.width],X.height=[X.height];var Z=X.width,ae=X.height,be=new at;if(be==null||f==null)var Le=2;else r(be!=null),Le=uo(f,x,k,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Le!=0?Z=0:(Z!=null&&(Z[0]=be.width[0]),ae!=null&&(ae[0]=be.height[0]),Z=1),Z){X.width=X.width[0],X.height=X.height[0],_!=null&&(_[0]=X.width),B!=null&&(B[0]=X.height);e:{if(_=new Wn,(B=new Tt).data=f,B.w=x,B.ha=k,B.kd=1,x=[0],r(B!=null),((f=uo(B.data,B.w,B.ha,null,null,null,x,null,B))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(r(G!=null),_.data=B.data,_.w=B.w+B.offset,_.ha=B.ha-B.offset,_.put=ht,_.ac=It,_.bc=cr,_.ma=G,B.xa){if((f=Qi())==null){G=1;break e}if((function(oe,Ne){var _e=[0],qe=[0],Fe=[0];t:for(;;){if(oe==null)return 0;if(Ne==null)return oe.a=2,0;if(oe.l=Ne,oe.a=0,ge(oe.m,Ne.data,Ne.w,Ne.ha),!Lr(oe.m,_e,qe,Fe)){oe.a=3;break t}if(oe.xb=rl,Ne.width=_e[0],Ne.height=qe[0],!oa(_e[0],qe[0],1,oe,null))break t;return 1}return r(oe.a!=0),0})(f,_)){if(_=(x=Ci(_.width,_.height,G.Oa,G.ba))==0){t:{_=f;r:for(;;){if(_==null){_=0;break t}if(r(_.s.yc!=null),r(_.s.Ya!=null),r(0<_.s.Wb),r((k=_.l)!=null),r((B=k.ma)!=null),_.xb!=0){if(_.ca=B.ba,_.tb=B.tb,r(_.ca!=null),!as(B.Oa,k,$l)){_.a=2;break r}if(!wi(_,k.width)||k.da)break r;if((k.da||qt(_.ca.S))&&co(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&co()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!W(_.s.vb,_.s.Wa.Xa)){_.a=1;break r}_.xb=0}if(!Un(_,_.V,_.Ba,_.c,_.i,k.o,bn))break r;B.Dc=_.Ma,_=1;break t}r(_.a!=0),_=0}_=!_}_&&(x=f.a)}else x=f.a}else{if((f=new Bd)==null){G=1;break e}if(f.Fa=B.na,f.P=B.P,f.qc=B.Sa,to(f,_)){if((x=Ci(_.width,_.height,G.Oa,G.ba))==0){if(f.Aa=0,k=G.Oa,r((B=f)!=null),k!=null){if(0<(Z=0>(Z=k.Md)?0:100<Z?255:255*Z/100)){for(ae=be=0;4>ae;++ae)12>(Le=B.pb[ae]).lc&&(Le.ia=Z*ch[0>Le.lc?0:Le.lc]>>3),be|=Le.ia;be&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=k.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}(function(oe,Ne){if(oe==null)return 0;if(Ne==null)return cn(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!to(oe,Ne))return 0;if(r(oe.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(oe.L=0);var _e=wo[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Ne.v-_e>>4,oe.zb=Ne.j-_e>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Ne.o+15+_e>>4,oe.Hb=Ne.va+15+_e>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var qe=oe.ed;for(_e=0;4>_e;++_e){var Fe;if(oe.Qa.Cb){var Re=oe.Qa.Lb[_e];oe.Qa.Fb||(Re+=qe.Tb)}else Re=qe.Tb;for(Fe=0;1>=Fe;++Fe){var Be=oe.gd[_e][Fe],We=Re;if(qe.Pc&&(We+=qe.vd[0],Fe&&(We+=qe.od[0])),0<(We=0>We?0:63<We?63:We)){var Ke=We;0<qe.wb&&(Ke=4<qe.wb?Ke>>2:Ke>>1)>9-qe.wb&&(Ke=9-qe.wb),1>Ke&&(Ke=1),Be.dd=Ke,Be.tc=2*We+Ke,Be.ld=40<=We?2:15<=We?1:0}else Be.tc=0;Be.La=Fe}}}_e=0}else cn(oe,6,"Frame setup failed"),_e=oe.a;if(_e=_e==0){if(_e){oe.$c=0,0<oe.Aa||(oe.Ic=ri);t:{_e=oe.Ic,qe=4*(Ke=oe.za);var At=32*Ke,pt=Ke+1,Gt=0<oe.L?Ke*(0<oe.Aa?2:1):0,vt=(oe.Aa==2?2:1)*Ke;if((Be=qe+832+(Fe=3*(16*_e+wo[oe.L])/2*At)+(Re=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Be)_e=0;else{if(Be>oe.Vb){if(oe.Vb=0,oe.Ec=l(Be),oe.Fc=0,oe.Ec==null){_e=cn(oe,1,"no memory during frame initialization.");break t}oe.Vb=Be}Be=oe.Ec,We=oe.Fc,oe.Ac=Be,oe.Bc=We,We+=qe,oe.Gd=d(At,Os),oe.Hd=0,oe.rb=d(pt+1,Ni),oe.sb=1,oe.wa=Gt?d(Gt,Ts):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=Ke),r(!0),oe.oc=Be,oe.pc=We,We+=832,oe.ya=d(vt,Bo),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=Ke),oe.R=16*Ke,oe.B=8*Ke,Ke=(At=wo[oe.L])*oe.R,At=At/2*oe.B,oe.sa=Be,oe.ta=We+Ke,oe.qa=oe.sa,oe.ra=oe.ta+16*_e*oe.R+At,oe.Ha=oe.qa,oe.Ia=oe.ra+8*_e*oe.B+At,oe.$c=0,We+=Fe,oe.mb=Re?Be:null,oe.nb=Re?We:null,r(We+Re<=oe.Fc+oe.Vb),la(oe),o(oe.Ac,oe.Bc,0,qe),_e=1}}if(_e){if(Ne.ka=0,Ne.y=oe.sa,Ne.O=oe.ta,Ne.f=oe.qa,Ne.N=oe.ra,Ne.ea=oe.Ha,Ne.Vd=oe.Ia,Ne.fa=oe.R,Ne.Rc=oe.B,Ne.F=null,Ne.J=0,!Jd){for(_e=-255;255>=_e;++_e)Wd[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)Gd[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)Kd[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)Yd[255+_e]=0>_e?0:255<_e?255:_e;Jd=1}Zr=lr,en=El,Ia=so,fa=Aa,Qo=Uo,Nn=Dc,qd=w,zd=R,Uc=Ae,th=Ve,rh=ce,fo=ye,qc=Qe,Xo=xt,zc=Ys,$d=Ka,ql=ji,mo=Ho,Qs[0]=Ud,Qs[1]=qo,Qs[2]=ao,Qs[3]=Pa,Qs[4]=Fc,Qs[5]=Wa,Qs[6]=Rs,Qs[7]=Ic,Qs[8]=io,Qs[9]=$o,cs[0]=ca,cs[1]=Lc,cs[2]=Ec,cs[3]=zo,cs[4]=Ca,cs[5]=xs,cs[6]=Ks,Ns[0]=ua,Ns[1]=Fl,Ns[2]=Il,Ns[3]=da,Ns[4]=Tl,Ns[5]=Vo,Ns[6]=Ol,_e=1}else _e=0}_e&&(_e=(function(rr,Gr){for(rr.M=0;rr.M<rr.Va;++rr.M){var Yt,gt=rr.Jc[rr.M&rr.Xb],st=rr.m,tn=rr;for(Yt=0;Yt<tn.za;++Yt){var zt=st,er=tn,Dr=er.Ac,En=er.Bc+4*Yt,hn=er.zc,zr=er.ya[er.aa+Yt];if(er.Qa.Bb?zr.$b=Ce(zt,er.Pa.jb[0])?2+Ce(zt,er.Pa.jb[2]):Ce(zt,er.Pa.jb[1]):zr.$b=0,er.kc&&(zr.Ad=Ce(zt,er.Bd)),zr.Za=!Ce(zt,145)+0,zr.Za){var jn=zr.Ob,Fn=0;for(er=0;4>er;++er){var Rr,ir=hn[0+er];for(Rr=0;4>Rr;++Rr){ir=cm[Dr[En+Rr]][ir];for(var ur=ih[Ce(zt,ir[0])];0<ur;)ur=ih[2*ur+Ce(zt,ir[ur])];ir=-ur,Dr[En+Rr]=ir}a(jn,Fn,Dr,En,4),Fn+=4,hn[0+er]=ir}}else ir=Ce(zt,156)?Ce(zt,128)?1:3:Ce(zt,163)?2:0,zr.Ob[0]=ir,o(Dr,En,ir,4),o(hn,0,ir,4);zr.Dd=Ce(zt,142)?Ce(zt,114)?Ce(zt,183)?1:3:2:0}if(tn.m.Ka)return cn(rr,7,"Premature end-of-partition0 encountered.");for(;rr.ja<rr.za;++rr.ja){if(tn=gt,zt=(st=rr).rb[st.sb-1],Dr=st.rb[st.sb+st.ja],Yt=st.ya[st.aa+st.ja],En=st.kc?Yt.Ad:0)zt.la=Dr.la=0,Yt.Za||(zt.Na=Dr.Na=0),Yt.Hc=0,Yt.Gc=0,Yt.ia=0;else{var Mr,hr;if(zt=Dr,Dr=tn,En=st.Pa.Xc,hn=st.ya[st.aa+st.ja],zr=st.pb[hn.$b],er=hn.ad,jn=0,Fn=st.rb[st.sb-1],ir=Rr=0,o(er,jn,0,384),hn.Za)var Kr=0,Yr=En[3];else{ur=l(16);var kr=zt.Na+Fn.Na;if(kr=yo(Dr,En[1],kr,zr.Eb,0,ur,0),zt.Na=Fn.Na=(0<kr)+0,1<kr)Zr(ur,0,er,jn);else{var Yn=ur[0]+3>>3;for(ur=0;256>ur;ur+=16)er[jn+ur]=Yn}Kr=1,Yr=En[0]}var vr=15&zt.la,Sr=15&Fn.la;for(ur=0;4>ur;++ur){var fn=1&Sr;for(Yn=hr=0;4>Yn;++Yn)vr=vr>>1|(fn=(kr=yo(Dr,Yr,kr=fn+(1&vr),zr.Sc,Kr,er,jn))>Kr)<<7,hr=hr<<2|(3<kr?3:1<kr?2:er[jn+0]!=0),jn+=16;vr>>=4,Sr=Sr>>1|fn<<7,Rr=(Rr<<8|hr)>>>0}for(Yr=vr,Kr=Sr>>4,Mr=0;4>Mr;Mr+=2){for(hr=0,vr=zt.la>>4+Mr,Sr=Fn.la>>4+Mr,ur=0;2>ur;++ur){for(fn=1&Sr,Yn=0;2>Yn;++Yn)kr=fn+(1&vr),vr=vr>>1|(fn=0<(kr=yo(Dr,En[2],kr,zr.Qc,0,er,jn)))<<3,hr=hr<<2|(3<kr?3:1<kr?2:er[jn+0]!=0),jn+=16;vr>>=2,Sr=Sr>>1|fn<<5}ir|=hr<<4*Mr,Yr|=vr<<4<<Mr,Kr|=(240&Sr)<<Mr}zt.la=Yr,Fn.la=Kr,hn.Hc=Rr,hn.Gc=ir,hn.ia=43690&ir?0:zr.ia,En=!(Rr|ir)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[Yt.$b][Yt.Za],st.wa[st.Y+st.ja].La|=!En),tn.Ka)return cn(rr,7,"Premature end-of-file encountered.")}if(la(rr),st=Gr,tn=1,Yt=(gt=rr).D,zt=0<gt.L&&gt.M>=gt.zb&&gt.M<=gt.Va,gt.Aa==0)t:{if(Yt.M=gt.M,Yt.uc=zt,Xa(gt,Yt),tn=1,Yt=(hr=gt.D).Nb,zt=(ir=wo[gt.L])*gt.R,Dr=ir/2*gt.B,ur=16*Yt*gt.R,Yn=8*Yt*gt.B,En=gt.sa,hn=gt.ta-zt+ur,zr=gt.qa,er=gt.ra-Dr+Yn,jn=gt.Ha,Fn=gt.Ia-Dr+Yn,Sr=(vr=hr.M)==0,Rr=vr>=gt.Va-1,gt.Aa==2&&Xa(gt,hr),hr.uc)for(fn=(kr=gt).D.M,r(kr.D.uc),hr=kr.yb;hr<kr.Hb;++hr){Kr=hr,Yr=fn;var $n=(As=(sn=kr).D).Nb;Mr=sn.R;var As=As.wa[As.Y+Kr],rn=sn.sa,nn=sn.ta+16*$n*Mr+16*Kr,Jn=As.dd,Ar=As.tc;if(Ar!=0)if(r(3<=Ar),sn.L==1)0<Kr&&$d(rn,nn,Mr,Ar+4),As.La&&mo(rn,nn,Mr,Ar),0<Yr&&zc(rn,nn,Mr,Ar+4),As.La&&ql(rn,nn,Mr,Ar);else{var Qn=sn.B,Xs=sn.qa,pa=sn.ra+8*$n*Qn+8*Kr,In=sn.Ha,sn=sn.Ia+8*$n*Qn+8*Kr;$n=As.ld,0<Kr&&(zd(rn,nn,Mr,Ar+4,Jn,$n),th(Xs,pa,In,sn,Qn,Ar+4,Jn,$n)),As.La&&(fo(rn,nn,Mr,Ar,Jn,$n),Xo(Xs,pa,In,sn,Qn,Ar,Jn,$n)),0<Yr&&(qd(rn,nn,Mr,Ar+4,Jn,$n),Uc(Xs,pa,In,sn,Qn,Ar+4,Jn,$n)),As.La&&(rh(rn,nn,Mr,Ar,Jn,$n),qc(Xs,pa,In,sn,Qn,Ar,Jn,$n))}}if(gt.ia&&alert("todo:DitherRow"),st.put!=null){if(hr=16*vr,vr=16*(vr+1),Sr?(st.y=gt.sa,st.O=gt.ta+ur,st.f=gt.qa,st.N=gt.ra+Yn,st.ea=gt.Ha,st.W=gt.Ia+Yn):(hr-=ir,st.y=En,st.O=hn,st.f=zr,st.N=er,st.ea=jn,st.W=Fn),Rr||(vr-=ir),vr>st.o&&(vr=st.o),st.F=null,st.J=null,gt.Fa!=null&&0<gt.Fa.length&&hr<vr&&(st.J=qn(gt,st,hr,vr-hr),st.F=gt.mb,st.F==null&&st.F.length==0)){tn=cn(gt,3,"Could not decode alpha data.");break t}hr<st.j&&(ir=st.j-hr,hr=st.j,r(!(1&ir)),st.O+=gt.R*ir,st.N+=gt.B*(ir>>1),st.W+=gt.B*(ir>>1),st.F!=null&&(st.J+=st.width*ir)),hr<vr&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=hr-st.j,st.U=st.va-st.v,st.T=vr-hr,tn=st.put(st))}Yt+1!=gt.Ic||Rr||(a(gt.sa,gt.ta-zt,En,hn+16*gt.R,zt),a(gt.qa,gt.ra-Dr,zr,er+8*gt.B,Dr),a(gt.Ha,gt.Ia-Dr,jn,Fn+8*gt.B,Dr))}if(!tn)return cn(rr,6,"Output aborted.")}return 1})(oe,Ne)),Ne.bc!=null&&Ne.bc(Ne),_e&=1}return _e?(oe.cb=0,_e):0})(f,_)||(x=f.a)}}else x=f.a}x==0&&G.Oa!=null&&G.Oa.fd&&(x=is(G.ba))}G=x}z=G!=0?null:11>z?X.f.RGBA.eb:X.f.kb.y}else z=null;return z};var Jl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(K,de){for(var E="",I=0;I<4;I++)E+=String.fromCharCode(K[de++]);return E}function m(K,de){return K[de+0]|K[de+1]<<8}function b(K,de){return(K[de+0]|K[de+1]<<8|K[de+2]<<16)>>>0}function j(K,de){return(K[de+0]|K[de+1]<<8|K[de+2]<<16|K[de+3]<<24)>>>0}new h;var y=[0],A=[0],P=[],N=new h,C=e,F=(function(K,de){var E={},I=0,H=!1,te=0,we=0;if(E.frames=[],!(function(L,Y){for(var ne=0;ne<4;ne++)if(L[Y+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(K,de)){for(j(K,de+=4),de+=8;de<K.length;){var se=p(K,de),$=j(K,de+=4);de+=4;var ee=$+(1&$);switch(se){case"VP8 ":case"VP8L":E.frames[I]===void 0&&(E.frames[I]={}),(T=E.frames[I]).src_off=H?we:de-8,T.src_size=te+$+8,I++,H&&(H=!1,te=0,we=0);break;case"VP8X":(T=E.header={}).feature_flags=K[de];var ge=de+4;T.canvas_width=1+b(K,ge),ge+=3,T.canvas_height=1+b(K,ge),ge+=3;break;case"ALPH":H=!0,te=ee+8,we=de-8;break;case"ANIM":(T=E.header).bgcolor=j(K,de),ge=de+4,T.loop_count=m(K,ge),ge+=2;break;case"ANMF":var Se,T;(T=E.frames[I]={}).offset_x=2*b(K,de),de+=3,T.offset_y=2*b(K,de),de+=3,T.width=1+b(K,de),de+=3,T.height=1+b(K,de),de+=3,T.duration=b(K,de),de+=3,Se=K[de++],T.dispose=1&Se,T.blend=Se>>1&1}se!="ANMF"&&(de+=ee)}return E}})(C,0);F.response=C,F.rgbaoutput=!0,F.dataurl=!1;var D=F.header?F.header:null,M=F.frames?F.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],A=[D.canvas_width];for(var U=0;U<M.length&&M[U].blend!=0;U++);}var Q=M[0],J=N.WebPDecodeRGBA(C,Q.src_off,Q.src_size,A,y);Q.rgba=J,Q.imgwidth=A[0],Q.imgheight=y[0];for(var re=0;re<A[0]*y[0]*4;re++)P[re]=J[re];return this.width=A,this.height=y,this.data=P,this}(function(e){var r,n,a,o,l,d,u,h,p,m=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new h,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new d,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new d,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new b(this),r=this.internal.f2,n=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,p=new m}]);var b=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=L;Object.defineProperty(this,"pdf",{get:function(){return Y}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(Te){ne=!!Te}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Te){ie=!!Te}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(Te){isNaN(Te)||(V=Te)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(Te){isNaN(Te)||(fe=Te)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Te){var W;typeof Te=="number"?W=[Te,Te,Te,Te]:((W=new Array(4))[0]=Te[0],W[1]=Te.length>=2?Te[1]:W[0],W[2]=Te.length>=3?Te[2]:W[0],W[3]=Te.length>=4?Te[3]:W[1]),p.margin=W}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Te){he=Te}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(Te){pe=Te}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Te){Ce=Te}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Te){Te instanceof m&&(p=Te)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Te){p.path=Te}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(Te){ue=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var W;W=j(Te),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var W=j(Te);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var Pe=null,Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(Te){Pe=null,Ge=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var W;if(this.ctx.font=Te,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var He=W[1];W[2];var je=W[3],Ze=W[4];W[5];var $e=W[6],le=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ze)[2];Ze=Math.floor(le==="px"?parseFloat(Ze)*this.pdf.internal.scaleFactor:le==="em"?parseFloat(Ze)*this.pdf.getFontSize():parseFloat(Ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ze);var xe=(function(Pt){var ut,mr,Xt=[],ct=Pt.trim();if(ct==="")return Rp;if(ct in w1)return[w1[ct]];for(;ct!=="";){switch(mr=null,ut=(ct=j1(ct)).charAt(0)){case'"':case"'":mr=jA(ct.substring(1),ut);break;default:mr=kA(ct)}if(mr===null||(Xt.push(mr[0]),(ct=j1(mr[1]))!==""&&ct.charAt(0)!==","))return Rp;ct=ct.replace(/^,/,"")}return Xt})($e);if(this.fontFaces){var De=(function(Pt,ut){if(Pe===null){var mr=(function(Xt){var ct=[];return Object.keys(Xt).forEach(function(Mt){Xt[Mt].forEach(function(Zt){var Lt=null;switch(Zt){case"bold":Lt={family:Mt,weight:"bold"};break;case"italic":Lt={family:Mt,style:"italic"};break;case"bolditalic":Lt={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:Mt}}Lt!==null&&(Lt.ref={name:Mt,style:Zt},ct.push(Lt))})}),ct})(Pt.getFontList());Pe=(function(Xt){for(var ct={},Mt=0;Mt<Xt.length;++Mt){var Zt=Op(Xt[Mt]),Lt=Zt.family,Kt=Zt.stretch,qt=Zt.style,Je=Zt.weight;ct[Lt]=ct[Lt]||{},ct[Lt][Kt]=ct[Lt][Kt]||{},ct[Lt][Kt][qt]=ct[Lt][Kt][qt]||{},ct[Lt][Kt][qt][Je]=Zt}return ct})(mr.concat(ut))}return Pe})(this.pdf,this.fontFaces),ze=xe.map(function(Pt){return{family:Pt,stretch:"normal",weight:je,style:He}}),Ye=(function(Pt,ut,mr){for(var Xt=(mr=mr||{}).defaultFontFamily||"times",ct=Object.assign({},NA,mr.genericFontFamilies||{}),Mt=null,Zt=null,Lt=0;Lt<ut.length;++Lt)if(ct[(Mt=Op(ut[Lt])).family]&&(Mt.family=ct[Mt.family]),Pt.hasOwnProperty(Mt.family)){Zt=Pt[Mt.family];break}if(!(Zt=Zt||Pt[Xt]))throw new Error("Could not find a font-family for the rule '"+N1(Mt)+"' and default family '"+Xt+"'.");if(Zt=(function(Kt,qt){if(qt[Kt])return qt[Kt];var Je=j0[Kt],it=Je<=j0.normal?-1:1,lt=v1(qt,yv,Je,it);if(!lt)throw new Error("Could not find a matching font-stretch value for "+Kt);return lt})(Mt.stretch,Zt),Zt=(function(Kt,qt){if(qt[Kt])return qt[Kt];for(var Je=xv[Kt],it=0;it<Je.length;++it)if(qt[Je[it]])return qt[Je[it]];throw new Error("Could not find a matching font-style for "+Kt)})(Mt.style,Zt),!(Zt=(function(Kt,qt){if(qt[Kt])return qt[Kt];if(Kt===400&&qt[500])return qt[500];if(Kt===500&&qt[400])return qt[400];var Je=wA[Kt],it=v1(qt,bv,Je,Kt<400?-1:1);if(!it)throw new Error("Could not find a matching font-weight for value "+Kt);return it})(Mt.weight,Zt)))throw new Error("Failed to resolve a font for the rule '"+N1(Mt)+"'.");return Zt})(De,ze);this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var Ue="";(je==="bold"||parseInt(je,10)>=700||He==="bold")&&(Ue="bold"),He==="italic"&&(Ue+="italic"),Ue.length===0&&(Ue="normal");for(var Xe="",wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<xe.length;ot++){if(this.pdf.internal.getFont(xe[ot],Ue,{noFallback:!0,disableWarning:!0})!==void 0){Xe=xe[ot];break}if(Ue==="bolditalic"&&this.pdf.internal.getFont(xe[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xe=xe[ot],Ue="bold";else if(this.pdf.internal.getFont(xe[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xe=xe[ot],Ue="normal";break}}if(Xe===""){for(var dt=0;dt<xe.length;dt++)if(wt[xe[dt]]){Xe=wt[xe[dt]];break}}Xe=Xe===""?"Times":Xe,this.pdf.setFont(Xe,Ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,T.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,T.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};b.prototype.setLineDash=function(L){this.lineDash=L},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){M.call(this,"fill",!1)},b.prototype.stroke=function(){M.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(L,Y){if(isNaN(L)||isNaN(Y))throw Ir.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new d(L,Y));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new d(L,Y)},b.prototype.closePath=function(){var L=new d(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Cr(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){L=new d(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(L.x,L.y)},b.prototype.lineTo=function(L,Y){if(isNaN(L)||isNaN(Y))throw Ir.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new d(L,Y));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new d(ne.x,ne.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},b.prototype.quadraticCurveTo=function(L,Y,ne,ie){if(isNaN(ne)||isNaN(ie)||isNaN(L)||isNaN(Y))throw Ir.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new d(ne,ie)),fe=this.ctx.transform.applyToPoint(new d(L,Y));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:V.x,y:V.y}),this.ctx.lastPoint=new d(V.x,V.y)},b.prototype.bezierCurveTo=function(L,Y,ne,ie,V,fe){if(isNaN(V)||isNaN(fe)||isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Ir.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new d(V,fe)),pe=this.ctx.transform.applyToPoint(new d(L,Y)),Ce=this.ctx.transform.applyToPoint(new d(ne,ie));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Ce.x,y2:Ce.y,x:he.x,y:he.y}),this.ctx.lastPoint=new d(he.x,he.y)},b.prototype.arc=function(L,Y,ne,ie,V,fe){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie)||isNaN(V))throw Ir.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new d(L,Y));L=he.x,Y=he.y;var pe=this.ctx.transform.applyToPoint(new d(0,ne)),Ce=this.ctx.transform.applyToPoint(new d(0,0));ne=Math.sqrt(Math.pow(pe.x-Ce.x,2)+Math.pow(pe.y-Ce.y,2))}Math.abs(V-ie)>=2*Math.PI&&(ie=0,V=2*Math.PI),this.path.push({type:"arc",x:L,y:Y,radius:ne,startAngle:ie,endAngle:V,counterclockwise:fe})},b.prototype.arcTo=function(L,Y,ne,ie,V){throw new Error("arcTo not implemented.")},b.prototype.rect=function(L,Y,ne,ie){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Ir.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,Y),this.lineTo(L+ne,Y),this.lineTo(L+ne,Y+ie),this.lineTo(L,Y+ie),this.lineTo(L,Y),this.lineTo(L+ne,Y),this.lineTo(L,Y)},b.prototype.fillRect=function(L,Y,ne,ie){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Ir.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,Y,ne,ie),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},b.prototype.strokeRect=function(L,Y,ne,ie){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Ir.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(L,Y,ne,ie),this.stroke())},b.prototype.clearRect=function(L,Y,ne,ie){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Ir.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,Y,ne,ie))},b.prototype.save=function(L){L=typeof L!="boolean"||L;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},b.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(L){var Y,ne,ie,V;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))Y=0,ne=0,ie=0,V=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(fe!==null)Y=parseInt(fe[1]),ne=parseInt(fe[2]),ie=parseInt(fe[3]),V=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)Y=parseInt(fe[1]),ne=parseInt(fe[2]),ie=parseInt(fe[3]),V=parseFloat(fe[4]);else{if(V=1,typeof L=="string"&&L.charAt(0)!=="#"){var he=new dv(L);L=he.ok?he.toHex():"#000000"}L.length===4?(Y=L.substring(1,2),Y+=Y,ne=L.substring(2,3),ne+=ne,ie=L.substring(3,4),ie+=ie):(Y=L.substring(1,3),ne=L.substring(3,5),ie=L.substring(5,7)),Y=parseInt(Y,16),ne=parseInt(ne,16),ie=parseInt(ie,16)}}return{r:Y,g:ne,b:ie,a:V,style:L}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(L,Y,ne,ie){if(isNaN(Y)||isNaN(ne)||typeof L!="string")throw Ir.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!y.call(this)){var V=ee(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;I.call(this,{text:L,x:Y,y:ne,scale:fe,angle:V,align:this.textAlign,maxWidth:ie})}},b.prototype.strokeText=function(L,Y,ne,ie){if(isNaN(Y)||isNaN(ne)||typeof L!="string")throw Ir.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){ie=isNaN(ie)?void 0:ie;var V=ee(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;I.call(this,{text:L,x:Y,y:ne,scale:fe,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:ie})}},b.prototype.measureText=function(L){if(typeof L!="string")throw Ir.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,ne=this.pdf.internal.scaleFactor,ie=Y.internal.getFontSize(),V=Y.getStringUnitWidth(L)*ie/Y.internal.scaleFactor;return new function(fe){var he=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:V*=Math.round(96*ne/72*1e4)/1e4})},b.prototype.scale=function(L,Y){if(isNaN(L)||isNaN(Y))throw Ir.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new h(L,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.rotate=function(L){if(isNaN(L))throw Ir.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new h(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.translate=function(L,Y){if(isNaN(L)||isNaN(Y))throw Ir.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new h(1,0,0,1,L,Y);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.transform=function(L,Y,ne,ie,V,fe){if(isNaN(L)||isNaN(Y)||isNaN(ne)||isNaN(ie)||isNaN(V)||isNaN(fe))throw Ir.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new h(L,Y,ne,ie,V,fe);this.ctx.transform=this.ctx.transform.multiply(he)},b.prototype.setTransform=function(L,Y,ne,ie,V,fe){L=isNaN(L)?1:L,Y=isNaN(Y)?0:Y,ne=isNaN(ne)?0:ne,ie=isNaN(ie)?1:ie,V=isNaN(V)?0:V,fe=isNaN(fe)?0:fe,this.ctx.transform=new h(L,Y,ne,ie,V,fe)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(L,Y,ne,ie,V,fe,he,pe,Ce){var ue=this.pdf.getImageProperties(L),Pe=1,Ge=1,Te=1,W=1;ie!==void 0&&pe!==void 0&&(Te=pe/ie,W=Ce/V,Pe=ue.width/ie*pe/ie,Ge=ue.height/V*Ce/V),fe===void 0&&(fe=Y,he=ne,Y=0,ne=0),ie!==void 0&&pe===void 0&&(pe=ie,Ce=V),ie===void 0&&pe===void 0&&(pe=ue.width,Ce=ue.height);for(var He,je=this.ctx.transform.decompose(),Ze=ee(je.rotate.shx),$e=new h,le=($e=($e=($e=$e.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new u(fe-Y*Te,he-ne*W,ie*Pe,V*Ge)),xe=N.call(this,le),De=[],ze=0;ze<xe.length;ze+=1)De.indexOf(xe[ze])===-1&&De.push(xe[ze]);if(D(De),this.autoPaging)for(var Ye=De[0],Ue=De[De.length-1],Xe=Ye;Xe<Ue+1;Xe++){this.pdf.setPage(Xe);var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Xe===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Xe===1?0:dt+(Xe-2)*Pt;if(this.ctx.clip_path.length!==0){var mr=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(He,this.posX+this.margin[3],-ut+ot+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=mr}var Xt=JSON.parse(JSON.stringify(le));Xt=F([Xt],this.posX+this.margin[3],-ut+ot+this.ctx.prevPageLastElemOffset)[0];var ct=(Xe>Ye||Xe<Ue)&&P.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Pt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,Ze),ct&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",le.x,le.y,le.w,le.h,null,null,Ze)};var N=function(L,Y,ne){var ie=[];Y=Y||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":ie.push(Math.floor((L.y+V)/ne)+1);break;case"arc":ie.push(Math.floor((L.y+V-L.radius)/ne)+1),ie.push(Math.floor((L.y+V+L.radius)/ne)+1);break;case"qct":var fe=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);ie.push(Math.floor((fe.y+V)/ne)+1),ie.push(Math.floor((fe.y+fe.h+V)/ne)+1);break;case"bct":var he=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);ie.push(Math.floor((he.y+V)/ne)+1),ie.push(Math.floor((he.y+he.h+V)/ne)+1);break;case"rect":ie.push(Math.floor((L.y+V)/ne)+1),ie.push(Math.floor((L.y+L.h+V)/ne)+1)}for(var pe=0;pe<ie.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<ie[pe];)C.call(this);return ie},C=function(){var L=this.fillStyle,Y=this.strokeStyle,ne=this.font,ie=this.lineCap,V=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=Y,this.font=ne,this.lineCap=ie,this.lineWidth=V,this.lineJoin=fe},F=function(L,Y,ne){for(var ie=0;ie<L.length;ie++)switch(L[ie].type){case"bct":L[ie].x2+=Y,L[ie].y2+=ne;case"qct":L[ie].x1+=Y,L[ie].y1+=ne;default:L[ie].x+=Y,L[ie].y+=ne}return L},D=function(L){return L.sort(function(Y,ne){return Y-ne})},M=function(L,Y){for(var ne,ie,V=this.fillStyle,fe=this.strokeStyle,he=this.lineCap,pe=this.lineWidth,Ce=Math.abs(pe*this.ctx.transform.scaleX),ue=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),Te=[],W=0;W<Ge.length;W++)if(Ge[W].x!==void 0)for(var He=N.call(this,Ge[W]),je=0;je<He.length;je+=1)Te.indexOf(He[je])===-1&&Te.push(He[je]);for(var Ze=0;Ze<Te.length;Ze++)for(;this.pdf.internal.getNumberOfPages()<Te[Ze];)C.call(this);if(D(Te),this.autoPaging)for(var $e=Te[0],le=Te[Te.length-1],xe=$e;xe<le+1;xe++){this.pdf.setPage(xe),this.fillStyle=V,this.strokeStyle=fe,this.lineCap=he,this.lineWidth=Ce,this.lineJoin=ue;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=xe===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=xe===1?0:Ye+(xe-2)*Ue;if(this.ctx.clip_path.length!==0){var wt=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ne,this.posX+this.margin[3],-Xe+ze+this.ctx.prevPageLastElemOffset),U.call(this,L,!0),this.path=wt}if(ie=JSON.parse(JSON.stringify(Pe)),this.path=F(ie,this.posX+this.margin[3],-Xe+ze+this.ctx.prevPageLastElemOffset),Y===!1||xe===0){var ot=(xe>$e||xe<le)&&P.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Ue,null).clip().discardPath()),U.call(this,L,Y),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=Ce,U.call(this,L,Y),this.lineWidth=pe;this.path=Pe},U=function(L,Y){if((L!=="stroke"||Y||!A.call(this))&&(L==="stroke"||Y||!y.call(this))){for(var ne,ie,V=[],fe=this.path,he=0;he<fe.length;he++){var pe=fe[he];switch(pe.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:pe,deltas:[],abs:[]});break;case"lt":var Ce=V.length;if(fe[he-1]&&!isNaN(fe[he-1].x)&&(ne=[pe.x-fe[he-1].x,pe.y-fe[he-1].y],Ce>0)){for(;Ce>=0;Ce--)if(V[Ce-1].close!==!0&&V[Ce-1].begin!==!0){V[Ce-1].deltas.push(ne),V[Ce-1].abs.push(pe);break}}break;case"bct":ne=[pe.x1-fe[he-1].x,pe.y1-fe[he-1].y,pe.x2-fe[he-1].x,pe.y2-fe[he-1].y,pe.x-fe[he-1].x,pe.y-fe[he-1].y],V[V.length-1].deltas.push(ne);break;case"qct":var ue=fe[he-1].x+2/3*(pe.x1-fe[he-1].x),Pe=fe[he-1].y+2/3*(pe.y1-fe[he-1].y),Ge=pe.x+2/3*(pe.x1-pe.x),Te=pe.y+2/3*(pe.y1-pe.y),W=pe.x,He=pe.y;ne=[ue-fe[he-1].x,Pe-fe[he-1].y,Ge-fe[he-1].x,Te-fe[he-1].y,W-fe[he-1].x,He-fe[he-1].y],V[V.length-1].deltas.push(ne);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(pe)}}ie=Y?null:L==="stroke"?"stroke":"fill";for(var je=!1,Ze=0;Ze<V.length;Ze++)if(V[Ze].arc)for(var $e=V[Ze].abs,le=0;le<$e.length;le++){var xe=$e[le];xe.type==="arc"?re.call(this,xe.x,xe.y,xe.radius,xe.startAngle,xe.endAngle,xe.counterclockwise,void 0,Y,!je):H.call(this,xe.x,xe.y),je=!0}else if(V[Ze].close===!0)this.pdf.internal.out("h"),je=!1;else if(V[Ze].begin!==!0){var De=V[Ze].start.x,ze=V[Ze].start.y;te.call(this,V[Ze].deltas,De,ze),je=!0}ie&&K.call(this,ie),Y&&de.call(this)}},Q=function(L){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-ne;case"top":return L+Y-ne;case"hanging":return L+Y-2*ne;case"middle":return L+Y/2-ne;default:return L}},J=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(Y,ne){this.colorStops.push([Y,ne])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(L,Y,ne,ie,V,fe,he,pe,Ce){for(var ue=se.call(this,ne,ie,V,fe),Pe=0;Pe<ue.length;Pe++){var Ge=ue[Pe];Pe===0&&(Ce?E.call(this,Ge.x1+L,Ge.y1+Y):H.call(this,Ge.x1+L,Ge.y1+Y)),we.call(this,L,Y,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}pe?de.call(this):K.call(this,he)},K=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},de=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,Y){this.pdf.internal.out(n(L)+" "+a(Y)+" m")},I=function(L){var Y;switch(L.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var ne=this.pdf.getTextDimensions(L.text),ie=Q.call(this,L.y),V=J.call(this,ie)-ne.h,fe=this.ctx.transform.applyToPoint(new d(L.x,ie)),he=this.ctx.transform.decompose(),pe=new h;pe=(pe=(pe=pe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Ce,ue,Pe,Ge=this.ctx.transform.applyToRectangle(new u(L.x,ie,ne.w,ne.h)),Te=pe.applyToRectangle(new u(L.x,V,ne.w,ne.h)),W=N.call(this,Te),He=[],je=0;je<W.length;je+=1)He.indexOf(W[je])===-1&&He.push(W[je]);if(D(He),this.autoPaging)for(var Ze=He[0],$e=He[He.length-1],le=Ze;le<$e+1;le++){this.pdf.setPage(le);var xe=le===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Ye=ze-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Xe=Ue-this.margin[3],wt=le===1?0:De+(le-2)*Ye;if(this.ctx.clip_path.length!==0){var ot=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ce,this.posX+this.margin[3],-1*wt+xe),U.call(this,"fill",!0),this.path=ot}var dt=F([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-wt+xe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*L.scale),Pe=this.lineWidth,this.lineWidth=Pe*L.scale);var Pt=this.autoPaging!=="text";if(Pt||dt.y+dt.h<=ze){if(Pt||dt.y>=xe&&dt.x<=Ue){var ut=Pt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ue-dt.x)[0],mr=F([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-wt+xe+this.ctx.prevPageLastElemOffset)[0],Xt=Pt&&(le>Ze||le<$e)&&P.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Ye,null).clip().discardPath()),this.pdf.text(ut,mr.x,mr.y,{angle:L.angle,align:Y,renderingMode:L.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else dt.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-dt.y);L.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=Pe)}else L.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*L.scale),Pe=this.lineWidth,this.lineWidth=Pe*L.scale),this.pdf.text(L.text,fe.x+this.posX,fe.y+this.posY,{angle:L.angle,align:Y,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=Pe)},H=function(L,Y,ne,ie){ne=ne||0,ie=ie||0,this.pdf.internal.out(n(L+ne)+" "+a(Y+ie)+" l")},te=function(L,Y,ne){return this.pdf.lines(L,Y,ne,null,null)},we=function(L,Y,ne,ie,V,fe,he,pe){this.pdf.internal.out([r(o(ne+L)),r(l(ie+Y)),r(o(V+L)),r(l(fe+Y)),r(o(he+L)),r(l(pe+Y)),"c"].join(" "))},se=function(L,Y,ne,ie){for(var V=2*Math.PI,fe=Math.PI/2;Y>ne;)Y-=V;var he=Math.abs(ne-Y);he<V&&ie&&(he=V-he);for(var pe=[],Ce=ie?-1:1,ue=Y;he>1e-5;){var Pe=ue+Ce*Math.min(he,fe);pe.push($.call(this,L,ue,Pe)),he-=Math.abs(Pe-ue),ue=Pe}return pe},$=function(L,Y,ne){var ie=(ne-Y)/2,V=L*Math.cos(ie),fe=L*Math.sin(ie),he=V,pe=-fe,Ce=he*he+pe*pe,ue=Ce+he*V+pe*fe,Pe=4/3*(Math.sqrt(2*Ce*ue)-ue)/(he*fe-pe*V),Ge=he-Pe*pe,Te=pe+Pe*he,W=Ge,He=-Te,je=ie+Y,Ze=Math.cos(je),$e=Math.sin(je);return{x1:L*Math.cos(Y),y1:L*Math.sin(Y),x2:Ge*Ze-Te*$e,y2:Ge*$e+Te*Ze,x3:W*Ze-He*$e,y3:W*$e+He*Ze,x4:L*Math.cos(ne),y4:L*Math.sin(ne)}},ee=function(L){return 180*L/Math.PI},ge=function(L,Y,ne,ie,V,fe){var he=L+.5*(ne-L),pe=Y+.5*(ie-Y),Ce=V+.5*(ne-V),ue=fe+.5*(ie-fe),Pe=Math.min(L,V,he,Ce),Ge=Math.max(L,V,he,Ce),Te=Math.min(Y,fe,pe,ue),W=Math.max(Y,fe,pe,ue);return new u(Pe,Te,Ge-Pe,W-Te)},Se=function(L,Y,ne,ie,V,fe,he,pe){var Ce,ue,Pe,Ge,Te,W,He,je,Ze,$e,le,xe,De,ze,Ye=ne-L,Ue=ie-Y,Xe=V-ne,wt=fe-ie,ot=he-V,dt=pe-fe;for(ue=0;ue<41;ue++)Ze=(He=(Pe=L+(Ce=ue/40)*Ye)+Ce*((Te=ne+Ce*Xe)-Pe))+Ce*(Te+Ce*(V+Ce*ot-Te)-He),$e=(je=(Ge=Y+Ce*Ue)+Ce*((W=ie+Ce*wt)-Ge))+Ce*(W+Ce*(fe+Ce*dt-W)-je),ue==0?(le=Ze,xe=$e,De=Ze,ze=$e):(le=Math.min(le,Ze),xe=Math.min(xe,$e),De=Math.max(De,Ze),ze=Math.max(ze,$e));return new u(Math.round(le),Math.round(xe),Math.round(De-le),Math.round(ze-xe))},T=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,Y,ne=(L=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:Y}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Et.API),(function(e){var r=function(d){var u,h,p,m,b,j,y,A,P,N;for(h=[],p=0,m=(d+=u="\0\0\0\0".slice(d.length%4||4)).length;m>p;p+=4)(b=(d.charCodeAt(p)<<24)+(d.charCodeAt(p+1)<<16)+(d.charCodeAt(p+2)<<8)+d.charCodeAt(p+3))!==0?(j=(b=((b=((b=((b=(b-(N=b%85))/85)-(P=b%85))/85)-(A=b%85))/85)-(y=b%85))/85)%85,h.push(j+33,y+33,A+33,P+33,N+33)):h.push(122);return(function(C,F){for(var D=F;D>0;D--)C.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},n=function(d){var u,h,p,m,b,j=String,y="length",A=255,P="charCodeAt",N="slice",C="replace";for(d[N](-2),d=d[N](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),p=[],m=0,b=(d+=u="uuuuu"[N](d[y]%5||5))[y];b>m;m+=5)h=52200625*(d[P](m)-33)+614125*(d[P](m+1)-33)+7225*(d[P](m+2)-33)+85*(d[P](m+3)-33)+(d[P](m+4)-33),p.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(F,D){for(var M=D;M>0;M--)F.pop()})(p,u[y]),j.fromCharCode.apply(j,p)},a=function(d){return d.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(d){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),u.test(d)===!1)return"";for(var h="",p=0;p<d.length;p+=2)h+=String.fromCharCode("0x"+(d[p]+d[p+1]));return h},l=function(d){for(var u=new Uint8Array(d.length),h=d.length;h--;)u[h]=d.charCodeAt(h);return(u=g0(u)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};e.processDataByFilters=function(d,u){var h=0,p=d||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=r(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=o(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=a(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=l(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(Et.API),(function(e){e.loadFile=function(r,n,a){return(function(o,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=(function(h,p,m){var b=new XMLHttpRequest,j=0,y=function(A){var P=A.length,N=[],C=String.fromCharCode;for(j=0;j<P;j+=1)N.push(C(255&A.charCodeAt(j)));return N.join("")};if(b.open("GET",h,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?m(y(this.responseText)):m(void 0)}),b.send(null),p&&b.status===200)return y(b.responseText)})(o,l,d)}catch{}return u})(r,n,a)},e.loadImageFile=e.loadFile})(Et.API),(function(e){function r(){return(Vt.html2canvas?Promise.resolve(Vt.html2canvas):ja(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(Vt.DOMPurify?Promise.resolve(Vt.DOMPurify):ja(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var a=function(u){var h=Cr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(u,h){var p=document.createElement(u);for(var m in h.className&&(p.className=h.className),h.innerHTML&&h.dompurify&&(p.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)p.style[m]=h.style[m];return p},l=function u(h,p){for(var m=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(u(b,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(m.width=h.width,m.height=h.height,m.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(m.value=h.value),m.addEventListener("load",function(){m.scrollTop=h.scrollTop,m.scrollLeft=h.scrollLeft},!0)),m},d=function u(h){var p=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),p);return(m=m.setProgress(1,u,1,[u])).set(h)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(u,h){return u.__proto__=h||d.prototype,u},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(p){switch(a(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(n).then(function(p){return this.set({src:o("div",{innerHTML:u,dompurify:p})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},d.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,h(this.prop.container,p)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var p=this.opt.jsPDF,m=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,j=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete j.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var y=0;y<m.length;++y){var A=m[y],P=A.src.find(function(N){return N.format==="truetype"});P&&p.addFont(P.url,A.ref.name,A.ref.style)}return j.windowHeight=j.windowHeight||0,j.windowHeight=j.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):j.windowHeight,p.context2d.save(!0),h(this.prop.container,j)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(u,h,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},d.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},d.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},d.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(u){if(a(u)!=="object")return this;var h=Object.keys(u||{}).map(function(p){if(p in d.template.prop)return function(){this.prop[p]=u[p]};switch(p){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[p]=u[p]}}},this);return this.then(function(){return this.thenList(h)})},d.prototype.get=function(u,h){return this.then(function(){var p=u in d.template.prop?this.prop[u]:this.opt[u];return h?h(p):p})},d.prototype.setMargin=function(u){return this.then(function(){switch(a(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},d.prototype.setPageSize=function(u){function h(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(u=u||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},d.prototype.setProgress=function(u,h,p,m){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(u,h,p,m){return this.setProgress(u?this.progress.val+u:null,h||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},d.prototype.then=function(u,h){var p=this;return this.thenCore(u,h,function(m,b){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(j){return p.updateProgress(null,m),j}).then(m,b).then(function(j){return p.updateProgress(1),j})})},d.prototype.thenCore=function(u,h,p){p=p||Promise.prototype.then;var m=this;u&&(u=u.bind(m)),h&&(h=h.bind(m));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:d.convert(Object.assign({},m),Promise.prototype),j=p.call(b,u,h);return d.convert(j,m.__proto__)},d.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},d.prototype.thenList=function(u){var h=this;return u.forEach(function(p){h=h.thenCore(p)}),h},d.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return d.convert(h,this)},d.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},d.prototype.error=function(u){return this.then(function(){throw new Error(u)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Et.getPageSize=function(u,h,p){if(Cr(u)==="object"){var m=u;u=m.orientation,h=m.unit||h,p=m.format||p}h=h||"mm",p=p||"a4",u=(""+(u||"P")).toLowerCase();var b,j=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+h}var A,P=0,N=0;if(y.hasOwnProperty(j))P=y[j][1]/b,N=y[j][0]/b;else try{P=p[1],N=p[0]}catch{throw new Error("Invalid format: "+p)}if(u==="p"||u==="portrait")u="p",N>P&&(A=N,N=P,P=A);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",P>N&&(A=N,N=P,P=A)}return{width:N,height:P,unit:h,k:b,orientation:u}},e.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Op):null;var p=new d(h);return h.worker?p:p.from(u).doCallback()}})(Et.API),Et.API.addJS=function(e){return S1=e,this.internal.events.subscribe("postPutResources",function(){Qh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),k1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qh!==void 0&&k1!==void 0&&this.internal.out("/Names <</JavaScript "+Qh+" 0 R>>")}),this},(function(e){var r;e.events.push(["postPutResources",function(){var n=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var d=o[l],u=a.exec(d);if(u!=null){var h=u[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(d)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(l=0;l<p;l++){var b=n.internal.newObject();m.push(b);var j=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<m.length;l++)n.internal.write("(page_"+(l+1)+")"+m[l]+" 0 R");n.internal.write(" ] >>","endobj"),r=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+r+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(a,o,l){var d={title:o,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(a){a.id=n.internal.newObjectDeferred();for(var o=0;o<a.children.length;o++)this.genIds_r(a.children[o])},n.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},n.outline.renderItems=function(a){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=n.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var p=0;p<a.children.length;p++)this.renderItems(a.children[p])},n.outline.line=function(a){this.ctx.val+=a+`\r
`},n.outline.makeRef=function(a){return a.id+" 0 R"},n.outline.makeString=function(a){return"("+n.internal.pdfEscape(a)+")"},n.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(a,o){for(var l=0;l<o.children.length;l++)a.count++,this.count_r(a,o.children[l]);return a.count}}])})(Et.API),(function(e){var r=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,a,o,l,d,u){var h,p=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=d||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,h=(function(b){for(var j,y=256*b.charCodeAt(4)+b.charCodeAt(5),A=b.length,P={width:0,height:0,numcomponents:1},N=4;N<A;N+=2){if(N+=y,r.indexOf(b.charCodeAt(N+1))!==-1){j=256*b.charCodeAt(N+5)+b.charCodeAt(N+6),P={width:256*b.charCodeAt(N+7)+b.charCodeAt(N+8),height:j,numcomponents:b.charCodeAt(N+9)};break}y=256*b.charCodeAt(N+2)+b.charCodeAt(N+3)}return P})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:n,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:p,index:a,alias:o}}return m}})(Et.API),Et.API.processPNG=function(e,r,n,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var o,l=oA(e,{checkCrc:!0}),d=l.width,u=l.height,h=l.channels,p=l.palette,m=l.depth;o=p&&h===1?(function(J){for(var re=J.width,K=J.height,de=J.data,E=J.palette,I=J.depth,H=!1,te=[],we=[],se=void 0,$=!1,ee=0,ge=0;ge<E.length;ge++){var Se=_y(E[ge],4),T=Se[0],L=Se[1],Y=Se[2],ne=Se[3];te.push(T,L,Y),ne!=null&&(ne===0?(ee++,we.length<1&&we.push(ge)):ne<255&&($=!0))}if($||ee>1){H=!0,we=void 0;var ie=re*K;se=new Uint8Array(ie);for(var V=new DataView(de.buffer),fe=0;fe<ie;fe++){var he=Mp(V,fe,I),pe=_y(E[he],4)[3];se[fe]=pe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:de,alphaBytes:se,needSMask:H,palette:te,mask:we}})(l):h===2||h===4?(function(J){for(var re=J.data,K=J.width,de=J.height,E=J.channels,I=J.depth,H=E===2?"DeviceGray":"DeviceRGB",te=E-1,we=K*de,se=te,$=we*se,ee=1*we,ge=Math.ceil($*I/8),Se=Math.ceil(ee*I/8),T=new Uint8Array(ge),L=new Uint8Array(Se),Y=new DataView(re.buffer),ne=new DataView(T.buffer),ie=new DataView(L.buffer),V=!1,fe=0;fe<we;fe++){for(var he=fe*E,pe=0;pe<se;pe++)I1(ne,Mp(Y,he+pe,I),fe*se+pe,I);var Ce=Mp(Y,he+se,I);Ce<(1<<I)-1&&(V=!0),I1(ie,Ce,1*fe,I)}return{colorSpace:H,colorsPerPixel:te,colorBytes:T,alphaBytes:L,needSMask:V}})(l):(function(J){var re=J.data,K=J.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:re instanceof Uint8Array?re:new Uint8Array(re.buffer),needSMask:!1}})(l);var b,j,y,A=o,P=A.colorSpace,N=A.colorsPerPixel,C=A.colorBytes,F=A.alphaBytes,D=A.needSMask,M=A.palette,U=A.mask,Q=null;return a!==Et.API.image_compression.NONE&&typeof g0=="function"?(Q=(function(J){var re;switch(J){case Et.API.image_compression.FAST:re=11;break;case Et.API.image_compression.MEDIUM:re=13;break;case Et.API.image_compression.SLOW:re=14;break;default:re=12}return re})(a),b=this.decode.FLATE_DECODE,j="/Predictor ".concat(Q," "),e=_1(C,d*N,N,a),D&&(y=_1(F,d,1,a))):(b=void 0,j="",e=C,D&&(y=F)),j+="/Colors ".concat(N," /BitsPerComponent ").concat(m," /Columns ").concat(d),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:n,data:e,index:r,filter:b,decodeParameters:j,transparency:U,palette:M,sMask:y,predictor:Q,width:d,height:u,bitsPerComponent:m,colorSpace:P}}},(function(e){e.processGIF89A=function(r,n,a,o){var l=new PA(r),d=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var p={data:h,width:d,height:u},m=new Bp(100).encode(p,100);return e.processJPEG.call(this,m,n,a,o)},e.processGIF87A=e.processGIF89A})(Et.API),di.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var r=0;r<e;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:a,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},di.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[e]()}catch(n){Ir.log("bit decode error:"+n)}},di.prototype.bit1=function(){var e,r=Math.ceil(this.width/8),n=r%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,o=0;o<r;o++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}n!==0&&(this.pos+=4-n)}},di.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),r=e%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*o*4,u=l>>4,h=15&l,p=this.palette[u];if(this.data[d]=p.blue,this.data[d+1]=p.green,this.data[d+2]=p.red,this.data[d+3]=255,2*o+1>=this.width)break;p=this.palette[h],this.data[d+4]=p.blue,this.data[d+4+1]=p.green,this.data[d+4+2]=p.red,this.data[d+4+3]=255}r!==0&&(this.pos+=4-r)}},di.prototype.bit8=function(){for(var e=this.width%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*a;if(o<this.palette.length){var d=this.palette[o];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},di.prototype.bit15=function(){for(var e=this.width%3,r=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&r)/r*255|0,u=(l>>5&r)/r*255|0,h=(l>>10&r)/r*255|0,p=l>>15?255:0,m=a*this.width*4+4*o;this.data[m]=h,this.data[m+1]=u,this.data[m+2]=d,this.data[m+3]=p}this.pos+=e}},di.prototype.bit16=function(){for(var e=this.width%3,r=parseInt("11111",2),n=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&r)/r*255|0,h=(d>>5&n)/n*255|0,p=(d>>11)/r*255|0,m=o*this.width*4+4*l;this.data[m]=p,this.data[m+1]=h,this.data[m+2]=u,this.data[m+3]=255}this.pos+=e}},di.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=r*this.width*4+4*n;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},di.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*n;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}},di.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(r,n,a,o){var l=new di(r,!1),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Bp(100).encode(h,100);return e.processJPEG.call(this,p,n,a,o)}})(Et.API),O1.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(r,n,a,o){var l=new O1(r),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Bp(100).encode(h,100);return e.processJPEG.call(this,p,n,a,o)}})(Et.API),Et.API.processRGBA=function(e,r,n){for(var a=e.data,o=a.length,l=new Uint8Array(o/4*3),d=new Uint8Array(o/4),u=0,h=0,p=0;p<o;p+=4){var m=a[p],b=a[p+1],j=a[p+2],y=a[p+3];l[u++]=m,l[u++]=b,l[u++]=j,d[h++]=y}var A=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:A,index:r,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Et.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},md=Et.API,Xh=md.getCharWidthsArray=function(e,r){var n,a,o=(r=r||{}).font||this.internal.getFont(),l=r.fontSize||this.internal.getFontSize(),d=r.charSpace||this.internal.getCharSpace(),u=r.widths?r.widths:o.metadata.Unicode.widths,h=u.fof?u.fof:1,p=r.kerning?r.kerning:o.metadata.Unicode.kerning,m=p.fof?p.fof:1,b=r.doKerning!==!1,j=0,y=e.length,A=0,P=u[0]||h,N=[];for(n=0;n<y;n++)a=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?N.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(j=b&&Cr(p[a])==="object"&&!isNaN(parseInt(p[a][A],10))?p[a][A]/m:0,N.push((u[a]||P)/h+j)),A=a;return N},A1=md.getStringUnitWidth=function(e,r){var n=(r=r||{}).fontSize||this.internal.getFontSize(),a=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return md.processArabic&&(e=md.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,n,o)/n:Xh.apply(this,arguments).reduce(function(l,d){return l+d},0)},C1=function(e,r,n,a){for(var o=[],l=0,d=e.length,u=0;l!==d&&u+r[l]<n;)u+=r[l],l++;o.push(e.slice(0,l));var h=l;for(u=0;l!==d;)u+r[l]>a&&(o.push(e.slice(h,l)),u=0,h=l),u+=r[l],l++;return h!==l&&o.push(e.slice(h,l)),o},P1=function(e,r,n){n||(n={});var a,o,l,d,u,h,p,m=[],b=[m],j=n.textIndent||0,y=0,A=0,P=e.split(" "),N=Xh.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?P[0].length+2:n.lineIndent||0){var C=Array(h).join(" "),F=[];P.map(function(M){(M=M.split(/\s*\n/)).length>1?F=F.concat(M.map(function(U,Q){return(Q&&U.length?`
`:"")+U})):F.push(M[0])}),P=F,h=A1.apply(this,[C,n])}for(l=0,d=P.length;l<d;l++){var D=0;if(a=P[l],h&&a[0]==`
`&&(a=a.substr(1),D=1),j+y+(A=(o=Xh.apply(this,[a,n])).reduce(function(M,U){return M+U},0))>r||D){if(A>r){for(u=C1.apply(this,[a,o,r-(j+y),r]),m.push(u.shift()),m=[u.pop()];u.length;)b.push([u.shift()]);A=o.slice(a.length-(m[0]?m[0].length:0)).reduce(function(M,U){return M+U},0)}else m=[a];b.push(m),j=A+h,y=N}else m.push(a),j+=y+A,y=N}return p=h?function(M,U){return(U?C:"")+M.join(" ")}:function(M){return M.join(" ")},b.map(p)},md.splitTextToSize=function(e,r,n){var a,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var b=this.internal.getFont(m.fontName,m.fontStyle),j="Unicode";return b.metadata[j]?{widths:b.metadata[j].widths||{0:1},kerning:b.metadata[j].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var d=1*this.internal.scaleFactor*r/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var u,h,p=[];for(u=0,h=a.length;u<h;u++)p=p.concat(P1.apply(this,[a[u],d,l]));return p},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var r="0123456789abcdef",n="klmnopqrstuvwxyz",a={},o={},l=0;l<16;l++)a[n[l]]=r[l],o[r[l]]=n[l];var d=function(j){return"0x"+parseInt(j,10).toString(16)},u=e.__fontmetrics__.compress=function(j){var y,A,P,N,C=["{"];for(var F in j){if(y=j[F],isNaN(parseInt(F,10))?A="'"+F+"'":(F=parseInt(F,10),A=(A=d(F).slice(2)).slice(0,-1)+o[A.slice(-1)]),typeof y=="number")y<0?(P=d(y).slice(3),N="-"):(P=d(y).slice(2),N=""),P=N+P.slice(0,-1)+o[P.slice(-1)];else{if(Cr(y)!=="object")throw new Error("Don't know what to do with value type "+Cr(y)+".");P=u(y)}C.push(A+P)}return C.push("}"),C.join("")},h=e.__fontmetrics__.uncompress=function(j){if(typeof j!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,A,P,N,C={},F=1,D=C,M=[],U="",Q="",J=j.length-1,re=1;re<J;re+=1)(N=j[re])=="'"?y?(P=y.join(""),y=void 0):y=[]:y?y.push(N):N=="{"?(M.push([D,P]),D={},P=void 0):N=="}"?((A=M.pop())[0][A[1]]=D,P=void 0,D=A[0]):N=="-"?F=-1:P===void 0?a.hasOwnProperty(N)?(U+=a[N],P=parseInt(U,16)*F,F=1,U=""):U+=N:a.hasOwnProperty(N)?(Q+=a[N],D[P]=parseInt(Q,16)*F,F=1,P=void 0,Q=""):Q+=N;return C},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(j){var y=j.font,A=b.Unicode[y.postScriptName];A&&(y.metadata.Unicode={},y.metadata.Unicode.widths=A.widths,y.metadata.Unicode.kerning=A.kerning);var P=m.Unicode[y.postScriptName];P&&(y.metadata.Unicode.encoding=P,y.encoding=P.codePages[0])}])})(Et.API),(function(e){var r=function(n){for(var a=n.length,o=new Uint8Array(a),l=0;l<a;l++)o[l]=n.charCodeAt(l);return o};e.API.events.push(["addFont",function(n){var a=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(a=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?r(u):r(pf(u)),d.metadata=e.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(o,a)}}])})(Et),Et.API.addSvgAsImage=function(e,r,n,a,o,l,d,u){if(isNaN(r)||isNaN(n))throw Ir.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw Ir.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Vt.canvg?Promise.resolve(Vt.canvg):ja(()=>import("./index.es-upxOaTFk.js"),[])).catch(function(j){return Promise.reject(new Error("Could not load canvg: "+j))}).then(function(j){return j.default?j.default:j}).then(function(j){return j.fromString(p,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(m)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),r,n,a,o,d,u)})},Et.API.putTotalPages=function(e){var r,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var o=0;o<this.internal.pages[a].length;o++)this.internal.pages[a][o]=this.internal.pages[a][o].replace(r,n);return this},Et.API.viewerPreferences=function(e,r){var n;e=e||{},r=r||!1;var a,o,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],p=0,m=0,b=0;function j(A,P){var N,C=!1;for(N=0;N<A.length;N+=1)A[N]===P&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||r===!0){var y=u.length;for(b=0;b<y;b+=1)n[u[b]].value=n[u[b]].defaultValue,n[u[b]].explicitSet=!1}if(Cr(e)==="object"){for(o in e)if(l=e[o],j(u,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&j(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(p=0;p<l.length;p+=1)if(a=!0,l[p].length===1&&typeof l[p][0]=="number")h.push(String(l[p]-1));else if(l[p].length>1){for(m=0;m<l[p].length;m+=1)typeof l[p][m]!="number"&&(a=!1);a===!0&&h.push([l[p][0]-1,l[p][1]-1].join(" "))}n[o].value="["+h.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,P=[];for(A in n)n[A].explicitSet===!0&&(n[A].type==="name"?P.push("/"+A+" /"+n[A].value):P.push("/"+A+" "+n[A].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(e){var r=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+d.length+u.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(o+l+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",r)),this}})(Et.API),(function(e){var r=e.API,n=r.pdfEscape16=function(l,d){for(var u,h=d.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],b=0,j=l.length;b<j;++b){if(u=d.metadata.characterToGlyph(l.charCodeAt(b)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(p[4-u.length],u)}return m.join("")},a=function(l){var d,u,h,p,m,b,j;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,j=(u=Object.keys(l).sort(function(y,A){return y-A})).length;b<j;b++)d=u[b],h.length>=100&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(p=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+p+">"));return h.length&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,m=d.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,j=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",A=0;A<j.length;A++)y+=String.fromCharCode(j[A]);var P=p();m({data:y,addLength1:!0,objectId:P}),h("endobj");var N=p();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:N}),h("endobj");var C=p();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+xd(u.fontName)),h("/FontFile2 "+P+" 0 R"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var F=p();h("<<"),h("/Type /Font"),h("/BaseFont /"+xd(u.fontName)),h("/FontDescriptor "+C+" 0 R"),h("/W "+e.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=p(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+N+" 0 R"),h("/BaseFont /"+xd(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+F+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,m=d.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,j="",y=0;y<b.length;y++)j+=String.fromCharCode(b[y]);var A=p();m({data:j,addLength1:!0,objectId:A}),h("endobj");var P=p();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:P}),h("endobj");var N=p();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+xd(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=p();for(var C=0;C<u.metadata.hmtx.widths.length;C++)u.metadata.hmtx.widths[C]=parseInt(u.metadata.hmtx.widths[C]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+xd(u.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var o=function(l){var d,u=l.text||"",h=l.x,p=l.y,m=l.options||{},b=l.mutex||{},j=b.pdfEscape,y=b.activeFontKey,A=b.fonts,P=y,N="",C=0,F="",D=A[P].encoding;if(A[P].encoding!=="Identity-H")return{text:u,x:h,y:p,options:m,mutex:b};for(F=u,P=y,Array.isArray(u)&&(F=u[0]),C=0;C<F.length;C+=1)A[P].metadata.hasOwnProperty("cmap")&&(d=A[P].metadata.cmap.unicode.codeMap[F[C].charCodeAt(0)]),d||F[C].charCodeAt(0)<256&&A[P].metadata.hasOwnProperty("Unicode")?N+=F[C]:N+="";var M="";return parseInt(P.slice(1))<14||D==="WinAnsiEncoding"?M=j(N,P).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(M=n(N,A[P])),b.isHex=!0,{text:M,x:h,y:p,options:m,mutex:b}};r.events.push(["postProcessText",function(l){var d=l.text||"",u=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var p=0;for(p=0;p<d.length;p+=1)Array.isArray(d[p])&&d[p].length===3?u.push([o(Object.assign({},h,{text:d[p][0]})).text,d[p][1],d[p][2]]):u.push(o(Object.assign({},h,{text:d[p]})).text);l.text=u}else l.text=o(Object.assign({},h,{text:d})).text}])})(Et),(function(e){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,a){return r.call(this),this.internal.vFS[n]=a,this},e.getFileFromVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Et.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var o,l,d,u,h,p,m,b=r,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,D=0;this.__bidiEngine__={};var M=function(E){var I=E.charCodeAt(),H=I>>8,te=P[H];return te!==void 0?b[256*te+(255&I)]:H===252||H===253?"AL":C.test(H)?"L":H===8?"R":"N"},U=function(E){for(var I,H=0;H<E.length;H++){if((I=M(E.charAt(H)))==="L")return!1;if(I==="R")return!0}return!1},Q=function(E,I,H,te){var we,se,$,ee,ge=I[te];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(ge="AN");break;case"AL":F=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":te<1||te+1>=I.length||(we=H[te-1])!=="EN"&&we!=="AN"||(se=I[te+1])!=="EN"&&se!=="AN"?ge="N":F&&(se="AN"),ge=se===we?se:"N";break;case"ES":ge=(we=te>0?H[te-1]:"B")==="EN"&&te+1<I.length&&I[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&H[te-1]==="EN"){ge="EN";break}if(F){ge="N";break}for($=te+1,ee=I.length;$<ee&&I[$]==="ET";)$++;ge=$<ee&&I[$]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(ee=I.length,$=te+1;$<ee&&I[$]==="NSM";)$++;if($<ee){var Se=E[te],T=Se>=1425&&Se<=2303||Se===64286;if(we=I[$],T&&(we==="R"||we==="AL")){ge="R";break}}}ge=te<1||(we=I[te-1])==="B"?"N":H[te-1];break;case"B":F=!1,o=!0,ge=D;break;case"S":l=!0,ge="N"}return ge},J=function(E,I,H){var te=E.split("");return H&&re(te,H,{hiLevel:D}),te.reverse(),I&&I.reverse(),te.join("")},re=function(E,I,H){var te,we,se,$,ee,ge=-1,Se=E.length,T=0,L=[],Y=D?y:j,ne=[];for(F=!1,o=!1,l=!1,we=0;we<Se;we++)ne[we]=M(E[we]);for(se=0;se<Se;se++){if(ee=T,L[se]=Q(E,ne,L,se),te=240&(T=Y[ee][A[L[se]]]),T&=15,I[se]=$=Y[T][5],te>0)if(te===16){for(we=ge;we<se;we++)I[we]=1;ge=-1}else ge=-1;if(Y[T][6])ge===-1&&(ge=se);else if(ge>-1){for(we=ge;we<se;we++)I[we]=$;ge=-1}ne[se]==="B"&&(I[se]=0),H.hiLevel|=$}l&&(function(ie,V,fe){for(var he=0;he<fe;he++)if(ie[he]==="S"){V[he]=D;for(var pe=he-1;pe>=0&&ie[pe]==="WS";pe--)V[pe]=D}})(ne,I,Se)},K=function(E,I,H,te,we){if(!(we.hiLevel<E)){if(E===1&&D===1&&!o)return I.reverse(),void(H&&H.reverse());for(var se,$,ee,ge,Se=I.length,T=0;T<Se;){if(te[T]>=E){for(ee=T+1;ee<Se&&te[ee]>=E;)ee++;for(ge=T,$=ee-1;ge<$;ge++,$--)se=I[ge],I[ge]=I[$],I[$]=se,H&&(se=H[ge],H[ge]=H[$],H[$]=se);T=ee}T++}}},de=function(E,I,H){var te=E.split(""),we={hiLevel:D};return H||(H=[]),re(te,H,we),(function(se,$,ee){if(ee.hiLevel!==0&&m)for(var ge,Se=0;Se<se.length;Se++)$[Se]===1&&(ge=N.indexOf(se[Se]))>=0&&(se[Se]=N[ge+1])})(te,H,we),K(2,te,I,H,we),K(1,te,I,H,we),te.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,H){if((function(we,se){if(se)for(var $=0;$<we.length;$++)se[$]=$;u===void 0&&(u=U(we)),p===void 0&&(p=U(we))})(E,I),d||!h||p)if(d&&h&&u^p)D=u?1:0,E=J(E,I,H);else if(!d&&h&&p)D=u?1:0,E=de(E,I,H),E=J(E,I);else if(!d||u||h||p){if(d&&!h&&u^p)E=J(E,I),u?(D=0,E=de(E,I,H)):(D=1,E=de(E,I,H),E=J(E,I));else if(d&&u&&!h&&p)D=1,E=de(E,I,H),E=J(E,I);else if(!d&&!h&&u^p){var te=m;u?(D=1,E=de(E,I,H),D=0,m=!1,E=de(E,I,H),m=te):(D=0,E=de(E,I,H),E=J(E,I),D=1,m=!1,E=de(E,I,H),m=te,E=J(E,I))}}else D=0,E=de(E,I,H);else D=u?1:0,E=de(E,I,H);return E},this.__bidiEngine__.setOptions=function(E){E&&(d=E.isInputVisual,h=E.isOutputVisual,u=E.isInputRtl,p=E.isOutputRtl,m=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var o=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(d=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?d.push([n.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):d.push([n.doBidiReorder(o[u])]);a.text=d}else a.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])})(Et),Et.API.TTFFont=(function(){function e(r){var n;if(this.rawData=r,n=this.contents=new _l(r),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new $A(this),this.registerTTF()}return e.open=function(r){return new e(r)},e.prototype.parse=function(){return this.directory=new _A(this.contents),this.head=new LA(this),this.name=new OA(this),this.cmap=new wv(this),this.toUnicode={},this.hhea=new EA(this),this.maxp=new RA(this),this.hmtx=new MA(this),this.post=new IA(this),this.os2=new FA(this),this.loca=new zA(this),this.glyf=new BA(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var r,n,a,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,h,p;for(p=[],d=0,u=(h=this.bbox).length;d<u;d++)r=h[d],p.push(Math.round(r*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(a=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(r){var n;return((n=this.cmap.unicode)!=null?n.codeMap[r]:void 0)||0},e.prototype.widthOfGlyph=function(r){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*n},e.prototype.widthOfString=function(r,n,a){var o,l,d,u;for(d=0,l=0,u=(r=""+r).length;0<=u?l<u:l>u;l=0<=u?++l:--l)o=r.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(o))+a*(1e3/n)||0;return d*(n/1e3)},e.prototype.lineHeight=function(r,n){var a;return n==null&&(n=!1),a=n?this.lineGap:0,(this.ascender+a-this.decender)/1e3*r},e})();var vi,_l=(function(){function e(r){this.data=r??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(r){return this.data[this.pos++]=r},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},e.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},e.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},e.prototype.readString=function(r){var n,a;for(a=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)a[n]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(r){var n,a,o;for(o=[],n=0,a=r.length;0<=a?n<a:n>a;n=0<=a?++n:--n)o.push(this.writeByte(r.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(r){return this.writeInt16(r)},e.prototype.readLongLong=function(){var r,n,a,o,l,d,u,h;return r=this.readByte(),n=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^n)+1099511627776*(255^a)+4294967296*(255^o)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*r+281474976710656*n+1099511627776*a+4294967296*o+16777216*l+65536*d+256*u+h},e.prototype.writeLongLong=function(r){var n,a;return n=Math.floor(r/4294967296),a=4294967295&r,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(r){return this.writeInt32(r)},e.prototype.read=function(r){var n,a;for(n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push(this.readByte());return n},e.prototype.write=function(r){var n,a,o,l;for(l=[],a=0,o=r.length;a<o;a++)n=r[a],l.push(this.writeByte(n));return l},e})(),_A=(function(){var e;function r(n){var a,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)a={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[a.tag]=a}return r.prototype.encode=function(n){var a,o,l,d,u,h,p,m,b,j,y,A,P;for(P in y=Object.keys(n).length,h=Math.log(2),b=16*Math.floor(Math.log(y)/h),d=Math.floor(b/h),m=16*y-b,(o=new _l).writeInt(this.scalarType),o.writeShort(y),o.writeShort(b),o.writeShort(d),o.writeShort(m),l=16*y,p=o.pos+l,u=null,A=[],n)for(j=n[P],o.writeString(P),o.writeInt(e(j)),o.writeInt(p),o.writeInt(j.length),A=A.concat(j),P==="head"&&(u=p),p+=j.length;p%4;)A.push(0),p++;return o.write(A),a=2981146554-e(o.data),o.pos=u+8,o.writeUInt32(a),o.data},e=function(n){var a,o,l,d;for(n=Nv.call(n);n.length%4;)n.push(0);for(l=new _l(n),o=0,a=0,d=n.length;a<d;a=a+=4)o+=l.readUInt32();return 4294967295&o},r})(),DA={}.hasOwnProperty,Ji=function(e,r){for(var n in r)DA.call(r,n)&&(e[n]=r[n]);function a(){this.constructor=e}return a.prototype=r.prototype,e.prototype=new a,e.__super__=r.prototype,e};vi=(function(){function e(r){var n;this.file=r,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var LA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new _l).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e})(),R1=(function(){function e(r,n){var a,o,l,d,u,h,p,m,b,j,y,A,P,N,C,F,D;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=n+r.readInt(),b=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=r.readByte();break;case 4:for(y=r.readUInt16(),j=y/2,r.pos+=6,l=(function(){var M,U;for(U=[],h=M=0;0<=j?M<j:M>j;h=0<=j?++M:--M)U.push(r.readUInt16());return U})(),r.pos+=2,P=(function(){var M,U;for(U=[],h=M=0;0<=j?M<j:M>j;h=0<=j?++M:--M)U.push(r.readUInt16());return U})(),p=(function(){var M,U;for(U=[],h=M=0;0<=j?M<j:M>j;h=0<=j?++M:--M)U.push(r.readUInt16());return U})(),m=(function(){var M,U;for(U=[],h=M=0;0<=j?M<j:M>j;h=0<=j?++M:--M)U.push(r.readUInt16());return U})(),o=(this.length-r.pos+this.offset)/2,u=(function(){var M,U;for(U=[],h=M=0;0<=o?M<o:M>o;h=0<=o?++M:--M)U.push(r.readUInt16());return U})(),h=C=0,D=l.length;C<D;h=++C)for(N=l[h],a=F=A=P[h];A<=N?F<=N:F>=N;a=A<=N?++F:--F)m[h]===0?d=a+p[h]:(d=u[m[h]/2+(a-A)-(j-h)]||0)!==0&&(d+=p[h]),this.codeMap[a]=65535&d}r.pos=b}return e.encode=function(r,n){var a,o,l,d,u,h,p,m,b,j,y,A,P,N,C,F,D,M,U,Q,J,re,K,de,E,I,H,te,we,se,$,ee,ge,Se,T,L,Y,ne,ie,V,fe,he,pe,Ce,ue,Pe;switch(te=new _l,d=Object.keys(r).sort(function(Ge,Te){return Ge-Te}),n){case"macroman":for(P=0,N=(function(){var Ge=[];for(A=0;A<256;++A)Ge.push(0);return Ge})(),F={0:0},l={},we=0,ge=d.length;we<ge;we++)F[pe=r[o=d[we]]]==null&&(F[pe]=++P),l[o]={old:r[o],new:F[r[o]]},N[o]=F[r[o]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(N),{charMap:l,subtable:te.data,maxGlyphID:P+1};case"unicode":for(I=[],b=[],D=0,F={},a={},C=p=null,se=0,Se=d.length;se<Se;se++)F[U=r[o=d[se]]]==null&&(F[U]=++D),a[o]={old:U,new:F[U]},u=F[U]-o,C!=null&&u===p||(C&&b.push(C),I.push(o),p=u),C=o;for(C&&b.push(C),b.push(65535),I.push(65535),de=2*(K=I.length),re=2*Math.pow(Math.log(K)/Math.LN2,2),j=Math.log(re/2)/Math.LN2,J=2*K-re,h=[],Q=[],y=[],A=$=0,T=I.length;$<T;A=++$){if(E=I[A],m=b[A],E===65535){h.push(0),Q.push(0);break}if(E-(H=a[E].new)>=32768)for(h.push(0),Q.push(2*(y.length+K-A)),o=ee=E;E<=m?ee<=m:ee>=m;o=E<=m?++ee:--ee)y.push(a[o].new);else h.push(H-E),Q.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*K+2*y.length),te.writeUInt16(0),te.writeUInt16(de),te.writeUInt16(re),te.writeUInt16(j),te.writeUInt16(J),fe=0,L=b.length;fe<L;fe++)o=b[fe],te.writeUInt16(o);for(te.writeUInt16(0),he=0,Y=I.length;he<Y;he++)o=I[he],te.writeUInt16(o);for(Ce=0,ne=h.length;Ce<ne;Ce++)u=h[Ce],te.writeUInt16(u);for(ue=0,ie=Q.length;ue<ie;ue++)M=Q[ue],te.writeUInt16(M);for(Pe=0,V=y.length;Pe<V;Pe++)P=y[Pe],te.writeUInt16(P);return{charMap:a,subtable:te.data,maxGlyphID:D+1}}},e})(),wv=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)n=new R1(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,o;return n==null&&(n="macroman"),a=R1.encode(r,n),(o=new _l).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},e})(),EA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e})(),FA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a})(),this.charRange=(function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e})(),IA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 262144:return this.map=(function(){var d,u,h;for(h=[],l=d=0,u=this.file.maxp.numGlyphs;0<=u?d<u:d>u;l=0<=u?++d:--d)h.push(r.readUInt32());return h}).call(this)}},e})(),TA=function(e,r){this.raw=e,this.length=e.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},OA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,o,l,d,u,h,p,m,b,j;for(r.pos=this.offset,r.readShort(),n=r.readShort(),u=r.readShort(),a=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(h={},l=m=0,b=a.length;m<b;l=++m)o=a[l],r.pos=o.offset,p=r.readString(o.length),d=new TA(p,o),h[j=o.nameID]==null&&(h[j]=[]),h[o.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e})(),RA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e})(),MA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,o,l,d,u,h;for(r.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],n=p=0;0<=o?p<o:p>o;n=0<=o?++p:--p)m.push(r.readInt16());return m})(),this.widths=(function(){var p,m,b,j;for(j=[],p=0,m=(b=this.metrics).length;p<m;p++)l=b[p],j.push(l.advance);return j}).call(this),a=this.widths[this.widths.length-1],h=[],n=d=0;0<=o?d<o:d>o;n=0<=o?++d:--d)h.push(this.widths.push(a));return h},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e})(),Nv=[].slice,BA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,o,l,d,u,h,p,m,b;return r in this.cache?this.cache[r]:(l=this.file.loca,n=this.file.contents,a=l.indexOf(r),(o=l.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,d=(u=new _l(n.read(o))).readShort(),p=u.readShort(),b=u.readShort(),h=u.readShort(),m=u.readShort(),this.cache[r]=d===-1?new qA(u,p,b,h,m):new UA(u,d,p,b,h,m),this.cache[r]))},e.prototype.encode=function(r,n,a){var o,l,d,u,h;for(d=[],l=[],u=0,h=n.length;u<h;u++)o=r[n[u]],l.push(d.length),o&&(d=d.concat(o.encode(a)));return l.push(d.length),{table:d,offsets:l}},e})(),UA=(function(){function e(r,n,a,o,l,d){this.raw=r,this.numberOfContours=n,this.xMin=a,this.yMin=o,this.xMax=l,this.yMax=d,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),qA=(function(){function e(r,n,a,o,l){var d,u;for(this.raw=r,this.xMin=n,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return e.prototype.encode=function(){var r,n,a;for(n=new _l(Nv.call(this.raw.data)),r=0,a=this.glyphIDs.length;r<a;++r)n.pos=this.glyphOffsets[r];return n.data},e})(),zA=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ji(e,vi),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(r.readUInt32());return l}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,d=0;d<a.length;++d)if(a[d]=o,l<n.length&&n[l]==d){++l,a[d]=o;var u=this.offsets[d],h=this.offsets[d+1]-u;h>0&&(o+=h)}for(var p=new Array(4*a.length),m=0;m<a.length;++m)p[4*m+3]=255&a[m],p[4*m+2]=(65280&a[m])>>8,p[4*m+1]=(16711680&a[m])>>16,p[4*m]=(4278190080&a[m])>>24;return p},e})(),$A=(function(){function e(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var r,n,a,o,l;for(n in o=this.font.cmap.tables[0].codeMap,r={},l=this.subset)a=l[n],r[n]=o[a];return r},e.prototype.glyphsFor=function(r){var n,a,o,l,d,u,h;for(o={},d=0,u=r.length;d<u;d++)o[l=r[d]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(a=o[l])!=null&&a.compound&&n.push.apply(n,a.glyphIDs);if(n.length>0)for(l in h=this.glyphsFor(n))a=h[l],o[l]=a;return o},e.prototype.encode=function(r,n){var a,o,l,d,u,h,p,m,b,j,y,A,P,N,C;for(o in a=wv.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(r),y={0:0},C=a.charMap)y[(h=C[o]).old]=h.new;for(A in j=a.maxGlyphID,d)A in y||(y[A]=j++);return m=(function(F){var D,M;for(D in M={},F)M[F[D]]=D;return M})(y),b=Object.keys(m).sort(function(F,D){return F-D}),P=(function(){var F,D,M;for(M=[],F=0,D=b.length;F<D;F++)u=b[F],M.push(m[u]);return M})(),l=this.font.glyf.encode(d,P,y),p=this.font.loca.encode(l.offsets,P),N={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},e})();Et.API.PDFObject=(function(){var e;function r(){}return e=function(n,a){return(Array(a+1).join("0")+n).slice(-a)},r.convert=function(n){var a,o,l,d;if(Array.isArray(n))return"["+(function(){var u,h,p;for(p=[],u=0,h=n.length;u<h;u++)a=n[u],p.push(r.convert(a));return p})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)d=n[o],l.push("/"+o+" "+r.convert(d));return l.push(">>"),l.join(`
`)}return""+n},r})();const VA={data:null,isLoading:!1,error:null,dashboardData:null,dashboardLoading:!1,dashboardError:null},Lu=Ur("cityTax/fetchData",async(e,{rejectWithValue:r})=>{try{const{touristTaxAPI:n}=await ja(async()=>{const{touristTaxAPI:o}=await import("./touristTax.api-DSw_oWdL.js");return{touristTaxAPI:o}},[]);return await n.getTouristTax(e)}catch(n){return console.error("Redux: Error fetching city tax:",n),r(n.response?.data?.message||n.message||"Failed to fetch city tax data")}}),jv=To({name:"touristTax",initialState:VA,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Lu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Lu.fulfilled,(r,n)=>{console.log("City Tax API Response:",n.payload),r.isLoading=!1,r.data=n.payload.totalTax,console.log("Redux State Updated:",r.data)}).addCase(Lu.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{clearError:s8}=jv.actions,HA=jv.reducer,WA=()=>{const[e,r]=O.useState(392776),[n,a]=O.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[o,l]=O.useState("checkin"),d=rs(),u=Ht(D=>D.touristTax),{data:h,isLoading:p,error:m}=u,{properties:b,isLoading:j}=Ht(D=>D.properties),y=h?{propertyId:h.propertyId||e||392776,startDate:h.startDate||n.startDate,endDate:h.endDate||n.endDate,cityTaxCalculated:h.cityTaxCalculated||0,cityTaxCalculatedFormatted:h.cityTaxCalculatedFormatted||"€0,00",cityTaxNights:h.cityTaxNights||0,childrenNights:h.childrenNights||0,nightsBeyond:h.nightsBeyond||0,totalNights:h.totalNights||0,totalNightsFromAPI:h.hostkitTotalNights||0,cityTaxInvoiced:h.cityTaxInvoiced||0,cityTaxInvoicedFormatted:h.cityTaxInvoicedFormatted||"€0,00",cityTaxInvoicedNights:h.cityTaxInvoicedNights||0,totalTax:h.totalTax||0,totalTaxFormatted:h.totalTaxFormatted||"€0,00",totalBookings:h.totalBookings||0,totalGuests:h.totalGuests||0,adultNights:h.adultNights||0,exemptNights:h.exemptNights||0,taxableNights:h.taxableNights||0,averageTaxPerNight:h.averageTaxPerNight||0,averageTaxPerNightFormatted:h.averageTaxPerNightFormatted||"€0,00",averageTaxPerGuest:h.averageTaxPerGuest||0,averageTaxPerGuestFormatted:h.averageTaxPerGuestFormatted||"€0,00",bookingsPlatforms:h.bookingsPlatforms||{},taxStatus:h.taxStatus||"not_implemented",dataSource:h.dataSource||"api",futureReady:h.futureReady||!0,currency:"EUR"}:{propertyId:e||392776,startDate:n.startDate,endDate:n.endDate,totalTax:0,totalTaxFormatted:"€0,00",totalBookings:0,totalGuests:0,totalNights:0,adultNights:0,childrenNights:0,exemptNights:0,taxableNights:0,averageTaxPerNight:0,averageTaxPerNightFormatted:"€0,00",averageTaxPerGuest:0,averageTaxPerGuestFormatted:"€0,00",bookingsPlatforms:{},taxStatus:"not_implemented",dataSource:"fallback",futureReady:!0,currency:"EUR"};O.useEffect(()=>{b.length===0&&!j&&d(Gi())},[d,b.length,j]),O.useEffect(()=>{e&&d(Lu({propertyId:e,startDate:n.startDate,endDate:n.endDate,filterType:o}))},[d,e,n,o]);const A=(D,M)=>{a(U=>({...U,[D]:M}))},P=()=>{e&&d(Lu({propertyId:e,startDate:n.startDate,endDate:n.endDate,filterType:o}))},N=()=>{if(console.log("Export PDF button clicked"),console.log("Data available:",!!h),console.log("Selected property ID:",e),console.log("Display data:",y),!h||!e){alert("No data available to export");return}try{console.log("Creating PDF document...");const D=new Et,M=D.internal.pageSize.getWidth(),U=D.internal.pageSize.getHeight(),Q=b?.find(E=>E.id===e)?.name||`Property ID: ${e}`;D.setFontSize(20),D.setFont("helvetica","bold"),D.text("Tourist Tax Report",M/2,20,{align:"center"}),D.setFontSize(12),D.setFont("helvetica","normal"),D.text(`Property: ${Q}`,20,35),D.text(`Date Range: ${new Date(n.startDate).toLocaleDateString()} - ${new Date(n.endDate).toLocaleDateString()}`,20,45),D.text(`Generated: ${new Date().toLocaleString()}`,20,55);let J=70;D.setFontSize(14),D.setFont("helvetica","bold"),D.text("Summary",20,J),J+=10,D.setFontSize(10),D.setFont("helvetica","normal"),[["Tax Status",F(y.taxStatus)],["Current Tax Collected",h?.totalTaxFormatted||"€0,00"],["Estimated Tax Potential",h?.totalTaxFormatted||"€0,00"],["Total Bookings",y.totalBookings.toString()],["Total Guests",y.totalGuests.toString()],["Total Nights",y.totalNights.toString()],["Adult Nights",y.adultNights.toString()],["Children Nights",y.childrenNights.toString()],["Taxable Nights",y.taxableNights.toString()],["Exempt Nights",y.exemptNights.toString()],["Average Tax per Night",y.averageTaxPerNightFormatted],["Average Tax per Guest",y.averageTaxPerGuestFormatted],["Tax Rate per Adult Night",h?.averageTaxPerGuestFormatted||"€0,00"]].forEach(([E,I])=>{D.text(`${E}:`,25,J),D.text(`${I}`,100,J),J+=6}),J+=10,Object.keys(y.bookingsPlatforms).length>0&&(D.setFontSize(14),D.setFont("helvetica","bold"),D.text("Bookings by Platform",20,J),J+=10,D.setFontSize(10),D.setFont("helvetica","normal"),Object.entries(y.bookingsPlatforms).forEach(([E,I])=>{const H=typeof I=="number"?I:I?.bookings||0,te=(H/y.totalBookings*100).toFixed(1);D.text(`${E}: ${H} bookings (${te}%)`,25,J),J+=6}),J+=10);const K=D.getNumberOfPages();for(let E=1;E<=K;E++)D.setPage(E),D.setFontSize(8),D.setFont("helvetica","italic"),D.text("Generated by OwnerPortal Tourist Tax System",M/2,U-10,{align:"center"});const de=`TouristTax_${Q.replace(/[^a-zA-Z0-9]/g,"_")}_${n.startDate}_to_${n.endDate}.pdf`;console.log("Saving PDF with filename:",de),D.save(de),console.log("PDF export completed successfully")}catch(D){console.error("Error exporting PDF:",D),alert("Error generating PDF: "+(D instanceof Error?D.message:String(D)))}},C=D=>{switch(D){case"active":return"text-blue-800 bg-blue-100";case"not_implemented":return"text-yellow-800 bg-yellow-100";case"exempt":return"text-gray-800 bg-gray-100";default:return"text-gray-800 bg-gray-100"}},F=D=>{switch(D){case"active":return"Active Collection";case"not_implemented":return"Not Implemented";case"exempt":return"Tax Exempt";default:return"Unknown"}};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 mb-8",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tourist Tax"}),e&&b&&t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Property: ",b.find(D=>D.id===e)?.name||`ID: ${e}`]}),t.jsx("p",{className:"text-gray-500",children:"Monitor and manage tourist tax collection and reporting"}),h&&t.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Data source: ",typeof h.dataSource=="string"?h.dataSource:"api"," • Last updated: ",new Date().toLocaleTimeString(),t.jsx("br",{}),t.jsx("span",{className:"text-xs text-gray-400",children:"Note: Shows all bookings overlapping with selected date range. The API may return data for a broader period, but we filter to show only relevant bookings."})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[t.jsxs("button",{onClick:N,className:"px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:!h||p,children:[t.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Export PDF Report"]}),t.jsxs("button",{onClick:P,className:"px-4 py-2 bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] text-white rounded-lg hover:from-[#1d4ed8] hover:to-[#1e40af] focus:ring-2 focus:ring-[#2563eb] focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:p,children:[p?t.jsx(xn,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(xn,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),j?t.jsx("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-200 rounded-2xl text-gray-500",children:"Loading properties..."}):t.jsxs(t.Fragment,{children:[console.log("Properties for selector:",b),t.jsx(za,{properties:b,selectedId:e,onChange:r,placeholder:"Select Property"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:n.startDate,onChange:D=>A("startDate",D.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:n.endDate,onChange:D=>A("endDate",D.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Type"}),t.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"checkout",children:"Check-out"}),t.jsx("option",{value:"checkin",children:"Check-in"})]})]})]})}),e?t.jsx(t.Fragment,{children:p?t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center",children:[t.jsx(xn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4 animate-spin"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading City Tax Data"}),t.jsx("p",{className:"text-gray-500",children:"Fetching city tax information..."})]}):h?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tax Status"}),t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${C(y.taxStatus)}`,children:F(y.taxStatus)})]}),t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:t.jsx(ku,{className:"h-6 w-6 text-white"})})]})}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Current Tax Collected"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl",children:t.jsx(Io,{className:"h-6 w-6 text-white"})})]})}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Bookings"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalBookings})]}),t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl",children:t.jsx(on,{className:"h-6 w-6 text-white"})})]})}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Guests"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalGuests})]}),t.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:t.jsx(wa,{className:"h-6 w-6 text-white"})})]})}),t.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Estimated Tax Potential"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),t.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl",children:t.jsx(pi,{className:"h-6 w-6 text-white"})})]})})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Report Data"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-3",children:t.jsx(Io,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxCalculatedFormatted}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Calculated"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Current tax amount"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl w-fit mx-auto mb-3",children:t.jsx(on,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxNights}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Nights"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-3",children:t.jsx(ny,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Often exempt"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-3",children:t.jsx(Pd,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.totalNightsFromAPI}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Nights"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Guest nights from booking system"})]})]}),(y.nightsBeyond||0)>0&&t.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:t.jsx(on,{className:"h-5 w-5 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Long-stay Exemptions"}),t.jsxs("p",{className:"text-xs text-yellow-600",children:[y.nightsBeyond," nights beyond 30-day threshold (typically exempt)"]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-4",children:t.jsx(Pl,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.adultNights}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Adult Nights"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Taxable: ",y.taxableNights]})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-4",children:t.jsx(ny,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Exempt: ",y.exemptNights]})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl w-fit mx-auto mb-4",children:t.jsx(Pd,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerNightFormatted}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Night"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights only"})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-4",children:t.jsx(pi,{className:"h-6 w-6 text-white"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerGuestFormatted}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Guest"}),t.jsx("p",{className:"text-xs text-gray-500",children:"All guests included"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bookings by Platform"}),t.jsx("div",{className:"space-y-4",children:Object.entries(y.bookingsPlatforms).map(([D,M])=>{const U=typeof M=="number"?M:M?.bookings||0,Q=(U/y.totalBookings*100).toFixed(1);return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-sm mr-3"}),t.jsx("span",{className:"font-medium text-gray-900 capitalize",children:D})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:U}),t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Q,"%)"]})]})]},D)})})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Summary"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600",children:"Current Tax Collected"}),t.jsx("span",{className:"font-semibold text-gray-900",children:h?.totalTaxFormatted||"€0,00"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600",children:"Estimated Tax Potential"}),t.jsx("span",{className:"font-semibold text-green-600",children:h?.totalTaxFormatted||"€0,00"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600",children:"Tax Rate per Adult Night"}),t.jsx("span",{className:"font-semibold text-blue-600",children:h?.averageTaxPerGuestFormatted||"€0,00"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600",children:"Total Taxable Nights"}),t.jsx("span",{className:"font-semibold text-purple-600",children:h?.adultNights||0})]}),t.jsxs("div",{className:"flex justify-between items-center py-2",children:[t.jsx("span",{className:"text-gray-600",children:"Implementation Status"}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h?.taxStatus==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:h?.taxStatus==="active"?"Active":"Not Implemented"})]})]})]})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"City Tax Summary"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"City Tax data focuses on aggregated metrics rather than individual booking details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900",children:"Total City Tax Nights"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.cityTaxNights})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-green-900",children:"Children Nights"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.childrenNights})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-purple-900",children:"Total Nights from API"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y.totalNightsFromAPI})]})]})]}),y.taxStatus!=="active"?t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl shadow-xl border border-blue-200 p-6 mb-8",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:t.jsx(pi,{className:"h-6 w-6 text-white"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Future-Ready City Tax"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"While city tax is not currently active for this property, all booking data is being tracked and analyzed. When tax collection is implemented, historical data will be available for reporting and compliance."}),t.jsxs("div",{className:"mt-3 text-sm text-blue-600",children:[t.jsxs("p",{children:["✓ Booking data collected: ",t.jsxs("strong",{className:"text-gray-900",children:[y.totalBookings," bookings"]})]}),t.jsxs("p",{children:["✓ Guest tracking: ",t.jsxs("strong",{className:"text-gray-900",children:[y.totalGuests," guests"]})]}),t.jsxs("p",{children:["✓ Night analysis: ",t.jsxs("strong",{className:"text-gray-900",children:[y.totalNights," nights"]})]})]})]})]})}):t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[t.jsx(ku,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No City Tax Data Available"}),t.jsx("p",{className:"text-gray-500",children:"No tax data found for the selected property and date range."})]})]}):t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[t.jsx(xn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),t.jsx("p",{className:"text-gray-500",children:"No city tax data found for the selected property and date range."})]})}):t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[t.jsx(ku,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Property"}),t.jsx("p",{className:"text-gray-500",children:"Choose a property from the dropdown above to view city tax analytics."})]}),m&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl shadow-xl p-6 mb-8",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:t.jsx(xn,{className:"h-5 w-5 text-red-600"})}),t.jsx("p",{className:"text-red-800 font-medium",children:m})]})})]})})},GA={statuses:{},isLoading:!1,error:null},Eu=Ur("siba/fetchStatus",async(e,{rejectWithValue:r})=>{try{const{sibaAPI:n}=await ja(async()=>{const{sibaAPI:o}=await import("./siba.api-EXeFtXyt.js");return{sibaAPI:o}},[]),a=await n.getSibaStatus(e);return console.log("SIBA API Response:",{propertyId:e,result:a}),a}catch(n){return console.error("SIBA API Error:",n),r(n.response?.data?.message||"Failed to fetch SIBA status")}}),Up=Ur("siba/submit",async({propertyId:e,reservationId:r,data:n},{rejectWithValue:a})=>{try{const{sibaAPI:o}=await ja(async()=>{const{sibaAPI:l}=await import("./siba.api-EXeFtXyt.js");return{sibaAPI:l}},[]);return await o.submitSiba(e,r,n)}catch(o){return a(o.response?.data?.message||"Failed to submit SIBA")}}),qp=Ur("siba/validate",async(e,{rejectWithValue:r})=>{try{const{sibaAPI:n}=await ja(async()=>{const{sibaAPI:a}=await import("./siba.api-EXeFtXyt.js");return{sibaAPI:a}},[]);return await n.validateSiba(e)}catch(n){return r(n.response?.data?.message||"Failed to validate SIBA")}});Ur("siba/getHistory",async(e,{rejectWithValue:r})=>{try{const{sibaAPI:n}=await ja(async()=>{const{sibaAPI:a}=await import("./siba.api-EXeFtXyt.js");return{sibaAPI:a}},[]);return await n.getSibaHistory(e)}catch(n){return r(n.response?.data?.message||"Failed to get SIBA history")}});const kv=To({name:"siba",initialState:GA,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Eu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Eu.fulfilled,(r,n)=>{r.isLoading=!1,n.payload&&n.payload.propertyId?r.statuses[n.payload.propertyId]=n.payload:console.error("Invalid SIBA response payload:",n.payload)}).addCase(Eu.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload}).addCase(Up.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Up.fulfilled,r=>{r.isLoading=!1}).addCase(Up.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload}).addCase(qp.pending,r=>{r.isLoading=!0,r.error=null}).addCase(qp.fulfilled,r=>{r.isLoading=!1}).addCase(qp.rejected,(r,n)=>{r.isLoading=!1,r.error=n.payload})}}),{clearError:a8}=kv.actions,KA=kv.reducer,YA=()=>{const[e,r]=O.useState(null),[n,a]=O.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),o=rs(),{properties:l}=Ht(U=>U.properties),{bookings:d,isLoading:u}=Ht(U=>U.bookings),{statuses:h,isLoading:p}=Ht(U=>U.siba);O.useEffect(()=>{l.length>0&&!e&&(console.log("🔍 SIBA: Auto-selecting first property:",l[0]),r(l[0].id))},[l,e]),O.useEffect(()=>{e&&(o(Eu(e)),o(Do({propertyId:e,startDate:n.startDate,endDate:n.endDate})))},[o,e,n]);const m=h[e||0],b=d?.length||0,j=d?.reduce((U,Q)=>U+Q.adults+Q.children,0)||0,y=j,A=0,P=j>0?Math.round(y/j*100):0,N=U=>U?new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",C=U=>{switch(U){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},F=U=>{switch(U){case"green":return"Compliant";case"amber":return"Warning";case"red":return"Overdue";default:return"Unknown"}},D=U=>{switch(U){case"green":return t.jsx(Ws,{className:"h-8 w-8 text-green-600"});case"amber":return t.jsx(z0,{className:"h-8 w-8 text-yellow-600"});case"red":return t.jsx(Ki,{className:"h-8 w-8 text-red-600"});default:return t.jsx(fs,{className:"h-8 w-8 text-gray-400"})}},M=p||u;return e?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-sm lg:text-base font-bold text-gray-900 mb-1",children:"SIBA Manager Dashboard"}),t.jsx("p",{className:"text-[10px] text-gray-600",children:"Real-time compliance monitoring and guest reporting"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(za,{selectedId:e,onChange:r,properties:l}),t.jsxs("button",{onClick:()=>{e&&(o(Eu(e)),o(Do({propertyId:e,startDate:n.startDate,endDate:n.endDate})))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(xn,{className:"h-4 w-4"}),t.jsx("span",{children:"Refresh"})]})]})]})}),M?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading SIBA Data..."})]})}):m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border-2 p-8 mb-8 hover:shadow-3xl transition-all duration-300 ${C(m.status)}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:D(m.status)}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-2",children:["SIBA Status: ",F(m.status)]}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:m.message}),m.lastSibaSendDate&&t.jsxs("p",{className:"text-sm text-gray-500",children:["Last submission: ",t.jsx("span",{className:`font-semibold ${m.status==="green"?"text-green-600":m.status==="amber"?"text-yellow-600":"text-red-600"}`,children:N(m.lastSibaSendDate)})]}),m.nextDueDate&&t.jsxs("p",{className:"text-sm text-gray-500",children:["Next due: ",t.jsx("span",{className:`font-semibold ${(m.daysUntilDue||0)>7?"text-green-600":(m.daysUntilDue||0)>0?"text-yellow-600":"text-red-600"}`,children:N(m.nextDueDate)})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-2",children:[P,"%"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Compliance Rate"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Data source: ",m.dataSource," • Last updated: ",new Date().toLocaleTimeString()]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-3",children:[t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"p-0.5 bg-gradient-to-br from-blue-500 to-blue-600 rounded-md w-fit mx-auto mb-1",children:t.jsx(wa,{className:"h-3 w-3 text-white"})}),t.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:y}),t.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Submitted Guests"}),t.jsx("p",{className:"text-[9px] text-gray-500",children:"Real booking data"})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"p-0.5 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-md w-fit mx-auto mb-1",children:t.jsx(bd,{className:"h-3 w-3 text-white"})}),t.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:A}),t.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Pending Guests"}),t.jsx("p",{className:"text-[9px] text-gray-500",children:"Awaiting submission"})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"p-0.5 bg-gradient-to-br from-green-500 to-green-600 rounded-md w-fit mx-auto mb-1",children:t.jsx(on,{className:"h-3 w-3 text-white"})}),t.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:b}),t.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Total Bookings"}),t.jsx("p",{className:"text-[9px] text-gray-500",children:"Current period"})]}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"p-0.5 bg-gradient-to-br from-purple-500 to-purple-600 rounded-md w-fit mx-auto mb-1",children:t.jsx(e2,{className:"h-3 w-3 text-white"})}),t.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:j}),t.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Total Guests"}),t.jsx("p",{className:"text-[9px] text-gray-500",children:"All visitors"})]})]})]}):t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ki,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SIBA Data Available"}),t.jsx("p",{className:"text-gray-500",children:"Unable to fetch SIBA status for the selected property."})]})})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(fs,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Please select a property to view SIBA compliance status."})]})})})})},JA=()=>{const{t:e}=Vr();return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50",children:t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"text-center max-w-md mx-auto px-6",children:t.jsxs("div",{className:"p-6 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e("sibaManager.title")}),t.jsx("h2",{className:"text-lg font-semibold text-blue-600 mb-4",children:e("sibaManager.underDevelopment")}),t.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:e("sibaManager.description")}),t.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[t.jsx(fs,{className:"h-4 w-4"}),t.jsx("span",{children:e("sibaManager.comingSoon")})]})]})})})})},k0=async(e,r)=>{console.log("🔍 uploadPropertyImages called with:",{propertyId:e,imagesCount:r.length,images:r.map(o=>({name:o.name,size:o.size,type:o.type}))});const n=new FormData;return r.forEach((o,l)=>{console.log(`🔍 Appending image ${l}:`,{name:o.name,size:o.size,type:o.type}),n.append("images",o)}),console.log("🔍 FormData entries:",Array.from(n.entries())),await Ft.post(`/image-upload/${e}`,n,{headers:{"Content-Type":void 0}})},Sv=async(e,r)=>(console.log("🔍 deletePropertyImage called with:",{propertyId:e,imageUrl:r}),await Ft.delete(`/image-upload/${e}/${r}`)),QA=Object.freeze(Object.defineProperty({__proto__:null,deletePropertyImage:Sv,uploadPropertyImages:k0},Symbol.toStringTag,{value:"Module"})),Av=({filteredProperties:e,onPropertyUpdate:r,owners:n=[],showActions:a})=>{const o=rs(),{t:l}=Vr(),{user:d}=Ht(W=>W.auth),u=a!==void 0?a:d?.role==="admin",{properties:h,selectedProperty:p,isLoading:m,isCreating:b,isUpdating:j,isDeleting:y,isTesting:A,error:P,hostkitTestResult:N}=Ht(W=>W.propertyManagement),C=e||h,F=_3(d?.role||null),[D,M]=O.useState(!1),[U,Q]=O.useState(!1),[J,re]=O.useState(!1),[K,de]=O.useState({}),[E,I]=O.useState(null),[H,te]=O.useState([]),[we,se]=O.useState(!1),[$,ee]=O.useState(!1),[ge,Se]=O.useState(!1),[T,L]=O.useState({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[],owner:""});O.useEffect(()=>{o(zi())},[o]),O.useEffect(()=>{const W=He=>{const je=He.detail.property;je&&ue(je)};return window.addEventListener("editProperty",W),()=>{window.removeEventListener("editProperty",W)}},[]);const Y=W=>{const{name:He,value:je}=W.target;L(Ze=>({...Ze,[He]:He==="id"||He==="bedrooms"||He==="bathrooms"||He==="maxGuests"?parseInt(je)||0:je}))},ne=async()=>{T.hostkitId&&T.hostkitApiKey&&await o(cf({hostkitId:T.hostkitId,apiKey:T.hostkitApiKey}))},ie=W=>{const He=Array.from(W.target.files||[]);console.log("🔍 Files selected:",He.length,He.map(je=>je.name)),te(je=>[...je,...He])},V=W=>{te(He=>He.filter((je,Ze)=>Ze!==W))},fe=async()=>{if(console.log("🔍 handleImageUpload called with:",{localSelectedProperty:E,selectedImages:H,selectedImagesLength:H.length,selectedImagesDetails:H.map(W=>({name:W.name,size:W.size,type:W.type}))}),!E||H.length===0){console.log("❌ No property selected or no images selected");return}console.log("🔍 Starting image upload:",{propertyId:E.id,selectedImages:H.length,imageNames:H.map(W=>W.name)}),se(!0);try{const W=await k0(E.id.toString(),H);if(console.log("✅ Images uploaded successfully:",W),console.log("🔍 Response property images:",W.property?.images),console.log("🔍 Current localSelectedProperty images:",E.images),W.property&&W.property.images){const je={...E,images:W.property.images};console.log("🔍 Setting localSelectedProperty to:",je.images),I(je)}o(zi()),r?(console.log("🔄 Calling onPropertyUpdate callback to refresh parent properties"),r()):console.log("⚠️ No onPropertyUpdate callback provided"),te([]);const He=document.getElementById("image-upload");He&&(He.value="")}catch(W){console.error("❌ Error uploading images:",W),console.error("❌ Error details:",W.response?.data||W.message)}finally{se(!1)}},he=async W=>{if(E)try{const He=W.split("/").pop();console.log("🔍 Deleting image:",{imageUrl:W,filename:He});const je=await Sv(E.id.toString(),He||W);console.log("✅ Image deleted successfully:",je);const Ze=E.images.filter($e=>$e!==W);I({...E,images:Ze}),o(zi()),r&&r()}catch(He){console.error("❌ Error deleting image:",He)}},pe=async W=>{if(W.preventDefault(),console.log("🔍 Form submission debug:",{showEditForm:U,selectedProperty:p?p.id:null,selectedPropertyId:p?._id,localSelectedProperty:E?E.id:null,localSelectedPropertyId:E?._id,formData:Object.keys(T)}),U&&E){const He={...T};console.log("🔍 Original formData:",T),(!He.images||He.images.length===0)&&(delete He.images,console.log("🔄 Excluding empty images field from update to preserve existing images")),console.log("🔍 Final updateData:",He),console.log("✅ Calling updatePropertyAsync with:",{propertyId:E._id,propertyData:He});const je=await o(vd({propertyId:E._id,propertyData:He}));console.log("🔍 Update result:",je),vd.fulfilled.match(je)?(console.log("✅ Property update successful"),Q(!1),Ge(),o(zi()),r&&r()):vd.rejected.match(je)&&(console.error("❌ Property update failed:",je.payload),console.error("❌ Update error details:",je.error),console.error("❌ Full result object:",je),alert(`Property update failed: ${je.payload||je.error||"Unknown error"}`))}else{console.log("❌ Calling createPropertyAsync instead of update - this is the problem!"),console.log("showEditForm:",U),console.log("selectedProperty:",p),console.log("localSelectedProperty:",E);try{const He=await o(Pu(T));if(Pu.fulfilled.match(He)){if(H.length>0)try{se(!0),await k0(T.id.toString(),H),console.log("✅ Images uploaded successfully for new property:",T.id),te([])}catch(je){console.error("❌ Error uploading images:",je)}finally{se(!1)}M(!1),Ge(),await o(zi()),r&&r()}}catch(He){console.error("Error creating property:",He)}}},Ce=async()=>{if(!T.id){or.error("Property ID is required to sync from Hostaway");return}ee(!0),Se(!1);try{const W=await Ft.get(`/property-management/fetch-hostaway/${T.id}`);if(W.success&&W.data){const He=W.data,je=[He.address?.city,He.address?.country].filter(Boolean),Ze=je.length>0?je.join(", "):He.address?.full||T.address;L($e=>({...$e,name:He.name||$e.name,address:Ze,bedrooms:He.bedrooms||$e.bedrooms,bathrooms:He.bathrooms||$e.bathrooms,maxGuests:He.accommodates||$e.maxGuests,type:He.propertyType||$e.type})),Se(!0),or.success("Property details synced successfully from Hostaway!"),setTimeout(()=>Se(!1),3e3)}}catch(W){console.error("Error syncing from Hostaway:",W),or.error(W.message||"Failed to sync property details from Hostaway")}finally{ee(!1)}},ue=W=>{console.log("🔍 handleEdit called with property:",{id:W.id,_id:W._id,name:W.name,hostkitApiKey:W.hostkitApiKey?"Present":"Missing",hostkitApiKeyLength:W.hostkitApiKey?W.hostkitApiKey.length:0,allPropertyKeys:Object.keys(W)}),I(W),$h(W);const He={id:W.id,name:W.name,address:W.address,type:W.type,bedrooms:W.bedrooms,bathrooms:W.bathrooms,maxGuests:W.maxGuests,hostkitId:W.hostkitId,hostkitApiKey:W.hostkitApiKey||"",status:W.status,images:W.images||[],amenities:W.amenities||[],owner:W.isAdminOwned?"admin":W.owner?._id||""};console.log("🔍 Setting form data with hostkitApiKey:",He.hostkitApiKey?"Present":"Empty"),console.log("🔍 hostkitApiKey value:",He.hostkitApiKey),L(He),Q(!0),console.log("✅ showEditForm set to true, localSelectedProperty set")},Pe=async()=>{p&&(await o(lf(p._id)),P||(re(!1),$h(null),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:p.id||p._id,propertyName:p.name}})),r&&r()))},Ge=()=>{L({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[]}),I(null),te([]),o(Rk())},Te=({property:W})=>{const He=E&&E.id===W.id?E:W,je=He.images&&He.images.length>0?uf(He.images[0]):"No images";return console.log("🔍 PropertyCard rendering:",{propertyName:He.name,propertyId:He.id,images:He.images,imageUrl:je,usingLocalState:E&&E.id===W.id,fullProperty:He}),t.jsxs("div",{className:"group bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:[t.jsxs("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:[He.images&&He.images.length>0?t.jsx("img",{src:uf(He.images[0]),alt:He.name,className:"w-full h-full object-cover",onError:Ze=>{console.error("❌ Image failed to load:",Ze.currentTarget.src)},onLoad:Ze=>{console.log("✅ Image loaded successfully:",Ze.currentTarget.src)}}):t.jsxs("div",{className:"text-center",children:[t.jsx(sy,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Property Image"})]}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold shadow-sm ${He.status==="active"?"bg-green-500/60 text-white":He.status==="inactive"?"bg-gray-500/20 text-gray-900 border border-gray-200":"bg-yellow-500/20 text-gray-900 border border-yellow-200"}`,children:He.status||"Active"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-1 truncate",children:He.name}),t.jsx("p",{className:"text-gray-600 text-xs truncate",children:He.address||"Lisbon, Portugal"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:l("property.type")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:W.type})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:l("admin.id")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:W.hostkitId})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:l("property.status")}),t.jsx("p",{className:"text-sm font-bold text-gray-900",children:W.status==="active"?l("admin.active"):W.status})]})]}),u&&t.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[t.jsx("button",{onClick:()=>ue(W),className:"btn-outline btn-sm flex-1",disabled:j||!F,title:F?"":"Only owners can edit properties",children:l("admin.edit")}),t.jsx("button",{onClick:()=>{o($h(W)),re(!0)},className:"btn-outline btn-sm text-red-600 border-red-300 hover:bg-red-50",disabled:y||!F,title:F?"":"Only owners can delete properties",children:l("admin.delete")})]})]})]})};return t.jsxs("div",{className:"space-y-6",children:[P&&t.jsxs("div",{className:"alert alert-error",children:[t.jsx(Ki,{className:"h-4 w-4"}),t.jsx("span",{children:P}),t.jsx("button",{onClick:()=>o(vy()),className:"ml-auto",children:t.jsx(kl,{className:"h-4 w-4"})})]}),m?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Properties..."})]})}):C.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(sy,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first property to get started"}),t.jsxs("button",{onClick:()=>{Ge(),o(vy()),M(!0)},className:"btn-primary",disabled:!F,title:F?"":"Only owners can create properties",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(W=>t.jsx(Te,{property:W},W._id))}),(D||U)&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h3",{className:"text-xl font-semibold",children:U?"Edit Property":"Add New Property"}),U&&T.id&&t.jsx("button",{type:"button",onClick:Ce,disabled:$,className:"px-3 py-1.5 bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap transition-all duration-300 border border-blue-200 shadow-sm hover:shadow-md text-sm",children:$?t.jsxs(t.Fragment,{children:[t.jsx(xn,{className:"h-3.5 w-3.5 animate-spin"}),"Syncing..."]}):ge?t.jsxs(t.Fragment,{children:[t.jsx(Ws,{className:"h-3.5 w-3.5"}),"Synced"]}):t.jsxs(t.Fragment,{children:[t.jsx(xn,{className:"h-3.5 w-3.5"}),"Sync"]})})]}),t.jsx("button",{onClick:()=>{M(!1),Q(!1),Ge()},className:"text-gray-400 hover:text-gray-600",children:t.jsx(kl,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID *"}),t.jsx("input",{type:"number",name:"id",value:T.id||"",onChange:Y,className:"input",required:!0,disabled:U})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),t.jsxs("select",{name:"type",value:T.type,onChange:Y,className:"input",required:!0,children:[t.jsx("option",{value:"Apartment",children:"Apartment"}),t.jsx("option",{value:"House",children:"House"}),t.jsx("option",{value:"Villa",children:"Villa"}),t.jsx("option",{value:"Condominium",children:"Condominium"}),t.jsx("option",{value:"Penthouse",children:"Penthouse"}),t.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),t.jsx("input",{type:"text",name:"name",value:T.name,onChange:Y,className:"input",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),t.jsxs("select",{name:"owner",value:T.owner,onChange:Y,className:"input",required:!0,children:[t.jsx("option",{value:"",children:"Select Owner"}),t.jsx("option",{value:"admin",children:"Admin"}),n.map(W=>t.jsx("option",{value:W._id,children:W.name},W._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),t.jsx("input",{type:"text",name:"address",value:T.address,onChange:Y,className:"input",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),t.jsx("input",{type:"number",name:"bedrooms",value:T.bedrooms,onChange:Y,className:"input",min:"0",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),t.jsx("input",{type:"number",name:"bathrooms",value:T.bathrooms,onChange:Y,className:"input",min:"0",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),t.jsx("input",{type:"number",name:"maxGuests",value:T.maxGuests,onChange:Y,className:"input",min:"1",required:!0})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),t.jsx("input",{type:"text",name:"hostkitId",value:T.hostkitId,onChange:Y,className:"input font-mono",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),t.jsx("input",{type:"password",name:"hostkitApiKey",value:T.hostkitApiKey,onChange:Y,className:"input font-mono",required:!0})]})]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("button",{type:"button",onClick:ne,className:"btn-outline btn-sm",disabled:A||!T.hostkitId||!T.hostkitApiKey,children:A?t.jsxs(t.Fragment,{children:[t.jsx(zh,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Z3,{className:"h-4 w-4 mr-2"}),"Test Connection"]})}),N&&t.jsx("div",{className:`mt-2 p-3 rounded-md ${N.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:t.jsxs("div",{className:"flex items-center",children:[N.success?t.jsx(Ws,{className:"h-4 w-4 mr-2"}):t.jsx(kl,{className:"h-4 w-4 mr-2"}),t.jsx("span",{className:"text-sm",children:N.message})]})})]})]}),U&&E&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),E.images&&E.images.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Images:"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:E.images.map((W,He)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:uf(W),alt:`Property ${He+1}`,className:"w-full h-24 object-cover rounded-md border"}),t.jsx("button",{type:"button",onClick:()=>he(W),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},He))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:ie,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80"}),H.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:H.map((W,He)=>t.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[t.jsx("span",{className:"mr-2",children:W.name}),t.jsx("button",{type:"button",onClick:()=>te(je=>je.filter((Ze,$e)=>$e!==He)),className:"text-red-500 hover:text-red-700",children:"×"})]},He))})]}),t.jsx("button",{type:"button",onClick:()=>{console.log("🔍 Upload button clicked, selectedImages:",H.length),fe()},disabled:H.length===0||we,className:"btn-outline btn-sm",children:we?t.jsxs(t.Fragment,{children:[t.jsx(zh,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ek,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})]})]}),D&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ie,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border file:border-blue-200 file:text-sm file:font-semibold file:bg-blue-500/20 file:text-gray-900 hover:file:bg-blue-500/30 file:shadow-sm hover:file:shadow-md file:transition-all file:duration-300"}),H.length>0&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:H.map((W,He)=>t.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[t.jsx("span",{className:"mr-2",children:W.name}),t.jsx("button",{type:"button",onClick:()=>V(He),className:"text-red-500 hover:text-red-700",children:t.jsx(yn,{className:"h-4 w-4"})})]},He))})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{M(!1),Q(!1),Ge()},className:"btn-outline flex-1",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:b||j||!F,title:F?"":"Only owners can create/update properties",children:b||j?t.jsxs(t.Fragment,{children:[t.jsx(zh,{className:"h-4 w-4 mr-2 animate-spin"}),U?"Updating...":"Creating..."]}):U?"Update Property":"Create Property"})]})]})]})})}),J&&p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(Ki,{className:"h-6 w-6 text-red-600"})}),t.jsx("div",{className:"ml-4",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Property"})})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{re(!1),$h(null)},className:"btn-outline flex-1",children:"Cancel"}),t.jsx("button",{onClick:Pe,className:"btn-primary bg-red-600 hover:bg-red-700 flex-1",disabled:y||!F,title:F?"":"Only owners can delete properties",children:y?t.jsxs(t.Fragment,{children:[t.jsx(zh,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})})]})},XA=()=>{const{t:e}=Vr();return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:e("nav.properties")}),t.jsx("p",{className:"text-lg text-gray-600",children:e("dashboard.managePortfolio")})]})})})}),t.jsx("div",{className:"container mx-auto px-4 py-8 pt-48",children:t.jsx(Av,{})})]})},ZA=({propertyId:e,startDate:r,endDate:n})=>{const[a,o]=O.useState({bookings:[],blockedDates:[],availableDates:[]}),[l,d]=O.useState(!1),[u,h]=O.useState(null),{token:p}=Ht(y=>y.auth),m=async()=>{if(!(!e||!p)){d(!0),h(null);try{const y=await Ft.get(`/calendar/${e}?startDate=${r}&endDate=${n}`);console.log("Calendar API response:",y);const A={bookings:y.bookings||y.result||[],blockedDates:y.blockedDates||[],availableDates:y.availableDates||[]};console.log("Structured calendar data:",A),o(A)}catch(y){console.error("Calendar fetch error:",y),h(y.message||"Failed to fetch calendar data")}finally{d(!1)}}},b=async(y,A,P)=>{if(!(!e||!p)){d(!0),h(null);try{const N=await Ft.put(`/calendar/${e}`,{startDate:y,endDate:A,status:P});return await m(),N}catch(N){throw h(N.message||"Failed to update calendar"),N}finally{d(!1)}}},j=async()=>{};return O.useEffect(()=>{e&&r&&n&&p&&(console.log("useCalendar: Fetching calendar data for:",{propertyId:e,startDate:r,endDate:n}),m())},[e,r,n,p]),{calendarData:a,isLoading:l,error:u,fetchCalendarData:m,updateCalendar:b,fetchBookings:j}},eC=async(e,r,n)=>{console.log("API: Fetching calendar pricing for:",{listingId:e,year:r,month:n});const a=await Ft.get(`/calendar/${e}/month/${r}/${n}`);return console.log("API: Raw response:",a),console.log("API: Pricing data:",a.pricingData),a.pricingData},pd=async(e,r,n,a)=>await Ft.put("/calendar",{listingId:e,startDate:r,endDate:n,isAvailable:a}),tC=({propertyId:e,onDateSelect:r})=>{const{t:n}=Vr(),a=rs(),{user:o}=Ht(Je=>Je.auth),l=Je=>{const it=Je.getFullYear(),lt=String(Je.getMonth()+1).padStart(2,"0"),at=String(Je.getDate()).padStart(2,"0");return`${it}-${lt}-${at}`},[d,u]=O.useState(e||null),[h,p]=O.useState(new Date),[m,b]=O.useState(null),[j,y]=O.useState(!1),[A,P]=O.useState(!1),[N,C]=O.useState(null),[F,D]=O.useState(!1),[M,U]=O.useState([]),[Q,J]=O.useState(!1),[re,K]=O.useState(!1),[de,E]=O.useState(null),[I,H]=O.useState(null),[te,we]=O.useState(null),[se,$]=O.useState(!1),[ee,ge]=O.useState(null),[Se,T]=O.useState(!1),[L,Y]=O.useState({}),[ne,ie]=O.useState(!1),[V,fe]=O.useState(0),[he,pe]=O.useState(1),[Ce,ue]=O.useState(!1),Pe=l(new Date(h.getFullYear(),h.getMonth()-1,1)),Ge=l(new Date(h.getFullYear(),h.getMonth()+2,0)),{token:Te}=Ht(Je=>Je.auth),W=Ht(Je=>Je.propertyManagement.properties);O.useEffect(()=>{W.length===0&&a(zi())},[a,W.length]);const{calendarData:He,isLoading:je,error:Ze,fetchCalendarData:$e}=ZA({propertyId:d,startDate:Pe,endDate:Ge});O.useEffect(()=>{W.length>0&&!d&&u(W[0].id)},[W,d]);const le={bookings:He?.bookings||[],blockedDates:He?.blockedDates||[],availableDates:He?.availableDates||[],calendar:He?.result||[]},xe=Je=>{p(it=>{const lt=new Date(it);return Je==="prev"?lt.setMonth(it.getMonth()-1):lt.setMonth(it.getMonth()+1),lt})},De=async()=>{if(d)try{ie(!0);const Je=h.getFullYear(),it=h.getMonth();console.log("Fetching monthly pricing data:",{selectedPropertyId:d,year:Je,month:it});const lt=await eC(d,Je,it);console.log("Received monthly pricing data:",lt),console.log("Sample pricing data keys:",Object.keys(lt).slice(0,5)),console.log("Sample pricing data values:",Object.values(lt).slice(0,3)),Y(lt)}catch(Je){if(console.error("Failed to fetch monthly pricing data:",Je),Je&&typeof Je=="object"&&"response"in Je&&Je.response&&typeof Je.response=="object"&&"status"in Je.response&&Je.response.status===401){console.error("Authentication failed - token may be expired. Please refresh the page."),alert(n("calendar.sessionExpired"));return}const it=h.getFullYear(),lt=h.getMonth(),at=new Date(it,lt+1,0),kt={};for(let Dt=1;Dt<=at.getDate();Dt++){const Bt=new Date(it,lt,Dt),wr=l(Bt);kt[wr]={price:289,minimumStay:2,status:"available"}}Y(kt)}finally{ie(!1)}};O.useEffect(()=>{De()},[h,d]),O.useEffect(()=>()=>{de&&clearTimeout(de)},[de]);const ze=async Je=>{if(!ac(o?.role||null)){alert(n("calendar.onlyOwnersCanManageAlert"));return}const it=l(Je);M.includes(it)?(K(!1),$(!1),console.log("Stopped hover mode, date remains selected:",it)):(U(lt=>[...lt,it]),D(!0),J(!0),K(!0),$(!0),console.log("Added date to selection and enabled hover mode:",it))},Ye=Je=>{if(console.log("Double-click detected!",Je),!ac(o?.role||null)){alert(n("calendar.onlyOwnersCanManageAlert"));return}const it=l(Je);if(M.includes(it)){const lt=M.filter(at=>at!==it);U(lt),K(!1),lt.length===0&&(D(!1),J(!1)),console.log("Removed date from selection via double-click:",it)}else console.log("Entering double-click mode for date:",it),D(!0),U([it]),J(!0),K(!0),$(!0)},Ue=Je=>{if(re&&M.length>0&&se){const it=l(Je);M.includes(it)||(U(lt=>[...lt,it]),console.log("Added date via hover:",it))}},Xe=()=>{D(!1),U([]),J(!1),K(!1),H(null),we(null),$(!1)},wt=async()=>{if(!(!d||M.length===0)){y(!0);try{for(const Je of M)await pd(d,Je,Je,0),console.log(`Blocked date: ${Je}`);console.log("All dates blocked successfully"),Xe(),$e()}catch(Je){console.error("Failed to block dates:",Je)}finally{y(!1)}}},ot=async()=>{if(console.log("🚀 handleBulkUnblock called with:",{selectedPropertyId:d,selectedDateList:M}),!d||M.length===0){console.log("❌ Missing propertyId or no dates selected");return}y(!0);try{for(const Je of M){console.log(`🔄 Unblocking date: ${Je}`);const it=await pd(d,Je,Je,1);console.log(`✅ Unblocked date: ${Je}`,it)}console.log("🎉 All dates unblocked successfully"),Xe(),await new Promise(Je=>setTimeout(Je,500)),await $e(),console.log("📊 Calendar data refreshed after unblock")}catch(Je){console.error("❌ Failed to unblock dates:",Je)}finally{y(!1)}},dt=async()=>{if(!(!m||!d)){y(!0);try{const Je=await pd(d,m.start,m.end,0);console.log("Dates blocked successfully:",Je),b(null),r&&r(m.start),$e()}catch(Je){console.error("Failed to block dates:",Je)}finally{y(!1)}}},Pt=async()=>{if(!(!m||!d)){y(!0);try{const Je=await pd(d,m.start,m.end,1);console.log("Dates unblocked successfully:",Je),b(null),r&&r(m.start),$e()}catch(Je){console.error("Failed to unblock dates:",Je)}finally{y(!1)}}},ut=async()=>{if(!(!N||!d)){y(!0);try{const Je=N.getFullYear(),it=String(N.getMonth()+1).padStart(2,"0"),lt=String(N.getDate()).padStart(2,"0"),at=`${Je}-${it}-${lt}`;console.log("Blocking date:",{clickedDate:N,dateStr:at});const kt=await pd(d,at,at,0);console.log("Date blocked successfully:",kt),P(!1),r&&r(at),$e()}catch(Je){console.error("Failed to block date:",Je),alert("Failed to block date. Please try again.")}finally{y(!1)}}},mr=async()=>{if(console.log("🚀 handleUnblockSingleDate called with:",{clickedDate:N,selectedPropertyId:d}),!N||!d){console.log("❌ Missing clickedDate or selectedPropertyId");return}y(!0);try{const Je=N.getFullYear(),it=String(N.getMonth()+1).padStart(2,"0"),lt=String(N.getDate()).padStart(2,"0"),at=`${Je}-${it}-${lt}`;console.log("🔄 Unblocking single date:",{clickedDate:N,dateStr:at});const kt=await pd(d,at,at,1);console.log("✅ Date unblocked successfully:",kt),P(!1),r&&r(at),await new Promise(Dt=>setTimeout(Dt,500)),await $e(),console.log("📊 Calendar data refreshed after single unblock")}catch(Je){console.error("❌ Failed to unblock date:",Je),alert("Failed to unblock date. Please try again.")}finally{y(!1)}},Xt=Je=>{if(!m)return!1;const it=l(Je);return it>=m.start&&it<=m.end},ct=Je=>{if(!F)return!1;const it=l(Je);if(M.includes(it))return!0;if(se&&I){const lt=l(I),at=te?l(te):it,kt=lt<=at?lt:at,Dt=lt<=at?at:lt;return it>=kt&&it<=Dt}return!1},Mt=Je=>{const it=Je.getFullYear(),lt=String(Je.getMonth()+1).padStart(2,"0"),at=String(Je.getDate()).padStart(2,"0"),kt=`${it}-${lt}-${at}`;return console.log("Checking if date is blocked:",kt,{blockedDates:le.blockedDates,bookings:le.bookings}),Array.isArray(le.blockedDates)&&le.blockedDates.some(Bt=>{if(Bt.date===kt)return Bt.status==="unavailable"||Bt.status==="blocked";if(Bt.startDate&&Bt.endDate){const wr=new Date(Bt.startDate),It=new Date(Bt.endDate),ht=new Date(kt);return ht>=wr&&ht<=It&&(Bt.status==="unavailable"||Bt.status==="blocked")}return!1})?(console.log(`Date ${kt} is blocked via blockedDates`),!0):Array.isArray(le.bookings)&&le.bookings.some(Bt=>Bt.date===kt?Bt.status==="unavailable"||Bt.status==="blocked":!1)?(console.log(`Date ${kt} is blocked via result array`),!0):!1},Zt=Je=>{const it=Je.getFullYear(),lt=String(Je.getMonth()+1).padStart(2,"0"),at=String(Je.getDate()).padStart(2,"0"),kt=`${it}-${lt}-${at}`;return le.bookings.some(Dt=>{const Bt=Dt.arrivalDate||Dt.checkIn,wr=Dt.departureDate||Dt.checkOut,It=Dt.status||Dt.bookingStatus,ht=new Date(Bt),cr=new Date(wr),Lr=new Date(kt);return Lr>=ht&&Lr<=cr&&(It==="Modified"||It==="Confirmed"||It==="Paid")})},Lt=Je=>{const it=Je.getFullYear(),lt=String(Je.getMonth()+1).padStart(2,"0"),at=String(Je.getDate()).padStart(2,"0"),kt=`${it}-${lt}-${at}`;if(Array.isArray(le.bookings)){const Dt=le.bookings.find(Bt=>{const wr=Bt.arrivalDate||Bt.checkIn,It=Bt.departureDate||Bt.checkOut,ht=Bt.status||Bt.bookingStatus,cr=new Date(wr),Lr=new Date(It),Or=new Date(kt);return Or>=cr&&Or<=Lr&&(ht==="Modified"||ht==="Confirmed"||ht==="Paid")});if(Dt)return{guestName:Dt.guestName||"Guest",guestCount:(Dt.adults||0)+(Dt.children||0),isCheckInDay:kt===(Dt.arrivalDate||Dt.checkIn),isCheckOutDay:kt===(Dt.departureDate||Dt.checkOut),checkInTime:Dt.checkInTime||"16:00",checkOutTime:Dt.checkOutTime||"11:00"}}return null},Kt=Je=>{const it=Je.getFullYear(),lt=String(Je.getMonth()+1).padStart(2,"0"),at=String(Je.getDate()).padStart(2,"0"),kt=`${it}-${lt}-${at}`;return Array.isArray(le.bookings)?le.bookings.filter(Dt=>{const Bt=Dt.arrivalDate||Dt.checkIn,wr=Dt.departureDate||Dt.checkOut,It=Dt.status||Dt.bookingStatus,ht=new Date(Bt),cr=new Date(wr),Lr=new Date(kt);return(Lr.getTime()===ht.getTime()||Lr.getTime()===cr.getTime()||Lr>ht&&Lr<cr)&&(It==="Modified"||It==="Confirmed"||It==="Paid")}).map(Dt=>{const Bt=Dt.arrivalDate||Dt.checkIn,wr=Dt.departureDate||Dt.checkOut,It=new Date(Bt),ht=new Date(wr),cr=new Date(kt);return{guestName:Dt.guestName||"Guest",guestCount:(Dt.adults||0)+(Dt.children||0),isCheckInDay:cr.getTime()===It.getTime(),isCheckOutDay:cr.getTime()===ht.getTime(),checkInTime:Dt.checkInTime||"16:00",checkOutTime:Dt.checkOutTime||"11:00",isStaying:cr>It&&cr<ht}}):[]},qt=()=>{const Je=h.getFullYear(),it=h.getMonth(),lt=new Date(Je,it,1),at=new Date(Je,it+1,0),kt=new Date(lt);kt.setDate(kt.getDate()-lt.getDay());const Dt=new Date(at);Dt.setDate(Dt.getDate()+(6-at.getDay()));const Bt=[],wr=new Date(kt);for(;wr<=Dt;)Bt.push(new Date(wr)),wr.setDate(wr.getDate()+1);return Bt.map((It,ht)=>{const cr=It.getMonth()===it,Lr=It.toDateString()===new Date().toDateString(),Or=Zt(It);Lt(It);const Mn=Mt(It),ar=Xt(It);return t.jsxs("div",{className:`
              relative min-h-[100px] min-w-[120px] p-0 group border-r border-b border-gray-200 last:border-r-0
              ${cr&&!ct(It)&&!ar?"bg-gray-50":""}
              ${!cr&&!ct(It)&&!ar?"bg-gray-100":""}
              ${Lr&&!ct(It)&&!ar?"bg-blue-50":""}
              ${Or&&!ct(It)&&!ar?"bg-blue-50":""}
              ${Mn&&!ct(It)&&!ar?"bg-red-50":""}
              ${ct(It)?"bg-blue-100":""}
              ${ar?"bg-blue-100":""}
              ${(()=>{const Nr=It.getFullYear(),tr=String(It.getMonth()+1).padStart(2,"0"),Bn=String(It.getDate()).padStart(2,"0"),bn=`${Nr}-${tr}-${Bn}`,yr=L[bn];return ct(It)||ar?"":yr?.status==="reserved"?"bg-blue-50":yr?.status==="blocked"?"bg-red-50":""})()}
            `,style:{overflow:"visible"},children:[t.jsx("div",{className:"flex justify-between items-center mb-2 p-2",children:t.jsx("span",{className:`
               text-[14px] font-medium px-2 py-1 rounded
               ${cr?"text-gray-900 bg-gray-200":"text-gray-400 bg-gray-100"}
               ${Lr?"text-blue-600 bg-blue-100":""}
               ${ar?"text-blue-700 bg-blue-200 font-bold":""}
               ${Mn?"text-red-800 bg-red-200 font-bold":""}
               ${ct(It)?"text-blue-700 bg-blue-200 font-bold":""}
             `,children:It.getDate()})}),Mn&&t.jsx("div",{className:"flex justify-center mb-1",children:t.jsx("span",{className:"text-[7px] bg-red-500 text-white px-1 py-0.5 rounded font-bold",children:n("calendar.blockedCaps")})}),cr&&(()=>{const Nr=It.getFullYear(),tr=String(It.getMonth()+1).padStart(2,"0"),Bn=String(It.getDate()).padStart(2,"0"),bn=`${Nr}-${tr}-${Bn}`,yr=L[bn];return ne?t.jsx("div",{className:"absolute bottom-1 right-1 px-2 py-1 bg-gray-100 rounded-md text-[10px] text-gray-400 z-10 shadow-md",children:n("calendar.loading")}):t.jsxs("div",{className:`absolute bottom-1 right-1 px-1 py-0.5 bg-gray-100 rounded-md space-y-0 z-10 shadow-md transition-opacity duration-200 ${yr?.status==="reserved"?"opacity-0 group-hover:opacity-100":"opacity-100"}`,children:[t.jsxs("div",{className:`text-[8px] font-semibold ${yr?.status==="reserved"?"text-blue-700":yr?.status==="blocked"?"text-red-700":"text-gray-700"}`,children:["€",yr?.price||"N/A"]}),t.jsxs("div",{className:"text-[8px] text-gray-500",children:[yr?.minimumStay||"N/A"," ",n("calendar.nightsMin")]}),yr?.status==="reserved"&&t.jsx("div",{className:"text-[8px] text-blue-600 font-bold",children:n("calendar.reserved")}),yr?.status==="blocked"&&t.jsx("div",{className:"text-[8px] text-red-600 font-bold",children:n("calendar.blockedCaps")})]})})(),Or&&(()=>{const Nr=Kt(It);return t.jsx("div",{className:"mt-2 relative",style:{height:"32px"},children:Nr.map((tr,Bn)=>{const bn=tr.isCheckInDay,yr=tr.isCheckOutDay;tr.isStaying;let ns,Hr,Un,ln;if(yr&&!bn)ns="32px",Hr="0px",Un="30%",ln="0px";else if(bn&&!yr)ns="32px",Hr="0px",Un="70%",ln="30%";else{if(yr&&bn)return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:"-12px",top:"0px",height:"32px",width:"30%",zIndex:15,borderRadius:"0 6px 6px 0"},children:t.jsx("div",{className:"flex-1"})},`${Bn}-checkout`),t.jsx("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:"30%",top:"0px",height:"32px",width:"70%",zIndex:15,borderRadius:"0"},children:t.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-white text-[8px] font-bold",children:tr.guestName?tr.guestName.charAt(0).toUpperCase():"G"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-[8.5px] font-medium text-white whitespace-nowrap overflow-hidden relative z-10",children:tr.guestName}),t.jsxs("div",{className:"text-[8.5px] text-blue-100 whitespace-nowrap relative z-0",children:[tr.guestCount," guests"]})]})]})},`${Bn}-checkin`)]});ns="32px",Hr="0px",Un="100%",ln="0px"}return t.jsxs("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:ln==="0px"?"-12px":ln,right:ln==="0px"?"-12px":"0px",top:Hr,height:ns,width:Un,zIndex:15,borderRadius:bn?"6px 0 0 6px":yr?"0 6px 6px 0":"0"},children:[bn&&t.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-white text-[8px] font-bold",children:tr.guestName?tr.guestName.charAt(0).toUpperCase():"G"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-[8.5px] font-medium text-white whitespace-nowrap overflow-hidden relative z-10",children:tr.guestName}),t.jsxs("div",{className:"text-[8.5px] text-teal-100 whitespace-nowrap relative z-0",children:[tr.guestCount," ",n("calendar.guests")]})]})]}),yr&&!bn&&t.jsx("div",{className:"flex-1"})]},Bn)})})})(),t.jsx("button",{onClick:()=>ze(It),onDoubleClick:()=>Ye(It),onMouseEnter:()=>Ue(It),disabled:!cr||Or||!ac(o?.role||null),className:`absolute inset-0 w-full h-full opacity-0 ${ac(o?.role||null)?"cursor-pointer disabled:cursor-not-allowed":"cursor-not-allowed"} ${F&&!se?"bg-green-100 bg-opacity-50":""}`,title:ac(o?.role||null)?F&&se?"Click to complete selection or stop selecting":F?"Click to start selection":"Click to manage date, double-click to select multiple":n("calendar.onlyOwnersCanManage")})]},ht)})};return je?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:n("calendar.loading")})]})}):Ze?t.jsxs("div",{className:"flex items-center justify-center p-8 text-red-600",children:[t.jsx(Ki,{className:"h-5 w-5 mr-2"}),Ze]}):d?t.jsxs("div",{className:"space-y-0.5",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:n("calendar.title")}),!ac(o?.role||null)&&t.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-amber-100 text-amber-800 rounded-md text-xs",children:[t.jsx(Dd,{className:"h-3 w-3"}),t.jsx("span",{children:n("calendar.viewOnly")})]})]}),t.jsx("p",{className:"text-lg text-gray-600",children:ac(o?.role||null)?n("calendar.manageAvailability"):n("calendar.viewAvailability")})]}),t.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:t.jsx(za,{properties:W,selectedId:d,onChange:u})})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[t.jsx("button",{onClick:()=>xe("prev"),className:"p-0.5 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:t.jsx(U3,{className:"h-4 w-4 text-gray-600"})}),t.jsx("h3",{className:"text-xs font-bold text-gray-900",children:h.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsx("button",{onClick:()=>xe("next"),className:"p-0.5 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:t.jsx(q3,{className:"h-4 w-4 text-gray-600"})})]}),t.jsxs("div",{className:"bg-white rounded-lg border-2",children:[t.jsx("div",{className:"grid grid-cols-7 gap-0 bg-gray-100 p-0 border-b-2",children:[n("calendar.day.sun"),n("calendar.day.mon"),n("calendar.day.tue"),n("calendar.day.wed"),n("calendar.day.thu"),n("calendar.day.fri"),n("calendar.day.sat")].map(Je=>t.jsx("div",{className:"p-1 text-center text-[12px] font-semibold text-gray-600 bg-white border-r border-gray-300 last:border-r-0",children:Je},Je))}),t.jsx("div",{className:"grid grid-cols-7 gap-0 bg-gray-100 p-0 rounded-lg",children:qt()})]}),t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-200 p-3 shadow-sm",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-100 border-2 border-blue-400 rounded-full"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:n("calendar.status.booked")})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-red-100 border-2 border-red-400 rounded-full"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:n("calendar.status.blocked")})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-white border-2 border-gray-400 rounded-full"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:n("calendar.status.available")})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-green-100 border-2 border-green-400 rounded-full"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:n("calendar.status.guestDetails")})]})]})}),m&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-blue-900",children:n("calendar.selected").replace("{start}",m.start).replace("{end}",m.end)}),t.jsx("p",{className:"text-xs text-blue-700",children:n("calendar.clickToBlockUnblock")})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("button",{onClick:dt,disabled:j,className:"bg-red-500/40 text-gray-900 px-4 py-2 rounded-lg hover:bg-red-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 font-medium border border-red-300 shadow-sm hover:shadow-md transition-all duration-300",children:[j?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}):t.jsx(yn,{className:"h-4 w-4 opacity-70"}),n("calendar.blockDates")]}),t.jsxs("button",{onClick:Pt,disabled:j,className:"bg-green-500/40 text-gray-900 px-4 py-2 rounded-lg hover:bg-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 font-medium border border-green-300 shadow-sm hover:shadow-md transition-all duration-300",children:[j?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}):t.jsx(bl,{className:"h-4 w-4 opacity-70"}),n("calendar.unblockDates")]}),t.jsx("button",{onClick:()=>b(null),className:"bg-gray-500/20 text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-500/30 font-medium border border-gray-300 shadow-sm hover:shadow-md transition-all duration-300",children:n("calendar.cancel")})]})]})}),F&&se&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-blue-900",children:n("calendar.selectingDateRange")}),t.jsx("p",{className:"text-xs text-blue-700",children:n("calendar.hoverToPreview")})]}),t.jsx("button",{onClick:Xe,className:"text-blue-600 hover:text-blue-800 px-2 py-1",children:n("calendar.cancel")})]})}),Q&&M.length>0&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-900",children:n("calendar.doubleClickMode").replace("{count}",M.length.toString()).replace("{plural}",M.length>1?"s":"")}),t.jsx("p",{className:"text-xs text-green-700",children:M.join(", ")}),t.jsx("p",{className:"text-xs text-green-600 mt-1",children:n("calendar.hoverToAdd")})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("button",{onClick:wt,disabled:j,className:"bg-red-500/40 text-gray-900 px-3 py-1 rounded-lg hover:bg-red-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 border border-red-300 shadow-sm hover:shadow-md transition-all duration-300",children:[j?t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-900"}):t.jsx(yn,{className:"h-3 w-3 opacity-70"}),n("calendar.blockAll").replace("{count}",M.length.toString())]}),t.jsxs("button",{onClick:ot,disabled:j,className:"bg-green-500/40 text-gray-900 px-3 py-1 rounded-lg hover:bg-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 border border-green-300 shadow-sm hover:shadow-md transition-all duration-300",children:[j?t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-900"}):t.jsx(bl,{className:"h-3 w-3 opacity-70"}),n("calendar.unblockAll").replace("{count}",M.length.toString())]}),t.jsx("button",{onClick:Xe,className:"text-green-600 hover:text-green-800 px-2 py-1",children:n("calendar.exitMode")})]})]})}),A&&N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900",children:n("calendar.manageDate")}),t.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:n("calendar.selectedDate")}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),Se?t.jsxs("div",{className:"flex items-center justify-center py-6",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:n("calendar.loadingDateData")})]}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:n("calendar.dateStatus")}),t.jsx("div",{className:"flex items-center space-x-1",children:ee?.status==="unavailable"||Mt(N)?t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[t.jsx(yn,{className:"h-2 w-2 mr-1"}),n("calendar.blocked")]}):Zt(N)?t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t.jsx(bl,{className:"h-2 w-2 mr-1"}),n("calendar.booked")]}):t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.jsx(bl,{className:"h-2 w-2 mr-1"}),n("calendar.available")]})})]})}),t.jsx("div",{className:"flex space-x-2",children:!Zt(N)&&t.jsx(t.Fragment,{children:Mt(N)?t.jsx("button",{onClick:mr,disabled:j,className:"flex-1 bg-green-500/40 text-gray-900 px-3 py-1 rounded-lg hover:bg-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center border border-green-300 shadow-sm hover:shadow-md transition-all duration-300",children:j?t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-900"}):t.jsxs(t.Fragment,{children:[t.jsx(bl,{className:"h-3 w-3 mr-1 opacity-70"}),n("calendar.unblockDate")]})}):t.jsx("button",{onClick:ut,disabled:j,className:"flex-1 bg-red-500/40 text-gray-900 px-3 py-1 rounded-lg hover:bg-red-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center border border-red-300 shadow-sm hover:shadow-md transition-all duration-300",children:j?t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-900"}):t.jsxs(t.Fragment,{children:[t.jsx(yn,{className:"h-3 w-3 mr-1 opacity-70"}),n("calendar.blockDate")]})})})}),Zt(N)&&t.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:t.jsx("p",{className:"text-xs text-blue-800",children:n("calendar.dateBookedCannotBlock")})})]})]})})]}):t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ms,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n("calendar.noPropertySelected")}),t.jsx("p",{className:"text-gray-500",children:n("calendar.selectPropertyToView")})]})})},rC=()=>{const{t:e}=Vr(),r=rs(),[n]=Fd(),[a,o]=O.useState({propertyId:void 0,startDate:void 0,endDate:void 0}),{isAuthenticated:l}=Ht(u=>u.auth),{properties:d}=Ht(u=>u.properties);return O.useEffect(()=>{l&&r(Gi())},[r,l]),Q0(),O.useEffect(()=>{const u=n.get("propertyId"),h=n.get("startDate"),p=n.get("endDate"),m=n.get("period");(u||h||p)&&o({propertyId:u?parseInt(u):void 0,startDate:h||void 0,endDate:p||void 0}),m&&console.log(`Applied ${m==="thisMonth"?"this month":m==="lastMonth"?"last month":m} calendar filters for property ${u}`)},[n]),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:t.jsx("div",{className:"container mx-auto px-4 py-1 pt-8",children:t.jsx("div",{children:t.jsx(tC,{propertyId:a.propertyId})})})})},nC=({propertyId:e,month:r})=>{const[n,a]=O.useState(null),[o,l]=O.useState(!1),[d,u]=O.useState(null),{token:h}=Ht(b=>b.auth),p=async()=>{if(!(!r||!h)){l(!0),u(null);try{const b=await fetch(`/api/performance/${e}?month=${r}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!b.ok){const y=await b.text();throw console.error("Performance API error:",b.status,y),new Error(`Failed to fetch performance data: ${b.status}`)}const j=await b.json();a(j)}catch(b){console.error("Performance fetch error:",b),u(b.message||"Failed to fetch performance data")}finally{l(!1)}}},m=()=>{p()};return O.useEffect(()=>{r&&p()},[e,r]),{performanceData:n,isLoading:o,error:d,refreshData:m}},sC=({propertyId:e,month:r})=>{const[n,a]=O.useState(e||392776),[o,l]=O.useState(r||new Date().toISOString().slice(0,7)),d=Ht(A=>A.propertyManagement.properties),{token:u}=Ht(A=>A.auth),{performanceData:h,isLoading:p,error:m,refreshData:b}=nC({propertyId:n||392776,month:o}),j=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(A),y=()=>{const A=[],P=new Date;for(let N=0;N<12;N++){const C=new Date(P.getFullYear(),P.getMonth()-N,1),F=C.toISOString().slice(0,7),D=C.toLocaleDateString("en-US",{month:"long",year:"numeric"});A.push({value:F,label:D})}return A};return p?t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):m?t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsxs("div",{className:"text-center text-red-600",children:[t.jsx("p",{className:"font-medium",children:"Error loading performance data"}),t.jsx("p",{className:"text-sm",children:m}),t.jsx("button",{onClick:b,className:"mt-2 text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}):h?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Performance"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Revenue, commission, and payout overview"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[t.jsx(za,{properties:d,selectedId:n,onChange:a}),t.jsx("select",{value:o,onChange:A=>l(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:y().map(A=>t.jsx("option",{value:A.value,children:A.label},A.value))}),t.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh data",children:t.jsx(xn,{className:"h-5 w-5"})})]})]}),h?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gross Revenue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(h.grossRevenue)})]}),t.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:t.jsx($3,{className:"h-6 w-6 text-blue-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(h.commissionTotal)}),t.jsxs("p",{className:"text-sm text-gray-500",children:[h.commissionPercent,"% of gross"]})]}),t.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:t.jsx(Su,{className:"h-6 w-6 text-orange-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cleaning Fees"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(h.cleaningFees)}),t.jsx("p",{className:"text-sm text-gray-500",children:"Deducted from gross"})]}),t.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:t.jsx(wa,{className:"h-6 w-6 text-green-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Net Payout"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:j(h.netPayout)}),t.jsx("p",{className:"text-sm text-gray-500",children:"Your earnings"})]}),t.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:t.jsx(pi,{className:"h-6 w-6 text-green-600"})})]})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Breakdown"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-600",children:"Gross Revenue"}),t.jsx("span",{className:"font-medium",children:j(h.grossRevenue)})]}),t.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[t.jsxs("span",{children:["Commission (",h.commissionPercent,"%)"]}),t.jsxs("span",{className:"font-medium",children:["-",j(h.commissionTotal)]})]}),t.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[t.jsx("span",{children:"Cleaning Fees"}),t.jsxs("span",{className:"font-medium",children:["-",j(h.cleaningFees)]})]}),t.jsxs("div",{className:"border-t pt-3 flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{children:"Net Payout"}),t.jsx("span",{className:"text-green-600",children:j(h.netPayout)})]})]})]})})]}):t.jsxs("div",{className:"bg-white rounded-lg border p-6 text-center text-gray-500",children:[t.jsx(on,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No performance data available for the selected month"})]})]}):t.jsx("div",{className:"bg-white rounded-lg border p-6",children:t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"font-medium",children:"No performance data available"}),t.jsx("p",{className:"text-sm",children:"Select a property and month to view performance metrics"})]})})})},aC=()=>{const{t:e}=Vr(),{propertyId:r}=E0(),[n]=Fd(),[a,o]=O.useState({propertyId:r?parseInt(r):void 0,month:void 0}),[l,d]=O.useState(null);return O.useEffect(()=>{const u=n.get("startDate");n.get("endDate");const h=n.get("period");if(u){const m=new Date(u).toISOString().slice(0,7);o({propertyId:r?parseInt(r):void 0,month:m})}if(h){const p=h==="thisMonth"?"this month":h==="lastMonth"?"last month":h;console.log(`Applied ${p} performance filters for property ${r}`),d({propertyId:r?parseInt(r):void 0,period:p,month:u?new Date(u).toISOString().slice(0,7):void 0})}},[n,r]),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:e("nav.performance")}),t.jsxs("p",{className:"text-slate-400 mt-2",children:["Track your monthly performance metrics and revenue breakdown",r&&` for Property ${r}`]}),l&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Showing ",l.period," data",l.propertyId&&` for Property ${l.propertyId}`,l.month&&` (${l.month})`]})]})})]}),t.jsx("div",{children:t.jsx(sC,{propertyId:a.propertyId,month:a.month})})]})},iC=()=>{const{t:e}=Vr();rs();const[r,n]=O.useState([]),[a,o]=O.useState("2025-01"),[l,d]=O.useState(null),[u,h]=O.useState(null),[p,m]=O.useState(!0),[b,j]=O.useState("overview"),{properties:y,isLoading:A}=Ht(D=>D.propertyManagement),{token:P}=Ht(D=>D.auth);O.useEffect(()=>{N()},[r,a]);const N=async()=>{if(P){m(!0);try{const D=await fetch(`/api/portfolio/overview?propertyIds=${r.join(",")}&month=${a}`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(D.ok){const U=await D.json();d(U)}const M=await fetch(`/api/portfolio/trends?propertyIds=${r.join(",")}&months=2024-12,2025-01,2025-02`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(M.ok){const U=await M.json();h(U)}}catch(D){console.error("Error fetching portfolio data:",D)}finally{m(!1)}}},C=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(D),F=D=>D==null?"0.0%":`${D>=0?"+":""}${D.toFixed(1)}%`;return p?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading portfolio data..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:e("nav.portfolio")}),t.jsx("p",{className:"text-slate-400 mt-1",children:"Multi-property performance overview and analytics"})]}),t.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:t.jsxs("button",{onClick:N,className:"btn-primary btn-sm",disabled:p,children:[t.jsx(xn,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Properties"}),t.jsx(za,{properties:y,selectedId:r[0],onChange:D=>n(D?[D]:[]),placeholder:"Select Properties"})]}),t.jsxs("div",{className:"w-full lg:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),t.jsx("input",{type:"month",value:a,onChange:D=>o(D.target.value),className:"input"})]})]})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:Pd},{id:"trends",name:"Trends",icon:pi},{id:"comparison",name:"Comparison",icon:B3}].map(D=>{const M=D.icon;return t.jsxs("button",{onClick:()=>j(D.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${b===D.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(M,{className:"h-4 w-4 mr-2"}),D.name]},D.id)})})}),b==="overview"&&t.jsx("div",{className:"space-y-6",children:l?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:t.jsx(Io,{className:"h-4 w-4 text-primary-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C(l.totalRevenue||0)}),t.jsxs("div",{className:"flex items-center mt-1",children:[(l.revenueGrowth||0)>=0?t.jsx(pi,{className:"h-4 w-4 text-green-500 mr-1"}):t.jsx(Su,{className:"h-4 w-4 text-red-500 mr-1"}),t.jsx("span",{className:`text-sm ${(l.revenueGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:F(l.revenueGrowth)})]})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-success-100 rounded-full flex items-center justify-center",children:t.jsx(on,{className:"h-4 w-4 text-success-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalBookings||0}),t.jsxs("p",{className:"text-sm text-gray-500",children:[l.totalNights||0," nights"]})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-warning-100 rounded-full flex items-center justify-center",children:t.jsx(ms,{className:"h-4 w-4 text-warning-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Occupancy"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(l.averageOccupancy||0).toFixed(1),"%"]}),t.jsxs("div",{className:"flex items-center mt-1",children:[(l.occupancyGrowth||0)>=0?t.jsx(pi,{className:"h-4 w-4 text-green-500 mr-1"}):t.jsx(Su,{className:"h-4 w-4 text-red-500 mr-1"}),t.jsx("span",{className:`text-sm ${(l.occupancyGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:F(l.occupancyGrowth)})]})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:t.jsx(Io,{className:"h-4 w-4 text-purple-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Daily Rate"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C(l.averageDailyRate||0)})]})]})})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Performance"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Property"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"}),t.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),t.jsx("tbody",{children:(l.properties||[]).map(D=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ms,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("span",{className:"font-medium text-gray-900",children:D.name})]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"font-medium text-gray-900",children:C(D.revenue||0)})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"text-gray-900",children:D.bookings||0})}),t.jsx("td",{className:"py-4 px-4",children:t.jsxs("span",{className:"text-gray-900",children:[(D.occupancy||0).toFixed(1),"%"]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"text-gray-900",children:C(D.adr||0)})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("div",{className:"flex items-center justify-end space-x-2",children:t.jsx("button",{className:"p-1 text-blue-400 hover:text-blue-600",title:"View Details",children:t.jsx(ps,{className:"h-4 w-4"})})})})]},D.id))})]})})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx(ms,{className:"h-12 w-12 mx-auto"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Portfolio Data"}),t.jsx("p",{className:"text-gray-500",children:"Select a property and month to view portfolio metrics."})]})}),b==="trends"&&u&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Trends"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),t.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"})]})}),t.jsx("tbody",{children:(u.monthlyData||[]).map((D,M)=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"font-medium text-gray-900",children:D.month})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"font-medium text-gray-900",children:C(D.revenue||0)})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"text-gray-900",children:D.bookings||0})}),t.jsx("td",{className:"py-4 px-4",children:t.jsxs("span",{className:"text-gray-900",children:[(D.occupancy||0).toFixed(1),"%"]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"text-gray-900",children:C(D.adr||0)})})]},D.month))})]})})})]})}),b==="comparison"&&u&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Comparison"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(u.propertyComparison||[]).map(D=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:D.propertyName}),t.jsxs("div",{className:"flex items-center",children:[D.trend==="up"&&t.jsx(pi,{className:"h-4 w-4 text-green-500"}),D.trend==="down"&&t.jsx(Su,{className:"h-4 w-4 text-red-500"}),D.trend==="stable"&&t.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Performance Score"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(D.performance||0).toFixed(1),"/10"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${(D.performance||0)/10*100}%`}})})]})]},D.propertyId))})})]})})]})},oC=()=>{const[e,r]=O.useState([]),[n,a]=O.useState(null),[o,l]=O.useState(!0),[d,u]=O.useState(392776),[h,p]=O.useState(""),[m,b]=O.useState(""),[j,y]=O.useState(""),[A,P]=O.useState(""),[N,C]=O.useState(!1),[F,D]=O.useState(null),[M,U]=O.useState("all"),{properties:Q}=Ht($=>$.properties),{token:J,user:re}=Ht($=>$.auth);O.useEffect(()=>{K()},[d,h,j,A]);const K=async()=>{if(!(!J||!d)){l(!0);try{const $=new URLSearchParams;$.append("propertyId",d.toString()),h&&$.append("status",h),j&&$.append("startDate",j),A&&$.append("endDate",A);const ee=await fetch(`/api/credit-notes?${$.toString()}`,{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if(ee.ok){const ge=await ee.json();r(ge.creditNotes||[]);const Se=ge.creditNotes?.filter(ie=>ie.status==="pending").length||0,T=ge.creditNotes?.filter(ie=>ie.status==="approved").length||0,L=ge.creditNotes?.filter(ie=>ie.status==="rejected").length||0,Y=ge.creditNotes?.reduce((ie,V)=>ie+V.amount,0)||0,ne=ge.creditNotes?.filter(ie=>ie.status==="pending").reduce((ie,V)=>ie+V.amount,0)||0;a({totalPending:Se,totalApproved:T,totalRejected:L,totalAmount:Y,pendingAmount:ne})}}catch($){console.error("Error fetching credit notes:",$)}finally{l(!1)}}},de=async $=>{if(J)try{(await fetch(`/api/credit-notes/${$}/approve`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}})).ok&&(K(),C(!1))}catch(ee){console.error("Error approving credit note:",ee)}},E=async($,ee)=>{if(J)try{(await fetch(`/api/credit-notes/${$}/reject`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({reason:ee})})).ok&&(K(),C(!1))}catch(ge){console.error("Error rejecting credit note:",ge)}},I=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format($),H=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),te=$=>{const ee=new Date;switch($){case"7d":return new Date(ee.getTime()-10080*60*1e3).toISOString().split("T")[0];case"30d":return new Date(ee.getTime()-720*60*60*1e3).toISOString().split("T")[0];case"90d":return new Date(ee.getTime()-2160*60*60*1e3).toISOString().split("T")[0];case"1y":return new Date(ee.getFullYear()-1,ee.getMonth(),ee.getDate()).toISOString().split("T")[0];default:return new Date(ee.getTime()-720*60*60*1e3).toISOString().split("T")[0]}},we=$=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",processed:"bg-blue-100 text-blue-800"})[$]||"bg-gray-100 text-gray-800",se=e.filter($=>{const ee=m===""||$.guestName.toLowerCase().includes(m.toLowerCase())||$.bookingId.toLowerCase().includes(m.toLowerCase()),ge=M==="all"||$.status===M;return ee&&ge});return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading credit notes..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Credit Notes"}),t.jsx("p",{className:"text-slate-400 mt-1",children:"Manage credit note requests and approvals"})]}),t.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0"})]}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsx(za,{properties:Q,selectedId:d,onChange:u,placeholder:"Select Property"})]}),t.jsxs("div",{className:"w-full lg:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:h,onChange:$=>p($.target.value),className:"input",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"processed",children:"Processed"})]})]}),t.jsxs("div",{className:"w-full lg:w-40",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:j,onChange:$=>y($.target.value),className:"input"})]}),t.jsxs("div",{className:"w-full lg:w-40",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:A,onChange:$=>P($.target.value),className:"input"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(Q3,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:m,onChange:$=>b($.target.value),placeholder:"Search by guest name or booking ID...",className:"input pl-10"})]})]}),t.jsxs("div",{className:"flex items-end space-x-2",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("button",{onClick:()=>{y(te("7d")),P(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"7D"}),t.jsx("button",{onClick:()=>{y(te("30d")),P(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"30D"}),t.jsx("button",{onClick:()=>{y(te("90d")),P(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"90D"}),t.jsx("button",{onClick:()=>{y(te("1y")),P(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"1Y"})]}),t.jsxs("button",{onClick:()=>{y(""),P(""),p(""),b("")},className:"btn-outline btn-sm",children:[t.jsx(_d,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})})}),n&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:t.jsx(bd,{className:"h-4 w-4 text-yellow-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalPending}),t.jsx("p",{className:"text-sm text-gray-500",children:I(n.pendingAmount)})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(bl,{className:"h-4 w-4 text-green-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalApproved})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(yn,{className:"h-4 w-4 text-red-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalRejected})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(Io,{className:"h-4 w-4 text-blue-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I(n.totalAmount)})]})]})})})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Credit Notes",count:e.length},{id:"pending",name:"Pending",count:n?.totalPending||0},{id:"approved",name:"Approved",count:n?.totalApproved||0},{id:"rejected",name:"Rejected",count:n?.totalRejected||0}].map($=>t.jsxs("button",{onClick:()=>U($.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${M===$.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[$.name,$.count>0&&t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full",children:$.count})]},$.id))})}),t.jsx("div",{className:"space-y-4",children:se.map($=>t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we($.status)}`,children:$.status}),t.jsxs("span",{className:"text-sm text-gray-500",children:["#",$.bookingId]}),t.jsx("span",{className:"text-sm text-gray-500",children:"•"}),t.jsx("span",{className:"text-sm text-gray-500",children:H($.requestedDate)})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:$.guestName}),t.jsx("p",{className:"text-gray-700 mb-2",children:$.reason}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Io,{className:"h-4 w-4 mr-1"}),I($.amount)]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pl,{className:"h-4 w-4 mr-1"}),$.requestedBy]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ms,{className:"h-4 w-4 mr-1"}),$.propertyName]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsxs("button",{onClick:()=>{D($),C(!0)},className:"btn-outline btn-sm",children:[t.jsx(ps,{className:"h-4 w-4 mr-2"}),"View Details"]}),$.status==="pending"&&re?.role&&(ty(re.role)||ry(re.role))&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>de($.id),className:"btn-success btn-sm",children:[t.jsx(bl,{className:"h-4 w-4 mr-2"}),"Approve"]}),t.jsxs("button",{onClick:()=>E($.id,"Rejected by manager"),className:"btn-danger btn-sm",children:[t.jsx(yn,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})})},$.id))}),se.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Zb,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No credit notes found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"No credit notes are currently available for this property."}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," Credit notes are fetched from the Hostkit API. If you need to create credit notes, please use the Hostkit system directly."]})})]}),N&&F&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Credit Note Details"}),t.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${we(F.status)}`,children:F.status}),t.jsxs("span",{className:"text-sm text-gray-500",children:["#",F.bookingId]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I(F.amount)}),t.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"})]})]}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:F.guestName}),t.jsx("p",{className:"text-gray-700",children:F.reason})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Note ID"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking ID"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.bookingId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.propertyName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),t.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:I(F.amount)})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we(F.status)}`,children:F.status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested By"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.requestedBy})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested Date"}),t.jsx("p",{className:"text-sm text-gray-900",children:H(F.requestedDate)})]}),F.approvedBy&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.approvedBy})]}),F.approvedDate&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved Date"}),t.jsx("p",{className:"text-sm text-gray-900",children:H(F.approvedDate)})]})]})]}),F.notes&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),t.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:t.jsx("p",{className:"text-sm text-gray-900",children:F.notes})})]}),F.invoiceId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Invoice ID"}),t.jsx("p",{className:"text-sm text-gray-900",children:F.invoiceId})]}),F.creditNoteUrl&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credit Note URL"}),t.jsxs("a",{href:F.creditNoteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[t.jsx(ps,{className:"h-4 w-4 mr-2"}),"View Credit Note"]})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),F.status==="pending"&&re?.role&&(ty(re.role)||ry(re.role))&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>de(F.id),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors",children:[t.jsx(bl,{className:"h-4 w-4 mr-2 inline"}),"Approve"]}),t.jsxs("button",{onClick:()=>E(F.id,"Rejected by manager"),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:[t.jsx(yn,{className:"h-4 w-4 mr-2 inline"}),"Reject"]})]})]})]})})})]})},lC=()=>{const{t:e}=Vr();return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:e("nav.expenses")}),t.jsxs("p",{className:"text-gray-600",children:[e("nav.expenses")," management coming soon..."]})]})})})},cC=()=>{const[e,r]=O.useState([]),[n,a]=O.useState(null),[o,l]=O.useState(!1),[d,u]=O.useState(392776),[h,p]=O.useState(""),[m,b]=O.useState("all"),[j,y]=O.useState(!1),[A,P]=O.useState(null),[N,C]=O.useState(""),[F,D]=O.useState(!1),[M,U]=O.useState([]),{properties:Q}=Ht($=>$.properties),{token:J,user:re}=Ht($=>$.auth);O.useEffect(()=>{K(),de()},[d,h]);const K=async()=>{if(!(!J||!d)){l(!0);try{const $=await fetch(`/api/reviews/${d}`,{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}}),ee=await fetch(`/api/reviews/${d}/stats`,{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if($.ok&&ee.ok){const ge=await $.json(),Se=await ee.json();console.log("Reviews API Response:",ge),console.log("Stats API Response:",Se);let T=ge||[];if(h){const he=new Date;let pe;switch(h){case"last7":pe=new Date(he.getTime()-10080*60*1e3);break;case"last30":pe=new Date(he.getTime()-720*60*60*1e3);break;case"last60":pe=new Date(he.getTime()-1440*60*60*1e3);break;default:pe=new Date(0)}const Ce=T.length;T=T.filter(ue=>new Date(ue.reviewDate)>=pe),console.log(`Date filter "${h}": ${Ce} -> ${T.length} reviews`)}r(T);const L=T.length,Y=L>0?T.reduce((he,pe)=>he+pe.rating,0)/L:Se.averageRating||0,ne=[5,4,3,2,1].map(he=>{const pe=T.filter(Ce=>Ce.rating===he).length;return{rating:he,count:pe,percentage:L>0?pe/L*100:0}}),ie=["Airbnb","Booking.com","VRBO"].map(he=>{const pe=T.filter(Pe=>Pe.platform===he),Ce=pe.length,ue=Ce>0?pe.reduce((Pe,Ge)=>Pe+Ge.rating,0)/Ce:0;return{platform:he,count:Ce,averageRating:ue}}).filter(he=>he.count>0),V=T.filter(he=>he.responseText).length,fe=L>0?V/L*100:0;a({averageRating:Y,totalReviews:L,ratingDistribution:ne,platformBreakdown:ie,recentTrend:"up",responseRate:fe})}else console.error("Failed to fetch reviews or stats"),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}catch($){console.error("Error fetching reviews:",$),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}finally{l(!1)}}},de=async()=>{if(J)try{const $=await fetch("/api/property-mappings",{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if($.ok){const ee=await $.json();U(ee.mappings||[])}}catch($){console.error("Error fetching property mappings:",$)}},E=async()=>{if(!(!J||!d)){l(!0);try{const $=await fetch(`/api/reviews/${d}/sync`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if($.ok){const ee=await $.json();alert(`Successfully synced ${ee.syncedCount} reviews!`),K()}else{const ee=await $.json();alert(`Failed to sync reviews: ${ee.message||"Unknown error"}`)}}catch($){console.error("Error syncing reviews:",$),alert("Error syncing reviews. Please try again.")}finally{l(!1)}}},I=async()=>{if(!(!A||!N.trim()||!J))try{const $=await fetch(`/api/reviews/${A.reviewId}/response`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({responseText:N})});if($.ok)y(!1),C(""),P(null),K(),alert("Response submitted successfully!");else{const ee=await $.json();alert(`Failed to submit response: ${ee.message||"Unknown error"}`)}}catch($){console.error("Error submitting response:",$),alert("Error submitting response. Please try again.")}},H=$=>Array.from({length:5},(ee,ge)=>t.jsx(fp,{className:`h-4 w-4 ${ge<$?"text-yellow-400 fill-current":"text-gray-300"}`},ge)),te=$=>$>=4.5?"text-green-600":$>=3.5?"text-yellow-600":$>=2.5?"text-orange-600":"text-red-600",we=$=>({airbnb:"bg-pink-100 text-pink-800","booking.com":"bg-blue-100 text-blue-800",vrbo:"bg-purple-100 text-purple-800"})[$]||"bg-gray-100 text-gray-800",se=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reviews & Ratings"}),t.jsx("p",{className:"text-slate-400 mt-1",children:"Manage guest reviews and maintain your reputation"})]})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsx(za,{properties:Q,selectedId:d,onChange:u,placeholder:"Select Property"})]}),t.jsxs("div",{className:"w-full lg:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter"}),t.jsxs("select",{value:h,onChange:$=>p($.target.value),className:"input text-sm",children:[t.jsx("option",{value:"",children:"All Time"}),t.jsx("option",{value:"last7",children:"Last 7 Days"}),t.jsx("option",{value:"last30",children:"Last 30 Days"}),t.jsx("option",{value:"last60",children:"Last 60 Days"})]})]})]})})}),n&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:t.jsx(fp,{className:"h-4 w-4 text-yellow-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),t.jsx("p",{className:`text-2xl font-bold ${te(n.averageRating)}`,children:(n.averageRating||0).toFixed(1)}),t.jsx("div",{className:"flex items-center mt-1",children:H(Math.round(n.averageRating))})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(up,{className:"h-4 w-4 text-blue-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalReviews})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(hp,{className:"h-4 w-4 text-green-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Response Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(n.responseRate||0).toFixed(0),"%"]})]})]})})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.recentTrend==="up"?t.jsx(pi,{className:"h-4 w-4 text-green-600"}):n.recentTrend==="down"?t.jsx(Su,{className:"h-4 w-4 text-red-600"}):t.jsx(Pd,{className:"h-4 w-4 text-gray-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trend"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 capitalize",children:n.recentTrend})]})]})})})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Reviews",icon:up},{id:"unresponded",name:"Unresponded",icon:hp},{id:"analytics",name:"Analytics",icon:Pd}].map($=>{const ee=$.icon;return t.jsxs("button",{onClick:()=>b($.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${m===$.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(ee,{className:"h-4 w-4 mr-2"}),$.name,$.id==="unresponded"&&t.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full",children:e.filter(ge=>!ge.responseText).length})]},$.id)})})}),(m==="all"||m==="unresponded")&&t.jsx("div",{className:"space-y-4",children:e.filter($=>m==="all"||!$.responseText).length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx(up,{className:"h-12 w-12 mx-auto"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:h?`No reviews found for the selected time period (${h==="last7"?"Last 7 days":h==="last30"?"Last 30 days":"Last 60 days"}). Try selecting "All Time" to see all reviews.`:d?"This property has no reviews yet.":"No reviews match your current filters."}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:()=>p(""),className:"btn-secondary",children:"Show All Time"}),t.jsx("button",{onClick:E,className:"btn-primary",children:"Sync Reviews"})]})]}):e.filter($=>m==="all"||!$.responseText).map($=>t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"flex items-center",children:H($.rating)}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we($.platform)}`,children:$.platform}),$.isVerified&&t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),t.jsx("p",{className:"text-gray-700 mb-4",children:$.reviewText}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pl,{className:"h-4 w-4 mr-1"}),$.guestName]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{className:"h-4 w-4 mr-1"}),se($.reviewDate)]})]}),$.responseText&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Your Response"}),t.jsx("span",{className:"text-xs text-gray-500",children:se($.responseDate)})]}),t.jsx("p",{className:"text-gray-700",children:$.responseText})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!$.responseText&&t.jsxs("button",{onClick:()=>{P($),y(!0)},className:"btn-primary btn-sm",children:[t.jsx(hp,{className:"h-4 w-4 mr-2"}),"Respond"]}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"View Details",children:t.jsx(ps,{className:"h-4 w-4"})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"Flag Review",children:t.jsx(V3,{className:"h-4 w-4"})})]})]})})},$._id))}),m==="analytics"&&n&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rating Distribution"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"space-y-3",children:n.ratingDistribution.map(({rating:$,count:ee,percentage:ge})=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"flex items-center w-16",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:$}),t.jsx(fp,{className:"h-4 w-4 text-yellow-400 fill-current ml-1"})]}),t.jsx("div",{className:"flex-1 mx-4",children:t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${ge}%`}})})}),t.jsxs("div",{className:"flex items-center space-x-2 w-20",children:[t.jsx("span",{className:"text-sm text-gray-600",children:ee}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",(ge||0).toFixed(0),"%)"]})]})]},$))})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Performance"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.platformBreakdown.map(({platform:$,count:ee,averageRating:ge})=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we($)}`,children:$}),t.jsx("div",{className:"flex items-center",children:H(Math.round(ge))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Reviews"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:ee})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Average"}),t.jsx("span",{className:`text-sm font-medium ${te(ge)}`,children:(ge||0).toFixed(1)})]})]})]},$))})})]})]}),j&&A&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Respond to Review"}),t.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[H(A.rating),t.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["by ",A.guestName]})]}),t.jsx("p",{className:"text-sm text-gray-700",children:A.reviewText})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),t.jsx("textarea",{value:N,onChange:$=>C($.target.value),className:"input",rows:4,placeholder:"Write a professional response to this review...",required:!0})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>y(!1),className:"btn-outline btn-sm",children:"Cancel"}),t.jsx("button",{onClick:I,className:"btn-primary btn-sm",disabled:!N.trim(),children:"Submit Response"})]})]})]})})}),F&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Integration Settings"}),t.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Environment Variables Required"}),t.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[t.jsxs("div",{children:[t.jsx("code",{children:"HOSTAWAY_TOKEN"})," - Your Hostaway API token (already configured)"]}),t.jsxs("div",{children:[t.jsx("code",{children:"HOSTAWAY_ACCOUNT_ID"})," - Your Hostaway account ID (already configured)"]}),t.jsxs("div",{children:[t.jsx("code",{children:"HOSTAWAY_API_BASE"})," - Hostaway API base URL (already configured)"]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Property Mappings"}),t.jsx("div",{className:"space-y-3",children:M.map($=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:$.propertyName}),t.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",$.internalId]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hostaway Property ID"}),t.jsx("input",{type:"text",value:$.platformMappings.hostaway||"",className:"w-full text-xs border border-gray-300 rounded px-2 py-1",placeholder:"Hostaway property ID (e.g., 392776)"})]})})]},$.internalId))})]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"API Status"}),t.jsxs("div",{className:"space-y-2 text-xs text-green-800",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Hostaway:"})," ✅ Already configured and ready to use"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Reviews API:"})," ✅ Connected to Hostaway Reviews endpoints"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Response API:"})," ✅ Can post responses to reviews"]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>D(!1),className:"btn-outline btn-sm",children:"Close"}),t.jsx("button",{onClick:()=>{alert("Property mappings updated! (This would save to database in production)"),D(!1)},className:"btn-primary btn-sm",children:"Save Changes"})]})]})})})]})},Cv=({data:e,title:r="Financial Details"})=>{const{t:n}=Vr(),[a,o]=O.useState({key:null,direction:"asc"}),l=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(m),d=m=>{let b="asc";a.key===m&&a.direction==="asc"&&(b="desc"),o({key:m,direction:b})},u=Fs.useMemo(()=>a.key?[...e].sort((m,b)=>{let j=m[a.key],y=b[a.key];return a.key==="reservation"&&(j=m.reservation.guestName,y=b.reservation.guestName),typeof j=="number"&&typeof y=="number"?a.direction==="asc"?j-y:y-j:typeof j=="string"&&typeof y=="string"?a.direction==="asc"?j.localeCompare(y):y.localeCompare(j):0}):e,[e,a]),h=m=>a.key!==m?t.jsx(iy,{className:"w-4 h-4 opacity-30"}):a.direction==="asc"?t.jsx(iy,{className:"w-4 h-4"}):t.jsx(Uu,{className:"w-4 h-4"}),p={receivedAmount:e.reduce((m,b)=>m+b.receivedAmount,0),hostCommission:e.reduce((m,b)=>m+b.hostCommission,0),cleaningFee:e.reduce((m,b)=>m+b.cleaningFee,0),mgmtCommission:e.reduce((m,b)=>m+b.mgmtCommission,0)};return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("property"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableProperty")}),h("property")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("invoice"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableInvoice")}),h("invoice")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("reservation"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableReservation")}),h("reservation")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("receivedAmount"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableReceivedAmount")}),h("receivedAmount")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("hostCommission"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableHostCommission")}),h("hostCommission")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("cleaningFee"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableCleaningFee")}),h("cleaningFee")]})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>d("mgmtCommission"),children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{children:n("ownerStatements.tableMgmtCommission")}),h("mgmtCommission")]})})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((m,b)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:m.property}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:m.invoice}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:m.reservation.guestName}),t.jsxs("div",{className:"text-gray-500 text-xs",children:["(",m.reservation.reservationId," | ",m.reservation.date,")"]})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(m.receivedAmount)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.jsxs("div",{children:[t.jsx("div",{children:l(m.hostCommission)}),m.receivedAmount>0&&t.jsxs("div",{className:"text-xs text-gray-500",children:["(",(m.hostCommission/m.receivedAmount*100).toFixed(1),"%)"]})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(m.cleaningFee)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(m.mgmtCommission)})]},b))}),t.jsx("tfoot",{className:"bg-gray-100",children:t.jsxs("tr",{className:"font-semibold",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:n("ownerStatements.tableTotal")}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(p.receivedAmount)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.jsxs("div",{children:[t.jsx("div",{children:l(p.hostCommission)}),p.receivedAmount>0&&t.jsxs("div",{className:"text-xs text-gray-500",children:["(",(p.hostCommission/p.receivedAmount*100).toFixed(1),"%)"]})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(p.cleaningFee)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l(p.mgmtCommission)})]})})]})})]})},dC=({data:e})=>{const{t:r}=Vr(),n=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(a);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3 uppercase tracking-wide",children:r("ownerStatements.detailedReport")}),t.jsx("div",{className:"bg-gray-100 px-3 py-2 mb-3 rounded",children:t.jsxs("p",{className:"text-sm text-gray-700 font-medium",children:[e.recipient," (",r("ownerStatements.propertyOwner"),")"]})}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.calculationBasis")}),t.jsx("span",{className:"text-gray-700",children:e.calculationBasis})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.commissionableAmount")}),t.jsxs("span",{className:"text-gray-700",children:[n(e.commissionableAmount)," ",r("ownerStatements.commissionableAmountNote")]})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.rule")}),t.jsx("span",{className:"text-gray-700",children:e.rule})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.managementCommissions")}),t.jsxs("span",{className:"text-gray-700",children:[n(e.managementCommissions),e.managementCommissionsVAT>0&&t.jsxs("span",{className:"text-gray-500",children:[" ","(",n(e.managementCommissions-e.managementCommissionsVAT)," + ",n(e.managementCommissionsVAT)," VAT)"]})]})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.cleaningFees")}),t.jsxs("span",{className:"text-gray-700",children:[n(e.cleaningFees)," (",r("ownerStatements.cleaningFeesNote"),")"]})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.hostCommissions")}),t.jsx("span",{className:"text-gray-700",children:n(e.hostCommissions)})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.extraFees")}),t.jsxs("span",{className:"text-gray-700",children:[n(e.extraFees)," (",r("ownerStatements.cleaningFeesNote"),")"]})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.expenses")}),t.jsx("span",{className:"text-gray-700",children:n(e.expenses)})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.issuer")}),t.jsxs("span",{className:"text-gray-700",children:[e.issuer," ",e.issuerDetails&&t.jsxs("span",{className:"text-gray-500",children:["(",e.issuerDetails,")"]})]})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.recipient")}),t.jsx("span",{className:"text-gray-700",children:e.recipient})]}),t.jsxs("div",{className:"border-t border-gray-300 pt-2 mt-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.totalToInvoice")}),t.jsx("span",{className:"font-bold text-gray-900",children:n(e.totalToInvoice)})]}),t.jsxs("div",{className:"flex mt-1",children:[t.jsx("span",{className:"font-bold text-gray-900 w-48",children:r("ownerStatements.totalToPay")}),t.jsxs("span",{className:"font-bold text-gray-900",children:[n(e.totalToPay),t.jsxs("span",{className:"text-gray-500 font-normal text-xs ml-2",children:["(",e.totalToPayFormula,")"]})]})]})]})]})]})},uC=()=>{const{t:e}=Vr(),{user:r}=Ht(U=>U.auth),[n,a]=O.useState([]),[o,l]=O.useState(""),[d,u]=O.useState(""),[h,p]=O.useState(""),[m,b]=O.useState(25),[j,y]=O.useState(!1),[A,P]=O.useState(""),[N,C]=O.useState(null);O.useEffect(()=>{const U=new Date,Q=U.getFullYear();let re=U.getMonth()-1,K=Q;re<0&&(re=11,K=Q-1);const de=new Date(K,re,1),E=new Date(K,re+1,0),I=H=>{const te=H.getFullYear(),we=String(H.getMonth()+1).padStart(2,"0"),se=String(H.getDate()).padStart(2,"0");return`${te}-${we}-${se}`};u(I(de)),p(I(E))},[]),O.useEffect(()=>{(async()=>{try{const Q=await sm();a(Q.properties||[])}catch(Q){console.error("Error fetching properties:",Q),P("Failed to fetch properties")}})()},[]);const F=async()=>{if(!o||!d||!h){P("Please select property and date range");return}y(!0),P("");try{const U={startDate:d,endDate:h,year:new Date(d).getFullYear().toString(),month:(new Date(d).getMonth()+1).toString(),commissionPercentage:m.toString()},Q=await Ft.get(`/owner-statements/property/${o}`,{params:U});console.log("API Response:",Q),C(Q)}catch(U){console.error("Error generating statements:",U),P(U instanceof Error?U.message:"Failed to generate statements")}finally{y(!1)}},D=U=>new Date(U).toLocaleDateString("en-EU"),M=()=>{if(!N||N.length===0)return;const U=N[0],Q=U.reservations.reduce((I,H)=>I+H.received_amount,0),J=U.expenses.commission+U.expenses.fees,re=Q-J,K=U.reservations.reduce((I,H)=>I+(H.received_amount+H.host_commission-H.cleaning_fee),0),de=window.open("","_blank");if(!de){alert("Please allow popups to download PDF");return}const E=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Owner Statement - ${U.propertyId}</title>
        <style>
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            line-height: 1.6;
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 15px; 
            margin-bottom: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
          }
          .header .logo {
            height: 60px;
            width: auto;
          }
          .header .title-section {
            flex: 1;
          }
          .header h1 { 
            margin: 0; 
            color: #333; 
            font-size: 24px;
          }
          .header p { 
            margin: 5px 0 0 0; 
            color: #666; 
            font-size: 14px;
          }
          .property-header {
            background-color: #f5f5f5;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
          }
          .property-header h2 {
            margin: 0;
            font-size: 18px;
            color: #333;
          }
          .report-section {
            margin-bottom: 25px;
          }
          .report-section h3 {
            color: #333;
            border-bottom: 1px solid #ccc;
            padding-bottom: 8px;
            margin-bottom: 15px;
            font-size: 18px;
          }
          .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
          }
          .label {
            font-weight: bold;
            color: #333;
            flex: 1;
          }
          .value {
            color: #666;
            flex: 1;
            text-align: right;
          }
          .total-section {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            margin-top: 20px;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 0;
            font-weight: bold;
            font-size: 16px;
            color: #333;
          }
          .total-row:last-child {
            border-top: 2px solid #333;
            padding-top: 12px;
            margin-top: 8px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${tm}" alt="Company Logo" class="logo" />
          <div class="title-section">
            <h1>${e("ownerStatements.detailedReport")}</h1>
            <p>${new Date().toLocaleString()}</p>
          </div>
        </div>
        
        <div class="property-header">
          <h2>${U.propertyId} (« ${U.propertyName} ») (${e("ownerStatements.propertyOwner")})</h2>
          <p style="margin: 5px 0 0 0; font-size: 14px; color: #666;">
            ${e("ownerStatements.period")}: ${new Date(U.period.startDate).toLocaleDateString("en-US",{month:"long",year:"numeric"})}
          </p>
        </div>
        
        <!-- Financial Table Section -->
        <div class="report-section">
          <h3>${e("ownerStatements.detailedFinancialBreakdown")}</h3>
          <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <thead style="background-color: #f5f5f5;">
              <tr>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableProperty")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableInvoice")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableReservation")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableReceivedAmount")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableHostCommission")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableCleaningFee")}</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: bold;">${e("ownerStatements.tableMgmtCommission")}</th>
              </tr>
            </thead>
            <tbody>
              ${U.reservations.map(I=>{const H=I.received_amount>0?(I.host_commission/I.received_amount*100).toFixed(1):"0.0";return`
                  <tr>
                    <td style="border: 1px solid #ddd; padding: 8px;">${U.propertyName}</td>
                    <td style="border: 1px solid #ddd; padding: 8px;">FR ${U.propertyName.replace(/\s+/g,"").toUpperCase()}</td>
                    <td style="border: 1px solid #ddd; padding: 8px;">
                      <div style="font-weight: bold;">${I.firstname} ${I.lastname}</div>
                      <div style="font-size: 12px; color: #666;">(${I.rcode} | ${new Date(parseInt(I.arrival)*1e3).toISOString().split("T")[0]})</div>
                    </td>
                    <td style="border: 1px solid #ddd; padding: 8px;">€${I.received_amount.toFixed(2)}</td>
                    <td style="border: 1px solid #ddd; padding: 8px;">
                      <div>€${I.host_commission.toFixed(2)}</div>
                      <div style="font-size: 12px; color: #666;">(${H}%)</div>
                    </td>
                    <td style="border: 1px solid #ddd; padding: 8px;">€${I.cleaning_fee.toFixed(2)}</td>
                    <td style="border: 1px solid #ddd; padding: 8px;">€${U.isAdminOwned?0:Math.max(0,.25*(I.received_amount+I.host_commission-I.cleaning_fee)).toFixed(2)}</td>
                  </tr>
                `}).join("")}
            </tbody>
            <tfoot style="background-color: #f0f0f0; font-weight: bold;">
              <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">${e("ownerStatements.tableTotal")}</td>
                <td style="border: 1px solid #ddd; padding: 8px;"></td>
                <td style="border: 1px solid #ddd; padding: 8px;"></td>
                <td style="border: 1px solid #ddd; padding: 8px;">€${Q.toFixed(2)}</td>
                <td style="border: 1px solid #ddd; padding: 8px;">
                  <div>€${U.reservations.reduce((I,H)=>I+H.host_commission,0).toFixed(2)}</div>
                  <div style="font-size: 12px; color: #666;">(${Q>0?(U.reservations.reduce((I,H)=>I+H.host_commission,0)/Q*100).toFixed(1):"0.0"}%)</div>
                </td>
                <td style="border: 1px solid #ddd; padding: 8px;">€${U.reservations.reduce((I,H)=>I+H.cleaning_fee,0).toFixed(2)}</td>
                <td style="border: 1px solid #ddd; padding: 8px;">€${U.reservations.reduce((I,H)=>I+(U.isAdminOwned?0:Math.max(0,.25*(H.received_amount+H.host_commission-H.cleaning_fee))),0).toFixed(2)}</td>
              </tr>
            </tfoot>
          </table>
        </div>
        
        <div class="report-section">
          <div class="info-row">
            <span class="label">${e("ownerStatements.calculationBasis")}</span>
            <span class="value">Invoices</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.commissionableAmount")}</span>
            <span class="value">€${K.toFixed(2)}</span>
          </div>
          <div class="info-row">
            <span class="label"></span>
            <span class="value" style="font-style: italic; font-size: 12px;">${e("ownerStatements.commissionableAmountNote")}</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.rule")}</span>
            <span class="value">25% of Commissionable amount</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.managementCommissions")}</span>
            <span class="value">€${U.expenses.commission.toFixed(2)}</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.cleaningFees")}</span>
            <span class="value">€${U.expenses.fees.toFixed(2)} (${e("ownerStatements.cleaningFeesNote")})</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.hostCommissions")}</span>
            <span class="value">€0.00</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.extraFees")}</span>
            <span class="value">€0.00 (${e("ownerStatements.cleaningFeesNote")})</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.expenses")}</span>
            <span class="value">€0.00</span>
          </div>
        </div>
        
        <div class="report-section">
          <div class="info-row">
            <span class="label">${e("ownerStatements.issuer")}</span>
            <span class="value">514142057 (series: FR COMMLT14 | product: GEST)</span>
          </div>
          <div class="info-row">
            <span class="label">${e("ownerStatements.recipient")}</span>
            <span class="value">${U.propertyId} (« ${U.propertyName} »)</span>
          </div>
        </div>
        
        <div class="total-section">
          <div class="total-row">
            <span>${e("ownerStatements.totalToInvoice")}</span>
            <span>€${J.toFixed(2)}</span>
          </div>
          <div class="total-row">
            <span>${e("ownerStatements.totalToPay")}</span>
            <span>€${re.toFixed(2)}</span>
          </div>
          <div class="info-row">
            <span class="label"></span>
            <span class="value" style="font-style: italic; font-size: 12px;">${e("ownerStatements.totalToPayNote")}</span>
          </div>
        </div>
        
        <script>
          // Auto-print when window loads
          window.onload = function() {
            setTimeout(function() {
              window.print();
              // Close window after printing
              setTimeout(function() {
                window.close();
              }, 1000);
            }, 500);
          };
        <\/script>
      </body>
      </html>
    `;de.document.write(E),de.document.close()};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[t.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ay,{className:"w-8 h-8 mr-3 text-gray-700"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:e("ownerStatements.title")}),t.jsx("p",{className:"text-lg text-gray-600",children:e("ownerStatements.description")})]})]})})}),t.jsx("div",{className:"container mx-auto px-4 py-8 pt-48",children:t.jsx("div",{className:"bg-white shadow rounded-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("ownerStatements.property")}),t.jsxs("select",{value:o,onChange:U=>l(U.target.value?parseInt(U.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:e("ownerStatements.selectProperty")}),n.map(U=>t.jsx("option",{value:U.id,children:U.name},U.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("ownerStatements.startDate")}),t.jsx("input",{type:"date",value:d,onChange:U=>u(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("ownerStatements.endDate")}),t.jsx("input",{type:"date",value:h,onChange:U=>p(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r?.role==="admin"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("ownerStatements.managementCommissionRate")}),t.jsxs("select",{value:m,onChange:U=>b(parseInt(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:10,children:"10%"}),t.jsx("option",{value:25,children:"25%"}),t.jsx("option",{value:30,children:"30%"})]})]})]}),t.jsx("div",{className:"flex justify-end mb-6",children:t.jsx("button",{onClick:F,disabled:j||!o||!d||!h,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:j?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e("ownerStatements.generating")]}):t.jsxs(t.Fragment,{children:[t.jsx(ay,{className:"w-4 h-4 mr-2"}),e("ownerStatements.generateStatements")]})})}),A&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-red-600",children:A})}),j&&t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:e("ownerStatements.generatingStatements")})]})}),!j&&N&&N.length>0&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e("ownerStatements.propertyInformation")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.propertyName")}),t.jsx("span",{className:"font-semibold",children:N[0].propertyName})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.propertyId")}),t.jsx("span",{className:"font-semibold",children:N[0].propertyId})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.status")}),t.jsx("span",{className:"font-semibold",children:N[0].status})]})]})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.period")}),t.jsxs("span",{className:"font-semibold",children:[D(N[0].period.startDate)," - ",D(N[0].period.endDate)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.created")}),t.jsx("span",{className:"font-semibold",children:D(N[0].createdAt)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:e("ownerStatements.commissionRate")}),t.jsxs("span",{className:"font-semibold",children:[m,"%"]})]})]})})]})]}),N[0].reservations&&N[0].reservations.length>0&&t.jsx("div",{className:"mt-6",children:t.jsx(Cv,{title:e("ownerStatements.detailedFinancialBreakdown"),data:N[0].reservations.map(U=>({property:N[0].propertyName,invoice:U.invoiced_value>0?`FR ${N[0].propertyName.replace(/\s+/g,"").toUpperCase()}`:"N/A",reservation:{guestName:`${U.firstname} ${U.lastname}`,reservationId:U.rcode,date:new Date(parseInt(U.arrival)*1e3).toISOString().split("T")[0]},receivedAmount:U.received_amount||0,hostCommission:U.host_commission||0,cleaningFee:U.cleaning_fee||0,mgmtCommission:N[0].isAdminOwned?0:Math.max(0,.25*(U.received_amount+U.host_commission-U.cleaning_fee))}))})}),N[0].reservations&&N[0].reservations.length>0&&(()=>{const U=N[0].expenses.commission+N[0].expenses.fees,Q=N[0].reservations.reduce((J,re)=>J+re.received_amount,0);return t.jsx("div",{className:"mt-6",children:t.jsx(dC,{data:{calculationBasis:"Invoices",commissionableAmount:N[0].reservations.reduce((J,re)=>J+(re.received_amount+re.host_commission-re.cleaning_fee),0),rule:"25% of Commissionable amount",managementCommissions:N[0].expenses.commission,managementCommissionsVAT:N[0].summary?.management_commission_vat||0,cleaningFees:N[0].expenses.fees,hostCommissions:0,extraFees:N[0].expenses.other,expenses:0,issuer:"514142057",issuerDetails:"series: FR COMMLT14 | product: GEST",recipient:`${N[0].propertyId} (${N[0].propertyName})`,totalToInvoice:U,totalToPay:Q-U,totalToPayFormula:"Received amounts - Total to invoice"}})})})(),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Oo,{className:"h-4 w-4 mr-2"}),e("ownerStatements.downloadPdf")]})})]})]})})})]})},hC=()=>{const{user:e}=Ht(F=>F.auth),[r,n]=O.useState([]),[a,o]=O.useState(null),[l,d]=O.useState(""),[u,h]=O.useState(""),[p,m]=O.useState([]),[b,j]=O.useState(!1),[y,A]=O.useState("");O.useEffect(()=>{if(!e||e.role!=="owner"&&e.role!=="admin"&&e.role!=="accountant"){A("You do not have permission to access financial details.");return}P();const F=new Date,D=new Date(F.getFullYear(),F.getMonth(),1),M=new Date(F.getFullYear(),F.getMonth()+1,0);d(D.toISOString().split("T")[0]),h(M.toISOString().split("T")[0])},[e]);const P=async()=>{try{console.log("🔍 Fetching properties for user:",e?.role,e?.id);const F=await sm();console.log("✅ Properties fetched successfully:",F);const D=F.properties||F;n(D),D.length>0?(o(D[0]),console.log("✅ Selected first property:",D[0])):A("No properties found for your account.")}catch(F){console.error("❌ Error fetching properties:",F),console.error("❌ Error response:",F.response?.data),console.error("❌ Error status:",F.response?.status),F.response?.status===403?F.response?.data?.message==="Invalid or expired token"?A("Your session has expired. Please log in again."):A("Access denied. You do not have permission to view properties."):F.response?.status===401?A("Authentication failed. Please log in again."):A(`Failed to fetch properties: ${F.response?.data?.message||F.message}`)}},N=async()=>{if(!a||!l||!u){A("Please select a property and date range");return}j(!0),A("");try{const F=await Ft.get(`/owner-statements/property/${a.id}?startDate=${l}&endDate=${u}&commissionPercentage=25`);if(F.data&&F.data.length>0){const D=F.data[0],M=D.reservations.map(U=>({property:D.propertyName,invoice:U.invoiced_value>0?`FR ${D.propertyName.replace(/\s+/g,"").toUpperCase()}${new Date().getFullYear()}/${new Date().getMonth()+1}`:"N/A",reservation:{guestName:`${U.firstname} ${U.lastname}`,reservationId:U.rcode,date:new Date(parseInt(U.arrival)*1e3).toISOString().split("T")[0]},receivedAmount:U.received_amount||0,hostCommission:U.host_commission||0,cleaningFee:U.cleaning_fee||0,mgmtCommission:D.isAdminOwned?0:Math.max(0,.25*(U.received_amount+U.host_commission-U.cleaning_fee))}));m(M)}else A("No financial data found for the selected period"),m([])}catch(F){console.error("Error generating financial data:",F),A(F.response?.data?.message||"Failed to generate financial data"),m([])}finally{j(!1)}},C=()=>{if(p.length===0)return;const D=[["Property","Invoice","Guest Name","Reservation ID","Date","Received Amount","Host Commission","Cleaning Fee","Mgmt Commission"],...p.map(J=>[J.property,J.invoice,J.reservation.guestName,J.reservation.reservationId,J.reservation.date,J.receivedAmount.toFixed(2),J.hostCommission.toFixed(2),J.cleaningFee.toFixed(2),J.mgmtCommission.toFixed(2)])].map(J=>J.join(",")).join(`
`),M=new Blob([D],{type:"text/csv"}),U=window.URL.createObjectURL(M),Q=document.createElement("a");Q.href=U,Q.download=`financial-details-${a?.name}-${l}-to-${u}.csv`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(U)};return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Details"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"View detailed financial breakdown by property and invoice"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(_d,{className:"w-5 h-5 mr-2 text-blue-600"}),"Filters"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsxs("select",{value:a?.id||"",onChange:F=>{const D=r.find(M=>M.id===parseInt(F.target.value));o(D||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select Property"}),r.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:l,onChange:F=>d(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:u,onChange:F=>h(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsx("button",{onClick:N,disabled:b||!a||!l||!u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Loading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(on,{className:"w-4 h-4 mr-2"}),"Generate Report"]})})})]}),y&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-red-600",children:y})}),p.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Financial Breakdown for ",a?.name]}),t.jsxs("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]}),t.jsx(Cv,{data:p})]}),!b&&p.length===0&&!y&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(on,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Financial Data"}),t.jsx("p",{className:"text-gray-600",children:'Select a property and date range, then click "Generate Report" to view financial details.'})]})]})})},Pv={async getUserProfile(){return Ft.get("/settings/profile")},async updateUserProfile(e){return Ft.put("/settings/profile",e)},async getNotificationSettings(){return Ft.get("/settings/notifications")},async updateNotificationSettings(e){return Ft.put("/settings/notifications",e)},async getSecuritySettings(){return Ft.get("/settings/security")},async updateSecuritySettings(e){return Ft.put("/settings/security",e)}},fC=()=>{const[e,r]=O.useState(!1),[n,a]=O.useState(!1),[o,l]=O.useState(!1),[d,u]=O.useState(null),[h,p]=O.useState({firstName:"",lastName:"",email:"",phone:"",role:""}),{user:m,token:b}=Ht(N=>N.auth),j=rs();O.useEffect(()=>{if(m){const N=(m.name||"").split(" ");p({firstName:N[0]||"",lastName:N.slice(1).join(" ")||"",email:m.email||"",phone:"",role:m.role||""})}},[m]);const y=async()=>{if(b){l(!0);try{const N=await Pv.updateUserProfile({name:`${h.firstName} ${h.lastName}`.trim(),phone:h.phone});u({type:"success",text:N.message}),j(ju()),r(!1)}catch(N){u({type:"error",text:N.response?.data?.message||"Error updating profile"})}finally{l(!1)}}},A=()=>{if(m){const N=(m.name||"").split(" ");p({firstName:N[0]||"",lastName:N.slice(1).join(" ")||"",email:m.email||"",phone:"",role:m.role||""})}r(!1),u(null)},P=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile"}),t.jsx("p",{className:"text-slate-400 mt-1",children:"View and manage your profile information"})]}),d&&t.jsxs("div",{className:`p-4 rounded-lg flex items-center ${d.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[d.type==="success"?t.jsx(u0,{className:"h-5 w-5 mr-2"}):t.jsx(yn,{className:"h-5 w-5 mr-2"}),d.text,t.jsx("button",{onClick:()=>u(null),className:"ml-auto text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),e?t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:A,className:"btn-secondary btn-sm",children:[t.jsx(yn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),t.jsxs("button",{onClick:y,disabled:o,className:"btn-primary btn-sm",children:[t.jsx(u0,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]}):t.jsxs("button",{onClick:()=>r(!0),className:"btn-primary btn-sm",children:[t.jsx(yc,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(Pl,{className:"h-4 w-4 inline mr-2"}),"First Name"]}),t.jsx("input",{type:"text",value:h.firstName,onChange:N=>p({...h,firstName:N.target.value}),disabled:!e,className:`input ${e?"":"bg-gray-50"}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(Pl,{className:"h-4 w-4 inline mr-2"}),"Last Name"]}),t.jsx("input",{type:"text",value:h.lastName,onChange:N=>p({...h,lastName:N.target.value}),disabled:!e,className:`input ${e?"":"bg-gray-50"}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(xc,{className:"h-4 w-4 inline mr-2"}),"Email"]}),t.jsx("input",{type:"email",value:h.email,disabled:!0,className:"input bg-gray-50"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(q0,{className:"h-4 w-4 inline mr-2"}),"Phone"]}),t.jsx("input",{type:"tel",value:h.phone,onChange:N=>p({...h,phone:N.target.value}),disabled:!e,className:`input ${e?"":"bg-gray-50"}`,placeholder:"Enter phone number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(fs,{className:"h-4 w-4 inline mr-2"}),"Role"]}),t.jsx("input",{type:"text",value:h.role,disabled:!0,className:"input bg-gray-50"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(on,{className:"h-4 w-4 inline mr-2"}),"Member Since"]}),t.jsx("input",{type:"text",value:m?.createdAt?P(m.createdAt):"N/A",disabled:!0,className:"input bg-gray-50"})]})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Status"})}),t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${m?.isVerified?"bg-green-500":"bg-yellow-500"}`}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:m?.isVerified?"Verified Account":"Pending Verification"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(fs,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m?.role||"User"})]})]})})]})]})},mC=()=>{const[e,r]=O.useState([]),[n,a]=O.useState([]),[o,l]=O.useState(!0),[d,u]=O.useState(0),[h,p]=O.useState({}),[m,b]=O.useState(392776),[j,y]=O.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}),[A,P]=O.useState(!1),[N,C]=O.useState(!1),[F,D]=O.useState(!1),[M,U]=O.useState(null),[Q,J]=O.useState("all"),[re,K]=O.useState([]),[de,E]=O.useState("single"),[I,H]=O.useState([m||392776]),[te,we]=O.useState("events"),{properties:se}=Ht(ue=>ue.properties),{token:$,user:ee}=Ht(ue=>ue.auth);O.useEffect(()=>{$&&(ge(),Se())},[$,m,j]);const ge=async()=>{if(!$||!m){console.log("No token or property selected for fetching events"),l(!1);return}l(!0);try{const ue=new URLSearchParams({propertyId:m.toString(),startDate:j.start,endDate:j.end});console.log("Fetching advanced calendar events from:",`/advanced-calendar/events?${ue}`),console.log("Using token:",$.substring(0,20)+"...");const Pe=await Ft.get(`/advanced-calendar/events?${ue}`);console.log("Advanced calendar events data received:",Pe),r(Pe.events||[]),u(Pe.total||0),p(Pe.sources||{})}catch(ue){console.error("Error fetching advanced calendar events:",ue),r([])}finally{l(!1)}},Se=async()=>{if(!$){console.log("No token available for fetching bulk operations");return}try{console.log("Fetching bulk operations from:","/advanced-calendar/bulk-operations");const ue=await Ft.get("/advanced-calendar/bulk-operations");console.log("Bulk operations data received:",ue),a(ue.operations||[])}catch(ue){console.error("Error fetching bulk operations:",ue),a([])}},T=async ue=>{if(!(!$||!m))try{await Ft.post("/advanced-calendar/events",{...ue,propertyId:m}),ge(),P(!1)}catch(Pe){console.error("Error creating event:",Pe)}},L=async ue=>{if(!(!$||!ue.id))try{await Ft.put(`/advanced-calendar/events/${ue.id}`,ue),ge(),C(!1),U(null)}catch(Pe){console.error("Error updating event:",Pe)}},Y=async ue=>{if($&&confirm("Are you sure you want to delete this event?"))try{await Ft.delete(`/advanced-calendar/events/${ue}`),ge()}catch(Pe){console.error("Error deleting event:",Pe)}},ne=async ue=>{if($)try{await Ft.post("/advanced-calendar/bulk-operations",ue),Se(),D(!1)}catch(Pe){console.error("Error creating bulk operation:",Pe)}},ie=ue=>new Date(ue).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),V=ue=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(ue),fe=ue=>({block:"bg-red-100 text-red-800",price_update:"bg-blue-100 text-blue-800",minimum_stay:"bg-yellow-100 text-yellow-800",maintenance:"bg-orange-100 text-orange-800",cleaning:"bg-green-100 text-green-800"})[ue]||"bg-gray-100 text-gray-800",he=ue=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[ue]||"bg-gray-100 text-gray-800",pe=ue=>({hostaway:"bg-blue-100 text-blue-800",hostkit:"bg-purple-100 text-purple-800",manual:"bg-gray-100 text-gray-800"})[ue]||"bg-gray-100 text-gray-800",Ce=ue=>{switch(ue){case"hostaway":return t.jsx(ms,{className:"h-3 w-3"});case"hostkit":return t.jsx(r2,{className:"h-3 w-3"});case"manual":return t.jsx(yc,{className:"h-3 w-3"});default:return t.jsx(oy,{className:"h-3 w-3"})}};return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading calendar events..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Advanced Calendar"}),t.jsx("p",{className:"text-slate-400 mt-1",children:"Manage calendar events, bulk operations, and pricing"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[t.jsxs("button",{onClick:()=>D(!0),className:"btn-outline btn-sm",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Bulk Operations"]}),t.jsxs("button",{onClick:()=>P(!0),className:"btn-primary btn-sm",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})]}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsx(za,{properties:se,selectedId:m,onChange:b,placeholder:"Select Property"})]}),t.jsxs("div",{className:"w-full lg:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:j.start,onChange:ue=>y({...j,start:ue.target.value}),className:"input"})]}),t.jsxs("div",{className:"w-full lg:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:j.end,onChange:ue=>y({...j,end:ue.target.value}),className:"input"})]})]})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"events",name:"Calendar Events",icon:on},{id:"bulk",name:"Bulk Operations",icon:_d},{id:"templates",name:"Templates",icon:u0}].map(ue=>{const Pe=ue.icon;return t.jsxs("button",{onClick:()=>we(ue.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${te===ue.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Pe,{className:"h-4 w-4 mr-2"}),ue.name]},ue.id)})})}),te==="events"&&t.jsx("div",{className:"space-y-4",children:e.map(ue=>t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(ue.type)}`,children:ue.type.replace("_"," ")}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he(ue.status)}`,children:ue.status}),ue.source&&t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${pe(ue.source)}`,children:[Ce(ue.source),t.jsx("span",{className:"ml-1",children:ue.source})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[ie(ue.startDate)," - ",ie(ue.endDate)]})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ue.title}),ue.description&&t.jsx("p",{className:"text-gray-700 mb-2",children:ue.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ms,{className:"h-4 w-4 mr-1"}),ue.propertyName]}),ue.price&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(Io,{className:"h-4 w-4 mr-1"}),V(ue.price)]}),ue.minimumStay&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(bd,{className:"h-4 w-4 mr-1"}),ue.minimumStay," nights min"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(wa,{className:"h-4 w-4 mr-1"}),ue.createdBy]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsxs("button",{onClick:()=>{U(ue),C(!0)},className:"btn-outline btn-sm",children:[t.jsx(yc,{className:"h-4 w-4 mr-2"}),"Edit"]}),t.jsxs("button",{onClick:()=>Y(ue.id),className:"btn-danger btn-sm",children:[t.jsx(Df,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})},ue.id))}),te==="bulk"&&t.jsx("div",{className:"space-y-4",children:n.map(ue=>t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-content",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(ue.type)}`,children:ue.type.replace("_"," ")}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he(ue.status)}`,children:ue.status}),t.jsx("span",{className:"text-sm text-gray-500",children:ie(ue.createdAt)})]}),t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Bulk ",ue.type.replace("_"," ")," Operation"]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ms,{className:"h-4 w-4 mr-1"}),ue.properties.length," properties"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{className:"h-4 w-4 mr-1"}),ue.dates.length," dates"]}),ue.parameters.price&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(Io,{className:"h-4 w-4 mr-1"}),V(ue.parameters.price)]})]}),ue.results&&t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("span",{className:"text-green-600",children:[t.jsx(Ws,{className:"h-4 w-4 inline mr-1"}),ue.results.success," successful"]}),t.jsxs("span",{className:"text-red-600",children:[t.jsx(Ki,{className:"h-4 w-4 inline mr-1"}),ue.results.failed," failed"]})]})]}),t.jsx("div",{className:"flex items-center space-x-2 ml-4",children:ue.status==="completed"&&t.jsxs("button",{className:"btn-outline btn-sm",children:[t.jsx(oy,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})})},ue.id))}),te==="templates"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Templates"})}),t.jsx("div",{className:"card-content",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Maintenance Block",type:"block",description:"Block dates for maintenance work"},{name:"Cleaning Schedule",type:"cleaning",description:"Schedule cleaning between bookings"},{name:"Price Increase",type:"price_update",description:"Increase prices for peak season"},{name:"Minimum Stay Update",type:"minimum_stay",description:"Set minimum stay requirements"},{name:"Holiday Block",type:"block",description:"Block dates for personal use"},{name:"Seasonal Pricing",type:"price_update",description:"Apply seasonal pricing rules"}].map((ue,Pe)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:ue.name}),t.jsx("p",{className:"text-sm text-gray-500 mb-3",children:ue.description}),t.jsx("button",{className:"btn-outline btn-sm w-full",children:"Use Template"})]},Pe))})})]})}),e.length===0&&te==="events"&&!o&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(on,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"No events match your current filters."}),t.jsxs("button",{onClick:()=>P(!0),className:"btn-primary btn-sm",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Create Your First Event"]})]}),n.length===0&&te==="bulk"&&!o&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(_d,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bulk operations found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create bulk operations to manage multiple properties at once."}),t.jsxs("button",{onClick:()=>D(!0),className:"btn-primary btn-sm",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Create Bulk Operation"]})]}),A&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Event"}),t.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target);let Ge=[];de==="single"?Ge=[m||392776]:Ge=I.length>0?I:[m||392776],Ge.forEach(Te=>{const W={propertyId:Te,type:Pe.get("type"),title:Pe.get("title"),description:Pe.get("description"),startDate:Pe.get("startDate"),endDate:Pe.get("endDate"),price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0};T(W)})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"eventPropertySelection",value:"single",checked:de==="single",onChange:ue=>E(ue.target.value),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"Current Property"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"eventPropertySelection",value:"multiple",checked:de==="multiple",onChange:ue=>E(ue.target.value),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),de==="multiple"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>H(se.map(ue=>ue.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),t.jsx("button",{type:"button",onClick:()=>H([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),t.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[I.length," selected"]})]}),t.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:se.map(ue=>t.jsxs("label",{className:"flex items-center mb-1",children:[t.jsx("input",{type:"checkbox",checked:I.includes(ue.id),onChange:Pe=>{Pe.target.checked?H([...I,ue.id]):H(I.filter(Ge=>Ge!==ue.id))},className:"mr-2"}),t.jsx("span",{className:"text-sm",children:ue.name})]},ue.id))})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"block",children:"Block"}),t.jsx("option",{value:"price_update",children:"Price Update"}),t.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),t.jsx("input",{name:"title",type:"text",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{name:"description",className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{name:"startDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{name:"endDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),t.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),t.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{P(!1),E("single"),H([m||392776])},className:"btn-outline btn-sm",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Event"})]})]})]})}),N&&M&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Event"}),t.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target),Ge={id:M.id,propertyId:M.propertyId,type:Pe.get("type"),title:Pe.get("title"),description:Pe.get("description"),startDate:Pe.get("startDate"),endDate:Pe.get("endDate"),price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0};L(Ge)},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded-md text-sm text-gray-600",children:[M.propertyName," (ID: ",M.propertyId,")"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsxs("select",{name:"type",defaultValue:M.type,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"block",children:"Block"}),t.jsx("option",{value:"price_update",children:"Price Update"}),t.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),t.jsx("input",{name:"title",type:"text",defaultValue:M.title,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{name:"description",defaultValue:M.description,className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{name:"startDate",type:"date",defaultValue:M.startDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{name:"endDate",type:"date",defaultValue:M.endDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),t.jsx("input",{name:"price",type:"number",step:"0.01",defaultValue:M.price,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),t.jsx("input",{name:"minimumStay",type:"number",defaultValue:M.minimumStay,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{C(!1),U(null)},className:"btn-outline btn-sm",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Update Event"})]})]})]})}),F&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Bulk Operation"}),t.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const Pe=new FormData(ue.target);let Ge=[];Q==="all"?Ge=se.map(W=>W.id):Ge=re.length>0?re:[m||392776];const Te={type:Pe.get("type"),properties:Ge,dates:[Pe.get("date")],parameters:{price:Pe.get("price")?Number(Pe.get("price")):void 0,minimumStay:Pe.get("minimumStay")?Number(Pe.get("minimumStay")):void 0,reason:Pe.get("reason"),maintenanceType:Pe.get("maintenanceType"),cleaningType:Pe.get("cleaningType"),checkInAvailable:Pe.get("checkInAvailable")==="true",checkOutAvailable:Pe.get("checkOutAvailable")==="true"}};ne(Te)},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",onChange:ue=>{document.getElementById("price-field")?.classList.add("hidden"),document.getElementById("minimum-stay-field")?.classList.add("hidden"),document.getElementById("maintenance-field")?.classList.add("hidden"),document.getElementById("cleaning-field")?.classList.add("hidden"),document.getElementById("coa-cod-field")?.classList.add("hidden");const Pe=ue.target.value;Pe==="price_update"?document.getElementById("price-field")?.classList.remove("hidden"):Pe==="minimum_stay_update"?document.getElementById("minimum-stay-field")?.classList.remove("hidden"):Pe==="maintenance"?document.getElementById("maintenance-field")?.classList.remove("hidden"):Pe==="cleaning"?document.getElementById("cleaning-field")?.classList.remove("hidden"):Pe==="coa_cod"&&document.getElementById("coa-cod-field")?.classList.remove("hidden")},children:[t.jsx("option",{value:"block_dates",children:"Block Dates"}),t.jsx("option",{value:"price_update",children:"Price Update"}),t.jsx("option",{value:"minimum_stay_update",children:"Minimum Stay Update"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"cleaning",children:"Cleaning"}),t.jsx("option",{value:"coa_cod",children:"Check-in/Check-out Control"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"propertySelection",value:"all",checked:Q==="all",onChange:ue=>J(ue.target.value),className:"mr-2"}),t.jsxs("span",{className:"text-sm",children:["All Properties (",se.length,")"]})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"propertySelection",value:"selected",checked:Q==="selected",onChange:ue=>J(ue.target.value),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),Q==="selected"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>K(se.map(ue=>ue.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),t.jsx("button",{type:"button",onClick:()=>K([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),t.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[re.length," selected"]})]}),t.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:se.map(ue=>t.jsxs("label",{className:"flex items-center mb-1",children:[t.jsx("input",{type:"checkbox",checked:re.includes(ue.id),onChange:Pe=>{Pe.target.checked?K([...re,ue.id]):K(re.filter(Ge=>Ge!==ue.id))},className:"mr-2"}),t.jsx("span",{className:"text-sm",children:ue.name})]},ue.id))})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),t.jsx("input",{name:"date",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{id:"price-field",className:"hidden",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (€)"}),t.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{id:"minimum-stay-field",className:"hidden",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),t.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{id:"maintenance-field",className:"hidden",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maintenance Type"}),t.jsx("input",{name:"maintenanceType",type:"text",placeholder:"e.g., HVAC, Plumbing, Electrical",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsxs("div",{id:"cleaning-field",className:"hidden",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cleaning Type"}),t.jsx("input",{name:"cleaningType",type:"text",placeholder:"e.g., Deep Clean, Regular Clean, Post-Construction",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),t.jsx("div",{id:"coa-cod-field",className:"hidden",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Available"}),t.jsxs("select",{name:"checkInAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Available"}),t.jsxs("select",{name:"checkOutAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason/Description"}),t.jsx("input",{name:"reason",type:"text",placeholder:"Optional reason or description",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{D(!1),J("all"),K([])},className:"btn-outline btn-sm",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Bulk Operation"})]})]})]})})]})},pC=()=>{const e=rs(),{properties:r}=Ht(V=>V.properties),[n,a]=O.useState("automations"),[o,l]=O.useState([]),[d,u]=O.useState([]),[h,p]=O.useState([]),[m,b]=O.useState(!0),[j,y]=O.useState({}),[A,P]=O.useState(null),[N,C]=O.useState(!1),[F,D]=O.useState(!1),[M,U]=O.useState(!1),[Q,J]=O.useState(!1),[re,K]=O.useState(null),[de,E]=O.useState(null),[I,H]=O.useState({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:null});O.useEffect(()=>{e(Gi())},[e]),O.useEffect(()=>{te()},[A]);const te=async()=>{b(!0);try{const fe={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},he=A?`?propertyId=${A}`:"",[pe,Ce,ue]=await Promise.all([fetch(`/automations${he}`,{headers:fe}),fetch("/automations/templates",{headers:fe}),fetch("/automations/activity?limit=50",{headers:fe})]);if(pe.ok){const Pe=await pe.json();console.log("Automations data received:",Pe),l(Pe.automations||[])}else console.error("Automations request failed:",pe.status);if(Ce.ok){const Pe=await Ce.json();console.log("Templates data received:",Pe),u(Pe.templates||[])}else console.error("Templates request failed:",Ce.status);if(ue.ok){const Pe=await ue.json();console.log("Activities data received:",Pe),p(Pe.activities||[])}else console.error("Activities request failed:",ue.status)}catch(V){console.error("Error fetching data:",V)}finally{b(!1)}},we=async V=>{y(fe=>({...fe,[`run-${V}`]:!0}));try{const fe=localStorage.getItem("token");(await fetch(`/automations/${V}/run`,{method:"POST",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"}})).ok&&await te()}catch(fe){console.error("Error running automation:",fe)}finally{y(fe=>({...fe,[`run-${V}`]:!1}))}},se=V=>{const fe=o.find(he=>he.id===V);fe&&(K(fe),U(!0))},$=V=>{const fe=o.find(he=>he.id===V);fe&&(E(fe),J(!0))},ee=()=>{H({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:A}),C(!0)},ge=async()=>{try{const V=localStorage.getItem("token");(await fetch("/automations",{method:"POST",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify(I)})).ok?(C(!1),await te()):console.error("Failed to create automation")}catch(V){console.error("Error creating automation:",V)}},Se=async V=>{y(fe=>({...fe,[`template-${V}`]:!0}));try{const fe=localStorage.getItem("token");(await fetch(`/automations/templates/${V}/create`,{method:"POST",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"}})).ok&&(await te(),D(!1))}catch(fe){console.error("Error creating from template:",fe)}finally{y(fe=>({...fe,[`template-${V}`]:!1}))}},T=V=>{switch(V){case"saft_generation":return Cl;case"siba_alerts":return z0;case"calendar_sync":return bd;default:return mp}},L=V=>{switch(V){case"saft_generation":return"bg-blue-100 text-blue-800";case"siba_alerts":return"bg-orange-100 text-orange-800";case"calendar_sync":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Y=V=>{switch(V){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"disabled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ne=V=>{switch(V){case"success":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ie=V=>new Date(V).toLocaleDateString();return m?t.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(xn,{className:"h-12 w-12 animate-spin text-green-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading automations..."})]})}):t.jsx("div",{className:"min-h-screen bg-white",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Automations"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Automate your property management workflows"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[t.jsxs("button",{onClick:()=>D(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(cp,{className:"h-4 w-4 mr-2"}),"Templates"]}),t.jsxs("button",{onClick:ee,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Create Automation"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsx(za,{properties:r,selectedId:A,onChange:P,placeholder:"All Properties"})]})})}),t.jsx("div",{className:"border-b border-gray-200 mb-6",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"automations",name:"My Automations",icon:mp},{id:"templates",name:"Templates",icon:cp},{id:"activity",name:"Activity",icon:bd}].map(V=>{const fe=V.icon;return t.jsxs("button",{onClick:()=>a(V.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${n===V.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(fe,{className:"h-4 w-4 mr-2"}),V.name]},V.id)})})}),n==="automations"&&t.jsx("div",{className:"space-y-6",children:o&&o.length>0?o.map(V=>{const fe=T(V.type);return t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(fe,{className:"h-5 w-5 text-gray-400"}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(V.type)}`,children:V.type}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(V.status)}`,children:V.status}),t.jsxs("span",{className:"text-sm text-gray-500",children:["Schedule: ",V.schedule]})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.name}),t.jsx("p",{className:"text-gray-700 mb-3",children:V.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[t.jsxs("span",{children:["Runs: ",V.runCount]}),V.lastRunAt&&t.jsxs("span",{children:["Last run: ",ie(V.lastRunAt)]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsxs("button",{onClick:()=>we(V.id),disabled:j[`run-${V.id}`],className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[j[`run-${V.id}`]?t.jsx(xn,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(J3,{className:"h-4 w-4 mr-2"}),j[`run-${V.id}`]?"Running...":"Run"]}),t.jsxs("button",{onClick:()=>se(V.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(ps,{className:"h-4 w-4 mr-2"}),"View"]}),t.jsxs("button",{onClick:()=>$(V.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(yc,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},V.id)}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(mp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No automations found"}),t.jsx("p",{className:"text-gray-500",children:"Create your first automation to get started."})]})}),n==="templates"&&t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d&&d.length>0?d.map(V=>{const fe=T(V.type);return t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fe,{className:"h-5 w-5 text-gray-400"}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(V.type)}`,children:V.type})]}),t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Template"})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.name}),t.jsx("p",{className:"text-gray-700 mb-4 flex-grow",children:V.description}),t.jsxs("button",{onClick:()=>Se(V.id),disabled:j[`template-${V.id}`],className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[j[`template-${V.id}`]?t.jsx(xn,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(Hs,{className:"h-4 w-4 mr-2"}),j[`template-${V.id}`]?"Creating...":"Use Template"]})]})},V.id)}):t.jsxs("div",{className:"col-span-full text-center py-12",children:[t.jsx(cp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates available"}),t.jsx("p",{className:"text-gray-500",children:"Templates will appear here when available."})]})})}),n==="activity"&&t.jsx("div",{className:"space-y-6",children:h&&h.length>0?h.map(V=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ne(V.status)}`,children:V.status}),t.jsx("span",{className:"text-sm text-gray-500",children:ie(V.timestamp)})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.automationName}),t.jsx("p",{className:"text-gray-700 mb-2",children:V.message}),V.details&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-800",children:V.automationId==="saft_monthly"&&V.details.saftDownloadUrl?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"SAFT-T File Generated"}),t.jsxs("p",{className:"text-gray-600",children:["Property ",V.details.propertyId," - ",V.details.year,"-",V.details.month?.toString().padStart(2,"0")]})]}),t.jsxs("button",{onClick:()=>{const fe=document.createElement("a");fe.href=V.details.saftDownloadUrl,fe.download=V.details.fileName,fe.click()},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Download SAFT-T"]})]}):t.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(V.details,null,2)})})]}),t.jsx("div",{className:"flex items-center space-x-2 ml-4",children:t.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(ps,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},V.id)):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(bd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity found"}),t.jsx("p",{className:"text-gray-500",children:"Activity logs will appear here when automations run."})]})}),N&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Automation"})}),t.jsxs("div",{className:"px-6 py-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:I.name,onChange:V=>H({...I,name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Enter automation name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:I.description,onChange:V=>H({...I,description:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Describe what this automation does"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsxs("select",{value:I.type,onChange:V=>H({...I,type:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"saft_generation",children:"SAFT-T Generation"}),t.jsx("option",{value:"siba_alerts",children:"SIBA Alerts"}),t.jsx("option",{value:"calendar_sync",children:"Calendar Sync"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),t.jsx("input",{type:"text",value:I.schedule,onChange:V=>H({...I,schedule:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),t.jsxs("select",{value:I.propertyId||"",onChange:V=>H({...I,propertyId:V.target.value?Number(V.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"All Properties"}),r&&r.map(V=>t.jsx("option",{value:V.id,children:V.name},V.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),t.jsx("textarea",{value:JSON.stringify(I.config,null,2),onChange:V=>{try{const fe=JSON.parse(V.target.value);H({...I,config:fe})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>C(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),t.jsx("button",{onClick:ge,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Create Automation"})]})]})}),F&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automation Templates"})}),t.jsx("div",{className:"px-6 py-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d&&d.length>0?d.map(V=>{const fe=T(V.type);return t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(fe,{className:"h-5 w-5 text-gray-400"}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(V.type)}`,children:V.type})]}),t.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:V.name}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:V.description}),t.jsx("button",{onClick:()=>Se(V.id),disabled:j[`template-${V.id}`],className:"w-full inline-flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j[`template-${V.id}`]?"Creating...":"Use Template"})]},V.id)}):t.jsx("div",{className:"col-span-2 text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No templates available"})})})}),t.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:t.jsx("button",{onClick:()=>D(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"})})]})}),M&&re&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const V=T(re.type);return t.jsx(V,{className:"h-6 w-6 text-gray-400"})})(),t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:re.name}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(re.type)}`,children:re.type}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(re.status)}`,children:re.status})]})}),t.jsxs("div",{className:"px-6 py-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-600",children:re.description})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Schedule"}),t.jsx("p",{className:"text-gray-600",children:re.schedule})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Run Count"}),t.jsx("p",{className:"text-gray-600",children:re.runCount})]})]}),re.lastRunAt&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Last Run"}),t.jsx("p",{className:"text-gray-600",children:ie(re.lastRunAt)})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Configuration"}),t.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 overflow-x-auto",children:JSON.stringify(re.config,null,2)})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>U(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"}),t.jsx("button",{onClick:()=>$(re.id),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Automation"})]})]})}),Q&&de&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const V=T(de.type);return t.jsx(V,{className:"h-6 w-6 text-gray-400"})})(),t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Edit ",de.name]})]})}),t.jsxs("div",{className:"px-6 py-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:de.name,onChange:V=>E({...de,name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:de.description,onChange:V=>E({...de,description:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),t.jsx("input",{type:"text",value:de.schedule,onChange:V=>E({...de,schedule:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:de.status,onChange:V=>E({...de,status:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"paused",children:"Paused"}),t.jsx("option",{value:"disabled",children:"Disabled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),t.jsx("textarea",{value:JSON.stringify(de.config,null,2),onChange:V=>{try{const fe=JSON.parse(V.target.value);E({...de,config:fe})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>J(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),t.jsx("button",{onClick:async()=>{try{const V=localStorage.getItem("token");(await fetch(`/automations/${de.id}`,{method:"PUT",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify(de)})).ok?(J(!1),await te()):console.error("Failed to update automation")}catch(V){console.error("Error updating automation:",V)}},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"})]})]})})]})})},gC=()=>{const{t:e}=Vr(),{user:r}=Ht(Q=>Q.auth);xi();const[n,a]=O.useState(()=>{const Q=new Date;return(Q.getMonth()===0||Q.getDate()<=7)&&Q.getMonth()===0?Q.getFullYear()-1:Q.getFullYear()}),[o,l]=O.useState(()=>{const Q=new Date,J=Q.getDate()<=7;return Q.getMonth()===0&&J?12:J?Q.getMonth():Q.getMonth()+1}),[d,u]=O.useState(""),[h,p]=O.useState(null),[m,b]=O.useState([]),[j,y]=O.useState(!1),[A,P]=O.useState(null),[N,C]=O.useState(""),F=Array.from({length:5},(Q,J)=>new Date().getFullYear()-2+J),D=[{value:1,name:e("saft.month.january")},{value:2,name:e("saft.month.february")},{value:3,name:e("saft.month.march")},{value:4,name:e("saft.month.april")},{value:5,name:e("saft.month.may")},{value:6,name:e("saft.month.june")},{value:7,name:e("saft.month.july")},{value:8,name:e("saft.month.august")},{value:9,name:e("saft.month.september")},{value:10,name:e("saft.month.october")},{value:11,name:e("saft.month.november")},{value:12,name:e("saft.month.december")}];O.useEffect(()=>{(async()=>{try{let J=[];if(r?.role==="accountant"){console.log("📊 Accountant: Fetching companies from assigned properties");try{const K=await Ft.get("/admin/accountants/companies");if(K.success&&K.companies&&K.companies.length>0){console.log("✅ Fetched accountant companies:",K.companies);const de=K.companies.map((E,I)=>({_id:E.ownerId,name:E.ownerName,email:"",phone:"",role:"owner",isVerified:!0,hasApiKeys:!1,apiKeysActive:!1,companies:[{name:E.name,nif:E.nif}],createdAt:"",updatedAt:""}));b(de),console.log("👤 Accountant companies set:",de),console.log("📊 Total companies available in dropdown:",de.reduce((E,I)=>E+(I.companies?.length||0),0)),console.log("📋 Dropdown options will be:",de.flatMap(E=>E.companies?.map(I=>`${I.name} (${I.nif}) - ${E.name}`)));return}else{console.log("⚠️ No companies found for accountant"),b([]);return}}catch(K){console.error("❌ Failed to fetch accountant companies:",K),console.error("❌ Error details:",K.response?.data),C("Failed to fetch company information. Please ensure: 1) Properties are assigned to you, 2) Property owners have company information added."),b([]);return}}try{J=await nm(),console.log("✅ Admin: Fetched all owners successfully")}catch{console.log("ℹ️ Not admin or getAllOwners failed, using current user companies only")}let re=r?.companies;console.log("📋 Initial companies from Redux:",re);try{const K=await Pv.getUserProfile();re=K.companies,console.log("✅ Fetched user profile companies from API:",re),console.log("📊 User profile full data:",K)}catch(K){console.error("⚠️ Failed to fetch user profile:",K),console.log("⚠️ Using Redux companies as fallback")}if(r?.role!=="admin"||J.length===0)if(re&&re.length>0){const K={_id:r?.id||"current-user",name:r?.name||"Current User",email:r?.email||"",phone:r?.phone,role:r?.role||"user",isVerified:r?.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:re,createdAt:r?.createdAt||new Date().toISOString(),updatedAt:r?.updatedAt||new Date().toISOString()};b([K]),console.log("✅ Owner user: Using own companies only")}else b([]),console.log("⚠️ No companies found for current user");else{if(re&&re.length>0){const K={_id:r?.id||"current-user",name:r?.name||"Current User (Me)",email:r?.email||"",phone:r?.phone,role:r?.role||"user",isVerified:r?.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:re,createdAt:r?.createdAt||new Date().toISOString(),updatedAt:r?.updatedAt||new Date().toISOString()};J.unshift(K)}b(J),console.log("✅ Admin: Final owners list with all users")}console.log("📋 Total companies available:",m.length>0?m.reduce((K,de)=>K+(de.companies?.length||0),0):0)}catch(J){if(console.error("❌ Error in fetchOwners:",J),r?.companies&&r.companies.length>0){const re={_id:r.id||"current-user",name:r.name||"Current User",email:r.email||"",phone:r.phone,role:r.role||"user",isVerified:r.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:r.companies,createdAt:r.createdAt||new Date().toISOString(),updatedAt:r.updatedAt||new Date().toISOString()};b([re])}}})()},[r]),O.useEffect(()=>{if(h){const Q=m.find(J=>J._id===h.ownerId);if(Q&&Q.companies&&Q.companies[h.companyIndex]){const J=Q.companies[h.companyIndex];u(J.nif)}}},[h,m]);const M=async()=>{if(!d){C("Please select a company or enter invoicing VAT ID");return}y(!0),C(""),P(null);try{const Q=new URLSearchParams({year:n.toString(),month:o.toString(),invoicing_nif:d}),J=await Ft.get(`/saft/get?${Q}`);P(J)}catch(Q){console.error("SAFT retrieval error:",Q);const J=Q?.response?.data?.message||Q?.message||"";Q?.response?.status===404||J.includes("not found")||J.includes("Invalid response")?C(`SAFT file not generated for ${D.find(re=>re.value===o)?.name} ${n}. Please try selecting an earlier month.`):Q?.response?.status===400?C(J||"Invalid request. Please check your company selection."):Q?.response?C(J||"Error retrieving SAFT file. Please try again."):C("Network error occurred. Please check your connection.")}finally{y(!1)}},U=()=>{if(A?.saft){const Q=atob(A.saft),J=new Array(Q.length);for(let I=0;I<Q.length;I++)J[I]=Q.charCodeAt(I);const re=new Uint8Array(J),K=new Blob([re],{type:"application/xml"}),de=window.URL.createObjectURL(K),E=document.createElement("a");E.href=de,E.download=`SAFT-T_${n}_${o}.xml`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(de)}};return t.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(d0,{className:"w-8 h-8 text-blue-600"}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("saft.title")})]}),t.jsx("p",{className:"text-gray-600",children:e("saft.description")})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("saft.companySelection")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("select",{value:h?`${h.ownerId}-${h.companyIndex}`:"",onChange:Q=>{if(console.log("🔄 Dropdown changed, value:",Q.target.value),Q.target.value){const J=Q.target.value.lastIndexOf("-"),re=Q.target.value.substring(0,J),K=parseInt(Q.target.value.substring(J+1));console.log("📝 Setting selected company:",{ownerId:re,companyIndex:K}),p({ownerId:re,companyIndex:K})}else console.log("❌ Clearing selected company"),p(null),u("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:e("saft.selectCompany")}),m.map(Q=>Q.companies?.map((J,re)=>{const K=`${Q._id}-${re}`;return t.jsxs("option",{value:K,children:[J.name," (",J.nif,") - ",Q.name]},K)}))]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("saft.enterNifManually")}),t.jsx("input",{type:"text",value:d,onChange:Q=>{u(Q.target.value),p(null)},placeholder:e("saft.nifPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(on,{className:"w-4 h-4 inline mr-2"}),e("saft.year")]}),t.jsx("select",{value:n,onChange:Q=>a(parseInt(Q.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:F.map(Q=>t.jsx("option",{value:Q,children:Q},Q))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("saft.month")}),t.jsx("select",{value:o,onChange:Q=>l(parseInt(Q.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:D.map(Q=>t.jsx("option",{value:Q.value,children:Q.name},Q.value))})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{onClick:()=>M(),disabled:j||!d,className:"w-full md:w-auto px-6 py-3 bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2 border border-blue-200 shadow-sm hover:shadow-md transition-all duration-300",children:j?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{children:e("saft.retrieving")})]}):t.jsxs(t.Fragment,{children:[t.jsx(d0,{className:"w-4 h-4 opacity-70"}),t.jsx("span",{children:e("saft.retrieveSaft")})]})})}),N&&t.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start space-x-3",children:[t.jsx(Ki,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:e("saft.saftNotAvailable")}),t.jsx("p",{className:"text-sm text-amber-800",children:N}),N.includes("not generated")&&t.jsx("p",{className:"text-xs text-amber-700 mt-2",children:e("saft.tipNotGenerated")})]})]}),A&&t.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-start space-x-3",children:[t.jsx(Ws,{className:"w-5 h-5 text-green-500 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:e("saft.retrievedSuccessfully")}),t.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[t.jsxs("p",{children:[t.jsxs("strong",{children:[e("saft.generated"),":"]})," ",new Date(A.generated).toLocaleString()]}),t.jsxs("p",{children:[t.jsxs("strong",{children:[e("saft.sent"),":"]})," ",new Date(A.sent).toLocaleString()]})]}),t.jsxs("button",{onClick:()=>U(),className:"mt-3 inline-flex items-center space-x-2 px-4 py-2 bg-green-500/20 text-gray-900 rounded-md hover:bg-green-500/30 border border-green-200 shadow-sm hover:shadow-md transition-all duration-300",children:[t.jsx(Oo,{className:"w-4 h-4 opacity-70"}),t.jsx("span",{children:e("saft.downloadSaftFile")})]})]})]})]}),t.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:e("saft.aboutSaft")}),t.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:e("saft.aboutDescription1")}),t.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mt-2",children:e("saft.aboutDescription2")})]})]})},xC=async e=>(await Ft.get(`/api/properties/${e}`)).data,yC=()=>{const{propertyId:e}=E0(),r=xi(),[n,a]=O.useState(null),[o,l]=O.useState(!0),[d,u]=O.useState("");O.useEffect(()=>{e&&h()},[e]);const h=async()=>{if(e){l(!0),u("");try{const m=await xC(e);a(m)}catch(m){u(m.message||"Failed to fetch property details")}finally{l(!1)}}},p=()=>{r(-1)};return o?t.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(K3,{className:"w-6 h-6 animate-spin text-blue-600"}),t.jsx("span",{className:"text-lg text-gray-600",children:"Loading property details..."})]})})}):d?t.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:p,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[t.jsx(gc,{className:"w-4 h-4"}),t.jsx("span",{children:"Back"})]})}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Ki,{className:"w-5 h-5 text-red-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error Loading Property"}),t.jsx("p",{className:"text-red-700 mt-2",children:d}),t.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Try Again"})]})]})})]}):n?t.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:p,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[t.jsx(gc,{className:"w-4 h-4"}),t.jsx("span",{children:"Back"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(ms,{className:"w-8 h-8 text-blue-600"}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.property_name})]}),t.jsxs("p",{className:"text-gray-600",children:["Property ID: ",n.id]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ms,{className:"w-5 h-5 mr-2 text-blue-600"}),"Basic Information"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property Name"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.property_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property ID"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.activated==="1"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.activated==="1"?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner Email"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.owner})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ku,{className:"w-5 h-5 mr-2 text-blue-600"}),"Location"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.cp})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.localidade})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coordinates"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[n.lat,", ",n.lon]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Zb,{className:"w-5 h-5 mr-2 text-blue-600"}),"Tax Information"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIF (Tax ID)"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.nif})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Invoicing NIF"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.invoicing_nif})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Order"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.seforder})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Code"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.sefcode})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(on,{className:"w-5 h-5 mr-2 text-blue-600"}),"Check-in/Check-out Times"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-in Time"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[n.default_checkin,":00"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-out Time"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[n.default_checkout,":00"]})]})]})]})]}),t.jsxs("div",{className:"mt-8 flex space-x-4",children:[t.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Data"}),t.jsx("button",{onClick:()=>r(`/saft?property=${n.id}`),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Generate SAFT-T"})]})]}):t.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Property Not Found"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"The requested property could not be found."})]})})},bC=({onClose:e})=>{const[r,n]=O.useState([]),[a,o]=O.useState(""),[l,d]=O.useState(""),[u,h]=O.useState(""),[p,m]=O.useState(null),[b,j]=O.useState(!1),[y,A]=O.useState("");O.useEffect(()=>{P();const D=new Date,M=new Date(D.getFullYear(),D.getMonth(),1),U=new Date(D.getFullYear(),D.getMonth()+1,0);d(M.toISOString().split("T")[0]),h(U.toISOString().split("T")[0])},[]);const P=async()=>{try{const D=await Zu();n(D)}catch(D){console.error("Error fetching properties:",D)}},N=async()=>{if(!a||!l||!u){A("Please select a property and date range");return}j(!0),A("");try{const D=await x2(parseInt(a),l,u);m(D)}catch(D){A(D.response?.data?.message||"Error generating statement")}finally{j(!1)}},C=D=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(D),F=()=>{if(!p)return;const D=[["Property Statement",""],["Property ID",p.property.id],["Property Name",p.property.name],["Owner",p.property.owner],["Period",`${p.period.startDate} to ${p.period.endDate}`],[""],["Calculations","Amount (€)"],["Gross Amount",p.calculations.grossAmount.toFixed(2)],["Portal Commission (15%)",p.calculations.portalCommission.toFixed(2)],["Cleaning Fee (€75 × invoices)",p.calculations.cleaningFee.toFixed(2)],["Management Commission",p.calculations.managementCommission.toFixed(2)],["Final Owner Amount",p.calculations.finalOwnerAmount.toFixed(2)],[""],["Invoice Count",p.invoiceCount],[""],["Invoices",""],["Invoice ID","Name","Value (€)","Date","Series"],...p.invoices.map(J=>[J.id,J.name,J.value.toFixed(2),J.date,J.series])].map(J=>J.join(",")).join(`
`),M=new Blob([D],{type:"text/csv"}),U=window.URL.createObjectURL(M),Q=document.createElement("a");Q.href=U,Q.download=`owner-statement-${p.property.id}-${p.period.startDate}-${p.period.endDate}.csv`,Q.click(),window.URL.revokeObjectURL(U)};return t.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Statement"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and view property owner financial statements"})]}),t.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Property"}),t.jsxs("select",{value:a,onChange:D=>o(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Choose a property..."}),r.map(D=>t.jsxs("option",{value:D.id,children:[D.name," (ID: ",D.id,") - ",D.isAdminOwned?"Admin":D.owner?.name||"Unassigned"]},D.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Start Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",value:l,onChange:D=>d(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx(on,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"End Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",value:u,onChange:D=>h(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx(on,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Management Commission Rate (Ignored for admin properties)"}),t.jsxs("select",{value:p?.property?.isAdminOwned?"0":"25",disabled:p?.property?.isAdminOwned,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${p?.property?.isAdminOwned?"bg-gray-100 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"0",children:"0% (Admin Properties)"}),t.jsx("option",{value:"25",children:"25% (Owner Properties)"})]}),p?.property?.isAdminOwned&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin-owned property (0% commission)"}),!p?.property?.isAdminOwned&&p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Owner-owned property (25% commission)"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:N,disabled:b||!a||!l||!u,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:b?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):t.jsxs(t.Fragment,{children:[t.jsx(Cl,{className:"w-4 h-4 mr-2"}),"Generate Statements"]})})})]}),y&&t.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-red-600",children:y})})]}),p&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Owner Statement Calculation"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:"Calculation Base:"}),t.jsx("span",{className:"font-semibold",children:"Invoices"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:"Gross Amount:"}),t.jsx("span",{className:"font-semibold",children:C(p.calculations.grossAmount)})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:"Portal Commission (15%):"}),t.jsxs("span",{className:"font-semibold text-red-600",children:["-",C(p.calculations.portalCommission)]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsxs("span",{className:"text-gray-600 font-medium",children:["Cleaning Fee (€75 × ",p.invoiceCount,"):"]}),t.jsxs("span",{className:"font-semibold text-red-600",children:["-",C(p.calculations.cleaningFee)]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsxs("span",{className:"text-gray-600 font-medium",children:["Management Commission (",p.property.isAdminOwned?"0%":"25%","):"]}),t.jsxs("span",{className:"font-semibold text-red-600",children:["-",C(p.calculations.managementCommission)]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:"Additional Fees:"}),t.jsxs("span",{className:"font-semibold text-red-600",children:["-",C(0)]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[t.jsx("span",{className:"text-gray-600 font-medium",children:"Expenses:"}),t.jsxs("span",{className:"font-semibold text-red-600",children:["-",C(0)]})]}),t.jsxs("div",{className:"flex justify-between items-center py-3 bg-green-50 rounded-lg px-4",children:[t.jsx("span",{className:"text-green-600 font-bold text-lg",children:"Final Owner Amount:"}),t.jsx("span",{className:"text-green-600 font-bold text-lg",children:C(p.calculations.finalOwnerAmount)})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Property Name:"}),t.jsx("span",{className:"font-semibold",children:p.property.name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Property ID:"}),t.jsx("span",{className:"font-semibold",children:p.property.id})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Owner:"}),t.jsx("span",{className:"font-semibold",children:p.property.owner})]})]})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Period:"}),t.jsxs("span",{className:"font-semibold",children:[p.period.startDate," - ",p.period.endDate]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Invoice Count:"}),t.jsx("span",{className:"font-semibold",children:p.invoiceCount})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Property Type:"}),t.jsx("span",{className:"font-semibold",children:p.property.isAdminOwned?"Admin Property":"Owner Property"})]})]})})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:F,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})]})})},vC=({onSuccess:e,onCancel:r})=>{const{t:n}=Vr(),[a,o]=O.useState({name:"",email:"",phone:"",hostkitApiId:"",hostkitApiKey:"",hostkitApiSecret:"",password:"",role:"owner",companies:[{name:"",nif:""}]}),[l,d]=O.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",amenities:"WiFi, Kitchen, Pool, Parking"}),[u,h]=O.useState(!1),[p,m]=O.useState(!1),[b,j]=O.useState(""),[y,A]=O.useState([]),[P,N]=O.useState(!1),[C,F]=O.useState(!1),[D,M]=O.useState(!1),[U,Q]=O.useState([]),[J,re]=O.useState([]),[K,de]=O.useState(!1),[E,I]=O.useState(!1),[H,te]=O.useState([]),[we,se]=O.useState(!1),$=()=>{o(he=>({...he,companies:[...he.companies||[],{name:"",nif:""}]}))},ee=he=>{o(pe=>({...pe,companies:pe.companies?.filter((Ce,ue)=>ue!==he)||[]}))},ge=(he,pe,Ce)=>{o(ue=>({...ue,companies:ue.companies?.map((Pe,Ge)=>Ge===he?{...Pe,[pe]:Ce}:Pe)||[]}))},Se=()=>{te(he=>[...he,{hostkitId:"",hostkitApiKey:"",hostawayId:"",fetched:!1}])},T=he=>{te(pe=>pe.filter((Ce,ue)=>ue!==he))},L=(he,pe,Ce)=>{te(ue=>ue.map((Pe,Ge)=>Ge===he?{...Pe,[pe]:Ce}:Pe))},Y=async()=>{se(!0);for(let he=0;he<H.length;he++){const pe=H[he];if(!pe.hostawayId){or.error(`Property ${he+1}: Hostaway ID is required`);continue}try{const Ce=await Ft.get(`/property-management/fetch-hostaway/${pe.hostawayId}`);if(Ce.success&&Ce.data){const ue=Ce.data,Pe=[ue.address?.city,ue.address?.country].filter(Boolean),Ge=Pe.length>0?Pe.join(", "):ue.address?.full||"";te(Te=>Te.map((W,He)=>He===he?{...W,fetched:!0,data:{id:pe.hostawayId,name:ue.name,address:Ge,bedrooms:ue.bedrooms,bathrooms:ue.bathrooms,maxGuests:ue.accommodates,type:ue.propertyType||"Apartment",hostkitId:pe.hostkitId}}:W)),or.success(`Property ${he+1}: ${ue.name} fetched successfully!`)}}catch(Ce){console.error(`Error fetching property ${he+1}:`,Ce),or.error(`Property ${he+1}: Failed to fetch details`)}}se(!1)};O.useEffect(()=>{a.role==="accountant"&&(async()=>{try{const pe=await Zu();re(pe)}catch(pe){console.error("Error fetching properties:",pe)}})()},[a.role]);const ne=async he=>{he.preventDefault(),m(!0),j("");try{console.log("Creating user with data:",a);const pe=a.companies?.filter(Pe=>Pe.name.trim()!==""&&Pe.nif.trim()!=="")||[],Ce={...a,companies:pe,...a.role==="accountant"&&U.length>0&&{assignedProperties:U}},ue=await K0(Ce);if(console.log("User created successfully:",ue),!ue||!ue._id)throw new Error("Invalid response from createOwner API");if(H.length>0&&a.role==="owner"){const Pe=H.filter(Ge=>Ge.fetched&&Ge.data);if(Pe.length>0){console.log(`Creating ${Pe.length} properties for owner:`,ue._id);for(const Ge of Pe)try{const Te={...Ge.data,hostkitApiKey:Ge.hostkitApiKey,owner:ue._id};console.log("Creating property:",Te),await J0(Te),console.log("✅ Property created:",Ge.data.name)}catch(Te){console.error("❌ Error creating property:",Te),or.error(`Failed to create property: ${Ge.data?.name||"Unknown"}`)}or.success(`${Pe.length} ${Pe.length===1?"property":"properties"} created successfully!`)}}e()}catch(pe){console.error("Error creating owner:",pe),j(pe.response?.data?.message||pe.message||"Failed to create owner")}finally{m(!1)}},ie=he=>{o(pe=>({...pe,[he.target.name]:he.target.value}))},V=he=>{Q(he?J.map(pe=>pe._id):[])},fe=(he,pe)=>{Q(pe?Ce=>[...Ce,he]:Ce=>Ce.filter(ue=>ue!==he))};return t.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[b&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",name:"name",value:a.name,onChange:ie,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${a.role==="accountant"?"accountant":"owner"} name`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:a.email,onChange:ie,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),t.jsxs("select",{name:"role",value:a.role,onChange:he=>o(pe=>({...pe,role:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"owner",children:"Owner"}),t.jsx("option",{value:"accountant",children:"Accountant"})]})]}),a.role==="owner"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Information (for SAFT)"}),t.jsxs("button",{type:"button",onClick:$,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 transition-all duration-300 border border-blue-200 shadow-sm hover:shadow-md",children:[t.jsx(Hs,{className:"h-3 w-3 opacity-70"}),"Add Company"]})]}),a.companies?.map((he,pe)=>t.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Company ",pe+1]}),a.companies&&a.companies.length>1&&t.jsxs("button",{type:"button",onClick:()=>ee(pe),className:"flex items-center gap-1 px-2 py-1 text-sm bg-red-500/20 text-gray-900 rounded-md hover:bg-red-500/30 transition-all duration-300 border border-red-200 shadow-sm hover:shadow-md",children:[t.jsx(c0,{className:"h-4 w-4 opacity-70"}),"Remove"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),t.jsx("input",{type:"text",value:he.name,onChange:Ce=>ge(pe,"name",Ce.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIF *"}),t.jsx("input",{type:"text",value:he.nif,onChange:Ce=>ge(pe,"nif",Ce.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter NIF number"})]})]})]},pe))]}),a.role==="owner"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Properties to Create"}),t.jsxs("button",{type:"button",onClick:Se,className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-500/20 text-gray-900 rounded-md hover:bg-green-500/30 transition-all duration-300 border border-green-200 shadow-sm hover:shadow-md",children:[t.jsx(Hs,{className:"h-3 w-3 opacity-70"}),n("admin.addProperty")]})]}),H.map((he,pe)=>t.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Property ",pe+1]}),t.jsxs("button",{type:"button",onClick:()=>T(pe),className:"flex items-center gap-1 px-2 py-1 text-sm bg-red-500/20 text-gray-900 rounded-md hover:bg-red-500/30 transition-all duration-300 border border-red-200 shadow-sm hover:shadow-md",children:[t.jsx(c0,{className:"h-4 w-4 opacity-70"}),"Remove"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID"}),t.jsx("input",{type:"text",value:he.hostkitId,onChange:Ce=>L(pe,"hostkitId",Ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12602"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key"}),t.jsx("input",{type:"password",value:he.hostkitApiKey,onChange:Ce=>L(pe,"hostkitApiKey",Ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter API Key"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway ID *"}),t.jsx("input",{type:"text",value:he.hostawayId,onChange:Ce=>L(pe,"hostawayId",Ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"414661"})]})]}),he.fetched&&he.data&&t.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Ws,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{className:"font-semibold text-green-900",children:he.data.name})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Address:"})," ",he.data.address]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Type:"})," ",he.data.type]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Bedrooms:"})," ",he.data.bedrooms]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Bathrooms:"})," ",he.data.bathrooms]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Max Guests:"})," ",he.data.maxGuests]})]})]})]},pe)),H.length>0&&t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:Y,disabled:we,className:"flex items-center gap-2 px-4 py-2 bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-300 border border-blue-200 shadow-sm hover:shadow-md",children:we?t.jsxs(t.Fragment,{children:[t.jsx(xn,{className:"h-4 w-4 animate-spin"}),"Fetching..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Oo,{className:"h-4 w-4"}),"Fetch All Properties"]})})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:C?"text":"password",name:"password",value:a.password,onChange:ie,className:"w-full px-3 py-2 pr-12 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter password for this ${a.role==="accountant"?"accountant":"owner"}`}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>F(!C),children:C?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),a.role==="accountant"&&t.jsx("div",{className:"border-t pt-4 mt-6",children:t.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Assign Properties to Accountant"}),t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:U.length===J.length&&J.length>0,onChange:he=>V(he.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsxs("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-medium text-gray-700",children:["Select All Properties (",J.length," available)"]})]}),t.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:J.map(he=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`property-${he._id}`,checked:U.includes(he._id),onChange:pe=>fe(he._id,pe.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsxs("label",{htmlFor:`property-${he._id}`,className:"ml-2 text-sm text-gray-700",children:[he.name," (ID: ",he.id,")"]})]},he._id))}),U.length>0&&t.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["✓ ",U.length," property(ies) selected"]})]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 text-sm font-medium bg-blue-500/20 text-gray-900 border border-blue-200 rounded-md hover:bg-blue-500/30 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-50 shadow-sm hover:shadow-md transition-all duration-300",children:p?"Creating...":`Create ${a.role==="accountant"?"Accountant":"Owner"}${H.length>0?` & ${H.length} ${H.length===1?"Property":"Properties"}`:""}`})]})]})},wC=({owner:e,onSuccess:r,onCancel:n})=>{const[a,o]=O.useState({name:e.name,email:e.email,phone:e.phone||"",role:e.role,companies:e.companies||[{name:"",nif:""}]}),[l,d]=O.useState(!1),[u,h]=O.useState(""),p=()=>{o(A=>({...A,companies:[...A.companies||[],{name:"",nif:""}]}))},m=A=>{o(P=>({...P,companies:P.companies?.filter((N,C)=>C!==A)||[]}))},b=(A,P,N)=>{o(C=>({...C,companies:C.companies?.map((F,D)=>D===A?{...F,[P]:N}:F)||[]}))},j=A=>{const{name:P,value:N}=A.target;o(C=>({...C,[P]:N}))},y=async A=>{A.preventDefault(),d(!0),h("");try{const P=a.companies?.filter(F=>F.name.trim()!==""&&F.nif.trim()!=="")||[],N={...a,companies:P},{updateOwner:C}=await ja(async()=>{const{updateOwner:F}=await Promise.resolve().then(()=>Lk);return{updateOwner:F}},void 0);await C(e._id,N),console.log("Owner updated successfully"),r()}catch(P){console.error("Error updating owner:",P),h(P.message||"Failed to update owner")}finally{d(!1)}};return t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",name:"name",value:a.name,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter owner name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:a.email,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Information (for SAFT)"}),t.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 transition-all duration-300 border border-blue-200 shadow-sm hover:shadow-md",children:[t.jsx(Hs,{className:"h-3 w-3 opacity-70"}),"Add Company"]})]}),a.companies?.map((A,P)=>t.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Company ",P+1]}),a.companies&&a.companies.length>1&&t.jsxs("button",{type:"button",onClick:()=>m(P),className:"flex items-center gap-1 px-2 py-1 text-sm bg-red-500/20 text-gray-900 rounded-md hover:bg-red-500/30 transition-all duration-300 border border-red-200 shadow-sm hover:shadow-md",children:[t.jsx(c0,{className:"h-4 w-4 opacity-70"}),"Remove"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),t.jsx("input",{type:"text",value:A.name,onChange:N=>b(P,"name",N.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIF *"}),t.jsx("input",{type:"text",value:A.nif,onChange:N=>b(P,"nif",N.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter NIF number"})]})]})]},P))]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-medium bg-blue-500/20 text-gray-900 border border-blue-200 rounded-md hover:bg-blue-500/30 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-50 shadow-sm hover:shadow-md transition-all duration-300",children:l?"Updating...":"Update Owner"})]})]})},NC=({owners:e,onSuccess:r,onCancel:n})=>{const[a,o]=O.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",amenities:["WiFi","Kitchen","Pool","Parking"],owner:""}),[l,d]=O.useState("WiFi, Kitchen, Pool, Parking"),[u,h]=O.useState(!1),[p,m]=O.useState(""),[b,j]=O.useState([]),[y,A]=O.useState(!1),[P,N]=O.useState(!1),[C,F]=O.useState(!1),[D,M]=O.useState(!1),U=async K=>{K.preventDefault(),h(!0),m("");try{const de={...a,id:parseInt(a.id)||0,amenities:Array.isArray(a.amenities)?a.amenities:a.amenities.split(",").map(H=>H.trim()).filter(H=>H)};console.log("Creating property with data:",de);const{createProperty:E}=await ja(async()=>{const{createProperty:H}=await Promise.resolve().then(()=>Tk);return{createProperty:H}},void 0),I=await E(de);if(console.log("Property created successfully:",I),b.length>0)try{A(!0);const{uploadPropertyImages:H}=await ja(async()=>{const{uploadPropertyImages:te}=await Promise.resolve().then(()=>QA);return{uploadPropertyImages:te}},void 0);await H(de.id.toString(),b),console.log("✅ Images uploaded successfully for new property:",de.id),j([])}catch(H){console.error("❌ Error uploading images:",H)}finally{A(!1)}r()}catch(de){m(de.message||"Failed to create property")}finally{h(!1)}},Q=K=>{const{name:de,value:E}=K.target;o(I=>({...I,[de]:de==="bedrooms"||de==="bathrooms"||de==="maxGuests"?parseInt(E)||0:E}))},J=K=>{K.target.files&&j(Array.from(K.target.files))},re=async()=>{if(!a.id){or.error("Please enter a Hostaway Property ID first");return}F(!0),m(""),M(!1);try{const K=await Ft.get(`/property-management/fetch-hostaway/${a.id}`);if(K.success&&K.data){const de=K.data,E=[de.address?.city,de.address?.country].filter(Boolean),I=E.length>0?E.join(", "):de.address?.full||a.address;o(H=>({...H,name:de.name||H.name,address:I,bedrooms:de.bedrooms||H.bedrooms,bathrooms:de.bathrooms||H.bathrooms,maxGuests:de.accommodates||H.maxGuests,type:de.propertyType||H.type})),M(!0),or.success("Property details fetched successfully from Hostaway!"),console.log("✅ Fetched Hostaway property details:",de)}}catch(K){console.error("❌ Error fetching from Hostaway:",K);const de=K.response?.data?.message||K.message||"Failed to fetch property details from Hostaway";m(de),or.error(de)}finally{F(!1)}};return t.jsxs("form",{onSubmit:U,className:"space-y-4",children:[p&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:p}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway Property ID *"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",name:"id",value:a.id,onChange:Q,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 392777",required:!0}),t.jsx("button",{type:"button",onClick:re,disabled:C||!a.id,className:"px-4 py-2 bg-blue-500/20 text-gray-900 rounded-md hover:bg-blue-500/30 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap transition-all duration-300 border border-blue-200 shadow-sm hover:shadow-md",children:C?t.jsxs(t.Fragment,{children:[t.jsx(xn,{className:"h-4 w-4 animate-spin"}),"Fetching..."]}):D?t.jsxs(t.Fragment,{children:[t.jsx(Ws,{className:"h-4 w-4"}),"Fetched"]}):t.jsxs(t.Fragment,{children:[t.jsx(Oo,{className:"h-4 w-4"}),"Fetch from Hostaway"]})})]}),D&&t.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center gap-1",children:[t.jsx(Ws,{className:"h-4 w-4"}),"Property details loaded from Hostaway. Review and edit if needed."]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),t.jsxs("select",{name:"type",value:a.type,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"Apartment",children:"Apartment"}),t.jsx("option",{value:"House",children:"House"}),t.jsx("option",{value:"Villa",children:"Villa"}),t.jsx("option",{value:"Condominium",children:"Condominium"}),t.jsx("option",{value:"Penthouse",children:"Penthouse"}),t.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),t.jsx("input",{type:"text",name:"name",value:a.name,onChange:Q,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),t.jsxs("select",{name:"owner",value:a.owner,onChange:Q,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select Owner"}),t.jsx("option",{value:"admin",children:"Admin"}),e.map(K=>t.jsx("option",{value:K._id,children:K.name},K._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),t.jsx("input",{type:"text",name:"address",value:a.address,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property address",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),t.jsx("input",{type:"number",name:"bedrooms",value:a.bedrooms,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),t.jsx("input",{type:"number",name:"bathrooms",value:a.bathrooms,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),t.jsx("input",{type:"number",name:"maxGuests",value:a.maxGuests,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),t.jsx("input",{type:"text",name:"hostkitId",value:a.hostkitId,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"e.g., 10030",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:P?"text":"password",name:"hostkitApiKey",value:a.hostkitApiKey,onChange:Q,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",required:!0}),t.jsx("button",{type:"button",onClick:()=>N(!P),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:P?t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):t.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:J,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border file:border-blue-200 file:text-sm file:font-semibold file:bg-blue-500/20 file:text-gray-900 hover:file:bg-blue-500/30 file:shadow-sm hover:file:shadow-md file:transition-all file:duration-300"}),b.length>0&&t.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[b.length," image(s) selected"]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u||y,className:"px-4 py-2 text-sm font-medium bg-blue-500/20 text-gray-900 border border-blue-200 rounded-md hover:bg-blue-500/30 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-50 shadow-sm hover:shadow-md transition-all duration-300",children:u?"Creating...":y?"Uploading Images...":"Create Property"})]})]})},jC=({accountant:e,availableProperties:r,onUpdate:n,onCancel:a})=>{const{t:o}=Vr(),[l,d]=O.useState({name:e.name,email:e.email,phone:e.phone||"",password:""}),[u,h]=O.useState(e.assignedProperties.map(C=>C._id)),[p,m]=O.useState(!1),[b,j]=O.useState(!1),y=async C=>{C.preventDefault(),j(!0);try{const F={name:l.name,email:l.email,phone:l.phone,...l.password&&{password:l.password},assignedProperties:u};await n(F)}catch(F){console.error("Error updating accountant:",F)}finally{j(!1)}},A=C=>{d(F=>({...F,[C.target.name]:C.target.value}))},P=C=>{h(C?r.map(F=>F._id):[])},N=(C,F)=>{h(F?D=>[...D,C]:D=>D.filter(M=>M!==C))};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[o("admin.edit")," ",o("admin.accountant")]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update accountant details and property assignments"})]}),t.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:t.jsx(yn,{className:"h-6 w-6"})})]})}),t.jsx("div",{className:"p-6",children:t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(wa,{className:"h-5 w-5 mr-2 text-blue-600"}),"Accountant Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),t.jsx("input",{type:"text",name:"name",value:l.name,onChange:A,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter accountant name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:l.email,onChange:A,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter email address"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter phone number"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(r2,{className:"h-5 w-5 mr-2 text-green-600"}),"Security Settings"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password (Leave blank to keep current)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:p?"text":"password",name:"password",value:l.password,onChange:A,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter new password (optional)"}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!p),children:p?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ms,{className:"h-5 w-5 mr-2 text-purple-600"}),"Property Assignment"]}),t.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:u.length===r.length&&r.length>0,onChange:C=>P(C.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-semibold text-gray-700",children:"Select All Properties"})]}),t.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[r.length," available"]})]}),t.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-gray-200 rounded-lg p-4 bg-white",children:r.map(C=>t.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:[t.jsx("input",{type:"checkbox",id:`property-${C._id}`,checked:u.includes(C._id),onChange:F=>N(C._id,F.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsxs("label",{htmlFor:`property-${C._id}`,className:"ml-3 text-sm text-gray-700 flex-1",children:[t.jsx("div",{className:"font-medium",children:C.name||C.title||"Unnamed Property"}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",C.id||C._id,C.owner&&t.jsxs("span",{className:"ml-2",children:["• Owner: ",C.owner.name]})]})]})]},C._id))}),u.length>0&&t.jsx("div",{className:"mt-4 flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center text-sm text-green-700 font-medium",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.length," property(ies) selected"]})})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:b,className:"px-6 py-3 text-sm font-semibold bg-blue-500/20 text-gray-900 border border-blue-200 rounded-lg hover:bg-blue-500/30 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-sm hover:shadow-md",children:b?t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2"}),"Updating..."]}):"Update Accountant"})]})]})})]})})},kC=()=>{const{user:e}=Ht(je=>je.auth),{t:r}=Vr(),[n,a]=O.useState(null),[o,l]=O.useState([]),[d,u]=O.useState([]),[h,p]=O.useState([]),[m,b]=O.useState("all"),[j,y]=O.useState("all"),[A,P]=O.useState(!0),[N,C]=O.useState(!1),[F,D]=O.useState(!1),[M,U]=O.useState(null),[Q,J]=O.useState(!1),[re,K]=O.useState(!1),[de,E]=O.useState(!1),[I,H]=O.useState(null),[te,we]=O.useState(null),[se,$]=O.useState(!1),[ee,ge]=O.useState(null),[Se,T]=O.useState(!1);O.useEffect(()=>{L()},[]),O.useEffect(()=>{Y()},[m]);const L=async()=>{try{P(!0),console.log("Fetching dashboard data...");const[je,Ze,$e]=await Promise.all([f2(),nm(),m2()]);console.log("Dashboard stats:",je),console.log("Owners data:",Ze),console.log("Accountants data:",$e),a(je),l(Ze),u($e)}catch(je){console.error("Error fetching dashboard data:",je)}finally{P(!1)}},Y=async()=>{try{const je=m==="all"?void 0:m;console.log("🔍 fetchProperties called with selectedOwnerId:",m,"ownerId param:",je);const Ze=await Zu(je);console.log("🔍 fetchProperties received:",Ze),Array.isArray(Ze)?(console.log("🔍 fetchProperties received:",Ze.length,"properties"),console.log("🔍 fetchProperties property owners:",Ze.map($e=>({id:$e.id,name:$e.name,owner:$e.owner}))),p(Ze)):(console.error("🔍 fetchProperties received non-array data:",Ze),p([]))}catch(je){console.error("Error fetching properties:",je),p([])}},ne=je=>{console.log("🔍 handleOwnerChange called. New ownerId:",je),console.log("🔍 Current selectedOwnerId:",m),b(je)},ie=()=>{if(m==="all")return r("admin.allOwners");if(m==="admin")return"Admin";const je=o.find(Ze=>Ze._id===m);return je?je.name:"Unknown Owner"},V=()=>{if(j==="all")return r("admin.allAccountants");const je=d.find(Ze=>Ze._id===j);return je?je.name:"Unknown Accountant"},fe=()=>j==="all"?d:d.filter(je=>je._id===j),he=je=>{ge(je),$(!0)},pe=je=>{const Ze=document.querySelector("[data-property-management]");Ze?(Ze.scrollIntoView({behavior:"smooth"}),window.dispatchEvent(new CustomEvent("editProperty",{detail:{property:je}}))):alert("Please use the Property Management section below to edit properties.")},Ce=async(je,Ze)=>{if(window.confirm(`Are you sure you want to delete "${Ze}"? This action cannot be undone.`))try{await w2(je.toString()),console.log(`Property ${je} deleted successfully`),Y(),L(),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:je,propertyName:Ze}}))}catch($e){console.error("Error deleting property:",$e),alert("Failed to delete property. Please try again.")}},ue=je=>{U(je),D(!0)},Pe=async je=>{if(window.confirm(`Are you sure you want to delete owner "${je.name}"? This will also remove all their associated properties.`))try{await Y0(je._id),or.success(`Owner "${je.name}" deleted successfully`),await L()}catch(Ze){console.error("Error deleting owner:",Ze),or.error(Ze.message||"Failed to delete owner")}},Ge=je=>{H(je),K(!0)},Te=je=>{we(je),E(!0)},W=async je=>{if(te)try{await p2(te._id,{name:je.name,email:je.email,phone:je.phone,password:je.password}),console.log(`Accountant ${te.name} basic info updated successfully`),je.assignedProperties!==void 0&&(await g2(te._id,je.assignedProperties),console.log(`Accountant ${te.name} property assignments updated successfully`)),L(),E(!1),we(null)}catch(Ze){console.error("Error updating accountant:",Ze),alert("Failed to update accountant. Please try again.")}},He=async je=>{if(window.confirm(`Are you sure you want to delete "${je.name}"? This action cannot be undone and will remove them from all assigned properties.`))try{await y2(je._id),console.log(`Accountant ${je.name} deleted successfully`),L()}catch(Ze){console.error("Error deleting accountant:",Ze),alert("Failed to delete accountant. Please try again.")}};return A?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:r("admin.loadingDashboard")})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[t.jsx("div",{className:"bg-white shadow-lg border-b border-gray-200",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 to-black bg-clip-text text-transparent",children:r("admin.dashboard")}),t.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[r("admin.welcomeBack"),", ",t.jsx("span",{className:"font-semibold text-black",children:e?.name})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:m,onChange:je=>ne(je.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:r("admin.allOwners")}),t.jsx("option",{value:"admin",children:"Admin"}),o.map(je=>t.jsx("option",{value:je._id,children:je.name},je._id))]}),t.jsx(Uu,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:j,onChange:je=>y(je.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:r("admin.allAccountants")}),d.map(je=>t.jsx("option",{value:je._id,children:je.name},je._id))]}),t.jsx(Uu,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),t.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-1.5 border text-sm font-medium rounded-md bg-blue-500/20 text-gray-900 hover:bg-blue-500/30 border-blue-200 shadow-sm hover:shadow-md transition-all duration-300",children:[t.jsx(Hs,{className:"h-3 w-3 mr-1 opacity-70"}),r("admin.addUser")]})]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center border border-blue-200 shadow-sm",children:t.jsx(wa,{className:"h-4 w-4 text-gray-900 opacity-70"})})}),t.jsx("div",{className:"ml-3 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:r("admin.totalOwners")}),t.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:n?.totalOwners||0})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center border border-purple-200 shadow-sm",children:t.jsx(wa,{className:"h-4 w-4 text-gray-900 opacity-70"})})}),t.jsx("div",{className:"ml-3 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:r("admin.totalAccountants")}),t.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:n?.totalAccountants||0})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center border border-green-200 shadow-sm",children:t.jsx(ms,{className:"h-4 w-4 text-gray-900 opacity-70"})})}),t.jsx("div",{className:"ml-3 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:r("admin.totalProperties")}),t.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:n?.totalProperties||0})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center border border-orange-200 shadow-sm",children:t.jsx(pi,{className:"h-4 w-4 text-gray-900 opacity-70"})})}),t.jsx("div",{className:"ml-3 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:r("admin.currentView")}),t.jsxs("dd",{className:"text-sm font-bold text-gray-900 mt-1",children:[ie()," | ",V()]})]})})]})})})]}),t.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:t.jsxs("div",{className:"px-6 py-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:r("admin.ownersManagement")}),t.jsx("p",{className:"text-sm text-gray-600",children:r("admin.manageOwners")})]}),t.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-500/20 text-gray-900 hover:bg-blue-500/30 px-3 py-1.5 rounded-md flex items-center gap-1 transition-all duration-300 text-sm shadow-sm hover:shadow-md border border-blue-200",children:[t.jsx(Hs,{className:"h-3 w-3 opacity-70"}),r("admin.addOwner")]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Companies"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(je=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:je.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.email}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.phone||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${je.role==="owner"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:je.role==="owner"?"Owner":"Accountant"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[je.companies?.length||0," ",(je.companies?.length||0)!==1?"companies":"company"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${je.isVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:je.isVerified?r("admin.verified"):r("admin.pending")})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[t.jsx("button",{onClick:()=>ue(je),className:"text-blue-600 hover:text-blue-900 mr-3",children:r("admin.edit")}),t.jsx("button",{onClick:()=>Pe(je),className:"text-red-600 hover:text-red-900",children:r("admin.delete")})]})]},je._id))})]}),o.length===0&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(wa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No owners found"}),t.jsxs("p",{className:"text-gray-500 mb-4",children:[r("admin.getStartedAddOwner"),"."]}),t.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-500/20 text-gray-900 hover:bg-blue-500/30 px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-300 mx-auto border border-blue-200 shadow-sm hover:shadow-md",children:[t.jsx(Hs,{className:"h-4 w-4 opacity-70"}),r("admin.addOwner")]})]})]})]})}),t.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:t.jsxs("div",{className:"px-6 py-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r("admin.propertiesAllOwners")}),t.jsx("p",{className:"text-gray-600",children:r("admin.managePortfolio")})]}),t.jsxs("button",{onClick:()=>J(!0),className:"inline-flex items-center px-4 py-3 border text-sm font-semibold rounded-lg bg-blue-500/20 text-gray-900 hover:bg-blue-500/30 border-blue-200 shadow-sm hover:shadow-md transition-all duration-300",children:[t.jsx(Hs,{className:"h-5 w-5 mr-2 opacity-70"}),r("admin.addProperty")]})]}),h.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ms,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r("admin.getStartedAddProperty"),"."]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(je=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isAdminOwned?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:je.isAdminOwned?r("admin.adminOwned"):r("admin.ownerOwned")})}),t.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-1",children:je.name||je.title||"Unnamed Property"}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(ms,{className:"h-4 w-4 mr-1"}),"ID: ",je.id||je._id]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(wa,{className:"h-4 w-4 mr-1"}),je.isAdminOwned?"Admin":je.owner?.name||"Unassigned"]})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[t.jsx("button",{onClick:()=>he(je),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Property Details",children:t.jsx(ps,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>pe(je),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Property",children:t.jsx(yc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ce(je.id||je._id,je.name||je.title||"Unnamed Property"),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Property",children:t.jsx(Df,{className:"h-4 w-4"})})]})]},je._id))})]})}),t.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:t.jsxs("div",{className:"px-6 py-6",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r("admin.accountantsAllAccountants")}),t.jsx("p",{className:"text-gray-600",children:r("admin.manageAccountants")})]})}),fe().length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(wa,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r("admin.noAccountants")}),t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r("admin.getStartedAddAccountant"),"."]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fe().map(je=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Accountant"})}),t.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:je.name}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),je.email]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),je.phone||"Phone not provided"]})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[t.jsx("button",{onClick:()=>Ge(je),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Accountant Details",children:t.jsx(ps,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Te(je),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Accountant",children:t.jsx(yc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>He(je),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Accountant",children:t.jsx(Df,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Assigned Properties"}),t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:je.assignedPropertiesCount})]}),je.assignedProperties.length>0&&t.jsxs("div",{className:"space-y-2",children:[je.assignedProperties.slice(0,3).map(Ze=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ms,{className:"h-3 w-3 text-gray-400 mr-2"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:Ze.name})]}),t.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",Ze.id]})]},Ze._id)),je.assignedProperties.length>3&&t.jsxs("div",{className:"text-xs text-gray-500 italic text-center py-1",children:["+",je.assignedProperties.length-3," more properties"]})]})]})]},je._id))})]})}),Q&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Property"}),t.jsx("button",{onClick:()=>J(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsx(NC,{owners:o,onSuccess:()=>{J(!1),Y()},onCancel:()=>J(!1)})]})})}),N&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New User"}),t.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsx(vC,{onSuccess:()=>{C(!1),L()},onCancel:()=>C(!1)})]})})}),re&&I&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Accountant Details"}),t.jsx("button",{onClick:()=>{K(!1),H(null)},className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.phone||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Properties"}),t.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[I.assignedPropertiesCount," properties"]})]}),I.assignedProperties.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property List"}),t.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:I.assignedProperties.map(je=>t.jsxs("div",{className:"px-3 py-1 bg-blue-50 border border-blue-200 rounded text-sm",children:[je.name," (ID: ",je.id,")"]},je._id))})]}),t.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:t.jsx("button",{onClick:()=>{K(!1),H(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),de&&te&&t.jsx(jC,{accountant:te,availableProperties:h,onUpdate:W,onCancel:()=>{E(!1),we(null)}}),F&&M&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[r("admin.edit")," ",r("admin.owner")]}),t.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsx(wC,{owner:M,onSuccess:()=>{D(!1),U(null),L()},onCancel:()=>{D(!1),U(null)}})]})})}),se&&ee&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Property Details"}),t.jsx("button",{onClick:()=>{$(!1),ge(null)},className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.name||ee.title||"Unnamed Property"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.id||ee._id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.isAdminOwned?"Admin":ee.owner?.name||"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.address||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.type||"Not specified"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.bedrooms||"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.bathrooms||"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.maxGuests||"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:ee.status||"Active"})]}),ee.images&&ee.images.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),t.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[ee.images.length," image(s)"]})]}),t.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:t.jsx("button",{onClick:()=>{$(!1),ge(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),t.jsx("div",{className:"bg-white shadow rounded-lg mt-6","data-property-management":!0,children:t.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[t.jsx("div",{className:"flex justify-between items-center mb-3",children:t.jsx("h3",{className:"text-base leading-6 font-medium text-gray-900",children:r("admin.propertiesAllOwners")})}),t.jsx(Av,{filteredProperties:h,onPropertyUpdate:Y,owners:o,showActions:!0})]})})]}),Se&&t.jsx(bC,{onClose:()=>T(!1)})]})},SC=()=>{const[e,r]=O.useState([]),[n,a]=O.useState(!0),[o,l]=O.useState(!1),[d,u]=O.useState(null),[h,p]=O.useState({name:"",email:"",phone:"",role:"owner",password:""}),[m,b]=O.useState(!1),[j,y]=O.useState(!1),[A,P]=O.useState(null),[N,C]=O.useState([]),[F,D]=O.useState("");O.useEffect(()=>{M()},[]);const M=async()=>{try{a(!0);const E=await nm();r(E)}catch(E){console.error("Error fetching owners:",E)}finally{a(!1)}},U=async E=>{E.preventDefault();try{d?await b2(d._id,h):await K0(h),await M(),l(!1),u(null),p({name:"",email:"",phone:"",role:"owner",password:""})}catch(I){console.error("Error saving owner:",I)}},Q=E=>{u(E),p({name:E.name,email:E.email,phone:E.phone||"",role:E.role,password:""}),l(!0)},J=async E=>{if(window.confirm("Are you sure you want to delete this owner?"))try{await Y0(E),await M()}catch(I){console.error("Error deleting owner:",I)}},re=async E=>{try{const I=await Zu();C(I),P(E),y(!0)}catch(I){console.error("Error fetching properties:",I)}},K=async()=>{if(!(!A||!F))try{await v2(A._id,parseInt(F)),y(!1),P(null),D(""),await M()}catch(E){console.error("Error assigning property:",E)}},de=()=>{l(!1),u(null),p({name:"",email:"",phone:"",role:"owner",hostkitApiKey:"",hostkitApiSecret:""})};return n?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Owner Management..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Management"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage property owners and their API credentials"})]}),t.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] hover:from-[#0284c7] hover:to-[#0369a1] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0ea5e9]",children:[t.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Owner"]})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"bg-white shadow rounded-lg",children:t.jsx("div",{className:"px-4 py-5 sm:p-6",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"API Keys"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Pl,{className:"h-5 w-5 text-green-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),t.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",E._id.slice(-8)]})]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(xc,{className:"h-4 w-4 mr-2 text-gray-400"}),E.email]}),E.phone&&t.jsxs("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[t.jsx(q0,{className:"h-4 w-4 mr-2 text-gray-400"}),E.phone]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.role==="admin"?"bg-purple-100 text-purple-800":E.role==="owner"?"bg-green-100 text-green-800":E.role==="accountant"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[t.jsx(fs,{className:"h-3 w-3 mr-1"}),E.role]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center",children:E.hasApiKeys?t.jsxs("div",{className:"flex items-center text-green-600",children:[t.jsx(H3,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Configured"})]}):t.jsxs("div",{className:"flex items-center text-gray-400",children:[t.jsx(yn,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Not Set"})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex items-center",children:E.isVerified?t.jsxs("div",{className:"flex items-center text-green-600",children:[t.jsx(Ws,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Verified"})]}):t.jsxs("div",{className:"flex items-center text-red-600",children:[t.jsx(kl,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Pending"})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>Q(E),className:"text-green-600 hover:text-green-900",title:"Edit Owner",children:t.jsx(yc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>re(E),className:"text-blue-600 hover:text-blue-900",title:"Assign Property",children:t.jsx(ms,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>J(E._id),className:"text-red-600 hover:text-red-900",title:"Delete Owner",children:t.jsx(Df,{className:"h-4 w-4"})})]})})]},E._id))})]})})})})}),o&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d?"Edit Owner":"Add New Owner"}),t.jsx("button",{onClick:de,className:"text-gray-400 hover:text-gray-600",children:t.jsx(kl,{className:"h-6 w-6"})})]}),t.jsxs("form",{onSubmit:U,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",required:!0,value:h.name,onChange:E=>p({...h,name:E.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",required:!0,value:h.email,onChange:E=>p({...h,email:E.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone (Optional)"}),t.jsx("input",{type:"tel",value:h.phone,onChange:E=>p({...h,phone:E.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",d?"(Leave blank to keep current)":"*"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:m?"text":"password",value:h.password,onChange:E=>p({...h,password:E.target.value}),className:"mt-1 block w-full pr-12 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:d?"Enter new password (optional)":"Enter password",required:!d}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>b(!m),children:m?t.jsx(Al,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:de,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:d?"Update Owner":"Create Owner"})]})]})]})})}),j&&A&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Assign Property to ",A.name]}),t.jsx("button",{onClick:()=>{y(!1),P(null),D("")},className:"text-gray-400 hover:text-gray-600",children:t.jsx(yn,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Property"}),t.jsxs("select",{value:F,onChange:E=>D(E.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Choose a property..."}),N.map(E=>t.jsxs("option",{value:E._id,children:[E.name," (ID: ",E.id,")"]},E._id))]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{y(!1),P(null),D("")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),t.jsxs("button",{onClick:K,disabled:!F,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(G3,{className:"h-4 w-4 mr-2 inline"}),"Assign Property"]})]})]})]})})})]})},AC=({children:e,roles:r})=>{const{isAuthenticated:n,user:a}=Ht(o=>o.auth);return n?r&&a&&!r.includes(a.role)?t.jsx(Ui,{to:"/dashboard/owner",replace:!0}):t.jsx(t.Fragment,{children:e}):t.jsx(Ui,{to:"/auth/login",replace:!0})};function CC(){const e=rs(),{isAuthenticated:r,isLoading:n,user:a}=Ht(o=>o.auth);return O.useEffect(()=>{r&&!a&&e(ju())},[e,r,a]),n&&r?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsx(bc,{size:"lg"})}):t.jsx(I3,{children:t.jsxs(nN,{children:[t.jsxs(sr,{path:"/auth/*",element:t.jsx(ak,{}),children:[t.jsx(sr,{path:"login",element:t.jsx(Dk,{})}),t.jsx(sr,{path:"signup",element:t.jsx(Ek,{})}),t.jsx(sr,{path:"forgot-password",element:t.jsx(Fk,{})}),t.jsx(sr,{path:"reset-password",element:t.jsx(Ik,{})}),t.jsx(sr,{index:!0,element:t.jsx(Ui,{to:"/auth/login",replace:!0})})]}),t.jsxs(sr,{path:"/*",element:t.jsx(AC,{children:t.jsx(sk,{})}),children:[t.jsx(sr,{index:!0,element:t.jsx(Ui,{to:"/dashboard/owner",replace:!0})}),t.jsx(sr,{path:"dashboard",element:t.jsx(Ui,{to:"/dashboard/owner",replace:!0})}),t.jsx(sr,{path:"dashboard/owner",element:t.jsx(wy,{})}),t.jsx(sr,{path:"dashboard/accountant",element:t.jsx(wy,{})}),t.jsx(sr,{path:"admin/dashboard",element:t.jsx(kC,{})}),t.jsx(sr,{path:"admin/owners",element:t.jsx(SC,{})}),t.jsx(sr,{path:"bookings",element:t.jsx(Xk,{})}),t.jsx(sr,{path:"bookings/:bookingId",element:t.jsx(jy,{})}),t.jsx(sr,{path:"invoices",element:t.jsx(tS,{})}),t.jsx(sr,{path:"tourist-tax",element:t.jsx(WA,{})}),t.jsx(sr,{path:"tourist-tax/booking/:reservationId",element:t.jsx(jy,{})}),t.jsx(sr,{path:"siba",element:t.jsx(YA,{})}),t.jsx(sr,{path:"siba-manager",element:t.jsx(JA,{})}),t.jsx(sr,{path:"saft",element:t.jsx(gC,{})}),t.jsx(sr,{path:"property/:propertyId",element:t.jsx(yC,{})}),t.jsx(sr,{path:"property-management",element:t.jsx(XA,{})}),t.jsx(sr,{path:"calendar",element:t.jsx(rC,{})}),t.jsx(sr,{path:"performance/:propertyId?",element:t.jsx(aC,{})}),t.jsx(sr,{path:"portfolio",element:t.jsx(iC,{})}),t.jsx(sr,{path:"credit-notes",element:t.jsx(oC,{})}),t.jsx(sr,{path:"expenses",element:t.jsx(lC,{})}),t.jsx(sr,{path:"reviews",element:t.jsx(cC,{})}),t.jsx(sr,{path:"owner-statements",element:t.jsx(uC,{})}),t.jsx(sr,{path:"financial-details",element:t.jsx(hC,{})}),t.jsx(sr,{path:"profile",element:t.jsx(fC,{})}),t.jsx(sr,{path:"advanced-calendar",element:t.jsx(mC,{})}),t.jsx(sr,{path:"automations",element:t.jsx(pC,{})}),t.jsx(sr,{path:"properties",element:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Properties"}),t.jsx("p",{children:"Coming soon..."})]})})]}),t.jsx(sr,{path:"/",element:r&&a?t.jsx(Ui,{to:"/dashboard/owner",replace:!0}):t.jsx(Ui,{to:"/auth/login",replace:!0})}),t.jsx(sr,{path:"*",element:r&&a?t.jsx(Ui,{to:"/dashboard/owner",replace:!0}):t.jsx(Ui,{to:"/auth/login",replace:!0})})]})})}const PC={notifications:[{id:"1",title:"New Booking",message:"New booking for Piece of Heaven from John Doe",type:"success",timestamp:new Date().toISOString(),read:!1,actionUrl:"/bookings",actionLabel:"View Details"},{id:"2",title:"SIBA Reminder",message:"SIBA submission required for Lote 8 4-B",type:"warning",timestamp:new Date(Date.now()-36e5).toISOString(),read:!1,actionUrl:"/siba",actionLabel:"Submit Now"}],unreadCount:2},_v=To({name:"notifications",initialState:PC,reducers:{addNotification:(e,r)=>{const n={...r.payload,id:Date.now().toString(),timestamp:new Date().toISOString()};e.notifications.unshift(n),n.read||(e.unreadCount+=1)},markAsRead:(e,r)=>{const n=e.notifications.find(a=>a.id===r.payload);n&&!n.read&&(n.read=!0,e.unreadCount=Math.max(0,e.unreadCount-1))},markAllAsRead:e=>{e.notifications.forEach(r=>{r.read=!0}),e.unreadCount=0},removeNotification:(e,r)=>{const n=e.notifications.findIndex(a=>a.id===r.payload);n!==-1&&(e.notifications[n].read||(e.unreadCount=Math.max(0,e.unreadCount-1)),e.notifications.splice(n,1))}}}),{addNotification:i8,markAsRead:o8,markAllAsRead:l8,removeNotification:c8}=_v.actions,_C=_v.reducer,DC=Pj({reducer:{auth:E3,properties:Uk,propertyManagement:Mk,bookings:Hk,invoices:eS,touristTax:HA,siba:KA,sibaManager:Jk,notifications:_C},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),M1=()=>{const e=document.createElement("canvas");e.width=32,e.height=32;const r=e.getContext("2d");if(r){r.beginPath(),r.roundRect(0,0,32,32,6),r.clip();const a=new Image;a.onload=()=>{r.drawImage(a,0,0,32,32);const o=document.querySelector('link[rel="icon"]');o&&(o.href=e.toDataURL("image/png"))},a.src=tm}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",M1):M1();const LC=new l5({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:300*1e3}}});yw.createRoot(document.getElementById("root")).render(t.jsx(Fs.StrictMode,{children:t.jsx(Tw,{store:DC,children:t.jsx(d5,{client:LC,children:t.jsxs(uN,{children:[t.jsx(CC,{}),t.jsx(rj,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb",borderRadius:"0.75rem"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}));export{Cr as _,Ft as a,EC as c,B1 as g};
