function t5(t,r){for(var s=0;s<r.length;s++){const a=r[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var AA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gm={exports:{}},mu={},Km={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function r5(){if(tx)return tr;tx=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function N(ee){return ee===null||typeof ee!="object"?null:(ee=v&&ee[v]||ee["@@iterator"],typeof ee=="function"?ee:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function S(ee,D,$){this.props=ee,this.context=D,this.refs=C,this.updater=$||y}S.prototype.isReactComponent={},S.prototype.setState=function(ee,D){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,D,"setState")},S.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function L(){}L.prototype=S.prototype;function E(ee,D,$){this.props=ee,this.context=D,this.refs=C,this.updater=$||y}var P=E.prototype=new L;P.constructor=E,A(P,S.prototype),P.isPureReactComponent=!0;var F=Array.isArray,O=Object.prototype.hasOwnProperty,se={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function K(ee,D,$){var W,ne={},H=null,Q=null;if(D!=null)for(W in D.ref!==void 0&&(Q=D.ref),D.key!==void 0&&(H=""+D.key),D)O.call(D,W)&&!X.hasOwnProperty(W)&&(ne[W]=D[W]);var ue=arguments.length-2;if(ue===1)ne.children=$;else if(1<ue){for(var xe=Array(ue),Ee=0;Ee<ue;Ee++)xe[Ee]=arguments[Ee+2];ne.children=xe}if(ee&&ee.defaultProps)for(W in ue=ee.defaultProps,ue)ne[W]===void 0&&(ne[W]=ue[W]);return{$$typeof:t,type:ee,key:H,ref:Q,props:ne,_owner:se.current}}function Y(ee,D){return{$$typeof:t,type:ee.type,key:D,ref:ee.ref,props:ee.props,_owner:ee._owner}}function ie(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function I(ee){var D={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function($){return D[$]})}var q=/\/+/g;function U(ee,D){return typeof ee=="object"&&ee!==null&&ee.key!=null?I(""+ee.key):D.toString(36)}function J(ee,D,$,W,ne){var H=typeof ee;(H==="undefined"||H==="boolean")&&(ee=null);var Q=!1;if(ee===null)Q=!0;else switch(H){case"string":case"number":Q=!0;break;case"object":switch(ee.$$typeof){case t:case r:Q=!0}}if(Q)return Q=ee,ne=ne(Q),ee=W===""?"."+U(Q,0):W,F(ne)?($="",ee!=null&&($=ee.replace(q,"$&/")+"/"),J(ne,D,$,"",function(Ee){return Ee})):ne!=null&&(ie(ne)&&(ne=Y(ne,$+(!ne.key||Q&&Q.key===ne.key?"":(""+ne.key).replace(q,"$&/")+"/")+ee)),D.push(ne)),1;if(Q=0,W=W===""?".":W+":",F(ee))for(var ue=0;ue<ee.length;ue++){H=ee[ue];var xe=W+U(H,ue);Q+=J(H,D,$,xe,ne)}else if(xe=N(ee),typeof xe=="function")for(ee=xe.call(ee),ue=0;!(H=ee.next()).done;)H=H.value,xe=W+U(H,ue++),Q+=J(H,D,$,xe,ne);else if(H==="object")throw D=String(ee),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Q}function be(ee,D,$){if(ee==null)return ee;var W=[],ne=0;return J(ee,W,"","",function(H){return D.call($,H,ne++)}),W}function ge(ee){if(ee._status===-1){var D=ee._result;D=D(),D.then(function($){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=$)},function($){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=$)}),ee._status===-1&&(ee._status=0,ee._result=D)}if(ee._status===1)return ee._result.default;throw ee._result}var T={current:null},re={transition:null},fe={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:re,ReactCurrentOwner:se};function Se(){throw Error("act(...) is not supported in production builds of React.")}return tr.Children={map:be,forEach:function(ee,D,$){be(ee,function(){D.apply(this,arguments)},$)},count:function(ee){var D=0;return be(ee,function(){D++}),D},toArray:function(ee){return be(ee,function(D){return D})||[]},only:function(ee){if(!ie(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},tr.Component=S,tr.Fragment=s,tr.Profiler=o,tr.PureComponent=E,tr.StrictMode=a,tr.Suspense=h,tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,tr.act=Se,tr.cloneElement=function(ee,D,$){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var W=A({},ee.props),ne=ee.key,H=ee.ref,Q=ee._owner;if(D!=null){if(D.ref!==void 0&&(H=D.ref,Q=se.current),D.key!==void 0&&(ne=""+D.key),ee.type&&ee.type.defaultProps)var ue=ee.type.defaultProps;for(xe in D)O.call(D,xe)&&!X.hasOwnProperty(xe)&&(W[xe]=D[xe]===void 0&&ue!==void 0?ue[xe]:D[xe])}var xe=arguments.length-2;if(xe===1)W.children=$;else if(1<xe){ue=Array(xe);for(var Ee=0;Ee<xe;Ee++)ue[Ee]=arguments[Ee+2];W.children=ue}return{$$typeof:t,type:ee.type,key:ne,ref:H,props:W,_owner:Q}},tr.createContext=function(ee){return ee={$$typeof:d,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:l,_context:ee},ee.Consumer=ee},tr.createElement=K,tr.createFactory=function(ee){var D=K.bind(null,ee);return D.type=ee,D},tr.createRef=function(){return{current:null}},tr.forwardRef=function(ee){return{$$typeof:u,render:ee}},tr.isValidElement=ie,tr.lazy=function(ee){return{$$typeof:p,_payload:{_status:-1,_result:ee},_init:ge}},tr.memo=function(ee,D){return{$$typeof:m,type:ee,compare:D===void 0?null:D}},tr.startTransition=function(ee){var D=re.transition;re.transition={};try{ee()}finally{re.transition=D}},tr.unstable_act=Se,tr.useCallback=function(ee,D){return T.current.useCallback(ee,D)},tr.useContext=function(ee){return T.current.useContext(ee)},tr.useDebugValue=function(){},tr.useDeferredValue=function(ee){return T.current.useDeferredValue(ee)},tr.useEffect=function(ee,D){return T.current.useEffect(ee,D)},tr.useId=function(){return T.current.useId()},tr.useImperativeHandle=function(ee,D,$){return T.current.useImperativeHandle(ee,D,$)},tr.useInsertionEffect=function(ee,D){return T.current.useInsertionEffect(ee,D)},tr.useLayoutEffect=function(ee,D){return T.current.useLayoutEffect(ee,D)},tr.useMemo=function(ee,D){return T.current.useMemo(ee,D)},tr.useReducer=function(ee,D,$){return T.current.useReducer(ee,D,$)},tr.useRef=function(ee){return T.current.useRef(ee)},tr.useState=function(ee){return T.current.useState(ee)},tr.useSyncExternalStore=function(ee,D,$){return T.current.useSyncExternalStore(ee,D,$)},tr.useTransition=function(){return T.current.useTransition()},tr.version="18.3.1",tr}var rx;function Mf(){return rx||(rx=1,Km.exports=r5()),Km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function s5(){if(sx)return mu;sx=1;var t=Mf(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,m){var p,v={},N=null,y=null;m!==void 0&&(N=""+m),h.key!==void 0&&(N=""+h.key),h.ref!==void 0&&(y=h.ref);for(p in h)a.call(h,p)&&!l.hasOwnProperty(p)&&(v[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)v[p]===void 0&&(v[p]=h[p]);return{$$typeof:r,type:u,key:N,ref:y,props:v,_owner:o.current}}return mu.Fragment=s,mu.jsx=d,mu.jsxs=d,mu}var nx;function n5(){return nx||(nx=1,Gm.exports=s5()),Gm.exports}var e=n5(),R=Mf();const zn=D1(R),a5=t5({__proto__:null,default:zn},[R]);var Th={},Ym={exports:{}},ea={},Jm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function i5(){return ax||(ax=1,(function(t){function r(re,fe){var Se=re.length;re.push(fe);e:for(;0<Se;){var ee=Se-1>>>1,D=re[ee];if(0<o(D,fe))re[ee]=fe,re[Se]=D,Se=ee;else break e}}function s(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var fe=re[0],Se=re.pop();if(Se!==fe){re[0]=Se;e:for(var ee=0,D=re.length,$=D>>>1;ee<$;){var W=2*(ee+1)-1,ne=re[W],H=W+1,Q=re[H];if(0>o(ne,Se))H<D&&0>o(Q,ne)?(re[ee]=Q,re[H]=Se,ee=H):(re[ee]=ne,re[W]=Se,ee=W);else if(H<D&&0>o(Q,Se))re[ee]=Q,re[H]=Se,ee=H;else break e}}return fe}function o(re,fe){var Se=re.sortIndex-fe.sortIndex;return Se!==0?Se:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();t.unstable_now=function(){return d.now()-u}}var h=[],m=[],p=1,v=null,N=3,y=!1,A=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(re){for(var fe=s(m);fe!==null;){if(fe.callback===null)a(m);else if(fe.startTime<=re)a(m),fe.sortIndex=fe.expirationTime,r(h,fe);else break;fe=s(m)}}function F(re){if(C=!1,P(re),!A)if(s(h)!==null)A=!0,ge(O);else{var fe=s(m);fe!==null&&T(F,fe.startTime-re)}}function O(re,fe){A=!1,C&&(C=!1,L(K),K=-1),y=!0;var Se=N;try{for(P(fe),v=s(h);v!==null&&(!(v.expirationTime>fe)||re&&!I());){var ee=v.callback;if(typeof ee=="function"){v.callback=null,N=v.priorityLevel;var D=ee(v.expirationTime<=fe);fe=t.unstable_now(),typeof D=="function"?v.callback=D:v===s(h)&&a(h),P(fe)}else a(h);v=s(h)}if(v!==null)var $=!0;else{var W=s(m);W!==null&&T(F,W.startTime-fe),$=!1}return $}finally{v=null,N=Se,y=!1}}var se=!1,X=null,K=-1,Y=5,ie=-1;function I(){return!(t.unstable_now()-ie<Y)}function q(){if(X!==null){var re=t.unstable_now();ie=re;var fe=!0;try{fe=X(!0,re)}finally{fe?U():(se=!1,X=null)}}else se=!1}var U;if(typeof E=="function")U=function(){E(q)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,be=J.port2;J.port1.onmessage=q,U=function(){be.postMessage(null)}}else U=function(){S(q,0)};function ge(re){X=re,se||(se=!0,U())}function T(re,fe){K=S(function(){re(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){A||y||(A=!0,ge(O))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(re){switch(N){case 1:case 2:case 3:var fe=3;break;default:fe=N}var Se=N;N=fe;try{return re()}finally{N=Se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Se=N;N=re;try{return fe()}finally{N=Se}},t.unstable_scheduleCallback=function(re,fe,Se){var ee=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?ee+Se:ee):Se=ee,re){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Se+D,re={id:p++,callback:fe,priorityLevel:re,startTime:Se,expirationTime:D,sortIndex:-1},Se>ee?(re.sortIndex=Se,r(m,re),s(h)===null&&re===s(m)&&(C?(L(K),K=-1):C=!0,T(F,Se-ee))):(re.sortIndex=D,r(h,re),A||y||(A=!0,ge(O))),re},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(re){var fe=N;return function(){var Se=N;N=fe;try{return re.apply(this,arguments)}finally{N=Se}}}})(Qm)),Qm}var ix;function o5(){return ix||(ix=1,Jm.exports=i5()),Jm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function l5(){if(ox)return ea;ox=1;var t=Mf(),r=o5();function s(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)a.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function N(n){return h.call(v,n)?!0:h.call(p,n)?!1:m.test(n)?v[n]=!0:(p[n]=!0,!1)}function y(n,i,c,g){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return g?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,i,c,g){if(i===null||typeof i>"u"||y(n,i,c,g))return!0;if(g)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(n,i,c,g,b,k,z){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=n,this.type=i,this.sanitizeURL=k,this.removeEmptyString=z}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){S[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];S[i]=new C(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){S[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){S[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){S[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){S[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){S[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){S[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){S[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function E(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(L,E);S[i]=new C(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(L,E);S[i]=new C(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(L,E);S[i]=new C(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){S[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){S[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,c,g){var b=S.hasOwnProperty(i)?S[i]:null;(b!==null?b.type!==0:g||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,c,b,g)&&(c=null),g||b===null?N(i)&&(c===null?n.removeAttribute(i):n.setAttribute(i,""+c)):b.mustUseProperty?n[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,g=b.attributeNamespace,c===null?n.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,g?n.setAttributeNS(g,i,c):n.setAttribute(i,c))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),se=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var Se=Object.assign,ee;function D(n){if(ee===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);ee=i&&i[1]||""}return`
`+ee+n}var $=!1;function W(n,i){if(!n||$)return"";$=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Oe){var g=Oe}Reflect.construct(n,[],i)}else{try{i.call()}catch(Oe){g=Oe}n.call(i.prototype)}else{try{throw Error()}catch(Oe){g=Oe}n()}}catch(Oe){if(Oe&&g&&typeof Oe.stack=="string"){for(var b=Oe.stack.split(`
`),k=g.stack.split(`
`),z=b.length-1,he=k.length-1;1<=z&&0<=he&&b[z]!==k[he];)he--;for(;1<=z&&0<=he;z--,he--)if(b[z]!==k[he]){if(z!==1||he!==1)do if(z--,he--,0>he||b[z]!==k[he]){var we=`
`+b[z].replace(" at new "," at ");return n.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",n.displayName)),we}while(1<=z&&0<=he);break}}}finally{$=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?D(n):""}function ne(n){switch(n.tag){case 5:return D(n.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return n=W(n.type,!1),n;case 11:return n=W(n.type.render,!1),n;case 1:return n=W(n.type,!0),n;default:return""}}function H(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case se:return"Portal";case Y:return"Profiler";case K:return"StrictMode";case U:return"Suspense";case J:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I:return(n.displayName||"Context")+".Consumer";case ie:return(n._context.displayName||"Context")+".Provider";case q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case be:return i=n.displayName||null,i!==null?i:H(n.type)||"Memo";case ge:i=n._payload,n=n._init;try{return H(n(i))}catch{}}return null}function Q(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(i);case 8:return i===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ee(n){var i=xe(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),g=""+n[i];if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,k=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return b.call(this)},set:function(z){g=""+z,k.call(this,z)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function me(n){n._valueTracker||(n._valueTracker=Ee(n))}function De(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),g="";return n&&(g=xe(n)?n.checked?"true":"false":n.value),n=g,n!==c?(i.setValue(n),!0):!1}function Ze(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Te(n,i){var c=i.checked;return Se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function de(n,i){var c=i.defaultValue==null?"":i.defaultValue,g=i.checked!=null?i.checked:i.defaultChecked;c=ue(i.value!=null?i.value:c),n._wrapperState={initialChecked:g,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Fe(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function st(n,i){Fe(n,i);var c=ue(i.value),g=i.type;if(c!=null)g==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ke(n,i.type,c):i.hasOwnProperty("defaultValue")&&Ke(n,i.type,ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function dt(n,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var g=i.type;if(!(g!=="submit"&&g!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,c||i===n.value||(n.value=i),n.defaultValue=i}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function Ke(n,i,c){(i!=="number"||Ze(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var ce=Array.isArray;function pe(n,i,c,g){if(n=n.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<n.length;c++)b=i.hasOwnProperty("$"+n[c].value),n[c].selected!==b&&(n[c].selected=b),b&&g&&(n[c].defaultSelected=!0)}else{for(c=""+ue(c),i=null,b=0;b<n.length;b++){if(n[b].value===c){n[b].selected=!0,g&&(n[b].defaultSelected=!0);return}i!==null||n[b].disabled||(i=n[b])}i!==null&&(i.selected=!0)}}function Ce(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(s(91));return Se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $e(n,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(s(92));if(ce(c)){if(1<c.length)throw Error(s(93));c=c[0]}i=c}i==null&&(i=""),c=i}n._wrapperState={initialValue:ue(c)}}function Ge(n,i){var c=ue(i.value),g=ue(i.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),i.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),g!=null&&(n.defaultValue=""+g)}function Ue(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Je(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Je(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ot,lt=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,g,b){MSApp.execUnsafeLocalFunction(function(){return n(i,c,g,b)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ot.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function _t(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hr=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(n){hr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ut[i]=ut[n]})});function zt(n,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ut.hasOwnProperty(n)&&ut[n]?(""+i).trim():i+"px"}function pt(n,i){n=n.style;for(var c in i)if(i.hasOwnProperty(c)){var g=c.indexOf("--")===0,b=zt(c,i[c],g);c==="float"&&(c="cssFloat"),g?n.setProperty(c,b):n[c]=b}}var Tt=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(n,i){if(i){if(Tt[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(s(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(s(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(s(61))}if(i.style!=null&&typeof i.style!="object")throw Error(s(62))}}function Et(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gt=null;function Re(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var it=null,ct=null,ht=null;function nt(n){if(n=al(n)){if(typeof it!="function")throw Error(s(280));var i=n.stateNode;i&&(i=Jl(i),it(n.stateNode,n.type,i))}}function at(n){ct?ht?ht.push(n):ht=[n]:ct=n}function Jt(){if(ct){var n=ct,i=ht;if(ht=ct=null,nt(n),i)for(n=0;n<i.length;n++)nt(i[n])}}function ar(n,i){return n(i)}function It(){}var pr=!1;function ft(n,i,c){if(pr)return n(i,c);pr=!0;try{return ar(n,i,c)}finally{pr=!1,(ct!==null||ht!==null)&&(It(),Jt())}}function wr(n,i){var c=n.stateNode;if(c===null)return null;var g=Jl(c);if(g===null)return null;c=g[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var xs=!1;if(u)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){xs=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{xs=!1}function Jr(n,i,c,g,b,k,z,he,we){var Oe=Array.prototype.slice.call(arguments,3);try{i.apply(c,Oe)}catch(Xe){this.onError(Xe)}}var ir=!1,Xt=null,yr=!1,is=null,Lr={onError:function(n){ir=!0,Xt=n}};function Ws(n,i,c,g,b,k,z,he,we){ir=!1,Xt=null,Jr.apply(Lr,arguments)}function sn(n,i,c,g,b,k,z,he,we){if(Ws.apply(this,arguments),ir){if(ir){var Oe=Xt;ir=!1,Xt=null}else throw Error(s(198));yr||(yr=!0,is=Oe)}}function zr(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function ys(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function In(n){if(zr(n)!==n)throw Error(s(188))}function Zi(n){var i=n.alternate;if(!i){if(i=zr(n),i===null)throw Error(s(188));return i!==n?null:n}for(var c=n,g=i;;){var b=c.return;if(b===null)break;var k=b.alternate;if(k===null){if(g=b.return,g!==null){c=g;continue}break}if(b.child===k.child){for(k=b.child;k;){if(k===c)return In(b),n;if(k===g)return In(b),i;k=k.sibling}throw Error(s(188))}if(c.return!==g.return)c=b,g=k;else{for(var z=!1,he=b.child;he;){if(he===c){z=!0,c=b,g=k;break}if(he===g){z=!0,g=b,c=k;break}he=he.sibling}if(!z){for(he=k.child;he;){if(he===c){z=!0,c=k,g=b;break}if(he===g){z=!0,g=k,c=b;break}he=he.sibling}if(!z)throw Error(s(189))}}if(c.alternate!==g)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:i}function ca(n){return n=Zi(n),n!==null?ji(n):null}function ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ji(n);if(i!==null)return i;n=n.sibling}return null}var eo=r.unstable_scheduleCallback,to=r.unstable_cancelCallback,Bo=r.unstable_shouldYield,Bd=r.unstable_requestPaint,Er=r.unstable_now,Pc=r.unstable_getCurrentPriorityLevel,Uo=r.unstable_ImmediatePriority,Fn=r.unstable_UserBlockingPriority,Si=r.unstable_NormalPriority,_c=r.unstable_LowPriority,qo=r.unstable_IdlePriority,ro=null,Tn=null;function Lc(n){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(ro,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:Ec,Ud=Math.log,os=Math.LN2;function Ec(n){return n>>>=0,n===0?32:31-(Ud(n)/os|0)|0}var so=64,Hn=4194304;function da(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function pn(n,i){var c=n.pendingLanes;if(c===0)return 0;var g=0,b=n.suspendedLanes,k=n.pingedLanes,z=c&268435455;if(z!==0){var he=z&~b;he!==0?g=da(he):(k&=z,k!==0&&(g=da(k)))}else z=c&~b,z!==0?g=da(z):k!==0&&(g=da(k));if(g===0)return 0;if(i!==0&&i!==g&&(i&b)===0&&(b=g&-g,k=i&-i,b>=k||b===16&&(k&4194240)!==0))return i;if((g&4)!==0&&(g|=c&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=g;0<i;)c=31-Gs(i),b=1<<c,g|=n[c],i&=~b;return g}function no(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(n,i){for(var c=n.suspendedLanes,g=n.pingedLanes,b=n.expirationTimes,k=n.pendingLanes;0<k;){var z=31-Gs(k),he=1<<z,we=b[z];we===-1?((he&c)===0||(he&g)!==0)&&(b[z]=no(he,i)):we<=i&&(n.expiredLanes|=he),k&=~he}}function ao(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Dc(){var n=so;return so<<=1,(so&4194240)===0&&(so=64),n}function Il(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function io(n,i,c){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Gs(i),n[i]=c}function Aa(n,i){var c=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<c;){var b=31-Gs(c),k=1<<b;i[b]=0,g[b]=-1,n[b]=-1,c&=~k}}function zo(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var g=31-Gs(c),b=1<<g;b&i|n[g]&i&&(n[g]|=i),c&=~b}}var or=0;function Ha(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var $o,Fl,Ic,Fc,Vo,Wa=!1,ua=[],Ca=null,gn=null,Wn=null,Ut=new Map,oo=new Map,Pa=[],qd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tc(n,i){switch(n){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":Ut.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(i.pointerId)}}function On(n,i,c,g,b,k){return n===null||n.nativeEvent!==k?(n={blockedOn:i,domEventName:c,eventSystemFlags:g,nativeEvent:k,targetContainers:[b]},i!==null&&(i=al(i),i!==null&&Fl(i)),n):(n.eventSystemFlags|=g,i=n.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),n)}function Ga(n,i,c,g,b){switch(i){case"focusin":return Ca=On(Ca,n,i,c,g,b),!0;case"dragenter":return gn=On(gn,n,i,c,g,b),!0;case"mouseover":return Wn=On(Wn,n,i,c,g,b),!0;case"pointerover":var k=b.pointerId;return Ut.set(k,On(Ut.get(k)||null,n,i,c,g,b)),!0;case"gotpointercapture":return k=b.pointerId,oo.set(k,On(oo.get(k)||null,n,i,c,g,b)),!0}return!1}function Oc(n){var i=Fi(n.target);if(i!==null){var c=zr(i);if(c!==null){if(i=c.tag,i===13){if(i=ys(c),i!==null){n.blockedOn=i,Vo(n.priority,function(){Ic(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ho(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=co(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var g=new c.constructor(c.type,c);Gt=g,c.target.dispatchEvent(g),Gt=null}else return i=al(c),i!==null&&Fl(i),n.blockedOn=c,!1;i.shift()}return!0}function lo(n,i,c){Ho(n)&&c.delete(i)}function Tl(){Wa=!1,Ca!==null&&Ho(Ca)&&(Ca=null),gn!==null&&Ho(gn)&&(gn=null),Wn!==null&&Ho(Wn)&&(Wn=null),Ut.forEach(lo),oo.forEach(lo)}function ha(n,i){n.blockedOn===i&&(n.blockedOn=null,Wa||(Wa=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tl)))}function _a(n){function i(b){return ha(b,n)}if(0<ua.length){ha(ua[0],n);for(var c=1;c<ua.length;c++){var g=ua[c];g.blockedOn===n&&(g.blockedOn=null)}}for(Ca!==null&&ha(Ca,n),gn!==null&&ha(gn,n),Wn!==null&&ha(Wn,n),Ut.forEach(i),oo.forEach(i),c=0;c<Pa.length;c++)g=Pa[c],g.blockedOn===n&&(g.blockedOn=null);for(;0<Pa.length&&(c=Pa[0],c.blockedOn===null);)Oc(c),c.blockedOn===null&&Pa.shift()}var fa=F.ReactCurrentBatchConfig,Wo=!0;function Ol(n,i,c,g){var b=or,k=fa.transition;fa.transition=null;try{or=1,Ka(n,i,c,g)}finally{or=b,fa.transition=k}}function Rl(n,i,c,g){var b=or,k=fa.transition;fa.transition=null;try{or=4,Ka(n,i,c,g)}finally{or=b,fa.transition=k}}function Ka(n,i,c,g){if(Wo){var b=co(n,i,c,g);if(b===null)Gl(n,i,g,La,c),Tc(n,g);else if(Ga(b,n,i,c,g))g.stopPropagation();else if(Tc(n,g),i&4&&-1<qd.indexOf(n)){for(;b!==null;){var k=al(b);if(k!==null&&$o(k),k=co(n,i,c,g),k===null&&Gl(n,i,g,La,c),k===b)break;b=k}b!==null&&g.stopPropagation()}else Gl(n,i,g,null,c)}}var La=null;function co(n,i,c,g){if(La=null,n=Re(g),n=Fi(n),n!==null)if(i=zr(n),i===null)n=null;else if(c=i.tag,c===13){if(n=ys(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return La=n,null}function uo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pc()){case Uo:return 1;case Fn:return 4;case Si:case _c:return 16;case qo:return 536870912;default:return 16}default:return 16}}var Gn=null,Ya=null,ki=null;function Go(){if(ki)return ki;var n,i=Ya,c=i.length,g,b="value"in Gn?Gn.value:Gn.textContent,k=b.length;for(n=0;n<c&&i[n]===b[n];n++);var z=c-n;for(g=1;g<=z&&i[c-g]===b[k-g];g++);return ki=b.slice(n,1<g?1-g:void 0)}function Ks(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Rn(){return!0}function w(){return!1}function M(n){function i(c,g,b,k,z){this._reactName=c,this._targetInst=b,this.type=g,this.nativeEvent=k,this.target=z,this.currentTarget=null;for(var he in n)n.hasOwnProperty(he)&&(c=n[he],this[he]=c?c(k):k[he]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Rn:w,this.isPropagationStopped=w,this}return Se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Rn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Rn)},persist:function(){},isPersistent:Rn}),i}var le={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ye=M(le),ke=Se({},le,{view:0,detail:0}),Ve=M(ke),Ye,bt,wt,Ot=Se({},ke,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wt&&(wt&&n.type==="mousemove"?(Ye=n.screenX-wt.screenX,bt=n.screenY-wt.screenY):bt=Ye=0,wt=n),Ye)},movementY:function(n){return"movementY"in n?n.movementY:bt}}),Ht=M(Ot),lr=Se({},Ot,{dataTransfer:0}),Br=M(lr),ls=Se({},ke,{relatedTarget:0}),fr=M(ls),bs=Se({},le,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=M(bs),Rs=Se({},le,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ja=M(Rs),Ai=Se({},le,{data:0}),Rc=M(Ai),Mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ho={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ma[n])?!!i[n]:!1}function Ci(){return Ml}var Pi=Se({},ke,{key:function(n){if(n.key){var i=Mc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ho[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ls=M(Pi),Qa=Se({},Ot,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ea=M(Qa),Ko=Se({},ke,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),Bl=M(Ko),nn=Se({},le,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bc=M(nn),Yo=Se({},Ot,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Uc=M(Yo),vs=[9,13,27,32],xn=u&&"CompositionEvent"in window,Xa=null;u&&"documentMode"in document&&(Xa=document.documentMode);var Ul=u&&"TextEvent"in window&&!Xa,Za=u&&(!xn||Xa&&8<Xa&&11>=Xa),fo=" ",an=!1;function on(n,i){switch(n){case"keyup":return vs.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _i(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ln=!1;function Li(n,i){switch(n){case"compositionend":return _i(i);case"keypress":return i.which!==32?null:(an=!0,fo);case"textInput":return n=i.data,n===fo&&an?null:n;default:return null}}function ql(n,i){if(ln)return n==="compositionend"||!xn&&on(n,i)?(n=Go(),ki=Ya=Gn=null,ln=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Za&&i.locale!=="ko"?null:i.data;default:return null}}var Ei={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $r(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ei[n.type]:i==="textarea"}function qc(n,i,c,g){at(g),i=Gc(i,"onChange"),0<i.length&&(c=new ye("onChange","change",null,c,g),n.push({event:c,listeners:i}))}var yn=null,bn=null;function Jo(n){Hl(n,0)}function Di(n){var i=wo(n);if(De(i))return n}function Qo(n,i){if(n==="change")return i}var mo=!1;if(u){var ei;if(u){var ti="oninput"in document;if(!ti){var Da=document.createElement("div");Da.setAttribute("oninput","return;"),ti=typeof Da.oninput=="function"}ei=ti}else ei=!1;mo=ei&&(!document.documentMode||9<document.documentMode)}function Xo(){yn&&(yn.detachEvent("onpropertychange",vn),bn=yn=null)}function vn(n){if(n.propertyName==="value"&&Di(bn)){var i=[];qc(i,bn,n,Re(n)),ft(Jo,i)}}function Ia(n,i,c){n==="focusin"?(Xo(),yn=i,bn=c,yn.attachEvent("onpropertychange",vn)):n==="focusout"&&Xo()}function Cr(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Di(bn)}function Pr(n,i){if(n==="click")return Di(i)}function Xr(n,i){if(n==="input"||n==="change")return Di(i)}function Zr(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ws=typeof Object.is=="function"?Object.is:Zr;function Fa(n,i){if(ws(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),g=Object.keys(i);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var b=c[g];if(!h.call(i,b)||!ws(n[b],i[b]))return!1}return!0}function pa(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zo(n,i){var c=pa(n);n=0;for(var g;c;){if(c.nodeType===3){if(g=n+c.textContent.length,n<=i&&g>=i)return{node:c,offset:i-n};n=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pa(c)}}function zd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function $d(){for(var n=window,i=Ze();i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=Ze(n.document)}return i}function zc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Zu(n){var i=$d(),c=n.focusedElem,g=n.selectionRange;if(i!==c&&c&&c.ownerDocument&&zd(c.ownerDocument.documentElement,c)){if(g!==null&&zc(c)){if(i=g.start,n=g.end,n===void 0&&(n=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(n,c.value.length);else if(n=(i=c.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var b=c.textContent.length,k=Math.min(g.start,b);g=g.end===void 0?k:Math.min(g.end,b),!n.extend&&k>g&&(b=g,g=k,k=b),b=Zo(c,k);var z=Zo(c,g);b&&z&&(n.rangeCount!==1||n.anchorNode!==b.node||n.anchorOffset!==b.offset||n.focusNode!==z.node||n.focusOffset!==z.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),n.removeAllRanges(),k>g?(n.addRange(i),n.extend(z.node,z.offset)):(i.setEnd(z.node,z.offset),n.addRange(i)))}}for(i=[],n=c;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)n=i[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var eh=u&&"documentMode"in document&&11>=document.documentMode,po=null,$c=null,el=null,Vc=!1;function Vd(n,i,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Vc||po==null||po!==Ze(g)||(g=po,"selectionStart"in g&&zc(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),el&&Fa(el,g)||(el=g,g=Gc($c,"onSelect"),0<g.length&&(i=new ye("onSelect","select",null,i,c),n.push({event:i,listeners:g}),i.target=po)))}function zl(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var go={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},xo={},Hd={};u&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function $l(n){if(xo[n])return xo[n];if(!go[n])return n;var i=go[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in Hd)return xo[n]=i[c];return n}var Wd=$l("animationend"),Gd=$l("animationiteration"),Kd=$l("animationstart"),Yd=$l("transitionend"),Jd=new Map,Qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(n,i){Jd.set(n,i),l(i,[n])}for(var tl=0;tl<Qd.length;tl++){var cn=Qd[tl],Kn=cn.toLowerCase(),Hc=cn[0].toUpperCase()+cn.slice(1);Ta(Kn,"on"+Hc)}Ta(Wd,"onAnimationEnd"),Ta(Gd,"onAnimationIteration"),Ta(Kd,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Yd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),th=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Vl(n,i,c){var g=n.type||"unknown-event";n.currentTarget=c,sn(g,i,void 0,n),n.currentTarget=null}function Hl(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var g=n[c],b=g.event;g=g.listeners;e:{var k=void 0;if(i)for(var z=g.length-1;0<=z;z--){var he=g[z],we=he.instance,Oe=he.currentTarget;if(he=he.listener,we!==k&&b.isPropagationStopped())break e;Vl(b,he,Oe),k=we}else for(z=0;z<g.length;z++){if(he=g[z],we=he.instance,Oe=he.currentTarget,he=he.listener,we!==k&&b.isPropagationStopped())break e;Vl(b,he,Oe),k=we}}}if(yr)throw n=is,yr=!1,is=null,n}function Nr(n,i){var c=i[Nn];c===void 0&&(c=i[Nn]=new Set);var g=n+"__bubble";c.has(g)||(Wl(i,n,2,!1),c.add(g))}function Wc(n,i,c){var g=0;i&&(g|=4),Wl(c,n,g,i)}var rl="_reactListening"+Math.random().toString(36).slice(2);function yo(n){if(!n[rl]){n[rl]=!0,a.forEach(function(c){c!=="selectionchange"&&(th.has(c)||Wc(c,!1,n),Wc(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[rl]||(i[rl]=!0,Wc("selectionchange",!1,i))}}function Wl(n,i,c,g){switch(uo(i)){case 1:var b=Ol;break;case 4:b=Rl;break;default:b=Ka}c=b.bind(null,i,c,n),b=void 0,!xs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),g?b!==void 0?n.addEventListener(i,c,{capture:!0,passive:b}):n.addEventListener(i,c,!0):b!==void 0?n.addEventListener(i,c,{passive:b}):n.addEventListener(i,c,!1)}function Gl(n,i,c,g,b){var k=g;if((i&1)===0&&(i&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var he=g.stateNode.containerInfo;if(he===b||he.nodeType===8&&he.parentNode===b)break;if(z===4)for(z=g.return;z!==null;){var we=z.tag;if((we===3||we===4)&&(we=z.stateNode.containerInfo,we===b||we.nodeType===8&&we.parentNode===b))return;z=z.return}for(;he!==null;){if(z=Fi(he),z===null)return;if(we=z.tag,we===5||we===6){g=k=z;continue e}he=he.parentNode}}g=g.return}ft(function(){var Oe=k,Xe=Re(c),et=[];e:{var Qe=Jd.get(n);if(Qe!==void 0){var mt=ye,St=n;switch(n){case"keypress":if(Ks(c)===0)break e;case"keydown":case"keyup":mt=Ls;break;case"focusin":St="focus",mt=fr;break;case"focusout":St="blur",mt=fr;break;case"beforeblur":case"afterblur":mt=fr;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Br;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Bl;break;case Wd:case Gd:case Kd:mt=cs;break;case Yd:mt=Bc;break;case"scroll":mt=Ve;break;case"wheel":mt=Uc;break;case"copy":case"cut":case"paste":mt=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Ea}var At=(i&4)!==0,Ss=!At&&n==="scroll",_e=At?Qe!==null?Qe+"Capture":null:Qe;At=[];for(var je=Oe,Ie;je!==null;){Ie=je;var tt=Ie.stateNode;if(Ie.tag===5&&tt!==null&&(Ie=tt,_e!==null&&(tt=wr(je,_e),tt!=null&&At.push(Kl(je,tt,Ie)))),Ss)break;je=je.return}0<At.length&&(Qe=new mt(Qe,St,null,c,Xe),et.push({event:Qe,listeners:At}))}}if((i&7)===0){e:{if(Qe=n==="mouseover"||n==="pointerover",mt=n==="mouseout"||n==="pointerout",Qe&&c!==Gt&&(St=c.relatedTarget||c.fromElement)&&(Fi(St)||St[Ys]))break e;if((mt||Qe)&&(Qe=Xe.window===Xe?Xe:(Qe=Xe.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,mt?(St=c.relatedTarget||c.toElement,mt=Oe,St=St?Fi(St):null,St!==null&&(Ss=zr(St),St!==Ss||St.tag!==5&&St.tag!==6)&&(St=null)):(mt=null,St=Oe),mt!==St)){if(At=Ht,tt="onMouseLeave",_e="onMouseEnter",je="mouse",(n==="pointerout"||n==="pointerover")&&(At=Ea,tt="onPointerLeave",_e="onPointerEnter",je="pointer"),Ss=mt==null?Qe:wo(mt),Ie=St==null?Qe:wo(St),Qe=new At(tt,je+"leave",mt,c,Xe),Qe.target=Ss,Qe.relatedTarget=Ie,tt=null,Fi(Xe)===Oe&&(At=new At(_e,je+"enter",St,c,Xe),At.target=Ie,At.relatedTarget=Ss,tt=At),Ss=tt,mt&&St)t:{for(At=mt,_e=St,je=0,Ie=At;Ie;Ie=bo(Ie))je++;for(Ie=0,tt=_e;tt;tt=bo(tt))Ie++;for(;0<je-Ie;)At=bo(At),je--;for(;0<Ie-je;)_e=bo(_e),Ie--;for(;je--;){if(At===_e||_e!==null&&At===_e.alternate)break t;At=bo(At),_e=bo(_e)}At=null}else At=null;mt!==null&&rh(et,Qe,mt,At,!1),St!==null&&Ss!==null&&rh(et,Ss,St,At,!0)}}e:{if(Qe=Oe?wo(Oe):window,mt=Qe.nodeName&&Qe.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Qe.type==="file")var Lt=Qo;else if($r(Qe))if(mo)Lt=Xr;else{Lt=Cr;var Rt=Ia}else(mt=Qe.nodeName)&&mt.toLowerCase()==="input"&&(Qe.type==="checkbox"||Qe.type==="radio")&&(Lt=Pr);if(Lt&&(Lt=Lt(n,Oe))){qc(et,Lt,c,Xe);break e}Rt&&Rt(n,Qe,Oe),n==="focusout"&&(Rt=Qe._wrapperState)&&Rt.controlled&&Qe.type==="number"&&Ke(Qe,"number",Qe.value)}switch(Rt=Oe?wo(Oe):window,n){case"focusin":($r(Rt)||Rt.contentEditable==="true")&&(po=Rt,$c=Oe,el=null);break;case"focusout":el=$c=po=null;break;case"mousedown":Vc=!0;break;case"contextmenu":case"mouseup":case"dragend":Vc=!1,Vd(et,c,Xe);break;case"selectionchange":if(eh)break;case"keydown":case"keyup":Vd(et,c,Xe)}var Mt;if(xn)e:{switch(n){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else ln?on(n,c)&&($t="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&($t="onCompositionStart");$t&&(Za&&c.locale!=="ko"&&(ln||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&ln&&(Mt=Go()):(Gn=Xe,Ya="value"in Gn?Gn.value:Gn.textContent,ln=!0)),Rt=Gc(Oe,$t),0<Rt.length&&($t=new Rc($t,n,null,c,Xe),et.push({event:$t,listeners:Rt}),Mt?$t.data=Mt:(Mt=_i(c),Mt!==null&&($t.data=Mt)))),(Mt=Ul?Li(n,c):ql(n,c))&&(Oe=Gc(Oe,"onBeforeInput"),0<Oe.length&&(Xe=new Rc("onBeforeInput","beforeinput",null,c,Xe),et.push({event:Xe,listeners:Oe}),Xe.data=Mt))}Hl(et,i)})}function Kl(n,i,c){return{instance:n,listener:i,currentTarget:c}}function Gc(n,i){for(var c=i+"Capture",g=[];n!==null;){var b=n,k=b.stateNode;b.tag===5&&k!==null&&(b=k,k=wr(n,c),k!=null&&g.unshift(Kl(n,k,b)),k=wr(n,i),k!=null&&g.push(Kl(n,k,b))),n=n.return}return g}function bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rh(n,i,c,g,b){for(var k=i._reactName,z=[];c!==null&&c!==g;){var he=c,we=he.alternate,Oe=he.stateNode;if(we!==null&&we===g)break;he.tag===5&&Oe!==null&&(he=Oe,b?(we=wr(c,k),we!=null&&z.unshift(Kl(c,we,he))):b||(we=wr(c,k),we!=null&&z.push(Kl(c,we,he)))),c=c.return}z.length!==0&&n.push({event:i,listeners:z})}var om=/\r\n?/g,lm=/\u0000|\uFFFD/g;function sh(n){return(typeof n=="string"?n:""+n).replace(om,`
`).replace(lm,"")}function Kc(n,i,c){if(i=sh(i),sh(n)!==i&&c)throw Error(s(425))}function sl(){}var Yl=null,vo=null;function Xd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zd=typeof setTimeout=="function"?setTimeout:void 0,nh=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,cm=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(n){return ah.resolve(null).then(n).catch(dm)}:Zd;function dm(n){setTimeout(function(){throw n})}function eu(n,i){var c=i,g=0;do{var b=c.nextSibling;if(n.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(g===0){n.removeChild(b),_a(i);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=b}while(c);_a(i)}function dn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Yn(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return n;i--}else c==="/$"&&i++}n=n.previousSibling}return null}var wn=Math.random().toString(36).slice(2),Oa="__reactFiber$"+wn,nl="__reactProps$"+wn,Ys="__reactContainer$"+wn,Nn="__reactEvents$"+wn,um="__reactListeners$"+wn,hm="__reactHandles$"+wn;function Fi(n){var i=n[Oa];if(i)return i;for(var c=n.parentNode;c;){if(i=c[Ys]||c[Oa]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=Yn(n);n!==null;){if(c=n[Oa])return c;n=Yn(n)}return i}n=c,c=n.parentNode}return null}function al(n){return n=n[Oa]||n[Ys],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(s(33))}function Jl(n){return n[nl]||null}var tu=[],ri=-1;function ga(n){return{current:n}}function gr(n){0>ri||(n.current=tu[ri],tu[ri]=null,ri--)}function br(n,i){ri++,tu[ri]=n.current,n.current=i}var Ti={},Ms=ga(Ti),jn=ga(!1),No=Ti;function il(n,i){var c=n.type.contextTypes;if(!c)return Ti;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===i)return g.__reactInternalMemoizedMaskedChildContext;var b={},k;for(k in c)b[k]=i[k];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=b),b}function Sn(n){return n=n.childContextTypes,n!=null}function Yc(){gr(jn),gr(Ms)}function ih(n,i,c){if(Ms.current!==Ti)throw Error(s(168));br(Ms,i),br(jn,c)}function ru(n,i,c){var g=n.stateNode;if(i=i.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var b in g)if(!(b in i))throw Error(s(108,Q(n)||"Unknown",b));return Se({},c,g)}function jo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ti,No=Ms.current,br(Ms,n),br(jn,jn.current),!0}function oh(n,i,c){var g=n.stateNode;if(!g)throw Error(s(169));c?(n=ru(n,i,No),g.__reactInternalMemoizedMergedChildContext=n,gr(jn),gr(Ms),br(Ms,n)):gr(jn),br(jn,c)}var si=null,Ql=!1,f=!1;function x(n){si===null?si=[n]:si.push(n)}function j(n){Ql=!0,x(n)}function _(){if(!f&&si!==null){f=!0;var n=0,i=or;try{var c=si;for(or=1;n<c.length;n++){var g=c[n];do g=g(!0);while(g!==null)}si=null,Ql=!1}catch(b){throw si!==null&&(si=si.slice(n+1)),eo(Uo,_),b}finally{or=i,f=!1}}return null}var B=[],V=0,G=null,Z=0,te=[],ae=0,ve=null,Pe=1,oe="";function Ne(n,i){B[V++]=Z,B[V++]=G,G=n,Z=i}function Ae(n,i,c){te[ae++]=Pe,te[ae++]=oe,te[ae++]=ve,ve=n;var g=Pe;n=oe;var b=32-Gs(g)-1;g&=~(1<<b),c+=1;var k=32-Gs(i)+b;if(30<k){var z=b-b%5;k=(g&(1<<z)-1).toString(32),g>>=z,b-=z,Pe=1<<32-Gs(i)+b|c<<b|g,oe=k+n}else Pe=1<<k|c<<b|g,oe=n}function ze(n){n.return!==null&&(Ne(n,1),Ae(n,1,0))}function Le(n){for(;n===G;)G=B[--V],B[V]=null,Z=B[--V],B[V]=null;for(;n===ve;)ve=te[--ae],te[ae]=null,oe=te[--ae],te[ae]=null,Pe=te[--ae],te[ae]=null}var Me=null,qe=null,He=!1,We=null;function Ct(n,i){var c=qa(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=n,i=n.deletions,i===null?(n.deletions=[c],n.flags|=16):i.push(c)}function xt(n,i){switch(n.tag){case 5:var c=n.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Me=n,qe=dn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Me=n,qe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=ve!==null?{id:Pe,overflow:oe}:null,n.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=qa(18,null,null,0),c.stateNode=i,c.return=n,n.child=c,Me=n,qe=null,!0):!1;default:return!1}}function Wt(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nt(n){if(He){var i=qe;if(i){var c=i;if(!xt(n,i)){if(Wt(n))throw Error(s(418));i=dn(c.nextSibling);var g=Me;i&&xt(n,i)?Ct(g,c):(n.flags=n.flags&-4097|2,He=!1,Me=n)}}else{if(Wt(n))throw Error(s(418));n.flags=n.flags&-4097|2,He=!1,Me=n}}}function er(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Me=n}function Vr(n){if(n!==Me)return!1;if(!He)return er(n),He=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Xd(n.type,n.memoizedProps)),i&&(i=qe)){if(Wt(n))throw Kt(),Error(s(418));for(;i;)Ct(n,i),i=dn(i.nextSibling)}if(er(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(i===0){qe=dn(n.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}n=n.nextSibling}qe=null}}else qe=Me?dn(n.stateNode.nextSibling):null;return!0}function Kt(){for(var n=qe;n;)n=dn(n.nextSibling)}function yt(){qe=Me=null,He=!1}function rt(n){We===null?We=[n]:We.push(n)}var es=F.ReactCurrentBatchConfig;function qt(n,i,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(s(309));var g=c.stateNode}if(!g)throw Error(s(147,n));var b=g,k=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===k?i.ref:(i=function(z){var he=b.refs;z===null?delete he[k]:he[k]=z},i._stringRef=k,i)}if(typeof n!="string")throw Error(s(284));if(!c._owner)throw Error(s(290,n))}return n}function Zt(n,i){throw n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function _r(n){var i=n._init;return i(n._payload)}function Es(n){function i(_e,je){if(n){var Ie=_e.deletions;Ie===null?(_e.deletions=[je],_e.flags|=16):Ie.push(je)}}function c(_e,je){if(!n)return null;for(;je!==null;)i(_e,je),je=je.sibling;return null}function g(_e,je){for(_e=new Map;je!==null;)je.key!==null?_e.set(je.key,je):_e.set(je.index,je),je=je.sibling;return _e}function b(_e,je){return _e=gl(_e,je),_e.index=0,_e.sibling=null,_e}function k(_e,je,Ie){return _e.index=Ie,n?(Ie=_e.alternate,Ie!==null?(Ie=Ie.index,Ie<je?(_e.flags|=2,je):Ie):(_e.flags|=2,je)):(_e.flags|=1048576,je)}function z(_e){return n&&_e.alternate===null&&(_e.flags|=2),_e}function he(_e,je,Ie,tt){return je===null||je.tag!==6?(je=qm(Ie,_e.mode,tt),je.return=_e,je):(je=b(je,Ie),je.return=_e,je)}function we(_e,je,Ie,tt){var Lt=Ie.type;return Lt===X?Xe(_e,je,Ie.props.children,tt,Ie.key):je!==null&&(je.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===ge&&_r(Lt)===je.type)?(tt=b(je,Ie.props),tt.ref=qt(_e,je,Ie),tt.return=_e,tt):(tt=Ch(Ie.type,Ie.key,Ie.props,null,_e.mode,tt),tt.ref=qt(_e,je,Ie),tt.return=_e,tt)}function Oe(_e,je,Ie,tt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Ie.containerInfo||je.stateNode.implementation!==Ie.implementation?(je=zm(Ie,_e.mode,tt),je.return=_e,je):(je=b(je,Ie.children||[]),je.return=_e,je)}function Xe(_e,je,Ie,tt,Lt){return je===null||je.tag!==7?(je=ac(Ie,_e.mode,tt,Lt),je.return=_e,je):(je=b(je,Ie),je.return=_e,je)}function et(_e,je,Ie){if(typeof je=="string"&&je!==""||typeof je=="number")return je=qm(""+je,_e.mode,Ie),je.return=_e,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case O:return Ie=Ch(je.type,je.key,je.props,null,_e.mode,Ie),Ie.ref=qt(_e,null,je),Ie.return=_e,Ie;case se:return je=zm(je,_e.mode,Ie),je.return=_e,je;case ge:var tt=je._init;return et(_e,tt(je._payload),Ie)}if(ce(je)||fe(je))return je=ac(je,_e.mode,Ie,null),je.return=_e,je;Zt(_e,je)}return null}function Qe(_e,je,Ie,tt){var Lt=je!==null?je.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Lt!==null?null:he(_e,je,""+Ie,tt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case O:return Ie.key===Lt?we(_e,je,Ie,tt):null;case se:return Ie.key===Lt?Oe(_e,je,Ie,tt):null;case ge:return Lt=Ie._init,Qe(_e,je,Lt(Ie._payload),tt)}if(ce(Ie)||fe(Ie))return Lt!==null?null:Xe(_e,je,Ie,tt,null);Zt(_e,Ie)}return null}function mt(_e,je,Ie,tt,Lt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return _e=_e.get(Ie)||null,he(je,_e,""+tt,Lt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case O:return _e=_e.get(tt.key===null?Ie:tt.key)||null,we(je,_e,tt,Lt);case se:return _e=_e.get(tt.key===null?Ie:tt.key)||null,Oe(je,_e,tt,Lt);case ge:var Rt=tt._init;return mt(_e,je,Ie,Rt(tt._payload),Lt)}if(ce(tt)||fe(tt))return _e=_e.get(Ie)||null,Xe(je,_e,tt,Lt,null);Zt(je,tt)}return null}function St(_e,je,Ie,tt){for(var Lt=null,Rt=null,Mt=je,$t=je=0,en=null;Mt!==null&&$t<Ie.length;$t++){Mt.index>$t?(en=Mt,Mt=null):en=Mt.sibling;var mr=Qe(_e,Mt,Ie[$t],tt);if(mr===null){Mt===null&&(Mt=en);break}n&&Mt&&mr.alternate===null&&i(_e,Mt),je=k(mr,je,$t),Rt===null?Lt=mr:Rt.sibling=mr,Rt=mr,Mt=en}if($t===Ie.length)return c(_e,Mt),He&&Ne(_e,$t),Lt;if(Mt===null){for(;$t<Ie.length;$t++)Mt=et(_e,Ie[$t],tt),Mt!==null&&(je=k(Mt,je,$t),Rt===null?Lt=Mt:Rt.sibling=Mt,Rt=Mt);return He&&Ne(_e,$t),Lt}for(Mt=g(_e,Mt);$t<Ie.length;$t++)en=mt(Mt,_e,$t,Ie[$t],tt),en!==null&&(n&&en.alternate!==null&&Mt.delete(en.key===null?$t:en.key),je=k(en,je,$t),Rt===null?Lt=en:Rt.sibling=en,Rt=en);return n&&Mt.forEach(function(xl){return i(_e,xl)}),He&&Ne(_e,$t),Lt}function At(_e,je,Ie,tt){var Lt=fe(Ie);if(typeof Lt!="function")throw Error(s(150));if(Ie=Lt.call(Ie),Ie==null)throw Error(s(151));for(var Rt=Lt=null,Mt=je,$t=je=0,en=null,mr=Ie.next();Mt!==null&&!mr.done;$t++,mr=Ie.next()){Mt.index>$t?(en=Mt,Mt=null):en=Mt.sibling;var xl=Qe(_e,Mt,mr.value,tt);if(xl===null){Mt===null&&(Mt=en);break}n&&Mt&&xl.alternate===null&&i(_e,Mt),je=k(xl,je,$t),Rt===null?Lt=xl:Rt.sibling=xl,Rt=xl,Mt=en}if(mr.done)return c(_e,Mt),He&&Ne(_e,$t),Lt;if(Mt===null){for(;!mr.done;$t++,mr=Ie.next())mr=et(_e,mr.value,tt),mr!==null&&(je=k(mr,je,$t),Rt===null?Lt=mr:Rt.sibling=mr,Rt=mr);return He&&Ne(_e,$t),Lt}for(Mt=g(_e,Mt);!mr.done;$t++,mr=Ie.next())mr=mt(Mt,_e,$t,mr.value,tt),mr!==null&&(n&&mr.alternate!==null&&Mt.delete(mr.key===null?$t:mr.key),je=k(mr,je,$t),Rt===null?Lt=mr:Rt.sibling=mr,Rt=mr);return n&&Mt.forEach(function(e5){return i(_e,e5)}),He&&Ne(_e,$t),Lt}function Ss(_e,je,Ie,tt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===X&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case O:e:{for(var Lt=Ie.key,Rt=je;Rt!==null;){if(Rt.key===Lt){if(Lt=Ie.type,Lt===X){if(Rt.tag===7){c(_e,Rt.sibling),je=b(Rt,Ie.props.children),je.return=_e,_e=je;break e}}else if(Rt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===ge&&_r(Lt)===Rt.type){c(_e,Rt.sibling),je=b(Rt,Ie.props),je.ref=qt(_e,Rt,Ie),je.return=_e,_e=je;break e}c(_e,Rt);break}else i(_e,Rt);Rt=Rt.sibling}Ie.type===X?(je=ac(Ie.props.children,_e.mode,tt,Ie.key),je.return=_e,_e=je):(tt=Ch(Ie.type,Ie.key,Ie.props,null,_e.mode,tt),tt.ref=qt(_e,je,Ie),tt.return=_e,_e=tt)}return z(_e);case se:e:{for(Rt=Ie.key;je!==null;){if(je.key===Rt)if(je.tag===4&&je.stateNode.containerInfo===Ie.containerInfo&&je.stateNode.implementation===Ie.implementation){c(_e,je.sibling),je=b(je,Ie.children||[]),je.return=_e,_e=je;break e}else{c(_e,je);break}else i(_e,je);je=je.sibling}je=zm(Ie,_e.mode,tt),je.return=_e,_e=je}return z(_e);case ge:return Rt=Ie._init,Ss(_e,je,Rt(Ie._payload),tt)}if(ce(Ie))return St(_e,je,Ie,tt);if(fe(Ie))return At(_e,je,Ie,tt);Zt(_e,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,je!==null&&je.tag===6?(c(_e,je.sibling),je=b(je,Ie),je.return=_e,_e=je):(c(_e,je),je=qm(Ie,_e.mode,tt),je.return=_e,_e=je),z(_e)):c(_e,je)}return Ss}var ds=Es(!0),Ur=Es(!1),Ns=ga(null),Ds=null,Tr=null,sr=null;function cr(){sr=Tr=Ds=null}function Or(n){var i=Ns.current;gr(Ns),n._currentValue=i}function dr(n,i,c){for(;n!==null;){var g=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,g!==null&&(g.childLanes|=i)):g!==null&&(g.childLanes&i)!==i&&(g.childLanes|=i),n===c)break;n=n.return}}function Hr(n,i){Ds=n,sr=Tr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Qn=!0),n.firstContext=null)}function Wr(n){var i=n._currentValue;if(sr!==n)if(n={context:n,memoizedValue:i,next:null},Tr===null){if(Ds===null)throw Error(s(308));Tr=n,Ds.dependencies={lanes:0,firstContext:n}}else Tr=Tr.next=n;return i}var jr=null;function Js(n){jr===null?jr=[n]:jr.push(n)}function vr(n,i,c,g){var b=i.interleaved;return b===null?(c.next=c,Js(i)):(c.next=b.next,b.next=c),i.interleaved=c,Sr(n,g)}function Sr(n,i){n.lanes|=i;var c=n.alternate;for(c!==null&&(c.lanes|=i),c=n,n=n.return;n!==null;)n.childLanes|=i,c=n.alternate,c!==null&&(c.childLanes|=i),c=n,n=n.return;return c.tag===3?c.stateNode:null}var us=!1;function Bs(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kn(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ts(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function rs(n,i,c){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(ur&2)!==0){var b=g.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),g.pending=i,Sr(n,c)}return b=g.interleaved,b===null?(i.next=i,Js(g)):(i.next=b.next,b.next=i),g.interleaved=i,Sr(n,c)}function Qs(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var g=i.lanes;g&=n.pendingLanes,c|=g,i.lanes=c,zo(n,c)}}function kr(n,i){var c=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var b=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var z={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};k===null?b=k=z:k=k.next=z,c=c.next}while(c!==null);k===null?b=k=i:k=k.next=i}else b=k=i;c={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:k,shared:g.shared,effects:g.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}function Xs(n,i,c,g){var b=n.updateQueue;us=!1;var k=b.firstBaseUpdate,z=b.lastBaseUpdate,he=b.shared.pending;if(he!==null){b.shared.pending=null;var we=he,Oe=we.next;we.next=null,z===null?k=Oe:z.next=Oe,z=we;var Xe=n.alternate;Xe!==null&&(Xe=Xe.updateQueue,he=Xe.lastBaseUpdate,he!==z&&(he===null?Xe.firstBaseUpdate=Oe:he.next=Oe,Xe.lastBaseUpdate=we))}if(k!==null){var et=b.baseState;z=0,Xe=Oe=we=null,he=k;do{var Qe=he.lane,mt=he.eventTime;if((g&Qe)===Qe){Xe!==null&&(Xe=Xe.next={eventTime:mt,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var St=n,At=he;switch(Qe=i,mt=c,At.tag){case 1:if(St=At.payload,typeof St=="function"){et=St.call(mt,et,Qe);break e}et=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=At.payload,Qe=typeof St=="function"?St.call(mt,et,Qe):St,Qe==null)break e;et=Se({},et,Qe);break e;case 2:us=!0}}he.callback!==null&&he.lane!==0&&(n.flags|=64,Qe=b.effects,Qe===null?b.effects=[he]:Qe.push(he))}else mt={eventTime:mt,lane:Qe,tag:he.tag,payload:he.payload,callback:he.callback,next:null},Xe===null?(Oe=Xe=mt,we=et):Xe=Xe.next=mt,z|=Qe;if(he=he.next,he===null){if(he=b.shared.pending,he===null)break;Qe=he,he=Qe.next,Qe.next=null,b.lastBaseUpdate=Qe,b.shared.pending=null}}while(!0);if(Xe===null&&(we=et),b.baseState=we,b.firstBaseUpdate=Oe,b.lastBaseUpdate=Xe,i=b.shared.interleaved,i!==null){b=i;do z|=b.lane,b=b.next;while(b!==i)}else k===null&&(b.shared.lanes=0);tc|=z,n.lanes=z,n.memoizedState=et}}function Jn(n,i,c){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var g=n[i],b=g.callback;if(b!==null){if(g.callback=null,g=c,typeof b!="function")throw Error(s(191,b));b.call(g)}}}var xa={},Is=ga(xa),ss=ga(xa),Oi=ga(xa);function ni(n){if(n===xa)throw Error(s(174));return n}function ol(n,i){switch(br(Oi,i),br(ss,n),br(Is,xa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:jt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=jt(i,n)}gr(Is),br(Is,i)}function Ra(){gr(Is),gr(ss),gr(Oi)}function lh(n){ni(Oi.current);var i=ni(Is.current),c=jt(i,n.type);i!==c&&(br(ss,n),br(Is,c))}function su(n){ss.current===n&&(gr(Is),gr(ss))}var Dr=ga(0);function ya(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var nu=[];function au(){for(var n=0;n<nu.length;n++)nu[n]._workInProgressVersionPrimary=null;nu.length=0}var Jc=F.ReactCurrentDispatcher,Qc=F.ReactCurrentBatchConfig,Ma=0,Rr=null,hs=null,ns=null,ll=!1,ai=!1,cl=0,fm=0;function js(){throw Error(s(321))}function Xc(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!ws(n[c],i[c]))return!1;return!0}function Xl(n,i,c,g,b,k){if(Ma=k,Rr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Jc.current=n===null||n.memoizedState===null?Av:Cv,n=c(g,b),ai){k=0;do{if(ai=!1,cl=0,25<=k)throw Error(s(301));k+=1,ns=hs=null,i.updateQueue=null,Jc.current=Pv,n=c(g,b)}while(ai)}if(Jc.current=fh,i=hs!==null&&hs.next!==null,Ma=0,ns=hs=Rr=null,ll=!1,i)throw Error(s(300));return n}function Ba(){var n=cl!==0;return cl=0,n}function ba(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?Rr.memoizedState=ns=n:ns=ns.next=n,ns}function Mn(){if(hs===null){var n=Rr.alternate;n=n!==null?n.memoizedState:null}else n=hs.next;var i=ns===null?Rr.memoizedState:ns.next;if(i!==null)ns=i,hs=n;else{if(n===null)throw Error(s(310));hs=n,n={memoizedState:hs.memoizedState,baseState:hs.baseState,baseQueue:hs.baseQueue,queue:hs.queue,next:null},ns===null?Rr.memoizedState=ns=n:ns=ns.next=n}return ns}function Zl(n,i){return typeof i=="function"?i(n):i}function Zc(n){var i=Mn(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var g=hs,b=g.baseQueue,k=c.pending;if(k!==null){if(b!==null){var z=b.next;b.next=k.next,k.next=z}g.baseQueue=b=k,c.pending=null}if(b!==null){k=b.next,g=g.baseState;var he=z=null,we=null,Oe=k;do{var Xe=Oe.lane;if((Ma&Xe)===Xe)we!==null&&(we=we.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),g=Oe.hasEagerState?Oe.eagerState:n(g,Oe.action);else{var et={lane:Xe,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};we===null?(he=we=et,z=g):we=we.next=et,Rr.lanes|=Xe,tc|=Xe}Oe=Oe.next}while(Oe!==null&&Oe!==k);we===null?z=g:we.next=he,ws(g,i.memoizedState)||(Qn=!0),i.memoizedState=g,i.baseState=z,i.baseQueue=we,c.lastRenderedState=g}if(n=c.interleaved,n!==null){b=n;do k=b.lane,Rr.lanes|=k,tc|=k,b=b.next;while(b!==n)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ri(n){var i=Mn(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var g=c.dispatch,b=c.pending,k=i.memoizedState;if(b!==null){c.pending=null;var z=b=b.next;do k=n(k,z.action),z=z.next;while(z!==b);ws(k,i.memoizedState)||(Qn=!0),i.memoizedState=k,i.baseQueue===null&&(i.baseState=k),c.lastRenderedState=k}return[k,g]}function ch(){}function iu(n,i){var c=Rr,g=Mn(),b=i(),k=!ws(g.memoizedState,b);if(k&&(g.memoizedState=b,Qn=!0),g=g.queue,rd(uh.bind(null,c,g,n),[n]),g.getSnapshot!==i||k||ns!==null&&ns.memoizedState.tag&1){if(c.flags|=2048,Bn(9,ou.bind(null,c,g,b,i),void 0,null),Zs===null)throw Error(s(349));(Ma&30)!==0||dh(c,i,b)}return b}function dh(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=Rr.updateQueue,i===null?(i={lastEffect:null,stores:null},Rr.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function ou(n,i,c,g){i.value=c,i.getSnapshot=g,dl(i)&&ed(n)}function uh(n,i,c){return c(function(){dl(i)&&ed(n)})}function dl(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!ws(n,c)}catch{return!0}}function ed(n){var i=Sr(n,1);i!==null&&di(i,n,1,-1)}function ec(n){var i=ba();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:n},i.queue=n,n=n.dispatch=kv.bind(null,Rr,n),[i.memoizedState,n]}function Bn(n,i,c,g){return n={tag:n,create:i,destroy:c,deps:g,next:null},i=Rr.updateQueue,i===null?(i={lastEffect:null,stores:null},Rr.updateQueue=i,i.lastEffect=n.next=n):(c=i.lastEffect,c===null?i.lastEffect=n.next=n:(g=c.next,c.next=n,n.next=g,i.lastEffect=n)),n}function ii(){return Mn().memoizedState}function va(n,i,c,g){var b=ba();Rr.flags|=n,b.memoizedState=Bn(1|i,c,void 0,g===void 0?null:g)}function So(n,i,c,g){var b=Mn();g=g===void 0?null:g;var k=void 0;if(hs!==null){var z=hs.memoizedState;if(k=z.destroy,g!==null&&Xc(g,z.deps)){b.memoizedState=Bn(i,c,k,g);return}}Rr.flags|=n,b.memoizedState=Bn(1|i,c,k,g)}function td(n,i){return va(8390656,8,n,i)}function rd(n,i){return So(2048,8,n,i)}function hh(n,i){return So(4,2,n,i)}function sd(n,i){return So(4,4,n,i)}function nd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Z0(n,i,c){return c=c!=null?c.concat([n]):null,So(4,4,nd.bind(null,i,n),c)}function mm(){}function eg(n,i){var c=Mn();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Xc(i,g[1])?g[0]:(c.memoizedState=[n,i],n)}function tg(n,i){var c=Mn();i=i===void 0?null:i;var g=c.memoizedState;return g!==null&&i!==null&&Xc(i,g[1])?g[0]:(n=n(),c.memoizedState=[n,i],n)}function rg(n,i,c){return(Ma&21)===0?(n.baseState&&(n.baseState=!1,Qn=!0),n.memoizedState=c):(ws(c,i)||(c=Dc(),Rr.lanes|=c,tc|=c,n.baseState=!0),i)}function jv(n,i){var c=or;or=c!==0&&4>c?c:4,n(!0);var g=Qc.transition;Qc.transition={};try{n(!1),i()}finally{or=c,Qc.transition=g}}function sg(){return Mn().memoizedState}function Sv(n,i,c){var g=ml(n);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},ng(n))ag(i,c);else if(c=vr(n,i,c,g),c!==null){var b=qn();di(c,n,g,b),ig(c,i,g)}}function kv(n,i,c){var g=ml(n),b={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(ng(n))ag(i,b);else{var k=n.alternate;if(n.lanes===0&&(k===null||k.lanes===0)&&(k=i.lastRenderedReducer,k!==null))try{var z=i.lastRenderedState,he=k(z,c);if(b.hasEagerState=!0,b.eagerState=he,ws(he,z)){var we=i.interleaved;we===null?(b.next=b,Js(i)):(b.next=we.next,we.next=b),i.interleaved=b;return}}catch{}finally{}c=vr(n,i,b,g),c!==null&&(b=qn(),di(c,n,g,b),ig(c,i,g))}}function ng(n){var i=n.alternate;return n===Rr||i!==null&&i===Rr}function ag(n,i){ai=ll=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function ig(n,i,c){if((c&4194240)!==0){var g=i.lanes;g&=n.pendingLanes,c|=g,i.lanes=c,zo(n,c)}}var fh={readContext:Wr,useCallback:js,useContext:js,useEffect:js,useImperativeHandle:js,useInsertionEffect:js,useLayoutEffect:js,useMemo:js,useReducer:js,useRef:js,useState:js,useDebugValue:js,useDeferredValue:js,useTransition:js,useMutableSource:js,useSyncExternalStore:js,useId:js,unstable_isNewReconciler:!1},Av={readContext:Wr,useCallback:function(n,i){return ba().memoizedState=[n,i===void 0?null:i],n},useContext:Wr,useEffect:td,useImperativeHandle:function(n,i,c){return c=c!=null?c.concat([n]):null,va(4194308,4,nd.bind(null,i,n),c)},useLayoutEffect:function(n,i){return va(4194308,4,n,i)},useInsertionEffect:function(n,i){return va(4,2,n,i)},useMemo:function(n,i){var c=ba();return i=i===void 0?null:i,n=n(),c.memoizedState=[n,i],n},useReducer:function(n,i,c){var g=ba();return i=c!==void 0?c(i):i,g.memoizedState=g.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},g.queue=n,n=n.dispatch=Sv.bind(null,Rr,n),[g.memoizedState,n]},useRef:function(n){var i=ba();return n={current:n},i.memoizedState=n},useState:ec,useDebugValue:mm,useDeferredValue:function(n){return ba().memoizedState=n},useTransition:function(){var n=ec(!1),i=n[0];return n=jv.bind(null,n[1]),ba().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,c){var g=Rr,b=ba();if(He){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Zs===null)throw Error(s(349));(Ma&30)!==0||dh(g,i,c)}b.memoizedState=c;var k={value:c,getSnapshot:i};return b.queue=k,td(uh.bind(null,g,k,n),[n]),g.flags|=2048,Bn(9,ou.bind(null,g,k,c,i),void 0,null),c},useId:function(){var n=ba(),i=Zs.identifierPrefix;if(He){var c=oe,g=Pe;c=(g&~(1<<32-Gs(g)-1)).toString(32)+c,i=":"+i+"R"+c,c=cl++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=fm++,i=":"+i+"r"+c.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Cv={readContext:Wr,useCallback:eg,useContext:Wr,useEffect:rd,useImperativeHandle:Z0,useInsertionEffect:hh,useLayoutEffect:sd,useMemo:tg,useReducer:Zc,useRef:ii,useState:function(){return Zc(Zl)},useDebugValue:mm,useDeferredValue:function(n){var i=Mn();return rg(i,hs.memoizedState,n)},useTransition:function(){var n=Zc(Zl)[0],i=Mn().memoizedState;return[n,i]},useMutableSource:ch,useSyncExternalStore:iu,useId:sg,unstable_isNewReconciler:!1},Pv={readContext:Wr,useCallback:eg,useContext:Wr,useEffect:rd,useImperativeHandle:Z0,useInsertionEffect:hh,useLayoutEffect:sd,useMemo:tg,useReducer:Ri,useRef:ii,useState:function(){return Ri(Zl)},useDebugValue:mm,useDeferredValue:function(n){var i=Mn();return hs===null?i.memoizedState=n:rg(i,hs.memoizedState,n)},useTransition:function(){var n=Ri(Zl)[0],i=Mn().memoizedState;return[n,i]},useMutableSource:ch,useSyncExternalStore:iu,useId:sg,unstable_isNewReconciler:!1};function oi(n,i){if(n&&n.defaultProps){i=Se({},i),n=n.defaultProps;for(var c in n)i[c]===void 0&&(i[c]=n[c]);return i}return i}function pm(n,i,c,g){i=n.memoizedState,c=c(g,i),c=c==null?i:Se({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var mh={isMounted:function(n){return(n=n._reactInternals)?zr(n)===n:!1},enqueueSetState:function(n,i,c){n=n._reactInternals;var g=qn(),b=ml(n),k=ts(g,b);k.payload=i,c!=null&&(k.callback=c),i=rs(n,k,b),i!==null&&(di(i,n,b,g),Qs(i,n,b))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var g=qn(),b=ml(n),k=ts(g,b);k.tag=1,k.payload=i,c!=null&&(k.callback=c),i=rs(n,k,b),i!==null&&(di(i,n,b,g),Qs(i,n,b))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=qn(),g=ml(n),b=ts(c,g);b.tag=2,i!=null&&(b.callback=i),i=rs(n,b,g),i!==null&&(di(i,n,g,c),Qs(i,n,g))}};function og(n,i,c,g,b,k,z){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,k,z):i.prototype&&i.prototype.isPureReactComponent?!Fa(c,g)||!Fa(b,k):!0}function lg(n,i,c){var g=!1,b=Ti,k=i.contextType;return typeof k=="object"&&k!==null?k=Wr(k):(b=Sn(i)?No:Ms.current,g=i.contextTypes,k=(g=g!=null)?il(n,b):Ti),i=new i(c,k),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=mh,n.stateNode=i,i._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=b,n.__reactInternalMemoizedMaskedChildContext=k),i}function cg(n,i,c,g){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,g),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,g),i.state!==n&&mh.enqueueReplaceState(i,i.state,null)}function gm(n,i,c,g){var b=n.stateNode;b.props=c,b.state=n.memoizedState,b.refs={},Bs(n);var k=i.contextType;typeof k=="object"&&k!==null?b.context=Wr(k):(k=Sn(i)?No:Ms.current,b.context=il(n,k)),b.state=n.memoizedState,k=i.getDerivedStateFromProps,typeof k=="function"&&(pm(n,i,k,c),b.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&mh.enqueueReplaceState(b,b.state,null),Xs(n,c,b,g),b.state=n.memoizedState),typeof b.componentDidMount=="function"&&(n.flags|=4194308)}function ad(n,i){try{var c="",g=i;do c+=ne(g),g=g.return;while(g);var b=c}catch(k){b=`
Error generating stack: `+k.message+`
`+k.stack}return{value:n,source:i,stack:b,digest:null}}function xm(n,i,c){return{value:n,source:null,stack:c??null,digest:i??null}}function ym(n,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var _v=typeof WeakMap=="function"?WeakMap:Map;function dg(n,i,c){c=ts(-1,c),c.tag=3,c.payload={element:null};var g=i.value;return c.callback=function(){wh||(wh=!0,Im=g),ym(n,i)},c}function ug(n,i,c){c=ts(-1,c),c.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var b=i.value;c.payload=function(){return g(b)},c.callback=function(){ym(n,i)}}var k=n.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(c.callback=function(){ym(n,i),typeof g!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var z=i.stack;this.componentDidCatch(i.value,{componentStack:z!==null?z:""})}),c}function hg(n,i,c){var g=n.pingCache;if(g===null){g=n.pingCache=new _v;var b=new Set;g.set(i,b)}else b=g.get(i),b===void 0&&(b=new Set,g.set(i,b));b.has(c)||(b.add(c),n=$v.bind(null,n,i,c),i.then(n,n))}function fg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function mg(n,i,c,g,b){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=ts(-1,1),i.tag=2,rs(c,i,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=b,n)}var Lv=F.ReactCurrentOwner,Qn=!1;function Un(n,i,c,g){i.child=n===null?Ur(i,null,c,g):ds(i,n.child,c,g)}function pg(n,i,c,g,b){c=c.render;var k=i.ref;return Hr(i,b),g=Xl(n,i,c,g,k,b),c=Ba(),n!==null&&!Qn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~b,ko(n,i,b)):(He&&c&&ze(i),i.flags|=1,Un(n,i,g,b),i.child)}function gg(n,i,c,g,b){if(n===null){var k=c.type;return typeof k=="function"&&!Um(k)&&k.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=k,xg(n,i,k,g,b)):(n=Ch(c.type,null,g,i,i.mode,b),n.ref=i.ref,n.return=i,i.child=n)}if(k=n.child,(n.lanes&b)===0){var z=k.memoizedProps;if(c=c.compare,c=c!==null?c:Fa,c(z,g)&&n.ref===i.ref)return ko(n,i,b)}return i.flags|=1,n=gl(k,g),n.ref=i.ref,n.return=i,i.child=n}function xg(n,i,c,g,b){if(n!==null){var k=n.memoizedProps;if(Fa(k,g)&&n.ref===i.ref)if(Qn=!1,i.pendingProps=g=k,(n.lanes&b)!==0)(n.flags&131072)!==0&&(Qn=!0);else return i.lanes=n.lanes,ko(n,i,b)}return bm(n,i,c,g,b)}function yg(n,i,c){var g=i.pendingProps,b=g.children,k=n!==null?n.memoizedState:null;if(g.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(od,wa),wa|=c;else{if((c&1073741824)===0)return n=k!==null?k.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,br(od,wa),wa|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:c,br(od,wa),wa|=g}else k!==null?(g=k.baseLanes|c,i.memoizedState=null):g=c,br(od,wa),wa|=g;return Un(n,i,b,c),i.child}function bg(n,i){var c=i.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function bm(n,i,c,g,b){var k=Sn(c)?No:Ms.current;return k=il(i,k),Hr(i,b),c=Xl(n,i,c,g,k,b),g=Ba(),n!==null&&!Qn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~b,ko(n,i,b)):(He&&g&&ze(i),i.flags|=1,Un(n,i,c,b),i.child)}function vg(n,i,c,g,b){if(Sn(c)){var k=!0;jo(i)}else k=!1;if(Hr(i,b),i.stateNode===null)gh(n,i),lg(i,c,g),gm(i,c,g,b),g=!0;else if(n===null){var z=i.stateNode,he=i.memoizedProps;z.props=he;var we=z.context,Oe=c.contextType;typeof Oe=="object"&&Oe!==null?Oe=Wr(Oe):(Oe=Sn(c)?No:Ms.current,Oe=il(i,Oe));var Xe=c.getDerivedStateFromProps,et=typeof Xe=="function"||typeof z.getSnapshotBeforeUpdate=="function";et||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(he!==g||we!==Oe)&&cg(i,z,g,Oe),us=!1;var Qe=i.memoizedState;z.state=Qe,Xs(i,g,z,b),we=i.memoizedState,he!==g||Qe!==we||jn.current||us?(typeof Xe=="function"&&(pm(i,c,Xe,g),we=i.memoizedState),(he=us||og(i,c,he,g,Qe,we,Oe))?(et||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(i.flags|=4194308)):(typeof z.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=g,i.memoizedState=we),z.props=g,z.state=we,z.context=Oe,g=he):(typeof z.componentDidMount=="function"&&(i.flags|=4194308),g=!1)}else{z=i.stateNode,kn(n,i),he=i.memoizedProps,Oe=i.type===i.elementType?he:oi(i.type,he),z.props=Oe,et=i.pendingProps,Qe=z.context,we=c.contextType,typeof we=="object"&&we!==null?we=Wr(we):(we=Sn(c)?No:Ms.current,we=il(i,we));var mt=c.getDerivedStateFromProps;(Xe=typeof mt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(he!==et||Qe!==we)&&cg(i,z,g,we),us=!1,Qe=i.memoizedState,z.state=Qe,Xs(i,g,z,b);var St=i.memoizedState;he!==et||Qe!==St||jn.current||us?(typeof mt=="function"&&(pm(i,c,mt,g),St=i.memoizedState),(Oe=us||og(i,c,Oe,g,Qe,St,we)||!1)?(Xe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(g,St,we),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(g,St,we)),typeof z.componentDidUpdate=="function"&&(i.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof z.componentDidUpdate!="function"||he===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||he===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=1024),i.memoizedProps=g,i.memoizedState=St),z.props=g,z.state=St,z.context=we,g=Oe):(typeof z.componentDidUpdate!="function"||he===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||he===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=1024),g=!1)}return vm(n,i,c,g,k,b)}function vm(n,i,c,g,b,k){bg(n,i);var z=(i.flags&128)!==0;if(!g&&!z)return b&&oh(i,c,!1),ko(n,i,k);g=i.stateNode,Lv.current=i;var he=z&&typeof c.getDerivedStateFromError!="function"?null:g.render();return i.flags|=1,n!==null&&z?(i.child=ds(i,n.child,null,k),i.child=ds(i,null,he,k)):Un(n,i,he,k),i.memoizedState=g.state,b&&oh(i,c,!0),i.child}function wg(n){var i=n.stateNode;i.pendingContext?ih(n,i.pendingContext,i.pendingContext!==i.context):i.context&&ih(n,i.context,!1),ol(n,i.containerInfo)}function Ng(n,i,c,g,b){return yt(),rt(b),i.flags|=256,Un(n,i,c,g),i.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function Nm(n){return{baseLanes:n,cachePool:null,transitions:null}}function jg(n,i,c){var g=i.pendingProps,b=Dr.current,k=!1,z=(i.flags&128)!==0,he;if((he=z)||(he=n!==null&&n.memoizedState===null?!1:(b&2)!==0),he?(k=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(b|=1),br(Dr,b&1),n===null)return Nt(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(z=g.children,n=g.fallback,k?(g=i.mode,k=i.child,z={mode:"hidden",children:z},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=z):k=Ph(z,g,0,null),n=ac(n,g,c,null),k.return=i,n.return=i,k.sibling=n,i.child=k,i.child.memoizedState=Nm(c),i.memoizedState=wm,n):jm(i,z));if(b=n.memoizedState,b!==null&&(he=b.dehydrated,he!==null))return Ev(n,i,z,g,he,b,c);if(k){k=g.fallback,z=i.mode,b=n.child,he=b.sibling;var we={mode:"hidden",children:g.children};return(z&1)===0&&i.child!==b?(g=i.child,g.childLanes=0,g.pendingProps=we,i.deletions=null):(g=gl(b,we),g.subtreeFlags=b.subtreeFlags&14680064),he!==null?k=gl(he,k):(k=ac(k,z,c,null),k.flags|=2),k.return=i,g.return=i,g.sibling=k,i.child=g,g=k,k=i.child,z=n.child.memoizedState,z=z===null?Nm(c):{baseLanes:z.baseLanes|c,cachePool:null,transitions:z.transitions},k.memoizedState=z,k.childLanes=n.childLanes&~c,i.memoizedState=wm,g}return k=n.child,n=k.sibling,g=gl(k,{mode:"visible",children:g.children}),(i.mode&1)===0&&(g.lanes=c),g.return=i,g.sibling=null,n!==null&&(c=i.deletions,c===null?(i.deletions=[n],i.flags|=16):c.push(n)),i.child=g,i.memoizedState=null,g}function jm(n,i){return i=Ph({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ph(n,i,c,g){return g!==null&&rt(g),ds(i,n.child,null,c),n=jm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ev(n,i,c,g,b,k,z){if(c)return i.flags&256?(i.flags&=-257,g=xm(Error(s(422))),ph(n,i,z,g)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(k=g.fallback,b=i.mode,g=Ph({mode:"visible",children:g.children},b,0,null),k=ac(k,b,z,null),k.flags|=2,g.return=i,k.return=i,g.sibling=k,i.child=g,(i.mode&1)!==0&&ds(i,n.child,null,z),i.child.memoizedState=Nm(z),i.memoizedState=wm,k);if((i.mode&1)===0)return ph(n,i,z,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var he=g.dgst;return g=he,k=Error(s(419)),g=xm(k,g,void 0),ph(n,i,z,g)}if(he=(z&n.childLanes)!==0,Qn||he){if(g=Zs,g!==null){switch(z&-z){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|z))!==0?0:b,b!==0&&b!==k.retryLane&&(k.retryLane=b,Sr(n,b),di(g,n,b,-1))}return Bm(),g=xm(Error(s(421))),ph(n,i,z,g)}return b.data==="$?"?(i.flags|=128,i.child=n.child,i=Vv.bind(null,n),b._reactRetry=i,null):(n=k.treeContext,qe=dn(b.nextSibling),Me=i,He=!0,We=null,n!==null&&(te[ae++]=Pe,te[ae++]=oe,te[ae++]=ve,Pe=n.id,oe=n.overflow,ve=i),i=jm(i,g.children),i.flags|=4096,i)}function Sg(n,i,c){n.lanes|=i;var g=n.alternate;g!==null&&(g.lanes|=i),dr(n.return,i,c)}function Sm(n,i,c,g,b){var k=n.memoizedState;k===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:b}:(k.isBackwards=i,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=c,k.tailMode=b)}function kg(n,i,c){var g=i.pendingProps,b=g.revealOrder,k=g.tail;if(Un(n,i,g.children,c),g=Dr.current,(g&2)!==0)g=g&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Sg(n,c,i);else if(n.tag===19)Sg(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(br(Dr,g),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)n=c.alternate,n!==null&&ya(n)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),Sm(i,!1,b,c,k);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(n=b.alternate,n!==null&&ya(n)===null){i.child=b;break}n=b.sibling,b.sibling=c,c=b,b=n}Sm(i,!0,c,null,k);break;case"together":Sm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gh(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ko(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),tc|=i.lanes,(c&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,c=gl(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=gl(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function Dv(n,i,c){switch(i.tag){case 3:wg(i),yt();break;case 5:lh(i);break;case 1:Sn(i.type)&&jo(i);break;case 4:ol(i,i.stateNode.containerInfo);break;case 10:var g=i.type._context,b=i.memoizedProps.value;br(Ns,g._currentValue),g._currentValue=b;break;case 13:if(g=i.memoizedState,g!==null)return g.dehydrated!==null?(br(Dr,Dr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?jg(n,i,c):(br(Dr,Dr.current&1),n=ko(n,i,c),n!==null?n.sibling:null);br(Dr,Dr.current&1);break;case 19:if(g=(c&i.childLanes)!==0,(n.flags&128)!==0){if(g)return kg(n,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),br(Dr,Dr.current),g)break;return null;case 22:case 23:return i.lanes=0,yg(n,i,c)}return ko(n,i,c)}var Ag,km,Cg,Pg;Ag=function(n,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},km=function(){},Cg=function(n,i,c,g){var b=n.memoizedProps;if(b!==g){n=i.stateNode,ni(Is.current);var k=null;switch(c){case"input":b=Te(n,b),g=Te(n,g),k=[];break;case"select":b=Se({},b,{value:void 0}),g=Se({},g,{value:void 0}),k=[];break;case"textarea":b=Ce(n,b),g=Ce(n,g),k=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=sl)}nr(c,g);var z;c=null;for(Oe in b)if(!g.hasOwnProperty(Oe)&&b.hasOwnProperty(Oe)&&b[Oe]!=null)if(Oe==="style"){var he=b[Oe];for(z in he)he.hasOwnProperty(z)&&(c||(c={}),c[z]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(o.hasOwnProperty(Oe)?k||(k=[]):(k=k||[]).push(Oe,null));for(Oe in g){var we=g[Oe];if(he=b?.[Oe],g.hasOwnProperty(Oe)&&we!==he&&(we!=null||he!=null))if(Oe==="style")if(he){for(z in he)!he.hasOwnProperty(z)||we&&we.hasOwnProperty(z)||(c||(c={}),c[z]="");for(z in we)we.hasOwnProperty(z)&&he[z]!==we[z]&&(c||(c={}),c[z]=we[z])}else c||(k||(k=[]),k.push(Oe,c)),c=we;else Oe==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,he=he?he.__html:void 0,we!=null&&he!==we&&(k=k||[]).push(Oe,we)):Oe==="children"?typeof we!="string"&&typeof we!="number"||(k=k||[]).push(Oe,""+we):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Oe)?(we!=null&&Oe==="onScroll"&&Nr("scroll",n),k||he===we||(k=[])):(k=k||[]).push(Oe,we))}c&&(k=k||[]).push("style",c);var Oe=k;(i.updateQueue=Oe)&&(i.flags|=4)}},Pg=function(n,i,c,g){c!==g&&(i.flags|=4)};function lu(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function An(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,g=0;if(i)for(var b=n.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=n,b=b.sibling;else for(b=n.child;b!==null;)c|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=n,b=b.sibling;return n.subtreeFlags|=g,n.childLanes=c,i}function Iv(n,i,c){var g=i.pendingProps;switch(Le(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(i),null;case 1:return Sn(i.type)&&Yc(),An(i),null;case 3:return g=i.stateNode,Ra(),gr(jn),gr(Ms),au(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(Vr(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,We!==null&&(Om(We),We=null))),km(n,i),An(i),null;case 5:su(i);var b=ni(Oi.current);if(c=i.type,n!==null&&i.stateNode!=null)Cg(n,i,c,g,b),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!g){if(i.stateNode===null)throw Error(s(166));return An(i),null}if(n=ni(Is.current),Vr(i)){g=i.stateNode,c=i.type;var k=i.memoizedProps;switch(g[Oa]=i,g[nl]=k,n=(i.mode&1)!==0,c){case"dialog":Nr("cancel",g),Nr("close",g);break;case"iframe":case"object":case"embed":Nr("load",g);break;case"video":case"audio":for(b=0;b<Ii.length;b++)Nr(Ii[b],g);break;case"source":Nr("error",g);break;case"img":case"image":case"link":Nr("error",g),Nr("load",g);break;case"details":Nr("toggle",g);break;case"input":de(g,k),Nr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},Nr("invalid",g);break;case"textarea":$e(g,k),Nr("invalid",g)}nr(c,k),b=null;for(var z in k)if(k.hasOwnProperty(z)){var he=k[z];z==="children"?typeof he=="string"?g.textContent!==he&&(k.suppressHydrationWarning!==!0&&Kc(g.textContent,he,n),b=["children",he]):typeof he=="number"&&g.textContent!==""+he&&(k.suppressHydrationWarning!==!0&&Kc(g.textContent,he,n),b=["children",""+he]):o.hasOwnProperty(z)&&he!=null&&z==="onScroll"&&Nr("scroll",g)}switch(c){case"input":me(g),dt(g,k,!0);break;case"textarea":me(g),Ue(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=sl)}g=b,i.updateQueue=g,g!==null&&(i.flags|=4)}else{z=b.nodeType===9?b:b.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Je(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=z.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=z.createElement(c,{is:g.is}):(n=z.createElement(c),c==="select"&&(z=n,g.multiple?z.multiple=!0:g.size&&(z.size=g.size))):n=z.createElementNS(n,c),n[Oa]=i,n[nl]=g,Ag(n,i,!1,!1),i.stateNode=n;e:{switch(z=Et(c,g),c){case"dialog":Nr("cancel",n),Nr("close",n),b=g;break;case"iframe":case"object":case"embed":Nr("load",n),b=g;break;case"video":case"audio":for(b=0;b<Ii.length;b++)Nr(Ii[b],n);b=g;break;case"source":Nr("error",n),b=g;break;case"img":case"image":case"link":Nr("error",n),Nr("load",n),b=g;break;case"details":Nr("toggle",n),b=g;break;case"input":de(n,g),b=Te(n,g),Nr("invalid",n);break;case"option":b=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},b=Se({},g,{value:void 0}),Nr("invalid",n);break;case"textarea":$e(n,g),b=Ce(n,g),Nr("invalid",n);break;default:b=g}nr(c,b),he=b;for(k in he)if(he.hasOwnProperty(k)){var we=he[k];k==="style"?pt(n,we):k==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,we!=null&&lt(n,we)):k==="children"?typeof we=="string"?(c!=="textarea"||we!=="")&&_t(n,we):typeof we=="number"&&_t(n,""+we):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(o.hasOwnProperty(k)?we!=null&&k==="onScroll"&&Nr("scroll",n):we!=null&&P(n,k,we,z))}switch(c){case"input":me(n),dt(n,g,!1);break;case"textarea":me(n),Ue(n);break;case"option":g.value!=null&&n.setAttribute("value",""+ue(g.value));break;case"select":n.multiple=!!g.multiple,k=g.value,k!=null?pe(n,!!g.multiple,k,!1):g.defaultValue!=null&&pe(n,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(n.onclick=sl)}switch(c){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return An(i),null;case 6:if(n&&i.stateNode!=null)Pg(n,i,n.memoizedProps,g);else{if(typeof g!="string"&&i.stateNode===null)throw Error(s(166));if(c=ni(Oi.current),ni(Is.current),Vr(i)){if(g=i.stateNode,c=i.memoizedProps,g[Oa]=i,(k=g.nodeValue!==c)&&(n=Me,n!==null))switch(n.tag){case 3:Kc(g.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kc(g.nodeValue,c,(n.mode&1)!==0)}k&&(i.flags|=4)}else g=(c.nodeType===9?c:c.ownerDocument).createTextNode(g),g[Oa]=i,i.stateNode=g}return An(i),null;case 13:if(gr(Dr),g=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&qe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Kt(),yt(),i.flags|=98560,k=!1;else if(k=Vr(i),g!==null&&g.dehydrated!==null){if(n===null){if(!k)throw Error(s(318));if(k=i.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(s(317));k[Oa]=i}else yt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;An(i),k=!1}else We!==null&&(Om(We),We=null),k=!0;if(!k)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Dr.current&1)!==0?Us===0&&(Us=3):Bm())),i.updateQueue!==null&&(i.flags|=4),An(i),null);case 4:return Ra(),km(n,i),n===null&&yo(i.stateNode.containerInfo),An(i),null;case 10:return Or(i.type._context),An(i),null;case 17:return Sn(i.type)&&Yc(),An(i),null;case 19:if(gr(Dr),k=i.memoizedState,k===null)return An(i),null;if(g=(i.flags&128)!==0,z=k.rendering,z===null)if(g)lu(k,!1);else{if(Us!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(z=ya(n),z!==null){for(i.flags|=128,lu(k,!1),g=z.updateQueue,g!==null&&(i.updateQueue=g,i.flags|=4),i.subtreeFlags=0,g=c,c=i.child;c!==null;)k=c,n=g,k.flags&=14680066,z=k.alternate,z===null?(k.childLanes=0,k.lanes=n,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=z.childLanes,k.lanes=z.lanes,k.child=z.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=z.memoizedProps,k.memoizedState=z.memoizedState,k.updateQueue=z.updateQueue,k.type=z.type,n=z.dependencies,k.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return br(Dr,Dr.current&1|2),i.child}n=n.sibling}k.tail!==null&&Er()>ld&&(i.flags|=128,g=!0,lu(k,!1),i.lanes=4194304)}else{if(!g)if(n=ya(z),n!==null){if(i.flags|=128,g=!0,c=n.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),lu(k,!0),k.tail===null&&k.tailMode==="hidden"&&!z.alternate&&!He)return An(i),null}else 2*Er()-k.renderingStartTime>ld&&c!==1073741824&&(i.flags|=128,g=!0,lu(k,!1),i.lanes=4194304);k.isBackwards?(z.sibling=i.child,i.child=z):(c=k.last,c!==null?c.sibling=z:i.child=z,k.last=z)}return k.tail!==null?(i=k.tail,k.rendering=i,k.tail=i.sibling,k.renderingStartTime=Er(),i.sibling=null,c=Dr.current,br(Dr,g?c&1|2:c&1),i):(An(i),null);case 22:case 23:return Mm(),g=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(i.flags|=8192),g&&(i.mode&1)!==0?(wa&1073741824)!==0&&(An(i),i.subtreeFlags&6&&(i.flags|=8192)):An(i),null;case 24:return null;case 25:return null}throw Error(s(156,i.tag))}function Fv(n,i){switch(Le(i),i.tag){case 1:return Sn(i.type)&&Yc(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ra(),gr(jn),gr(Ms),au(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return su(i),null;case 13:if(gr(Dr),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));yt()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return gr(Dr),null;case 4:return Ra(),null;case 10:return Or(i.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var xh=!1,Cn=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,vt=null;function id(n,i){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){fs(n,i,g)}else c.current=null}function Am(n,i,c){try{c()}catch(g){fs(n,i,g)}}var _g=!1;function Ov(n,i){if(Yl=Wo,n=$d(),zc(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var b=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var z=0,he=-1,we=-1,Oe=0,Xe=0,et=n,Qe=null;t:for(;;){for(var mt;et!==c||b!==0&&et.nodeType!==3||(he=z+b),et!==k||g!==0&&et.nodeType!==3||(we=z+g),et.nodeType===3&&(z+=et.nodeValue.length),(mt=et.firstChild)!==null;)Qe=et,et=mt;for(;;){if(et===n)break t;if(Qe===c&&++Oe===b&&(he=z),Qe===k&&++Xe===g&&(we=z),(mt=et.nextSibling)!==null)break;et=Qe,Qe=et.parentNode}et=mt}c=he===-1||we===-1?null:{start:he,end:we}}else c=null}c=c||{start:0,end:0}}else c=null;for(vo={focusedElem:n,selectionRange:c},Wo=!1,vt=i;vt!==null;)if(i=vt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,vt=n;else for(;vt!==null;){i=vt;try{var St=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var At=St.memoizedProps,Ss=St.memoizedState,_e=i.stateNode,je=_e.getSnapshotBeforeUpdate(i.elementType===i.type?At:oi(i.type,At),Ss);_e.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var Ie=i.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(tt){fs(i,i.return,tt)}if(n=i.sibling,n!==null){n.return=i.return,vt=n;break}vt=i.return}return St=_g,_g=!1,St}function cu(n,i,c){var g=i.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&n)===n){var k=b.destroy;b.destroy=void 0,k!==void 0&&Am(i,c,k)}b=b.next}while(b!==g)}}function yh(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&n)===n){var g=c.create;c.destroy=g()}c=c.next}while(c!==i)}}function Cm(n){var i=n.ref;if(i!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof i=="function"?i(n):i.current=n}}function Lg(n){var i=n.alternate;i!==null&&(n.alternate=null,Lg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Oa],delete i[nl],delete i[Nn],delete i[um],delete i[hm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Eg(n){return n.tag===5||n.tag===3||n.tag===4}function Dg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Eg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pm(n,i,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(n,i):c.insertBefore(n,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(n,c)):(i=c,i.appendChild(n)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=sl));else if(g!==4&&(n=n.child,n!==null))for(Pm(n,i,c),n=n.sibling;n!==null;)Pm(n,i,c),n=n.sibling}function _m(n,i,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(_m(n,i,c),n=n.sibling;n!==null;)_m(n,i,c),n=n.sibling}var un=null,li=!1;function ul(n,i,c){for(c=c.child;c!==null;)Ig(n,i,c),c=c.sibling}function Ig(n,i,c){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(ro,c)}catch{}switch(c.tag){case 5:Cn||id(c,i);case 6:var g=un,b=li;un=null,ul(n,i,c),un=g,li=b,un!==null&&(li?(n=un,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):un.removeChild(c.stateNode));break;case 18:un!==null&&(li?(n=un,c=c.stateNode,n.nodeType===8?eu(n.parentNode,c):n.nodeType===1&&eu(n,c),_a(n)):eu(un,c.stateNode));break;case 4:g=un,b=li,un=c.stateNode.containerInfo,li=!0,ul(n,i,c),un=g,li=b;break;case 0:case 11:case 14:case 15:if(!Cn&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var k=b,z=k.destroy;k=k.tag,z!==void 0&&((k&2)!==0||(k&4)!==0)&&Am(c,i,z),b=b.next}while(b!==g)}ul(n,i,c);break;case 1:if(!Cn&&(id(c,i),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(he){fs(c,i,he)}ul(n,i,c);break;case 21:ul(n,i,c);break;case 22:c.mode&1?(Cn=(g=Cn)||c.memoizedState!==null,ul(n,i,c),Cn=g):ul(n,i,c);break;default:ul(n,i,c)}}function Fg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new Tv),i.forEach(function(g){var b=Hv.bind(null,n,g);c.has(g)||(c.add(g),g.then(b,b))})}}function ci(n,i){var c=i.deletions;if(c!==null)for(var g=0;g<c.length;g++){var b=c[g];try{var k=n,z=i,he=z;e:for(;he!==null;){switch(he.tag){case 5:un=he.stateNode,li=!1;break e;case 3:un=he.stateNode.containerInfo,li=!0;break e;case 4:un=he.stateNode.containerInfo,li=!0;break e}he=he.return}if(un===null)throw Error(s(160));Ig(k,z,b),un=null,li=!1;var we=b.alternate;we!==null&&(we.return=null),b.return=null}catch(Oe){fs(b,i,Oe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Tg(i,n),i=i.sibling}function Tg(n,i){var c=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ci(i,n),Mi(n),g&4){try{cu(3,n,n.return),yh(3,n)}catch(At){fs(n,n.return,At)}try{cu(5,n,n.return)}catch(At){fs(n,n.return,At)}}break;case 1:ci(i,n),Mi(n),g&512&&c!==null&&id(c,c.return);break;case 5:if(ci(i,n),Mi(n),g&512&&c!==null&&id(c,c.return),n.flags&32){var b=n.stateNode;try{_t(b,"")}catch(At){fs(n,n.return,At)}}if(g&4&&(b=n.stateNode,b!=null)){var k=n.memoizedProps,z=c!==null?c.memoizedProps:k,he=n.type,we=n.updateQueue;if(n.updateQueue=null,we!==null)try{he==="input"&&k.type==="radio"&&k.name!=null&&Fe(b,k),Et(he,z);var Oe=Et(he,k);for(z=0;z<we.length;z+=2){var Xe=we[z],et=we[z+1];Xe==="style"?pt(b,et):Xe==="dangerouslySetInnerHTML"?lt(b,et):Xe==="children"?_t(b,et):P(b,Xe,et,Oe)}switch(he){case"input":st(b,k);break;case"textarea":Ge(b,k);break;case"select":var Qe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!k.multiple;var mt=k.value;mt!=null?pe(b,!!k.multiple,mt,!1):Qe!==!!k.multiple&&(k.defaultValue!=null?pe(b,!!k.multiple,k.defaultValue,!0):pe(b,!!k.multiple,k.multiple?[]:"",!1))}b[nl]=k}catch(At){fs(n,n.return,At)}}break;case 6:if(ci(i,n),Mi(n),g&4){if(n.stateNode===null)throw Error(s(162));b=n.stateNode,k=n.memoizedProps;try{b.nodeValue=k}catch(At){fs(n,n.return,At)}}break;case 3:if(ci(i,n),Mi(n),g&4&&c!==null&&c.memoizedState.isDehydrated)try{_a(i.containerInfo)}catch(At){fs(n,n.return,At)}break;case 4:ci(i,n),Mi(n);break;case 13:ci(i,n),Mi(n),b=n.child,b.flags&8192&&(k=b.memoizedState!==null,b.stateNode.isHidden=k,!k||b.alternate!==null&&b.alternate.memoizedState!==null||(Dm=Er())),g&4&&Fg(n);break;case 22:if(Xe=c!==null&&c.memoizedState!==null,n.mode&1?(Cn=(Oe=Cn)||Xe,ci(i,n),Cn=Oe):ci(i,n),Mi(n),g&8192){if(Oe=n.memoizedState!==null,(n.stateNode.isHidden=Oe)&&!Xe&&(n.mode&1)!==0)for(vt=n,Xe=n.child;Xe!==null;){for(et=vt=Xe;vt!==null;){switch(Qe=vt,mt=Qe.child,Qe.tag){case 0:case 11:case 14:case 15:cu(4,Qe,Qe.return);break;case 1:id(Qe,Qe.return);var St=Qe.stateNode;if(typeof St.componentWillUnmount=="function"){g=Qe,c=Qe.return;try{i=g,St.props=i.memoizedProps,St.state=i.memoizedState,St.componentWillUnmount()}catch(At){fs(g,c,At)}}break;case 5:id(Qe,Qe.return);break;case 22:if(Qe.memoizedState!==null){Mg(et);continue}}mt!==null?(mt.return=Qe,vt=mt):Mg(et)}Xe=Xe.sibling}e:for(Xe=null,et=n;;){if(et.tag===5){if(Xe===null){Xe=et;try{b=et.stateNode,Oe?(k=b.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(he=et.stateNode,we=et.memoizedProps.style,z=we!=null&&we.hasOwnProperty("display")?we.display:null,he.style.display=zt("display",z))}catch(At){fs(n,n.return,At)}}}else if(et.tag===6){if(Xe===null)try{et.stateNode.nodeValue=Oe?"":et.memoizedProps}catch(At){fs(n,n.return,At)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===n)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===n)break e;for(;et.sibling===null;){if(et.return===null||et.return===n)break e;Xe===et&&(Xe=null),et=et.return}Xe===et&&(Xe=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:ci(i,n),Mi(n),g&4&&Fg(n);break;case 21:break;default:ci(i,n),Mi(n)}}function Mi(n){var i=n.flags;if(i&2){try{e:{for(var c=n.return;c!==null;){if(Eg(c)){var g=c;break e}c=c.return}throw Error(s(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(_t(b,""),g.flags&=-33);var k=Dg(n);_m(n,k,b);break;case 3:case 4:var z=g.stateNode.containerInfo,he=Dg(n);Pm(n,he,z);break;default:throw Error(s(161))}}catch(we){fs(n,n.return,we)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Rv(n,i,c){vt=n,Og(n)}function Og(n,i,c){for(var g=(n.mode&1)!==0;vt!==null;){var b=vt,k=b.child;if(b.tag===22&&g){var z=b.memoizedState!==null||xh;if(!z){var he=b.alternate,we=he!==null&&he.memoizedState!==null||Cn;he=xh;var Oe=Cn;if(xh=z,(Cn=we)&&!Oe)for(vt=b;vt!==null;)z=vt,we=z.child,z.tag===22&&z.memoizedState!==null?Bg(b):we!==null?(we.return=z,vt=we):Bg(b);for(;k!==null;)vt=k,Og(k),k=k.sibling;vt=b,xh=he,Cn=Oe}Rg(n)}else(b.subtreeFlags&8772)!==0&&k!==null?(k.return=b,vt=k):Rg(n)}}function Rg(n){for(;vt!==null;){var i=vt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Cn||yh(5,i);break;case 1:var g=i.stateNode;if(i.flags&4&&!Cn)if(c===null)g.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:oi(i.type,c.memoizedProps);g.componentDidUpdate(b,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=i.updateQueue;k!==null&&Jn(i,k,g);break;case 3:var z=i.updateQueue;if(z!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}Jn(i,z,c)}break;case 5:var he=i.stateNode;if(c===null&&i.flags&4){c=he;var we=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":we.autoFocus&&c.focus();break;case"img":we.src&&(c.src=we.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Oe=i.alternate;if(Oe!==null){var Xe=Oe.memoizedState;if(Xe!==null){var et=Xe.dehydrated;et!==null&&_a(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Cn||i.flags&512&&Cm(i)}catch(Qe){fs(i,i.return,Qe)}}if(i===n){vt=null;break}if(c=i.sibling,c!==null){c.return=i.return,vt=c;break}vt=i.return}}function Mg(n){for(;vt!==null;){var i=vt;if(i===n){vt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,vt=c;break}vt=i.return}}function Bg(n){for(;vt!==null;){var i=vt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{yh(4,i)}catch(we){fs(i,c,we)}break;case 1:var g=i.stateNode;if(typeof g.componentDidMount=="function"){var b=i.return;try{g.componentDidMount()}catch(we){fs(i,b,we)}}var k=i.return;try{Cm(i)}catch(we){fs(i,k,we)}break;case 5:var z=i.return;try{Cm(i)}catch(we){fs(i,z,we)}}}catch(we){fs(i,i.return,we)}if(i===n){vt=null;break}var he=i.sibling;if(he!==null){he.return=i.return,vt=he;break}vt=i.return}}var Mv=Math.ceil,bh=F.ReactCurrentDispatcher,Lm=F.ReactCurrentOwner,Ua=F.ReactCurrentBatchConfig,ur=0,Zs=null,Fs=null,hn=0,wa=0,od=ga(0),Us=0,du=null,tc=0,vh=0,Em=0,uu=null,Xn=null,Dm=0,ld=1/0,Ao=null,wh=!1,Im=null,hl=null,Nh=!1,fl=null,jh=0,hu=0,Fm=null,Sh=-1,kh=0;function qn(){return(ur&6)!==0?Er():Sh!==-1?Sh:Sh=Er()}function ml(n){return(n.mode&1)===0?1:(ur&2)!==0&&hn!==0?hn&-hn:es.transition!==null?(kh===0&&(kh=Dc()),kh):(n=or,n!==0||(n=window.event,n=n===void 0?16:uo(n.type)),n)}function di(n,i,c,g){if(50<hu)throw hu=0,Fm=null,Error(s(185));io(n,c,g),((ur&2)===0||n!==Zs)&&(n===Zs&&((ur&2)===0&&(vh|=c),Us===4&&pl(n,hn)),Zn(n,g),c===1&&ur===0&&(i.mode&1)===0&&(ld=Er()+500,Ql&&_()))}function Zn(n,i){var c=n.callbackNode;Qr(n,i);var g=pn(n,n===Zs?hn:0);if(g===0)c!==null&&to(c),n.callbackNode=null,n.callbackPriority=0;else if(i=g&-g,n.callbackPriority!==i){if(c!=null&&to(c),i===1)n.tag===0?j(qg.bind(null,n)):x(qg.bind(null,n)),cm(function(){(ur&6)===0&&_()}),c=null;else{switch(Ha(g)){case 1:c=Uo;break;case 4:c=Fn;break;case 16:c=Si;break;case 536870912:c=qo;break;default:c=Si}c=Yg(c,Ug.bind(null,n))}n.callbackPriority=i,n.callbackNode=c}}function Ug(n,i){if(Sh=-1,kh=0,(ur&6)!==0)throw Error(s(327));var c=n.callbackNode;if(cd()&&n.callbackNode!==c)return null;var g=pn(n,n===Zs?hn:0);if(g===0)return null;if((g&30)!==0||(g&n.expiredLanes)!==0||i)i=Ah(n,g);else{i=g;var b=ur;ur|=2;var k=$g();(Zs!==n||hn!==i)&&(Ao=null,ld=Er()+500,sc(n,i));do try{qv();break}catch(he){zg(n,he)}while(!0);cr(),bh.current=k,ur=b,Fs!==null?i=0:(Zs=null,hn=0,i=Us)}if(i!==0){if(i===2&&(b=ao(n),b!==0&&(g=b,i=Tm(n,b))),i===1)throw c=du,sc(n,0),pl(n,g),Zn(n,Er()),c;if(i===6)pl(n,g);else{if(b=n.current.alternate,(g&30)===0&&!Bv(b)&&(i=Ah(n,g),i===2&&(k=ao(n),k!==0&&(g=k,i=Tm(n,k))),i===1))throw c=du,sc(n,0),pl(n,g),Zn(n,Er()),c;switch(n.finishedWork=b,n.finishedLanes=g,i){case 0:case 1:throw Error(s(345));case 2:nc(n,Xn,Ao);break;case 3:if(pl(n,g),(g&130023424)===g&&(i=Dm+500-Er(),10<i)){if(pn(n,0)!==0)break;if(b=n.suspendedLanes,(b&g)!==g){qn(),n.pingedLanes|=n.suspendedLanes&b;break}n.timeoutHandle=Zd(nc.bind(null,n,Xn,Ao),i);break}nc(n,Xn,Ao);break;case 4:if(pl(n,g),(g&4194240)===g)break;for(i=n.eventTimes,b=-1;0<g;){var z=31-Gs(g);k=1<<z,z=i[z],z>b&&(b=z),g&=~k}if(g=b,g=Er()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Mv(g/1960))-g,10<g){n.timeoutHandle=Zd(nc.bind(null,n,Xn,Ao),g);break}nc(n,Xn,Ao);break;case 5:nc(n,Xn,Ao);break;default:throw Error(s(329))}}}return Zn(n,Er()),n.callbackNode===c?Ug.bind(null,n):null}function Tm(n,i){var c=uu;return n.current.memoizedState.isDehydrated&&(sc(n,i).flags|=256),n=Ah(n,i),n!==2&&(i=Xn,Xn=c,i!==null&&Om(i)),n}function Om(n){Xn===null?Xn=n:Xn.push.apply(Xn,n)}function Bv(n){for(var i=n;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var b=c[g],k=b.getSnapshot;b=b.value;try{if(!ws(k(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pl(n,i){for(i&=~Em,i&=~vh,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var c=31-Gs(i),g=1<<c;n[c]=-1,i&=~g}}function qg(n){if((ur&6)!==0)throw Error(s(327));cd();var i=pn(n,0);if((i&1)===0)return Zn(n,Er()),null;var c=Ah(n,i);if(n.tag!==0&&c===2){var g=ao(n);g!==0&&(i=g,c=Tm(n,g))}if(c===1)throw c=du,sc(n,0),pl(n,i),Zn(n,Er()),c;if(c===6)throw Error(s(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,nc(n,Xn,Ao),Zn(n,Er()),null}function Rm(n,i){var c=ur;ur|=1;try{return n(i)}finally{ur=c,ur===0&&(ld=Er()+500,Ql&&_())}}function rc(n){fl!==null&&fl.tag===0&&(ur&6)===0&&cd();var i=ur;ur|=1;var c=Ua.transition,g=or;try{if(Ua.transition=null,or=1,n)return n()}finally{or=g,Ua.transition=c,ur=i,(ur&6)===0&&_()}}function Mm(){wa=od.current,gr(od)}function sc(n,i){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,nh(c)),Fs!==null)for(c=Fs.return;c!==null;){var g=c;switch(Le(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Yc();break;case 3:Ra(),gr(jn),gr(Ms),au();break;case 5:su(g);break;case 4:Ra();break;case 13:gr(Dr);break;case 19:gr(Dr);break;case 10:Or(g.type._context);break;case 22:case 23:Mm()}c=c.return}if(Zs=n,Fs=n=gl(n.current,null),hn=wa=i,Us=0,du=null,Em=vh=tc=0,Xn=uu=null,jr!==null){for(i=0;i<jr.length;i++)if(c=jr[i],g=c.interleaved,g!==null){c.interleaved=null;var b=g.next,k=c.pending;if(k!==null){var z=k.next;k.next=b,g.next=z}c.pending=g}jr=null}return n}function zg(n,i){do{var c=Fs;try{if(cr(),Jc.current=fh,ll){for(var g=Rr.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}ll=!1}if(Ma=0,ns=hs=Rr=null,ai=!1,cl=0,Lm.current=null,c===null||c.return===null){Us=1,du=i,Fs=null;break}e:{var k=n,z=c.return,he=c,we=i;if(i=hn,he.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Oe=we,Xe=he,et=Xe.tag;if((Xe.mode&1)===0&&(et===0||et===11||et===15)){var Qe=Xe.alternate;Qe?(Xe.updateQueue=Qe.updateQueue,Xe.memoizedState=Qe.memoizedState,Xe.lanes=Qe.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var mt=fg(z);if(mt!==null){mt.flags&=-257,mg(mt,z,he,k,i),mt.mode&1&&hg(k,Oe,i),i=mt,we=Oe;var St=i.updateQueue;if(St===null){var At=new Set;At.add(we),i.updateQueue=At}else St.add(we);break e}else{if((i&1)===0){hg(k,Oe,i),Bm();break e}we=Error(s(426))}}else if(He&&he.mode&1){var Ss=fg(z);if(Ss!==null){(Ss.flags&65536)===0&&(Ss.flags|=256),mg(Ss,z,he,k,i),rt(ad(we,he));break e}}k=we=ad(we,he),Us!==4&&(Us=2),uu===null?uu=[k]:uu.push(k),k=z;do{switch(k.tag){case 3:k.flags|=65536,i&=-i,k.lanes|=i;var _e=dg(k,we,i);kr(k,_e);break e;case 1:he=we;var je=k.type,Ie=k.stateNode;if((k.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(hl===null||!hl.has(Ie)))){k.flags|=65536,i&=-i,k.lanes|=i;var tt=ug(k,he,i);kr(k,tt);break e}}k=k.return}while(k!==null)}Hg(c)}catch(Lt){i=Lt,Fs===c&&c!==null&&(Fs=c=c.return);continue}break}while(!0)}function $g(){var n=bh.current;return bh.current=fh,n===null?fh:n}function Bm(){(Us===0||Us===3||Us===2)&&(Us=4),Zs===null||(tc&268435455)===0&&(vh&268435455)===0||pl(Zs,hn)}function Ah(n,i){var c=ur;ur|=2;var g=$g();(Zs!==n||hn!==i)&&(Ao=null,sc(n,i));do try{Uv();break}catch(b){zg(n,b)}while(!0);if(cr(),ur=c,bh.current=g,Fs!==null)throw Error(s(261));return Zs=null,hn=0,Us}function Uv(){for(;Fs!==null;)Vg(Fs)}function qv(){for(;Fs!==null&&!Bo();)Vg(Fs)}function Vg(n){var i=Kg(n.alternate,n,wa);n.memoizedProps=n.pendingProps,i===null?Hg(n):Fs=i,Lm.current=null}function Hg(n){var i=n;do{var c=i.alternate;if(n=i.return,(i.flags&32768)===0){if(c=Iv(c,i,wa),c!==null){Fs=c;return}}else{if(c=Fv(c,i),c!==null){c.flags&=32767,Fs=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Us=6,Fs=null;return}}if(i=i.sibling,i!==null){Fs=i;return}Fs=i=n}while(i!==null);Us===0&&(Us=5)}function nc(n,i,c){var g=or,b=Ua.transition;try{Ua.transition=null,or=1,zv(n,i,c,g)}finally{Ua.transition=b,or=g}return null}function zv(n,i,c,g){do cd();while(fl!==null);if((ur&6)!==0)throw Error(s(327));c=n.finishedWork;var b=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0;var k=c.lanes|c.childLanes;if(Aa(n,k),n===Zs&&(Fs=Zs=null,hn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Nh||(Nh=!0,Yg(Si,function(){return cd(),null})),k=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||k){k=Ua.transition,Ua.transition=null;var z=or;or=1;var he=ur;ur|=4,Lm.current=null,Ov(n,c),Tg(c,n),Zu(vo),Wo=!!Yl,vo=Yl=null,n.current=c,Rv(c),Bd(),ur=he,or=z,Ua.transition=k}else n.current=c;if(Nh&&(Nh=!1,fl=n,jh=b),k=n.pendingLanes,k===0&&(hl=null),Lc(c.stateNode),Zn(n,Er()),i!==null)for(g=n.onRecoverableError,c=0;c<i.length;c++)b=i[c],g(b.value,{componentStack:b.stack,digest:b.digest});if(wh)throw wh=!1,n=Im,Im=null,n;return(jh&1)!==0&&n.tag!==0&&cd(),k=n.pendingLanes,(k&1)!==0?n===Fm?hu++:(hu=0,Fm=n):hu=0,_(),null}function cd(){if(fl!==null){var n=Ha(jh),i=Ua.transition,c=or;try{if(Ua.transition=null,or=16>n?16:n,fl===null)var g=!1;else{if(n=fl,fl=null,jh=0,(ur&6)!==0)throw Error(s(331));var b=ur;for(ur|=4,vt=n.current;vt!==null;){var k=vt,z=k.child;if((vt.flags&16)!==0){var he=k.deletions;if(he!==null){for(var we=0;we<he.length;we++){var Oe=he[we];for(vt=Oe;vt!==null;){var Xe=vt;switch(Xe.tag){case 0:case 11:case 15:cu(8,Xe,k)}var et=Xe.child;if(et!==null)et.return=Xe,vt=et;else for(;vt!==null;){Xe=vt;var Qe=Xe.sibling,mt=Xe.return;if(Lg(Xe),Xe===Oe){vt=null;break}if(Qe!==null){Qe.return=mt,vt=Qe;break}vt=mt}}}var St=k.alternate;if(St!==null){var At=St.child;if(At!==null){St.child=null;do{var Ss=At.sibling;At.sibling=null,At=Ss}while(At!==null)}}vt=k}}if((k.subtreeFlags&2064)!==0&&z!==null)z.return=k,vt=z;else e:for(;vt!==null;){if(k=vt,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:cu(9,k,k.return)}var _e=k.sibling;if(_e!==null){_e.return=k.return,vt=_e;break e}vt=k.return}}var je=n.current;for(vt=je;vt!==null;){z=vt;var Ie=z.child;if((z.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=z,vt=Ie;else e:for(z=je;vt!==null;){if(he=vt,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:yh(9,he)}}catch(Lt){fs(he,he.return,Lt)}if(he===z){vt=null;break e}var tt=he.sibling;if(tt!==null){tt.return=he.return,vt=tt;break e}vt=he.return}}if(ur=b,_(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(ro,n)}catch{}g=!0}return g}finally{or=c,Ua.transition=i}}return!1}function Wg(n,i,c){i=ad(c,i),i=dg(n,i,1),n=rs(n,i,1),i=qn(),n!==null&&(io(n,1,i),Zn(n,i))}function fs(n,i,c){if(n.tag===3)Wg(n,n,c);else for(;i!==null;){if(i.tag===3){Wg(i,n,c);break}else if(i.tag===1){var g=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(hl===null||!hl.has(g))){n=ad(c,n),n=ug(i,n,1),i=rs(i,n,1),n=qn(),i!==null&&(io(i,1,n),Zn(i,n));break}}i=i.return}}function $v(n,i,c){var g=n.pingCache;g!==null&&g.delete(i),i=qn(),n.pingedLanes|=n.suspendedLanes&c,Zs===n&&(hn&c)===c&&(Us===4||Us===3&&(hn&130023424)===hn&&500>Er()-Dm?sc(n,0):Em|=c),Zn(n,i)}function Gg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Hn,Hn<<=1,(Hn&130023424)===0&&(Hn=4194304)));var c=qn();n=Sr(n,i),n!==null&&(io(n,i,c),Zn(n,c))}function Vv(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),Gg(n,c)}function Hv(n,i){var c=0;switch(n.tag){case 13:var g=n.stateNode,b=n.memoizedState;b!==null&&(c=b.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(i),Gg(n,c)}var Kg;Kg=function(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps||jn.current)Qn=!0;else{if((n.lanes&c)===0&&(i.flags&128)===0)return Qn=!1,Dv(n,i,c);Qn=(n.flags&131072)!==0}else Qn=!1,He&&(i.flags&1048576)!==0&&Ae(i,Z,i.index);switch(i.lanes=0,i.tag){case 2:var g=i.type;gh(n,i),n=i.pendingProps;var b=il(i,Ms.current);Hr(i,c),b=Xl(null,i,g,n,b,c);var k=Ba();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Sn(g)?(k=!0,jo(i)):k=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Bs(i),b.updater=mh,i.stateNode=b,b._reactInternals=i,gm(i,g,n,c),i=vm(null,i,g,!0,k,c)):(i.tag=0,He&&k&&ze(i),Un(null,i,b,c),i=i.child),i;case 16:g=i.elementType;e:{switch(gh(n,i),n=i.pendingProps,b=g._init,g=b(g._payload),i.type=g,b=i.tag=Gv(g),n=oi(g,n),b){case 0:i=bm(null,i,g,n,c);break e;case 1:i=vg(null,i,g,n,c);break e;case 11:i=pg(null,i,g,n,c);break e;case 14:i=gg(null,i,g,oi(g.type,n),c);break e}throw Error(s(306,g,""))}return i;case 0:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:oi(g,b),bm(n,i,g,b,c);case 1:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:oi(g,b),vg(n,i,g,b,c);case 3:e:{if(wg(i),n===null)throw Error(s(387));g=i.pendingProps,k=i.memoizedState,b=k.element,kn(n,i),Xs(i,g,null,c);var z=i.memoizedState;if(g=z.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},i.updateQueue.baseState=k,i.memoizedState=k,i.flags&256){b=ad(Error(s(423)),i),i=Ng(n,i,g,c,b);break e}else if(g!==b){b=ad(Error(s(424)),i),i=Ng(n,i,g,c,b);break e}else for(qe=dn(i.stateNode.containerInfo.firstChild),Me=i,He=!0,We=null,c=Ur(i,null,g,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(yt(),g===b){i=ko(n,i,c);break e}Un(n,i,g,c)}i=i.child}return i;case 5:return lh(i),n===null&&Nt(i),g=i.type,b=i.pendingProps,k=n!==null?n.memoizedProps:null,z=b.children,Xd(g,b)?z=null:k!==null&&Xd(g,k)&&(i.flags|=32),bg(n,i),Un(n,i,z,c),i.child;case 6:return n===null&&Nt(i),null;case 13:return jg(n,i,c);case 4:return ol(i,i.stateNode.containerInfo),g=i.pendingProps,n===null?i.child=ds(i,null,g,c):Un(n,i,g,c),i.child;case 11:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:oi(g,b),pg(n,i,g,b,c);case 7:return Un(n,i,i.pendingProps,c),i.child;case 8:return Un(n,i,i.pendingProps.children,c),i.child;case 12:return Un(n,i,i.pendingProps.children,c),i.child;case 10:e:{if(g=i.type._context,b=i.pendingProps,k=i.memoizedProps,z=b.value,br(Ns,g._currentValue),g._currentValue=z,k!==null)if(ws(k.value,z)){if(k.children===b.children&&!jn.current){i=ko(n,i,c);break e}}else for(k=i.child,k!==null&&(k.return=i);k!==null;){var he=k.dependencies;if(he!==null){z=k.child;for(var we=he.firstContext;we!==null;){if(we.context===g){if(k.tag===1){we=ts(-1,c&-c),we.tag=2;var Oe=k.updateQueue;if(Oe!==null){Oe=Oe.shared;var Xe=Oe.pending;Xe===null?we.next=we:(we.next=Xe.next,Xe.next=we),Oe.pending=we}}k.lanes|=c,we=k.alternate,we!==null&&(we.lanes|=c),dr(k.return,c,i),he.lanes|=c;break}we=we.next}}else if(k.tag===10)z=k.type===i.type?null:k.child;else if(k.tag===18){if(z=k.return,z===null)throw Error(s(341));z.lanes|=c,he=z.alternate,he!==null&&(he.lanes|=c),dr(z,c,i),z=k.sibling}else z=k.child;if(z!==null)z.return=k;else for(z=k;z!==null;){if(z===i){z=null;break}if(k=z.sibling,k!==null){k.return=z.return,z=k;break}z=z.return}k=z}Un(n,i,b.children,c),i=i.child}return i;case 9:return b=i.type,g=i.pendingProps.children,Hr(i,c),b=Wr(b),g=g(b),i.flags|=1,Un(n,i,g,c),i.child;case 14:return g=i.type,b=oi(g,i.pendingProps),b=oi(g.type,b),gg(n,i,g,b,c);case 15:return xg(n,i,i.type,i.pendingProps,c);case 17:return g=i.type,b=i.pendingProps,b=i.elementType===g?b:oi(g,b),gh(n,i),i.tag=1,Sn(g)?(n=!0,jo(i)):n=!1,Hr(i,c),lg(i,g,b),gm(i,g,b,c),vm(null,i,g,!0,n,c);case 19:return kg(n,i,c);case 22:return yg(n,i,c)}throw Error(s(156,i.tag))};function Yg(n,i){return eo(n,i)}function Wv(n,i,c,g){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(n,i,c,g){return new Wv(n,i,c,g)}function Um(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gv(n){if(typeof n=="function")return Um(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q)return 11;if(n===be)return 14}return 2}function gl(n,i){var c=n.alternate;return c===null?(c=qa(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function Ch(n,i,c,g,b,k){var z=2;if(g=n,typeof n=="function")Um(n)&&(z=1);else if(typeof n=="string")z=5;else e:switch(n){case X:return ac(c.children,b,k,i);case K:z=8,b|=8;break;case Y:return n=qa(12,c,i,b|2),n.elementType=Y,n.lanes=k,n;case U:return n=qa(13,c,i,b),n.elementType=U,n.lanes=k,n;case J:return n=qa(19,c,i,b),n.elementType=J,n.lanes=k,n;case T:return Ph(c,b,k,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:z=10;break e;case I:z=9;break e;case q:z=11;break e;case be:z=14;break e;case ge:z=16,g=null;break e}throw Error(s(130,n==null?n:typeof n,""))}return i=qa(z,c,i,b),i.elementType=n,i.type=g,i.lanes=k,i}function ac(n,i,c,g){return n=qa(7,n,g,i),n.lanes=c,n}function Ph(n,i,c,g){return n=qa(22,n,g,i),n.elementType=T,n.lanes=c,n.stateNode={isHidden:!1},n}function qm(n,i,c){return n=qa(6,n,null,i),n.lanes=c,n}function zm(n,i,c){return i=qa(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Kv(n,i,c,g,b){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function $m(n,i,c,g,b,k,z,he,we){return n=new Kv(n,i,c,he,we),i===1?(i=1,k===!0&&(i|=8)):i=0,k=qa(3,null,null,i),n.current=k,k.stateNode=n,k.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bs(k),n}function Yv(n,i,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:g==null?null:""+g,children:n,containerInfo:i,implementation:c}}function Jg(n){if(!n)return Ti;n=n._reactInternals;e:{if(zr(n)!==n||n.tag!==1)throw Error(s(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Sn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(s(171))}if(n.tag===1){var c=n.type;if(Sn(c))return ru(n,c,i)}return i}function Qg(n,i,c,g,b,k,z,he,we){return n=$m(c,g,!0,n,b,k,z,he,we),n.context=Jg(null),c=n.current,g=qn(),b=ml(c),k=ts(g,b),k.callback=i??null,rs(c,k,b),n.current.lanes=b,io(n,b,g),Zn(n,g),n}function _h(n,i,c,g){var b=i.current,k=qn(),z=ml(b);return c=Jg(c),i.context===null?i.context=c:i.pendingContext=c,i=ts(k,z),i.payload={element:n},g=g===void 0?null:g,g!==null&&(i.callback=g),n=rs(b,i,z),n!==null&&(di(n,b,z,k),Qs(n,b,z)),z}function Lh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Xg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function Vm(n,i){Xg(n,i),(n=n.alternate)&&Xg(n,i)}function Jv(){return null}var Zg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Hm(n){this._internalRoot=n}Eh.prototype.render=Hm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));_h(n,i,null,null)},Eh.prototype.unmount=Hm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;rc(function(){_h(null,n,null,null)}),i[Ys]=null}};function Eh(n){this._internalRoot=n}Eh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fc();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Pa.length&&i!==0&&i<Pa[c].priority;c++);Pa.splice(c,0,n),c===0&&Oc(n)}};function Wm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Dh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ex(){}function Qv(n,i,c,g,b){if(b){if(typeof g=="function"){var k=g;g=function(){var Oe=Lh(z);k.call(Oe)}}var z=Qg(i,g,n,0,null,!1,!1,"",ex);return n._reactRootContainer=z,n[Ys]=z.current,yo(n.nodeType===8?n.parentNode:n),rc(),z}for(;b=n.lastChild;)n.removeChild(b);if(typeof g=="function"){var he=g;g=function(){var Oe=Lh(we);he.call(Oe)}}var we=$m(n,0,!1,null,null,!1,!1,"",ex);return n._reactRootContainer=we,n[Ys]=we.current,yo(n.nodeType===8?n.parentNode:n),rc(function(){_h(i,we,c,g)}),we}function Ih(n,i,c,g,b){var k=c._reactRootContainer;if(k){var z=k;if(typeof b=="function"){var he=b;b=function(){var we=Lh(z);he.call(we)}}_h(i,z,n,b)}else z=Qv(c,i,n,b,g);return Lh(z)}$o=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var c=da(i.pendingLanes);c!==0&&(zo(i,c|1),Zn(i,Er()),(ur&6)===0&&(ld=Er()+500,_()))}break;case 13:rc(function(){var g=Sr(n,1);if(g!==null){var b=qn();di(g,n,1,b)}}),Vm(n,1)}},Fl=function(n){if(n.tag===13){var i=Sr(n,134217728);if(i!==null){var c=qn();di(i,n,134217728,c)}Vm(n,134217728)}},Ic=function(n){if(n.tag===13){var i=ml(n),c=Sr(n,i);if(c!==null){var g=qn();di(c,n,i,g)}Vm(n,i)}},Fc=function(){return or},Vo=function(n,i){var c=or;try{return or=n,i()}finally{or=c}},it=function(n,i,c){switch(i){case"input":if(st(n,c),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var g=c[i];if(g!==n&&g.form===n.form){var b=Jl(g);if(!b)throw Error(s(90));De(g),st(g,b)}}}break;case"textarea":Ge(n,c);break;case"select":i=c.value,i!=null&&pe(n,!!c.multiple,i,!1)}},ar=Rm,It=rc;var Xv={usingClientEntryPoint:!1,Events:[al,wo,Jl,at,Jt,Rm]},fu={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zv={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ca(n),n===null?null:n.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||Jv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{ro=Fh.inject(Zv),Tn=Fh}catch{}}return ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv,ea.createPortal=function(n,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(i))throw Error(s(200));return Yv(n,i,null,c)},ea.createRoot=function(n,i){if(!Wm(n))throw Error(s(299));var c=!1,g="",b=Zg;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=$m(n,1,!1,null,null,c,!1,g,b),n[Ys]=i.current,yo(n.nodeType===8?n.parentNode:n),new Hm(i)},ea.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=ca(i),n=n===null?null:n.stateNode,n},ea.flushSync=function(n){return rc(n)},ea.hydrate=function(n,i,c){if(!Dh(i))throw Error(s(200));return Ih(null,n,i,!0,c)},ea.hydrateRoot=function(n,i,c){if(!Wm(n))throw Error(s(405));var g=c!=null&&c.hydratedSources||null,b=!1,k="",z=Zg;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onRecoverableError!==void 0&&(z=c.onRecoverableError)),i=Qg(i,null,n,1,c??null,b,!1,k,z),n[Ys]=i.current,yo(n),g)for(n=0;n<g.length;n++)c=g[n],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new Eh(i)},ea.render=function(n,i,c){if(!Dh(i))throw Error(s(200));return Ih(null,n,i,!1,c)},ea.unmountComponentAtNode=function(n){if(!Dh(n))throw Error(s(40));return n._reactRootContainer?(rc(function(){Ih(null,null,n,!1,function(){n._reactRootContainer=null,n[Ys]=null})}),!0):!1},ea.unstable_batchedUpdates=Rm,ea.unstable_renderSubtreeIntoContainer=function(n,i,c,g){if(!Dh(c))throw Error(s(200));if(n==null||n._reactInternals===void 0)throw Error(s(38));return Ih(n,i,c,!1,g)},ea.version="18.3.1-next-f1338f8080-20240426",ea}var lx;function I1(){if(lx)return Ym.exports;lx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Ym.exports=l5(),Ym.exports}var cx;function c5(){if(cx)return Th;cx=1;var t=I1();return Th.createRoot=t.createRoot,Th.hydrateRoot=t.hydrateRoot,Th}var d5=c5();const u5=D1(d5);var Xm={exports:{}},Zm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function h5(){if(dx)return Zm;dx=1;var t=Mf();function r(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,o=t.useRef,l=t.useEffect,d=t.useMemo,u=t.useDebugValue;return Zm.useSyncExternalStoreWithSelector=function(h,m,p,v,N){var y=o(null);if(y.current===null){var A={hasValue:!1,value:null};y.current=A}else A=y.current;y=d(function(){function S(O){if(!L){if(L=!0,E=O,O=v(O),N!==void 0&&A.hasValue){var se=A.value;if(N(se,O))return P=se}return P=O}if(se=P,s(E,O))return se;var X=v(O);return N!==void 0&&N(se,X)?(E=O,se):(E=O,P=X)}var L=!1,E,P,F=p===void 0?null:p;return[function(){return S(m())},F===null?void 0:function(){return S(F())}]},[m,p,v,N]);var C=a(h,y[0],y[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),u(C),C},Zm}var ux;function f5(){return ux||(ux=1,Xm.exports=h5()),Xm.exports}var m5=f5();function p5(t){t()}function g5(){let t=null,r=null;return{clear(){t=null,r=null},notify(){p5(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){const s=[];let a=t;for(;a;)s.push(a),a=a.next;return s},subscribe(s){let a=!0;const o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!a||t===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var hx={notify(){},get:()=>[]};function x5(t,r){let s,a=hx,o=0,l=!1;function d(C){p();const S=a.subscribe(C);let L=!1;return()=>{L||(L=!0,S(),v())}}function u(){a.notify()}function h(){A.onStateChange&&A.onStateChange()}function m(){return l}function p(){o++,s||(s=t.subscribe(h),a=g5())}function v(){o--,s&&o===0&&(s(),s=void 0,a.clear(),a=hx)}function N(){l||(l=!0,p())}function y(){l&&(l=!1,v())}const A={addNestedSub:d,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:m,trySubscribe:N,tryUnsubscribe:y,getListeners:()=>a};return A}var y5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b5=y5(),v5=()=>typeof navigator<"u"&&navigator.product==="ReactNative",w5=v5(),N5=()=>b5||w5?R.useLayoutEffect:R.useEffect,j5=N5(),S5=Symbol.for("react-redux-context"),k5=typeof globalThis<"u"?globalThis:{};function A5(){if(!R.createContext)return{};const t=k5[S5]??=new Map;let r=t.get(R.createContext);return r||(r=R.createContext(null),t.set(R.createContext,r)),r}var Pl=A5();function C5(t){const{children:r,context:s,serverState:a,store:o}=t,l=R.useMemo(()=>{const h=x5(o);return{store:o,subscription:h,getServerState:a?()=>a:void 0}},[o,a]),d=R.useMemo(()=>o.getState(),[o]);j5(()=>{const{subscription:h}=l;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[l,d]);const u=s||Pl;return R.createElement(u.Provider,{value:l},r)}var P5=C5;function N0(t=Pl){return function(){return R.useContext(t)}}var F1=N0();function T1(t=Pl){const r=t===Pl?F1:N0(t),s=()=>{const{store:a}=r();return a};return Object.assign(s,{withTypes:()=>s}),s}var _5=T1();function L5(t=Pl){const r=t===Pl?_5:T1(t),s=()=>r().dispatch;return Object.assign(s,{withTypes:()=>s}),s}var Hs=L5(),E5=(t,r)=>t===r;function D5(t=Pl){const r=t===Pl?F1:N0(t),s=(a,o={})=>{const{equalityFn:l=E5}=typeof o=="function"?{equalityFn:o}:o,d=r(),{store:u,subscription:h,getServerState:m}=d;R.useRef(!0);const p=R.useCallback({[a.name](N){return a(N)}}[a.name],[a]),v=m5.useSyncExternalStoreWithSelector(h.addNestedSub,u.getState,m||u.getState,p,l);return R.useDebugValue(v),v};return Object.assign(s,{withTypes:()=>s}),s}var Bt=D5(),Bf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Uf=typeof window>"u"||"Deno"in globalThis;function hi(){}function I5(t,r){return typeof t=="function"?t(r):t}function F5(t){return typeof t=="number"&&t>=0&&t!==1/0}function T5(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Up(t,r){return typeof t=="function"?t(r):t}function O5(t,r){return typeof t=="function"?t(r):t}function fx(t,r){const{type:s="all",exact:a,fetchStatus:o,predicate:l,queryKey:d,stale:u}=t;if(d){if(a){if(r.queryHash!==j0(d,r.options))return!1}else if(!Fu(r.queryKey,d))return!1}if(s!=="all"){const h=r.isActive();if(s==="active"&&!h||s==="inactive"&&h)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||o&&o!==r.state.fetchStatus||l&&!l(r))}function mx(t,r){const{exact:s,status:a,predicate:o,mutationKey:l}=t;if(l){if(!r.options.mutationKey)return!1;if(s){if(Iu(r.options.mutationKey)!==Iu(l))return!1}else if(!Fu(r.options.mutationKey,l))return!1}return!(a&&r.state.status!==a||o&&!o(r))}function j0(t,r){return(r?.queryKeyHashFn||Iu)(t)}function Iu(t){return JSON.stringify(t,(r,s)=>qp(s)?Object.keys(s).sort().reduce((a,o)=>(a[o]=s[o],a),{}):s)}function Fu(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(s=>Fu(t[s],r[s])):!1}function O1(t,r){if(t===r)return t;const s=px(t)&&px(r);if(s||qp(t)&&qp(r)){const a=s?t:Object.keys(t),o=a.length,l=s?r:Object.keys(r),d=l.length,u=s?[]:{},h=new Set(a);let m=0;for(let p=0;p<d;p++){const v=s?p:l[p];(!s&&h.has(v)||s)&&t[v]===void 0&&r[v]===void 0?(u[v]=void 0,m++):(u[v]=O1(t[v],r[v]),u[v]===t[v]&&t[v]!==void 0&&m++)}return o===d&&m===o?t:u}return r}function px(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qp(t){if(!gx(t))return!1;const r=t.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!gx(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function gx(t){return Object.prototype.toString.call(t)==="[object Object]"}function R5(t){return new Promise(r=>{setTimeout(r,t)})}function M5(t,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,r):s.structuralSharing!==!1?O1(t,r):r}function B5(t,r,s=0){const a=[...t,r];return s&&a.length>s?a.slice(1):a}function U5(t,r,s=0){const a=[r,...t];return s&&a.length>s?a.slice(0,-1):a}var S0=Symbol();function R1(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===S0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var q5=class extends Bf{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Uf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},M1=new q5,z5=class extends Bf{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Uf&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},bf=new z5;function $5(){let t,r;const s=new Promise((o,l)=>{t=o,r=l});s.status="pending",s.catch(()=>{});function a(o){Object.assign(s,o),delete s.resolve,delete s.reject}return s.resolve=o=>{a({status:"fulfilled",value:o}),t(o)},s.reject=o=>{a({status:"rejected",reason:o}),r(o)},s}function V5(t){return Math.min(1e3*2**t,3e4)}function B1(t){return(t??"online")==="online"?bf.isOnline():!0}var zp=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function U1(t){let r=!1,s=0,a;const o=$5(),l=()=>o.status!=="pending",d=C=>{if(!l()){const S=new zp(C);N(S),t.onCancel?.(S)}},u=()=>{r=!0},h=()=>{r=!1},m=()=>M1.isFocused()&&(t.networkMode==="always"||bf.isOnline())&&t.canRun(),p=()=>B1(t.networkMode)&&t.canRun(),v=C=>{l()||(a?.(),o.resolve(C))},N=C=>{l()||(a?.(),o.reject(C))},y=()=>new Promise(C=>{a=S=>{(l()||m())&&C(S)},t.onPause?.()}).then(()=>{a=void 0,l()||t.onContinue?.()}),A=()=>{if(l())return;let C;const S=s===0?t.initialPromise:void 0;try{C=S??t.fn()}catch(L){C=Promise.reject(L)}Promise.resolve(C).then(v).catch(L=>{if(l())return;const E=t.retry??(Uf?0:3),P=t.retryDelay??V5,F=typeof P=="function"?P(s,L):P,O=E===!0||typeof E=="number"&&s<E||typeof E=="function"&&E(s,L);if(r||!O){N(L);return}s++,t.onFail?.(s,L),R5(F).then(()=>m()?void 0:y()).then(()=>{r?N(L):A()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(a?.(),o),cancelRetry:u,continueRetry:h,canStart:p,start:()=>(p()?A():y().then(A),o)}}var H5=t=>setTimeout(t,0);function W5(){let t=[],r=0,s=u=>{u()},a=u=>{u()},o=H5;const l=u=>{r?t.push(u):o(()=>{s(u)})},d=()=>{const u=t;t=[],u.length&&o(()=>{a(()=>{u.forEach(h=>{s(h)})})})};return{batch:u=>{let h;r++;try{h=u()}finally{r--,r||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{s=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{o=u}}}var Vn=W5(),q1=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),F5(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Uf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},G5=class extends q1{#e;#t;#r;#n;#s;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Y5(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,r){const s=M5(this.state.data,t,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(t,r){this.#a({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#s?.promise;return this.#s?.cancel(t),r?r.then(hi).catch(hi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>O5(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===S0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Up(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!T5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,r){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const s=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},o=()=>{const u=R1(this.options,r),m=(()=>{const p={client:this.#n,queryKey:this.queryKey,meta:this.meta};return a(p),p})();return this.#o=!1,this.options.persister?this.options.persister(u,m,this):u(m)},d=(()=>{const u={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:o};return a(u),u})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=U1({initialPromise:r?.initialPromise,fn:d.fetchFn,onCancel:u=>{u instanceof zp&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(u,h)=>{this.#a({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof zp){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...K5(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?a:void 0,a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Vn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function K5(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:B1(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Y5(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,s=r!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var J5=class extends Bf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,s){const a=r.queryKey,o=r.queryHash??j0(a,r);let l=this.get(o);return l||(l=new G5({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Vn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>fx(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>fx(t,s)):r}notify(t){Vn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Q5=class extends q1{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||X5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(r=>r!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#n({type:"continue"})};this.#r=U1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#n({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",a=!this.#r.canStart();try{if(s)r();else{this.#n({type:"pending",variables:t,isPaused:a}),await this.#t.config.onMutate?.(t,this);const l=await this.options.onMutate?.(t);l!==this.state.context&&this.#n({type:"pending",context:l,variables:t,isPaused:a})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,t,this.state.context,this),await this.options.onSuccess?.(o,t,this.state.context),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,t,this.state.context),this.#n({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,t,this.state.context,this),await this.options.onError?.(o,t,this.state.context),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,t,this.state.context),o}finally{this.#n({type:"error",error:o})}}finally{this.#t.runNext(this)}}#n(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vn.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function X5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Z5=class extends Bf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,r,s){const a=new Q5({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){this.#e.add(t);const r=Oh(t);if(typeof r=="string"){const s=this.#t.get(r);s?s.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=Oh(t);if(typeof r=="string"){const s=this.#t.get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Oh(t);if(typeof r=="string"){const a=this.#t.get(r)?.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){const r=Oh(t);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Vn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(s=>mx(r,s))}findAll(t={}){return this.getAll().filter(r=>mx(t,r))}notify(t){Vn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Vn.batch(()=>Promise.all(t.map(r=>r.continue().catch(hi))))}};function Oh(t){return t.options.scope?.id}function xx(t){return{onFetch:(r,s)=>{const a=r.options,o=r.fetchOptions?.meta?.fetchMore?.direction,l=r.state.data?.pages||[],d=r.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let p=!1;const v=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(r.signal.aborted?p=!0:r.signal.addEventListener("abort",()=>{p=!0}),r.signal)})},N=R1(r.options,r.fetchOptions),y=async(A,C,S)=>{if(p)return Promise.reject();if(C==null&&A.pages.length)return Promise.resolve(A);const E=(()=>{const se={client:r.client,queryKey:r.queryKey,pageParam:C,direction:S?"backward":"forward",meta:r.options.meta};return v(se),se})(),P=await N(E),{maxPages:F}=r.options,O=S?U5:B5;return{pages:O(A.pages,P,F),pageParams:O(A.pageParams,C,F)}};if(o&&l.length){const A=o==="backward",C=A?ew:yx,S={pages:l,pageParams:d},L=C(a,S);u=await y(S,L,A)}else{const A=t??l.length;do{const C=h===0?d[0]??a.initialPageParam:yx(a,u);if(h>0&&C==null)break;u=await y(u,C),h++}while(h<A)}return u};r.options.persister?r.fetchFn=()=>r.options.persister?.(m,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s):r.fetchFn=m}}}function yx(t,{pages:r,pageParams:s}){const a=r.length-1;return r.length>0?t.getNextPageParam(r[a],r,s[a],s):void 0}function ew(t,{pages:r,pageParams:s}){return r.length>0?t.getPreviousPageParam?.(r[0],r,s[0],s):void 0}var tw=class{#e;#t;#r;#n;#s;#i;#o;#a;constructor(t={}){this.#e=t.queryCache||new J5,this.#t=t.mutationCache||new Z5,this.#r=t.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=M1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=bf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),s=this.#e.build(this,r),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Up(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:s})=>{const a=s.data;return[r,a]})}setQueryData(t,r,s){const a=this.defaultQueryOptions({queryKey:t}),l=this.#e.get(a.queryHash)?.state.data,d=I5(r,l);if(d!==void 0)return this.#e.build(this,a).setData(d,{...s,manual:!0})}setQueriesData(t,r,s){return Vn.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,r,s)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;Vn.batch(()=>{r.findAll(t).forEach(s=>{r.remove(s)})})}resetQueries(t,r){const s=this.#e;return Vn.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const s={revert:!0,...r},a=Vn.batch(()=>this.#e.findAll(t).map(o=>o.cancel(s)));return Promise.all(a).then(hi).catch(hi)}invalidateQueries(t,r={}){return Vn.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},a=Vn.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,s);return s.throwOnError||(l=l.catch(hi)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(hi)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const s=this.#e.build(this,r);return s.isStaleByTime(Up(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hi).catch(hi)}fetchInfiniteQuery(t){return t.behavior=xx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hi).catch(hi)}ensureInfiniteQueryData(t){return t.behavior=xx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,r){this.#n.set(Iu(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#n.values()],s={};return r.forEach(a=>{Fu(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,r){this.#s.set(Iu(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#s.values()],s={};return r.forEach(a=>{Fu(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=j0(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===S0&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rw=R.createContext(void 0),sw=({client:t,children:r})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(rw.Provider,{value:t,children:r}));I1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Tu.apply(this,arguments)}var Nl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nl||(Nl={}));const bx="popstate";function nw(t){t===void 0&&(t={});function r(a,o){let{pathname:l,search:d,hash:u}=a.location;return $p("",{pathname:l,search:d,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:vf(o)}return iw(r,s,null,t)}function Ps(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function z1(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function aw(){return Math.random().toString(36).substr(2,8)}function vx(t,r){return{usr:t.state,key:t.key,idx:r}}function $p(t,r,s,a){return s===void 0&&(s=null),Tu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?Dd(r):r,{state:s,key:r&&r.key||a||aw()})}function vf(t){let{pathname:r="/",search:s="",hash:a=""}=t;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Dd(t){let r={};if(t){let s=t.indexOf("#");s>=0&&(r.hash=t.substr(s),t=t.substr(0,s));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function iw(t,r,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,u=Nl.Pop,h=null,m=p();m==null&&(m=0,d.replaceState(Tu({},d.state,{idx:m}),""));function p(){return(d.state||{idx:null}).idx}function v(){u=Nl.Pop;let S=p(),L=S==null?null:S-m;m=S,h&&h({action:u,location:C.location,delta:L})}function N(S,L){u=Nl.Push;let E=$p(C.location,S,L);m=p()+1;let P=vx(E,m),F=C.createHref(E);try{d.pushState(P,"",F)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;o.location.assign(F)}l&&h&&h({action:u,location:C.location,delta:1})}function y(S,L){u=Nl.Replace;let E=$p(C.location,S,L);m=p();let P=vx(E,m),F=C.createHref(E);d.replaceState(P,"",F),l&&h&&h({action:u,location:C.location,delta:0})}function A(S){let L=o.location.origin!=="null"?o.location.origin:o.location.href,E=typeof S=="string"?S:vf(S);return E=E.replace(/ $/,"%20"),Ps(L,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,L)}let C={get action(){return u},get location(){return t(o,d)},listen(S){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(bx,v),h=S,()=>{o.removeEventListener(bx,v),h=null}},createHref(S){return r(o,S)},createURL:A,encodeLocation(S){let L=A(S);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:y,go(S){return d.go(S)}};return C}var wx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wx||(wx={}));function ow(t,r,s){return s===void 0&&(s="/"),lw(t,r,s)}function lw(t,r,s,a){let o=typeof r=="string"?Dd(r):r,l=k0(o.pathname||"/",s);if(l==null)return null;let d=$1(t);cw(d);let u=null;for(let h=0;u==null&&h<d.length;++h){let m=ww(l);u=yw(d[h],m)}return u}function $1(t,r,s,a){r===void 0&&(r=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(l,d,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};h.relativePath.startsWith("/")&&(Ps(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let m=Sl([a,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(Ps(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),$1(l.children,r,p,m)),!(l.path==null&&!l.index)&&r.push({path:m,score:gw(m,l.index),routesMeta:p})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))o(l,d);else for(let h of V1(l.path))o(l,d,h)}),r}function V1(t){let r=t.split("/");if(r.length===0)return[];let[s,...a]=r,o=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=V1(a.join("/")),u=[];return u.push(...d.map(h=>h===""?l:[l,h].join("/"))),o&&u.push(...d),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function cw(t){t.sort((r,s)=>r.score!==s.score?s.score-r.score:xw(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const dw=/^:[\w-]+$/,uw=3,hw=2,fw=1,mw=10,pw=-2,Nx=t=>t==="*";function gw(t,r){let s=t.split("/"),a=s.length;return s.some(Nx)&&(a+=pw),r&&(a+=hw),s.filter(o=>!Nx(o)).reduce((o,l)=>o+(dw.test(l)?uw:l===""?fw:mw),a)}function xw(t,r){return t.length===r.length&&t.slice(0,-1).every((a,o)=>a===r[o])?t[t.length-1]-r[r.length-1]:0}function yw(t,r,s){let{routesMeta:a}=t,o={},l="/",d=[];for(let u=0;u<a.length;++u){let h=a[u],m=u===a.length-1,p=l==="/"?r:r.slice(l.length)||"/",v=bw({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),N=h.route;if(!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:Sl([l,v.pathname]),pathnameBase:kw(Sl([l,v.pathnameBase])),route:N}),v.pathnameBase!=="/"&&(l=Sl([l,v.pathnameBase]))}return d}function bw(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,a]=vw(t.path,t.caseSensitive,t.end),o=r.match(s);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:a.reduce((m,p,v)=>{let{paramName:N,isOptional:y}=p;if(N==="*"){let C=u[v]||"";d=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const A=u[v];return y&&!A?m[N]=void 0:m[N]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:t}}function vw(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),z1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,h)=>(a.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),a]}function ww(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return z1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function k0(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=t.charAt(s);return a&&a!=="/"?null:t.slice(s)||"/"}function Nw(t,r){r===void 0&&(r="/");let{pathname:s,search:a="",hash:o=""}=typeof t=="string"?Dd(t):t;return{pathname:s?s.startsWith("/")?s:jw(s,r):r,search:Aw(a),hash:Cw(o)}}function jw(t,r){let s=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function ep(t,r,s,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sw(t){return t.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function A0(t,r){let s=Sw(t);return r?s.map((a,o)=>o===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function C0(t,r,s,a){a===void 0&&(a=!1);let o;typeof t=="string"?o=Dd(t):(o=Tu({},t),Ps(!o.pathname||!o.pathname.includes("?"),ep("?","pathname","search",o)),Ps(!o.pathname||!o.pathname.includes("#"),ep("#","pathname","hash",o)),Ps(!o.search||!o.search.includes("#"),ep("#","search","hash",o)));let l=t===""||o.pathname==="",d=l?"/":o.pathname,u;if(d==null)u=s;else{let v=r.length-1;if(!a&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),v-=1;o.pathname=N.join("/")}u=v>=0?r[v]:"/"}let h=Nw(o,u),m=d&&d!=="/"&&d.endsWith("/"),p=(l||d===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}const Sl=t=>t.join("/").replace(/\/\/+/g,"/"),kw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Aw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H1=["post","put","patch","delete"];new Set(H1);const _w=["get",...H1];new Set(_w);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Ou.apply(this,arguments)}const P0=R.createContext(null),Lw=R.createContext(null),El=R.createContext(null),qf=R.createContext(null),Qi=R.createContext({outlet:null,matches:[],isDataRoute:!1}),W1=R.createContext(null);function Ew(t,r){let{relative:s}=r===void 0?{}:r;Id()||Ps(!1);let{basename:a,navigator:o}=R.useContext(El),{hash:l,pathname:d,search:u}=K1(t,{relative:s}),h=d;return a!=="/"&&(h=d==="/"?a:Sl([a,d])),o.createHref({pathname:h,search:u,hash:l})}function Id(){return R.useContext(qf)!=null}function jc(){return Id()||Ps(!1),R.useContext(qf).location}function G1(t){R.useContext(El).static||R.useLayoutEffect(t)}function bi(){let{isDataRoute:t}=R.useContext(Qi);return t?Ww():Dw()}function Dw(){Id()||Ps(!1);let t=R.useContext(P0),{basename:r,future:s,navigator:a}=R.useContext(El),{matches:o}=R.useContext(Qi),{pathname:l}=jc(),d=JSON.stringify(A0(o,s.v7_relativeSplatPath)),u=R.useRef(!1);return G1(()=>{u.current=!0}),R.useCallback(function(m,p){if(p===void 0&&(p={}),!u.current)return;if(typeof m=="number"){a.go(m);return}let v=C0(m,JSON.parse(d),l,p.relative==="path");t==null&&r!=="/"&&(v.pathname=v.pathname==="/"?r:Sl([r,v.pathname])),(p.replace?a.replace:a.push)(v,p.state,p)},[r,a,d,l,t])}const Iw=R.createContext(null);function Fw(t){let r=R.useContext(Qi).outlet;return r&&R.createElement(Iw.Provider,{value:t},r)}function _0(){let{matches:t}=R.useContext(Qi),r=t[t.length-1];return r?r.params:{}}function K1(t,r){let{relative:s}=r===void 0?{}:r,{future:a}=R.useContext(El),{matches:o}=R.useContext(Qi),{pathname:l}=jc(),d=JSON.stringify(A0(o,a.v7_relativeSplatPath));return R.useMemo(()=>C0(t,JSON.parse(d),l,s==="path"),[t,d,l,s])}function Tw(t,r){return Ow(t,r)}function Ow(t,r,s,a){Id()||Ps(!1);let{navigator:o}=R.useContext(El),{matches:l}=R.useContext(Qi),d=l[l.length-1],u=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let m=jc(),p;if(r){var v;let S=typeof r=="string"?Dd(r):r;h==="/"||(v=S.pathname)!=null&&v.startsWith(h)||Ps(!1),p=S}else p=m;let N=p.pathname||"/",y=N;if(h!=="/"){let S=h.replace(/^\//,"").split("/");y="/"+N.replace(/^\//,"").split("/").slice(S.length).join("/")}let A=ow(t,{pathname:y}),C=qw(A&&A.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Sl([h,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Sl([h,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,s,a);return r&&C?R.createElement(qf.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Nl.Pop}},C):C}function Rw(){let t=Hw(),r=Pw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},r),s?R.createElement("pre",{style:o},s):null,null)}const Mw=R.createElement(Rw,null);class Bw extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?R.createElement(Qi.Provider,{value:this.props.routeContext},R.createElement(W1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uw(t){let{routeContext:r,match:s,children:a}=t,o=R.useContext(P0);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),R.createElement(Qi.Provider,{value:r},a)}function qw(t,r,s,a){var o;if(r===void 0&&(r=[]),s===void 0&&(s=null),a===void 0&&(a=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let d=t,u=(o=s)==null?void 0:o.errors;if(u!=null){let p=d.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);p>=0||Ps(!1),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,m=-1;if(s&&a&&a.v7_partialHydration)for(let p=0;p<d.length;p++){let v=d[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=p),v.route.id){let{loaderData:N,errors:y}=s,A=v.route.loader&&N[v.route.id]===void 0&&(!y||y[v.route.id]===void 0);if(v.route.lazy||A){h=!0,m>=0?d=d.slice(0,m+1):d=[d[0]];break}}}return d.reduceRight((p,v,N)=>{let y,A=!1,C=null,S=null;s&&(y=u&&v.route.id?u[v.route.id]:void 0,C=v.route.errorElement||Mw,h&&(m<0&&N===0?(Gw("route-fallback"),A=!0,S=null):m===N&&(A=!0,S=v.route.hydrateFallbackElement||null)));let L=r.concat(d.slice(0,N+1)),E=()=>{let P;return y?P=C:A?P=S:v.route.Component?P=R.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=p,R.createElement(Uw,{match:v,routeContext:{outlet:p,matches:L,isDataRoute:s!=null},children:P})};return s&&(v.route.ErrorBoundary||v.route.errorElement||N===0)?R.createElement(Bw,{location:s.location,revalidation:s.revalidation,component:C,error:y,children:E(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):E()},null)}var Y1=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Y1||{}),J1=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(J1||{});function zw(t){let r=R.useContext(P0);return r||Ps(!1),r}function $w(t){let r=R.useContext(Lw);return r||Ps(!1),r}function Vw(t){let r=R.useContext(Qi);return r||Ps(!1),r}function Q1(t){let r=Vw(),s=r.matches[r.matches.length-1];return s.route.id||Ps(!1),s.route.id}function Hw(){var t;let r=R.useContext(W1),s=$w(),a=Q1();return r!==void 0?r:(t=s.errors)==null?void 0:t[a]}function Ww(){let{router:t}=zw(Y1.UseNavigateStable),r=Q1(J1.UseNavigateStable),s=R.useRef(!1);return G1(()=>{s.current=!0}),R.useCallback(function(o,l){l===void 0&&(l={}),s.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Ou({fromRouteId:r},l)))},[t,r])}const jx={};function Gw(t,r,s){jx[t]||(jx[t]=!0)}function Kw(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function zi(t){let{to:r,replace:s,state:a,relative:o}=t;Id()||Ps(!1);let{future:l,static:d}=R.useContext(El),{matches:u}=R.useContext(Qi),{pathname:h}=jc(),m=bi(),p=C0(r,A0(u,l.v7_relativeSplatPath),h,o==="path"),v=JSON.stringify(p);return R.useEffect(()=>m(JSON.parse(v),{replace:s,state:a,relative:o}),[m,v,o,s,a]),null}function X1(t){return Fw(t.context)}function rr(t){Ps(!1)}function Yw(t){let{basename:r="/",children:s=null,location:a,navigationType:o=Nl.Pop,navigator:l,static:d=!1,future:u}=t;Id()&&Ps(!1);let h=r.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:h,navigator:l,static:d,future:Ou({v7_relativeSplatPath:!1},u)}),[h,u,l,d]);typeof a=="string"&&(a=Dd(a));let{pathname:p="/",search:v="",hash:N="",state:y=null,key:A="default"}=a,C=R.useMemo(()=>{let S=k0(p,h);return S==null?null:{location:{pathname:S,search:v,hash:N,state:y,key:A},navigationType:o}},[h,p,v,N,y,A,o]);return C==null?null:R.createElement(El.Provider,{value:m},R.createElement(qf.Provider,{children:s,value:C}))}function Jw(t){let{children:r,location:s}=t;return Tw(Vp(r),s)}new Promise(()=>{});function Vp(t,r){r===void 0&&(r=[]);let s=[];return R.Children.forEach(t,(a,o)=>{if(!R.isValidElement(a))return;let l=[...r,o];if(a.type===R.Fragment){s.push.apply(s,Vp(a.props.children,l));return}a.type!==rr&&Ps(!1),!a.props.index||!a.props.children||Ps(!1);let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Vp(a.props.children,l)),s.push(d)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hp(){return Hp=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Hp.apply(this,arguments)}function Qw(t,r){if(t==null)return{};var s={},a=Object.keys(t),o,l;for(l=0;l<a.length;l++)o=a[l],!(r.indexOf(o)>=0)&&(s[o]=t[o]);return s}function Xw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zw(t,r){return t.button===0&&(!r||r==="_self")&&!Xw(t)}function Wp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,s)=>{let a=t[s];return r.concat(Array.isArray(a)?a.map(o=>[s,o]):[[s,a]])},[]))}function eN(t,r){let s=Wp(t);return r&&r.forEach((a,o)=>{s.has(o)||r.getAll(o).forEach(l=>{s.append(o,l)})}),s}const tN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rN="6";try{window.__reactRouterVersion=rN}catch{}const sN="startTransition",Sx=a5[sN];function nN(t){let{basename:r,children:s,future:a,window:o}=t,l=R.useRef();l.current==null&&(l.current=nw({window:o,v5Compat:!0}));let d=l.current,[u,h]=R.useState({action:d.action,location:d.location}),{v7_startTransition:m}=a||{},p=R.useCallback(v=>{m&&Sx?Sx(()=>h(v)):h(v)},[h,m]);return R.useLayoutEffect(()=>d.listen(p),[d,p]),R.useEffect(()=>Kw(a),[a]),R.createElement(Yw,{basename:r,children:s,location:u.location,navigationType:u.action,navigator:d,future:a})}const aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gi=R.forwardRef(function(r,s){let{onClick:a,relative:o,reloadDocument:l,replace:d,state:u,target:h,to:m,preventScrollReset:p,viewTransition:v}=r,N=Qw(r,tN),{basename:y}=R.useContext(El),A,C=!1;if(typeof m=="string"&&iN.test(m)&&(A=m,aN))try{let P=new URL(window.location.href),F=m.startsWith("//")?new URL(P.protocol+m):new URL(m),O=k0(F.pathname,y);F.origin===P.origin&&O!=null?m=O+F.search+F.hash:C=!0}catch{}let S=Ew(m,{relative:o}),L=oN(m,{replace:d,state:u,target:h,preventScrollReset:p,relative:o,viewTransition:v});function E(P){a&&a(P),P.defaultPrevented||L(P)}return R.createElement("a",Hp({},N,{href:A||S,onClick:C||l?a:E,ref:s,target:h}))});var kx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kx||(kx={}));var Ax;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ax||(Ax={}));function oN(t,r){let{target:s,replace:a,state:o,preventScrollReset:l,relative:d,viewTransition:u}=r===void 0?{}:r,h=bi(),m=jc(),p=K1(t,{relative:d});return R.useCallback(v=>{if(Zw(v,s)){v.preventDefault();let N=a!==void 0?a:vf(m)===vf(p);h(t,{replace:N,state:o,preventScrollReset:l,relative:d,viewTransition:u})}},[m,h,p,a,o,s,t,l,d,u])}function Fd(t){let r=R.useRef(Wp(t)),s=R.useRef(!1),a=jc(),o=R.useMemo(()=>eN(a.search,s.current?null:r.current),[a.search]),l=bi(),d=R.useCallback((u,h)=>{const m=Wp(typeof u=="function"?u(o):u);s.current=!0,l("?"+m,h)},[l,o]);return[o,d]}let lN={data:""},cN=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||lN,dN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,uN=/\/\*[^]*?\*\/|  +/g,Cx=/\n+/g,vl=(t,r)=>{let s="",a="",o="";for(let l in t){let d=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+d+";":a+=l[1]=="f"?vl(d,l):l+"{"+vl(d,l[1]=="k"?"":r)+"}":typeof d=="object"?a+=vl(d,r?r.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):d!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=vl.p?vl.p(l,d):l+":"+d+";")}return s+(r&&o?r+"{"+o+"}":o)+a},Co={},Z1=t=>{if(typeof t=="object"){let r="";for(let s in t)r+=s+Z1(t[s]);return r}return t},hN=(t,r,s,a,o)=>{let l=Z1(t),d=Co[l]||(Co[l]=(h=>{let m=0,p=11;for(;m<h.length;)p=101*p+h.charCodeAt(m++)>>>0;return"go"+p})(l));if(!Co[d]){let h=l!==t?t:(m=>{let p,v,N=[{}];for(;p=dN.exec(m.replace(uN,""));)p[4]?N.shift():p[3]?(v=p[3].replace(Cx," ").trim(),N.unshift(N[0][v]=N[0][v]||{})):N[0][p[1]]=p[2].replace(Cx," ").trim();return N[0]})(t);Co[d]=vl(o?{["@keyframes "+d]:h}:h,s?"":"."+d)}let u=s&&Co.g?Co.g:null;return s&&(Co.g=Co[d]),((h,m,p,v)=>{v?m.data=m.data.replace(v,h):m.data.indexOf(h)===-1&&(m.data=p?h+m.data:m.data+h)})(Co[d],r,a,u),d},fN=(t,r,s)=>t.reduce((a,o,l)=>{let d=r[l];if(d&&d.call){let u=d(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;d=h?"."+h:u&&typeof u=="object"?u.props?"":vl(u,""):u===!1?"":u}return a+o+(d??"")},"");function zf(t){let r=this||{},s=t.call?t(r.p):t;return hN(s.unshift?s.raw?fN(s,[].slice.call(arguments,1),r.p):s.reduce((a,o)=>Object.assign(a,o&&o.call?o(r.p):o),{}):s,cN(r.target),r.g,r.o,r.k)}let e2,Gp,Kp;zf.bind({g:1});let Fo=zf.bind({k:1});function mN(t,r,s,a){vl.p=r,e2=t,Gp=s,Kp=a}function Dl(t,r){let s=this||{};return function(){let a=arguments;function o(l,d){let u=Object.assign({},l),h=u.className||o.className;s.p=Object.assign({theme:Gp&&Gp()},u),s.o=/ *go\d+/.test(h),u.className=zf.apply(s,a)+(h?" "+h:"");let m=t;return t[0]&&(m=u.as||t,delete u.as),Kp&&m[0]&&Kp(u),e2(m,u)}return o}}var pN=t=>typeof t=="function",wf=(t,r)=>pN(t)?t(r):t,gN=(()=>{let t=0;return()=>(++t).toString()})(),t2=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),xN=20,L0="default",r2=(t,r)=>{let{toastLimit:s}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(d=>d.id===r.toast.id?{...d,...r.toast}:d)};case 2:let{toast:a}=r;return r2(t,{type:t.toasts.find(d=>d.id===a.id)?1:0,toast:a});case 3:let{toastId:o}=r;return{...t,toasts:t.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(d=>d.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let l=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+l}))}}},Qh=[],s2={toasts:[],pausedAt:void 0,settings:{toastLimit:xN}},Vi={},n2=(t,r=L0)=>{Vi[r]=r2(Vi[r]||s2,t),Qh.forEach(([s,a])=>{s===r&&a(Vi[r])})},a2=t=>Object.keys(Vi).forEach(r=>n2(t,r)),yN=t=>Object.keys(Vi).find(r=>Vi[r].toasts.some(s=>s.id===t)),$f=(t=L0)=>r=>{n2(r,t)},bN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},vN=(t={},r=L0)=>{let[s,a]=R.useState(Vi[r]||s2),o=R.useRef(Vi[r]);R.useEffect(()=>(o.current!==Vi[r]&&a(Vi[r]),Qh.push([r,a]),()=>{let d=Qh.findIndex(([u])=>u===r);d>-1&&Qh.splice(d,1)}),[r]);let l=s.toasts.map(d=>{var u,h,m;return{...t,...t[d.type],...d,removeDelay:d.removeDelay||((u=t[d.type])==null?void 0:u.removeDelay)||t?.removeDelay,duration:d.duration||((h=t[d.type])==null?void 0:h.duration)||t?.duration||bN[d.type],style:{...t.style,...(m=t[d.type])==null?void 0:m.style,...d.style}}});return{...s,toasts:l}},wN=(t,r="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||gN()}),Hu=t=>(r,s)=>{let a=wN(r,t,s);return $f(a.toasterId||yN(a.id))({type:2,toast:a}),a.id},zs=(t,r)=>Hu("blank")(t,r);zs.error=Hu("error");zs.success=Hu("success");zs.loading=Hu("loading");zs.custom=Hu("custom");zs.dismiss=(t,r)=>{let s={type:3,toastId:t};r?$f(r)(s):a2(s)};zs.dismissAll=t=>zs.dismiss(void 0,t);zs.remove=(t,r)=>{let s={type:4,toastId:t};r?$f(r)(s):a2(s)};zs.removeAll=t=>zs.remove(void 0,t);zs.promise=(t,r,s)=>{let a=zs.loading(r.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let l=r.success?wf(r.success,o):void 0;return l?zs.success(l,{id:a,...s,...s?.success}):zs.dismiss(a),o}).catch(o=>{let l=r.error?wf(r.error,o):void 0;l?zs.error(l,{id:a,...s,...s?.error}):zs.dismiss(a)}),t};var NN=1e3,jN=(t,r="default")=>{let{toasts:s,pausedAt:a}=vN(t,r),o=R.useRef(new Map).current,l=R.useCallback((v,N=NN)=>{if(o.has(v))return;let y=setTimeout(()=>{o.delete(v),d({type:4,toastId:v})},N);o.set(v,y)},[]);R.useEffect(()=>{if(a)return;let v=Date.now(),N=s.map(y=>{if(y.duration===1/0)return;let A=(y.duration||0)+y.pauseDuration-(v-y.createdAt);if(A<0){y.visible&&zs.dismiss(y.id);return}return setTimeout(()=>zs.dismiss(y.id,r),A)});return()=>{N.forEach(y=>y&&clearTimeout(y))}},[s,a,r]);let d=R.useCallback($f(r),[r]),u=R.useCallback(()=>{d({type:5,time:Date.now()})},[d]),h=R.useCallback((v,N)=>{d({type:1,toast:{id:v,height:N}})},[d]),m=R.useCallback(()=>{a&&d({type:6,time:Date.now()})},[a,d]),p=R.useCallback((v,N)=>{let{reverseOrder:y=!1,gutter:A=8,defaultPosition:C}=N||{},S=s.filter(P=>(P.position||C)===(v.position||C)&&P.height),L=S.findIndex(P=>P.id===v.id),E=S.filter((P,F)=>F<L&&P.visible).length;return S.filter(P=>P.visible).slice(...y?[E+1]:[0,E]).reduce((P,F)=>P+(F.height||0)+A,0)},[s]);return R.useEffect(()=>{s.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let N=o.get(v.id);N&&(clearTimeout(N),o.delete(v.id))}})},[s,l]),{toasts:s,handlers:{updateHeight:h,startPause:u,endPause:m,calculateOffset:p}}},SN=Fo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kN=Fo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,AN=Fo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,CN=Dl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${AN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,PN=Fo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_N=Dl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${PN} 1s linear infinite;
`,LN=Fo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,EN=Fo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,DN=Dl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${EN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,IN=Dl("div")`
  position: absolute;
`,FN=Dl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,TN=Fo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ON=Dl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${TN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,RN=({toast:t})=>{let{icon:r,type:s,iconTheme:a}=t;return r!==void 0?typeof r=="string"?R.createElement(ON,null,r):r:s==="blank"?null:R.createElement(FN,null,R.createElement(_N,{...a}),s!=="loading"&&R.createElement(IN,null,s==="error"?R.createElement(CN,{...a}):R.createElement(DN,{...a})))},MN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,BN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,UN="0%{opacity:0;} 100%{opacity:1;}",qN="0%{opacity:1;} 100%{opacity:0;}",zN=Dl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$N=Dl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,VN=(t,r)=>{let s=t.includes("top")?1:-1,[a,o]=t2()?[UN,qN]:[MN(s),BN(s)];return{animation:r?`${Fo(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fo(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},HN=R.memo(({toast:t,position:r,style:s,children:a})=>{let o=t.height?VN(t.position||r||"top-center",t.visible):{opacity:0},l=R.createElement(RN,{toast:t}),d=R.createElement($N,{...t.ariaProps},wf(t.message,t));return R.createElement(zN,{className:t.className,style:{...o,...s,...t.style}},typeof a=="function"?a({icon:l,message:d}):R.createElement(R.Fragment,null,l,d))});mN(R.createElement);var WN=({id:t,className:r,style:s,onHeightUpdate:a,children:o})=>{let l=R.useCallback(d=>{if(d){let u=()=>{let h=d.getBoundingClientRect().height;a(t,h)};u(),new MutationObserver(u).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return R.createElement("div",{ref:l,className:r,style:s},o)},GN=(t,r)=>{let s=t.includes("top"),a=s?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:t2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(s?1:-1)}px)`,...a,...o}},KN=zf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Rh=16,YN=({reverseOrder:t,position:r="top-center",toastOptions:s,gutter:a,children:o,toasterId:l,containerStyle:d,containerClassName:u})=>{let{toasts:h,handlers:m}=jN(s,l);return R.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Rh,left:Rh,right:Rh,bottom:Rh,pointerEvents:"none",...d},className:u,onMouseEnter:m.startPause,onMouseLeave:m.endPause},h.map(p=>{let v=p.position||r,N=m.calculateOffset(p,{reverseOrder:t,gutter:a,defaultPosition:r}),y=GN(v,N);return R.createElement(WN,{id:p.id,key:p.id,onHeightUpdate:m.updateHeight,className:p.visible?KN:"",style:y},p.type==="custom"?wf(p.message,p):o?o(p):R.createElement(HN,{toast:p,position:v}))}))},xr=zs;function fn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var JN=typeof Symbol=="function"&&Symbol.observable||"@@observable",Px=JN,tp=()=>Math.random().toString(36).substring(7).split("").join("."),QN={INIT:`@@redux/INIT${tp()}`,REPLACE:`@@redux/REPLACE${tp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tp()}`},Nf=QN;function E0(t){if(typeof t!="object"||t===null)return!1;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r||Object.getPrototypeOf(t)===null}function i2(t,r,s){if(typeof t!="function")throw new Error(fn(2));if(typeof r=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(fn(0));if(typeof r=="function"&&typeof s>"u"&&(s=r,r=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(fn(1));return s(i2)(t,r)}let a=t,o=r,l=new Map,d=l,u=0,h=!1;function m(){d===l&&(d=new Map,l.forEach((S,L)=>{d.set(L,S)}))}function p(){if(h)throw new Error(fn(3));return o}function v(S){if(typeof S!="function")throw new Error(fn(4));if(h)throw new Error(fn(5));let L=!0;m();const E=u++;return d.set(E,S),function(){if(L){if(h)throw new Error(fn(6));L=!1,m(),d.delete(E),l=null}}}function N(S){if(!E0(S))throw new Error(fn(7));if(typeof S.type>"u")throw new Error(fn(8));if(typeof S.type!="string")throw new Error(fn(17));if(h)throw new Error(fn(9));try{h=!0,o=a(o,S)}finally{h=!1}return(l=d).forEach(E=>{E()}),S}function y(S){if(typeof S!="function")throw new Error(fn(10));a=S,N({type:Nf.REPLACE})}function A(){const S=v;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(fn(11));function E(){const F=L;F.next&&F.next(p())}return E(),{unsubscribe:S(E)}},[Px](){return this}}}return N({type:Nf.INIT}),{dispatch:N,subscribe:v,getState:p,replaceReducer:y,[Px]:A}}function XN(t){Object.keys(t).forEach(r=>{const s=t[r];if(typeof s(void 0,{type:Nf.INIT})>"u")throw new Error(fn(12));if(typeof s(void 0,{type:Nf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fn(13))})}function ZN(t){const r=Object.keys(t),s={};for(let l=0;l<r.length;l++){const d=r[l];typeof t[d]=="function"&&(s[d]=t[d])}const a=Object.keys(s);let o;try{XN(s)}catch(l){o=l}return function(d={},u){if(o)throw o;let h=!1;const m={};for(let p=0;p<a.length;p++){const v=a[p],N=s[v],y=d[v],A=N(y,u);if(typeof A>"u")throw u&&u.type,new Error(fn(14));m[v]=A,h=h||A!==y}return h=h||a.length!==Object.keys(d).length,h?m:d}}function jf(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,s)=>(...a)=>r(s(...a)))}function ej(...t){return r=>(s,a)=>{const o=r(s,a);let l=()=>{throw new Error(fn(15))};const d={getState:o.getState,dispatch:(h,...m)=>l(h,...m)},u=t.map(h=>h(d));return l=jf(...u)(o.dispatch),{...o,dispatch:l}}}function tj(t){return E0(t)&&"type"in t&&typeof t.type=="string"}var o2=Symbol.for("immer-nothing"),_x=Symbol.for("immer-draftable"),Sa=Symbol.for("immer-state");function fi(t,...r){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _d=Object.getPrototypeOf;function gc(t){return!!t&&!!t[Sa]}function To(t){return t?l2(t)||Array.isArray(t)||!!t[_x]||!!t.constructor?.[_x]||Hf(t)||Wf(t):!1}var rj=Object.prototype.constructor.toString();function l2(t){if(!t||typeof t!="object")return!1;const r=_d(t);if(r===null)return!0;const s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===rj}function Sf(t,r){Vf(t)===0?Reflect.ownKeys(t).forEach(s=>{r(s,t[s],t)}):t.forEach((s,a)=>r(a,s,t))}function Vf(t){const r=t[Sa];return r?r.type_:Array.isArray(t)?1:Hf(t)?2:Wf(t)?3:0}function Yp(t,r){return Vf(t)===2?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function c2(t,r,s){const a=Vf(t);a===2?t.set(r,s):a===3?t.add(s):t[r]=s}function sj(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}function Hf(t){return t instanceof Map}function Wf(t){return t instanceof Set}function oc(t){return t.copy_||t.base_}function Jp(t,r){if(Hf(t))return new Map(t);if(Wf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const s=l2(t);if(r===!0||r==="class_only"&&!s){const a=Object.getOwnPropertyDescriptors(t);delete a[Sa];let o=Reflect.ownKeys(a);for(let l=0;l<o.length;l++){const d=o[l],u=a[d];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[d]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[d]})}return Object.create(_d(t),a)}else{const a=_d(t);if(a!==null&&s)return{...t};const o=Object.create(a);return Object.assign(o,t)}}function D0(t,r=!1){return Gf(t)||gc(t)||!To(t)||(Vf(t)>1&&(t.set=t.add=t.clear=t.delete=nj),Object.freeze(t),r&&Object.entries(t).forEach(([s,a])=>D0(a,!0))),t}function nj(){fi(2)}function Gf(t){return Object.isFrozen(t)}var aj={};function xc(t){const r=aj[t];return r||fi(0,t),r}var Ru;function d2(){return Ru}function ij(t,r){return{drafts_:[],parent_:t,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Lx(t,r){r&&(xc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=r)}function Qp(t){Xp(t),t.drafts_.forEach(oj),t.drafts_=null}function Xp(t){t===Ru&&(Ru=t.parent_)}function Ex(t){return Ru=ij(Ru,t)}function oj(t){const r=t[Sa];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Dx(t,r){r.unfinalizedDrafts_=r.drafts_.length;const s=r.drafts_[0];return t!==void 0&&t!==s?(s[Sa].modified_&&(Qp(r),fi(4)),To(t)&&(t=kf(r,t),r.parent_||Af(r,t)),r.patches_&&xc("Patches").generateReplacementPatches_(s[Sa].base_,t,r.patches_,r.inversePatches_)):t=kf(r,s,[]),Qp(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),t!==o2?t:void 0}function kf(t,r,s){if(Gf(r))return r;const a=r[Sa];if(!a)return Sf(r,(o,l)=>Ix(t,a,r,o,l,s)),r;if(a.scope_!==t)return r;if(!a.modified_)return Af(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const o=a.copy_;let l=o,d=!1;a.type_===3&&(l=new Set(o),o.clear(),d=!0),Sf(l,(u,h)=>Ix(t,a,o,u,h,s,d)),Af(t,o,!1),s&&t.patches_&&xc("Patches").generatePatches_(a,s,t.patches_,t.inversePatches_)}return a.copy_}function Ix(t,r,s,a,o,l,d){if(gc(o)){const u=l&&r&&r.type_!==3&&!Yp(r.assigned_,a)?l.concat(a):void 0,h=kf(t,o,u);if(c2(s,a,h),gc(h))t.canAutoFreeze_=!1;else return}else d&&s.add(o);if(To(o)&&!Gf(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;kf(t,o),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(s,a)&&Af(t,o)}}function Af(t,r,s=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&D0(r,s)}function lj(t,r){const s=Array.isArray(t),a={type_:s?1:0,scope_:r?r.scope_:d2(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=a,l=I0;s&&(o=[a],l=Mu);const{revoke:d,proxy:u}=Proxy.revocable(o,l);return a.draft_=u,a.revoke_=d,u}var I0={get(t,r){if(r===Sa)return t;const s=oc(t);if(!Yp(s,r))return cj(t,s,r);const a=s[r];return t.finalized_||!To(a)?a:a===rp(t.base_,r)?(sp(t),t.copy_[r]=e0(a,t)):a},has(t,r){return r in oc(t)},ownKeys(t){return Reflect.ownKeys(oc(t))},set(t,r,s){const a=u2(oc(t),r);if(a?.set)return a.set.call(t.draft_,s),!0;if(!t.modified_){const o=rp(oc(t),r),l=o?.[Sa];if(l&&l.base_===s)return t.copy_[r]=s,t.assigned_[r]=!1,!0;if(sj(s,o)&&(s!==void 0||Yp(t.base_,r)))return!0;sp(t),Zp(t)}return t.copy_[r]===s&&(s!==void 0||r in t.copy_)||Number.isNaN(s)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=s,t.assigned_[r]=!0),!0},deleteProperty(t,r){return rp(t.base_,r)!==void 0||r in t.base_?(t.assigned_[r]=!1,sp(t),Zp(t)):delete t.assigned_[r],t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor(t,r){const s=oc(t),a=Reflect.getOwnPropertyDescriptor(s,r);return a&&{writable:!0,configurable:t.type_!==1||r!=="length",enumerable:a.enumerable,value:s[r]}},defineProperty(){fi(11)},getPrototypeOf(t){return _d(t.base_)},setPrototypeOf(){fi(12)}},Mu={};Sf(I0,(t,r)=>{Mu[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Mu.deleteProperty=function(t,r){return Mu.set.call(this,t,r,void 0)};Mu.set=function(t,r,s){return I0.set.call(this,t[0],r,s,t[0])};function rp(t,r){const s=t[Sa];return(s?oc(s):t)[r]}function cj(t,r,s){const a=u2(r,s);return a?"value"in a?a.value:a.get?.call(t.draft_):void 0}function u2(t,r){if(!(r in t))return;let s=_d(t);for(;s;){const a=Object.getOwnPropertyDescriptor(s,r);if(a)return a;s=_d(s)}}function Zp(t){t.modified_||(t.modified_=!0,t.parent_&&Zp(t.parent_))}function sp(t){t.copy_||(t.copy_=Jp(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var dj=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,s,a)=>{if(typeof r=="function"&&typeof s!="function"){const l=s;s=r;const d=this;return function(h=l,...m){return d.produce(h,p=>s.call(this,p,...m))}}typeof s!="function"&&fi(6),a!==void 0&&typeof a!="function"&&fi(7);let o;if(To(r)){const l=Ex(this),d=e0(r,void 0);let u=!0;try{o=s(d),u=!1}finally{u?Qp(l):Xp(l)}return Lx(l,a),Dx(o,l)}else if(!r||typeof r!="object"){if(o=s(r),o===void 0&&(o=r),o===o2&&(o=void 0),this.autoFreeze_&&D0(o,!0),a){const l=[],d=[];xc("Patches").generateReplacementPatches_(r,o,l,d),a(l,d)}return o}else fi(1,r)},this.produceWithPatches=(r,s)=>{if(typeof r=="function")return(d,...u)=>this.produceWithPatches(d,h=>r(h,...u));let a,o;return[this.produce(r,s,(d,u)=>{a=d,o=u}),a,o]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){To(t)||fi(8),gc(t)&&(t=uj(t));const r=Ex(this),s=e0(t,void 0);return s[Sa].isManual_=!0,Xp(r),s}finishDraft(t,r){const s=t&&t[Sa];(!s||!s.isManual_)&&fi(9);const{scope_:a}=s;return Lx(a,r),Dx(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,r){let s;for(s=r.length-1;s>=0;s--){const o=r[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(r=r.slice(s+1));const a=xc("Patches").applyPatches_;return gc(t)?a(t,r):this.produce(t,o=>a(o,r))}};function e0(t,r){const s=Hf(t)?xc("MapSet").proxyMap_(t,r):Wf(t)?xc("MapSet").proxySet_(t,r):lj(t,r);return(r?r.scope_:d2()).drafts_.push(s),s}function uj(t){return gc(t)||fi(10,t),h2(t)}function h2(t){if(!To(t)||Gf(t))return t;const r=t[Sa];let s;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,s=Jp(t,r.scope_.immer_.useStrictShallowCopy_)}else s=Jp(t,!0);return Sf(s,(a,o)=>{c2(s,a,h2(o))}),r&&(r.finalized_=!1),s}var ka=new dj,f2=ka.produce;ka.produceWithPatches.bind(ka);ka.setAutoFreeze.bind(ka);ka.setUseStrictShallowCopy.bind(ka);ka.applyPatches.bind(ka);ka.createDraft.bind(ka);ka.finishDraft.bind(ka);function m2(t){return({dispatch:s,getState:a})=>o=>l=>typeof l=="function"?l(s,a,t):o(l)}var hj=m2(),fj=m2,mj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jf:jf.apply(null,arguments)},pj=t=>t&&typeof t.match=="function";function wu(t,r){function s(...a){if(r){let o=r(...a);if(!o)throw new Error(Io(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:a[0]}}return s.toString=()=>`${t}`,s.type=t,s.match=a=>tj(a)&&a.type===t,s}var p2=class vu extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,vu.prototype)}static get[Symbol.species](){return vu}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new vu(...r[0].concat(this)):new vu(...r.concat(this))}};function Fx(t){return To(t)?f2(t,()=>{}):t}function Mh(t,r,s){return t.has(r)?t.get(r):t.set(r,s(r)).get(r)}function gj(t){return typeof t=="boolean"}var xj=()=>function(r){const{thunk:s=!0,immutableCheck:a=!0,serializableCheck:o=!0,actionCreatorCheck:l=!0}=r??{};let d=new p2;return s&&(gj(s)?d.push(hj):d.push(fj(s.extraArgument))),d},yj="RTK_autoBatch",Tx=t=>r=>{setTimeout(r,t)},bj=(t={type:"raf"})=>r=>(...s)=>{const a=r(...s);let o=!0,l=!1,d=!1;const u=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Tx(10):t.type==="callback"?t.queueNotification:Tx(t.timeout),m=()=>{d=!1,l&&(l=!1,u.forEach(p=>p()))};return Object.assign({},a,{subscribe(p){const v=()=>o&&p(),N=a.subscribe(v);return u.add(p),()=>{N(),u.delete(p)}},dispatch(p){try{return o=!p?.meta?.[yj],l=!o,l&&(d||(d=!0,h(m))),a.dispatch(p)}finally{o=!0}}})},vj=t=>function(s){const{autoBatch:a=!0}=s??{};let o=new p2(t);return a&&o.push(bj(typeof a=="object"?a:void 0)),o};function wj(t){const r=xj(),{reducer:s=void 0,middleware:a,devTools:o=!0,preloadedState:l=void 0,enhancers:d=void 0}=t||{};let u;if(typeof s=="function")u=s;else if(E0(s))u=ZN(s);else throw new Error(Io(1));let h;typeof a=="function"?h=a(r):h=r();let m=jf;o&&(m=mj({trace:!1,...typeof o=="object"&&o}));const p=ej(...h),v=vj(p);let N=typeof d=="function"?d(v):v();const y=m(...N);return i2(u,l,y)}function g2(t){const r={},s=[];let a;const o={addCase(l,d){const u=typeof l=="string"?l:l.type;if(!u)throw new Error(Io(28));if(u in r)throw new Error(Io(29));return r[u]=d,o},addMatcher(l,d){return s.push({matcher:l,reducer:d}),o},addDefaultCase(l){return a=l,o}};return t(o),[r,s,a]}function Nj(t){return typeof t=="function"}function jj(t,r){let[s,a,o]=g2(r),l;if(Nj(t))l=()=>Fx(t());else{const u=Fx(t);l=()=>u}function d(u=l(),h){let m=[s[h.type],...a.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return m.filter(p=>!!p).length===0&&(m=[o]),m.reduce((p,v)=>{if(v)if(gc(p)){const y=v(p,h);return y===void 0?p:y}else{if(To(p))return f2(p,N=>v(N,h));{const N=v(p,h);if(N===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}}return p},u)}return d.getInitialState=l,d}var Sj=(t,r)=>pj(t)?t.match(r):t(r);function kj(...t){return r=>t.some(s=>Sj(s,r))}var Aj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Cj=(t=21)=>{let r="",s=t;for(;s--;)r+=Aj[Math.random()*64|0];return r},Pj=["name","message","stack","code"],np=class{constructor(t,r){this.payload=t,this.meta=r}_type},Ox=class{constructor(t,r){this.payload=t,this.meta=r}_type},_j=t=>{if(typeof t=="object"&&t!==null){const r={};for(const s of Pj)typeof t[s]=="string"&&(r[s]=t[s]);return r}return{message:String(t)}},Rx="External signal was aborted",Mr=(()=>{function t(r,s,a){const o=wu(r+"/fulfilled",(h,m,p,v)=>({payload:h,meta:{...v||{},arg:p,requestId:m,requestStatus:"fulfilled"}})),l=wu(r+"/pending",(h,m,p)=>({payload:void 0,meta:{...p||{},arg:m,requestId:h,requestStatus:"pending"}})),d=wu(r+"/rejected",(h,m,p,v,N)=>({payload:v,error:(a&&a.serializeError||_j)(h||"Rejected"),meta:{...N||{},arg:p,requestId:m,rejectedWithValue:!!v,requestStatus:"rejected",aborted:h?.name==="AbortError",condition:h?.name==="ConditionError"}}));function u(h,{signal:m}={}){return(p,v,N)=>{const y=a?.idGenerator?a.idGenerator(h):Cj(),A=new AbortController;let C,S;function L(P){S=P,A.abort()}m&&(m.aborted?L(Rx):m.addEventListener("abort",()=>L(Rx),{once:!0}));const E=(async function(){let P;try{let O=a?.condition?.(h,{getState:v,extra:N});if(Ej(O)&&(O=await O),O===!1||A.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const se=new Promise((X,K)=>{C=()=>{K({name:"AbortError",message:S||"Aborted"})},A.signal.addEventListener("abort",C)});p(l(y,h,a?.getPendingMeta?.({requestId:y,arg:h},{getState:v,extra:N}))),P=await Promise.race([se,Promise.resolve(s(h,{dispatch:p,getState:v,extra:N,requestId:y,signal:A.signal,abort:L,rejectWithValue:(X,K)=>new np(X,K),fulfillWithValue:(X,K)=>new Ox(X,K)})).then(X=>{if(X instanceof np)throw X;return X instanceof Ox?o(X.payload,y,h,X.meta):o(X,y,h)})])}catch(O){P=O instanceof np?d(null,y,h,O.payload,O.meta):d(O,y,h)}finally{C&&A.signal.removeEventListener("abort",C)}return a&&!a.dispatchConditionRejection&&d.match(P)&&P.meta.condition||p(P),P})();return Object.assign(E,{abort:L,requestId:y,arg:h,unwrap(){return E.then(Lj)}})}}return Object.assign(u,{pending:l,rejected:d,fulfilled:o,settled:kj(d,o),typePrefix:r})}return t.withTypes=()=>t,t})();function Lj(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Ej(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Dj=Symbol.for("rtk-slice-createasyncthunk");function Ij(t,r){return`${t}/${r}`}function Fj({creators:t}={}){const r=t?.asyncThunk?.[Dj];return function(a){const{name:o,reducerPath:l=o}=a;if(!o)throw new Error(Io(11));const d=(typeof a.reducers=="function"?a.reducers(Oj()):a.reducers)||{},u=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(P,F){const O=typeof P=="string"?P:P.type;if(!O)throw new Error(Io(12));if(O in h.sliceCaseReducersByType)throw new Error(Io(13));return h.sliceCaseReducersByType[O]=F,m},addMatcher(P,F){return h.sliceMatchers.push({matcher:P,reducer:F}),m},exposeAction(P,F){return h.actionCreators[P]=F,m},exposeCaseReducer(P,F){return h.sliceCaseReducersByName[P]=F,m}};u.forEach(P=>{const F=d[P],O={reducerName:P,type:Ij(o,P),createNotation:typeof a.reducers=="function"};Mj(F)?Uj(O,F,m,r):Rj(O,F,m)});function p(){const[P={},F=[],O=void 0]=typeof a.extraReducers=="function"?g2(a.extraReducers):[a.extraReducers],se={...P,...h.sliceCaseReducersByType};return jj(a.initialState,X=>{for(let K in se)X.addCase(K,se[K]);for(let K of h.sliceMatchers)X.addMatcher(K.matcher,K.reducer);for(let K of F)X.addMatcher(K.matcher,K.reducer);O&&X.addDefaultCase(O)})}const v=P=>P,N=new Map,y=new WeakMap;let A;function C(P,F){return A||(A=p()),A(P,F)}function S(){return A||(A=p()),A.getInitialState()}function L(P,F=!1){function O(X){let K=X[P];return typeof K>"u"&&F&&(K=Mh(y,O,S)),K}function se(X=v){const K=Mh(N,F,()=>new WeakMap);return Mh(K,X,()=>{const Y={};for(const[ie,I]of Object.entries(a.selectors??{}))Y[ie]=Tj(I,X,()=>Mh(y,X,S),F);return Y})}return{reducerPath:P,getSelectors:se,get selectors(){return se(O)},selectSlice:O}}const E={name:o,reducer:C,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,...L(l),injectInto(P,{reducerPath:F,...O}={}){const se=F??l;return P.inject({reducerPath:se,reducer:C},O),{...E,...L(se,!0)}}};return E}}function Tj(t,r,s,a){function o(l,...d){let u=r(l);return typeof u>"u"&&a&&(u=s()),t(u,...d)}return o.unwrapped=t,o}var Mo=Fj();function Oj(){function t(r,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...s}}return t.withTypes=()=>t,{reducer(r){return Object.assign({[r.name](...s){return r(...s)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:s}},asyncThunk:t}}function Rj({type:t,reducerName:r,createNotation:s},a,o){let l,d;if("reducer"in a){if(s&&!Bj(a))throw new Error(Io(17));l=a.reducer,d=a.prepare}else l=a;o.addCase(t,l).exposeCaseReducer(r,l).exposeAction(r,d?wu(t,d):wu(t))}function Mj(t){return t._reducerDefinitionType==="asyncThunk"}function Bj(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Uj({type:t,reducerName:r},s,a,o){if(!o)throw new Error(Io(18));const{payloadCreator:l,fulfilled:d,pending:u,rejected:h,settled:m,options:p}=s,v=o(t,l,p);a.exposeAction(r,v),d&&a.addCase(v.fulfilled,d),u&&a.addCase(v.pending,u),h&&a.addCase(v.rejected,h),m&&a.addMatcher(v.settled,m),a.exposeCaseReducer(r,{fulfilled:d||Bh,pending:u||Bh,rejected:h||Bh,settled:m||Bh})}function Bh(){}function Io(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function x2(t,r){return function(){return t.apply(r,arguments)}}const{toString:qj}=Object.prototype,{getPrototypeOf:F0}=Object,{iterator:Kf,toStringTag:y2}=Symbol,Yf=(t=>r=>{const s=qj.call(r);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),vi=t=>(t=t.toLowerCase(),r=>Yf(r)===t),Jf=t=>r=>typeof r===t,{isArray:Td}=Array,Bu=Jf("undefined");function Wu(t){return t!==null&&!Bu(t)&&t.constructor!==null&&!Bu(t.constructor)&&na(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const b2=vi("ArrayBuffer");function zj(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&b2(t.buffer),r}const $j=Jf("string"),na=Jf("function"),v2=Jf("number"),Gu=t=>t!==null&&typeof t=="object",Vj=t=>t===!0||t===!1,Xh=t=>{if(Yf(t)!=="object")return!1;const r=F0(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(y2 in t)&&!(Kf in t)},Hj=t=>{if(!Gu(t)||Wu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Wj=vi("Date"),Gj=vi("File"),Kj=vi("Blob"),Yj=vi("FileList"),Jj=t=>Gu(t)&&na(t.pipe),Qj=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||na(t.append)&&((r=Yf(t))==="formdata"||r==="object"&&na(t.toString)&&t.toString()==="[object FormData]"))},Xj=vi("URLSearchParams"),[Zj,e4,t4,r4]=["ReadableStream","Request","Response","Headers"].map(vi),s4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ku(t,r,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),Td(t))for(a=0,o=t.length;a<o;a++)r.call(null,t[a],a,t);else{if(Wu(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),d=l.length;let u;for(a=0;a<d;a++)u=l[a],r.call(null,t[u],u,t)}}function w2(t,r){if(Wu(t))return null;r=r.toLowerCase();const s=Object.keys(t);let a=s.length,o;for(;a-- >0;)if(o=s[a],r===o.toLowerCase())return o;return null}const dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,N2=t=>!Bu(t)&&t!==dc;function t0(){const{caseless:t}=N2(this)&&this||{},r={},s=(a,o)=>{const l=t&&w2(r,o)||o;Xh(r[l])&&Xh(a)?r[l]=t0(r[l],a):Xh(a)?r[l]=t0({},a):Td(a)?r[l]=a.slice():r[l]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Ku(arguments[a],s);return r}const n4=(t,r,s,{allOwnKeys:a}={})=>(Ku(r,(o,l)=>{s&&na(o)?t[l]=x2(o,s):t[l]=o},{allOwnKeys:a}),t),a4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),i4=(t,r,s,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),s&&Object.assign(t.prototype,s)},o4=(t,r,s,a)=>{let o,l,d;const u={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)d=o[l],(!a||a(d,t,r))&&!u[d]&&(r[d]=t[d],u[d]=!0);t=s!==!1&&F0(t)}while(t&&(!s||s(t,r))&&t!==Object.prototype);return r},l4=(t,r,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=r.length;const a=t.indexOf(r,s);return a!==-1&&a===s},c4=t=>{if(!t)return null;if(Td(t))return t;let r=t.length;if(!v2(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=t[r];return s},d4=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&F0(Uint8Array)),u4=(t,r)=>{const a=(t&&t[Kf]).call(t);let o;for(;(o=a.next())&&!o.done;){const l=o.value;r.call(t,l[0],l[1])}},h4=(t,r)=>{let s;const a=[];for(;(s=t.exec(r))!==null;)a.push(s);return a},f4=vi("HTMLFormElement"),m4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,o){return a.toUpperCase()+o}),Mx=(({hasOwnProperty:t})=>(r,s)=>t.call(r,s))(Object.prototype),p4=vi("RegExp"),j2=(t,r)=>{const s=Object.getOwnPropertyDescriptors(t),a={};Ku(s,(o,l)=>{let d;(d=r(o,l,t))!==!1&&(a[l]=d||o)}),Object.defineProperties(t,a)},g4=t=>{j2(t,(r,s)=>{if(na(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(na(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},x4=(t,r)=>{const s={},a=o=>{o.forEach(l=>{s[l]=!0})};return Td(t)?a(t):a(String(t).split(r)),s},y4=()=>{},b4=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function v4(t){return!!(t&&na(t.append)&&t[y2]==="FormData"&&t[Kf])}const w4=t=>{const r=new Array(10),s=(a,o)=>{if(Gu(a)){if(r.indexOf(a)>=0)return;if(Wu(a))return a;if(!("toJSON"in a)){r[o]=a;const l=Td(a)?[]:{};return Ku(a,(d,u)=>{const h=s(d,o+1);!Bu(h)&&(l[u]=h)}),r[o]=void 0,l}}return a};return s(t,0)},N4=vi("AsyncFunction"),j4=t=>t&&(Gu(t)||na(t))&&na(t.then)&&na(t.catch),S2=((t,r)=>t?setImmediate:r?((s,a)=>(dc.addEventListener("message",({source:o,data:l})=>{o===dc&&l===s&&a.length&&a.shift()()},!1),o=>{a.push(o),dc.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",na(dc.postMessage)),S4=typeof queueMicrotask<"u"?queueMicrotask.bind(dc):typeof process<"u"&&process.nextTick||S2,k4=t=>t!=null&&na(t[Kf]),Be={isArray:Td,isArrayBuffer:b2,isBuffer:Wu,isFormData:Qj,isArrayBufferView:zj,isString:$j,isNumber:v2,isBoolean:Vj,isObject:Gu,isPlainObject:Xh,isEmptyObject:Hj,isReadableStream:Zj,isRequest:e4,isResponse:t4,isHeaders:r4,isUndefined:Bu,isDate:Wj,isFile:Gj,isBlob:Kj,isRegExp:p4,isFunction:na,isStream:Jj,isURLSearchParams:Xj,isTypedArray:d4,isFileList:Yj,forEach:Ku,merge:t0,extend:n4,trim:s4,stripBOM:a4,inherits:i4,toFlatObject:o4,kindOf:Yf,kindOfTest:vi,endsWith:l4,toArray:c4,forEachEntry:u4,matchAll:h4,isHTMLForm:f4,hasOwnProperty:Mx,hasOwnProp:Mx,reduceDescriptors:j2,freezeMethods:g4,toObjectSet:x4,toCamelCase:m4,noop:y4,toFiniteNumber:b4,findKey:w2,global:dc,isContextDefined:N2,isSpecCompliantForm:v4,toJSONObject:w4,isAsyncFn:N4,isThenable:j4,setImmediate:S2,asap:S4,isIterable:k4};function Qt(t,r,s,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}Be.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const k2=Qt.prototype,A2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{A2[t]={value:t}});Object.defineProperties(Qt,A2);Object.defineProperty(k2,"isAxiosError",{value:!0});Qt.from=(t,r,s,a,o,l)=>{const d=Object.create(k2);return Be.toFlatObject(t,d,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Qt.call(d,t.message,r,s,a,o),d.cause=t,d.name=t.name,l&&Object.assign(d,l),d};const A4=null;function r0(t){return Be.isPlainObject(t)||Be.isArray(t)}function C2(t){return Be.endsWith(t,"[]")?t.slice(0,-2):t}function Bx(t,r,s){return t?t.concat(r).map(function(o,l){return o=C2(o),!s&&l?"["+o+"]":o}).join(s?".":""):r}function C4(t){return Be.isArray(t)&&!t.some(r0)}const P4=Be.toFlatObject(Be,{},null,function(r){return/^is[A-Z]/.test(r)});function Qf(t,r,s){if(!Be.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,s=Be.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,S){return!Be.isUndefined(S[C])});const a=s.metaTokens,o=s.visitor||p,l=s.dots,d=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(r);if(!Be.isFunction(o))throw new TypeError("visitor must be a function");function m(A){if(A===null)return"";if(Be.isDate(A))return A.toISOString();if(Be.isBoolean(A))return A.toString();if(!h&&Be.isBlob(A))throw new Qt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(A)||Be.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function p(A,C,S){let L=A;if(A&&!S&&typeof A=="object"){if(Be.endsWith(C,"{}"))C=a?C:C.slice(0,-2),A=JSON.stringify(A);else if(Be.isArray(A)&&C4(A)||(Be.isFileList(A)||Be.endsWith(C,"[]"))&&(L=Be.toArray(A)))return C=C2(C),L.forEach(function(P,F){!(Be.isUndefined(P)||P===null)&&r.append(d===!0?Bx([C],F,l):d===null?C:C+"[]",m(P))}),!1}return r0(A)?!0:(r.append(Bx(S,C,l),m(A)),!1)}const v=[],N=Object.assign(P4,{defaultVisitor:p,convertValue:m,isVisitable:r0});function y(A,C){if(!Be.isUndefined(A)){if(v.indexOf(A)!==-1)throw Error("Circular reference detected in "+C.join("."));v.push(A),Be.forEach(A,function(L,E){(!(Be.isUndefined(L)||L===null)&&o.call(r,L,Be.isString(E)?E.trim():E,C,N))===!0&&y(L,C?C.concat(E):[E])}),v.pop()}}if(!Be.isObject(t))throw new TypeError("data must be an object");return y(t),r}function Ux(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function T0(t,r){this._pairs=[],t&&Qf(t,this,r)}const P2=T0.prototype;P2.append=function(r,s){this._pairs.push([r,s])};P2.toString=function(r){const s=r?function(a){return r.call(this,a,Ux)}:Ux;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function _4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _2(t,r,s){if(!r)return t;const a=s&&s.encode||_4;Be.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let l;if(o?l=o(r,s):l=Be.isURLSearchParams(r)?r.toString():new T0(r,s).toString(a),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class qx{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Be.forEach(this.handlers,function(a){a!==null&&r(a)})}}const L2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L4=typeof URLSearchParams<"u"?URLSearchParams:T0,E4=typeof FormData<"u"?FormData:null,D4=typeof Blob<"u"?Blob:null,I4={isBrowser:!0,classes:{URLSearchParams:L4,FormData:E4,Blob:D4},protocols:["http","https","file","blob","url","data"]},O0=typeof window<"u"&&typeof document<"u",s0=typeof navigator=="object"&&navigator||void 0,F4=O0&&(!s0||["ReactNative","NativeScript","NS"].indexOf(s0.product)<0),T4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O4=O0&&window.location.href||"http://localhost",R4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:O0,hasStandardBrowserEnv:F4,hasStandardBrowserWebWorkerEnv:T4,navigator:s0,origin:O4},Symbol.toStringTag,{value:"Module"})),Dn={...R4,...I4};function M4(t,r){return Qf(t,new Dn.classes.URLSearchParams,{visitor:function(s,a,o,l){return Dn.isNode&&Be.isBuffer(s)?(this.append(a,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function B4(t){return Be.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function U4(t){const r={},s=Object.keys(t);let a;const o=s.length;let l;for(a=0;a<o;a++)l=s[a],r[l]=t[l];return r}function E2(t){function r(s,a,o,l){let d=s[l++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),h=l>=s.length;return d=!d&&Be.isArray(o)?o.length:d,h?(Be.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!u):((!o[d]||!Be.isObject(o[d]))&&(o[d]=[]),r(s,a,o[d],l)&&Be.isArray(o[d])&&(o[d]=U4(o[d])),!u)}if(Be.isFormData(t)&&Be.isFunction(t.entries)){const s={};return Be.forEachEntry(t,(a,o)=>{r(B4(a),o,s,0)}),s}return null}function q4(t,r,s){if(Be.isString(t))try{return(r||JSON.parse)(t),Be.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(t)}const Yu={transitional:L2,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",o=a.indexOf("application/json")>-1,l=Be.isObject(r);if(l&&Be.isHTMLForm(r)&&(r=new FormData(r)),Be.isFormData(r))return o?JSON.stringify(E2(r)):r;if(Be.isArrayBuffer(r)||Be.isBuffer(r)||Be.isStream(r)||Be.isFile(r)||Be.isBlob(r)||Be.isReadableStream(r))return r;if(Be.isArrayBufferView(r))return r.buffer;if(Be.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return M4(r,this.formSerializer).toString();if((u=Be.isFileList(r))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Qf(u?{"files[]":r}:r,h&&new h,this.formSerializer)}}return l||o?(s.setContentType("application/json",!1),q4(r)):r}],transformResponse:[function(r){const s=this.transitional||Yu.transitional,a=s&&s.forcedJSONParsing,o=this.responseType==="json";if(Be.isResponse(r)||Be.isReadableStream(r))return r;if(r&&Be.isString(r)&&(a&&!this.responseType||o)){const d=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(d)throw u.name==="SyntaxError"?Qt.from(u,Qt.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dn.classes.FormData,Blob:Dn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],t=>{Yu.headers[t]={}});const z4=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$4=t=>{const r={};let s,a,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),s=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!s||r[s]&&z4[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},zx=Symbol("internals");function pu(t){return t&&String(t).trim().toLowerCase()}function Zh(t){return t===!1||t==null?t:Be.isArray(t)?t.map(Zh):String(t)}function V4(t){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)r[a[1]]=a[2];return r}const H4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ap(t,r,s,a,o){if(Be.isFunction(a))return a.call(this,r,s);if(o&&(r=s),!!Be.isString(r)){if(Be.isString(a))return r.indexOf(a)!==-1;if(Be.isRegExp(a))return a.test(r)}}function W4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function G4(t,r){const s=Be.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(o,l,d){return this[a].call(this,r,o,l,d)},configurable:!0})})}let aa=class{constructor(r){r&&this.set(r)}set(r,s,a){const o=this;function l(u,h,m){const p=pu(h);if(!p)throw new Error("header name must be a non-empty string");const v=Be.findKey(o,p);(!v||o[v]===void 0||m===!0||m===void 0&&o[v]!==!1)&&(o[v||h]=Zh(u))}const d=(u,h)=>Be.forEach(u,(m,p)=>l(m,p,h));if(Be.isPlainObject(r)||r instanceof this.constructor)d(r,s);else if(Be.isString(r)&&(r=r.trim())&&!H4(r))d($4(r),s);else if(Be.isObject(r)&&Be.isIterable(r)){let u={},h,m;for(const p of r){if(!Be.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?Be.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}d(u,s)}else r!=null&&l(s,r,a);return this}get(r,s){if(r=pu(r),r){const a=Be.findKey(this,r);if(a){const o=this[a];if(!s)return o;if(s===!0)return V4(o);if(Be.isFunction(s))return s.call(this,o,a);if(Be.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=pu(r),r){const a=Be.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||ap(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let o=!1;function l(d){if(d=pu(d),d){const u=Be.findKey(a,d);u&&(!s||ap(a,a[u],u,s))&&(delete a[u],o=!0)}}return Be.isArray(r)?r.forEach(l):l(r),o}clear(r){const s=Object.keys(this);let a=s.length,o=!1;for(;a--;){const l=s[a];(!r||ap(this,this[l],l,r,!0))&&(delete this[l],o=!0)}return o}normalize(r){const s=this,a={};return Be.forEach(this,(o,l)=>{const d=Be.findKey(a,l);if(d){s[d]=Zh(o),delete s[l];return}const u=r?W4(l):String(l).trim();u!==l&&delete s[l],s[u]=Zh(o),a[u]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return Be.forEach(this,(a,o)=>{a!=null&&a!==!1&&(s[o]=r&&Be.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(o=>a.set(o)),a}static accessor(r){const a=(this[zx]=this[zx]={accessors:{}}).accessors,o=this.prototype;function l(d){const u=pu(d);a[u]||(G4(o,d),a[u]=!0)}return Be.isArray(r)?r.forEach(l):l(r),this}};aa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(aa.prototype,({value:t},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[s]=a}}});Be.freezeMethods(aa);function ip(t,r){const s=this||Yu,a=r||s,o=aa.from(a.headers);let l=a.data;return Be.forEach(t,function(u){l=u.call(s,l,o.normalize(),r?r.status:void 0)}),o.normalize(),l}function D2(t){return!!(t&&t.__CANCEL__)}function Od(t,r,s){Qt.call(this,t??"canceled",Qt.ERR_CANCELED,r,s),this.name="CanceledError"}Be.inherits(Od,Qt,{__CANCEL__:!0});function I2(t,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):r(new Qt("Request failed with status code "+s.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function K4(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Y4(t,r){t=t||10;const s=new Array(t),a=new Array(t);let o=0,l=0,d;return r=r!==void 0?r:1e3,function(h){const m=Date.now(),p=a[l];d||(d=m),s[o]=h,a[o]=m;let v=l,N=0;for(;v!==o;)N+=s[v++],v=v%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),m-d<r)return;const y=p&&m-p;return y?Math.round(N*1e3/y):void 0}}function J4(t,r){let s=0,a=1e3/r,o,l;const d=(m,p=Date.now())=>{s=p,o=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const p=Date.now(),v=p-s;v>=a?d(m,p):(o=m,l||(l=setTimeout(()=>{l=null,d(o)},a-v)))},()=>o&&d(o)]}const Cf=(t,r,s=3)=>{let a=0;const o=Y4(50,250);return J4(l=>{const d=l.loaded,u=l.lengthComputable?l.total:void 0,h=d-a,m=o(h),p=d<=u;a=d;const v={loaded:d,total:u,progress:u?d/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-d)/m:void 0,event:l,lengthComputable:u!=null,[r?"download":"upload"]:!0};t(v)},s)},$x=(t,r)=>{const s=t!=null;return[a=>r[0]({lengthComputable:s,total:t,loaded:a}),r[1]]},Vx=t=>(...r)=>Be.asap(()=>t(...r)),Q4=Dn.hasStandardBrowserEnv?((t,r)=>s=>(s=new URL(s,Dn.origin),t.protocol===s.protocol&&t.host===s.host&&(r||t.port===s.port)))(new URL(Dn.origin),Dn.navigator&&/(msie|trident)/i.test(Dn.navigator.userAgent)):()=>!0,X4=Dn.hasStandardBrowserEnv?{write(t,r,s,a,o,l){const d=[t+"="+encodeURIComponent(r)];Be.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),Be.isString(a)&&d.push("path="+a),Be.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Z4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function e3(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function F2(t,r,s){let a=!Z4(r);return t&&(a||s==!1)?e3(t,r):r}const Hx=t=>t instanceof aa?{...t}:t;function yc(t,r){r=r||{};const s={};function a(m,p,v,N){return Be.isPlainObject(m)&&Be.isPlainObject(p)?Be.merge.call({caseless:N},m,p):Be.isPlainObject(p)?Be.merge({},p):Be.isArray(p)?p.slice():p}function o(m,p,v,N){if(Be.isUndefined(p)){if(!Be.isUndefined(m))return a(void 0,m,v,N)}else return a(m,p,v,N)}function l(m,p){if(!Be.isUndefined(p))return a(void 0,p)}function d(m,p){if(Be.isUndefined(p)){if(!Be.isUndefined(m))return a(void 0,m)}else return a(void 0,p)}function u(m,p,v){if(v in r)return a(m,p);if(v in t)return a(void 0,m)}const h={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(m,p,v)=>o(Hx(m),Hx(p),v,!0)};return Be.forEach(Object.keys({...t,...r}),function(p){const v=h[p]||o,N=v(t[p],r[p],p);Be.isUndefined(N)&&v!==u||(s[p]=N)}),s}const T2=t=>{const r=yc({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:l,headers:d,auth:u}=r;r.headers=d=aa.from(d),r.url=_2(F2(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Be.isFormData(s)){if(Dn.hasStandardBrowserEnv||Dn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((h=d.getContentType())!==!1){const[m,...p]=h?h.split(";").map(v=>v.trim()).filter(Boolean):[];d.setContentType([m||"multipart/form-data",...p].join("; "))}}if(Dn.hasStandardBrowserEnv&&(a&&Be.isFunction(a)&&(a=a(r)),a||a!==!1&&Q4(r.url))){const m=o&&l&&X4.read(l);m&&d.set(o,m)}return r},t3=typeof XMLHttpRequest<"u",r3=t3&&function(t){return new Promise(function(s,a){const o=T2(t);let l=o.data;const d=aa.from(o.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=o,p,v,N,y,A;function C(){y&&y(),A&&A(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function L(){if(!S)return;const P=aa.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),O={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:P,config:t,request:S};I2(function(X){s(X),C()},function(X){a(X),C()},O),S=null}"onloadend"in S?S.onloadend=L:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(L)},S.onabort=function(){S&&(a(new Qt("Request aborted",Qt.ECONNABORTED,t,S)),S=null)},S.onerror=function(){a(new Qt("Network Error",Qt.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let F=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const O=o.transitional||L2;o.timeoutErrorMessage&&(F=o.timeoutErrorMessage),a(new Qt(F,O.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,t,S)),S=null},l===void 0&&d.setContentType(null),"setRequestHeader"in S&&Be.forEach(d.toJSON(),function(F,O){S.setRequestHeader(O,F)}),Be.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),u&&u!=="json"&&(S.responseType=o.responseType),m&&([N,A]=Cf(m,!0),S.addEventListener("progress",N)),h&&S.upload&&([v,y]=Cf(h),S.upload.addEventListener("progress",v),S.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(p=P=>{S&&(a(!P||P.type?new Od(null,t,S):P),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const E=K4(o.url);if(E&&Dn.protocols.indexOf(E)===-1){a(new Qt("Unsupported protocol "+E+":",Qt.ERR_BAD_REQUEST,t));return}S.send(l||null)})},s3=(t,r)=>{const{length:s}=t=t?t.filter(Boolean):[];if(r||s){let a=new AbortController,o;const l=function(m){if(!o){o=!0,u();const p=m instanceof Error?m:this.reason;a.abort(p instanceof Qt?p:new Od(p instanceof Error?p.message:p))}};let d=r&&setTimeout(()=>{d=null,l(new Qt(`timeout ${r} of ms exceeded`,Qt.ETIMEDOUT))},r);const u=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:h}=a;return h.unsubscribe=()=>Be.asap(u),h}},n3=function*(t,r){let s=t.byteLength;if(s<r){yield t;return}let a=0,o;for(;a<s;)o=a+r,yield t.slice(a,o),a=o},a3=async function*(t,r){for await(const s of i3(t))yield*n3(s,r)},i3=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},Wx=(t,r,s,a)=>{const o=a3(t,r);let l=0,d,u=h=>{d||(d=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await o.next();if(m){u(),h.close();return}let v=p.byteLength;if(s){let N=l+=v;s(N)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),o.return()}},{highWaterMark:2})},Xf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",O2=Xf&&typeof ReadableStream=="function",o3=Xf&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),R2=(t,...r)=>{try{return!!t(...r)}catch{return!1}},l3=O2&&R2(()=>{let t=!1;const r=new Request(Dn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Gx=64*1024,n0=O2&&R2(()=>Be.isReadableStream(new Response("").body)),Pf={stream:n0&&(t=>t.body)};Xf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Pf[r]&&(Pf[r]=Be.isFunction(t[r])?s=>s[r]():(s,a)=>{throw new Qt(`Response type '${r}' is not supported`,Qt.ERR_NOT_SUPPORT,a)})})})(new Response);const c3=async t=>{if(t==null)return 0;if(Be.isBlob(t))return t.size;if(Be.isSpecCompliantForm(t))return(await new Request(Dn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(t)||Be.isArrayBuffer(t))return t.byteLength;if(Be.isURLSearchParams(t)&&(t=t+""),Be.isString(t))return(await o3(t)).byteLength},d3=async(t,r)=>{const s=Be.toFiniteNumber(t.getContentLength());return s??c3(r)},u3=Xf&&(async t=>{let{url:r,method:s,data:a,signal:o,cancelToken:l,timeout:d,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:v="same-origin",fetchOptions:N}=T2(t);m=m?(m+"").toLowerCase():"text";let y=s3([o,l&&l.toAbortSignal()],d),A;const C=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let S;try{if(h&&l3&&s!=="get"&&s!=="head"&&(S=await d3(p,a))!==0){let O=new Request(r,{method:"POST",body:a,duplex:"half"}),se;if(Be.isFormData(a)&&(se=O.headers.get("content-type"))&&p.setContentType(se),O.body){const[X,K]=$x(S,Cf(Vx(h)));a=Wx(O.body,Gx,X,K)}}Be.isString(v)||(v=v?"include":"omit");const L="credentials"in Request.prototype;A=new Request(r,{...N,signal:y,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:L?v:void 0});let E=await fetch(A,N);const P=n0&&(m==="stream"||m==="response");if(n0&&(u||P&&C)){const O={};["status","statusText","headers"].forEach(Y=>{O[Y]=E[Y]});const se=Be.toFiniteNumber(E.headers.get("content-length")),[X,K]=u&&$x(se,Cf(Vx(u),!0))||[];E=new Response(Wx(E.body,Gx,X,()=>{K&&K(),C&&C()}),O)}m=m||"text";let F=await Pf[Be.findKey(Pf,m)||"text"](E,t);return!P&&C&&C(),await new Promise((O,se)=>{I2(O,se,{data:F,headers:aa.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:A})})}catch(L){throw C&&C(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,t,A),{cause:L.cause||L}):Qt.from(L,L&&L.code,t,A)}}),a0={http:A4,xhr:r3,fetch:u3};Be.forEach(a0,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Kx=t=>`- ${t}`,h3=t=>Be.isFunction(t)||t===null||t===!1,M2={getAdapter:t=>{t=Be.isArray(t)?t:[t];const{length:r}=t;let s,a;const o={};for(let l=0;l<r;l++){s=t[l];let d;if(a=s,!h3(s)&&(a=a0[(d=String(s)).toLowerCase()],a===void 0))throw new Qt(`Unknown adapter '${d}'`);if(a)break;o[d||"#"+l]=a}if(!a){const l=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=r?l.length>1?`since :
`+l.map(Kx).join(`
`):" "+Kx(l[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:a0};function op(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Od(null,t)}function Yx(t){return op(t),t.headers=aa.from(t.headers),t.data=ip.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),M2.getAdapter(t.adapter||Yu.adapter)(t).then(function(a){return op(t),a.data=ip.call(t,t.transformResponse,a),a.headers=aa.from(a.headers),a},function(a){return D2(a)||(op(t),a&&a.response&&(a.response.data=ip.call(t,t.transformResponse,a.response),a.response.headers=aa.from(a.response.headers))),Promise.reject(a)})}const B2="1.11.0",Zf={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Zf[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const Jx={};Zf.transitional=function(r,s,a){function o(l,d){return"[Axios v"+B2+"] Transitional option '"+l+"'"+d+(a?". "+a:"")}return(l,d,u)=>{if(r===!1)throw new Qt(o(d," has been removed"+(s?" in "+s:"")),Qt.ERR_DEPRECATED);return s&&!Jx[d]&&(Jx[d]=!0,console.warn(o(d," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(l,d,u):!0}};Zf.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function f3(t,r,s){if(typeof t!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const l=a[o],d=r[l];if(d){const u=t[l],h=u===void 0||d(u,l,t);if(h!==!0)throw new Qt("option "+l+" must be "+h,Qt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Qt("Unknown option "+l,Qt.ERR_BAD_OPTION)}}const ef={assertOptions:f3,validators:Zf},Bi=ef.validators;let hc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new qx,response:new qx}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=yc(this.defaults,s);const{transitional:a,paramsSerializer:o,headers:l}=s;a!==void 0&&ef.assertOptions(a,{silentJSONParsing:Bi.transitional(Bi.boolean),forcedJSONParsing:Bi.transitional(Bi.boolean),clarifyTimeoutError:Bi.transitional(Bi.boolean)},!1),o!=null&&(Be.isFunction(o)?s.paramsSerializer={serialize:o}:ef.assertOptions(o,{encode:Bi.function,serialize:Bi.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ef.assertOptions(s,{baseUrl:Bi.spelling("baseURL"),withXsrfToken:Bi.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=l&&Be.merge(l.common,l[s.method]);l&&Be.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),s.headers=aa.concat(d,l);const u=[];let h=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(s)===!1||(h=h&&C.synchronous,u.unshift(C.fulfilled,C.rejected))});const m=[];this.interceptors.response.forEach(function(C){m.push(C.fulfilled,C.rejected)});let p,v=0,N;if(!h){const A=[Yx.bind(this),void 0];for(A.unshift(...u),A.push(...m),N=A.length,p=Promise.resolve(s);v<N;)p=p.then(A[v++],A[v++]);return p}N=u.length;let y=s;for(v=0;v<N;){const A=u[v++],C=u[v++];try{y=A(y)}catch(S){C.call(this,S);break}}try{p=Yx.call(this,y)}catch(A){return Promise.reject(A)}for(v=0,N=m.length;v<N;)p=p.then(m[v++],m[v++]);return p}getUri(r){r=yc(this.defaults,r);const s=F2(r.baseURL,r.url,r.allowAbsoluteUrls);return _2(s,r.params,r.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(r){hc.prototype[r]=function(s,a){return this.request(yc(a||{},{method:r,url:s,data:(a||{}).data}))}});Be.forEach(["post","put","patch"],function(r){function s(a){return function(l,d,u){return this.request(yc(u||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}hc.prototype[r]=s(),hc.prototype[r+"Form"]=s(!0)});let m3=class U2{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const a=this;this.promise.then(o=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](o);a._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(u=>{a.subscribe(u),l=u}).then(o);return d.cancel=function(){a.unsubscribe(l)},d},r(function(l,d,u){a.reason||(a.reason=new Od(l,d,u),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new U2(function(o){r=o}),cancel:r}}};function p3(t){return function(s){return t.apply(null,s)}}function g3(t){return Be.isObject(t)&&t.isAxiosError===!0}const i0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(i0).forEach(([t,r])=>{i0[r]=t});function q2(t){const r=new hc(t),s=x2(hc.prototype.request,r);return Be.extend(s,hc.prototype,r,{allOwnKeys:!0}),Be.extend(s,r,null,{allOwnKeys:!0}),s.create=function(o){return q2(yc(t,o))},s}const Fr=q2(Yu);Fr.Axios=hc;Fr.CanceledError=Od;Fr.CancelToken=m3;Fr.isCancel=D2;Fr.VERSION=B2;Fr.toFormData=Qf;Fr.AxiosError=Qt;Fr.Cancel=Fr.CanceledError;Fr.all=function(r){return Promise.all(r)};Fr.spread=p3;Fr.isAxiosError=g3;Fr.mergeConfig=yc;Fr.AxiosHeaders=aa;Fr.formToJSON=t=>E2(Be.isHTMLForm(t)?new FormData(t):t);Fr.getAdapter=M2.getAdapter;Fr.HttpStatusCode=i0;Fr.default=Fr;const{Axios:_A,AxiosError:LA,CanceledError:EA,isCancel:DA,CancelToken:IA,VERSION:FA,all:TA,Cancel:OA,isAxiosError:RA,spread:MA,toFormData:BA,AxiosHeaders:UA,HttpStatusCode:qA,formToJSON:zA,getAdapter:$A,mergeConfig:VA}=Fr,x3="http://localhost:5000".replace(/\/$/,"");class y3{client;constructor(){this.client=Fr.create({baseURL:x3,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(r=>{const s=localStorage.getItem("token");return s&&(r.headers.Authorization=`Bearer ${s}`),r},r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r,r=>{const{response:s}=r;if(!s)return console.error("Network error. Please check your connection."),Promise.reject(r);switch(s.status){case 401:localStorage.removeItem("token"),window.location.href="/auth/login",console.error("Session expired. Please login again.");break;case 403:console.error("You do not have permission to perform this action.");break;case 404:console.error("Resource not found.");break;case 422:if(s.data?.errors){const a=s.data.errors;console.error("Validation errors:",a)}else console.error(s.data?.message||"Validation error.");break;case 429:console.error("Too many requests. Please try again later.");break;case 500:console.error("Server error. Please try again later.");break;default:console.error(s.data?.message||"An unexpected error occurred.")}return Promise.reject(r)})}async get(r,s){return(await this.client.get(r,s)).data}async post(r,s,a){return(await this.client.post(r,s,a)).data}async put(r,s,a){return(await this.client.put(r,s,a)).data}async patch(r,s,a){return(await this.client.patch(r,s,a)).data}async delete(r,s){return(await this.client.delete(r,s)).data}async uploadFile(r,s,a){const o=new FormData;o.append("file",s);const l={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u=>{if(a&&u.total){const h=Math.round(u.loaded*100/u.total);a(h)}}};return(await this.client.post(r,o,l)).data}async downloadFile(r,s){const a=await this.client.get(r,{responseType:"blob"}),o=new Blob([a.data]),l=window.URL.createObjectURL(o),d=document.createElement("a");d.href=l,d.download=s||"download",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(l)}}const Ft=new y3,dd={main:"http://localhost:5000".replace(/\/$/,""),auth:"http://localhost:5000".replace(/\/$/,"")},b3={maxRetries:3,initialDelay:1e3,maxDelay:5e3,backoffFactor:2,retryableStatuses:[400,500,502,503,504],onRetry:()=>{}};async function ud(t,r={}){const s={...b3,...r};let a=null;for(let o=0;o<=s.maxRetries;o++)try{return(await t()).data}catch(l){const d=l;a=d;const u=d.response?.status,h=u&&s.retryableStatuses.includes(u),m=o===s.maxRetries;if(!h||m)throw l;const p=Math.min(s.initialDelay*Math.pow(s.backoffFactor,o),s.maxDelay);s.onRetry(o+1,d),await new Promise(v=>setTimeout(v,p))}throw a||new Error("Request failed")}const Sc={async sendLoginOTP(t){return ud(()=>Fr.post(`${dd.auth}/auth/send-login-otp`,t),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(` Retrying OTP request (attempt ${r}/3) - server is waking up...`)}})},async verifyLoginOTP(t){return ud(()=>Fr.post(`${dd.auth}/auth/verify-login-otp`,t),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(` Retrying OTP verification (attempt ${r}/3)...`)}})},async sendSignupOTP(t){return ud(()=>Fr.post(`${dd.auth}/auth/send-signup-otp`,t),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(` Retrying signup OTP (attempt ${r}/3) - server is waking up...`)}})},async verifySignupOTP(t){return ud(()=>Fr.post(`${dd.auth}/auth/verify-signup-otp`,t),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(` Retrying signup verification (attempt ${r}/3)...`)}})},async getCurrentUser(){return Ft.get("/auth/me")},async forgotPassword(t){return ud(()=>Fr.post(`${dd.auth}/auth/forgot-password`,t),{maxRetries:3,initialDelay:2e3,onRetry:r=>{console.log(` Retrying password reset OTP (attempt ${r}/3) - server is waking up...`)}})},async resetPassword(t){const r={email:t.email,otp:t.otp,code:t.otp,newPassword:t.password};return ud(()=>Fr.post(`${dd.auth}/auth/reset-password`,r),{maxRetries:3,initialDelay:2e3,onRetry:s=>{console.log(` Retrying password reset (attempt ${s}/3)...`)}})},async logout(){return Ft.post("/auth/logout")}},tf=t=>{if(!t||typeof t!="string")return"user";switch(t.toLowerCase()){case"admin":return"admin";case"owner":return"owner";case"accountant":return"accountant";case"user":default:return"user"}},em=(t,r)=>t?r.includes(t):!1,v3=t=>em(t,["admin"]),Qx=t=>em(t,["owner"]),Xx=t=>em(t,["accountant"]),w3=t=>em(t,["admin","owner"]),ic=t=>w3(t),N3=t=>v3(t),j3={user:localStorage.getItem("user")?(()=>{const t=JSON.parse(localStorage.getItem("user"));return{...t,role:tf(t.role)}})():null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},Nu=Mr("auth/sendLoginOTP",async(t,{rejectWithValue:r})=>{try{return await Sc.sendLoginOTP(t)}catch(s){return r(s.response?.data?.message||"Failed to send OTP")}}),rf=Mr("auth/verifyLoginOTP",async(t,{rejectWithValue:r})=>{try{const s=await Sc.verifyLoginOTP(t);return localStorage.setItem("token",s.accessToken),{...s,token:s.accessToken}}catch(s){return r(s.response?.data?.message||"Invalid OTP")}}),ju=Mr("auth/sendSignupOTP",async(t,{rejectWithValue:r})=>{try{return await Sc.sendSignupOTP(t)}catch(s){return r(s.response?.data?.message||"Failed to send OTP")}}),sf=Mr("auth/verifySignupOTP",async(t,{rejectWithValue:r})=>{try{const s=await Sc.verifySignupOTP(t);return localStorage.setItem("token",s.accessToken),{...s,token:s.accessToken}}catch(s){return r(s.response?.data?.message||"Invalid OTP")}}),Su=Mr("auth/getCurrentUser",async(t,{rejectWithValue:r})=>{try{return await Sc.getCurrentUser()}catch(s){return localStorage.removeItem("token"),r(s.response?.data?.message||"Failed to get user")}}),R0=Mr("auth/logout",async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),null)),z2=Mo({name:"auth",initialState:j3,reducers:{clearError:t=>{t.error=null},setToken:(t,r)=>{t.token=r.payload,t.isAuthenticated=!0,localStorage.setItem("token",r.payload)}},extraReducers:t=>{t.addCase(Nu.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Nu.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(Nu.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(rf.pending,r=>{r.isLoading=!0,r.error=null}).addCase(rf.fulfilled,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...s.payload.user,role:tf(s.payload.user.role)};r.user=a,r.token=s.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(rf.rejected,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=s.payload}).addCase(ju.pending,r=>{r.isLoading=!0,r.error=null}).addCase(ju.fulfilled,r=>{r.isLoading=!1,r.error=null}).addCase(ju.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(sf.pending,r=>{r.isLoading=!0,r.error=null}).addCase(sf.fulfilled,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!0;const a={...s.payload.user,role:tf(s.payload.user.role)};r.user=a,r.token=s.payload.token,r.error=null,localStorage.setItem("user",JSON.stringify(a))}).addCase(sf.rejected,(r,s)=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null,r.error=s.payload}).addCase(Su.pending,r=>{r.isLoading=!0}).addCase(Su.fulfilled,(r,s)=>{r.isLoading=!1;const a={...s.payload,role:tf(s.payload.role)};r.user=a,r.isAuthenticated=!0}).addCase(Su.rejected,r=>{r.isLoading=!1,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(R0.fulfilled,r=>{r.user=null,r.token=null,r.isAuthenticated=!1,r.isLoading=!1,r.error=null})}}),{clearError:S3,setToken:HA}=z2.actions,k3=z2.reducer,$2=R.createContext(void 0),A3={en:{"dashboard.title":"Dashboard","dashboard.welcome":"Welcome to Owner Portal","dashboard.overview":"Overview","dashboard.properties":"Properties","dashboard.bookings":"Bookings","dashboard.revenue":"Revenue","dashboard.occupancy":"Occupancy Rate","dashboard.averageRate":"Average Rate","dashboard.totalRevenue":"Total Revenue","dashboard.totalBookings":"Total Bookings","dashboard.activeProperties":"Active Properties","dashboard.pendingReviews":"Pending Reviews","dashboard.description":"Here's what's happening with your properties today. Manage your portfolio with ease and maximize your rental income.","dashboard.recentBookings":"Recent Bookings","dashboard.latestReservations":"Latest reservations across your properties","dashboard.quickActions":"Quick Actions","dashboard.manageEfficiently":"Manage your properties efficiently","dashboard.yourProperties":"Your Properties","dashboard.managePortfolio":"Manage and monitor your property portfolio","dashboard.viewCalendar":"View Calendar","dashboard.manageBookings":"Manage Bookings","dashboard.viewInvoices":"View Invoices","dashboard.getSAFT":"Get SAFT-T","dashboard.noBookings":"No recent bookings found","dashboard.bookingsWillAppear":"Bookings will appear here once you have reservations","dashboard.activePropertiesCount":"Active Properties","greeting.morning":"Good morning","greeting.afternoon":"Good afternoon","greeting.evening":"Good evening","property.name":"Property Name","property.address":"Address","property.type":"Type","property.status":"Status","property.guests":"Max Guests","property.bedrooms":"Bedrooms","property.bathrooms":"Bathrooms","property.amenities":"Amenities","property.actions":"Actions","property.edit":"Edit","property.delete":"Delete","property.view":"View","nav.dashboard":"Dashboard","nav.adminPanel":"Admin Panel","nav.ownerManagement":"Owner Management","nav.properties":"Properties","nav.bookings":"Bookings","nav.invoices":"Invoices","nav.sibaManager":"SIBA Manager","nav.saft":"SAFT-T","nav.calendar":"Calendar","nav.reviews":"Reviews","nav.performance":"Performance","nav.portfolio":"Portfolio","nav.creditNotes":"Credit Notes","nav.expenses":"Expenses","nav.ownerStatements":"Owner Statements","nav.settings":"Settings","nav.profile":"Profile","nav.signOut":"Sign Out","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.edit":"Edit","common.delete":"Delete","common.view":"View","common.close":"Close","common.yes":"Yes","common.no":"No","common.confirm":"Confirm","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.refresh":"Refresh","language.english":"English","language.portuguese":"Portugus","language.switch":"Switch Language","status.active":"Active","status.inactive":"Inactive","status.pending":"Pending","status.completed":"Completed","status.cancelled":"Cancelled","calendar.month":"Month","calendar.week":"Week","calendar.day":"Day","calendar.today":"Today","calendar.booked":"Booked","calendar.available":"Available","calendar.blocked":"Blocked","calendar.price":"Price","calendar.minStay":"Min Stay","notification.newBooking":"New Booking","notification.paymentReceived":"Payment Received","notification.reviewReceived":"New Review","notification.maintenanceRequest":"Maintenance Request","notification.title":"Notifications","notification.markAllRead":"Mark all read","notification.noNotifications":"No notifications"},pt:{"dashboard.title":"Painel de Controle","dashboard.welcome":"Bem-vindo ao Portal do Proprietrio","dashboard.overview":"Viso Geral","dashboard.properties":"Propriedades","dashboard.bookings":"Reservas","dashboard.revenue":"Receita","dashboard.occupancy":"Taxa de Ocupao","dashboard.averageRate":"Taxa Mdia","dashboard.totalRevenue":"Receita Total","dashboard.totalBookings":"Total de Reservas","dashboard.activeProperties":"Propriedades Ativas","dashboard.pendingReviews":"Avaliaes Pendentes","dashboard.description":"Aqui est o que est acontecendo com suas propriedades hoje. Gerencie seu portflio com facilidade e maximize sua receita de aluguel.","dashboard.recentBookings":"Reservas Recentes","dashboard.latestReservations":"ltimas reservas em suas propriedades","dashboard.quickActions":"Aes Rpidas","dashboard.manageEfficiently":"Gerencie suas propriedades com eficincia","dashboard.yourProperties":"Suas Propriedades","dashboard.managePortfolio":"Gerencie e monitore seu portflio de propriedades","dashboard.viewCalendar":"Ver Calendrio","dashboard.manageBookings":"Gerenciar Reservas","dashboard.viewInvoices":"Ver Faturas","dashboard.getSAFT":"Obter SAFT-T","dashboard.noBookings":"Nenhuma reserva recente encontrada","dashboard.bookingsWillAppear":"As reservas aparecero aqui assim que voc tiver reservas","dashboard.activePropertiesCount":"Propriedades Ativas","greeting.morning":"Bom dia","greeting.afternoon":"Boa tarde","greeting.evening":"Boa noite","property.name":"Nome da Propriedade","property.address":"Endereo","property.type":"Tipo","property.status":"Status","property.guests":"Hspedes Mx","property.bedrooms":"Quartos","property.bathrooms":"Banheiros","property.amenities":"Comodidades","property.actions":"Aes","property.edit":"Editar","property.delete":"Excluir","property.view":"Visualizar","nav.dashboard":"Painel","nav.adminPanel":"Painel Admin","nav.ownerManagement":"Gesto de Proprietrios","nav.properties":"Propriedades","nav.bookings":"Reservas","nav.invoices":"Faturas","nav.sibaManager":"Gestor SIBA","nav.saft":"SAFT-T","nav.calendar":"Calendrio","nav.reviews":"Avaliaes","nav.performance":"Desempenho","nav.portfolio":"Portflio","nav.creditNotes":"Notas de Crdito","nav.expenses":"Despesas","nav.ownerStatements":"Extratos do Proprietrio","nav.settings":"Configuraes","nav.profile":"Perfil","nav.signOut":"Sair","common.loading":"Carregando...","common.error":"Erro","common.success":"Sucesso","common.save":"Salvar","common.cancel":"Cancelar","common.edit":"Editar","common.delete":"Excluir","common.view":"Visualizar","common.close":"Fechar","common.yes":"Sim","common.no":"No","common.confirm":"Confirmar","common.search":"Pesquisar","common.filter":"Filtrar","common.sort":"Ordenar","common.refresh":"Atualizar","language.english":"English","language.portuguese":"Portugus","language.switch":"Alterar Idioma","status.active":"Ativo","status.inactive":"Inativo","status.pending":"Pendente","status.completed":"Concludo","status.cancelled":"Cancelado","calendar.month":"Ms","calendar.week":"Semana","calendar.day":"Dia","calendar.today":"Hoje","calendar.booked":"Reservado","calendar.available":"Disponvel","calendar.blocked":"Bloqueado","calendar.price":"Preo","calendar.minStay":"Estadia Mn","notification.newBooking":"Nova Reserva","notification.paymentReceived":"Pagamento Recebido","notification.reviewReceived":"Nova Avaliao","notification.maintenanceRequest":"Solicitao de Manuteno","notification.title":"Notificaes","notification.markAllRead":"Marcar todas como lidas","notification.noNotifications":"Nenhuma notificao"}},C3=({children:t})=>{const[r,s]=R.useState(()=>{const l=localStorage.getItem("language");return l&&["en","pt"].includes(l)?l:"en"});R.useEffect(()=>{localStorage.setItem("language",r)},[r]);const o={language:r,setLanguage:s,t:l=>A3[r][l]||l};return e.jsx($2.Provider,{value:o,children:t})},tm=()=>{const t=R.useContext($2);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V2=(...t)=>t.filter((r,s,a)=>!!r&&a.indexOf(r)===s).join(" ");/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=R.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...u},h)=>R.createElement("svg",{ref:h,..._3,width:r,height:r,stroke:t,strokeWidth:a?Number(s)*24/Number(r):s,className:V2("lucide",o),...u},[...d.map(([m,p])=>R.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,r)=>{const s=R.forwardRef(({className:a,...o},l)=>R.createElement(L3,{ref:l,iconNode:r,className:V2(`lucide-${P3(t)}`,a),...o}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=gt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=gt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=gt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=gt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=gt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=gt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=gt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=gt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=gt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=gt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=gt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=gt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=gt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=gt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=gt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=gt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=gt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=gt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=gt("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=gt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=gt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=gt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=gt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=gt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=gt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=gt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=gt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=gt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=gt("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=gt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=gt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=gt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=gt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=gt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=gt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=gt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=gt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=gt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=gt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=gt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=gt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=gt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=gt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=gt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=gt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=gt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=gt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=gt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=gt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=gt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=gt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=gt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=gt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=gt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=gt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=gt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=gt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=gt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=gt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=gt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=gt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),K3="/assets/Real-logo-D3Cla3EV.jpg",J2=({className:t="",size:r="md"})=>{const s={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsx("img",{src:K3,alt:"Logo",className:`${s[r]} ${t}`})},Y3=({isOpen:t,onClose:r})=>{const s=jc(),a=Hs(),{user:o}=Bt(p=>p.auth),{t:l}=tm(),d=[{name:l("nav.dashboard"),href:"/dashboard/owner",icon:B3},{name:l("nav.adminPanel"),href:"/admin/dashboard",icon:F3,roles:["admin"]},{name:l("nav.saft"),href:"/saft",icon:o0},{name:l("nav.bookings"),href:"/bookings",icon:H2},{name:l("nav.invoices"),href:"/invoices",icon:Ji},{name:l("nav.calendar"),href:"/calendar",icon:gs},{name:l("nav.sibaManager"),href:"/siba-manager",icon:qs},{name:l("nav.properties"),href:"/property-management",icon:mn},{name:l("nav.ownerManagement"),href:"/admin/owners",icon:ra,roles:["admin"]},{name:l("nav.ownerStatements"),href:"/owner-statements",icon:Ji},{name:"Settings",href:"/settings",icon:Ed},{name:l("nav.reviews"),href:"/reviews",icon:nf,roles:["owner"]}];R.useEffect(()=>{r()},[s.pathname,r]);const u=()=>{a(R0())},h=d.filter(p=>!p.roles||o&&p.roles.includes(o.role)),m=p=>p==="/dashboard/owner"?s.pathname==="/"||s.pathname==="/dashboard"||s.pathname.startsWith("/dashboard/owner"):s.pathname===p||s.pathname.startsWith(p);return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:r})}),e.jsx("nav",{className:`w-64 bg-white shadow-sm min-h-screen ${t?"fixed inset-y-0 left-0 z-50 translate-x-0":"hidden lg:block lg:fixed lg:inset-y-0 lg:left-0 lg:z-40"}`,children:e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg mr-3 border border-gray-200 shadow-sm",children:e.jsx(J2,{size:"md"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[e.jsx("span",{className:"text-gray-900",children:"Owner"}),e.jsx("span",{className:"text-[#5FFF56]",children:"Portal"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Property Management"})]})]}),e.jsx("div",{className:"space-y-2",children:h.map(p=>{const v=p.icon,N=m(p.href);return e.jsxs(Gi,{to:p.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${N?"bg-[#5FFF56] bg-opacity-20 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:p.name}),p.badge&&e.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:p.badge})]},p.name)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:u,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsx(K2,{className:"mr-3 h-5 w-5 text-gray-500"}),l("nav.signOut")]})})]})})]})},J3=({className:t="",showLabel:r=!0})=>{const{language:s,setLanguage:a,t:o}=tm(),[l,d]=R.useState(!1),u=[{code:"en",name:"English",flag:""},{code:"pt",name:"Portugus",flag:""}],h=u.find(p=>p.code===s),m=p=>{a(p),d(!1)};return e.jsxs("div",{className:`relative ${t}`,children:[e.jsxs("button",{onClick:()=>d(!l),className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:o("language.switch"),children:[e.jsx(M3,{className:"h-5 w-5"}),r&&e.jsxs("span",{className:"text-sm font-medium",children:[h?.flag," ",h?.name]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-20",children:e.jsx("div",{className:"py-2",children:u.map(p=>e.jsxs("button",{onClick:()=>m(p.code),className:`flex items-center justify-between w-full px-4 py-2 text-sm hover:bg-gray-50 ${s===p.code?"bg-green-50 text-green-800":"text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:p.flag}),e.jsx("span",{className:"font-medium",children:p.name})]}),s===p.code&&e.jsx(Do,{className:"h-4 w-4 text-green-600"})]},p.code))})})]})]})},Q3=({onMenuClick:t})=>{const[r,s]=R.useState(!1),a=Hs();bi();const{t:o}=tm(),{user:l}=Bt(u=>u.auth),d=()=>{a(R0())};return e.jsx("header",{className:"bg-white shadow-sm border-b fixed top-0 left-0 right-0 z-30 lg:left-64",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100 mr-2",children:e.jsx(z3,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(J3,{showLabel:!1}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-[#0ea5e9] to-[#0284c7] rounded-full",children:e.jsx("span",{className:"text-xs font-bold text-white",children:(l?.firstName||l?.name||l?.username||l?.email||"U").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:l?.firstName||l?.name||l?.username||"John"}),e.jsx("p",{className:"text-xs text-[#0ea5e9] font-semibold capitalize",children:l?.role?.toLowerCase()||"Owner"})]}),e.jsx(_f,{className:"h-3 w-3 text-gray-500"})]}),r&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l?.firstName||l?.name||l?.username||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:l?.email})]}),e.jsxs("button",{onClick:d,className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:[e.jsx(K2,{className:"h-4 w-4 mr-3"}),o("nav.signOut")]})]})})]})]})]})})})},X3=()=>{const[t,r]=R.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(Q3,{onMenuClick:()=>r(!0)}),e.jsxs("div",{className:"flex",children:[e.jsx(Y3,{isOpen:t,onClose:()=>r(!1)}),e.jsx("main",{className:"flex-1 p-8 bg-white lg:ml-64 pt-24",children:e.jsx(X1,{})})]})]})},Z3=()=>{const t=bi(),{isAuthenticated:r}=Bt(s=>s.auth);return R.useEffect(()=>{r&&t("/dashboard")},[r,t]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(X1,{})})};var Ju=t=>t.type==="checkbox",uc=t=>t instanceof Date,$n=t=>t==null;const Q2=t=>typeof t=="object";var _s=t=>!$n(t)&&!Array.isArray(t)&&Q2(t)&&!uc(t),e6=t=>_s(t)&&t.target?Ju(t.target)?t.target.checked:t.target.value:t,t6=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,r6=(t,r)=>t.has(t6(r)),s6=t=>{const r=t.constructor&&t.constructor.prototype;return _s(r)&&r.hasOwnProperty("isPrototypeOf")},U0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tn(t){let r;const s=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(U0&&(t instanceof Blob||a))&&(s||_s(t)))if(r=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!s6(t))r=t;else for(const o in t)t.hasOwnProperty(o)&&(r[o]=tn(t[o]));else return t;return r}var rm=t=>/^\w*$/.test(t),Os=t=>t===void 0,q0=t=>Array.isArray(t)?t.filter(Boolean):[],z0=t=>q0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Pt=(t,r,s)=>{if(!r||!_s(t))return s;const a=(rm(r)?[r]:z0(r)).reduce((o,l)=>$n(o)?o:o[l],t);return Os(a)||a===t?Os(t[r])?s:t[r]:a},$i=t=>typeof t=="boolean",Kr=(t,r,s)=>{let a=-1;const o=rm(r)?[r]:z0(r),l=o.length,d=l-1;for(;++a<l;){const u=o[a];let h=s;if(a!==d){const m=t[u];h=_s(m)||Array.isArray(m)?m:isNaN(+o[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=h,t=t[u]}};const ry={BLUR:"blur",FOCUS_OUT:"focusout"},mi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Po={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},n6=zn.createContext(null);n6.displayName="HookFormContext";var a6=(t,r,s,a=!0)=>{const o={defaultValues:r._defaultValues};for(const l in t)Object.defineProperty(o,l,{get:()=>{const d=l;return r._proxyFormState[d]!==mi.all&&(r._proxyFormState[d]=!a||mi.all),t[d]}});return o};const i6=typeof window<"u"?zn.useLayoutEffect:zn.useEffect;var Hi=t=>typeof t=="string",o6=(t,r,s,a,o)=>Hi(t)?(a&&r.watch.add(t),Pt(s,t,o)):Array.isArray(t)?t.map(l=>(a&&r.watch.add(l),Pt(s,l))):(a&&(r.watchAll=!0),s),c0=t=>$n(t)||!Q2(t);function wl(t,r,s=new WeakSet){if(c0(t)||c0(r))return t===r;if(uc(t)&&uc(r))return t.getTime()===r.getTime();const a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;if(s.has(t)||s.has(r))return!0;s.add(t),s.add(r);for(const l of a){const d=t[l];if(!o.includes(l))return!1;if(l!=="ref"){const u=r[l];if(uc(d)&&uc(u)||_s(d)&&_s(u)||Array.isArray(d)&&Array.isArray(u)?!wl(d,u,s):d!==u)return!1}}return!0}var l6=(t,r,s,a,o)=>r?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[a]:o||!0}}:{},Cu=t=>Array.isArray(t)?t:[t],sy=()=>{let t=[];return{get observers(){return t},next:o=>{for(const l of t)l.next&&l.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(l=>l!==o)}}),unsubscribe:()=>{t=[]}}},ta=t=>_s(t)&&!Object.keys(t).length,$0=t=>t.type==="file",pi=t=>typeof t=="function",Lf=t=>{if(!U0)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},X2=t=>t.type==="select-multiple",V0=t=>t.type==="radio",c6=t=>V0(t)||Ju(t),fp=t=>Lf(t)&&t.isConnected;function d6(t,r){const s=r.slice(0,-1).length;let a=0;for(;a<s;)t=Os(t)?a++:t[r[a++]];return t}function u6(t){for(const r in t)if(t.hasOwnProperty(r)&&!Os(t[r]))return!1;return!0}function Ts(t,r){const s=Array.isArray(r)?r:rm(r)?[r]:z0(r),a=s.length===1?t:d6(t,s),o=s.length-1,l=s[o];return a&&delete a[l],o!==0&&(_s(a)&&ta(a)||Array.isArray(a)&&u6(a))&&Ts(t,s.slice(0,-1)),t}var Z2=t=>{for(const r in t)if(pi(t[r]))return!0;return!1};function Ef(t,r={}){const s=Array.isArray(t);if(_s(t)||s)for(const a in t)Array.isArray(t[a])||_s(t[a])&&!Z2(t[a])?(r[a]=Array.isArray(t[a])?[]:{},Ef(t[a],r[a])):$n(t[a])||(r[a]=!0);return r}function eb(t,r,s){const a=Array.isArray(t);if(_s(t)||a)for(const o in t)Array.isArray(t[o])||_s(t[o])&&!Z2(t[o])?Os(r)||c0(s[o])?s[o]=Array.isArray(t[o])?Ef(t[o],[]):{...Ef(t[o])}:eb(t[o],$n(r)?{}:r[o],s[o]):s[o]=!wl(t[o],r[o]);return s}var gu=(t,r)=>eb(t,r,Ef(r));const ny={value:!1,isValid:!1},ay={value:!0,isValid:!0};var tb=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Os(t[0].attributes.value)?Os(t[0].value)||t[0].value===""?ay:{value:t[0].value,isValid:!0}:ay:ny}return ny},rb=(t,{valueAsNumber:r,valueAsDate:s,setValueAs:a})=>Os(t)?t:r?t===""?NaN:t&&+t:s&&Hi(t)?new Date(t):a?a(t):t;const iy={isValid:!1,value:null};var sb=t=>Array.isArray(t)?t.reduce((r,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:r,iy):iy;function oy(t){const r=t.ref;return $0(r)?r.files:V0(r)?sb(t.refs).value:X2(r)?[...r.selectedOptions].map(({value:s})=>s):Ju(r)?tb(t.refs).value:rb(Os(r.value)?t.ref.value:r.value,t)}var h6=(t,r,s,a)=>{const o={};for(const l of t){const d=Pt(r,l);d&&Kr(o,l,d._f)}return{criteriaMode:s,names:[...t],fields:o,shouldUseNativeValidation:a}},Df=t=>t instanceof RegExp,xu=t=>Os(t)?t:Df(t)?t.source:_s(t)?Df(t.value)?t.value.source:t.value:t,ly=t=>({isOnSubmit:!t||t===mi.onSubmit,isOnBlur:t===mi.onBlur,isOnChange:t===mi.onChange,isOnAll:t===mi.all,isOnTouch:t===mi.onTouched});const cy="AsyncFunction";var f6=t=>!!t&&!!t.validate&&!!(pi(t.validate)&&t.validate.constructor.name===cy||_s(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===cy)),m6=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),dy=(t,r,s)=>!s&&(r.watchAll||r.watch.has(t)||[...r.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const Pu=(t,r,s,a)=>{for(const o of s||Object.keys(t)){const l=Pt(t,o);if(l){const{_f:d,...u}=l;if(d){if(d.refs&&d.refs[0]&&r(d.refs[0],o)&&!a)return!0;if(d.ref&&r(d.ref,d.name)&&!a)return!0;if(Pu(u,r))break}else if(_s(u)&&Pu(u,r))break}}};function uy(t,r,s){const a=Pt(t,s);if(a||rm(s))return{error:a,name:s};const o=s.split(".");for(;o.length;){const l=o.join("."),d=Pt(r,l),u=Pt(t,l);if(d&&!Array.isArray(d)&&s!==l)return{name:s};if(u&&u.type)return{name:l,error:u};if(u&&u.root&&u.root.type)return{name:`${l}.root`,error:u.root};o.pop()}return{name:s}}var p6=(t,r,s,a)=>{s(t);const{name:o,...l}=t;return ta(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(d=>r[d]===(!a||mi.all))},g6=(t,r,s)=>!t||!r||t===r||Cu(t).some(a=>a&&(s?a===r:a.startsWith(r)||r.startsWith(a))),x6=(t,r,s,a,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(r||t):(s?a.isOnBlur:o.isOnBlur)?!t:(s?a.isOnChange:o.isOnChange)?t:!0,y6=(t,r)=>!q0(Pt(t,r)).length&&Ts(t,r),b6=(t,r,s)=>{const a=Cu(Pt(t,s));return Kr(a,"root",r[s]),Kr(t,s,a),t},af=t=>Hi(t);function hy(t,r,s="validate"){if(af(t)||Array.isArray(t)&&t.every(af)||$i(t)&&!t)return{type:s,message:af(t)?t:"",ref:r}}var hd=t=>_s(t)&&!Df(t)?t:{value:t,message:""},fy=async(t,r,s,a,o,l)=>{const{ref:d,refs:u,required:h,maxLength:m,minLength:p,min:v,max:N,pattern:y,validate:A,name:C,valueAsNumber:S,mount:L}=t._f,E=Pt(s,C);if(!L||r.has(C))return{};const P=u?u[0]:d,F=q=>{o&&P.reportValidity&&(P.setCustomValidity($i(q)?"":q||""),P.reportValidity())},O={},se=V0(d),X=Ju(d),K=se||X,Y=(S||$0(d))&&Os(d.value)&&Os(E)||Lf(d)&&d.value===""||E===""||Array.isArray(E)&&!E.length,ie=l6.bind(null,C,a,O),I=(q,U,J,be=Po.maxLength,ge=Po.minLength)=>{const T=q?U:J;O[C]={type:q?be:ge,message:T,ref:d,...ie(q?be:ge,T)}};if(l?!Array.isArray(E)||!E.length:h&&(!K&&(Y||$n(E))||$i(E)&&!E||X&&!tb(u).isValid||se&&!sb(u).isValid)){const{value:q,message:U}=af(h)?{value:!!h,message:h}:hd(h);if(q&&(O[C]={type:Po.required,message:U,ref:P,...ie(Po.required,U)},!a))return F(U),O}if(!Y&&(!$n(v)||!$n(N))){let q,U;const J=hd(N),be=hd(v);if(!$n(E)&&!isNaN(E)){const ge=d.valueAsNumber||E&&+E;$n(J.value)||(q=ge>J.value),$n(be.value)||(U=ge<be.value)}else{const ge=d.valueAsDate||new Date(E),T=Se=>new Date(new Date().toDateString()+" "+Se),re=d.type=="time",fe=d.type=="week";Hi(J.value)&&E&&(q=re?T(E)>T(J.value):fe?E>J.value:ge>new Date(J.value)),Hi(be.value)&&E&&(U=re?T(E)<T(be.value):fe?E<be.value:ge<new Date(be.value))}if((q||U)&&(I(!!q,J.message,be.message,Po.max,Po.min),!a))return F(O[C].message),O}if((m||p)&&!Y&&(Hi(E)||l&&Array.isArray(E))){const q=hd(m),U=hd(p),J=!$n(q.value)&&E.length>+q.value,be=!$n(U.value)&&E.length<+U.value;if((J||be)&&(I(J,q.message,U.message),!a))return F(O[C].message),O}if(y&&!Y&&Hi(E)){const{value:q,message:U}=hd(y);if(Df(q)&&!E.match(q)&&(O[C]={type:Po.pattern,message:U,ref:d,...ie(Po.pattern,U)},!a))return F(U),O}if(A){if(pi(A)){const q=await A(E,s),U=hy(q,P);if(U&&(O[C]={...U,...ie(Po.validate,U.message)},!a))return F(U.message),O}else if(_s(A)){let q={};for(const U in A){if(!ta(q)&&!a)break;const J=hy(await A[U](E,s),P,U);J&&(q={...J,...ie(U,J.message)},F(J.message),a&&(O[C]=q))}if(!ta(q)&&(O[C]={ref:P,...q},!a))return O}}return F(!0),O};const v6={mode:mi.onSubmit,reValidateMode:mi.onChange,shouldFocusError:!0};function w6(t={}){let r={...v6,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:pi(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},o=_s(r.defaultValues)||_s(r.values)?tn(r.defaultValues||r.values)||{}:{},l=r.shouldUnregister?{}:tn(o),d={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,m=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...p};const N={array:sy(),state:sy()},y=r.criteriaMode===mi.all,A=ce=>pe=>{clearTimeout(m),m=setTimeout(ce,pe)},C=async ce=>{if(!r.disabled&&(p.isValid||v.isValid||ce)){const pe=r.resolver?ta((await X()).errors):await Y(a,!0);pe!==s.isValid&&N.state.next({isValid:pe})}},S=(ce,pe)=>{!r.disabled&&(p.isValidating||p.validatingFields||v.isValidating||v.validatingFields)&&((ce||Array.from(u.mount)).forEach(Ce=>{Ce&&(pe?Kr(s.validatingFields,Ce,pe):Ts(s.validatingFields,Ce))}),N.state.next({validatingFields:s.validatingFields,isValidating:!ta(s.validatingFields)}))},L=(ce,pe=[],Ce,$e,Ge=!0,Ue=!0)=>{if($e&&Ce&&!r.disabled){if(d.action=!0,Ue&&Array.isArray(Pt(a,ce))){const Je=Ce(Pt(a,ce),$e.argA,$e.argB);Ge&&Kr(a,ce,Je)}if(Ue&&Array.isArray(Pt(s.errors,ce))){const Je=Ce(Pt(s.errors,ce),$e.argA,$e.argB);Ge&&Kr(s.errors,ce,Je),y6(s.errors,ce)}if((p.touchedFields||v.touchedFields)&&Ue&&Array.isArray(Pt(s.touchedFields,ce))){const Je=Ce(Pt(s.touchedFields,ce),$e.argA,$e.argB);Ge&&Kr(s.touchedFields,ce,Je)}(p.dirtyFields||v.dirtyFields)&&(s.dirtyFields=gu(o,l)),N.state.next({name:ce,isDirty:I(ce,pe),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Kr(l,ce,pe)},E=(ce,pe)=>{Kr(s.errors,ce,pe),N.state.next({errors:s.errors})},P=ce=>{s.errors=ce,N.state.next({errors:s.errors,isValid:!1})},F=(ce,pe,Ce,$e)=>{const Ge=Pt(a,ce);if(Ge){const Ue=Pt(l,ce,Os(Ce)?Pt(o,ce):Ce);Os(Ue)||$e&&$e.defaultChecked||pe?Kr(l,ce,pe?Ue:oy(Ge._f)):J(ce,Ue),d.mount&&C()}},O=(ce,pe,Ce,$e,Ge)=>{let Ue=!1,Je=!1;const jt={name:ce};if(!r.disabled){if(!Ce||$e){(p.isDirty||v.isDirty)&&(Je=s.isDirty,s.isDirty=jt.isDirty=I(),Ue=Je!==jt.isDirty);const ot=wl(Pt(o,ce),pe);Je=!!Pt(s.dirtyFields,ce),ot?Ts(s.dirtyFields,ce):Kr(s.dirtyFields,ce,!0),jt.dirtyFields=s.dirtyFields,Ue=Ue||(p.dirtyFields||v.dirtyFields)&&Je!==!ot}if(Ce){const ot=Pt(s.touchedFields,ce);ot||(Kr(s.touchedFields,ce,Ce),jt.touchedFields=s.touchedFields,Ue=Ue||(p.touchedFields||v.touchedFields)&&ot!==Ce)}Ue&&Ge&&N.state.next(jt)}return Ue?jt:{}},se=(ce,pe,Ce,$e)=>{const Ge=Pt(s.errors,ce),Ue=(p.isValid||v.isValid)&&$i(pe)&&s.isValid!==pe;if(r.delayError&&Ce?(h=A(()=>E(ce,Ce)),h(r.delayError)):(clearTimeout(m),h=null,Ce?Kr(s.errors,ce,Ce):Ts(s.errors,ce)),(Ce?!wl(Ge,Ce):Ge)||!ta($e)||Ue){const Je={...$e,...Ue&&$i(pe)?{isValid:pe}:{},errors:s.errors,name:ce};s={...s,...Je},N.state.next(Je)}},X=async ce=>{S(ce,!0);const pe=await r.resolver(l,r.context,h6(ce||u.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return S(ce),pe},K=async ce=>{const{errors:pe}=await X(ce);if(ce)for(const Ce of ce){const $e=Pt(pe,Ce);$e?Kr(s.errors,Ce,$e):Ts(s.errors,Ce)}else s.errors=pe;return pe},Y=async(ce,pe,Ce={valid:!0})=>{for(const $e in ce){const Ge=ce[$e];if(Ge){const{_f:Ue,...Je}=Ge;if(Ue){const jt=u.array.has(Ue.name),ot=Ge._f&&f6(Ge._f);ot&&p.validatingFields&&S([$e],!0);const lt=await fy(Ge,u.disabled,l,y,r.shouldUseNativeValidation&&!pe,jt);if(ot&&p.validatingFields&&S([$e]),lt[Ue.name]&&(Ce.valid=!1,pe))break;!pe&&(Pt(lt,Ue.name)?jt?b6(s.errors,lt,Ue.name):Kr(s.errors,Ue.name,lt[Ue.name]):Ts(s.errors,Ue.name))}!ta(Je)&&await Y(Je,pe,Ce)}}return Ce.valid},ie=()=>{for(const ce of u.unMount){const pe=Pt(a,ce);pe&&(pe._f.refs?pe._f.refs.every(Ce=>!fp(Ce)):!fp(pe._f.ref))&&Q(ce)}u.unMount=new Set},I=(ce,pe)=>!r.disabled&&(ce&&pe&&Kr(l,ce,pe),!wl(Se(),o)),q=(ce,pe,Ce)=>o6(ce,u,{...d.mount?l:Os(pe)?o:Hi(ce)?{[ce]:pe}:pe},Ce,pe),U=ce=>q0(Pt(d.mount?l:o,ce,r.shouldUnregister?Pt(o,ce,[]):[])),J=(ce,pe,Ce={})=>{const $e=Pt(a,ce);let Ge=pe;if($e){const Ue=$e._f;Ue&&(!Ue.disabled&&Kr(l,ce,rb(pe,Ue)),Ge=Lf(Ue.ref)&&$n(pe)?"":pe,X2(Ue.ref)?[...Ue.ref.options].forEach(Je=>Je.selected=Ge.includes(Je.value)):Ue.refs?Ju(Ue.ref)?Ue.refs.forEach(Je=>{(!Je.defaultChecked||!Je.disabled)&&(Array.isArray(Ge)?Je.checked=!!Ge.find(jt=>jt===Je.value):Je.checked=Ge===Je.value||!!Ge)}):Ue.refs.forEach(Je=>Je.checked=Je.value===Ge):$0(Ue.ref)?Ue.ref.value="":(Ue.ref.value=Ge,Ue.ref.type||N.state.next({name:ce,values:tn(l)})))}(Ce.shouldDirty||Ce.shouldTouch)&&O(ce,Ge,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&fe(ce)},be=(ce,pe,Ce)=>{for(const $e in pe){if(!pe.hasOwnProperty($e))return;const Ge=pe[$e],Ue=ce+"."+$e,Je=Pt(a,Ue);(u.array.has(ce)||_s(Ge)||Je&&!Je._f)&&!uc(Ge)?be(Ue,Ge,Ce):J(Ue,Ge,Ce)}},ge=(ce,pe,Ce={})=>{const $e=Pt(a,ce),Ge=u.array.has(ce),Ue=tn(pe);Kr(l,ce,Ue),Ge?(N.array.next({name:ce,values:tn(l)}),(p.isDirty||p.dirtyFields||v.isDirty||v.dirtyFields)&&Ce.shouldDirty&&N.state.next({name:ce,dirtyFields:gu(o,l),isDirty:I(ce,Ue)})):$e&&!$e._f&&!$n(Ue)?be(ce,Ue,Ce):J(ce,Ue,Ce),dy(ce,u)&&N.state.next({...s,name:ce}),N.state.next({name:d.mount?ce:void 0,values:tn(l)})},T=async ce=>{d.mount=!0;const pe=ce.target;let Ce=pe.name,$e=!0;const Ge=Pt(a,Ce),Ue=ot=>{$e=Number.isNaN(ot)||uc(ot)&&isNaN(ot.getTime())||wl(ot,Pt(l,Ce,ot))},Je=ly(r.mode),jt=ly(r.reValidateMode);if(Ge){let ot,lt;const _t=pe.type?oy(Ge._f):e6(ce),ut=ce.type===ry.BLUR||ce.type===ry.FOCUS_OUT,hr=!m6(Ge._f)&&!r.resolver&&!Pt(s.errors,Ce)&&!Ge._f.deps||x6(ut,Pt(s.touchedFields,Ce),s.isSubmitted,jt,Je),zt=dy(Ce,u,ut);Kr(l,Ce,_t),ut?(!pe||!pe.readOnly)&&(Ge._f.onBlur&&Ge._f.onBlur(ce),h&&h(0)):Ge._f.onChange&&Ge._f.onChange(ce);const pt=O(Ce,_t,ut),Tt=!ta(pt)||zt;if(!ut&&N.state.next({name:Ce,type:ce.type,values:tn(l)}),hr)return(p.isValid||v.isValid)&&(r.mode==="onBlur"?ut&&C():ut||C()),Tt&&N.state.next({name:Ce,...zt?{}:pt});if(!ut&&zt&&N.state.next({...s}),r.resolver){const{errors:nr}=await X([Ce]);if(Ue(_t),$e){const Et=uy(s.errors,a,Ce),Gt=uy(nr,a,Et.name||Ce);ot=Gt.error,Ce=Gt.name,lt=ta(nr)}}else S([Ce],!0),ot=(await fy(Ge,u.disabled,l,y,r.shouldUseNativeValidation))[Ce],S([Ce]),Ue(_t),$e&&(ot?lt=!1:(p.isValid||v.isValid)&&(lt=await Y(a,!0)));$e&&(Ge._f.deps&&fe(Ge._f.deps),se(Ce,lt,ot,pt))}},re=(ce,pe)=>{if(Pt(s.errors,pe)&&ce.focus)return ce.focus(),1},fe=async(ce,pe={})=>{let Ce,$e;const Ge=Cu(ce);if(r.resolver){const Ue=await K(Os(ce)?ce:Ge);Ce=ta(Ue),$e=ce?!Ge.some(Je=>Pt(Ue,Je)):Ce}else ce?($e=(await Promise.all(Ge.map(async Ue=>{const Je=Pt(a,Ue);return await Y(Je&&Je._f?{[Ue]:Je}:Je)}))).every(Boolean),!(!$e&&!s.isValid)&&C()):$e=Ce=await Y(a);return N.state.next({...!Hi(ce)||(p.isValid||v.isValid)&&Ce!==s.isValid?{}:{name:ce},...r.resolver||!ce?{isValid:Ce}:{},errors:s.errors}),pe.shouldFocus&&!$e&&Pu(a,re,ce?Ge:u.mount),$e},Se=ce=>{const pe={...d.mount?l:o};return Os(ce)?pe:Hi(ce)?Pt(pe,ce):ce.map(Ce=>Pt(pe,Ce))},ee=(ce,pe)=>({invalid:!!Pt((pe||s).errors,ce),isDirty:!!Pt((pe||s).dirtyFields,ce),error:Pt((pe||s).errors,ce),isValidating:!!Pt(s.validatingFields,ce),isTouched:!!Pt((pe||s).touchedFields,ce)}),D=ce=>{ce&&Cu(ce).forEach(pe=>Ts(s.errors,pe)),N.state.next({errors:ce?s.errors:{}})},$=(ce,pe,Ce)=>{const $e=(Pt(a,ce,{_f:{}})._f||{}).ref,Ge=Pt(s.errors,ce)||{},{ref:Ue,message:Je,type:jt,...ot}=Ge;Kr(s.errors,ce,{...ot,...pe,ref:$e}),N.state.next({name:ce,errors:s.errors,isValid:!1}),Ce&&Ce.shouldFocus&&$e&&$e.focus&&$e.focus()},W=(ce,pe)=>pi(ce)?N.state.subscribe({next:Ce=>"values"in Ce&&ce(q(void 0,pe),Ce)}):q(ce,pe,!0),ne=ce=>N.state.subscribe({next:pe=>{g6(ce.name,pe.name,ce.exact)&&p6(pe,ce.formState||p,st,ce.reRenderRoot)&&ce.callback({values:{...l},...s,...pe,defaultValues:o})}}).unsubscribe,H=ce=>(d.mount=!0,v={...v,...ce.formState},ne({...ce,formState:v})),Q=(ce,pe={})=>{for(const Ce of ce?Cu(ce):u.mount)u.mount.delete(Ce),u.array.delete(Ce),pe.keepValue||(Ts(a,Ce),Ts(l,Ce)),!pe.keepError&&Ts(s.errors,Ce),!pe.keepDirty&&Ts(s.dirtyFields,Ce),!pe.keepTouched&&Ts(s.touchedFields,Ce),!pe.keepIsValidating&&Ts(s.validatingFields,Ce),!r.shouldUnregister&&!pe.keepDefaultValue&&Ts(o,Ce);N.state.next({values:tn(l)}),N.state.next({...s,...pe.keepDirty?{isDirty:I()}:{}}),!pe.keepIsValid&&C()},ue=({disabled:ce,name:pe})=>{($i(ce)&&d.mount||ce||u.disabled.has(pe))&&(ce?u.disabled.add(pe):u.disabled.delete(pe))},xe=(ce,pe={})=>{let Ce=Pt(a,ce);const $e=$i(pe.disabled)||$i(r.disabled);return Kr(a,ce,{...Ce||{},_f:{...Ce&&Ce._f?Ce._f:{ref:{name:ce}},name:ce,mount:!0,...pe}}),u.mount.add(ce),Ce?ue({disabled:$i(pe.disabled)?pe.disabled:r.disabled,name:ce}):F(ce,!0,pe.value),{...$e?{disabled:pe.disabled||r.disabled}:{},...r.progressive?{required:!!pe.required,min:xu(pe.min),max:xu(pe.max),minLength:xu(pe.minLength),maxLength:xu(pe.maxLength),pattern:xu(pe.pattern)}:{},name:ce,onChange:T,onBlur:T,ref:Ge=>{if(Ge){xe(ce,pe),Ce=Pt(a,ce);const Ue=Os(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,Je=c6(Ue),jt=Ce._f.refs||[];if(Je?jt.find(ot=>ot===Ue):Ue===Ce._f.ref)return;Kr(a,ce,{_f:{...Ce._f,...Je?{refs:[...jt.filter(fp),Ue,...Array.isArray(Pt(o,ce))?[{}]:[]],ref:{type:Ue.type,name:ce}}:{ref:Ue}}}),F(ce,!1,void 0,Ue)}else Ce=Pt(a,ce,{}),Ce._f&&(Ce._f.mount=!1),(r.shouldUnregister||pe.shouldUnregister)&&!(r6(u.array,ce)&&d.action)&&u.unMount.add(ce)}}},Ee=()=>r.shouldFocusError&&Pu(a,re,u.mount),me=ce=>{$i(ce)&&(N.state.next({disabled:ce}),Pu(a,(pe,Ce)=>{const $e=Pt(a,Ce);$e&&(pe.disabled=$e._f.disabled||ce,Array.isArray($e._f.refs)&&$e._f.refs.forEach(Ge=>{Ge.disabled=$e._f.disabled||ce}))},0,!1))},De=(ce,pe)=>async Ce=>{let $e;Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist());let Ge=tn(l);if(N.state.next({isSubmitting:!0}),r.resolver){const{errors:Ue,values:Je}=await X();s.errors=Ue,Ge=tn(Je)}else await Y(a);if(u.disabled.size)for(const Ue of u.disabled)Ts(Ge,Ue);if(Ts(s.errors,"root"),ta(s.errors)){N.state.next({errors:{}});try{await ce(Ge,Ce)}catch(Ue){$e=Ue}}else pe&&await pe({...s.errors},Ce),Ee(),setTimeout(Ee);if(N.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ta(s.errors)&&!$e,submitCount:s.submitCount+1,errors:s.errors}),$e)throw $e},Ze=(ce,pe={})=>{Pt(a,ce)&&(Os(pe.defaultValue)?ge(ce,tn(Pt(o,ce))):(ge(ce,pe.defaultValue),Kr(o,ce,tn(pe.defaultValue))),pe.keepTouched||Ts(s.touchedFields,ce),pe.keepDirty||(Ts(s.dirtyFields,ce),s.isDirty=pe.defaultValue?I(ce,tn(Pt(o,ce))):I()),pe.keepError||(Ts(s.errors,ce),p.isValid&&C()),N.state.next({...s}))},Te=(ce,pe={})=>{const Ce=ce?tn(ce):o,$e=tn(Ce),Ge=ta(ce),Ue=Ge?o:$e;if(pe.keepDefaultValues||(o=Ce),!pe.keepValues){if(pe.keepDirtyValues){const Je=new Set([...u.mount,...Object.keys(gu(o,l))]);for(const jt of Array.from(Je))Pt(s.dirtyFields,jt)?Kr(Ue,jt,Pt(l,jt)):ge(jt,Pt(Ue,jt))}else{if(U0&&Os(ce))for(const Je of u.mount){const jt=Pt(a,Je);if(jt&&jt._f){const ot=Array.isArray(jt._f.refs)?jt._f.refs[0]:jt._f.ref;if(Lf(ot)){const lt=ot.closest("form");if(lt){lt.reset();break}}}}if(pe.keepFieldsRef)for(const Je of u.mount)ge(Je,Pt(Ue,Je));else a={}}l=r.shouldUnregister?pe.keepDefaultValues?tn(o):{}:tn(Ue),N.array.next({values:{...Ue}}),N.state.next({values:{...Ue}})}u={mount:pe.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!p.isValid||!!pe.keepIsValid||!!pe.keepDirtyValues,d.watch=!!r.shouldUnregister,N.state.next({submitCount:pe.keepSubmitCount?s.submitCount:0,isDirty:Ge?!1:pe.keepDirty?s.isDirty:!!(pe.keepDefaultValues&&!wl(ce,o)),isSubmitted:pe.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ge?{}:pe.keepDirtyValues?pe.keepDefaultValues&&l?gu(o,l):s.dirtyFields:pe.keepDefaultValues&&ce?gu(o,ce):pe.keepDirty?s.dirtyFields:{},touchedFields:pe.keepTouched?s.touchedFields:{},errors:pe.keepErrors?s.errors:{},isSubmitSuccessful:pe.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},de=(ce,pe)=>Te(pi(ce)?ce(l):ce,pe),Fe=(ce,pe={})=>{const Ce=Pt(a,ce),$e=Ce&&Ce._f;if($e){const Ge=$e.refs?$e.refs[0]:$e.ref;Ge.focus&&(Ge.focus(),pe.shouldSelect&&pi(Ge.select)&&Ge.select())}},st=ce=>{s={...s,...ce}},Ke={control:{register:xe,unregister:Q,getFieldState:ee,handleSubmit:De,setError:$,_subscribe:ne,_runSchema:X,_focusError:Ee,_getWatch:q,_getDirty:I,_setValid:C,_setFieldArray:L,_setDisabledField:ue,_setErrors:P,_getFieldArray:U,_reset:Te,_resetDefaultValues:()=>pi(r.defaultValues)&&r.defaultValues().then(ce=>{de(ce,r.resetOptions),N.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:me,_subjects:N,_proxyFormState:p,get _fields(){return a},get _formValues(){return l},get _state(){return d},set _state(ce){d=ce},get _defaultValues(){return o},get _names(){return u},set _names(ce){u=ce},get _formState(){return s},get _options(){return r},set _options(ce){r={...r,...ce}}},subscribe:H,trigger:fe,register:xe,handleSubmit:De,watch:W,setValue:ge,getValues:Se,reset:de,resetField:Ze,clearErrors:D,unregister:Q,setError:$,setFocus:Fe,getFieldState:ee};return{...Ke,formControl:Ke}}function N6(t={}){const r=zn.useRef(void 0),s=zn.useRef(void 0),[a,o]=zn.useState({isDirty:!1,isValidating:!1,isLoading:pi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:pi(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:a},t.defaultValues&&!pi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:d,...u}=w6(t);r.current={...u,formState:a}}const l=r.current.control;return l._options=t,i6(()=>{const d=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(u=>({...u,isReady:!0})),l._formState.isReady=!0,d},[l]),zn.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),zn.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),zn.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),zn.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),zn.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==a.isDirty&&l._subjects.state.next({isDirty:d})}},[l,a.isDirty]),zn.useEffect(()=>{t.values&&!wl(t.values,s.current)?(l._reset(t.values,{keepFieldsRef:!0,...l._options.resetOptions}),s.current=t.values,o(d=>({...d}))):l._resetDefaultValues()},[l,t.values]),zn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),r.current.formState=a6(a,l),r.current}function nb(t){var r,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(s=nb(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function j6(){for(var t,r,s=0,a="",o=arguments.length;s<o;s++)(t=arguments[s])&&(r=nb(t))&&(a&&(a+=" "),a+=r);return a}const vc=({size:t="md",className:r,color:s="primary"})=>{const a={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},o={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsx("div",{className:j6("animate-spin rounded-full border-2 border-t-transparent",a[t],o[s],r)})},ab=({length:t=6,onComplete:r,disabled:s=!1,className:a=""})=>{const[o,l]=R.useState(new Array(t).fill("")),d=R.useRef([]);R.useEffect(()=>{d.current[0]&&d.current[0].focus()},[]);const u=(p,v)=>{if(s||(v.length>1&&(v=v.slice(-1)),!/^\d*$/.test(v)))return;const N=[...o];N[p]=v,l(N),v&&p<t-1&&d.current[p+1]?.focus();const y=N.join("");y.length===t&&!y.includes("")&&r(y)},h=(p,v)=>{if(!s){if(v.key==="Backspace")if(o[p]){const N=[...o];N[p]="",l(N)}else p>0&&d.current[p-1]?.focus();v.key==="ArrowLeft"&&p>0&&d.current[p-1]?.focus(),v.key==="ArrowRight"&&p<t-1&&d.current[p+1]?.focus()}},m=p=>{if(s)return;p.preventDefault();const v=p.clipboardData.getData("text").replace(/\D/g,"").slice(0,t);if(v.length>0){const N=[...o];for(let C=0;C<v.length&&C<t;C++)N[C]=v[C];l(N);const y=Math.min(v.length,t-1);d.current[y]?.focus();const A=N.join("");A.length===t&&!A.includes("")&&r(A)}};return e.jsx("div",{className:`flex justify-center space-x-3 ${a}`,children:o.map((p,v)=>e.jsx("input",{ref:N=>d.current[v]=N,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:p,onChange:N=>u(v,N.target.value),onKeyDown:N=>h(v,N),onPaste:m,disabled:s,className:`
            w-12 h-12 text-center text-xl font-semibold border-2 rounded-lg
            focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500
            transition-all duration-200
            ${s?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-gray-200 text-gray-900 hover:border-gray-300"}
          `},v))})},S6=()=>{const[t,r]=R.useState("email"),[s,a]=R.useState(""),[o,l]=R.useState(""),[d,u]=R.useState(!1),[h,m]=R.useState(!1),p=Hs(),v=bi(),{isLoading:N,error:y,isAuthenticated:A,user:C}=Bt(X=>X.auth),{register:S,handleSubmit:L,formState:{errors:E}}=N6({defaultValues:{email:"",password:""}});R.useEffect(()=>{A&&C&&v("/dashboard/owner")},[A,C,v]),R.useEffect(()=>{y&&(xr.error(y),p(S3()))},[y,p]);const P=async X=>{const K=xr.loading("Connecting to server...");try{await p(Nu({email:X.email,password:X.password})).unwrap(),a(X.email),l(X.password),r("otp"),u(!0),xr.dismiss(K),xr.success("OTP sent to your email!")}catch{xr.dismiss(K)}},F=async X=>{try{const K=await p(rf({email:s,otp:X})).unwrap();xr.success("Welcome back!"),v("/dashboard/owner")}catch{}},O=async()=>{const X=xr.loading("Resending OTP...");try{await p(Nu({email:s,password:o})).unwrap(),xr.dismiss(X),xr.success("OTP resent to your email!")}catch{xr.dismiss(X)}},se=()=>{r("email"),u(!1),a(""),l("")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(J2,{size:"lg",className:"text-green-600"})})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Welcome back"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Sign in to your property management dashboard"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t==="email"?e.jsxs("form",{onSubmit:L(P),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...S("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${E.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your email"})]}),E.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...S("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:h?"text":"password",className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${E.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),E.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.password.message})]}),e.jsx("button",{type:"submit",disabled:N,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:N?e.jsx(vc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Send OTP",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx(Gi,{to:"/auth/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200",children:"Forgot your password?"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(qs,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",e.jsx("span",{className:"font-medium text-gray-900",children:s})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ab,{onComplete:F,disabled:N,length:6}),e.jsx("button",{type:"button",onClick:()=>{const X=document.querySelectorAll('input[type="text"]'),K=Array.from(X).map(Y=>Y.value).join("");K.length===6&&F(K)},disabled:N,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:N?e.jsx(vc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Verify Code",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:O,disabled:N,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:se,disabled:N,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:" Back to email"})})]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",e.jsx(Gi,{to:"/auth/signup",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:"Sign up for free"})]})})]})}),e.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6 leading-tight",children:"Manage your properties with confidence"}),e.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:"Track bookings, monitor performance, handle compliance, and maximize your rental income with our comprehensive property management platform."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Real-time booking management"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Financial performance tracking"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Automated compliance reporting"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Multi-property dashboard"})]})]})]})})]})]})},ib=async()=>(await Ft.get("/admin/check-admin-exists")).data.exists,ob=async()=>(await Ft.get("/admin/dashboard/stats")).data,sm=async()=>(await Ft.get("/admin/owners")).data,lb=async()=>(await Ft.get("/admin/accountants")).data,cb=async(t,r)=>(await Ft.put(`/admin/accountants/${t}`,r)).data.data,db=async(t,r)=>(await Ft.put(`/admin/accountants/${t}/properties`,{assignedProperties:r})).data.data,ub=async(t,r,s)=>(await Ft.get(`/admin/properties/${t}/owner-statement?startDate=${r}&endDate=${s}`)).data.statement,hb=async t=>{await Ft.delete(`/admin/accountants/${t}`)},H0=async t=>{const r=await Ft.post("/admin/owners",t);return console.log(" createOwner API response:",r),r.data.data||r.data},fb=async(t,r)=>(await Ft.put(`/admin/owners/${t}`,r)).data,W0=async t=>{await Ft.delete(`/admin/owners/${t}`)},Qu=async t=>{const r=t?`/admin/properties?ownerId=${t}`:"/admin/properties",s=await Ft.get(r);return console.log(" getAllProperties response:",s),s.data&&s.data.data?s.data.data:s.data&&s.data.properties?s.data.properties:Array.isArray(s.data)?s.data:(console.error("Unexpected response structure:",s),[])},mb=async(t,r)=>(await Ft.post(`/admin/owners/${t}/assign-property`,{propertyId:r})).data,pb=async t=>(await Ft.delete(`/admin/properties/${t}`)).data,k6=Object.freeze(Object.defineProperty({__proto__:null,assignPropertyToOwner:mb,checkAdminExists:ib,createOwner:H0,deleteAccountant:hb,deleteOwner:W0,deleteProperty:pb,generateOwnerStatement:ub,getAdminDashboardStats:ob,getAllAccountants:lb,getAllOwners:sm,getAllProperties:Qu,updateAccountant:cb,updateAccountantProperties:db,updateOwner:fb},Symbol.toStringTag,{value:"Module"})),A6=()=>{const[t,r]=R.useState("form"),[s,a]=R.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",role:"admin"}),[o,l]=R.useState(!1),[d,u]=R.useState(!1),[h,m]=R.useState({}),[p,v]=R.useState(!1),N=Hs(),{isLoading:y,isAuthenticated:A,error:C}=Bt(se=>se.auth),S=()=>{const se={};return s.firstName.trim()||(se.firstName="First name is required"),s.lastName.trim()||(se.lastName="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(se.email="Email is invalid"):se.email="Email is required",s.phone.trim()||(se.phone="Phone is required"),s.password?s.password.length<6&&(se.password="Password must be at least 6 characters"):se.password="Password is required",s.password!==s.confirmPassword&&(se.confirmPassword="Passwords do not match"),se};if(R.useEffect(()=>{(async()=>{try{console.log(" Checking admin existence...");const X=await ib();console.log(" Admin exists:",X),v(X)}catch(X){console.error(" Error checking admin existence:",X),v(!0)}})()},[]),A)return e.jsx(zi,{to:"/dashboard",replace:!0});const L=se=>{const{name:X,value:K}=se.target;a(Y=>({...Y,[X]:K})),h[X]&&m(Y=>({...Y,[X]:""}))},E=async se=>{if(se.preventDefault(),p){alert("Account creation is disabled. Please contact your administrator to request an account.");return}const X=S();if(Object.keys(X).length>0){m(X);return}m({});const K=xr.loading("Connecting to server...");try{await N(ju({email:s.email,name:`${s.firstName} ${s.lastName}`,phone:s.phone,password:s.password,role:s.role})).unwrap(),xr.dismiss(K),r("otp")}catch{xr.dismiss(K)}},P=async se=>{try{await N(sf({name:`${s.firstName} ${s.lastName}`,email:s.email,phone:s.phone,password:s.password,otp:se,role:s.role})).unwrap()}catch{}},F=async()=>{try{await N(ju({name:`${s.firstName} ${s.lastName}`,email:s.email,phone:s.phone,password:s.password,role:s.role})).unwrap()}catch{}},O=()=>{r("form")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-gradient-to-br from-gray-400 to-gray-500 rounded-3xl shadow-lg",children:e.jsx(qs,{className:"h-8 w-8 text-white"})})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Account Creation"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Contact your administrator to request account creation"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:t==="form"?e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-500 mb-2",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ro,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:s.firstName,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.firstName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your first name"})]}),h.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-500 mb-2",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ro,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:s.lastName,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.lastName?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your last name"})]}),h.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s.email,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.email?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your email"})]}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-500 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M0,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:s.phone,onChange:L,className:`w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.phone?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your phone number"})]}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:s.password,onChange:L,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:s.confirmPassword,onChange:L,className:`w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${h.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),h.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.confirmPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(qs,{className:"h-6 w-6 text-blue-600 mt-0.5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Account Creation by Administrator"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"All user accounts are created by the system administrator. Please contact your administrator to request account creation."}),e.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"To request an account:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:" Contact your system administrator"}),e.jsx("li",{children:" Provide your email address and role requirements"}),e.jsx("li",{children:" Administrator will create your account and send login credentials"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-gray-300 bg-gray-100 rounded-xl",children:[e.jsx(qs,{className:"h-5 w-5 mr-2 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Admin Account (Unavailable)"}),e.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(Already exists)"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(qs,{className:"h-6 w-6 text-green-600 mt-0.5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-900 mb-2",children:"Create First Administrator Account"}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"You are creating the first administrator account for this system. The administrator will be responsible for creating all other user accounts."}),e.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Administrator privileges include:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:" Create and manage owner accounts"}),e.jsx("li",{children:" Create and manage accountant accounts"}),e.jsx("li",{children:" Manage properties and bookings"}),e.jsx("li",{children:" Access system settings and reports"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center px-4 py-3 border-2 border-green-300 bg-green-50 rounded-xl",children:[e.jsx(qs,{className:"h-5 w-5 mr-2 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Administrator Account"}),e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(System Administrator)"})]})]})]})]}),p?e.jsxs("button",{type:"button",disabled:!0,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-gray-400 bg-gray-200 cursor-not-allowed transition-all duration-300",children:[e.jsx(qs,{className:"mr-2 h-4 w-4"}),"Contact Administrator for Account Creation"]}):e.jsx("button",{type:"submit",disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:y?e.jsxs(e.Fragment,{children:[e.jsx(vc,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Creating Administrator Account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"mr-2 h-4 w-4"}),"Create Administrator Account"]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(qs,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verify Your Account"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a 6-digit code to ",e.jsx("span",{className:"font-medium text-gray-900",children:s.email})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ab,{onComplete:P,disabled:y,length:6}),e.jsx("button",{type:"button",onClick:()=>{const se=document.querySelectorAll('input[type="text"]'),X=Array.from(se).map(K=>K.value).join("");X.length===6&&P(X)},disabled:y,className:"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb]/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl group",children:y?e.jsx(vc,{size:"sm",className:"mr-2"}):e.jsxs(e.Fragment,{children:["Verify & Create Account",e.jsx(G3,{className:"ml-2 h-4 w-4 group-hover:scale-110 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:F,disabled:y,className:"text-sm text-green-600 hover:text-green-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Didn't receive the code? Resend"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:O,disabled:y,className:"text-sm text-gray-500 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:" Back to form"})})]})]})}),C&&e.jsxs("div",{className:"rounded-xl bg-red-50 p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-red-800",children:C}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:" Make sure the backend server is running on port 5000"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",e.jsx(Gi,{to:"/auth/login",className:"font-semibold text-green-600 hover:text-green-500 transition-colors duration-200",children:"Sign in here"})]})})]})}),e.jsxs("div",{className:"hidden lg:block relative flex-1 bg-gradient-to-br from-green-500 via-green-600 to-green-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-pattern opacity-5"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-40 -translate-x-40"}),e.jsx("div",{className:"relative h-full flex flex-col justify-center px-12 xl:px-16",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6 leading-tight",children:"Join thousands of property owners"}),e.jsx("p",{className:"text-lg text-white/90 mb-8 leading-relaxed",children:"Start your property management journey with our comprehensive platform designed to maximize your rental income and streamline operations."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Easy property onboarding"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Automated booking management"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"Financial reporting & analytics"})]}),e.jsxs("div",{className:"flex items-center group",children:[e.jsx("div",{className:"w-3 h-3 bg-white/30 rounded-full mr-4 group-hover:bg-white/50 transition-colors duration-200"}),e.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-200",children:"24/7 customer support"})]})]})]})})]})]})},C6=()=>{const[t,r]=R.useState(""),[s,a]=R.useState(!1),[o,l]=R.useState(!1),d=async u=>{u.preventDefault(),a(!0);const h=xr.loading("Connecting to server...");try{await Sc.forgotPassword({email:t}),xr.dismiss(h),xr.success("Password reset OTP sent to your email!"),l(!0)}catch(m){xr.dismiss(h),console.error(" Forgot Password Error:",m),console.error(" Error Response:",m.response?.data),console.error(" Error Status:",m.response?.status);const p=m.response?.data?.message||m.message||"Failed to send reset OTP";xr.error(p)}finally{a(!1)}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(Cl,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Check your email"}),e.jsxs("p",{className:"text-base text-gray-600 leading-relaxed",children:["We've sent a password reset OTP to ",e.jsx("strong",{className:"text-gray-900",children:t})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or contact support."})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6 space-y-4",children:[e.jsxs(Gi,{to:`/auth/reset-password?email=${encodeURIComponent(t)}`,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb] transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Enter OTP to reset password",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]}),e.jsxs(Gi,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200",children:[e.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back to login"]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(Cl,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Forgot your password?"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No worries! Enter your email and we'll send you a reset OTP."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:u=>r(u.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300",placeholder:"Enter your email"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:s?e.jsxs(e.Fragment,{children:[e.jsx(vc,{size:"sm",className:"mr-2"}),"Sending reset OTP..."]}):e.jsxs(e.Fragment,{children:["Send reset OTP",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs(Gi,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[e.jsx(bc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},P6=()=>{const[t]=Fd(),r=t.get("email")||"",[s,a]=R.useState({email:r,otp:"",password:"",confirmPassword:""}),[o,l]=R.useState(!1),[d,u]=R.useState(!1),[h,m]=R.useState(!1),[p,v]=R.useState(!1),[N,y]=R.useState({});R.useEffect(()=>{r&&a(L=>({...L,email:r}))},[r]);const A=L=>{const{name:E,value:P}=L.target;a(F=>({...F,[E]:P})),N[E]&&y(F=>({...F,[E]:""}))},C=()=>{const L={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(L.email="Email is invalid"):L.email="Email is required",s.otp?s.otp.length!==6&&(L.otp="OTP must be 6 digits"):L.otp="OTP is required",s.password?s.password.length<6&&(L.password="Password must be at least 6 characters"):L.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(L.confirmPassword="Passwords do not match"):L.confirmPassword="Please confirm your password",y(L),Object.keys(L).length===0},S=async L=>{if(L.preventDefault(),!C())return;m(!0);const E=xr.loading("Connecting to server...");try{await Sc.resetPassword({email:s.email,otp:s.otp,password:s.password}),xr.dismiss(E),xr.success("Password reset successfully!"),v(!0)}catch(P){xr.dismiss(E),console.error("Error:",P),xr.error(P.response?.data?.message||"Failed to reset password")}finally{m(!1)}};return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx($s,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Password reset successful"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Your password has been successfully reset. You can now sign in with your new password."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs(Gi,{to:"/auth/login",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb] transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:["Continue to login",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-green-50 to-green-100 flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200",children:e.jsx(fc,{className:"h-10 w-10 text-green-600"})})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent mb-3",children:"Reset your password"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Enter your email, OTP code, and new password below."})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 mb-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s.email,readOnly:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed",placeholder:"Enter your email"})]}),!s.email&&e.jsxs("p",{className:"mt-1 text-sm text-amber-600",children:["Please request a password reset from the"," ",e.jsx(Gi,{to:"/auth/forgot-password",className:"underline font-medium",children:"forgot password page"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-500 mb-2",children:"OTP Code"}),e.jsx("input",{id:"otp",name:"otp",type:"text",required:!0,maxLength:6,value:s.otp,onChange:A,className:`w-full px-3 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${N.otp?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter 6-digit OTP"}),N.otp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.otp})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:s.password,onChange:A,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${N.password?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Enter your new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),N.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:s.confirmPassword,onChange:A,className:`w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 hover:border-gray-300 ${N.confirmPassword?"border-red-500 focus:ring-red-500/20":""}`,placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),N.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.confirmPassword})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:h?e.jsxs(e.Fragment,{children:[e.jsx(vc,{size:"sm",className:"mr-2"}),"Resetting password..."]}):e.jsxs(e.Fragment,{children:["Reset password",e.jsx(Ld,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs(Gi,{to:"/auth/login",className:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors duration-200 flex items-center justify-center",children:[e.jsx(bc,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})})})},G0=async()=>{const t=Date.now(),r=Math.random().toString(36).substring(7);return await Ft.get(`/property-management?t=${t}&r=${r}&nocache=true`)},gb=async t=>{console.log(" createProperty API called with:",{propertyData:Object.keys(t),url:"/admin/properties",method:"POST"});const r=await Ft.post("/admin/properties",t);return console.log(" createProperty API response:",r),r.data},xb=async(t,r)=>{console.log(" updateProperty API called with:",{propertyId:t,propertyData:Object.keys(r),url:`/property-management/${t}`,method:"PUT"});const s=await Ft.put(`/property-management/${t}`,r);if(console.log(" updateProperty API response:",s),console.log(" Response type:",typeof s),!s)throw console.error(" Invalid response from apiClient.put:",s),new Error("Invalid response from server");return s},yb=async t=>(await Ft.delete(`/admin/properties/${t}`)).data,bb=async(t,r)=>(await Ft.post("/property-management/test-hostkit",{hostkitId:t,apiKey:r})).data,vb=async(t,r)=>{const s={};return t&&(s.startDate=t),r&&(s.endDate=r),(await Ft.get("/property-management/dashboard/metrics",{params:s})).data},_6=Object.freeze(Object.defineProperty({__proto__:null,createProperty:gb,deleteProperty:yb,getDashboardMetrics:vb,getProperties:G0,testHostkitConnection:bb,updateProperty:xb},Symbol.toStringTag,{value:"Module"})),L6={properties:[],dashboardMetrics:null,selectedProperty:null,isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isTesting:!1,error:null,hostkitTestResult:null},za=Mr("propertyManagement/fetchProperties",async(t,{rejectWithValue:r})=>{try{const s=await G0();return s&&typeof s=="object"?s:{properties:[],total:0}}catch(s){return console.error("Failed to fetch properties:",s),r(s.response?.data?.message||"Failed to fetch properties")}}),_u=Mr("propertyManagement/createProperty",async(t,{rejectWithValue:r})=>{try{return await gb(t)}catch(s){return r(s.response?.data?.message||"Failed to create property")}}),jd=Mr("propertyManagement/updateProperty",async({propertyId:t,propertyData:r},{rejectWithValue:s})=>{try{console.log(" Redux updatePropertyAsync calling API with:",{propertyId:t,propertyData:Object.keys(r)});const a=await xb(t,r);return console.log(" Redux updatePropertyAsync received response:",a),console.log(" Response type:",typeof a),a}catch(a){return console.error(" Redux updatePropertyAsync error:",a),s(a.response?.data?.message||"Failed to update property")}}),of=Mr("propertyManagement/deleteProperty",async(t,{rejectWithValue:r})=>{try{return await yb(t),t}catch(s){return r(s.response?.data?.message||"Failed to delete property")}}),lf=Mr("propertyManagement/testHostkitConnection",async({hostkitId:t,apiKey:r},{rejectWithValue:s})=>{try{return await bb(t,r)}catch(a){return s(a.response?.data?.message||"Failed to test Hostkit connection")}}),cf=Mr("propertyManagement/fetchDashboardMetrics",async({startDate:t,endDate:r}={},{rejectWithValue:s})=>{try{return await vb(t,r)}catch(a){return s(a.response?.data?.message||"Failed to fetch dashboard metrics")}}),wb=Mo({name:"propertyManagement",initialState:L6,reducers:{clearError:t=>{t.error=null},clearHostkitTestResult:t=>{t.hostkitTestResult=null},setSelectedProperty:(t,r)=>{t.selectedProperty=r.payload}},extraReducers:t=>{t.addCase(za.pending,r=>{r.isLoading=!0,r.error=null}).addCase(za.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.properties&&Array.isArray(s.payload.properties)?r.properties=s.payload.properties:r.properties=[]}).addCase(za.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload,r.properties=[]}).addCase(_u.pending,r=>{r.isCreating=!0,r.error=null}).addCase(_u.fulfilled,(r,s)=>{r.isCreating=!1,r.properties.unshift(s.payload.property),r.hostkitTestResult=s.payload.hostkitTest}).addCase(_u.rejected,(r,s)=>{r.isCreating=!1,r.error=s.payload}).addCase(jd.pending,r=>{r.isUpdating=!0,r.error=null}).addCase(jd.fulfilled,(r,s)=>{if(r.isUpdating=!1,console.log(" Redux updatePropertyAsync.fulfilled payload:",s.payload),s.payload&&s.payload.property){const a=s.payload.property,o=r.properties.findIndex(l=>l._id===a._id);o!==-1&&(r.properties[o]=a),r.selectedProperty?._id===a._id&&(r.selectedProperty=a)}else console.error(" Invalid payload structure in updatePropertyAsync.fulfilled:",s.payload)}).addCase(jd.rejected,(r,s)=>{r.isUpdating=!1,r.error=s.payload}).addCase(of.pending,r=>{r.isDeleting=!0,r.error=null}).addCase(of.fulfilled,(r,s)=>{r.isDeleting=!1,r.properties=r.properties.filter(a=>a._id!==s.payload),r.selectedProperty?._id===s.payload&&(r.selectedProperty=null)}).addCase(of.rejected,(r,s)=>{r.isDeleting=!1,r.error=s.payload}).addCase(lf.pending,r=>{r.isTesting=!0,r.error=null}).addCase(lf.fulfilled,(r,s)=>{r.isTesting=!1,r.hostkitTestResult=s.payload}).addCase(lf.rejected,(r,s)=>{r.isTesting=!1,r.error=s.payload}).addCase(cf.pending,r=>{r.isLoading=!0,r.error=null}).addCase(cf.fulfilled,(r,s)=>{r.isLoading=!1,r.dashboardMetrics=s.payload}).addCase(cf.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:my,clearHostkitTestResult:E6,setSelectedProperty:qh}=wb.actions,D6=wb.reducer,I6={properties:[],selectedProperty:null,isLoading:!1,error:null},Ki=Mr("properties/fetchProperties",async(t,{rejectWithValue:r})=>{try{const s=Date.now(),a=Math.random().toString(36).substring(7),o=await Ft.get(`/property-management?t=${s}&r=${a}&nocache=true`);return o&&typeof o=="object"?o:{properties:[],total:0}}catch(s){return r(s.response?.data?.message||"Failed to fetch properties")}}),Nb=Mo({name:"properties",initialState:I6,reducers:{setSelectedProperty:(t,r)=>{t.selectedProperty=r.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ki.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Ki.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.properties&&Array.isArray(s.payload.properties)?r.properties=s.payload.properties:r.properties=[],r.error=null}).addCase(Ki.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{setSelectedProperty:WA,clearError:GA}=Nb.actions,F6=Nb.reducer,nm=()=>{const t=Hs();R.useEffect(()=>{const r=s=>{console.log(" Property deleted globally, refreshing all property lists:",s.detail),t(Ki())};return window.addEventListener("propertyDeleted",r),()=>{window.removeEventListener("propertyDeleted",r)}},[t])},df=t=>{const r="http://localhost:5000",s=t.startsWith("/")?t.slice(1):t;return`${r}/${s}`},py=()=>{const t=Hs(),r=bi(),{user:s,isAuthenticated:a}=Bt(S=>S.auth),{t:o}=tm(),{dashboardMetrics:l,properties:d,isLoading:u}=Bt(S=>S.propertyManagement),[h,m]=R.useState("real");nm(),R.useEffect(()=>{a&&t(Ki())},[t,a]);const p=()=>{const S=new Date,L=S.getMonth(),E=S.getFullYear(),P=new Date(E,L,1),F=new Date(E,L+1,0),O=se=>{const X=se.getFullYear(),K=String(se.getMonth()+1).padStart(2,"0"),Y=String(se.getDate()).padStart(2,"0");return`${X}-${K}-${Y}`};return{startDate:O(P),endDate:O(F)}};R.useEffect(()=>{t(za());const S=new Date().getFullYear(),L=`${S}-01-01`,E=`${S}-12-31`;t(cf({startDate:L,endDate:E}))},[t]);const v=()=>{const S=new Date().getHours();return S<12?o("greeting.morning"):S<18?o("greeting.afternoon"):o("greeting.evening")},N=()=>{const S=new Date,L=S.getMonth()===0?11:S.getMonth()-1,E=S.getMonth()===0?S.getFullYear()-1:S.getFullYear();return{month:L,year:E}},y=()=>{const S=new Date,L=new Date(S.getFullYear(),S.getMonth()-1,1),E=new Date(S.getFullYear(),S.getMonth(),0),P=F=>{const O=F.getFullYear(),se=String(F.getMonth()+1).padStart(2,"0"),X=String(F.getDate()).padStart(2,"0");return`${O}-${se}-${X}`};return{startDate:P(L),endDate:P(E)}},A=(S,L)=>{switch(L){case"bookings":const E=p();r(`/bookings?propertyId=${S}&startDate=${E.startDate}&endDate=${E.endDate}&period=thisMonth`);break;case"invoices":const P=y();r(`/invoices?propertyId=${S}&startDate=${P.startDate}&endDate=${P.endDate}&period=lastMonth`);break;case"calendar":const F=p();r(`/calendar?propertyId=${S}&startDate=${F.startDate}&endDate=${F.endDate}&period=thisMonth`);break;default:r(`/properties/${S}`)}},C={totalRevenue:l?.totalRevenue||0,totalBookings:l?.totalBookings||0,occupancyRate:l?.averageOccupancy||0,avgDailyRate:l?.averageDailyRate||0,recentBookings:l?.recentBookings||[],properties:d||[]};return u&&d.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 mb-6 shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-[#0ea5e9] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:o("dashboard.title")})]}),e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 leading-tight",children:[v(),", ",e.jsx("span",{className:"gradient-text",children:s?.firstName||s?.name||s?.email}),"! "]}),e.jsx("p",{className:"text-lg lg:text-xl text-gray-700 mb-8 leading-relaxed",children:o("dashboard.description")}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-4 h-4 bg-[#0ea5e9] rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Live Data"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(gi,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Real-time Updates"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(cp,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[C.properties.length," ",o("dashboard.properties")]})]})]})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:o("dashboard.quickActions")}),e.jsx("p",{className:"text-sm text-gray-600",children:o("dashboard.manageEfficiently")})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#0ea5e9] to-[#0284c7] rounded-xl flex items-center justify-center shadow-md",children:e.jsx(Ed,{className:"h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("a",{href:"/calendar",className:"group flex flex-col items-center p-3 bg-gradient-to-br from-blue-50/80 to-blue-100/80 rounded-xl hover:from-blue-100 hover:to-blue-200 transition-all duration-300 hover:scale-105 hover:shadow-md",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#0ea5e9] to-[#0284c7] rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-md",children:e.jsx(gs,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.viewCalendar")})]}),e.jsxs("a",{href:"/bookings",className:"group flex flex-col items-center p-3 bg-gradient-to-br from-emerald-50/80 to-emerald-100/80 rounded-xl hover:from-emerald-100 hover:to-emerald-200 transition-all duration-300 hover:scale-105 hover:shadow-md",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#10b981] to-[#059669] rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-md",children:e.jsx(ra,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.manageBookings")})]}),e.jsxs("a",{href:"/invoices",className:"group flex flex-col items-center p-3 bg-gradient-to-br from-purple-50/80 to-purple-100/80 rounded-xl hover:from-purple-100 hover:to-purple-200 transition-all duration-300 hover:scale-105 hover:shadow-md",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#8b5cf6] to-[#7c3aed] rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-md",children:e.jsx(Yi,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.viewInvoices")})]}),e.jsxs("button",{onClick:()=>{const{month:S,year:L}=N();r(`/saft?month=${S}&year=${L}`)},className:"group flex flex-col items-center p-3 bg-gradient-to-br from-orange-50/80 to-orange-100/80 rounded-xl hover:from-orange-100 hover:to-orange-200 transition-all duration-300 hover:scale-105 hover:shadow-md w-full",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#f97316] to-[#ea580c] rounded-xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-md",children:e.jsx(Ji,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 text-center",children:o("dashboard.getSAFT")})]})]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-1",children:o("dashboard.yourProperties")}),e.jsx("p",{className:"text-sm text-gray-600",children:o("dashboard.managePortfolio")})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl border border-white/30 shadow-md",children:[e.jsx("div",{className:"w-2 h-2 bg-[#2563eb] rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:[C.properties.length," ",o("dashboard.activePropertiesCount")]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.properties.length>0?C.properties.map((S,L)=>e.jsxs("div",{className:"group bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:[e.jsxs("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:[S.images&&S.images.length>0?e.jsx("img",{src:df(S.images[0]),alt:S.name,className:"w-full h-full object-cover",onError:E=>{console.error(" Dashboard image failed to load:",E.currentTarget.src)},onLoad:E=>{console.log(" Dashboard image loaded successfully:",E.currentTarget.src)}}):e.jsxs("div",{className:"text-center",children:[e.jsx(cp,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Property Image"})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold text-white shadow-lg ${S.status==="active"?"bg-green-500":S.status==="inactive"?"bg-gray-500":"bg-yellow-500"}`,children:S.status||"Active"})}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm rounded px-1 py-0.5",children:[e.jsx("h3",{className:"font-bold mb-0 text-white",style:{fontSize:"7px"},children:S.name}),e.jsx("p",{className:"text-white/90",style:{fontSize:"9px"},children:S.address||"Algarve, Portugal"})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Type"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:S.type})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Bedrooms"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:S.bedrooms})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Max Guests"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:S.maxGuests})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("button",{onClick:E=>{E.stopPropagation(),A(S.id,"bookings")},className:"flex items-center justify-center gap-1 px-2 py-2 bg-gradient-to-r from-[#10b981] to-[#059669] text-white rounded-lg hover:from-[#059669] hover:to-[#047857] transition-all duration-300 font-semibold shadow-md hover:shadow-lg text-xs",children:[e.jsx(H2,{className:"h-3 w-3"}),"Bookings"]}),e.jsxs("button",{onClick:E=>{E.stopPropagation(),A(S.id,"invoices")},className:"flex items-center justify-center gap-1 px-2 py-2 bg-gradient-to-r from-[#8b5cf6] to-[#7c3aed] text-white rounded-lg hover:from-[#7c3aed] hover:to-[#6d28d9] transition-all duration-300 font-semibold shadow-md hover:shadow-lg text-xs",children:[e.jsx(Ji,{className:"h-3 w-3"}),"Invoices"]}),e.jsxs("button",{onClick:E=>{E.stopPropagation(),A(S.id,"calendar")},className:"flex items-center justify-center gap-1 px-2 py-2 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white rounded-lg hover:from-[#0284c7] hover:to-[#0369a1] transition-all duration-300 font-semibold shadow-md hover:shadow-lg text-xs",children:[e.jsx(gs,{className:"h-3 w-3"}),"Calendar"]})]})]})]},S._id||S.id||L)):e.jsxs("div",{className:"col-span-full text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(cp,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add your first property to start tracking bookings and revenue"}),e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white rounded-2xl hover:from-[#0284c7] hover:to-[#0369a1] transition-all duration-300 font-bold shadow-lg hover:shadow-xl",children:"Add Property"})]})})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx("button",{className:"w-10 h-10 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 flex items-center justify-center group",children:e.jsx(Ed,{className:"h-4 w-4 text-white group-hover:rotate-180 transition-transform duration-300"})})}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 right-1/4 w-40 h-40 bg-[#0ea5e9]/10 rounded-full blur-3xl "}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-32 h-32 bg-[#10b981]/10 rounded-full blur-3xl -delayed"}),e.jsx("div",{className:"absolute top-1/2 right-1/3 w-24 h-24 bg-[#8b5cf6]/10 rounded-full blur-2xl "}),e.jsx("div",{className:"absolute top-3/4 left-1/3 w-20 h-20 bg-[#f97316]/10 rounded-full blur-2xl -delayed"}),e.jsx("div",{className:"absolute top-1/6 left-1/2 w-16 h-16 bg-[#0ea5e9]/10 rounded-full blur-xl "})]})]})},T6="modulepreload",O6=function(t){return"/"+t},gy={},oa=function(r,s,a){let o=Promise.resolve();if(s&&s.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=h(s.map(m=>{if(m=O6(m),m in gy)return;gy[m]=!0;const p=m.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":T6,p||(N.as="script"),N.crossOrigin="",N.href=m,u&&N.setAttribute("nonce",u),document.head.appendChild(N),p)return new Promise((y,A)=>{N.addEventListener("load",y),N.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return r().catch(l)})},R6={bookings:[],isLoading:!1,error:null,filters:{}},xi=Mr("bookings/fetchBookings",async(t,{rejectWithValue:r})=>{try{const{bookingsAPI:s}=await oa(async()=>{const{bookingsAPI:d}=await import("./bookings.api-CrH55WhR.js");return{bookingsAPI:d}},[]),a=await s.getBookings(t),l=(Array.isArray(a)?a:a.bookings||[]).map(d=>({...d,propertyId:t.propertyId}));return Array.isArray(a)?l:{...a,bookings:l}}catch(s){return r(s.response?.data?.message||s.message||"Failed to fetch bookings")}}),jb=Mo({name:"bookings",initialState:R6,reducers:{setFilters:(t,r)=>{t.filters={...t.filters,...r.payload}},setBookings:(t,r)=>{t.bookings=r.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(xi.pending,r=>{r.isLoading=!0,r.error=null}).addCase(xi.fulfilled,(r,s)=>{r.isLoading=!1,r.bookings=Array.isArray(s.payload)?s.payload:s.payload.bookings||[]}).addCase(xi.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{setFilters:fd,setBookings:M6,clearError:KA}=jb.actions,B6=jb.reducer,$a=({properties:t,selectedId:r,onChange:s,placeholder:a="Select Property",className:o=""})=>(t.find(l=>l.id===r),e.jsxs("div",{className:`relative ${o}`,children:[e.jsxs("select",{value:r||"",onChange:l=>s(l.target.value?parseInt(l.target.value):null),className:"w-full px-4 py-3 pr-10 appearance-none cursor-pointer bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",className:"bg-white text-gray-900",children:a}),t.map(l=>e.jsx("option",{value:l.id,className:"bg-white text-gray-900",children:l.name},l.id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:e.jsx(_f,{className:"h-5 w-5 text-gray-500"})})]})),U6=(t,r)=>{const s=r.properties.properties.find(a=>a.id===t);return s?s.name:`Property ${t}`},Rd={validateSibaSubmission:async(t,r)=>{try{return await Ft.post("/siba-manager/validate",{propertyId:t,reservationData:r})}catch(s){throw console.error("SIBA validation error:",s),new Error(s.response?.data?.error||"SIBA validation failed")}},sendSibaSubmission:async(t,r)=>{try{return await Ft.post("/siba-manager/send",{propertyId:t,reservationData:r})}catch(s){throw console.error("SIBA submission error:",s),new Error(s.response?.data?.error||"SIBA submission failed")}},getBulkSibaDashboard:async()=>{try{return await Ft.get("/siba-manager/dashboard")}catch(t){throw console.error("Bulk SIBA dashboard error:",t),new Error(t.response?.data?.error||"Failed to fetch SIBA dashboard")}},getSibaStatus:async t=>{try{return await Ft.get(`/siba-manager/status/${t}`)}catch(r){throw console.error("SIBA status error:",r),new Error(r.response?.data?.error||"Failed to fetch SIBA status")}},bulkValidateSiba:async t=>{try{return await Ft.post("/siba-manager/bulk-validate",{reservations:t})}catch(r){throw console.error("Bulk SIBA validation error:",r),new Error(r.response?.data?.error||"Bulk SIBA validation failed")}},bulkSendSiba:async t=>{try{return await Ft.post("/siba-manager/bulk-send",{reservations:t})}catch(r){throw console.error("Bulk SIBA submission error:",r),new Error(r.response?.data?.error||"Bulk SIBA submission failed")}}},uf=Mr("sibaManager/validateSubmission",async({propertyId:t,reservationData:r})=>(await Rd.validateSibaSubmission(t,r)).validation),hf=Mr("sibaManager/sendSubmission",async({propertyId:t,reservationData:r})=>await Rd.sendSibaSubmission(t,r)),mp=Mr("sibaManager/fetchBulkDashboard",async()=>await Rd.getBulkSibaDashboard()),q6=Mr("sibaManager/fetchSibaStatus",async t=>(await Rd.getSibaStatus(t)).status),pp=Mr("sibaManager/bulkValidate",async t=>(await Rd.bulkValidateSiba(t)).validations),gp=Mr("sibaManager/bulkSend",async t=>await Rd.bulkSendSiba(t)),z6={validation:{isLoading:!1,result:null,error:null},submission:{isLoading:!1,result:null,error:null},bulkDashboard:{isLoading:!1,data:[],summary:null,error:null},propertyStatuses:{},bulkOperations:{validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}},Sb=Mo({name:"sibaManager",initialState:z6,reducers:{clearValidation:t=>{t.validation={isLoading:!1,result:null,error:null}},clearSubmission:t=>{t.submission={isLoading:!1,result:null,error:null}},clearBulkDashboard:t=>{t.bulkDashboard={isLoading:!1,data:[],summary:null,error:null}},clearBulkOperations:t=>{t.bulkOperations={validation:{isLoading:!1,results:null,error:null},submission:{isLoading:!1,results:null,error:null}}}},extraReducers:t=>{t.addCase(uf.pending,r=>{r.validation.isLoading=!0,r.validation.error=null}).addCase(uf.fulfilled,(r,s)=>{r.validation.isLoading=!1,r.validation.result=s.payload}).addCase(uf.rejected,(r,s)=>{r.validation.isLoading=!1,r.validation.error=s.error.message||"Validation failed"}),t.addCase(hf.pending,r=>{r.submission.isLoading=!0,r.submission.error=null}).addCase(hf.fulfilled,(r,s)=>{r.submission.isLoading=!1,r.submission.result=s.payload}).addCase(hf.rejected,(r,s)=>{r.submission.isLoading=!1,r.submission.error=s.error.message||"Submission failed"}),t.addCase(mp.pending,r=>{r.bulkDashboard.isLoading=!0,r.bulkDashboard.error=null}).addCase(mp.fulfilled,(r,s)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.data=s.payload.data,r.bulkDashboard.summary=s.payload.summary}).addCase(mp.rejected,(r,s)=>{r.bulkDashboard.isLoading=!1,r.bulkDashboard.error=s.error.message||"Failed to fetch dashboard"}),t.addCase(q6.fulfilled,(r,s)=>{const a=s.meta?.arg;a&&(r.propertyStatuses[a]=s.payload)}),t.addCase(pp.pending,r=>{r.bulkOperations.validation.isLoading=!0,r.bulkOperations.validation.error=null}).addCase(pp.fulfilled,(r,s)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.results=s.payload}).addCase(pp.rejected,(r,s)=>{r.bulkOperations.validation.isLoading=!1,r.bulkOperations.validation.error=s.error.message||"Bulk validation failed"}),t.addCase(gp.pending,r=>{r.bulkOperations.submission.isLoading=!0,r.bulkOperations.submission.error=null}).addCase(gp.fulfilled,(r,s)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.results=s.payload}).addCase(gp.rejected,(r,s)=>{r.bulkOperations.submission.isLoading=!1,r.bulkOperations.submission.error=s.error.message||"Bulk submission failed"})}}),{clearValidation:$6,clearSubmission:V6,clearBulkDashboard:YA,clearBulkOperations:JA}=Sb.actions,H6=Sb.reducer,W6=({reservation:t,propertyId:r,onSibaSent:s})=>{const a=Hs(),{validation:o,submission:l}=Bt(A=>A.sibaManager),[d,u]=R.useState(!1),[h,m]=R.useState(!1),p=async()=>{a($6()),await a(uf({propertyId:r,reservationData:t})),u(!0)},v=async()=>{a(V6());const A=await a(hf({propertyId:r,reservationData:t}));A.payload?.success&&A.payload?.submissionId&&(s?.(A.payload.submissionId),m(!0))},N=A=>{switch(A){case"green":return e.jsx($s,{className:"h-5 w-5 text-green-600"});case"amber":return e.jsx(Nd,{className:"h-5 w-5 text-yellow-600"});case"red":return e.jsx(ia,{className:"h-5 w-5 text-red-600"});default:return e.jsx(qs,{className:"h-5 w-5 text-gray-400"})}},y=A=>{switch(A){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qs,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SIBA Manager Tools"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Validate and send SIBA submission for this reservation"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Property ID: ",r]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:p,disabled:o.isLoading,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.isLoading?e.jsx(ps,{className:"h-4 w-4 animate-spin"}):e.jsx(G2,{className:"h-4 w-4"}),e.jsx("span",{children:o.isLoading?"Validating...":"Validate SIBA"})]}),e.jsxs("button",{onClick:v,disabled:l.isLoading||!o.result?.isValid,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.isLoading?e.jsx(ps,{className:"h-4 w-4 animate-spin"}):e.jsx(V3,{className:"h-4 w-4"}),e.jsx("span",{children:l.isLoading?"Sending...":"Send SIBA"})]})]}),d&&o.result&&e.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(o.result.isValid?"green":"red")}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[N(o.result.isValid?"green":"red"),e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Validation ",o.result.isValid?"Successful":"Failed"]})]}),o.result.errors.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.errors.map((A,C)=>e.jsx("li",{className:"text-sm text-red-700",children:A},C))})]}),o.result.warnings.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Information:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.result.warnings.map((A,C)=>e.jsx("li",{className:"text-sm text-blue-700",children:A.includes("not found in Hostkit")?"This reservation is from a different booking system. SIBA submission will be recorded locally.":A.includes("Hostkit API unavailable")?"Hostkit system is temporarily unavailable. SIBA submission will be recorded locally.":A.includes("No reservation code")?"No reservation code available. SIBA submission will be recorded locally.":A},C))})]}),o.result.isValid&&e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($s,{className:"h-4 w-4 text-green-600"}),e.jsx("h5",{className:"text-sm font-medium text-green-800",children:"Ready for SIBA Submission"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"All required information is valid. You can proceed with SIBA submission."})]}),o.result.isValid&&o.result.validationData&&e.jsxs("div",{className:"bg-white/50 p-3 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Validation Data:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Guest Count:"})," ",o.result.validationData.guestCount]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nights:"})," ",o.result.validationData.nights]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Check-in:"})," ",new Date(o.result.validationData.checkIn).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Check-out:"})," ",new Date(o.result.validationData.checkOut).toLocaleDateString()]})]})]})]}),h&&l.result&&e.jsxs("div",{className:`p-4 rounded-xl border-2 ${y(l.result.success?"green":"red")}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[N(l.result.success?"green":"red"),e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["SIBA Submission ",l.result.success?"Successful":"Failed"]})]}),l.result.success?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Submission ID:"})," ",l.result.submissionId]}),e.jsx("p",{className:"text-sm text-green-700",children:"SIBA submission has been successfully sent to the municipal authorities."})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Submission Errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:l.result.errors?.map((A,C)=>e.jsx("li",{className:"text-sm text-red-700",children:A},C))})]})]}),o.error&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:o.error})}),l.error&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:l.error})})]})},G6=()=>{const[t,r]=Fd(),[s,a]=R.useState(""),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState(!1),[p,v]=R.useState(null),[N,y]=R.useState({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),A=Hs(),C=bi(),{bookings:S,isLoading:L,error:E,filters:P}=Bt(T=>T.bookings),{properties:F}=Bt(T=>T.properties),{isAuthenticated:O}=Bt(T=>T.auth);nm(),R.useEffect(()=>{O&&A(Ki())},[A,O]),R.useEffect(()=>{F.length>0&&!P.propertyId&&(console.log(" Bookings: Auto-selecting first property:",F[0]),A(fd({propertyId:F[0].id})))},[F,P.propertyId,A]);const se=()=>{const T=new Date,re=T.getMonth(),fe=T.getFullYear(),Se=new Date(fe,re,1),ee=new Date(fe,re+1,0),D=$=>{const W=$.getFullYear(),ne=String($.getMonth()+1).padStart(2,"0"),H=String($.getDate()).padStart(2,"0");return`${W}-${ne}-${H}`};return{startDate:D(Se),endDate:D(ee)}};R.useEffect(()=>{const T=t.get("propertyId"),re=t.get("startDate"),fe=t.get("endDate"),Se=t.get("period");if(T||re||fe){if(y({propertyId:T?parseInt(T):null,startDate:re||"",endDate:fe||"",status:"",platform:""}),A(fd({propertyId:T?parseInt(T):void 0,dateRange:re&&fe?{start:re,end:fe}:void 0,status:""})),T&&A(xi({propertyId:parseInt(T),startDate:re||void 0,endDate:fe||void 0})),Se){const ee=Se==="thisMonth"?"this month":Se==="lastMonth"?"last month":Se;console.log(`Applied ${ee} filters for property ${T}`),v({propertyId:T?parseInt(T):void 0,period:ee,startDate:re||void 0,endDate:fe||void 0})}}else{const ee=se();y(D=>({...D,startDate:ee.startDate,endDate:ee.endDate})),A(fd({dateRange:{start:ee.startDate,end:ee.endDate}})),console.log("Auto-selected current month:",ee)}},[t,A]),R.useEffect(()=>{if(N.startDate&&N.endDate&&!N.propertyId&&F.length>0){const T=F[0];T&&(y(re=>({...re,propertyId:T.id})),A(xi({propertyId:T.id,startDate:N.startDate,endDate:N.endDate})),console.log(`Auto-fetching bookings for property ${T.id} (${T.name}) for current month`))}},[N.startDate,N.endDate,N.propertyId,F,A]);const X=T=>U6(T,{properties:{properties:F}}),K=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(T),Y=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ie=(T,re)=>{y(fe=>({...fe,[T]:re}))},I=()=>{const T={propertyId:N.propertyId||void 0,status:N.status||void 0,dateRange:N.startDate&&N.endDate?{start:N.startDate,end:N.endDate}:void 0};A(fd(T)),l(!1);const re=N.propertyId;re&&A(xi({propertyId:re,startDate:N.startDate,endDate:N.endDate}))},q=()=>{y({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),A(fd({})),A(M6([]))},U=(T,re)=>{C(`/bookings/${T}?propertyId=${re}`)},J=()=>{m(!1),u(null)},ge=S.map(T=>({id:T.id?.toString()||T.id,propertyId:T.propertyId,guestName:T.guestName||"Unknown Guest",bookingId:T.id?.toString()||"N/A",checkInDate:T.arrivalDate||T.checkIn,checkOutDate:T.departureDate||T.checkOut,totalAmount:T.totalPrice||0,status:T.status||"pending",paymentStatus:T.paymentStatus,platform:T.provider||T.platform||"Direct",guestEmail:T.guestEmail,guestPhone:T.guestPhone,nights:T.nights||1,adults:T.adults||1,children:T.children||0,specialRequests:"",createdAt:T.createdAt,updatedAt:T.updatedAt})).filter(T=>{const re=T.guestName?.toLowerCase().includes(s.toLowerCase())||T.propertyId?.toString().includes(s)||T.bookingId?.toLowerCase().includes(s.toLowerCase()),fe=!N.propertyId||T.propertyId===N.propertyId,Se=!N.status||T.paymentStatus?.toLowerCase()===N.status.toLowerCase()||T.status===N.status,ee=!N.platform||T.platform===N.platform;return re&&fe&&Se&&ee});return L?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading bookings..."})]})}):E?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ia,{className:"w-8 h-8 text-red-600"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Error loading bookings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:E}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]})}):P.propertyId?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Bookings"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage reservations and guest communications"}),p&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Showing ",p.period," data",p.propertyId&&` for Property ${p.propertyId}`,p.startDate&&p.endDate&&` (${p.startDate} to ${p.endDate})`]})]}),e.jsx("button",{onClick:()=>{v(null),r({}),y({propertyId:null,status:"",startDate:"",endDate:"",platform:""}),A(fd({propertyId:void 0,dateRange:void 0,status:""}))},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Clear Filters"})]})})]}),e.jsx("div",{className:"flex gap-4 mt-6 lg:mt-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Property:"}),e.jsx($a,{selectedId:N.propertyId,onChange:T=>{ie("propertyId",T),T&&A(xi({propertyId:T}))},properties:F})]})})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-4 pt-20",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bookings, guests, properties...",value:s,onChange:T=>a(T.target.value),className:"w-full pl-10 pr-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 placeholder-gray-500 shadow-md"})]})}),e.jsxs("button",{onClick:()=>l(!o),className:`px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 flex items-center gap-1 ${o?"bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white hover:from-[#0284c7] hover:to-[#0ea5e9]":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(qu,{className:"w-4 h-4"}),"Filters"]})]}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-lg border border-gray-100/50 shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Property"}),e.jsx($a,{selectedId:N.propertyId,onChange:T=>ie("propertyId",T),properties:F})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.status,onChange:T=>ie("status",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"modified",children:"Modified"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Check-in From"}),e.jsx("input",{type:"date",value:N.startDate,onChange:T=>ie("startDate",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Check-in To"}),e.jsx("input",{type:"date",value:N.endDate,onChange:T=>ie("endDate",T.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 bg-white text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-300 font-semibold shadow-md",children:"Clear All"}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white rounded-lg hover:from-[#0284c7] hover:to-[#0ea5e9] transition-all duration-300 font-semibold shadow-md hover:shadow-lg",children:"Apply Filters"})]})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Guest"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Property"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Check-in"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Check-out"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:ge.map((T,re)=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-sm font-bold text-white",children:T.guestName?.charAt(0)||"G"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm group-hover:text-[#5FFF56] transition-colors",children:T.guestName||"Guest"}),e.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["ID: ",T.bookingId]})]})]})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm",children:X(T.propertyId||0)}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Algarve, Portugal"})]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"font-semibold text-gray-900",children:Y(T.checkInDate||"")})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"font-semibold text-gray-900",children:Y(T.checkOutDate||"")})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"font-bold text-gray-900 text-sm",children:K(T.totalAmount||0)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-bold shadow-md ${T.paymentStatus==="Paid"?"bg-blue-100 text-blue-800":T.paymentStatus==="Pending"?"bg-yellow-100 text-yellow-800":T.paymentStatus==="Failed"?"bg-red-100 text-red-800":T.paymentStatus==="Refunded"?"bg-purple-100 text-purple-800":T.status==="confirmed"?"bg-green-100 text-green-800":T.status==="pending"?"bg-yellow-100 text-yellow-800":T.status==="cancelled"?"bg-red-100 text-red-800":T.status==="modified"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:T.status||T.paymentStatus||"Pending"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>U(T.id,T.propertyId||392776),className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-md hover:shadow-lg",title:"View Details",children:e.jsx(Vs,{className:"w-4 h-4"})})})})]},T.id))})]})})})]}),h&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Details & SIBA Manager"}),e.jsx("button",{onClick:J,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx(gs,{className:"h-5 w-5 text-blue-600"})}),"Booking Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Guest Name:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.guestName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Property:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:X(d.propertyId)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Check-in:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:Y(d.checkInDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Check-out:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:Y(d.checkOutDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Adults:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.adults})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Children:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:d.children})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Total Amount:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:K(d.totalAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Status:"}),e.jsx("span",{className:`font-semibold ${d.paymentStatus==="Paid"?"text-green-600":d.paymentStatus==="Pending"?"text-yellow-600":"text-red-600"}`,children:d.status||d.paymentStatus})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(W6,{reservation:d,propertyId:d.propertyId,onSibaSent:T=>{console.log("SIBA submitted with ID:",T)}})})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ku,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Please select a property to view its bookings."}),e.jsx("button",{onClick:()=>l(!0),className:"btn btn-primary",children:"Select Property"})]})})})},xy=()=>{const{bookingId:t}=_0(),[r]=Fd(),s=r.get("propertyId"),a=bi(),[o,l]=R.useState(null),[d,u]=R.useState(!0),[h,m]=R.useState(null),{token:p}=Bt(y=>y.auth);R.useEffect(()=>{(async()=>{if(!t||!s||!p){m("Missing booking ID, property ID, or authentication token"),u(!1);return}try{u(!0),m(null);const A=await fetch(`/api/bookings/detail/${t}?propertyId=${s}`,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!A.ok)throw new Error(`Failed to fetch booking details: ${A.statusText}`);const C=await A.json();l(C)}catch(A){console.error("Error fetching booking detail:",A),m(A.message||"Failed to fetch booking details")}finally{u(!1)}})()},[t,s,p]);const v=()=>{if(!o)return;const y=window.open("","_blank");if(!y){alert("Please allow popups to download PDF");return}const A=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Booking Detail Report - ${o.id}</title>
        <style>
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            line-height: 1.6;
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 15px; 
            margin-bottom: 25px; 
          }
          .header h1 { 
            margin: 0; 
            color: #333; 
            font-size: 24px;
          }
          .header p { 
            margin: 5px 0 0 0; 
            color: #666; 
            font-size: 14px;
          }
          .section { 
            margin-bottom: 25px; 
            page-break-inside: avoid;
          }
          .section h3 { 
            color: #333; 
            border-bottom: 1px solid #ccc; 
            padding-bottom: 8px; 
            margin-bottom: 15px;
            font-size: 18px;
          }
          .info-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 8px; 
            padding: 5px 0;
          }
          .label { 
            font-weight: bold; 
            color: #333;
            flex: 1;
          }
          .value { 
            color: #666; 
            flex: 1;
            text-align: right;
          }
          .financial { 
            background-color: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            border: 1px solid #e9ecef;
          }
          .financial .info-row {
            border-bottom: 1px solid #e9ecef;
            padding: 8px 0;
          }
          .financial .info-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 16px;
            color: #333;
          }
          .special-requests {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Booking Detail Report</h1>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>
        
        <div class="section">
          <h3>Basic Information</h3>
          <div class="info-row">
            <span class="label">Hostaway Reservation ID:</span>
            <span class="value">${o.hostawayReservationId||o.id||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">Channel Reservation ID:</span>
            <span class="value">${o.channelReservationId||o.reservationId||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">Property:</span>
            <span class="value">${o.propertyName}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Name:</span>
            <span class="value">${o.guestName}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Email:</span>
            <span class="value">${o.guestEmail}</span>
          </div>
          <div class="info-row">
            <span class="label">Guest Phone:</span>
            <span class="value">${o.guestPhone||"Not provided"}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Dates & Duration</h3>
          <div class="info-row">
            <span class="label">Check-in:</span>
            <span class="value">${new Date(o.arrivalDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">Check-out:</span>
            <span class="value">${new Date(o.departureDate).toLocaleDateString()}</span>
          </div>
          <div class="info-row">
            <span class="label">Total Nights:</span>
            <span class="value">${o.nights}</span>
          </div>
          ${o.checkInTime?`
          <div class="info-row">
            <span class="label">Check-in Time:</span>
            <span class="value">${o.checkInTime}</span>
          </div>
          <div class="info-row">
            <span class="label">Check-out Time:</span>
            <span class="value">${o.checkOutTime}</span>
          </div>
          `:""}
        </div>
        
        <div class="section">
          <h3>Guest Information</h3>
          <div class="info-row">
            <span class="label">Adults:</span>
            <span class="value">${o.adults}</span>
          </div>
          <div class="info-row">
            <span class="label">Children:</span>
            <span class="value">${o.children}</span>
          </div>
          <div class="info-row">
            <span class="label">Total Guests:</span>
            <span class="value">${o.totalGuests}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Booking Details</h3>
          <div class="info-row">
            <span class="label">Platform:</span>
            <span class="value">${o.provider}</span>
          </div>
          <div class="info-row">
            <span class="label">Status:</span>
            <span class="value">${o.status}</span>
          </div>
          <div class="info-row">
            <span class="label">Payment Status:</span>
            <span class="value">${o.paymentStatus}</span>
          </div>
        </div>
        
        <div class="section">
          <h3>Financial Breakdown</h3>
          <div class="financial">
            <div class="info-row">
              <span class="label">Total Revenue:</span>
              <span class="value">${o.totalPrice?.toFixed(2)}</span>
            </div>
            <div class="info-row" style="background-color: #f8f9fa; padding: 8px; border-radius: 4px;">
              <span class="label" style="font-style: italic;">Note:</span>
              <span class="value" style="font-style: italic;">Final amount - includes all fees (cleaning, city tax, etc.)</span>
            </div>
            ${o.cityTax?`
            <div class="info-row">
              <span class="label">City Tax:</span>
              <span class="value">${o.cityTax?.toFixed(2)}</span>
            </div>
            `:""}
          </div>
        </div>
        
        ${o.specialRequests?`
        <div class="section">
          <h3>Special Requests</h3>
          <div class="special-requests">
            <p>${o.specialRequests}</p>
          </div>
        </div>
        `:""}
        
        <script>
          // Auto-print when window loads
          window.onload = function() {
            setTimeout(function() {
              window.print();
              // Close window after printing
              setTimeout(function() {
                window.close();
              }, 1000);
            }, 500);
          };
        <\/script>
      </body>
      </html>
    `;y.document.write(A),y.document.close()},N=()=>{if(!o)return;const y=`Hostaway Reservation ID,Channel Reservation ID,Property,Guest Name,Guest Email,Guest Phone,Check-in,Check-out,Nights,Adults,Children,Total Revenue (Final Amount),Platform,Status,Payment Status,Check-in Time,Check-out Time,Special Requests
"${o.hostawayReservationId||o.id||"N/A"}","${o.channelReservationId||o.reservationId||"N/A"}","${o.propertyName||"N/A"}","${o.guestName||"N/A"}","${o.guestEmail||"N/A"}","${o.guestPhone||"N/A"}","${o.arrivalDate||"N/A"}","${o.departureDate||"N/A"}","${o.nights||0}","${o.adults||0}","${o.children||0}","${o.totalPrice||0}","${o.provider||"N/A"}","${o.status||"N/A"}","${o.paymentStatus||"N/A"}","${o.checkInTime||"N/A"}","${o.checkOutTime||"N/A"}","${(o.specialRequests||"").replace(/"/g,'""')}"`,A=new Blob([y],{type:"text/csv;charset=utf-8;"}),C=window.URL.createObjectURL(A),S=document.createElement("a");S.href=C,S.download=`booking-${o.id}.csv`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(C),document.body.removeChild(S)};return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading booking details..."})]})}):h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(kl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Booking"}),e.jsx("p",{className:"text-gray-600 mb-4",children:h}),e.jsx("button",{onClick:()=>a("/bookings"),className:"btn-primary",children:"Back to Bookings"})]})}):o?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>a("/bookings"),className:"btn-outline btn-sm mr-4",children:[e.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back to Bookings"]}),e.jsxs("h1",{className:"text-xl font-semibold text-white",children:["Booking Details - ",o.id]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:v,className:"btn-outline btn-sm",children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),e.jsxs("button",{onClick:N,className:"btn-primary btn-sm",children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx($s,{className:"h-4 w-4 text-green-500 mr-2"}),"Hostaway reservation ID"]}),e.jsx("input",{type:"text",value:o.hostawayReservationId||o.id||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx($s,{className:"h-4 w-4 text-green-500 mr-2"}),"Channel reservation ID"]}),e.jsx("input",{type:"text",value:o.channelReservationId||o.reservationId||"N/A",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:o.provider})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:o.status})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dates & Duration"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.arrivalDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.departureDate).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Nights"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:o.nights})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Guest Information"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Phone"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.guestPhone||"Not provided"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adults"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ra,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.adults})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Children"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ra,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.children})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Guests"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:o.totalGuests})]})]}),o.specialRequests&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:o.specialRequests})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[o.currentTaxFormatted&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Information"})}),e.jsxs("div",{className:"card-content space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Tax"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.currentTaxFormatted})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Tax"}),e.jsx("p",{className:"text-2xl font-bold text-success-600",children:o.estimatedTotalTaxFormatted})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax per Night"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.estimatedTaxPerNightFormatted})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Taxable Nights:"}),e.jsx("span",{className:"font-medium",children:o.taxableNights})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Exempt Nights:"}),e.jsx("span",{className:"font-medium",children:o.exemptNights})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})}),e.jsxs("div",{className:"card-content space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:["",o.totalPrice?.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Final amount - includes all fees (cleaning, city tax, etc.)"})]}),o.checkInTime&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Check-in Time:"}),e.jsx("span",{className:"font-medium",children:o.checkInTime})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Check-out Time:"}),e.jsx("span",{className:"font-medium",children:o.checkOutTime})]})]})]})]}),o.taxImplemented!==void 0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tax Status"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[o.taxImplemented?e.jsx($s,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(kl,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:o.taxImplemented?"Tax Implemented":"Tax Not Implemented"})]})})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(kl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Booking Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested booking could not be found."}),e.jsxs("button",{onClick:()=>a("/bookings"),className:"btn-primary",children:[e.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back to Bookings"]})]})})},K6={invoices:[],isLoading:!1,error:null,summary:{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0}},Sd=Mr("invoices/fetchInvoices",async(t,{rejectWithValue:r})=>{try{console.log(" fetchInvoicesAsync called with params:",t);const{invoicesAPI:s}=await oa(async()=>{const{invoicesAPI:o}=await import("./invoices.api-boW4u4oP.js");return{invoicesAPI:o}},[]),a=await s.getInvoices(t);return console.log(" fetchInvoicesAsync received result:",a),a}catch(s){return console.error(" fetchInvoicesAsync error:",s),r(s.response?.data?.message||"Failed to fetch invoices")}}),kb=Mo({name:"invoices",initialState:K6,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Sd.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Sd.fulfilled,(r,s)=>{r.isLoading=!1;const a=Array.isArray(s.payload)?s.payload:[],o=l=>`Property ${l}`;r.invoices=a.map(l=>{const d=parseFloat(l.value||"0");return{id:l.id||"",propertyId:l.propertyId||0,propertyName:o(l.propertyId||0),guestName:l.name||l.guestName||"Unknown Guest",date:l.date||new Date().toISOString(),value:d,valueFormatted:`${d.toFixed(2)}`,vat:0,vatFormatted:"0.00",total:d,totalFormatted:`${d.toFixed(2)}`,status:l.closed?"paid":l.partial?"partial":"pending",invoiceUrl:l.invoice_url||"#",closed:l.closed||!1,partial:l.partial||!1}}),r.summary=r.invoices.reduce((l,d)=>(l.totalAmount+=d.total,d.status==="paid"?l.paidAmount+=d.total:d.status==="pending"||d.status==="partial"?l.pendingAmount+=d.total:d.status==="overdue"&&(l.overdueAmount+=d.total),l),{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0})}).addCase(Sd.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:QA}=kb.actions,Y6=kb.reducer,J6=()=>{const[t,r]=Fd(),[s,a]=R.useState(""),[o,l]=R.useState(!1),[d,u]=R.useState("30d"),h=Hs(),{invoices:m,isLoading:p,summary:v}=Bt(U=>U.invoices),{properties:N}=Bt(U=>U.properties),{isAuthenticated:y}=Bt(U=>U.auth);R.useEffect(()=>{y&&h(Ki())},[h,y]);const[A,C]=R.useState(null),[S,L]=R.useState(""),[E,P]=R.useState(""),F=()=>{const U=new Date,J=U.getMonth()===0?11:U.getMonth()-1,be=U.getMonth()===0?U.getFullYear()-1:U.getFullYear(),ge=new Date(be,J,1),T=new Date(be,J+1,0),re=fe=>{const Se=fe.getFullYear(),ee=String(fe.getMonth()+1).padStart(2,"0"),D=String(fe.getDate()).padStart(2,"0");return`${Se}-${ee}-${D}`};return{startDate:re(ge),endDate:re(T)}};R.useEffect(()=>{const U=t.get("propertyId"),J=t.get("startDate"),be=t.get("endDate"),ge=t.get("period");if(U||J||be)C(U?parseInt(U):null),L(J||""),P(be||""),U&&h(Sd({propertyId:parseInt(U),startDate:J||void 0,endDate:be||void 0})),ge&&console.log(`Applied ${ge==="thisMonth"?"this month":ge==="lastMonth"?"last month":ge} filters for property ${U}`);else{const T=F();L(T.startDate),P(T.endDate),console.log("Auto-selected last month:",T)}},[t]),R.useEffect(()=>{if(S&&E&&!A&&N.length>0){const U=N[0];U&&(C(U.id),h(Sd({propertyId:U.id,startDate:S,endDate:E})),console.log(`Auto-fetching invoices for property ${U.id} (${U.name}) for last month`))}},[S,E,A,N,h]);const O=()=>{A&&(console.log(" fetchInvoices called with propertyId:",A),h(Sd({propertyId:A,startDate:S||void 0,endDate:E||void 0})))},se=U=>{U.invoiceUrl&&U.invoiceUrl!=="#"?window.open(U.invoiceUrl,"_blank"):alert("Invoice URL not available")};R.useEffect(()=>{console.log(" Properties loaded:",N.map(U=>({id:U.id,name:U.name}))),N.length>0&&!A&&(console.log(" Setting selectedPropertyId to first property:",N[0].id,N[0].name),C(N[0].id))},[N,A]),R.useEffect(()=>{A&&O()},[A]);const X=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(U),K=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Y=m.reduce((U,J)=>{const be=`${J.id}-${J.propertyId}`;return U.has(be)||U.set(be,J),U},new Map).values(),ie=Array.from(Y);console.log(`[INVOICE DEDUP] Removed ${m.length-ie.length} duplicate invoices. Original: ${m.length}, Unique: ${ie.length}`);const I=ie.filter(U=>{const J=!A||U.propertyId===A;J||console.log(`[INVOICE FILTER] Filtering out invoice ${U.id} from property ${U.propertyId} (selected: ${A})`);const be=U.guestName.toLowerCase().includes(s.toLowerCase())||U.propertyName.toLowerCase().includes(s.toLowerCase())||U.id.toLowerCase().includes(s.toLowerCase());return J&&be});console.log(`[INVOICE FILTER] Final result: ${I.length} invoices for property ${A}`);const q={totalAmount:I.reduce((U,J)=>U+J.total,0),paidAmount:I.filter(U=>U.status==="paid").reduce((U,J)=>U+J.total,0),pendingAmount:I.filter(U=>U.status==="pending").reduce((U,J)=>U+J.total,0),overdueAmount:I.filter(U=>U.status==="overdue").reduce((U,J)=>U+J.total,0)};return p?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Invoices..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Invoices"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage guest invoices and billing"})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-4 pt-20",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg hover:shadow-xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X(q.totalAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-md",children:e.jsx(Yi,{className:"h-5 w-5 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg hover:shadow-xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Paid"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X(q.paidAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-md",children:e.jsx($s,{className:"h-5 w-5 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg hover:shadow-xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X(q.pendingAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg shadow-md",children:e.jsx(Al,{className:"h-5 w-5 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg hover:shadow-xl transition-all duration-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Overdue"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:X(q.overdueAmount)})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg shadow-md",children:e.jsx(ia,{className:"h-5 w-5 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 p-4 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices, guests, properties...",value:s,onChange:U=>a(U.target.value),className:"w-full pl-10 pr-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 placeholder-gray-500 shadow-md"})]})}),e.jsxs("button",{onClick:()=>l(!o),className:`px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 flex items-center gap-1 ${o?"bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white hover:from-[#0284c7] hover:to-[#0ea5e9]":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[e.jsx(qu,{className:"w-4 h-4"}),"Filters"]})]}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-gray-50/80 to-white/80 rounded-lg border border-gray-100/50 shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Property"}),e.jsx($a,{properties:N,selectedId:A,onChange:U=>C(U),placeholder:"Select Property"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:d,onChange:U=>u(U.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",value:S,onChange:U=>L(U.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-md",value:E,onChange:U=>P(U.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mt-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Amount Range"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:ring-2 focus:ring-[#5FFF56] focus:border-[#5FFF56] text-gray-900 shadow-lg",children:[e.jsx("option",{value:"",children:"All Amounts"}),e.jsx("option",{value:"0-100",children:"0 - 100"}),e.jsx("option",{value:"100-500",children:"100 - 500"}),e.jsx("option",{value:"500-1000",children:"500 - 1000"}),e.jsx("option",{value:"1000+",children:"1000+"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:O,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold shadow-md hover:shadow-lg flex items-center gap-1",disabled:!A||p,children:[e.jsx(ps,{className:`w-4 h-4 ${p?"animate-spin":""}`}),p?"Loading...":"Refresh"]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-white text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-300 font-semibold shadow-md",children:"Clear All"}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] text-white rounded-lg hover:from-[#0284c7] hover:to-[#0ea5e9] transition-all duration-300 font-semibold shadow-md hover:shadow-lg",disabled:!A,children:"Apply Filters"})]})]})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:I.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Ji,{className:"h-16 w-16 mx-auto text-gray-400 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"No invoices are currently available for this property."})]}):e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Invoice"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Guest"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Property"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:I.map((U,J)=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300 group",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ji,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm group-hover:text-[#5FFF56] transition-colors",children:U.id}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:U.closed?"Closed":"Open"})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"font-bold text-gray-900 text-sm",children:U.guestName})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"font-bold text-gray-900 text-sm",children:U.propertyName})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400 mr-1"}),e.jsx("span",{className:"font-semibold text-gray-900",children:K(U.date)})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"font-bold text-gray-900 text-sm",children:U.valueFormatted})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-bold shadow-md ${U.status==="paid"?"bg-green-100 text-green-800":U.status==="pending"?"bg-yellow-100 text-yellow-800":U.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:U.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>se(U),className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-md hover:shadow-lg",title:"View Invoice",children:e.jsx(Vs,{className:"w-4 h-4"})})})})]},`${U.id}-${U.propertyId}-${J}`))})]})})})]})]})};function Ar(t){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ar(t)}var yi=Uint8Array,ja=Uint16Array,K0=Int32Array,Y0=new yi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),J0=new yi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yy=new yi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ab=function(t,r){for(var s=new ja(31),a=0;a<31;++a)s[a]=r+=1<<t[a-1];for(var o=new K0(s[30]),a=1;a<30;++a)for(var l=s[a];l<s[a+1];++l)o[l]=l-s[a]<<5|a;return{b:s,r:o}},Cb=Ab(Y0,2),Q6=Cb.b,d0=Cb.r;Q6[28]=258,d0[258]=28;var X6=Ab(J0,0),by=X6.r,u0=new ja(32768);for(var qr=0;qr<32768;++qr){var yl=(qr&43690)>>1|(qr&21845)<<1;yl=(yl&52428)>>2|(yl&13107)<<2,yl=(yl&61680)>>4|(yl&3855)<<4,u0[qr]=((yl&65280)>>8|(yl&255)<<8)>>1}var Lu=(function(t,r,s){for(var a=t.length,o=0,l=new ja(r);o<a;++o)t[o]&&++l[t[o]-1];var d=new ja(r);for(o=1;o<r;++o)d[o]=d[o-1]+l[o-1]<<1;var u;if(s){u=new ja(1<<r);var h=15-r;for(o=0;o<a;++o)if(t[o])for(var m=o<<4|t[o],p=r-t[o],v=d[t[o]-1]++<<p,N=v|(1<<p)-1;v<=N;++v)u[u0[v]>>h]=m}else for(u=new ja(a),o=0;o<a;++o)t[o]&&(u[o]=u0[d[t[o]-1]++]>>15-t[o]);return u}),wc=new yi(288);for(var qr=0;qr<144;++qr)wc[qr]=8;for(var qr=144;qr<256;++qr)wc[qr]=9;for(var qr=256;qr<280;++qr)wc[qr]=7;for(var qr=280;qr<288;++qr)wc[qr]=8;var If=new yi(32);for(var qr=0;qr<32;++qr)If[qr]=5;var Z6=Lu(wc,9,0),eS=Lu(If,5,0),Pb=function(t){return(t+7)/8|0},tS=function(t,r,s){return(s==null||s>t.length)&&(s=t.length),new yi(t.subarray(r,s))},_o=function(t,r,s){s<<=r&7;var a=r/8|0;t[a]|=s,t[a+1]|=s>>8},yu=function(t,r,s){s<<=r&7;var a=r/8|0;t[a]|=s,t[a+1]|=s>>8,t[a+2]|=s>>16},xp=function(t,r){for(var s=[],a=0;a<t.length;++a)t[a]&&s.push({s:a,f:t[a]});var o=s.length,l=s.slice();if(!o)return{t:Lb,l:0};if(o==1){var d=new yi(s[0].s+1);return d[s[0].s]=1,{t:d,l:1}}s.sort(function(O,se){return O.f-se.f}),s.push({s:-1,f:25001});var u=s[0],h=s[1],m=0,p=1,v=2;for(s[0]={s:-1,f:u.f+h.f,l:u,r:h};p!=o-1;)u=s[s[m].f<s[v].f?m++:v++],h=s[m!=p&&s[m].f<s[v].f?m++:v++],s[p++]={s:-1,f:u.f+h.f,l:u,r:h};for(var N=l[0].s,a=1;a<o;++a)l[a].s>N&&(N=l[a].s);var y=new ja(N+1),A=h0(s[p-1],y,0);if(A>r){var a=0,C=0,S=A-r,L=1<<S;for(l.sort(function(se,X){return y[X.s]-y[se.s]||se.f-X.f});a<o;++a){var E=l[a].s;if(y[E]>r)C+=L-(1<<A-y[E]),y[E]=r;else break}for(C>>=S;C>0;){var P=l[a].s;y[P]<r?C-=1<<r-y[P]++-1:++a}for(;a>=0&&C;--a){var F=l[a].s;y[F]==r&&(--y[F],++C)}A=r}return{t:new yi(y),l:A}},h0=function(t,r,s){return t.s==-1?Math.max(h0(t.l,r,s+1),h0(t.r,r,s+1)):r[t.s]=s},vy=function(t){for(var r=t.length;r&&!t[--r];);for(var s=new ja(++r),a=0,o=t[0],l=1,d=function(h){s[a++]=h},u=1;u<=r;++u)if(t[u]==o&&u!=r)++l;else{if(!o&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(o),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(o);l=1,o=t[u]}return{c:s.subarray(0,a),n:r}},bu=function(t,r){for(var s=0,a=0;a<r.length;++a)s+=t[a]*r[a];return s},_b=function(t,r,s){var a=s.length,o=Pb(r+2);t[o]=a&255,t[o+1]=a>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<a;++l)t[o+l+4]=s[l];return(o+4+a)*8},wy=function(t,r,s,a,o,l,d,u,h,m,p){_o(r,p++,s),++o[256];for(var v=xp(o,15),N=v.t,y=v.l,A=xp(l,15),C=A.t,S=A.l,L=vy(N),E=L.c,P=L.n,F=vy(C),O=F.c,se=F.n,X=new ja(19),K=0;K<E.length;++K)++X[E[K]&31];for(var K=0;K<O.length;++K)++X[O[K]&31];for(var Y=xp(X,7),ie=Y.t,I=Y.l,q=19;q>4&&!ie[yy[q-1]];--q);var U=m+5<<3,J=bu(o,wc)+bu(l,If)+d,be=bu(o,N)+bu(l,C)+d+14+3*q+bu(X,ie)+2*X[16]+3*X[17]+7*X[18];if(h>=0&&U<=J&&U<=be)return _b(r,p,t.subarray(h,h+m));var ge,T,re,fe;if(_o(r,p,1+(be<J)),p+=2,be<J){ge=Lu(N,y,0),T=N,re=Lu(C,S,0),fe=C;var Se=Lu(ie,I,0);_o(r,p,P-257),_o(r,p+5,se-1),_o(r,p+10,q-4),p+=14;for(var K=0;K<q;++K)_o(r,p+3*K,ie[yy[K]]);p+=3*q;for(var ee=[E,O],D=0;D<2;++D)for(var $=ee[D],K=0;K<$.length;++K){var W=$[K]&31;_o(r,p,Se[W]),p+=ie[W],W>15&&(_o(r,p,$[K]>>5&127),p+=$[K]>>12)}}else ge=Z6,T=wc,re=eS,fe=If;for(var K=0;K<u;++K){var ne=a[K];if(ne>255){var W=ne>>18&31;yu(r,p,ge[W+257]),p+=T[W+257],W>7&&(_o(r,p,ne>>23&31),p+=Y0[W]);var H=ne&31;yu(r,p,re[H]),p+=fe[H],H>3&&(yu(r,p,ne>>5&8191),p+=J0[H])}else yu(r,p,ge[ne]),p+=T[ne]}return yu(r,p,ge[256]),p+T[256]},rS=new K0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lb=new yi(0),sS=function(t,r,s,a,o,l){var d=l.z||t.length,u=new yi(a+d+5*(1+Math.ceil(d/7e3))+o),h=u.subarray(a,u.length-o),m=l.l,p=(l.r||0)&7;if(r){p&&(h[0]=l.r>>3);for(var v=rS[r-1],N=v>>13,y=v&8191,A=(1<<s)-1,C=l.p||new ja(32768),S=l.h||new ja(A+1),L=Math.ceil(s/3),E=2*L,P=function(Te){return(t[Te]^t[Te+1]<<L^t[Te+2]<<E)&A},F=new K0(25e3),O=new ja(288),se=new ja(32),X=0,K=0,Y=l.i||0,ie=0,I=l.w||0,q=0;Y+2<d;++Y){var U=P(Y),J=Y&32767,be=S[U];if(C[J]=be,S[U]=J,I<=Y){var ge=d-Y;if((X>7e3||ie>24576)&&(ge>423||!m)){p=wy(t,h,0,F,O,se,K,ie,q,Y-q,p),ie=X=K=0,q=Y;for(var T=0;T<286;++T)O[T]=0;for(var T=0;T<30;++T)se[T]=0}var re=2,fe=0,Se=y,ee=J-be&32767;if(ge>2&&U==P(Y-ee))for(var D=Math.min(N,ge)-1,$=Math.min(32767,Y),W=Math.min(258,ge);ee<=$&&--Se&&J!=be;){if(t[Y+re]==t[Y+re-ee]){for(var ne=0;ne<W&&t[Y+ne]==t[Y+ne-ee];++ne);if(ne>re){if(re=ne,fe=ee,ne>D)break;for(var H=Math.min(ee,ne-2),Q=0,T=0;T<H;++T){var ue=Y-ee+T&32767,xe=C[ue],Ee=ue-xe&32767;Ee>Q&&(Q=Ee,be=ue)}}}J=be,be=C[J],ee+=J-be&32767}if(fe){F[ie++]=268435456|d0[re]<<18|by[fe];var me=d0[re]&31,De=by[fe]&31;K+=Y0[me]+J0[De],++O[257+me],++se[De],I=Y+re,++X}else F[ie++]=t[Y],++O[t[Y]]}}for(Y=Math.max(Y,I);Y<d;++Y)F[ie++]=t[Y],++O[t[Y]];p=wy(t,h,m,F,O,se,K,ie,q,Y-q,p),m||(l.r=p&7|h[p/8|0]<<3,p-=7,l.h=S,l.p=C,l.i=Y,l.w=I)}else{for(var Y=l.w||0;Y<d+m;Y+=65535){var Ze=Y+65535;Ze>=d&&(h[p/8|0]=m,Ze=d),p=_b(h,p+1,t.subarray(Y,Ze))}l.i=d}return tS(u,0,a+Pb(p)+o)},Eb=function(){var t=1,r=0;return{p:function(s){for(var a=t,o=r,l=s.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)o+=a+=s[d];a=(a&65535)+15*(a>>16),o=(o&65535)+15*(o>>16)}t=a,r=o},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},nS=function(t,r,s,a,o){if(!o&&(o={l:1},r.dictionary)){var l=r.dictionary.subarray(-32768),d=new yi(l.length+t.length);d.set(l),d.set(t,l.length),t=d,o.w=l.length}return sS(t,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,s,a,o)},Db=function(t,r,s){for(;s;++r)t[r]=s,s>>>=8},aS=function(t,r){var s=r.level,a=s==0?0:s<6?1:s==9?3:2;if(t[0]=120,t[1]=a<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var o=Eb();o.p(r.dictionary),Db(t,2,o.d())}};function f0(t,r){r||(r={});var s=Eb();s.p(t);var a=nS(t,r,r.dictionary?6:2,4);return aS(a,r),Db(a,a.length-4,s.d()),a}var iS=typeof TextDecoder<"u"&&new TextDecoder,oS=0;try{iS.decode(Lb,{stream:!0}),oS=1}catch{}function lS(t){if(Array.isArray(t))return t}function cS(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var a,o,l,d,u=[],h=!0,m=!1;try{if(l=(s=s.call(t)).next,r!==0)for(;!(h=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);h=!0);}catch(p){m=!0,o=p}finally{try{if(!h&&s.return!=null&&(d=s.return(),Object(d)!==d))return}finally{if(m)throw o}}return u}}function Ny(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,a=Array(r);s<r;s++)a[s]=t[s];return a}function dS(t,r){if(t){if(typeof t=="string")return Ny(t,r);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ny(t,r):void 0}}function uS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jy(t,r){return lS(t)||cS(t,r)||dS(t,r)||uS()}function Sy(t,r="utf8"){return new TextDecoder(r).decode(t)}const hS=new TextEncoder;function fS(t){return hS.encode(t)}const mS=1024*8,pS=(()=>{const t=new Uint8Array(4),r=new Uint32Array(t.buffer);return!((r[0]=1)&t[0])})(),yp={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Q0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=mS,s={}){let a=!1;typeof r=="number"?r=new ArrayBuffer(r):(a=!0,this.lastWrittenByte=r.byteLength);const o=s.offset?s.offset>>>0:0,l=r.byteLength-o;let d=o;(ArrayBuffer.isView(r)||r instanceof Q0)&&(r.byteLength!==r.buffer.byteLength&&(d=r.byteOffset+o),r=r.buffer),a?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=r,this.length=l,this.byteLength=l,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,l),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const a=(this.offset+r)*2,o=new Uint8Array(a);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,s){const a=yp[s].BYTES_PER_ELEMENT*r,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+a);if(this.littleEndian===pS&&s!=="uint8"&&s!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+a));u.reverse();const h=new yp[s](u.buffer);return this.offset+=a,h.reverse(),h}const d=new yp[s](l);return this.offset+=a,d}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let s="";for(let a=0;a<r;a++)s+=this.readChar();return s}readUtf8(r=1){return Sy(this.readBytes(r))}decodeText(r=1,s="utf8"){return Sy(this.readBytes(r),s)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let s=0;s<r.length;s++)this._data.setUint8(this.offset++,r[s]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let s=0;s<r.length;s++)this.writeUint8(r.charCodeAt(s));return this}writeUtf8(r){return this.writeBytes(fS(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Md(t){let r=t.length;for(;--r>=0;)t[r]=0}const gS=3,xS=258,Ib=29,yS=256,bS=yS+1+Ib,Fb=30,vS=512,wS=new Array((bS+2)*2);Md(wS);const NS=new Array(Fb*2);Md(NS);const jS=new Array(vS);Md(jS);const SS=new Array(xS-gS+1);Md(SS);const kS=new Array(Ib);Md(kS);const AS=new Array(Fb);Md(AS);const CS=(t,r,s,a)=>{let o=t&65535|0,l=t>>>16&65535|0,d=0;for(;s!==0;){d=s>2e3?2e3:s,s-=d;do o=o+r[a++]|0,l=l+o|0;while(--d);o%=65521,l%=65521}return o|l<<16|0};var m0=CS;const PS=()=>{let t,r=[];for(var s=0;s<256;s++){t=s;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;r[s]=t}return r},_S=new Uint32Array(PS()),LS=(t,r,s,a)=>{const o=_S,l=a+s;t^=-1;for(let d=a;d<l;d++)t=t>>>8^o[(t^r[d])&255];return t^-1};var Ui=LS,p0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tb={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ES=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var DS=function(t){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const s=r.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const a in s)ES(s,a)&&(t[a]=s[a])}}return t},IS=t=>{let r=0;for(let a=0,o=t.length;a<o;a++)r+=t[a].length;const s=new Uint8Array(r);for(let a=0,o=0,l=t.length;a<l;a++){let d=t[a];s.set(d,o),o+=d.length}return s},Ob={assign:DS,flattenChunks:IS};let Rb=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rb=!1}const $u=new Uint8Array(256);for(let t=0;t<256;t++)$u[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;$u[254]=$u[254]=1;var FS=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let r,s,a,o,l,d=t.length,u=0;for(o=0;o<d;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),o++)),u+=s<128?1:s<2048?2:s<65536?3:4;for(r=new Uint8Array(u),l=0,o=0;l<u;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),o++)),s<128?r[l++]=s:s<2048?(r[l++]=192|s>>>6,r[l++]=128|s&63):s<65536?(r[l++]=224|s>>>12,r[l++]=128|s>>>6&63,r[l++]=128|s&63):(r[l++]=240|s>>>18,r[l++]=128|s>>>12&63,r[l++]=128|s>>>6&63,r[l++]=128|s&63);return r};const TS=(t,r)=>{if(r<65534&&t.subarray&&Rb)return String.fromCharCode.apply(null,t.length===r?t:t.subarray(0,r));let s="";for(let a=0;a<r;a++)s+=String.fromCharCode(t[a]);return s};var OS=(t,r)=>{const s=r||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,r));let a,o;const l=new Array(s*2);for(o=0,a=0;a<s;){let d=t[a++];if(d<128){l[o++]=d;continue}let u=$u[d];if(u>4){l[o++]=65533,a+=u-1;continue}for(d&=u===2?31:u===3?15:7;u>1&&a<s;)d=d<<6|t[a++]&63,u--;if(u>1){l[o++]=65533;continue}d<65536?l[o++]=d:(d-=65536,l[o++]=55296|d>>10&1023,l[o++]=56320|d&1023)}return TS(l,o)},RS=(t,r)=>{r=r||t.length,r>t.length&&(r=t.length);let s=r-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?r:s+$u[t[s]]>r?s:r},g0={string2buf:FS,buf2string:OS,utf8border:RS};function MS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BS=MS;const zh=16209,US=16191;var qS=function(r,s){let a,o,l,d,u,h,m,p,v,N,y,A,C,S,L,E,P,F,O,se,X,K,Y,ie;const I=r.state;a=r.next_in,Y=r.input,o=a+(r.avail_in-5),l=r.next_out,ie=r.output,d=l-(s-r.avail_out),u=l+(r.avail_out-257),h=I.dmax,m=I.wsize,p=I.whave,v=I.wnext,N=I.window,y=I.hold,A=I.bits,C=I.lencode,S=I.distcode,L=(1<<I.lenbits)-1,E=(1<<I.distbits)-1;e:do{A<15&&(y+=Y[a++]<<A,A+=8,y+=Y[a++]<<A,A+=8),P=C[y&L];t:for(;;){if(F=P>>>24,y>>>=F,A-=F,F=P>>>16&255,F===0)ie[l++]=P&65535;else if(F&16){O=P&65535,F&=15,F&&(A<F&&(y+=Y[a++]<<A,A+=8),O+=y&(1<<F)-1,y>>>=F,A-=F),A<15&&(y+=Y[a++]<<A,A+=8,y+=Y[a++]<<A,A+=8),P=S[y&E];r:for(;;){if(F=P>>>24,y>>>=F,A-=F,F=P>>>16&255,F&16){if(se=P&65535,F&=15,A<F&&(y+=Y[a++]<<A,A+=8,A<F&&(y+=Y[a++]<<A,A+=8)),se+=y&(1<<F)-1,se>h){r.msg="invalid distance too far back",I.mode=zh;break e}if(y>>>=F,A-=F,F=l-d,se>F){if(F=se-F,F>p&&I.sane){r.msg="invalid distance too far back",I.mode=zh;break e}if(X=0,K=N,v===0){if(X+=m-F,F<O){O-=F;do ie[l++]=N[X++];while(--F);X=l-se,K=ie}}else if(v<F){if(X+=m+v-F,F-=v,F<O){O-=F;do ie[l++]=N[X++];while(--F);if(X=0,v<O){F=v,O-=F;do ie[l++]=N[X++];while(--F);X=l-se,K=ie}}}else if(X+=v-F,F<O){O-=F;do ie[l++]=N[X++];while(--F);X=l-se,K=ie}for(;O>2;)ie[l++]=K[X++],ie[l++]=K[X++],ie[l++]=K[X++],O-=3;O&&(ie[l++]=K[X++],O>1&&(ie[l++]=K[X++]))}else{X=l-se;do ie[l++]=ie[X++],ie[l++]=ie[X++],ie[l++]=ie[X++],O-=3;while(O>2);O&&(ie[l++]=ie[X++],O>1&&(ie[l++]=ie[X++]))}}else if((F&64)===0){P=S[(P&65535)+(y&(1<<F)-1)];continue r}else{r.msg="invalid distance code",I.mode=zh;break e}break}}else if((F&64)===0){P=C[(P&65535)+(y&(1<<F)-1)];continue t}else if(F&32){I.mode=US;break e}else{r.msg="invalid literal/length code",I.mode=zh;break e}break}}while(a<o&&l<u);O=A>>3,a-=O,A-=O<<3,y&=(1<<A)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<u?257+(u-l):257-(l-u),I.hold=y,I.bits=A};const md=15,ky=852,Ay=592,Cy=0,bp=1,Py=2,zS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$S=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),VS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),HS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WS=(t,r,s,a,o,l,d,u)=>{const h=u.bits;let m=0,p=0,v=0,N=0,y=0,A=0,C=0,S=0,L=0,E=0,P,F,O,se,X,K=null,Y;const ie=new Uint16Array(md+1),I=new Uint16Array(md+1);let q=null,U,J,be;for(m=0;m<=md;m++)ie[m]=0;for(p=0;p<a;p++)ie[r[s+p]]++;for(y=h,N=md;N>=1&&ie[N]===0;N--);if(y>N&&(y=N),N===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(v=1;v<N&&ie[v]===0;v++);for(y<v&&(y=v),S=1,m=1;m<=md;m++)if(S<<=1,S-=ie[m],S<0)return-1;if(S>0&&(t===Cy||N!==1))return-1;for(I[1]=0,m=1;m<md;m++)I[m+1]=I[m]+ie[m];for(p=0;p<a;p++)r[s+p]!==0&&(d[I[r[s+p]]++]=p);if(t===Cy?(K=q=d,Y=20):t===bp?(K=zS,q=$S,Y=257):(K=VS,q=HS,Y=0),E=0,p=0,m=v,X=l,A=y,C=0,O=-1,L=1<<y,se=L-1,t===bp&&L>ky||t===Py&&L>Ay)return 1;for(;;){U=m-C,d[p]+1<Y?(J=0,be=d[p]):d[p]>=Y?(J=q[d[p]-Y],be=K[d[p]-Y]):(J=96,be=0),P=1<<m-C,F=1<<A,v=F;do F-=P,o[X+(E>>C)+F]=U<<24|J<<16|be|0;while(F!==0);for(P=1<<m-1;E&P;)P>>=1;if(P!==0?(E&=P-1,E+=P):E=0,p++,--ie[m]===0){if(m===N)break;m=r[s+d[p]]}if(m>y&&(E&se)!==O){for(C===0&&(C=y),X+=v,A=m-C,S=1<<A;A+C<N&&(S-=ie[A+C],!(S<=0));)A++,S<<=1;if(L+=1<<A,t===bp&&L>ky||t===Py&&L>Ay)return 1;O=E&se,o[O]=y<<24|A<<16|X-l|0}}return E!==0&&(o[X+E]=m-C<<24|64<<16|0),u.bits=y,0};var Eu=WS;const GS=0,Mb=1,Bb=2,{Z_FINISH:_y,Z_BLOCK:KS,Z_TREES:$h,Z_OK:Nc,Z_STREAM_END:YS,Z_NEED_DICT:JS,Z_STREAM_ERROR:Va,Z_DATA_ERROR:Ub,Z_MEM_ERROR:qb,Z_BUF_ERROR:QS,Z_DEFLATED:Ly}=Tb,am=16180,Ey=16181,Dy=16182,Iy=16183,Fy=16184,Ty=16185,Oy=16186,Ry=16187,My=16188,By=16189,Ff=16190,Lo=16191,vp=16192,Uy=16193,wp=16194,qy=16195,zy=16196,$y=16197,Vy=16198,Vh=16199,Hh=16200,Hy=16201,Wy=16202,Gy=16203,Ky=16204,Yy=16205,Np=16206,Jy=16207,Qy=16208,Gr=16209,zb=16210,$b=16211,XS=852,ZS=592,ek=15,tk=ek,Xy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function rk(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ac=t=>{if(!t)return 1;const r=t.state;return!r||r.strm!==t||r.mode<am||r.mode>$b?1:0},Vb=t=>{if(Ac(t))return Va;const r=t.state;return t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=r.wrap&1),r.mode=am,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(XS),r.distcode=r.distdyn=new Int32Array(ZS),r.sane=1,r.back=-1,Nc},Hb=t=>{if(Ac(t))return Va;const r=t.state;return r.wsize=0,r.whave=0,r.wnext=0,Vb(t)},Wb=(t,r)=>{let s;if(Ac(t))return Va;const a=t.state;return r<0?(s=0,r=-r):(s=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?Va:(a.window!==null&&a.wbits!==r&&(a.window=null),a.wrap=s,a.wbits=r,Hb(t))},Gb=(t,r)=>{if(!t)return Va;const s=new rk;t.state=s,s.strm=t,s.window=null,s.mode=am;const a=Wb(t,r);return a!==Nc&&(t.state=null),a},sk=t=>Gb(t,tk);let Zy=!0,jp,Sp;const nk=t=>{if(Zy){jp=new Int32Array(512),Sp=new Int32Array(32);let r=0;for(;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(Eu(Mb,t.lens,0,288,jp,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;Eu(Bb,t.lens,0,32,Sp,0,t.work,{bits:5}),Zy=!1}t.lencode=jp,t.lenbits=9,t.distcode=Sp,t.distbits=5},Kb=(t,r,s,a)=>{let o;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),a>=l.wsize?(l.window.set(r.subarray(s-l.wsize,s),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>a&&(o=a),l.window.set(r.subarray(s-a,s-a+o),l.wnext),a-=o,a?(l.window.set(r.subarray(s-a,s),0),l.wnext=a,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},ak=(t,r)=>{let s,a,o,l,d,u,h,m,p,v,N,y,A,C,S=0,L,E,P,F,O,se,X,K;const Y=new Uint8Array(4);let ie,I;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ac(t)||!t.output||!t.input&&t.avail_in!==0)return Va;s=t.state,s.mode===Lo&&(s.mode=vp),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,u=t.avail_in,m=s.hold,p=s.bits,v=u,N=h,K=Nc;e:for(;;)switch(s.mode){case am:if(s.wrap===0){s.mode=vp;break}for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&2&&m===35615){s.wbits===0&&(s.wbits=15),s.check=0,Y[0]=m&255,Y[1]=m>>>8&255,s.check=Ui(s.check,Y,2,0),m=0,p=0,s.mode=Ey;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((m&255)<<8)+(m>>8))%31){t.msg="incorrect header check",s.mode=Gr;break}if((m&15)!==Ly){t.msg="unknown compression method",s.mode=Gr;break}if(m>>>=4,p-=4,X=(m&15)+8,s.wbits===0&&(s.wbits=X),X>15||X>s.wbits){t.msg="invalid window size",s.mode=Gr;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=m&512?By:Lo,m=0,p=0;break;case Ey:for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.flags=m,(s.flags&255)!==Ly){t.msg="unknown compression method",s.mode=Gr;break}if(s.flags&57344){t.msg="unknown header flags set",s.mode=Gr;break}s.head&&(s.head.text=m>>8&1),s.flags&512&&s.wrap&4&&(Y[0]=m&255,Y[1]=m>>>8&255,s.check=Ui(s.check,Y,2,0)),m=0,p=0,s.mode=Dy;case Dy:for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.head&&(s.head.time=m),s.flags&512&&s.wrap&4&&(Y[0]=m&255,Y[1]=m>>>8&255,Y[2]=m>>>16&255,Y[3]=m>>>24&255,s.check=Ui(s.check,Y,4,0)),m=0,p=0,s.mode=Iy;case Iy:for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.head&&(s.head.xflags=m&255,s.head.os=m>>8),s.flags&512&&s.wrap&4&&(Y[0]=m&255,Y[1]=m>>>8&255,s.check=Ui(s.check,Y,2,0)),m=0,p=0,s.mode=Fy;case Fy:if(s.flags&1024){for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.length=m,s.head&&(s.head.extra_len=m),s.flags&512&&s.wrap&4&&(Y[0]=m&255,Y[1]=m>>>8&255,s.check=Ui(s.check,Y,2,0)),m=0,p=0}else s.head&&(s.head.extra=null);s.mode=Ty;case Ty:if(s.flags&1024&&(y=s.length,y>u&&(y=u),y&&(s.head&&(X=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(a.subarray(l,l+y),X)),s.flags&512&&s.wrap&4&&(s.check=Ui(s.check,a,y,l)),u-=y,l+=y,s.length-=y),s.length))break e;s.length=0,s.mode=Oy;case Oy:if(s.flags&2048){if(u===0)break e;y=0;do X=a[l+y++],s.head&&X&&s.length<65536&&(s.head.name+=String.fromCharCode(X));while(X&&y<u);if(s.flags&512&&s.wrap&4&&(s.check=Ui(s.check,a,y,l)),u-=y,l+=y,X)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=Ry;case Ry:if(s.flags&4096){if(u===0)break e;y=0;do X=a[l+y++],s.head&&X&&s.length<65536&&(s.head.comment+=String.fromCharCode(X));while(X&&y<u);if(s.flags&512&&s.wrap&4&&(s.check=Ui(s.check,a,y,l)),u-=y,l+=y,X)break e}else s.head&&(s.head.comment=null);s.mode=My;case My:if(s.flags&512){for(;p<16;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&4&&m!==(s.check&65535)){t.msg="header crc mismatch",s.mode=Gr;break}m=0,p=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=Lo;break;case By:for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}t.adler=s.check=Xy(m),m=0,p=0,s.mode=Ff;case Ff:if(s.havedict===0)return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,JS;t.adler=s.check=1,s.mode=Lo;case Lo:if(r===KS||r===$h)break e;case vp:if(s.last){m>>>=p&7,p-=p&7,s.mode=Np;break}for(;p<3;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}switch(s.last=m&1,m>>>=1,p-=1,m&3){case 0:s.mode=Uy;break;case 1:if(nk(s),s.mode=Vh,r===$h){m>>>=2,p-=2;break e}break;case 2:s.mode=zy;break;case 3:t.msg="invalid block type",s.mode=Gr}m>>>=2,p-=2;break;case Uy:for(m>>>=p&7,p-=p&7;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if((m&65535)!==(m>>>16^65535)){t.msg="invalid stored block lengths",s.mode=Gr;break}if(s.length=m&65535,m=0,p=0,s.mode=wp,r===$h)break e;case wp:s.mode=qy;case qy:if(y=s.length,y){if(y>u&&(y=u),y>h&&(y=h),y===0)break e;o.set(a.subarray(l,l+y),d),u-=y,l+=y,h-=y,d+=y,s.length-=y;break}s.mode=Lo;break;case zy:for(;p<14;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.nlen=(m&31)+257,m>>>=5,p-=5,s.ndist=(m&31)+1,m>>>=5,p-=5,s.ncode=(m&15)+4,m>>>=4,p-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=Gr;break}s.have=0,s.mode=$y;case $y:for(;s.have<s.ncode;){for(;p<3;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.lens[q[s.have++]]=m&7,m>>>=3,p-=3}for(;s.have<19;)s.lens[q[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,ie={bits:s.lenbits},K=Eu(GS,s.lens,0,19,s.lencode,0,s.work,ie),s.lenbits=ie.bits,K){t.msg="invalid code lengths set",s.mode=Gr;break}s.have=0,s.mode=Vy;case Vy:for(;s.have<s.nlen+s.ndist;){for(;S=s.lencode[m&(1<<s.lenbits)-1],L=S>>>24,E=S>>>16&255,P=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(P<16)m>>>=L,p-=L,s.lens[s.have++]=P;else{if(P===16){for(I=L+2;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(m>>>=L,p-=L,s.have===0){t.msg="invalid bit length repeat",s.mode=Gr;break}X=s.lens[s.have-1],y=3+(m&3),m>>>=2,p-=2}else if(P===17){for(I=L+3;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=L,p-=L,X=0,y=3+(m&7),m>>>=3,p-=3}else{for(I=L+7;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=L,p-=L,X=0,y=11+(m&127),m>>>=7,p-=7}if(s.have+y>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=Gr;break}for(;y--;)s.lens[s.have++]=X}}if(s.mode===Gr)break;if(s.lens[256]===0){t.msg="invalid code -- missing end-of-block",s.mode=Gr;break}if(s.lenbits=9,ie={bits:s.lenbits},K=Eu(Mb,s.lens,0,s.nlen,s.lencode,0,s.work,ie),s.lenbits=ie.bits,K){t.msg="invalid literal/lengths set",s.mode=Gr;break}if(s.distbits=6,s.distcode=s.distdyn,ie={bits:s.distbits},K=Eu(Bb,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,ie),s.distbits=ie.bits,K){t.msg="invalid distances set",s.mode=Gr;break}if(s.mode=Vh,r===$h)break e;case Vh:s.mode=Hh;case Hh:if(u>=6&&h>=258){t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,qS(t,N),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,u=t.avail_in,m=s.hold,p=s.bits,s.mode===Lo&&(s.back=-1);break}for(s.back=0;S=s.lencode[m&(1<<s.lenbits)-1],L=S>>>24,E=S>>>16&255,P=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(E&&(E&240)===0){for(F=L,O=E,se=P;S=s.lencode[se+((m&(1<<F+O)-1)>>F)],L=S>>>24,E=S>>>16&255,P=S&65535,!(F+L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=F,p-=F,s.back+=F}if(m>>>=L,p-=L,s.back+=L,s.length=P,E===0){s.mode=Yy;break}if(E&32){s.back=-1,s.mode=Lo;break}if(E&64){t.msg="invalid literal/length code",s.mode=Gr;break}s.extra=E&15,s.mode=Hy;case Hy:if(s.extra){for(I=s.extra;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.length+=m&(1<<s.extra)-1,m>>>=s.extra,p-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=Wy;case Wy:for(;S=s.distcode[m&(1<<s.distbits)-1],L=S>>>24,E=S>>>16&255,P=S&65535,!(L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if((E&240)===0){for(F=L,O=E,se=P;S=s.distcode[se+((m&(1<<F+O)-1)>>F)],L=S>>>24,E=S>>>16&255,P=S&65535,!(F+L<=p);){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}m>>>=F,p-=F,s.back+=F}if(m>>>=L,p-=L,s.back+=L,E&64){t.msg="invalid distance code",s.mode=Gr;break}s.offset=P,s.extra=E&15,s.mode=Gy;case Gy:if(s.extra){for(I=s.extra;p<I;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}s.offset+=m&(1<<s.extra)-1,m>>>=s.extra,p-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=Gr;break}s.mode=Ky;case Ky:if(h===0)break e;if(y=N-h,s.offset>y){if(y=s.offset-y,y>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=Gr;break}y>s.wnext?(y-=s.wnext,A=s.wsize-y):A=s.wnext-y,y>s.length&&(y=s.length),C=s.window}else C=o,A=d-s.offset,y=s.length;y>h&&(y=h),h-=y,s.length-=y;do o[d++]=C[A++];while(--y);s.length===0&&(s.mode=Hh);break;case Yy:if(h===0)break e;o[d++]=s.length,h--,s.mode=Hh;break;case Np:if(s.wrap){for(;p<32;){if(u===0)break e;u--,m|=a[l++]<<p,p+=8}if(N-=h,t.total_out+=N,s.total+=N,s.wrap&4&&N&&(t.adler=s.check=s.flags?Ui(s.check,o,N,d-N):m0(s.check,o,N,d-N)),N=h,s.wrap&4&&(s.flags?m:Xy(m))!==s.check){t.msg="incorrect data check",s.mode=Gr;break}m=0,p=0}s.mode=Jy;case Jy:if(s.wrap&&s.flags){for(;p<32;){if(u===0)break e;u--,m+=a[l++]<<p,p+=8}if(s.wrap&4&&m!==(s.total&4294967295)){t.msg="incorrect length check",s.mode=Gr;break}m=0,p=0}s.mode=Qy;case Qy:K=YS;break e;case Gr:K=Ub;break e;case zb:return qb;case $b:default:return Va}return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=u,s.hold=m,s.bits=p,(s.wsize||N!==t.avail_out&&s.mode<Gr&&(s.mode<Np||r!==_y))&&Kb(t,t.output,t.next_out,N-t.avail_out),v-=t.avail_in,N-=t.avail_out,t.total_in+=v,t.total_out+=N,s.total+=N,s.wrap&4&&N&&(t.adler=s.check=s.flags?Ui(s.check,o,N,t.next_out-N):m0(s.check,o,N,t.next_out-N)),t.data_type=s.bits+(s.last?64:0)+(s.mode===Lo?128:0)+(s.mode===Vh||s.mode===wp?256:0),(v===0&&N===0||r===_y)&&K===Nc&&(K=QS),K},ik=t=>{if(Ac(t))return Va;let r=t.state;return r.window&&(r.window=null),t.state=null,Nc},ok=(t,r)=>{if(Ac(t))return Va;const s=t.state;return(s.wrap&2)===0?Va:(s.head=r,r.done=!1,Nc)},lk=(t,r)=>{const s=r.length;let a,o,l;return Ac(t)||(a=t.state,a.wrap!==0&&a.mode!==Ff)?Va:a.mode===Ff&&(o=1,o=m0(o,r,s,0),o!==a.check)?Ub:(l=Kb(t,r,s,s),l?(a.mode=zb,qb):(a.havedict=1,Nc))};var ck=Hb,dk=Wb,uk=Vb,hk=sk,fk=Gb,mk=ak,pk=ik,gk=ok,xk=lk,yk="pako inflate (from Nodeca project)",Eo={inflateReset:ck,inflateReset2:dk,inflateResetKeep:uk,inflateInit:hk,inflateInit2:fk,inflate:mk,inflateEnd:pk,inflateGetHeader:gk,inflateSetDictionary:xk,inflateInfo:yk};function bk(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vk=bk;const Yb=Object.prototype.toString,{Z_NO_FLUSH:wk,Z_FINISH:Nk,Z_OK:Vu,Z_STREAM_END:kp,Z_NEED_DICT:Ap,Z_STREAM_ERROR:jk,Z_DATA_ERROR:e1,Z_MEM_ERROR:Sk}=Tb;function Xu(t){this.options=Ob.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(t&&t.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BS,this.strm.avail_out=0;let s=Eo.inflateInit2(this.strm,r.windowBits);if(s!==Vu)throw new Error(p0[s]);if(this.header=new vk,Eo.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=g0.string2buf(r.dictionary):Yb.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(s=Eo.inflateSetDictionary(this.strm,r.dictionary),s!==Vu)))throw new Error(p0[s])}Xu.prototype.push=function(t,r){const s=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let l,d,u;if(this.ended)return!1;for(r===~~r?d=r:d=r===!0?Nk:wk,Yb.call(t)==="[object ArrayBuffer]"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),l=Eo.inflate(s,d),l===Ap&&o&&(l=Eo.inflateSetDictionary(s,o),l===Vu?l=Eo.inflate(s,d):l===e1&&(l=Ap));s.avail_in>0&&l===kp&&s.state.wrap>0&&t[s.next_in]!==0;)Eo.inflateReset(s),l=Eo.inflate(s,d);switch(l){case jk:case e1:case Ap:case Sk:return this.onEnd(l),this.ended=!0,!1}if(u=s.avail_out,s.next_out&&(s.avail_out===0||l===kp))if(this.options.to==="string"){let h=g0.utf8border(s.output,s.next_out),m=s.next_out-h,p=g0.buf2string(s.output,h);s.next_out=m,s.avail_out=a-m,m&&s.output.set(s.output.subarray(h,h+m),0),this.onData(p)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(l===Vu&&u===0)){if(l===kp)return l=Eo.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Xu.prototype.onData=function(t){this.chunks.push(t)};Xu.prototype.onEnd=function(t){t===Vu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ob.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function kk(t,r){const s=new Xu(r);if(s.push(t),s.err)throw s.msg||p0[s.err];return s.result}var Ak=Xu,Ck=kk,Pk={Inflate:Ak,inflate:Ck};const{Inflate:_k,inflate:Lk}=Pk;var t1=_k,Ek=Lk;const Jb=[];for(let t=0;t<256;t++){let r=t;for(let s=0;s<8;s++)r&1?r=3988292384^r>>>1:r=r>>>1;Jb[t]=r}const r1=4294967295;function Dk(t,r,s){let a=t;for(let o=0;o<s;o++)a=Jb[(a^r[o])&255]^a>>>8;return a}function Ik(t,r){return(Dk(r1,t,r)^r1)>>>0}function s1(t,r,s){const a=t.readUint32(),o=Ik(new Uint8Array(t.buffer,t.byteOffset+t.offset-r-4,r),r);if(o!==a)throw new Error(`CRC mismatch for chunk ${s}. Expected ${a}, found ${o}`)}function Qb(t,r,s){for(let a=0;a<s;a++)r[a]=t[a]}function Xb(t,r,s,a){let o=0;for(;o<a;o++)r[o]=t[o];for(;o<s;o++)r[o]=t[o]+r[o-a]&255}function Zb(t,r,s,a){let o=0;if(s.length===0)for(;o<a;o++)r[o]=t[o];else for(;o<a;o++)r[o]=t[o]+s[o]&255}function ev(t,r,s,a,o){let l=0;if(s.length===0){for(;l<o;l++)r[l]=t[l];for(;l<a;l++)r[l]=t[l]+(r[l-o]>>1)&255}else{for(;l<o;l++)r[l]=t[l]+(s[l]>>1)&255;for(;l<a;l++)r[l]=t[l]+(r[l-o]+s[l]>>1)&255}}function tv(t,r,s,a,o){let l=0;if(s.length===0){for(;l<o;l++)r[l]=t[l];for(;l<a;l++)r[l]=t[l]+r[l-o]&255}else{for(;l<o;l++)r[l]=t[l]+s[l]&255;for(;l<a;l++)r[l]=t[l]+Fk(r[l-o],s[l],s[l-o])&255}}function Fk(t,r,s){const a=t+r-s,o=Math.abs(a-t),l=Math.abs(a-r),d=Math.abs(a-s);return o<=l&&o<=d?t:l<=d?r:s}function Tk(t,r,s,a,o,l){switch(t){case 0:Qb(r,s,o);break;case 1:Xb(r,s,o,l);break;case 2:Zb(r,s,a,o);break;case 3:ev(r,s,a,o,l);break;case 4:tv(r,s,a,o,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Ok=new Uint16Array([255]),Rk=new Uint8Array(Ok.buffer),Mk=Rk[0]===255;function Bk(t){const{data:r,width:s,height:a,channels:o,depth:l}=t,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(l/8)*o,h=new Uint8Array(a*s*u);let m=0;for(let p=0;p<7;p++){const v=d[p],N=Math.ceil((s-v.x)/v.xStep),y=Math.ceil((a-v.y)/v.yStep);if(N<=0||y<=0)continue;const A=N*u,C=new Uint8Array(A);for(let S=0;S<y;S++){const L=r[m++],E=r.subarray(m,m+A);m+=A;const P=new Uint8Array(A);Tk(L,E,P,C,A,u),C.set(P);for(let F=0;F<N;F++){const O=v.x+F*v.xStep,se=v.y+S*v.yStep;if(!(O>=s||se>=a))for(let X=0;X<u;X++)h[(se*s+O)*u+X]=P[F*u+X]}}}if(l===16){const p=new Uint16Array(h.buffer);if(Mk)for(let v=0;v<p.length;v++)p[v]=Uk(p[v]);return p}else return h}function Uk(t){return(t&255)<<8|t>>8&255}const qk=new Uint16Array([255]),zk=new Uint8Array(qk.buffer),$k=zk[0]===255,Vk=new Uint8Array(0);function n1(t){const{data:r,width:s,height:a,channels:o,depth:l}=t,d=Math.ceil(l/8)*o,u=Math.ceil(l/8*o*s),h=new Uint8Array(a*u);let m=Vk,p=0,v,N;for(let y=0;y<a;y++){switch(v=r.subarray(p+1,p+1+u),N=h.subarray(y*u,(y+1)*u),r[p]){case 0:Qb(v,N,u);break;case 1:Xb(v,N,u,d);break;case 2:Zb(v,N,m,u);break;case 3:ev(v,N,m,u,d);break;case 4:tv(v,N,m,u,d);break;default:throw new Error(`Unsupported filter: ${r[p]}`)}m=N,p+=u+1}if(l===16){const y=new Uint16Array(h.buffer);if($k)for(let A=0;A<y.length;A++)y[A]=Hk(y[A]);return y}else return h}function Hk(t){return(t&255)<<8|t>>8&255}const ff=Uint8Array.of(137,80,78,71,13,10,26,10);function a1(t){if(!Wk(t.readBytes(ff.length)))throw new Error("wrong PNG signature")}function Wk(t){if(t.length<ff.length)return!1;for(let r=0;r<ff.length;r++)if(t[r]!==ff[r])return!1;return!0}const Gk="tEXt",Kk=0,rv=new TextDecoder("latin1");function Yk(t){if(Qk(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Jk=/^[\u0000-\u00FF]*$/;function Qk(t){if(!Jk.test(t))throw new Error("invalid latin1 text")}function Xk(t,r,s){const a=sv(r);t[a]=Zk(r,s-a.length-1)}function sv(t){for(t.mark();t.readByte()!==Kk;);const r=t.offset;t.reset();const s=rv.decode(t.readBytes(r-t.offset-1));return t.skip(1),Yk(s),s}function Zk(t,r){return rv.decode(t.readBytes(r))}const Na={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cp={UNKNOWN:-1,DEFLATE:0},i1={UNKNOWN:-1,ADAPTIVE:0},Pp={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Wh={NONE:0,BACKGROUND:1,PREVIOUS:2},_p={SOURCE:0,OVER:1};class e8 extends Q0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,s={}){super(r);const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new t1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cp.UNKNOWN,this._filterMethod=i1.UNKNOWN,this._interlaceMethod=Pp.UNKNOWN,this._colorType=Na.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(a1(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeChunk(r,s)}return this.decodeImage(),this._png}decodeApng(){for(a1(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(r,s)}return this.decodeApngImage(),this._apng}decodeChunk(r,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Gk:Xk(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?s1(this,r+4,s):this.skip(4)}decodeApngChunk(r,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,s),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?s1(this,r+4,s):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=t8(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case Na.GREYSCALE:a=1;break;case Na.TRUECOLOUR:a=3;break;case Na.INDEXED_COLOUR:a=1;break;case Na.GREYSCALE_ALPHA:a=2;break;case Na.TRUECOLOUR_ALPHA:a=4;break;case Na.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cp.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const s=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<s;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const s=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let s=r,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Na.GREYSCALE:case Na.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let s=0;s<r/2;s++)this._transparency[s]=this.readUint16();break}case Na.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let s=0;for(;s<r;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Na.UNKNOWN:case Na.GREYSCALE_ALPHA:case Na.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const s=sv(this),a=this.readUint8();if(a!==Cp.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(r-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:Ek(o)}}decodepHYs(){const r=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const s={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=n1({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const o=this._apng.frames.at(r-1);this.disposeFrame(a,o,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(r,s,a){switch(r.disposeOp){case Wh.NONE:break;case Wh.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const d=(o*r.width+l)*this._png.channels;for(let u=0;u<this._png.channels;u++)a.data[d+u]=0}break;case Wh.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,s){const a=1<<this._png.depth,o=(l,d)=>{const u=((l+s.yOffset)*this._png.width+s.xOffset+d)*this._png.channels,h=(l*s.width+d)*this._png.channels;return{index:u,frameIndex:h}};switch(s.blendOp){case _p.SOURCE:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let m=0;m<this._png.channels;m++)r.data[u+m]=s.data[h+m]}break;case _p.OVER:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:h}=o(l,d);for(let m=0;m<this._png.channels;m++){const p=s.data[h+this._png.channels-1]/a,v=m%(this._png.channels-1)===0?1:s.data[h+m],N=Math.floor(p*v+(1-p)*r.data[u+m]);r.data[u+m]+=N}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==i1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Pp.NO_INTERLACE)this._png.data=n1({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Pp.ADAM7)this._png.data=Bk({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,s=this._frames.at(-1);s?s.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Wh.NONE,blendOp:_p.SOURCE,data:r}),this._inflator=new t1,this._writingDataChunks=!1}}function t8(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var o1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(o1||(o1={}));function r8(t,r){return new e8(t,r).decode()}var Vt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Lp(){Vt.console&&typeof Vt.console.log=="function"&&Vt.console.log.apply(Vt.console,arguments)}var Ir={log:Lp,warn:function(t){Vt.console&&(typeof Vt.console.warn=="function"?Vt.console.warn.apply(Vt.console,arguments):Lp.call(null,arguments))},error:function(t){Vt.console&&(typeof Vt.console.error=="function"?Vt.console.error.apply(Vt.console,arguments):Lp(t))}};function Ep(t,r,s){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){lc(a.response,r,s)},a.onerror=function(){Ir.error("could not download file")},a.send()}function l1(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function Gh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var lc=Vt.saveAs||((typeof window>"u"?"undefined":Ar(window))!=="object"||window!==Vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,r,s){var a=Vt.URL||Vt.webkitURL,o=document.createElement("a");r=r||t.name||"download",o.download=r,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?l1(o.href)?Ep(t,r,s):Gh(o,o.target="_blank"):Gh(o)):(o.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){Gh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,s){if(r=r||t.name||"download",typeof t=="string")if(l1(t))Ep(t,r,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){Gh(a)})}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:Ar(l)!=="object"&&(Ir.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(t,s),r)}:function(t,r,s,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return Ep(t,r,s);var o=t.type==="application/octet-stream",l=/constructor/i.test(Vt.HTMLElement)||Vt.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l)&&(typeof FileReader>"u"?"undefined":Ar(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var p=u.result;p=d?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=p:location=p,a=null},u.readAsDataURL(t)}else{var h=Vt.URL||Vt.webkitURL,m=h.createObjectURL(t);a?a.location=m:location.href=m,a=null,setTimeout(function(){h.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nv(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<s.length;a++){var o=s[a].re,l=s[a].process,d=o.exec(t);d&&(r=l(d),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),m=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),m.length==1&&(m="0"+m),"#"+u+h+m}}var mf=Vt.atob.bind(Vt),c1=Vt.btoa.bind(Vt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dp(t,r){var s=t[0],a=t[1],o=t[2],l=t[3];s=Pn(s,a,o,l,r[0],7,-680876936),l=Pn(l,s,a,o,r[1],12,-389564586),o=Pn(o,l,s,a,r[2],17,606105819),a=Pn(a,o,l,s,r[3],22,-1044525330),s=Pn(s,a,o,l,r[4],7,-176418897),l=Pn(l,s,a,o,r[5],12,1200080426),o=Pn(o,l,s,a,r[6],17,-1473231341),a=Pn(a,o,l,s,r[7],22,-45705983),s=Pn(s,a,o,l,r[8],7,1770035416),l=Pn(l,s,a,o,r[9],12,-1958414417),o=Pn(o,l,s,a,r[10],17,-42063),a=Pn(a,o,l,s,r[11],22,-1990404162),s=Pn(s,a,o,l,r[12],7,1804603682),l=Pn(l,s,a,o,r[13],12,-40341101),o=Pn(o,l,s,a,r[14],17,-1502002290),s=_n(s,a=Pn(a,o,l,s,r[15],22,1236535329),o,l,r[1],5,-165796510),l=_n(l,s,a,o,r[6],9,-1069501632),o=_n(o,l,s,a,r[11],14,643717713),a=_n(a,o,l,s,r[0],20,-373897302),s=_n(s,a,o,l,r[5],5,-701558691),l=_n(l,s,a,o,r[10],9,38016083),o=_n(o,l,s,a,r[15],14,-660478335),a=_n(a,o,l,s,r[4],20,-405537848),s=_n(s,a,o,l,r[9],5,568446438),l=_n(l,s,a,o,r[14],9,-1019803690),o=_n(o,l,s,a,r[3],14,-187363961),a=_n(a,o,l,s,r[8],20,1163531501),s=_n(s,a,o,l,r[13],5,-1444681467),l=_n(l,s,a,o,r[2],9,-51403784),o=_n(o,l,s,a,r[7],14,1735328473),s=Ln(s,a=_n(a,o,l,s,r[12],20,-1926607734),o,l,r[5],4,-378558),l=Ln(l,s,a,o,r[8],11,-2022574463),o=Ln(o,l,s,a,r[11],16,1839030562),a=Ln(a,o,l,s,r[14],23,-35309556),s=Ln(s,a,o,l,r[1],4,-1530992060),l=Ln(l,s,a,o,r[4],11,1272893353),o=Ln(o,l,s,a,r[7],16,-155497632),a=Ln(a,o,l,s,r[10],23,-1094730640),s=Ln(s,a,o,l,r[13],4,681279174),l=Ln(l,s,a,o,r[0],11,-358537222),o=Ln(o,l,s,a,r[3],16,-722521979),a=Ln(a,o,l,s,r[6],23,76029189),s=Ln(s,a,o,l,r[9],4,-640364487),l=Ln(l,s,a,o,r[12],11,-421815835),o=Ln(o,l,s,a,r[15],16,530742520),s=En(s,a=Ln(a,o,l,s,r[2],23,-995338651),o,l,r[0],6,-198630844),l=En(l,s,a,o,r[7],10,1126891415),o=En(o,l,s,a,r[14],15,-1416354905),a=En(a,o,l,s,r[5],21,-57434055),s=En(s,a,o,l,r[12],6,1700485571),l=En(l,s,a,o,r[3],10,-1894986606),o=En(o,l,s,a,r[10],15,-1051523),a=En(a,o,l,s,r[1],21,-2054922799),s=En(s,a,o,l,r[8],6,1873313359),l=En(l,s,a,o,r[15],10,-30611744),o=En(o,l,s,a,r[6],15,-1560198380),a=En(a,o,l,s,r[13],21,1309151649),s=En(s,a,o,l,r[4],6,-145523070),l=En(l,s,a,o,r[11],10,-1120210379),o=En(o,l,s,a,r[2],15,718787259),a=En(a,o,l,s,r[9],21,-343485551),t[0]=jl(s,t[0]),t[1]=jl(a,t[1]),t[2]=jl(o,t[2]),t[3]=jl(l,t[3])}function im(t,r,s,a,o,l){return r=jl(jl(r,t),jl(a,l)),jl(r<<o|r>>>32-o,s)}function Pn(t,r,s,a,o,l,d){return im(r&s|~r&a,t,r,o,l,d)}function _n(t,r,s,a,o,l,d){return im(r&a|s&~a,t,r,o,l,d)}function Ln(t,r,s,a,o,l,d){return im(r^s^a,t,r,o,l,d)}function En(t,r,s,a,o,l,d){return im(s^(r|~a),t,r,o,l,d)}function av(t){var r,s=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)Dp(a,s8(t.substring(r-64,r)));t=t.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(Dp(a,o),r=0;r<16;r++)o[r]=0;return o[14]=8*s,Dp(a,o),a}function s8(t){var r,s=[];for(r=0;r<64;r+=4)s[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return s}var d1="0123456789abcdef".split("");function n8(t){for(var r="",s=0;s<4;s++)r+=d1[t>>8*s+4&15]+d1[t>>8*s&15];return r}function a8(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function x0(t){return av(t).map(a8).join("")}var i8=(function(t){for(var r=0;r<t.length;r++)t[r]=n8(t[r]);return t.join("")})(av("hello"))!="5d41402abc4b2a76b9719d911017c592";function jl(t,r){if(i8){var s=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(s>>16)<<16|65535&s}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function y0(t,r){var s,a,o,l;if(t!==s){for(var d=(o=t,l=1+(256/t.length|0),new Array(l+1).join(o)),u=[],h=0;h<256;h++)u[h]=h;var m=0;for(h=0;h<256;h++){var p=u[h];m=(m+p+d.charCodeAt(h))%256,u[h]=u[m],u[m]=p}s=t,a=u}else u=a;var v=r.length,N=0,y=0,A="";for(h=0;h<v;h++)y=(y+(p=u[N=(N+1)%256]))%256,u[N]=u[y],u[y]=p,d=u[(u[N]+u[y])%256],A+=String.fromCharCode(r.charCodeAt(h)^d);return A}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var u1={print:4,modify:8,copy:16,"annot-forms":32};function yd(t,r,s,a){this.v=1,this.r=2;var o=192;t.forEach(function(u){if(u1.perm!==void 0)throw new Error("Invalid permission: "+u);o+=u1[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(r+this.padding).substr(0,32),d=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^o)),this.encryptionKey=x0(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=y0(this.encryptionKey,this.padding)}function bd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",s=t.length,a=0;a<s;a++){var o=t.charCodeAt(a);r+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[a]}return r}function h1(t){if(Ar(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(s,a,o){if(o=o||!1,typeof s!="string"||typeof a!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(s)||(r[s]={});var l=Math.random().toString(35);return r[s][l]=[a,!!o],l},this.unsubscribe=function(s){for(var a in r)if(r[a][s])return delete r[a][s],Object.keys(r[a]).length===0&&delete r[a],!0;return!1},this.publish=function(s){if(r.hasOwnProperty(s)){var a=Array.prototype.slice.call(arguments,1),o=[];for(var l in r[s]){var d=r[s][l];try{d[0].apply(t,a)}catch(u){Vt.console&&Ir.error("jsPDF PubSub Error",u.message,u)}d[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Tf(t){if(!(this instanceof Tf))return new Tf(t);var r="opacity,stroke-opacity".split(",");for(var s in t)t.hasOwnProperty(s)&&r.indexOf(s)>=0&&(this[s]=t[s]);this.id="",this.objectNumber=-1}function iv(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function cc(t,r,s,a,o){if(!(this instanceof cc))return new cc(t,r,s,a,o);this.type=t==="axial"?2:3,this.coords=r,this.colors=s,iv.call(this,a,o)}function wd(t,r,s,a,o){if(!(this instanceof wd))return new wd(t,r,s,a,o);this.boundingBox=t,this.xStep=r,this.yStep=s,this.stream="",this.cloneIndex=0,iv.call(this,a,o)}function Dt(t){var r,s=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],o=arguments[2],l=arguments[3],d=[],u=1,h=16,m="S",p=null;Ar(t=t||{})==="object"&&(s=t.orientation,a=t.unit||a,o=t.format||o,l=t.compress||t.compressPdf||l,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),m=t.defaultPathOperation||"S"),d=t.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",s=(""+(s||"P")).toLowerCase();var v=t.putOnlyUsedFonts||!1,N={},y={internal:{},__private__:{}};y.__private__.PubSub=h1;var A="1.3",C=y.__private__.getPdfVersion=function(){return A};y.__private__.setPdfVersion=function(w){A=w};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return S};var L=y.__private__.getPageFormat=function(w){return S[w]};o=o||"a4";var E="compat",P="advanced",F=E;function O(){this.saveGraphicsState(),de(new ft(_t,0,0,-_t,0,Ks()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),m="n",F=P}function se(){this.restoreGraphicsState(),m="S",F=E}var X=y.__private__.combineFontStyleAndFontWeight=function(w,M){if(w=="bold"&&M=="normal"||w=="bold"&&M==400||w=="normal"&&M=="italic"||w=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(w=M==400||M==="normal"?w==="italic"?"italic":"normal":M!=700&&M!=="bold"||w!=="normal"?(M==700?"bold":M)+""+w:"bold"),w};y.advancedAPI=function(w){var M=F===E;return M&&O.call(this),typeof w!="function"||(w(this),M&&se.call(this)),this},y.compatAPI=function(w){var M=F===P;return M&&se.call(this),typeof w!="function"||(w(this),M&&O.call(this)),this},y.isAdvancedAPI=function(){return F===P};var K,Y=function(w){if(F!==P)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ie=y.roundToPrecision=y.__private__.roundToPrecision=function(w,M){var le=r||M;if(isNaN(w)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(le).replace(/0+$/,"")};K=y.hpf=y.__private__.hpf=typeof h=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(w,h)}:h==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(w,16)};var I=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return ie(w,2)},q=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return ie(w,3)},U=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return F===E?w*_t:F===P?w:void 0},J=function(w){return U((function(M){return F===E?Ks()-M:F===P?M:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(r=parseInt(w,10))};var be,ge="00000000000000000000000000000000",T=y.__private__.getFileId=function(){return ge},re=y.__private__.setFileId=function(w){return ge=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Qr=new yd(p.userPermissions,p.userPassword,p.ownerPassword,ge)),ge};y.setFileId=function(w){return re(w),this},y.getFileId=function(){return T()};var fe=y.__private__.convertDateToPDFDate=function(w){var M=w.getTimezoneOffset(),le=M<0?"+":"-",ye=Math.floor(Math.abs(M/60)),ke=Math.abs(M%60),Ve=[le,W(ye),"'",W(ke),"'"].join("");return["D:",w.getFullYear(),W(w.getMonth()+1),W(w.getDate()),W(w.getHours()),W(w.getMinutes()),W(w.getSeconds()),Ve].join("")},Se=y.__private__.convertPDFDateToDate=function(w){var M=parseInt(w.substr(2,4),10),le=parseInt(w.substr(6,2),10)-1,ye=parseInt(w.substr(8,2),10),ke=parseInt(w.substr(10,2),10),Ve=parseInt(w.substr(12,2),10),Ye=parseInt(w.substr(14,2),10);return new Date(M,le,ye,ke,Ve,Ye,0)},ee=y.__private__.setCreationDate=function(w){var M;if(w===void 0&&(w=new Date),w instanceof Date)M=fe(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=w}return be=M},D=y.__private__.getCreationDate=function(w){var M=be;return w==="jsDate"&&(M=Se(be)),M};y.setCreationDate=function(w){return ee(w),this},y.getCreationDate=function(w){return D(w)};var $,W=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},ne=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},H=0,Q=[],ue=[],xe=0,Ee=[],me=[],De=!1,Ze=ue;y.__private__.setCustomOutputDestination=function(w){De=!0,Ze=w};var Te=function(w){De||(Ze=w)};y.__private__.resetCustomOutputDestination=function(){De=!1,Ze=ue};var de=y.__private__.out=function(w){return w=w.toString(),xe+=w.length+1,Ze.push(w),Ze},Fe=y.__private__.write=function(w){return de(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},st=y.__private__.getArrayBuffer=function(w){for(var M=w.length,le=new ArrayBuffer(M),ye=new Uint8Array(le);M--;)ye[M]=w.charCodeAt(M);return le},dt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return dt};var Ke=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return Ke=F===P?w/_t:w,this};var ce,pe=y.__private__.getFontSize=y.getFontSize=function(){return F===E?Ke:Ke*_t},Ce=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return Ce=w,this},y.__private__.getR2L=y.getR2L=function(){return Ce};var $e,Ge=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))ce=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');ce=w}else ce=parseInt(w,10)};y.__private__.getZoomMode=function(){return ce};var Ue,Je=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');$e=w};y.__private__.getPageMode=function(){return $e};var jt=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ue=w};y.__private__.getLayoutMode=function(){return Ue},y.__private__.setDisplayMode=y.setDisplayMode=function(w,M,le){return Ge(w),jt(M),Je(le),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[w]},y.__private__.getDocumentProperties=function(){return ot},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var M in ot)ot.hasOwnProperty(M)&&w[M]&&(ot[M]=w[M]);return this},y.__private__.setDocumentProperty=function(w,M){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[w]=M};var lt,_t,ut,hr,zt,pt={},Tt={},nr=[],Et={},Gt={},Re={},it={},ct=null,ht=0,nt=[],at=new h1(y),Jt=t.hotfixes||[],ar={},It={},pr=[],ft=function w(M,le,ye,ke,Ve,Ye){if(!(this instanceof w))return new w(M,le,ye,ke,Ve,Ye);isNaN(M)&&(M=1),isNaN(le)&&(le=0),isNaN(ye)&&(ye=0),isNaN(ke)&&(ke=1),isNaN(Ve)&&(Ve=0),isNaN(Ye)&&(Ye=0),this._matrix=[M,le,ye,ke,Ve,Ye]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(w)},ft.prototype.multiply=function(w){var M=w.sx*this.sx+w.shy*this.shx,le=w.sx*this.shy+w.shy*this.sy,ye=w.shx*this.sx+w.sy*this.shx,ke=w.shx*this.shy+w.sy*this.sy,Ve=w.tx*this.sx+w.ty*this.shx+this.tx,Ye=w.tx*this.shy+w.ty*this.sy+this.ty;return new ft(M,le,ye,ke,Ve,Ye)},ft.prototype.decompose=function(){var w=this.sx,M=this.shy,le=this.shx,ye=this.sy,ke=this.tx,Ve=this.ty,Ye=Math.sqrt(w*w+M*M),bt=(w/=Ye)*le+(M/=Ye)*ye;le-=w*bt,ye-=M*bt;var wt=Math.sqrt(le*le+ye*ye);return bt/=wt,w*(ye/=wt)<M*(le/=wt)&&(w=-w,M=-M,bt=-bt,Ye=-Ye),{scale:new ft(Ye,0,0,wt,0,0),translate:new ft(1,0,0,1,ke,Ve),rotate:new ft(w,M,-M,w,0,0),skew:new ft(1,0,bt,1,0,0)}},ft.prototype.toString=function(w){return this.join(" ")},ft.prototype.inversed=function(){var w=this.sx,M=this.shy,le=this.shx,ye=this.sy,ke=this.tx,Ve=this.ty,Ye=1/(w*ye-M*le),bt=ye*Ye,wt=-M*Ye,Ot=-le*Ye,Ht=w*Ye;return new ft(bt,wt,Ot,Ht,-bt*ke-Ot*Ve,-wt*ke-Ht*Ve)},ft.prototype.applyToPoint=function(w){var M=w.x*this.sx+w.y*this.shx+this.tx,le=w.x*this.shy+w.y*this.sy+this.ty;return new La(M,le)},ft.prototype.applyToRectangle=function(w){var M=this.applyToPoint(w),le=this.applyToPoint(new La(w.x+w.w,w.y+w.h));return new co(M.x,M.y,le.x-M.x,le.y-M.y)},ft.prototype.clone=function(){var w=this.sx,M=this.shy,le=this.shx,ye=this.sy,ke=this.tx,Ve=this.ty;return new ft(w,M,le,ye,ke,Ve)},y.Matrix=ft;var wr=y.matrixMult=function(w,M){return M.multiply(w)},xs=new ft(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=xs;var Yr=function(w,M){if(!Gt[w]){var le=(M instanceof cc?"Sh":"P")+(Object.keys(Et).length+1).toString(10);M.id=le,Gt[w]=le,Et[le]=M,at.publish("addPattern",M)}};y.ShadingPattern=cc,y.TilingPattern=wd,y.addShadingPattern=function(w,M){return Y("addShadingPattern()"),Yr(w,M),this},y.beginTilingPattern=function(w){Y("beginTilingPattern()"),Gn(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,M){Y("endTilingPattern()"),M.stream=me[$].join(`
`),Yr(w,M),at.publish("endTilingPattern",M),pr.pop().restore()};var Jr,ir=y.__private__.newObject=function(){var w=Xt();return yr(w,!0),w},Xt=y.__private__.newObjectDeferred=function(){return H++,Q[H]=function(){return xe},H},yr=function(w,M){return M=typeof M=="boolean"&&M,Q[w]=xe,M&&de(w+" 0 obj"),w},is=y.__private__.newAdditionalObject=function(){var w={objId:Xt(),content:""};return Ee.push(w),w},Lr=Xt(),Ws=Xt(),sn=y.__private__.decodeColorString=function(w){var M=w.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var le=parseFloat(M[0]);M=[le,le,le,"r"]}for(var ye="#",ke=0;ke<3;ke++)ye+=("0"+Math.floor(255*parseFloat(M[ke])).toString(16)).slice(-2);return ye},zr=y.__private__.encodeColorString=function(w){var M;typeof w=="string"&&(w={ch1:w});var le=w.ch1,ye=w.ch2,ke=w.ch3,Ve=w.ch4,Ye=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var bt=new nv(le);if(bt.ok)le=bt.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var wt=parseInt(le.substr(1),16);le=wt>>16&255,ye=wt>>8&255,ke=255&wt}if(ye===void 0||Ve===void 0&&le===ye&&ye===ke)M=typeof le=="string"?le+" "+Ye[0]:w.precision===2?I(le/255)+" "+Ye[0]:q(le/255)+" "+Ye[0];else if(Ve===void 0||Ar(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return["1.","1.","1.",Ye[1]].join(" ");M=typeof le=="string"?[le,ye,ke,Ye[1]].join(" "):w.precision===2?[I(le/255),I(ye/255),I(ke/255),Ye[1]].join(" "):[q(le/255),q(ye/255),q(ke/255),Ye[1]].join(" ")}else M=typeof le=="string"?[le,ye,ke,Ve,Ye[2]].join(" "):w.precision===2?[I(le),I(ye),I(ke),I(Ve),Ye[2]].join(" "):[q(le),q(ye),q(ke),q(Ve),Ye[2]].join(" ");return M},ys=y.__private__.getFilters=function(){return d},In=y.__private__.putStream=function(w){var M=(w=w||{}).data||"",le=w.filters||ys(),ye=w.alreadyAppliedFilters||[],ke=w.addLength1||!1,Ve=M.length,Ye=w.objectId,bt=function(bs){return bs};if(p!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(bt=Qr.encryptor(Ye,0));var wt={};le===!0&&(le=["FlateEncode"]);var Ot=w.additionalKeyValues||[],Ht=(wt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(M,le):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(wt.data.length!==0&&(Ot.push({key:"Length",value:wt.data.length}),ke===!0&&Ot.push({key:"Length1",value:Ve})),Ht.length!=0)if(Ht.split("/").length-1==1)Ot.push({key:"Filter",value:Ht});else{Ot.push({key:"Filter",value:"["+Ht+"]"});for(var lr=0;lr<Ot.length;lr+=1)if(Ot[lr].key==="DecodeParms"){for(var Br=[],ls=0;ls<wt.reverseChain.split("/").length-1;ls+=1)Br.push("null");Br.push(Ot[lr].value),Ot[lr].value="["+Br.join(" ")+"]"}}de("<<");for(var fr=0;fr<Ot.length;fr++)de("/"+Ot[fr].key+" "+Ot[fr].value);de(">>"),wt.data.length!==0&&(de("stream"),de(bt(wt.data)),de("endstream"))},Zi=y.__private__.putPage=function(w){var M=w.number,le=w.data,ye=w.objId,ke=w.contentsObjId;yr(ye,!0),de("<</Type /Page"),de("/Parent "+w.rootDictionaryObjId+" 0 R"),de("/Resources "+w.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(K(w.mediaBox.bottomLeftX))+" "+parseFloat(K(w.mediaBox.bottomLeftY))+" "+K(w.mediaBox.topRightX)+" "+K(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&de("/CropBox ["+K(w.cropBox.bottomLeftX)+" "+K(w.cropBox.bottomLeftY)+" "+K(w.cropBox.topRightX)+" "+K(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&de("/BleedBox ["+K(w.bleedBox.bottomLeftX)+" "+K(w.bleedBox.bottomLeftY)+" "+K(w.bleedBox.topRightX)+" "+K(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&de("/TrimBox ["+K(w.trimBox.bottomLeftX)+" "+K(w.trimBox.bottomLeftY)+" "+K(w.trimBox.topRightX)+" "+K(w.trimBox.topRightY)+"]"),w.artBox!==null&&de("/ArtBox ["+K(w.artBox.bottomLeftX)+" "+K(w.artBox.bottomLeftY)+" "+K(w.artBox.topRightX)+" "+K(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&de("/UserUnit "+w.userUnit),at.publish("putPage",{objId:ye,pageContext:nt[M],pageNumber:M,page:le}),de("/Contents "+ke+" 0 R"),de(">>"),de("endobj");var Ve=le.join(`
`);return F===P&&(Ve+=`
Q`),yr(ke,!0),In({data:Ve,filters:ys(),objectId:ke}),de("endobj"),ye},ca=y.__private__.putPages=function(){var w,M,le=[];for(w=1;w<=ht;w++)nt[w].objId=Xt(),nt[w].contentsObjId=Xt();for(w=1;w<=ht;w++)le.push(Zi({number:w,data:me[w],objId:nt[w].objId,contentsObjId:nt[w].contentsObjId,mediaBox:nt[w].mediaBox,cropBox:nt[w].cropBox,bleedBox:nt[w].bleedBox,trimBox:nt[w].trimBox,artBox:nt[w].artBox,userUnit:nt[w].userUnit,rootDictionaryObjId:Lr,resourceDictionaryObjId:Ws}));yr(Lr,!0),de("<</Type /Pages");var ye="/Kids [";for(M=0;M<ht;M++)ye+=le[M]+" 0 R ";de(ye+"]"),de("/Count "+ht),de(">>"),de("endobj"),at.publish("postPutPages")},ji=function(w){at.publish("putFont",{font:w,out:de,newObject:ir,putStream:In}),w.isAlreadyPutted!==!0&&(w.objectNumber=ir(),de("<<"),de("/Type /Font"),de("/BaseFont /"+bd(w.postScriptName)),de("/Subtype /Type1"),typeof w.encoding=="string"&&de("/Encoding /"+w.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},eo=function(w){w.objectNumber=ir();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[K(w.x),K(w.y),K(w.x+w.width),K(w.y+w.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var le=w.pages[1].join(`
`);In({data:le,additionalKeyValues:M,objectId:w.objectNumber}),de("endobj")},to=function(w,M){M||(M=21);var le=ir(),ye=(function(Ye,bt){var wt,Ot=[],Ht=1/(bt-1);for(wt=0;wt<1;wt+=Ht)Ot.push(wt);if(Ot.push(1),Ye[0].offset!=0){var lr={offset:0,color:Ye[0].color};Ye.unshift(lr)}if(Ye[Ye.length-1].offset!=1){var Br={offset:1,color:Ye[Ye.length-1].color};Ye.push(Br)}for(var ls="",fr=0,bs=0;bs<Ot.length;bs++){for(wt=Ot[bs];wt>Ye[fr+1].offset;)fr++;var cs=Ye[fr].offset,Rs=(wt-cs)/(Ye[fr+1].offset-cs),Ja=Ye[fr].color,Ai=Ye[fr+1].color;ls+=ne(Math.round((1-Rs)*Ja[0]+Rs*Ai[0]).toString(16))+ne(Math.round((1-Rs)*Ja[1]+Rs*Ai[1]).toString(16))+ne(Math.round((1-Rs)*Ja[2]+Rs*Ai[2]).toString(16))}return ls.trim()})(w.colors,M),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+M+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),In({data:ye,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),de("endobj"),w.objectNumber=ir(),de("<< /ShadingType "+w.type),de("/ColorSpace /DeviceRGB");var Ve="/Coords ["+K(parseFloat(w.coords[0]))+" "+K(parseFloat(w.coords[1]))+" ";w.type===2?Ve+=K(parseFloat(w.coords[2]))+" "+K(parseFloat(w.coords[3])):Ve+=K(parseFloat(w.coords[2]))+" "+K(parseFloat(w.coords[3]))+" "+K(parseFloat(w.coords[4]))+" "+K(parseFloat(w.coords[5])),de(Ve+="]"),w.matrix&&de("/Matrix ["+w.matrix.toString()+"]"),de("/Function "+le+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Bo=function(w,M){var le=Xt(),ye=ir();M.push({resourcesOid:le,objectOid:ye}),w.objectNumber=ye;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+w.boundingBox.map(K).join(" ")+"]"}),ke.push({key:"XStep",value:K(w.xStep)}),ke.push({key:"YStep",value:K(w.yStep)}),ke.push({key:"Resources",value:le+" 0 R"}),w.matrix&&ke.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),In({data:w.stream,additionalKeyValues:ke,objectId:w.objectNumber}),de("endobj")},Bd=function(w){for(var M in w.objectNumber=ir(),de("<<"),w)switch(M){case"opacity":de("/ca "+I(w[M]));break;case"stroke-opacity":de("/CA "+I(w[M]))}de(">>"),de("endobj")},Er=function(w){yr(w.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var M in de("/Font <<"),pt)pt.hasOwnProperty(M)&&(v===!1||v===!0&&N.hasOwnProperty(M))&&de("/"+M+" "+pt[M].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(Et).length>0){for(var M in de("/Shading <<"),Et)Et.hasOwnProperty(M)&&Et[M]instanceof cc&&Et[M].objectNumber>=0&&de("/"+M+" "+Et[M].objectNumber+" 0 R");at.publish("putShadingPatternDict"),de(">>")}})(),(function(M){if(Object.keys(Et).length>0){for(var le in de("/Pattern <<"),Et)Et.hasOwnProperty(le)&&Et[le]instanceof y.TilingPattern&&Et[le].objectNumber>=0&&Et[le].objectNumber<M&&de("/"+le+" "+Et[le].objectNumber+" 0 R");at.publish("putTilingPatternDict"),de(">>")}})(w.objectOid),(function(){if(Object.keys(Re).length>0){var M;for(M in de("/ExtGState <<"),Re)Re.hasOwnProperty(M)&&Re[M].objectNumber>=0&&de("/"+M+" "+Re[M].objectNumber+" 0 R");at.publish("putGStateDict"),de(">>")}})(),(function(){for(var M in de("/XObject <<"),ar)ar.hasOwnProperty(M)&&ar[M].objectNumber>=0&&de("/"+M+" "+ar[M].objectNumber+" 0 R");at.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},Pc=function(w){Tt[w.fontName]=Tt[w.fontName]||{},Tt[w.fontName][w.fontStyle]=w.id},Uo=function(w,M,le,ye,ke){var Ve={id:"F"+(Object.keys(pt).length+1).toString(10),postScriptName:w,fontName:M,fontStyle:le,encoding:ye,isStandardFont:ke||!1,metadata:{}};return at.publish("addFont",{font:Ve,instance:this}),pt[Ve.id]=Ve,Pc(Ve),Ve.id},Fn=y.__private__.pdfEscape=y.pdfEscape=function(w,M){return(function(le,ye){var ke,Ve,Ye,bt,wt,Ot,Ht,lr,Br;if(Ye=(ye=ye||{}).sourceEncoding||"Unicode",wt=ye.outputEncoding,(ye.autoencode||wt)&&pt[lt].metadata&&pt[lt].metadata[Ye]&&pt[lt].metadata[Ye].encoding&&(bt=pt[lt].metadata[Ye].encoding,!wt&&pt[lt].encoding&&(wt=pt[lt].encoding),!wt&&bt.codePages&&(wt=bt.codePages[0]),typeof wt=="string"&&(wt=bt[wt]),wt)){for(Ht=!1,Ot=[],ke=0,Ve=le.length;ke<Ve;ke++)(lr=wt[le.charCodeAt(ke)])?Ot.push(String.fromCharCode(lr)):Ot.push(le[ke]),Ot[ke].charCodeAt(0)>>8&&(Ht=!0);le=Ot.join("")}for(ke=le.length;Ht===void 0&&ke!==0;)le.charCodeAt(ke-1)>>8&&(Ht=!0),ke--;if(!Ht)return le;for(Ot=ye.noBOM?[]:[254,255],ke=0,Ve=le.length;ke<Ve;ke++){if((Br=(lr=le.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+le+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(Br),Ot.push(lr-(Br<<8))}return String.fromCharCode.apply(void 0,Ot)})(w,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Si=y.__private__.beginPage=function(w){me[++ht]=[],nt[ht]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},ro(ht),Te(me[$])},_c=function(w,M){var le,ye,ke;switch(s=M||s,typeof w=="string"&&(le=L(w.toLowerCase()),Array.isArray(le)&&(ye=le[0],ke=le[1])),Array.isArray(w)&&(ye=w[0]*_t,ke=w[1]*_t),isNaN(ye)&&(ye=o[0],ke=o[1]),(ye>14400||ke>14400)&&(Ir.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),ke=Math.min(14400,ke)),o=[ye,ke],s.substr(0,1)){case"l":ke>ye&&(o=[ke,ye]);break;case"p":ye>ke&&(o=[ke,ye])}Si(o),oo(Wn),de(lo),Ol!==0&&de(Ol+" J"),Rl!==0&&de(Rl+" j"),at.publish("addPage",{pageNumber:ht})},qo=function(w){w>0&&w<=ht&&(me.splice(w,1),nt.splice(w,1),ht--,$>ht&&($=ht),this.setPage($))},ro=function(w){w>0&&w<=ht&&($=w)},Tn=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return me.length-1},Lc=function(w,M,le){var ye,ke=void 0;return le=le||{},w=w!==void 0?w:pt[lt].fontName,M=M!==void 0?M:pt[lt].fontStyle,ye=w.toLowerCase(),Tt[ye]!==void 0&&Tt[ye][M]!==void 0?ke=Tt[ye][M]:Tt[w]!==void 0&&Tt[w][M]!==void 0?ke=Tt[w][M]:le.disableWarning===!1&&Ir.warn("Unable to look up font label for font '"+w+"', '"+M+"'. Refer to getFontList() for available fonts."),ke||le.noFallback||(ke=Tt.times[M])==null&&(ke=Tt.times.normal),ke},Gs=y.__private__.putInfo=function(){var w=ir(),M=function(ye){return ye};for(var le in p!==null&&(M=Qr.encryptor(w,0)),de("<<"),de("/Producer ("+Fn(M("jsPDF "+Dt.version))+")"),ot)ot.hasOwnProperty(le)&&ot[le]&&de("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+Fn(M(ot[le]))+")");de("/CreationDate ("+Fn(M(be))+")"),de(">>"),de("endobj")},Ud=y.__private__.putCatalog=function(w){var M=(w=w||{}).rootDictionaryObjId||Lr;switch(ir(),de("<<"),de("/Type /Catalog"),de("/Pages "+M+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+ce;le.substr(le.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&de("/OpenAction [3 0 R /XYZ null null "+I(ce)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}$e&&de("/PageMode /"+$e),at.publish("putCatalog"),de(">>"),de("endobj")},os=y.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(H+1)),de("/Root "+H+" 0 R"),de("/Info "+(H-1)+" 0 R"),p!==null&&de("/Encrypt "+Qr.oid+" 0 R"),de("/ID [ <"+ge+"> <"+ge+"> ]"),de(">>")},Ec=y.__private__.putHeader=function(){de("%PDF-"+A),de("%")},so=y.__private__.putXRef=function(){var w="0000000000";de("xref"),de("0 "+(H+1)),de("0000000000 65535 f ");for(var M=1;M<=H;M++)typeof Q[M]=="function"?de((w+Q[M]()).slice(-10)+" 00000 n "):Q[M]!==void 0?de((w+Q[M]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},Hn=y.__private__.buildDocument=function(){var w;H=0,xe=0,ue=[],Q=[],Ee=[],Lr=Xt(),Ws=Xt(),Te(ue),at.publish("buildDocument"),Ec(),ca(),(function(){at.publish("putAdditionalObjects");for(var le=0;le<Ee.length;le++){var ye=Ee[le];yr(ye.objId,!0),de(ye.content),de("endobj")}at.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var le in pt)pt.hasOwnProperty(le)&&(v===!1||v===!0&&N.hasOwnProperty(le))&&ji(pt[le])})(),(function(){var le;for(le in Re)Re.hasOwnProperty(le)&&Bd(Re[le])})(),(function(){for(var le in ar)ar.hasOwnProperty(le)&&eo(ar[le])})(),(function(le){var ye;for(ye in Et)Et.hasOwnProperty(ye)&&(Et[ye]instanceof cc?to(Et[ye]):Et[ye]instanceof wd&&Bo(Et[ye],le))})(w),at.publish("putResources"),w.forEach(Er),Er({resourcesOid:Ws,objectOid:Number.MAX_SAFE_INTEGER}),at.publish("postPutResources"),p!==null&&(Qr.oid=ir(),de("<<"),de("/Filter /Standard"),de("/V "+Qr.v),de("/R "+Qr.r),de("/U <"+Qr.toHexString(Qr.U)+">"),de("/O <"+Qr.toHexString(Qr.O)+">"),de("/P "+Qr.P),de(">>"),de("endobj")),Gs(),Ud();var M=xe;return so(),os(),de("startxref"),de(""+M),de("%%EOF"),Te(me[$]),ue.join(`
`)},da=y.__private__.getBlob=function(w){return new Blob([st(w)],{type:"application/pdf"})},pn=y.output=y.__private__.output=(Jr=function(w,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",w){case void 0:return Hn();case"save":y.save(M.filename);break;case"arraybuffer":return st(Hn());case"blob":return da(Hn());case"bloburi":case"bloburl":if(Vt.URL!==void 0&&typeof Vt.URL.createObjectURL=="function")return Vt.URL&&Vt.URL.createObjectURL(da(Hn()))||void 0;Ir.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",ye=Hn();try{le=c1(ye)}catch{le=c1(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+M.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(ke=M.pdfObjectUrl,Ve="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",bt=Vt.open();return bt!==null&&bt.document.write(Ye),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',Ot=Vt.open();if(Ot!==null){Ot.document.write(wt);var Ht=this;Ot.document.documentElement.querySelector("#pdfViewer").onload=function(){Ot.document.title=M.filename,Ot.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Ot}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Br=Vt.open();if(Br!==null&&(Br.document.write(lr),Br.document.title=M.filename),Br||typeof safari>"u")return Br;break;case"datauri":case"dataurl":return Vt.document.location.href=this.output("datauristring",M);default:return null}},Jr.foo=function(){try{return Jr.apply(this,arguments)}catch(le){var w=le.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var M="Error in function "+w.split(`
`)[0].split("<")[0]+": "+le.message;if(!Vt.console)throw new Error(M);Vt.console.error(M,le),Vt.alert&&alert(M)}},Jr.foo.bar=Jr,Jr.foo),no=function(w){return Array.isArray(Jt)===!0&&Jt.indexOf(w)>-1};switch(a){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=no("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);_t=a}var Qr=null;ee(),re();var ao=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nt[w].objId,pageNumber:w,pageContext:nt[w]}},Dc=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in nt)if(nt[M].objId===w)break;return ao(M)},Il=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:nt[$].objId,pageNumber:$,pageContext:nt[$]}};y.addPage=function(){return _c.apply(this,arguments),this},y.setPage=function(){return ro.apply(this,arguments),Te.call(this,me[$]),this},y.insertPage=function(w){return this.addPage(),this.movePage($,w),this},y.movePage=function(w,M){var le,ye;if(w>M){le=me[w],ye=nt[w];for(var ke=w;ke>M;ke--)me[ke]=me[ke-1],nt[ke]=nt[ke-1];me[M]=le,nt[M]=ye,this.setPage(M)}else if(w<M){le=me[w],ye=nt[w];for(var Ve=w;Ve<M;Ve++)me[Ve]=me[Ve+1],nt[Ve]=nt[Ve+1];me[M]=le,nt[M]=ye,this.setPage(M)}return this},y.deletePage=function(){return qo.apply(this,arguments),this},y.__private__.text=y.text=function(w,M,le,ye,ke){var Ve,Ye,bt,wt,Ot,Ht,lr,Br,ls,fr=(ye=ye||{}).scope||this;if(typeof w=="number"&&typeof M=="number"&&(typeof le=="string"||Array.isArray(le))){var bs=le;le=M,M=w,w=bs}if(arguments[3]instanceof ft==0?(bt=arguments[4],wt=arguments[5],Ar(lr=arguments[3])==="object"&&lr!==null||(typeof bt=="string"&&(wt=bt,bt=null),typeof lr=="string"&&(wt=lr,lr=null),typeof lr=="number"&&(bt=lr,lr=null),ye={flags:lr,angle:bt,align:wt})):(Y("The transform parameter of text() with a Matrix value"),ls=ke),isNaN(M)||isNaN(le)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return fr;var cs,Rs="",Ja=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:gn,Ai=fr.internal.scaleFactor;function Rc(Cr){return Cr=Cr.split("	").join(Array(ye.TabLen||9).join(" ")),Fn(Cr,lr)}function Mc(Cr){for(var Pr,Xr=Cr.concat(),Zr=[],ws=Xr.length;ws--;)typeof(Pr=Xr.shift())=="string"?Zr.push(Pr):Array.isArray(Cr)&&(Pr.length===1||Pr[1]===void 0&&Pr[2]===void 0)?Zr.push(Pr[0]):Zr.push([Pr[0],Pr[1],Pr[2]]);return Zr}function ho(Cr,Pr){var Xr;if(typeof Cr=="string")Xr=Pr(Cr)[0];else if(Array.isArray(Cr)){for(var Zr,ws,Fa=Cr.concat(),pa=[],Zo=Fa.length;Zo--;)typeof(Zr=Fa.shift())=="string"?pa.push(Pr(Zr)[0]):Array.isArray(Zr)&&typeof Zr[0]=="string"&&(ws=Pr(Zr[0],Zr[1],Zr[2]),pa.push([ws[0],ws[1],ws[2]]));Xr=pa}return Xr}var ma=!1,Ml=!0;if(typeof w=="string")ma=!0;else if(Array.isArray(w)){var Ci=w.concat();Ye=[];for(var Pi,Ls=Ci.length;Ls--;)(typeof(Pi=Ci.shift())!="string"||Array.isArray(Pi)&&typeof Pi[0]!="string")&&(Ml=!1);ma=Ml}if(ma===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Qa=Ke/fr.internal.scaleFactor,Ea=Qa*(Ja-1);switch(ye.baseline){case"bottom":le-=Ea;break;case"top":le+=Qa-Ea;break;case"hanging":le+=Qa-2*Ea;break;case"middle":le+=Qa/2-Ea}if((Ht=ye.maxWidth||0)>0&&(typeof w=="string"?w=fr.splitTextToSize(w,Ht):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Cr,Pr){return Cr.concat(fr.splitTextToSize(Pr,Ht))},[]))),Ve={text:w,x:M,y:le,options:ye,mutex:{pdfEscape:Fn,activeFontKey:lt,fonts:pt,activeFontSize:Ke}},at.publish("preProcessText",Ve),w=Ve.text,bt=(ye=Ve.options).angle,ls instanceof ft==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,ye.rotationDirection===0&&(bt=-bt),F===P&&(bt=-bt);var Ko=Math.cos(bt),Bl=Math.sin(bt);ls=new ft(Ko,Bl,-Bl,Ko,0,0)}else bt&&bt instanceof ft&&(ls=bt);F!==P||ls||(ls=xs),(Ot=ye.charSpace||fa)!==void 0&&(Rs+=K(U(Ot))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Br=ye.horizontalScale)!==void 0&&(Rs+=K(100*Br)+` Tz
`),ye.lang;var nn=-1,Bc=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Yo=fr.internal.getCurrentPageInfo().pageContext;switch(Bc){case 0:case!1:case"fill":nn=0;break;case 1:case!0:case"stroke":nn=1;break;case 2:case"fillThenStroke":nn=2;break;case 3:case"invisible":nn=3;break;case 4:case"fillAndAddForClipping":nn=4;break;case 5:case"strokeAndAddPathForClipping":nn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":nn=6;break;case 7:case"addToPathForClipping":nn=7}var Uc=Yo.usedRenderingMode!==void 0?Yo.usedRenderingMode:-1;nn!==-1?Rs+=nn+` Tr
`:Uc!==-1&&(Rs+=`0 Tr
`),nn!==-1&&(Yo.usedRenderingMode=nn),wt=ye.align||"left";var vs,xn=Ke*Ja,Xa=fr.internal.pageSize.getWidth(),Ul=pt[lt];Ot=ye.charSpace||fa,Ht=ye.maxWidth||0,lr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Za=[],fo=function(Cr){return fr.getStringUnitWidth(Cr,{font:Ul,charSpace:Ot,fontSize:Ke,doKerning:!1})*Ke/Ai};if(Object.prototype.toString.call(w)==="[object Array]"){var an;Ye=Mc(w),wt!=="left"&&(vs=Ye.map(fo));var on,_i=0;if(wt==="right"){M-=vs[0],w=[],Ls=Ye.length;for(var ln=0;ln<Ls;ln++)ln===0?(on=On(M),an=Ga(le)):(on=U(_i-vs[ln]),an=-xn),w.push([Ye[ln],on,an]),_i=vs[ln]}else if(wt==="center"){M-=vs[0]/2,w=[],Ls=Ye.length;for(var Li=0;Li<Ls;Li++)Li===0?(on=On(M),an=Ga(le)):(on=U((_i-vs[Li])/2),an=-xn),w.push([Ye[Li],on,an]),_i=vs[Li]}else if(wt==="left"){w=[],Ls=Ye.length;for(var ql=0;ql<Ls;ql++)w.push(Ye[ql])}else if(wt==="justify"&&Ul.encoding==="Identity-H"){w=[],Ls=Ye.length,Ht=Ht!==0?Ht:Xa;for(var Ei=0,$r=0;$r<Ls;$r++)if(an=$r===0?Ga(le):-xn,on=$r===0?On(M):Ei,$r<Ls-1){var qc=U((Ht-vs[$r])/(Ye[$r].split(" ").length-1)),yn=Ye[$r].split(" ");w.push([yn[0]+" ",on,an]),Ei=0;for(var bn=1;bn<yn.length;bn++){var Jo=(fo(yn[bn-1]+" "+yn[bn])-fo(yn[bn]))*Ai+qc;bn==yn.length-1?w.push([yn[bn],Jo,0]):w.push([yn[bn]+" ",Jo,0]),Ei-=Jo}}else w.push([Ye[$r],on,an]);w.push(["",Ei,0])}else{if(wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Ls=Ye.length,Ht=Ht!==0?Ht:Xa,$r=0;$r<Ls;$r++)an=$r===0?Ga(le):-xn,on=$r===0?On(M):0,$r<Ls-1?Za.push(K(U((Ht-vs[$r])/(Ye[$r].split(" ").length-1)))):Za.push(0),w.push([Ye[$r],on,an])}}(typeof ye.R2L=="boolean"?ye.R2L:Ce)===!0&&(w=ho(w,function(Cr,Pr,Xr){return[Cr.split("").reverse().join(""),Pr,Xr]})),Ve={text:w,x:M,y:le,options:ye,mutex:{pdfEscape:Fn,activeFontKey:lt,fonts:pt,activeFontSize:Ke}},at.publish("postProcessText",Ve),w=Ve.text,cs=Ve.mutex.isHex||!1;var Di=pt[lt].encoding;Di!=="WinAnsiEncoding"&&Di!=="StandardEncoding"||(w=ho(w,function(Cr,Pr,Xr){return[Rc(Cr),Pr,Xr]})),Ye=Mc(w),w=[];for(var Qo,mo,ei,ti=Array.isArray(Ye[0])?1:0,Da="",Xo=function(Cr,Pr,Xr){var Zr="";return Xr instanceof ft?(Xr=typeof ye.angle=="number"?wr(Xr,new ft(1,0,0,1,Cr,Pr)):wr(new ft(1,0,0,1,Cr,Pr),Xr),F===P&&(Xr=wr(new ft(1,0,0,-1,0,0),Xr)),Zr=Xr.join(" ")+` Tm
`):Zr=K(Cr)+" "+K(Pr)+` Td
`,Zr},vn=0;vn<Ye.length;vn++){switch(Da="",ti){case 1:ei=(cs?"<":"(")+Ye[vn][0]+(cs?">":")"),Qo=parseFloat(Ye[vn][1]),mo=parseFloat(Ye[vn][2]);break;case 0:ei=(cs?"<":"(")+Ye[vn]+(cs?">":")"),Qo=On(M),mo=Ga(le)}Za!==void 0&&Za[vn]!==void 0&&(Da=Za[vn]+` Tw
`),vn===0?w.push(Da+Xo(Qo,mo,ls)+ei):ti===0?w.push(Da+ei):ti===1&&w.push(Da+Xo(Qo,mo,ls)+ei)}w=ti===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Ia=`BT
/`;return Ia+=lt+" "+Ke+` Tf
`,Ia+=K(Ke*Ja)+` TL
`,Ia+=ha+`
`,Ia+=Rs,Ia+=w,de(Ia+="ET"),N[lt]=!0,fr};var io=y.__private__.clip=y.clip=function(w){return de(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return io("evenodd")},y.__private__.discardPath=y.discardPath=function(){return de("n"),this};var Aa=y.__private__.isValidStyle=function(w){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(M=!0),M};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return Aa(w)&&(m=w),this};var zo=y.__private__.getStyle=y.getStyle=function(w){var M=m;switch(w){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=w}return M},or=y.close=function(){return de("h"),this};y.stroke=function(){return de("S"),this},y.fill=function(w){return Ha("f",w),this},y.fillEvenOdd=function(w){return Ha("f*",w),this},y.fillStroke=function(w){return Ha("B",w),this},y.fillStrokeEvenOdd=function(w){return Ha("B*",w),this};var Ha=function(w,M){Ar(M)==="object"?Ic(M,w):de(w)},$o=function(w){w===null||F===P&&w===void 0||(w=zo(w),de(w))};function Fl(w,M,le,ye,ke){var Ve=new wd(M||this.boundingBox,le||this.xStep,ye||this.yStep,this.gState,ke||this.matrix);Ve.stream=this.stream;var Ye=w+"$$"+this.cloneIndex+++"$$";return Yr(Ye,Ve),Ve}var Ic=function(w,M){var le=Gt[w.key],ye=Et[le];if(ye instanceof cc)de("q"),de(Fc(M)),ye.gState&&y.setGState(ye.gState),de(w.matrix.toString()+" cm"),de("/"+le+" sh"),de("Q");else if(ye instanceof wd){var ke=new ft(1,0,0,-1,0,Ks());w.matrix&&(ke=ke.multiply(w.matrix||xs),le=Fl.call(ye,w.key,w.boundingBox,w.xStep,w.yStep,ke).id),de("q"),de("/Pattern cs"),de("/"+le+" scn"),ye.gState&&y.setGState(ye.gState),de(M),de("Q")}},Fc=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Vo=y.moveTo=function(w,M){return de(K(U(w))+" "+K(J(M))+" m"),this},Wa=y.lineTo=function(w,M){return de(K(U(w))+" "+K(J(M))+" l"),this},ua=y.curveTo=function(w,M,le,ye,ke,Ve){return de([K(U(w)),K(J(M)),K(U(le)),K(J(ye)),K(U(ke)),K(J(Ve)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,M,le,ye,ke){if(isNaN(w)||isNaN(M)||isNaN(le)||isNaN(ye)||!Aa(ke))throw new Error("Invalid arguments passed to jsPDF.line");return F===E?this.lines([[le-w,ye-M]],w,M,[1,1],ke||"S"):this.lines([[le-w,ye-M]],w,M,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,M,le,ye,ke,Ve){var Ye,bt,wt,Ot,Ht,lr,Br,ls,fr,bs,cs,Rs;if(typeof w=="number"&&(Rs=le,le=M,M=w,w=Rs),ye=ye||[1,1],Ve=Ve||!1,isNaN(M)||isNaN(le)||!Array.isArray(w)||!Array.isArray(ye)||!Aa(ke)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Vo(M,le),Ye=ye[0],bt=ye[1],Ot=w.length,bs=M,cs=le,wt=0;wt<Ot;wt++)(Ht=w[wt]).length===2?(bs=Ht[0]*Ye+bs,cs=Ht[1]*bt+cs,Wa(bs,cs)):(lr=Ht[0]*Ye+bs,Br=Ht[1]*bt+cs,ls=Ht[2]*Ye+bs,fr=Ht[3]*bt+cs,bs=Ht[4]*Ye+bs,cs=Ht[5]*bt+cs,ua(lr,Br,ls,fr,bs,cs));return Ve&&or(),$o(ke),this},y.path=function(w){for(var M=0;M<w.length;M++){var le=w[M],ye=le.c;switch(le.op){case"m":Vo(ye[0],ye[1]);break;case"l":Wa(ye[0],ye[1]);break;case"c":ua.apply(this,ye);break;case"h":or()}}return this},y.__private__.rect=y.rect=function(w,M,le,ye,ke){if(isNaN(w)||isNaN(M)||isNaN(le)||isNaN(ye)||!Aa(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return F===E&&(ye=-ye),de([K(U(w)),K(J(M)),K(U(le)),K(U(ye)),"re"].join(" ")),$o(ke),this},y.__private__.triangle=y.triangle=function(w,M,le,ye,ke,Ve,Ye){if(isNaN(w)||isNaN(M)||isNaN(le)||isNaN(ye)||isNaN(ke)||isNaN(Ve)||!Aa(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-w,ye-M],[ke-le,Ve-ye],[w-ke,M-Ve]],w,M,[1,1],Ye,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,M,le,ye,ke,Ve,Ye){if(isNaN(w)||isNaN(M)||isNaN(le)||isNaN(ye)||isNaN(ke)||isNaN(Ve)||!Aa(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*le),Ve=Math.min(Ve,.5*ye),this.lines([[le-2*ke,0],[ke*bt,0,ke,Ve-Ve*bt,ke,Ve],[0,ye-2*Ve],[0,Ve*bt,-ke*bt,Ve,-ke,Ve],[2*ke-le,0],[-ke*bt,0,-ke,-Ve*bt,-ke,-Ve],[0,2*Ve-ye],[0,-Ve*bt,ke*bt,-Ve,ke,-Ve]],w+ke,M,[1,1],Ye,!0),this},y.__private__.ellipse=y.ellipse=function(w,M,le,ye,ke){if(isNaN(w)||isNaN(M)||isNaN(le)||isNaN(ye)||!Aa(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*le,Ye=4/3*(Math.SQRT2-1)*ye;return Vo(w+le,M),ua(w+le,M-Ye,w+Ve,M-ye,w,M-ye),ua(w-Ve,M-ye,w-le,M-Ye,w-le,M),ua(w-le,M+Ye,w-Ve,M+ye,w,M+ye),ua(w+Ve,M+ye,w+le,M+Ye,w+le,M),$o(ke),this},y.__private__.circle=y.circle=function(w,M,le,ye){if(isNaN(w)||isNaN(M)||isNaN(le)||!Aa(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,M,le,le,ye)},y.setFont=function(w,M,le){return le&&(M=X(M,le)),lt=Lc(w,M,{disableWarning:!1}),this};var Ca=y.__private__.getFont=y.getFont=function(){return pt[Lc.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,M,le={};for(w in Tt)if(Tt.hasOwnProperty(w))for(M in le[w]=[],Tt[w])Tt[w].hasOwnProperty(M)&&le[w].push(M);return le},y.addFont=function(w,M,le,ye,ke){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(le=X(le,ye)),Uo.call(this,w,M,le,ke=ke||"Identity-H")};var gn,Wn=t.lineWidth||.200025,Ut=y.__private__.getLineWidth=y.getLineWidth=function(){return Wn},oo=y.__private__.setLineWidth=y.setLineWidth=function(w){return Wn=w,de(K(U(w))+" w"),this};y.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(w,M){if(w=w||[],M=M||0,isNaN(M)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(le){return K(U(le))}).join(" "),M=K(U(M)),de("["+w+"] "+M+" d"),this};var Pa=y.__private__.getLineHeight=y.getLineHeight=function(){return Ke*gn};y.__private__.getLineHeight=y.getLineHeight=function(){return Ke*gn};var qd=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(gn=w),this},Tc=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return gn};qd(t.lineHeight);var On=y.__private__.getHorizontalCoordinate=function(w){return U(w)},Ga=y.__private__.getVerticalCoordinate=function(w){return F===P?w:nt[$].mediaBox.topRightY-nt[$].mediaBox.bottomLeftY-U(w)},Oc=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return K(On(w))},Ho=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return K(Ga(w))},lo=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return sn(lo)},y.__private__.setStrokeColor=y.setDrawColor=function(w,M,le,ye){return lo=zr({ch1:w,ch2:M,ch3:le,ch4:ye,pdfColorType:"draw",precision:2}),de(lo),this};var Tl=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return sn(Tl)},y.__private__.setFillColor=y.setFillColor=function(w,M,le,ye){return Tl=zr({ch1:w,ch2:M,ch3:le,ch4:ye,pdfColorType:"fill",precision:2}),de(Tl),this};var ha=t.textColor||"0 g",_a=y.__private__.getTextColor=y.getTextColor=function(){return sn(ha)};y.__private__.setTextColor=y.setTextColor=function(w,M,le,ye){return ha=zr({ch1:w,ch2:M,ch3:le,ch4:ye,pdfColorType:"text",precision:3}),this};var fa=t.charSpace,Wo=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(fa||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fa=w,this};var Ol=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var M=y.CapJoinStyles[w];if(M===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=M,de(M+" J"),this};var Rl=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var M=y.CapJoinStyles[w];if(M===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rl=M,de(M+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(K(U(w))+" M"),this},y.GState=Tf,y.setGState=function(w){(w=typeof w=="string"?Re[it[w]]:Ka(null,w)).equals(ct)||(de("/"+w.id+" gs"),ct=w)};var Ka=function(w,M){if(!w||!it[w]){var le=!1;for(var ye in Re)if(Re.hasOwnProperty(ye)&&Re[ye].equals(M)){le=!0;break}if(le)M=Re[ye];else{var ke="GS"+(Object.keys(Re).length+1).toString(10);Re[ke]=M,M.id=ke}return w&&(it[w]=M.id),at.publish("addGState",M),M}};y.addGState=function(w,M){return Ka(w,M),this},y.saveGraphicsState=function(){return de("q"),nr.push({key:lt,size:Ke,color:ha}),this},y.restoreGraphicsState=function(){de("Q");var w=nr.pop();return lt=w.key,Ke=w.size,ha=w.color,ct=null,this},y.setCurrentTransformationMatrix=function(w){return de(w.toString()+" cm"),this},y.comment=function(w){return de("#"+w),this};var La=function(w,M){var le=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Ve){isNaN(Ve)||(le=parseFloat(Ve))}});var ye=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Ve){isNaN(Ve)||(ye=parseFloat(Ve))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ve){ke=Ve.toString()}}),this},co=function(w,M,le,ye){La.call(this,w,M),this.type="rect";var ke=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(Ye){isNaN(Ye)||(ke=parseFloat(Ye))}});var Ve=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(Ye){isNaN(Ye)||(Ve=parseFloat(Ye))}}),this},uo=function(){this.page=ht,this.currentPage=$,this.pages=me.slice(0),this.pagesContext=nt.slice(0),this.x=ut,this.y=hr,this.matrix=zt,this.width=ki($),this.height=Ks($),this.outputDestination=Ze,this.id="",this.objectNumber=-1};uo.prototype.restore=function(){ht=this.page,$=this.currentPage,nt=this.pagesContext,me=this.pages,ut=this.x,hr=this.y,zt=this.matrix,Go($,this.width),Rn($,this.height),Ze=this.outputDestination};var Gn=function(w,M,le,ye,ke){pr.push(new uo),ht=$=0,me=[],ut=w,hr=M,zt=ke,Si([le,ye])};for(var Ya in y.beginFormObject=function(w,M,le,ye,ke){return Gn(w,M,le,ye,ke),this},y.endFormObject=function(w){return(function(M){if(It[M])pr.pop().restore();else{var le=new uo,ye="Xo"+(Object.keys(ar).length+1).toString(10);le.id=ye,It[M]=ye,ar[ye]=le,at.publish("addFormObject",le),pr.pop().restore()}})(w),this},y.doFormObject=function(w,M){var le=ar[It[w]];return de("q"),de(M.toString()+" cm"),de("/"+le.id+" Do"),de("Q"),this},y.getFormObject=function(w){var M=ar[It[w]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},y.save=function(w,M){return w=w||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(lc(da(Hn()),w),typeof lc.unload=="function"&&Vt.setTimeout&&setTimeout(lc.unload,911),this):new Promise(function(le,ye){try{var ke=lc(da(Hn()),w);typeof lc.unload=="function"&&Vt.setTimeout&&setTimeout(lc.unload,911),le(ke)}catch(Ve){ye(Ve.message)}})},Dt.API)Dt.API.hasOwnProperty(Ya)&&(Ya==="events"&&Dt.API.events.length?(function(w,M){var le,ye,ke;for(ke=M.length-1;ke!==-1;ke--)le=M[ke][0],ye=M[ke][1],w.subscribe.apply(w,[le].concat(typeof ye=="function"?[ye]:ye))})(at,Dt.API.events):y[Ya]=Dt.API[Ya]);var ki=y.getPageWidth=function(w){return(nt[w=w||$].mediaBox.topRightX-nt[w].mediaBox.bottomLeftX)/_t},Go=y.setPageWidth=function(w,M){nt[w].mediaBox.topRightX=M*_t+nt[w].mediaBox.bottomLeftX},Ks=y.getPageHeight=function(w){return(nt[w=w||$].mediaBox.topRightY-nt[w].mediaBox.bottomLeftY)/_t},Rn=y.setPageHeight=function(w,M){nt[w].mediaBox.topRightY=M*_t+nt[w].mediaBox.bottomLeftY};return y.internal={pdfEscape:Fn,getStyle:zo,getFont:Ca,getFontSize:pe,getCharSpace:Wo,getTextColor:_a,getLineHeight:Pa,getLineHeightFactor:Tc,getLineWidth:Ut,write:Fe,getHorizontalCoordinate:On,getVerticalCoordinate:Ga,getCoordinateString:Oc,getVerticalCoordinateString:Ho,collections:{},newObject:ir,newAdditionalObject:is,newObjectDeferred:Xt,newObjectDeferredBegin:yr,getFilters:ys,putStream:In,events:at,scaleFactor:_t,pageSize:{getWidth:function(){return ki($)},setWidth:function(w){Go($,w)},getHeight:function(){return Ks($)},setHeight:function(w){Rn($,w)}},encryptionOptions:p,encryption:Qr,getEncryptor:function(w){return p!==null?Qr.encryptor(w,0):function(M){return M}},output:pn,getNumberOfPages:Tn,pages:me,out:de,f2:I,f3:q,getPageInfo:ao,getPageInfoByObjId:Dc,getCurrentPageInfo:Il,getPDFVersion:C,Point:La,Rectangle:co,Matrix:ft,hasHotfix:no},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return ki($)},set:function(w){Go($,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ks($)},set:function(w){Rn($,w)},enumerable:!0,configurable:!0}),(function(w){for(var M=0,le=dt.length;M<le;M++){var ye=Uo.call(this,w[M][0],w[M][1],w[M][2],dt[M][3],!0);v===!1&&(N[ye]=!0);var ke=w[M][0].split("-");Pc({id:ye,fontName:ke[0],fontStyle:ke[1]||""})}at.publish("addFonts",{fonts:pt,dictionary:Tt})}).call(y,dt),lt="F1",_c(o,s),at.publish("initialized"),y}yd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},yd.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yd.prototype.hexToBytes=function(t){for(var r=[],s=0;s<t.length;s+=2)r.push(String.fromCharCode(parseInt(t.substr(s,2),16)));return r.join("")},yd.prototype.processOwnerPassword=function(t,r){return y0(x0(r).substr(0,5),t)},yd.prototype.encryptor=function(t,r){var s=x0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(a){return y0(s,a)}},Tf.prototype.equals=function(t){var r,s="id,objectNumber,equals";if(!t||Ar(t)!==Ar(this))return!1;var a=0;for(r in this)if(!(s.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;a++}for(r in t)t.hasOwnProperty(r)&&s.indexOf(r)<0&&a--;return a===0},Dt.API={events:[]},Dt.version="3.0.2";var ms=Dt.API,X0=1,Cc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Yt=function(t){return t.toFixed(2)},bl=function(t){return t.toFixed(5)};ms.__acroform__={};var la=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},f1=function(t){return t*X0},qi=function(t){var r=new lv,s=kt.internal.getHeight(t)||0,a=kt.internal.getWidth(t)||0;return r.BBox=[0,0,Number(Yt(a)),Number(Yt(s))],r},o8=ms.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<r},l8=ms.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<r)},c8=ms.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<r?1:0},ks=ms.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return c8(t,r-1)},As=ms.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return o8(t,r-1)},Cs=ms.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return l8(t,r-1)},d8=ms.__acroform__.calculateCoordinates=function(t,r){var s=r.internal.getHorizontalCoordinate,a=r.internal.getVerticalCoordinate,o=t[0],l=t[1],d=t[2],u=t[3],h={};return h.lowerLeft_X=s(o)||0,h.lowerLeft_Y=a(l+u)||0,h.upperRight_X=s(o+d)||0,h.upperRight_Y=a(l)||0,[Number(Yt(h.lowerLeft_X)),Number(Yt(h.lowerLeft_Y)),Number(Yt(h.upperRight_X)),Number(Yt(h.upperRight_Y))]},u8=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],s=t._V||t.DV,a=b0(t,s),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+o+" "+Yt(a.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC");var l=qi(t);return l.scope=t.scope,l.stream=r.join(`
`),l}},b0=function(t,r){var s=t.fontSize===0?t.maxFontSize:t.fontSize,a={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=t.multiline?o.map(function(I){return I.split(`
`)}):o.map(function(I){return[I]});var l=s,d=kt.internal.getHeight(t)||0;d=d<0?-d:d;var u=kt.internal.getWidth(t)||0;u=u<0?-u:u;var h=function(I,q,U){if(I+1<o.length){var J=q+" "+o[I+1][0];return Kh(J,t,U).width<=u-4}return!1};l++;e:for(;l>0;){r="",l--;var m,p,v=Kh("3",t,l).height,N=t.multiline?d-l:(d-v)/2,y=N+=2,A=0,C=0,S=0;if(l<=0){r=`(...) Tj
`,r+="% Width of Text: "+Kh(r,t,l=12).width+", FieldWidth:"+u+`
`;break}for(var L="",E=0,P=0;P<o.length;P++)if(o.hasOwnProperty(P)){var F=!1;if(o[P].length!==1&&S!==o[P].length-1){if((v+2)*(E+2)+2>d)continue e;L+=o[P][S],F=!0,C=P,P--}else{L=(L+=o[P][S]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var O=parseInt(P),se=h(O,L,l),X=P>=o.length-1;if(se&&!X){L+=" ",S=0;continue}if(se||X){if(X)C=O;else if(t.multiline&&(v+2)*(E+2)+2>d)continue e}else{if(!t.multiline||(v+2)*(E+2)+2>d)continue e;C=O}}for(var K="",Y=A;Y<=C;Y++){var ie=o[Y];if(t.multiline){if(Y===C){K+=ie[S]+" ",S=(S+1)%ie.length;continue}if(Y===A){K+=ie[ie.length-1]+" ";continue}}K+=ie[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,p=Kh(K,t,l).width,t.textAlign){case"right":m=u-p-2;break;case"center":m=(u-p)/2;break;default:m=2}r+=Yt(m)+" "+Yt(y)+` Td
`,r+="("+Cc(K)+`) Tj
`,r+=-Yt(m)+` 0 Td
`,y=-(l+2),p=0,A=F?C:C+1,E++,L=""}break}return a.text=r,a.fontSize=l,a},Kh=function(t,r,s){var a=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(t,{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:r.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:o}},h8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},f8=function(t,r){var s={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(a){return a.type===s.type&&a.object===s.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(s)},m8=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(h8)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X0=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new cv,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];l.objId=void 0,l.hasAnnotation&&f8(l,s)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(s){(function(a,o){var l=!a;for(var d in a||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var u=a[d],h=[],m=u.Rect;if(u.Rect&&(u.Rect=d8(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=kt.createDefaultAppearanceStream(u),Ar(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=m,u.hasAppearanceStream&&!u.appearanceStreamContent){var p=u8(u);h.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(u.appearanceStreamContent){var v="";for(var N in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(N)){var y=u.appearanceStreamContent[N];if(v+="/"+N+" ",v+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var d in y)if(y.hasOwnProperty(d)){var A=y[d];typeof A=="function"&&(A=A.call(o,u)),v+="/"+d+" "+A+" ",o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A)}}else typeof(A=y)=="function"&&(A=A.call(o,u)),v+="/"+d+" "+A,o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:u.objId}),o.internal.out("endobj")}l&&(function(C,S){for(var L in C)if(C.hasOwnProperty(L)){var E=L,P=C[L];S.internal.newObjectDeferredBegin(P.objId,!0),Ar(P)==="object"&&typeof P.putStream=="function"&&P.putStream(),delete C[E]}})(o.internal.acroformPlugin.xForms,o)})(s,t)}),t.internal.acroformPlugin.isInitialized=!0}},ov=ms.__acroform__.arrayToPdfArray=function(t,r,s){var a=function(d){return d};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),Ar(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(r!==void 0&&s&&(a=s.internal.getEncryptor(r)),o+="("+Cc(a(t[l].toString()))+")"):o+=t[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ip=function(t,r,s){var a=function(o){return o};return r!==void 0&&s&&(a=s.internal.getEncryptor(r)),(t=t||"").toString(),"("+Cc(a(t))+")"},Wi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wi.prototype.toString=function(){return this.objId+" 0 R"},Wi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Wi.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var s in r)if(Object.getOwnPropertyDescriptor(this,r[s]).configurable===!1){var a=r[s],o=this[a];o&&(Array.isArray(o)?t.push({key:a,value:ov(o,this.objId,this.scope)}):o instanceof Wi?(o.scope=this.scope,t.push({key:a,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:a,value:o}))}return t};var lv=function(){Wi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){t=s.trim()},get:function(){return t||null}})};la(lv,Wi);var cv=function(){Wi.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var s=function(a){return a};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+Cc(s(t))+")"}},set:function(s){t=s}})};la(cv,Wi);var wi=function t(){Wi.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');r=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ks(r,3)},set:function(L){L?this.F=As(r,3):this.F=Cs(r,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');s=L}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(L){a=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(L){a[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(L){a[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(L){a[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(L){a[3]=L}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Of)return;l="FieldObject"+t.FieldNum++}var L=function(E){return E};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+Cc(L(l))+")"},set:function(L){l=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(L){l=L}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(L){d=L}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(L){u=L}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(L){h=L}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/X0:m},set:function(L){m=L}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(L){p=L}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Of||this instanceof mc))return Ip(v,this.objId,this.scope)},set:function(L){L=L.toString(),v=L}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof rn==0?Ip(N,this.objId,this.scope):N},set:function(L){L=L.toString(),N=this instanceof rn==0?L.substr(0,1)==="("?pd(L.substr(1,L.length-2)):pd(L):L}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rn==1?pd(N.substr(1,N.length-1)):N},set:function(L){L=L.toString(),N=this instanceof rn==1?"/"+L:L}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof rn==0?Ip(y,this.objId,this.scope):y},set:function(L){L=L.toString(),y=this instanceof rn==0?L.substr(0,1)==="("?pd(L.substr(1,L.length-2)):pd(L):L}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rn==1?pd(y.substr(1,y.length-1)):y},set:function(L){L=L.toString(),y=this instanceof rn==1?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(L){L=!!L,C=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(L){A=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,1)},set:function(L){L?this.Ff=As(this.Ff,1):this.Ff=Cs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,2)},set:function(L){L?this.Ff=As(this.Ff,2):this.Ff=Cs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,3)},set:function(L){L?this.Ff=As(this.Ff,3):this.Ff=Cs(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');S=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(S){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};la(wi,Wi);var kd=function(){wi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){t=s}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ov(r,this.objId,this.scope)},set:function(s){var a,o;o=[],typeof(a=s)=="string"&&(o=(function(l,d,u){u||(u=1);for(var h,m=[];h=d.exec(l);)m.push(h[u]);return m})(a,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(s){r=s,this.sort&&r.sort()},this.addOption=function(s){s=(s=s||"").toString(),r.push(s),this.sort&&r.sort()},this.removeOption=function(s,a){for(a=a||!1,s=(s=s||"").toString();r.indexOf(s)!==-1&&(r.splice(r.indexOf(s),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,18)},set:function(s){s?this.Ff=As(this.Ff,18):this.Ff=Cs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=As(this.Ff,19):this.Ff=Cs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,20)},set:function(s){s?(this.Ff=As(this.Ff,20),r.sort()):this.Ff=Cs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,22)},set:function(s){s?this.Ff=As(this.Ff,22):this.Ff=Cs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,23)},set:function(s){s?this.Ff=As(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,27)},set:function(s){s?this.Ff=As(this.Ff,27):this.Ff=Cs(this.Ff,27)}}),this.hasAppearanceStream=!1};la(kd,wi);var Ad=function(){kd.call(this),this.fontName="helvetica",this.combo=!1};la(Ad,kd);var Cd=function(){Ad.call(this),this.combo=!0};la(Cd,Ad);var pf=function(){Cd.call(this),this.edit=!0};la(pf,Cd);var rn=function(){wi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,15)},set:function(s){s?this.Ff=As(this.Ff,15):this.Ff=Cs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,16)},set:function(s){s?this.Ff=As(this.Ff,16):this.Ff=Cs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,17)},set:function(s){s?this.Ff=As(this.Ff,17):this.Ff=Cs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,26)},set:function(s){s?this.Ff=As(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+Cc(s(r[a]))+")");return o.push(">>"),o.join(`
`)}},set:function(s){Ar(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}})};la(rn,wi);var gf=function(){rn.call(this),this.pushButton=!0};la(gf,rn);var Pd=function(){rn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};la(Pd,rn);var Of=function(){var t,r;wi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var s,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+Cc(o(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(o){Ar(o)==="object"&&(a=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(o){typeof o=="string"&&(a.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(o){s="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};la(Of,wi),Pd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var s=this.Kids[r];s.appearanceStreamContent=t.createAppearanceStream(s.optionName),s.caption=t.getCA()}},Pd.prototype.createOption=function(t){var r=new Of;return r.Parent=this,r.optionName=t,this.Kids.push(r),p8.call(this.scope,r),r};var xf=function(){rn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kt.CheckBox.createAppearanceStream()};la(xf,rn);var mc=function(){wi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,13)},set:function(r){r?this.Ff=As(this.Ff,13):this.Ff=Cs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,21)},set:function(r){r?this.Ff=As(this.Ff,21):this.Ff=Cs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,23)},set:function(r){r?this.Ff=As(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,24)},set:function(r){r?this.Ff=As(this.Ff,24):this.Ff=Cs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,25)},set:function(r){r?this.Ff=As(this.Ff,25):this.Ff=Cs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,26)},set:function(r){r?this.Ff=As(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};la(mc,wi);var yf=function(){mc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,14)},set:function(t){t?this.Ff=As(this.Ff,14):this.Ff=Cs(this.Ff,14)}}),this.password=!0};la(yf,mc);var kt={CheckBox:{createAppearanceStream:function(){return{N:{On:kt.CheckBox.YesNormal},D:{On:kt.CheckBox.YesPushDown,Off:kt.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=[],a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=b0(t,t.caption);return s.push("0.749023 g"),s.push("0 0 "+Yt(kt.internal.getWidth(t))+" "+Yt(kt.internal.getHeight(t))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+a+" "+Yt(l.fontSize)+" Tf "+o),s.push("BT"),s.push(l.text),s.push("ET"),s.push("Q"),s.push("EMC"),r.stream=s.join(`
`),r},YesNormal:function(t){var r=qi(t);r.scope=t.scope;var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=[],l=kt.internal.getHeight(t),d=kt.internal.getWidth(t),u=b0(t,t.caption);return o.push("1 g"),o.push("0 0 "+Yt(d)+" "+Yt(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Yt(d-1)+" "+Yt(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+s+" "+Yt(u.fontSize)+" Tf "+a),o.push(u.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Yt(kt.internal.getWidth(t))+" "+Yt(kt.internal.getHeight(t))+" re"),s.push("f"),r.stream=s.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:kt.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=kt.RadioButton.Circle.YesNormal,r.D[t]=kt.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=qi(t);r.scope=t.scope;var s=[],a=kt.internal.getWidth(t)<=kt.internal.getHeight(t)?kt.internal.getWidth(t)/4:kt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=kt.internal.Bezier_C,l=Number((a*o).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+bl(kt.internal.getWidth(t)/2)+" "+bl(kt.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),s.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),s.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),s.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r},YesPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=[],a=kt.internal.getWidth(t)<=kt.internal.getHeight(t)?kt.internal.getWidth(t)/4:kt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*kt.internal.Bezier_C).toFixed(5)),d=Number((a*kt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+bl(kt.internal.getWidth(t)/2)+" "+bl(kt.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+bl(kt.internal.getWidth(t)/2)+" "+bl(kt.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),s.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),s.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),s.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r},OffPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=[],a=kt.internal.getWidth(t)<=kt.internal.getHeight(t)?kt.internal.getWidth(t)/4:kt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*kt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+bl(kt.internal.getWidth(t)/2)+" "+bl(kt.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),r.stream=s.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:kt.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=kt.RadioButton.Cross.YesNormal,r.D[t]=kt.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=qi(t);r.scope=t.scope;var s=[],a=kt.internal.calculateCross(t);return s.push("q"),s.push("1 1 "+Yt(kt.internal.getWidth(t)-2)+" "+Yt(kt.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(Yt(a.x1.x)+" "+Yt(a.x1.y)+" m"),s.push(Yt(a.x2.x)+" "+Yt(a.x2.y)+" l"),s.push(Yt(a.x4.x)+" "+Yt(a.x4.y)+" m"),s.push(Yt(a.x3.x)+" "+Yt(a.x3.y)+" l"),s.push("s"),s.push("Q"),r.stream=s.join(`
`),r},YesPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=kt.internal.calculateCross(t),a=[];return a.push("0.749023 g"),a.push("0 0 "+Yt(kt.internal.getWidth(t))+" "+Yt(kt.internal.getHeight(t))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Yt(kt.internal.getWidth(t)-2)+" "+Yt(kt.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(Yt(s.x1.x)+" "+Yt(s.x1.y)+" m"),a.push(Yt(s.x2.x)+" "+Yt(s.x2.y)+" l"),a.push(Yt(s.x4.x)+" "+Yt(s.x4.y)+" m"),a.push(Yt(s.x3.x)+" "+Yt(s.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(t){var r=qi(t);r.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Yt(kt.internal.getWidth(t))+" "+Yt(kt.internal.getHeight(t))+" re"),s.push("f"),r.stream=s.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+s}};kt.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=kt.internal.getWidth(t),s=kt.internal.getHeight(t),a=Math.min(r,s);return{x1:{x:(r-a)/2,y:(s-a)/2+a},x2:{x:(r-a)/2+a,y:(s-a)/2},x3:{x:(r-a)/2,y:(s-a)/2},x4:{x:(r-a)/2+a,y:(s-a)/2+a}}}},kt.internal.getWidth=function(t){var r=0;return Ar(t)==="object"&&(r=f1(t.Rect[2])),r},kt.internal.getHeight=function(t){var r=0;return Ar(t)==="object"&&(r=f1(t.Rect[3])),r};var p8=ms.addField=function(t){if(m8(this,t),!(t instanceof wi))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ms.AcroFormChoiceField=kd,ms.AcroFormListBox=Ad,ms.AcroFormComboBox=Cd,ms.AcroFormEditBox=pf,ms.AcroFormButton=rn,ms.AcroFormPushButton=gf,ms.AcroFormRadioButton=Pd,ms.AcroFormCheckBox=xf,ms.AcroFormTextField=mc,ms.AcroFormPasswordField=yf,ms.AcroFormAppearance=kt,ms.AcroForm={ChoiceField:kd,ListBox:Ad,ComboBox:Cd,EditBox:pf,Button:rn,PushButton:gf,RadioButton:Pd,CheckBox:xf,TextField:mc,PasswordField:yf,Appearance:kt},Dt.AcroForm={ChoiceField:kd,ListBox:Ad,ComboBox:Cd,EditBox:pf,Button:rn,PushButton:gf,RadioButton:Pd,CheckBox:xf,TextField:mc,PasswordField:yf,Appearance:kt};Dt.AcroForm;function dv(t){return t.reduce(function(r,s,a){return r[s]=a,r},{})}(function(t){var r="addImage_";t.__addimage__={};var s="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(I,q){var U,J,be,ge,T,re=s;if((q=q||s)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(se(I))for(T in a)for(be=a[T],U=0;U<be.length;U+=1){for(ge=!0,J=0;J<be[U].length;J+=1)if(be[U][J]!==void 0&&be[U][J]!==I[J]){ge=!1;break}if(ge===!0){re=T;break}}else for(T in a)for(be=a[T],U=0;U<be.length;U+=1){for(ge=!0,J=0;J<be[U].length;J+=1)if(be[U][J]!==void 0&&be[U][J]!==I.charCodeAt(J)){ge=!1;break}if(ge===!0){re=T;break}}return re===s&&q!==s&&(re=q),re},l=function I(q){for(var U=this.internal.write,J=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:q.width}),ge.push({key:"Height",value:q.height}),q.colorSpace===L.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===L.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)){for(var T="",re=0,fe=q.transparency.length;re<fe;re++)T+=q.transparency[re]+" "+q.transparency[re]+" ";ge.push({key:"Mask",value:"["+T+"]"})}q.sMask!==void 0&&ge.push({key:"SMask",value:q.objectId+1+" 0 R"});var Se=q.filter!==void 0?["/"+q.filter]:void 0;if(J({data:q.data,additionalKeyValues:ge,alreadyAppliedFilters:Se,objectId:q.objectId}),U("endobj"),"sMask"in q&&q.sMask!==void 0){var ee=(q.predictor!=null?"/Predictor "+q.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+q.width,D={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:q.bitsPerComponent,decodeParameters:ee,data:q.sMask};"filter"in q&&(D.filter=q.filter),I.call(this,D)}if(q.colorSpace===L.INDEXED){var $=this.internal.newObject();J({data:K(new Uint8Array(q.palette)),objectId:$}),U("endobj")}},d=function(){var I=this.internal.collections[r+"images"];for(var q in I)l.call(this,I[q])},u=function(){var I,q=this.internal.collections[r+"images"],U=this.internal.write;for(var J in q)U("/I"+(I=q[J]).index,I.objectId,"0","R")},h=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var I=this.internal.collections[r+"images"];return h.call(this),I},p=function(){return Object.keys(this.internal.collections[r+"images"]).length},v=function(I){return typeof t["process"+I.toUpperCase()]=="function"},N=function(I){return Ar(I)==="object"&&I.nodeType===1},y=function(I,q){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var U=""+I.getAttribute("src");if(U.indexOf("data:image/")===0)return mf(unescape(U).split("base64,").pop());var J=t.loadFile(U,!0);if(J!==void 0)return J}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var be;switch(q){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return mf(I.toDataURL(be,1).split("base64,").pop())}},A=function(I){var q=this.internal.collections[r+"images"];if(q){for(var U in q)if(I===q[U].alias)return q[U]}},C=function(I,q,U){return I||q||(I=-96,q=-96),I<0&&(I=-1*U.width*72/I/this.internal.scaleFactor),q<0&&(q=-1*U.height*72/q/this.internal.scaleFactor),I===0&&(I=q*U.width/U.height),q===0&&(q=I*U.height/U.width),[I,q]},S=function(I,q,U,J,be,ge){var T=C.call(this,U,J,be),re=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,Se=m.call(this);if(U=T[0],J=T[1],Se[be.index]=be,ge){ge*=Math.PI/180;var ee=Math.cos(ge),D=Math.sin(ge),$=function(ne){return ne.toFixed(4)},W=[$(ee),$(D),$(-1*D),$(ee),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,re(I),fe(q+J),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([re(U),"0","0",re(J),"0","0","cm"].join(" "))):this.internal.write([re(U),"0","0",re(J),re(I),fe(q+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},L=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=t.__addimage__.sHashCode=function(I){var q,U,J=0;if(typeof I=="string")for(U=I.length,q=0;q<U;q++)J=(J<<5)-J+I.charCodeAt(q),J|=0;else if(se(I))for(U=I.byteLength/2,q=0;q<U;q++)J=(J<<5)-J+I[q],J|=0;return J},F=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var q=!0;return I.length===0&&(q=!1),I.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(q=!1),q},O=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var q=I.indexOf(",");return q<0?null:I.substring(0,q).trim().endsWith("base64")?I.substring(q+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var se=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},X=t.__addimage__.binaryStringToUint8Array=function(I){for(var q=I.length,U=new Uint8Array(q),J=0;J<q;J++)U[J]=I.charCodeAt(J);return U},K=t.__addimage__.arrayBufferToBinaryString=function(I){for(var q="",U=se(I)?I:new Uint8Array(I),J=0;J<U.length;J+=8192)q+=String.fromCharCode.apply(null,U.subarray(J,J+8192));return q};t.addImage=function(){var I,q,U,J,be,ge,T,re,fe;if(typeof arguments[1]=="number"?(q=s,U=arguments[1],J=arguments[2],be=arguments[3],ge=arguments[4],T=arguments[5],re=arguments[6],fe=arguments[7]):(q=arguments[1],U=arguments[2],J=arguments[3],be=arguments[4],ge=arguments[5],T=arguments[6],re=arguments[7],fe=arguments[8]),Ar(I=arguments[0])==="object"&&!N(I)&&"imageData"in I){var Se=I;I=Se.imageData,q=Se.format||q||s,U=Se.x||U||0,J=Se.y||J||0,be=Se.w||Se.width||be,ge=Se.h||Se.height||ge,T=Se.alias||T,re=Se.compression||re,fe=Se.rotation||Se.angle||fe}var ee=this.internal.getFilters();if(re===void 0&&ee.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(U)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var D=Y.call(this,I,q,T,re);return S.call(this,U,J,be,ge,D,fe),this};var Y=function(I,q,U,J){var be,ge,T;if(typeof I=="string"&&o(I)===s){I=unescape(I);var re=ie(I,!1);(re!==""||(re=t.loadFile(I,!0))!==void 0)&&(I=re)}if(N(I)&&(I=y(I,q)),q=o(I,q),!v(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((T=U)==null||T.length===0)&&(U=(function(fe){return typeof fe=="string"||se(fe)?P(fe):se(fe.data)?P(fe.data):null})(I)),(be=A.call(this,U))||(I instanceof Uint8Array||q==="RGBA"||(ge=I,I=X(I)),be=this["process"+q.toUpperCase()](I,p.call(this),U,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in t.image_compression?fe:E.NONE})(J),ge)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},ie=t.__addimage__.convertBase64ToBinaryString=function(I,q){q=typeof q!="boolean"||q;var U,J="";if(typeof I=="string"){var be;U=(be=O(I))!==null&&be!==void 0?be:I;try{J=mf(U)}catch(ge){if(q)throw F(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(I){var q,U,J="";if(N(I)&&(I=y(I)),typeof I=="string"&&o(I)===s&&((J=ie(I,!1))===""&&(J=t.loadFile(I)||""),I=J),U=o(I),!v(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(I instanceof Uint8Array||(I=X(I)),!(q=this["process"+U.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=U,q}})(Dt.API),(function(t){var r=function(s){if(s!==void 0&&s!="")return!0};Dt.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(s){for(var a,o,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(s.objId),m=s.pageContext.annotations,p=!1,v=0;v<m.length&&!p;v++)switch((a=m[v]).type){case"link":(r(a.options.url)||r(a.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var N=0;N<m.length;N++){a=m[N];var y=this.internal.pdfEscape,A=this.internal.getEncryptor(s.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(C.objId),E=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+y(L(a.contents))+")",l+=" /Popup "+S.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+y(L(E))+") >>",C.content=l;var P=C.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+d(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+P,a.open&&(l+=" /Open true"),l+=" >>",S.content=l,this.internal.write(C.objId,"0 R",S.objId,"0 R");break;case"freetext":o="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var F=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+y(A(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var O=this.annotations._nameMap[a.options.name];a.options.pageNumber=O.page,a.options.top=O.y}else a.options.top||(a.options.top=0);if(o="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+y(A(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;default:var se=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+se+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(s){var a=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":a.pageContext.annotations.push(s)}},t.link=function(s,a,o,l,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(s),y:m(a),w:h(s+o),h:m(a+l)},options:d,type:"link"})},t.textWithLink=function(s,a,o,l){var d,u,h=this.getTextWidth(s),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var p=this.splitTextToSize(s,u).length;d=Math.ceil(m*p)}else u=h,d=m;return this.text(s,a,o,l),o+=.2*m,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,o-m,u,d,l),h},t.getTextWidth=function(s){var a=this.internal.getFontSize();return this.getStringUnitWidth(s)*a/this.internal.scaleFactor}})(Dt.API),(function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(C){return r[C.charCodeAt(0)]!==void 0},d=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},u=t.__arabicParser__.isArabicEndLetter=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(C){return d(C)&&o.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return d(C)&&l(C)&&r[C.charCodeAt(0)].length==4},v=t.__arabicParser__.resolveLigatures=function(C){var S=0,L=s,E="",P=0;for(S=0;S<C.length;S+=1)L[C.charCodeAt(S)]!==void 0?(P++,typeof(L=L[C.charCodeAt(S)])=="number"&&(E+=String.fromCharCode(L),L=s,P=0),S===C.length-1&&(L=s,E+=C.charAt(S-(P-1)),S-=P-1,P=0)):(L=s,E+=C.charAt(S-P),S-=P,P=0);return E};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&a[C.charCodeAt(0)]!==void 0};var N=t.__arabicParser__.getCorrectForm=function(C,S,L){return d(C)?l(C)===!1?-1:!m(C)||!d(S)&&!d(L)||!d(L)&&u(S)||u(C)&&!d(S)||u(C)&&h(S)||u(C)&&u(S)?0:p(C)&&d(S)&&!u(S)&&d(L)&&m(L)?3:u(C)||!d(L)?1:2:-1},y=function(C){var S=0,L=0,E=0,P="",F="",O="",se=(C=C||"").split("\\s+"),X=[];for(S=0;S<se.length;S+=1){for(X.push(""),L=0;L<se[S].length;L+=1)P=se[S][L],F=se[S][L-1],O=se[S][L+1],d(P)?(E=N(P,F,O),X[S]+=E!==-1?String.fromCharCode(r[P.charCodeAt(0)][E]):P):X[S]+=P;X[S]=v(X[S])}return X.join(" ")},A=t.__arabicParser__.processArabic=t.processArabic=function(){var C,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(S)){var E=0;for(L=[],E=0;E<S.length;E+=1)Array.isArray(S[E])?L.push([y(S[E][0]),S[E][1],S[E][2]]):L.push([y(S[E])]);C=L}else C=y(S);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",A])})(Dt.API),Dt.API.autoPrint=function(t){var r;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(t){var r=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(u){s=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(s,a){var o;if((s=s||"2d")!=="2d")return null;for(o in a)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=a[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(Dt.API),(function(t){var r={left:0,top:0,bottom:0,right:0},s=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(C){m=C}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(C){N=C}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(C){A=C}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,m){a.call(this);var p=(m=m||{}).fontSize||this.getFontSize(),v=m.font||this.getFont(),N=m.scaleFactor||this.internal.scaleFactor,y=0,A=0,C=0,S=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var L=m.maxWidth;L>0?typeof h=="string"?h=this.splitTextToSize(h,L):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(P,F){return P.concat(S.splitTextToSize(F,L))},[])):h=Array.isArray(h)?h:[h];for(var E=0;E<h.length;E++)y<(C=this.getStringUnitWidth(h[E],{font:v})*p)&&(y=C);return y!==0&&(A=h.length),{w:y/=N,h:Math.max((A*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/N,0)}},t.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=t.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var m=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,v=this.internal.__cell__.margins||r,N=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===h.lineNumber?(h.x=(m.x||0)+(m.width||0),h.y=m.y||0):m.y+m.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,y&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=m.y+m.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,s===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};t.table=function(h,m,p,v,N){if(a.call(this),!p)throw new Error("No data for PDF table.");var y,A,C,S,L=[],E=[],P=[],F={},O={},se=[],X=[],K=(N=N||{}).autoSize||!1,Y=N.printHeaders!==!1,ie=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,I=N.margins||Object.assign({width:this.getPageWidth()},r),q=typeof N.padding=="number"?N.padding:3,U=N.headerBackgroundColor||"#c8c8c8",J=N.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=ie,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=J,this.setFontSize(ie),v==null)E=L=Object.keys(p[0]),P=L.map(function(){return"left"});else if(Array.isArray(v)&&Ar(v[0])==="object")for(L=v.map(function(Se){return Se.name}),E=v.map(function(Se){return Se.prompt||Se.name||""}),P=v.map(function(Se){return Se.align||"left"}),y=0;y<v.length;y+=1)O[v[y].name]=.7499990551181103*v[y].width;else Array.isArray(v)&&typeof v[0]=="string"&&(E=L=v,P=L.map(function(){return"left"}));if(K||Array.isArray(v)&&typeof v[0]=="string")for(y=0;y<L.length;y+=1){for(F[S=L[y]]=p.map(function(Se){return Se[S]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(E[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=F[S],this.setFont(void 0,"normal"),C=0;C<A.length;C+=1)se.push(this.getTextDimensions(A[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[S]=Math.max.apply(null,se)+q+q,se=[]}if(Y){var be={};for(y=0;y<L.length;y+=1)be[L[y]]={},be[L[y]].text=E[y],be[L[y]].align=P[y];var ge=u.call(this,be,O);X=L.map(function(Se){return new l(h,m,O[Se],ge,be[Se].text,void 0,be[Se].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var T=v.reduce(function(Se,ee){return Se[ee.name]=ee.align,Se},{});for(y=0;y<p.length;y+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:y,data:p[y]},this);var re=u.call(this,p[y],O);for(C=0;C<L.length;C+=1){var fe=p[y][L[C]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:y,col:C,data:fe},this),d.call(this,new l(h,m,O[L[C]],re,fe,y+2,T[L[C]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=m,this};var u=function(h,m){var p=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(y){var A=h[y];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,m[y]-p-p)},this).map(function(y){return this.getLineHeightFactor()*y.length*v/N+p+p},this).reduce(function(y,A){return Math.max(y,A)},0)};t.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,m){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){p=this.internal.__cell__.tableHeaderRow[y].clone(),m&&(p.y=this.internal.__cell__.margins.top||0,N.push(p)),p.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,p),this.setTextColor(A)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),s=!1}})(Dt.API);var uv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],v0=dv(hv),fv=[100,200,300,400,500,600,700,800,900],g8=dv(fv);function Fp(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),s=(function(l){return uv[l=l||"normal"]?l:"normal"})(t.style),a=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(t.weight),o=(function(l){return typeof v0[l=l||"normal"]=="number"?l:"normal"})(t.stretch);return{family:r,style:s,weight:a,stretch:o,src:t.src||[],ref:t.ref||{name:r,style:[o,s,a].join(" ")}}}function m1(t,r,s,a){var o;for(o=s;o>=0&&o<r.length;o+=a)if(t[r[o]])return t[r[o]];for(o=s;o>=0&&o<r.length;o-=a)if(t[r[o]])return t[r[o]]}var x8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function g1(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function x1(t){return t.trimLeft()}function y8(t,r){for(var s=0;s<t.length;){if(t.charAt(s)===r)return[t.substring(0,s),t.substring(s+1)];s+=1}return null}function b8(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var Yh,y1,b1,gd,Jh,v1,w1,N1,Tp=["times"];function j1(t,r,s,a){var o=4,l=k1;switch(a){case Dt.API.image_compression.FAST:o=1,l=S1;break;case Dt.API.image_compression.MEDIUM:o=6,l=A1;break;case Dt.API.image_compression.SLOW:o=9,l=C1}t=(function(u,h,m,p){for(var v,N=u.length/h,y=new Uint8Array(u.length+N),A=[v8,S1,k1,A1,C1],C=0;C<N;C+=1){var S=C*h,L=u.subarray(S,S+h);if(p)y.set(p(L,m,v),S+C);else{for(var E=A.length,P=[],F=0;F<E;F+=1)P[F]=A[F](L,m,v);var O=N8(P.concat());y.set(P[O],S+C)}v=L}return y})(t,r,s,l);var d=f0(t,{level:o});return Dt.API.__addimage__.arrayBufferToBinaryString(d)}function v8(t){var r=Array.apply([],t);return r.unshift(0),r}function S1(t,r){var s=t.length,a=[];a[0]=1;for(var o=0;o<s;o+=1){var l=t[o-r]||0;a[o+1]=t[o]-l+256&255}return a}function k1(t,r,s){var a=t.length,o=[];o[0]=2;for(var l=0;l<a;l+=1){var d=s&&s[l]||0;o[l+1]=t[l]-d+256&255}return o}function A1(t,r,s){var a=t.length,o=[];o[0]=3;for(var l=0;l<a;l+=1){var d=t[l-r]||0,u=s&&s[l]||0;o[l+1]=t[l]+256-(d+u>>>1)&255}return o}function C1(t,r,s){var a=t.length,o=[];o[0]=4;for(var l=0;l<a;l+=1){var d=w8(t[l-r]||0,s&&s[l]||0,s&&s[l-r]||0);o[l+1]=t[l]-d+256&255}return o}function w8(t,r,s){if(t===r&&r===s)return t;var a=Math.abs(r-s),o=Math.abs(t-s),l=Math.abs(t+r-s-s);return a<=o&&a<=l?t:o<=l?r:s}function N8(t){var r=t.map(function(s){return s.reduce(function(a,o){return a+Math.abs(o)},0)});return r.indexOf(Math.min.apply(null,r))}function Op(t,r,s){var a=r*s,o=Math.floor(a/8),l=16-(a-8*o+s),d=(1<<s)-1;return mv(t,o)>>l&d}function P1(t,r,s,a){var o=s*a,l=Math.floor(o/8),d=16-(o-8*l+a),u=(1<<a)-1,h=(r&u)<<d;(function(m,p,v){if(p+1<m.byteLength)m.setUint16(p,v,!1);else{var N=v>>8&255;m.setUint8(p,N)}})(t,l,mv(t,l)&~(u<<d)&65535|h)}function mv(t,r){return r+1<t.byteLength?t.getUint16(r,!1):t.getUint8(r)<<8}function j8(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=t[r++]|t[r++]<<8,a=t[r++]|t[r++]<<8,o=t[r++],l=o>>7,d=1<<1+(7&o);t[r++],t[r++];var u=null,h=null;l&&(u=r,h=d,r+=3*d);var m=!0,p=[],v=0,N=null,y=0,A=null;for(this.width=s,this.height=a;m&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,A=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[r++];v=t[r++]|t[r++]<<8,N=t[r++],1&C||(N=null),y=C>>2&7,r++;break;case 254:for(;;){if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var S=t[r++]|t[r++]<<8,L=t[r++]|t[r++]<<8,E=t[r++]|t[r++]<<8,P=t[r++]|t[r++]<<8,F=t[r++],O=F>>6&1,se=1<<1+(7&F),X=u,K=h,Y=!1;F>>7&&(Y=!0,X=r,K=se,r+=3*se);var ie=r;for(r++;;){var I;if(!((I=t[r++])>=0))throw Error("Invalid block size");if(I===0)break;r+=I}p.push({x:S,y:L,width:E,height:P,has_local_palette:Y,palette_offset:X,palette_size:K,data_offset:ie,data_length:r-ie,transparent_index:N,interlaced:!!O,delay:v,disposal:y});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(q){if(q<0||q>=p.length)throw new Error("Frame index out of range.");return p[q]},this.decodeAndBlitFrameBGRA=function(q,U){var J=this.frameInfo(q),be=J.width*J.height,ge=new Uint8Array(be);_1(t,J.data_offset,ge,be);var T=J.palette_offset,re=J.transparent_index;re===null&&(re=256);var fe=J.width,Se=s-fe,ee=fe,D=4*(J.y*s+J.x),$=4*((J.y+J.height)*s+J.x),W=D,ne=4*Se;J.interlaced===!0&&(ne+=4*s*7);for(var H=8,Q=0,ue=ge.length;Q<ue;++Q){var xe=ge[Q];if(ee===0&&(ee=fe,(W+=ne)>=$&&(ne=4*Se+4*s*(H-1),W=D+(fe+Se)*(H<<1),H>>=1)),xe===re)W+=4;else{var Ee=t[T+3*xe],me=t[T+3*xe+1],De=t[T+3*xe+2];U[W++]=De,U[W++]=me,U[W++]=Ee,U[W++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(q,U){var J=this.frameInfo(q),be=J.width*J.height,ge=new Uint8Array(be);_1(t,J.data_offset,ge,be);var T=J.palette_offset,re=J.transparent_index;re===null&&(re=256);var fe=J.width,Se=s-fe,ee=fe,D=4*(J.y*s+J.x),$=4*((J.y+J.height)*s+J.x),W=D,ne=4*Se;J.interlaced===!0&&(ne+=4*s*7);for(var H=8,Q=0,ue=ge.length;Q<ue;++Q){var xe=ge[Q];if(ee===0&&(ee=fe,(W+=ne)>=$&&(ne=4*Se+4*s*(H-1),W=D+(fe+Se)*(H<<1),H>>=1)),xe===re)W+=4;else{var Ee=t[T+3*xe],me=t[T+3*xe+1],De=t[T+3*xe+2];U[W++]=Ee,U[W++]=me,U[W++]=De,U[W++]=255}--ee}}}function _1(t,r,s,a){for(var o=t[r++],l=1<<o,d=l+1,u=d+1,h=o+1,m=(1<<h)-1,p=0,v=0,N=0,y=t[r++],A=new Int32Array(4096),C=null;;){for(;p<16&&y!==0;)v|=t[r++]<<p,p+=8,y===1?y=t[r++]:--y;if(p<h)break;var S=v&m;if(v>>=h,p-=h,S!==l){if(S===d)break;for(var L=S<u?S:C,E=0,P=L;P>l;)P=A[P]>>8,++E;var F=P;if(N+E+(L!==S?1:0)>a)return void Ir.log("Warning, gif stream longer than expected.");s[N++]=F;var O=N+=E;for(L!==S&&(s[N++]=F),P=L;E--;)P=A[P],s[--O]=255&P,P>>=8;C!==null&&u<4096&&(A[u++]=C<<8|F,u>=m+1&&h<12&&(++h,m=m<<1|1)),C=S}else u=d+1,m=(1<<(h=o+1))-1,C=null}return N!==a&&Ir.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rp(t){var r,s,a,o,l,d=Math.floor,u=new Array(64),h=new Array(64),m=new Array(64),p=new Array(64),v=new Array(65535),N=new Array(65535),y=new Array(64),A=new Array(64),C=[],S=0,L=7,E=new Array(64),P=new Array(64),F=new Array(64),O=new Array(256),se=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(D,$){for(var W=0,ne=0,H=new Array,Q=1;Q<=16;Q++){for(var ue=1;ue<=D[Q];ue++)H[$[ne]]=[],H[$[ne]][0]=W,H[$[ne]][1]=Q,ne++,W++;W*=2}return H}function T(D){for(var $=D[0],W=D[1]-1;W>=0;)$&1<<W&&(S|=1<<L),W--,--L<0&&(S==255?(re(255),re(0)):re(S),L=7,S=0)}function re(D){C.push(D)}function fe(D){re(D>>8&255),re(255&D)}function Se(D,$,W,ne,H){for(var Q,ue=H[0],xe=H[240],Ee=(function(Ke,ce){var pe,Ce,$e,Ge,Ue,Je,jt,ot,lt,_t,ut=0;for(lt=0;lt<8;++lt){pe=Ke[ut],Ce=Ke[ut+1],$e=Ke[ut+2],Ge=Ke[ut+3],Ue=Ke[ut+4],Je=Ke[ut+5],jt=Ke[ut+6];var hr=pe+(ot=Ke[ut+7]),zt=pe-ot,pt=Ce+jt,Tt=Ce-jt,nr=$e+Je,Et=$e-Je,Gt=Ge+Ue,Re=Ge-Ue,it=hr+Gt,ct=hr-Gt,ht=pt+nr,nt=pt-nr;Ke[ut]=it+ht,Ke[ut+4]=it-ht;var at=.707106781*(nt+ct);Ke[ut+2]=ct+at,Ke[ut+6]=ct-at;var Jt=.382683433*((it=Re+Et)-(nt=Tt+zt)),ar=.5411961*it+Jt,It=1.306562965*nt+Jt,pr=.707106781*(ht=Et+Tt),ft=zt+pr,wr=zt-pr;Ke[ut+5]=wr+ar,Ke[ut+3]=wr-ar,Ke[ut+1]=ft+It,Ke[ut+7]=ft-It,ut+=8}for(ut=0,lt=0;lt<8;++lt){pe=Ke[ut],Ce=Ke[ut+8],$e=Ke[ut+16],Ge=Ke[ut+24],Ue=Ke[ut+32],Je=Ke[ut+40],jt=Ke[ut+48];var xs=pe+(ot=Ke[ut+56]),Yr=pe-ot,Jr=Ce+jt,ir=Ce-jt,Xt=$e+Je,yr=$e-Je,is=Ge+Ue,Lr=Ge-Ue,Ws=xs+is,sn=xs-is,zr=Jr+Xt,ys=Jr-Xt;Ke[ut]=Ws+zr,Ke[ut+32]=Ws-zr;var In=.707106781*(ys+sn);Ke[ut+16]=sn+In,Ke[ut+48]=sn-In;var Zi=.382683433*((Ws=Lr+yr)-(ys=ir+Yr)),ca=.5411961*Ws+Zi,ji=1.306562965*ys+Zi,eo=.707106781*(zr=yr+ir),to=Yr+eo,Bo=Yr-eo;Ke[ut+40]=Bo+ca,Ke[ut+24]=Bo-ca,Ke[ut+8]=to+ji,Ke[ut+56]=to-ji,ut++}for(lt=0;lt<64;++lt)_t=Ke[lt]*ce[lt],y[lt]=_t>0?_t+.5|0:_t-.5|0;return y})(D,$),me=0;me<64;++me)A[X[me]]=Ee[me];var De=A[0]-W;W=A[0],De==0?T(ne[0]):(T(ne[N[Q=32767+De]]),T(v[Q]));for(var Ze=63;Ze>0&&A[Ze]==0;)Ze--;if(Ze==0)return T(ue),W;for(var Te,de=1;de<=Ze;){for(var Fe=de;A[de]==0&&de<=Ze;)++de;var st=de-Fe;if(st>=16){Te=st>>4;for(var dt=1;dt<=Te;++dt)T(xe);st&=15}Q=32767+A[de],T(H[(st<<4)+N[Q]]),T(v[Q]),de++}return Ze!=63&&T(ue),W}function ee(D){D=Math.min(Math.max(D,1),100),l!=D&&((function($){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var H=d((W[ne]*$+50)/100);H=Math.min(Math.max(H,1),255),u[X[ne]]=H}for(var Q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var xe=d((Q[ue]*$+50)/100);xe=Math.min(Math.max(xe,1),255),h[X[ue]]=xe}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,De=0;De<8;De++)for(var Ze=0;Ze<8;Ze++)m[me]=1/(u[X[me]]*Ee[De]*Ee[Ze]*8),p[me]=1/(h[X[me]]*Ee[De]*Ee[Ze]*8),me++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),l=D)}this.encode=function(D,$){$&&ee($),C=new Array,S=0,L=7,fe(65496),fe(65504),fe(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),fe(1),fe(1),re(0),re(0),(function(){fe(65499),fe(132),re(0);for(var Ce=0;Ce<64;Ce++)re(u[Ce]);re(1);for(var $e=0;$e<64;$e++)re(h[$e])})(),(function(Ce,$e){fe(65472),fe(17),re(8),fe($e),fe(Ce),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(D.width,D.height),(function(){fe(65476),fe(418),re(0);for(var Ce=0;Ce<16;Ce++)re(K[Ce+1]);for(var $e=0;$e<=11;$e++)re(Y[$e]);re(16);for(var Ge=0;Ge<16;Ge++)re(ie[Ge+1]);for(var Ue=0;Ue<=161;Ue++)re(I[Ue]);re(1);for(var Je=0;Je<16;Je++)re(q[Je+1]);for(var jt=0;jt<=11;jt++)re(U[jt]);re(17);for(var ot=0;ot<16;ot++)re(J[ot+1]);for(var lt=0;lt<=161;lt++)re(be[lt])})(),fe(65498),fe(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var W=0,ne=0,H=0;S=0,L=7,this.encode.displayName="_encode_";for(var Q,ue,xe,Ee,me,De,Ze,Te,de,Fe=D.data,st=D.width,dt=D.height,Ke=4*st,ce=0;ce<dt;){for(Q=0;Q<Ke;){for(me=Ke*ce+Q,Ze=-1,Te=0,de=0;de<64;de++)De=me+(Te=de>>3)*Ke+(Ze=4*(7&de)),ce+Te>=dt&&(De-=Ke*(ce+1+Te-dt)),Q+Ze>=Ke&&(De-=Q+Ze-Ke+4),ue=Fe[De++],xe=Fe[De++],Ee=Fe[De++],E[de]=(se[ue]+se[xe+256|0]+se[Ee+512|0]>>16)-128,P[de]=(se[ue+768|0]+se[xe+1024|0]+se[Ee+1280|0]>>16)-128,F[de]=(se[ue+1280|0]+se[xe+1536|0]+se[Ee+1792|0]>>16)-128;W=Se(E,m,W,r,a),ne=Se(P,p,ne,s,o),H=Se(F,p,H,s,o),Q+=32}ce+=8}if(L>=0){var pe=[];pe[1]=L+1,pe[0]=(1<<L+1)-1,T(pe)}return fe(65497),new Uint8Array(C)},t=t||50,(function(){for(var D=String.fromCharCode,$=0;$<256;$++)O[$]=D($)})(),r=ge(K,Y),s=ge(q,U),a=ge(ie,I),o=ge(J,be),(function(){for(var D=1,$=2,W=1;W<=15;W++){for(var ne=D;ne<$;ne++)N[32767+ne]=W,v[32767+ne]=[],v[32767+ne][1]=W,v[32767+ne][0]=ne;for(var H=-($-1);H<=-D;H++)N[32767+H]=W,v[32767+H]=[],v[32767+H][1]=W,v[32767+H][0]=$-1+H;D<<=1,$<<=1}})(),(function(){for(var D=0;D<256;D++)se[D]=19595*D,se[D+256|0]=38470*D,se[D+512|0]=7471*D+32768,se[D+768|0]=-11059*D,se[D+1024|0]=-21709*D,se[D+1280|0]=32768*D+8421375,se[D+1536|0]=-27439*D,se[D+1792|0]=-5329*D})(),ee(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ui(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function L1(t){function r(Y){if(!Y)throw Error("assert :P")}function s(Y,ie,I){for(var q=0;4>q;q++)if(Y[ie+q]!=I.charCodeAt(q))return!0;return!1}function a(Y,ie,I,q,U){for(var J=0;J<U;J++)Y[ie+J]=I[q+J]}function o(Y,ie,I,q){for(var U=0;U<q;U++)Y[ie+U]=I}function l(Y){return new Int32Array(Y)}function d(Y,ie){for(var I=[],q=0;q<Y;q++)I.push(new ie);return I}function u(Y,ie){var I=[];return(function q(U,J,be){for(var ge=be[J],T=0;T<ge&&(U.push(be.length>J+1?[]:new ie),!(be.length<J+1));T++)q(U[T],J+1,be)})(I,0,Y),I}var h=function(){var Y=this;function ie(f,x){for(var j=1<<x-1>>>0;f&j;)j>>>=1;return j?(f&j-1)+j:f}function I(f,x,j,_,B){r(!(_%j));do f[x+(_-=j)]=B;while(0<_)}function q(f,x,j,_,B){if(r(2328>=B),512>=B)var V=l(512);else if((V=l(B))==null)return 0;return(function(G,Z,te,ae,ve,Pe){var oe,Ne,Ae=Z,ze=1<<te,Le=l(16),Me=l(16);for(r(ve!=0),r(ae!=null),r(G!=null),r(0<te),Ne=0;Ne<ve;++Ne){if(15<ae[Ne])return 0;++Le[ae[Ne]]}if(Le[0]==ve)return 0;for(Me[1]=0,oe=1;15>oe;++oe){if(Le[oe]>1<<oe)return 0;Me[oe+1]=Me[oe]+Le[oe]}for(Ne=0;Ne<ve;++Ne)oe=ae[Ne],0<ae[Ne]&&(Pe[Me[oe]++]=Ne);if(Me[15]==1)return(ae=new U).g=0,ae.value=Pe[0],I(G,Ae,1,ze,ae),ze;var qe,He=-1,We=ze-1,Ct=0,xt=1,Wt=1,Nt=1<<te;for(Ne=0,oe=1,ve=2;oe<=te;++oe,ve<<=1){if(xt+=Wt<<=1,0>(Wt-=Le[oe]))return 0;for(;0<Le[oe];--Le[oe])(ae=new U).g=oe,ae.value=Pe[Ne++],I(G,Ae+Ct,ve,Nt,ae),Ct=ie(Ct,oe)}for(oe=te+1,ve=2;15>=oe;++oe,ve<<=1){if(xt+=Wt<<=1,0>(Wt-=Le[oe]))return 0;for(;0<Le[oe];--Le[oe]){if(ae=new U,(Ct&We)!=He){for(Ae+=Nt,qe=1<<(He=oe)-te;15>He&&!(0>=(qe-=Le[He]));)++He,qe<<=1;ze+=Nt=1<<(qe=He-te),G[Z+(He=Ct&We)].g=qe+te,G[Z+He].value=Ae-Z-He}ae.g=oe-te,ae.value=Pe[Ne++],I(G,Ae+(Ct>>te),ve,Nt,ae),Ct=ie(Ct,oe)}}return xt!=2*Me[15]-1?0:ze})(f,x,j,_,B,V)}function U(){this.value=this.g=0}function J(){this.value=this.g=0}function be(){this.G=d(5,U),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(ln,J)}function ge(f,x,j,_){r(f!=null),r(x!=null),r(2147483648>_),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=j,f.Jd=x,f.Yc=j+_,f.Zc=4<=_?j+_-4+1:j,ue(f)}function T(f,x){for(var j=0;0<x--;)j|=Ee(f,128)<<x;return j}function re(f,x){var j=T(f,x);return xe(f)?-j:j}function fe(f,x,j,_){var B,V=0;for(r(f!=null),r(x!=null),r(4294967288>_),f.Sb=_,f.Ra=0,f.u=0,f.h=0,4<_&&(_=4),B=0;B<_;++B)V+=x[j+B]<<8*B;f.Ra=V,f.bb=_,f.oa=x,f.pa=j}function Se(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Ei-8>>>0,++f.bb,f.u-=8;ne(f)&&(f.h=1,f.u=0)}function ee(f,x){if(r(0<=x),!f.h&&x<=ql){var j=W(f)&Li[x];return f.u+=x,Se(f),j}return f.h=1,f.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(f){return f.Ra>>>(f.u&Ei-1)>>>0}function ne(f){return r(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Ei}function H(f,x){f.u=x,f.h=ne(f)}function Q(f){f.u>=$r&&(r(f.u>=$r),Se(f))}function ue(f){r(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(r(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function xe(f){return T(f,1)}function Ee(f,x){var j=f.Ca;0>f.b&&ue(f);var _=f.b,B=j*x>>>8,V=(f.I>>>_>B)+0;for(V?(j-=B,f.I-=B+1<<_>>>0):j=B+1,_=j,B=0;256<=_;)B+=8,_>>=8;return _=7^B+qc[_],f.b-=_,f.Ca=(j<<_)-1,V}function me(f,x,j){f[x+0]=j>>24&255,f[x+1]=j>>16&255,f[x+2]=j>>8&255,f[x+3]=255&j}function De(f,x){return f[x+0]|f[x+1]<<8}function Ze(f,x){return De(f,x)|f[x+2]<<16}function Te(f,x){return De(f,x)|De(f,x+2)<<16}function de(f,x){var j=1<<x;return r(f!=null),r(0<x),f.X=l(j),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function Fe(f,x){r(f!=null),r(x!=null),r(f.Xa==x.Xa),a(x.X,0,f.X,0,1<<x.Xa)}function st(){this.X=[],this.Xa=this.Mb=0}function dt(f,x,j,_){r(j!=null),r(_!=null);var B=j[0],V=_[0];return B==0&&(B=(f*V+x/2)/x),V==0&&(V=(x*B+f/2)/f),0>=B||0>=V?0:(j[0]=B,_[0]=V,1)}function Ke(f,x){return f+(1<<x)-1>>>x}function ce(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function pe(f,x){Y[x]=function(j,_,B,V,G,Z,te){var ae;for(ae=0;ae<G;++ae){var ve=Y[f](Z[te+ae-1],B,V+ae);Z[te+ae]=ce(j[_+ae],ve)}}}function Ce(){this.ud=this.hd=this.jd=0}function $e(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Ge(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Ue(f,x){return Ge(f+(f-x+.5>>1))}function Je(f,x,j){return Math.abs(x-j)-Math.abs(f-j)}function jt(f,x,j,_,B,V,G){for(_=V[G-1],j=0;j<B;++j)V[G+j]=_=ce(f[x+j],_)}function ot(f,x,j,_,B){var V;for(V=0;V<j;++V){var G=f[x+V],Z=G>>8&255,te=16711935&(te=(te=16711935&G)+((Z<<16)+Z));_[B+V]=(4278255360&G)+te>>>0}}function lt(f,x){x.jd=255&f,x.hd=f>>8&255,x.ud=f>>16&255}function _t(f,x,j,_,B,V){var G;for(G=0;G<_;++G){var Z=x[j+G],te=Z>>>8,ae=Z,ve=255&(ve=(ve=Z>>>16)+((f.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(f.hd<<24>>24)*(te<<24>>24)>>>5)+((f.ud<<24>>24)*(ve<<24>>24)>>>5)),B[V+G]=(4278255360&Z)+(ve<<16)+ae}}function ut(f,x,j,_,B){Y[x]=function(V,G,Z,te,ae,ve,Pe,oe,Ne){for(te=Pe;te<oe;++te)for(Pe=0;Pe<Ne;++Pe)ae[ve++]=B(Z[_(V[G++])])},Y[f]=function(V,G,Z,te,ae,ve,Pe){var oe=8>>V.b,Ne=V.Ea,Ae=V.K[0],ze=V.w;if(8>oe)for(V=(1<<V.b)-1,ze=(1<<oe)-1;G<Z;++G){var Le,Me=0;for(Le=0;Le<Ne;++Le)Le&V||(Me=_(te[ae++])),ve[Pe++]=B(Ae[Me&ze]),Me>>=oe}else Y["VP8LMapColor"+j](te,ae,Ae,ze,ve,Pe,G,Z,Ne)}}function hr(f,x,j,_,B){for(j=x+j;x<j;){var V=f[x++];_[B++]=V>>16&255,_[B++]=V>>8&255,_[B++]=255&V}}function zt(f,x,j,_,B){for(j=x+j;x<j;){var V=f[x++];_[B++]=V>>16&255,_[B++]=V>>8&255,_[B++]=255&V,_[B++]=V>>24&255}}function pt(f,x,j,_,B){for(j=x+j;x<j;){var V=(G=f[x++])>>16&240|G>>12&15,G=240&G|G>>28&15;_[B++]=V,_[B++]=G}}function Tt(f,x,j,_,B){for(j=x+j;x<j;){var V=(G=f[x++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;_[B++]=V,_[B++]=G}}function nr(f,x,j,_,B){for(j=x+j;x<j;){var V=f[x++];_[B++]=255&V,_[B++]=V>>8&255,_[B++]=V>>16&255}}function Et(f,x,j,_,B,V){if(V==0)for(j=x+j;x<j;)me(_,((V=f[x++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),B+=32;else a(_,B,f,x,j)}function Gt(f,x){Y[x][0]=Y[f+"0"],Y[x][1]=Y[f+"1"],Y[x][2]=Y[f+"2"],Y[x][3]=Y[f+"3"],Y[x][4]=Y[f+"4"],Y[x][5]=Y[f+"5"],Y[x][6]=Y[f+"6"],Y[x][7]=Y[f+"7"],Y[x][8]=Y[f+"8"],Y[x][9]=Y[f+"9"],Y[x][10]=Y[f+"10"],Y[x][11]=Y[f+"11"],Y[x][12]=Y[f+"12"],Y[x][13]=Y[f+"13"],Y[x][14]=Y[f+"0"],Y[x][15]=Y[f+"0"]}function Re(f){return f==rl||f==yo||f==Wl||f==Gl}function it(){this.eb=[],this.size=this.A=this.fb=0}function ct(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new ct,this.sd=null}function nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jt(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function ar(f,x){var j=f.T,_=x.ba.f.RGBA,B=_.eb,V=_.fb+f.ka*_.A,G=Nn[x.ba.S],Z=f.y,te=f.O,ae=f.f,ve=f.N,Pe=f.ea,oe=f.W,Ne=x.cc,Ae=x.dc,ze=x.Mc,Le=x.Nc,Me=f.ka,qe=f.ka+f.T,He=f.U,We=He+1>>1;for(Me==0?G(Z,te,null,null,ae,ve,Pe,oe,ae,ve,Pe,oe,B,V,null,null,He):(G(x.ec,x.fc,Z,te,Ne,Ae,ze,Le,ae,ve,Pe,oe,B,V-_.A,B,V,He),++j);Me+2<qe;Me+=2)Ne=ae,Ae=ve,ze=Pe,Le=oe,ve+=f.Rc,oe+=f.Rc,V+=2*_.A,G(Z,(te+=2*f.fa)-f.fa,Z,te,Ne,Ae,ze,Le,ae,ve,Pe,oe,B,V-_.A,B,V,He);return te+=f.fa,f.j+qe<f.o?(a(x.ec,x.fc,Z,te,He),a(x.cc,x.dc,ae,ve,We),a(x.Mc,x.Nc,Pe,oe,We),j--):1&qe||G(Z,te,null,null,ae,ve,Pe,oe,ae,ve,Pe,oe,B,V+_.A,null,null,He),j}function It(f,x,j){var _=f.F,B=[f.J];if(_!=null){var V=f.U,G=x.ba.S,Z=G==Hl||G==Wl;x=x.ba.f.RGBA;var te=[0],ae=f.ka;te[0]=f.T,f.Kb&&(ae==0?--te[0]:(--ae,B[0]-=f.width),f.j+f.ka+f.T==f.o&&(te[0]=f.o-f.j-ae));var ve=x.eb;ae=x.fb+ae*x.A,f=$l(_,B[0],f.width,V,te,ve,ae+(Z?0:3),x.A),r(j==te),f&&Re(G)&&xo(ve,ae,Z,V,te,x.A)}return 0}function pr(f){var x=f.ma,j=x.ba.S,_=11>j,B=j==Ii||j==Vl||j==Hl||j==Nr||j==12||Re(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!an(x.Oa,f,B?11:12))return 0;if(B&&Re(j)&&Ml(),f.da)alert("todo:use_scaling");else{if(_){if(x.Ib=Jt,f.Kb){if(j=f.U+1>>1,x.memory=l(f.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=ar,Ml()}}else alert("todo:EmitYUV");B&&(x.Jb=It,_&&ho())}if(_&&!Ms){for(f=0;256>f;++f)jn[f]=89858*(f-128)+ga>>ri,Sn[f]=-22014*(f-128)+ga,il[f]=-45773*(f-128),No[f]=113618*(f-128)+ga>>ri;for(f=gr;f<br;++f)x=76283*(f-16)+ga>>ri,Yc[f-gr]=vs(x,255),ih[f-gr]=vs(x+8>>4,15);Ms=1}return 1}function ft(f){var x=f.ma,j=f.U,_=f.T;return r(!(1&f.ka)),0>=j||0>=_?0:(j=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,j),x.Dc+=j,1)}function wr(f){f.ma.memory=null}function xs(f,x,j,_){return ee(f,8)!=47?0:(x[0]=ee(f,14)+1,j[0]=ee(f,14)+1,_[0]=ee(f,1),ee(f,3)!=0?0:!f.h)}function Yr(f,x){if(4>f)return f+1;var j=f-2>>1;return(2+(1&f)<<j)+ee(x,j)+1}function Jr(f,x){return 120<x?x-120:1<=(j=((j=lm[x-1])>>4)*f+(8-(15&j)))?j:1;var j}function ir(f,x,j){var _=W(j),B=f[x+=255&_].g-8;return 0<B&&(H(j,j.u+8),_=W(j),x+=f[x].value,x+=_&(1<<B)-1),H(j,j.u+f[x].g),f[x].value}function Xt(f,x,j){return j.g+=f.g,j.value+=f.value<<x>>>0,r(8>=j.g),f.g}function yr(f,x,j){var _=f.xc;return r((x=_==0?0:f.vc[f.md*(j>>_)+(x>>_)])<f.Wb),f.Ya[x]}function is(f,x,j,_){var B=f.ab,V=f.c*x,G=f.C;x=G+x;var Z=j,te=_;for(_=f.Ta,j=f.Ua;0<B--;){var ae=f.gc[B],ve=G,Pe=x,oe=Z,Ne=te,Ae=(te=_,Z=j,ae.Ea);switch(r(ve<Pe),r(Pe<=ae.nc),ae.hc){case 2:Jo(oe,Ne,(Pe-ve)*Ae,te,Z);break;case 0:var ze=ve,Le=Pe,Me=te,qe=Z,He=(Nt=ae).Ea;ze==0&&(yn(oe,Ne,null,null,1,Me,qe),jt(oe,Ne+1,0,0,He-1,Me,qe+1),Ne+=He,qe+=He,++ze);for(var We=1<<Nt.b,Ct=We-1,xt=Ke(He,Nt.b),Wt=Nt.K,Nt=Nt.w+(ze>>Nt.b)*xt;ze<Le;){var er=Wt,Vr=Nt,Kt=1;for(bn(oe,Ne,Me,qe-He,1,Me,qe);Kt<He;){var yt=(Kt&~Ct)+We;yt>He&&(yt=He),(0,ti[er[Vr++]>>8&15])(oe,Ne+ +Kt,Me,qe+Kt-He,yt-Kt,Me,qe+Kt),Kt=yt}Ne+=He,qe+=He,++ze&Ct||(Nt+=xt)}Pe!=ae.nc&&a(te,Z-Ae,te,Z+(Pe-ve-1)*Ae,Ae);break;case 1:for(Ae=oe,Le=Ne,He=(oe=ae.Ea)-(qe=oe&~(Me=(Ne=1<<ae.b)-1)),ze=Ke(oe,ae.b),We=ae.K,ae=ae.w+(ve>>ae.b)*ze;ve<Pe;){for(Ct=We,xt=ae,Wt=new Ce,Nt=Le+qe,er=Le+oe;Le<Nt;)lt(Ct[xt++],Wt),Da(Wt,Ae,Le,Ne,te,Z),Le+=Ne,Z+=Ne;Le<er&&(lt(Ct[xt++],Wt),Da(Wt,Ae,Le,He,te,Z),Le+=He,Z+=He),++ve&Me||(ae+=ze)}break;case 3:if(oe==te&&Ne==Z&&0<ae.b){for(Le=te,oe=Ae=Z+(Pe-ve)*Ae-(qe=(Pe-ve)*Ke(ae.Ea,ae.b)),Ne=te,Me=Z,ze=[],qe=(He=qe)-1;0<=qe;--qe)ze[qe]=Ne[Me+qe];for(qe=He-1;0<=qe;--qe)Le[oe+qe]=ze[qe];Di(ae,ve,Pe,te,Ae,te,Z)}else Di(ae,ve,Pe,oe,Ne,te,Z)}Z=_,te=j}te!=j&&a(_,j,Z,te,V)}function Lr(f,x){var j=f.V,_=f.Ba+f.c*f.C,B=x-f.C;if(r(x<=f.l.o),r(16>=B),0<B){var V=f.l,G=f.Ta,Z=f.Ua,te=V.width;if(is(f,B,j,_),B=Z=[Z],r((j=f.C)<(_=x)),r(V.v<V.va),_>V.o&&(_=V.o),j<V.j){var ae=V.j-j;j=V.j,B[0]+=ae*te}if(j>=_?j=0:(B[0]+=4*V.v,V.ka=j-V.j,V.U=V.va-V.v,V.T=_-j,j=1),j){if(Z=Z[0],11>(j=f.ca).S){var ve=j.f.RGBA,Pe=(_=j.S,B=V.U,V=V.T,ae=ve.eb,ve.A),oe=V;for(ve=ve.fb+f.Ma*ve.A;0<oe--;){var Ne=G,Ae=Z,ze=B,Le=ae,Me=ve;switch(_){case Hc:Xo(Ne,Ae,ze,Le,Me);break;case Ii:vn(Ne,Ae,ze,Le,Me);break;case rl:vn(Ne,Ae,ze,Le,Me),xo(Le,Me,0,ze,1,0);break;case th:Pr(Ne,Ae,ze,Le,Me);break;case Vl:Et(Ne,Ae,ze,Le,Me,1);break;case yo:Et(Ne,Ae,ze,Le,Me,1),xo(Le,Me,0,ze,1,0);break;case Hl:Et(Ne,Ae,ze,Le,Me,0);break;case Wl:Et(Ne,Ae,ze,Le,Me,0),xo(Le,Me,1,ze,1,0);break;case Nr:Ia(Ne,Ae,ze,Le,Me);break;case Gl:Ia(Ne,Ae,ze,Le,Me),Hd(Le,Me,ze,1,0);break;case Wc:Cr(Ne,Ae,ze,Le,Me);break;default:r(0)}Z+=te,ve+=Pe}f.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");r(f.Ma<=j.height)}}f.C=x,r(f.C<=f.i)}function Ws(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var j=f.Ya[x].G,_=f.Ya[x].H;if(0<j[1][_[1]+0].g||0<j[2][_[2]+0].g||0<j[3][_[3]+0].g)return 0}return 1}function sn(f,x,j,_,B,V){if(f.Z!=0){var G=f.qd,Z=f.rd;for(r(Ys[f.Z]!=null);x<j;++x)Ys[f.Z](G,Z,_,B,_,B,V),G=_,Z=B,B+=V;f.qd=G,f.rd=Z}}function zr(f,x){var j=f.l.ma,_=j.Z==0||j.Z==1?f.l.j:f.C;if(_=f.C<_?_:f.C,r(x<=f.l.o),x>_){var B=f.l.width,V=j.ca,G=j.tb+B*_,Z=f.V,te=f.Ba+f.c*_,ae=f.gc;r(f.ab==1),r(ae[0].hc==3),mo(ae[0],_,x,Z,te,V,G),sn(j,_,x,V,G,B)}f.C=f.Ma=x}function ys(f,x,j,_,B,V,G){var Z=f.$/_,te=f.$%_,ae=f.m,ve=f.s,Pe=j+f.$,oe=Pe;B=j+_*B;var Ne=j+_*V,Ae=280+ve.ua,ze=f.Pb?Z:16777216,Le=0<ve.ua?ve.Wa:null,Me=ve.wc,qe=Pe<Ne?yr(ve,te,Z):null;r(f.C<V),r(Ne<=B);var He=!1;e:for(;;){for(;He||Pe<Ne;){var We=0;if(Z>=ze){var Ct=Pe-j;r((ze=f).Pb),ze.wd=ze.m,ze.xd=Ct,0<ze.s.ua&&Fe(ze.s.Wa,ze.s.vb),ze=Z+Kc}if(te&Me||(qe=yr(ve,te,Z)),r(qe!=null),qe.Qb&&(x[Pe]=qe.qb,He=!0),!He)if(Q(ae),qe.jc){We=ae,Ct=x;var xt=Pe,Wt=qe.pd[W(We)&ln-1];r(qe.jc),256>Wt.g?(H(We,We.u+Wt.g),Ct[xt]=Wt.value,We=0):(H(We,We.u+Wt.g-256),r(256<=Wt.value),We=Wt.value),We==0&&(He=!0)}else We=ir(qe.G[0],qe.H[0],ae);if(ae.h)break;if(He||256>We){if(!He)if(qe.nd)x[Pe]=(qe.qb|We<<8)>>>0;else{if(Q(ae),He=ir(qe.G[1],qe.H[1],ae),Q(ae),Ct=ir(qe.G[2],qe.H[2],ae),xt=ir(qe.G[3],qe.H[3],ae),ae.h)break;x[Pe]=(xt<<24|He<<16|We<<8|Ct)>>>0}if(He=!1,++Pe,++te>=_&&(te=0,++Z,G!=null&&Z<=V&&!(Z%16)&&G(f,Z),Le!=null))for(;oe<Pe;)We=x[oe++],Le.X[(506832829*We&4294967295)>>>Le.Mb]=We}else if(280>We){if(We=Yr(We-256,ae),Ct=ir(qe.G[4],qe.H[4],ae),Q(ae),Ct=Jr(_,Ct=Yr(Ct,ae)),ae.h)break;if(Pe-j<Ct||B-Pe<We)break e;for(xt=0;xt<We;++xt)x[Pe+xt]=x[Pe+xt-Ct];for(Pe+=We,te+=We;te>=_;)te-=_,++Z,G!=null&&Z<=V&&!(Z%16)&&G(f,Z);if(r(Pe<=B),te&Me&&(qe=yr(ve,te,Z)),Le!=null)for(;oe<Pe;)We=x[oe++],Le.X[(506832829*We&4294967295)>>>Le.Mb]=We}else{if(!(We<Ae))break e;for(He=We-280,r(Le!=null);oe<Pe;)We=x[oe++],Le.X[(506832829*We&4294967295)>>>Le.Mb]=We;We=Pe,r(!(He>>>(Ct=Le).Xa)),x[We]=Ct.X[He],He=!0}He||r(ae.h==ne(ae))}if(f.Pb&&ae.h&&Pe<B)r(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Fe(f.s.vb,f.s.Wa);else{if(ae.h)break e;G?.(f,Z>V?V:Z),f.a=0,f.$=Pe-j}return 1}return f.a=3,0}function In(f){r(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,r(f!=null)}function Zi(){var f=new Br;return f==null?null:(f.a=0,f.xb=nl,Gt("Predictor","VP8LPredictors"),Gt("Predictor","VP8LPredictors_C"),Gt("PredictorAdd","VP8LPredictorsAdd"),Gt("PredictorAdd","VP8LPredictorsAdd_C"),Jo=ot,Da=_t,Xo=hr,vn=zt,Ia=pt,Cr=Tt,Pr=nr,Y.VP8LMapColor32b=Qo,Y.VP8LMapColor8b=ei,f)}function ca(f,x,j,_,B){var V=1,G=[f],Z=[x],te=_.m,ae=_.s,ve=null,Pe=0;e:for(;;){if(j)for(;V&&ee(te,1);){var oe=G,Ne=Z,Ae=_,ze=1,Le=Ae.m,Me=Ae.gc[Ae.ab],qe=ee(Le,2);if(Ae.Oc&1<<qe)V=0;else{switch(Ae.Oc|=1<<qe,Me.hc=qe,Me.Ea=oe[0],Me.nc=Ne[0],Me.K=[null],++Ae.ab,r(4>=Ae.ab),qe){case 0:case 1:Me.b=ee(Le,3)+2,ze=ca(Ke(Me.Ea,Me.b),Ke(Me.nc,Me.b),0,Ae,Me.K),Me.K=Me.K[0];break;case 3:var He,We=ee(Le,8)+1,Ct=16<We?0:4<We?1:2<We?2:3;if(oe[0]=Ke(Me.Ea,Ct),Me.b=Ct,He=ze=ca(We,1,0,Ae,Me.K)){var xt,Wt=We,Nt=Me,er=1<<(8>>Nt.b),Vr=l(er);if(Vr==null)He=0;else{var Kt=Nt.K[0],yt=Nt.w;for(Vr[0]=Nt.K[0][0],xt=1;xt<1*Wt;++xt)Vr[xt]=ce(Kt[yt+xt],Vr[xt-1]);for(;xt<4*er;++xt)Vr[xt]=0;Nt.K[0]=null,Nt.K[0]=Vr,He=1}}ze=He;break;case 2:break;default:r(0)}V=ze}}if(G=G[0],Z=Z[0],V&&ee(te,1)&&!(V=1<=(Pe=ee(te,4))&&11>=Pe)){_.a=3;break e}var rt;if(rt=V)t:{var es,qt,Zt,_r=_,Es=G,ds=Z,Ur=Pe,Ns=j,Ds=_r.m,Tr=_r.s,sr=[null],cr=1,Or=0,dr=sh[Ur];r:for(;;){if(Ns&&ee(Ds,1)){var Hr=ee(Ds,3)+2,Wr=Ke(Es,Hr),jr=Ke(ds,Hr),Js=Wr*jr;if(!ca(Wr,jr,0,_r,sr))break r;for(sr=sr[0],Tr.xc=Hr,es=0;es<Js;++es){var vr=sr[es]>>8&65535;sr[es]=vr,vr>=cr&&(cr=vr+1)}}if(Ds.h)break r;for(qt=0;5>qt;++qt){var Sr=bo[qt];!qt&&0<Ur&&(Sr+=1<<Ur),Or<Sr&&(Or=Sr)}var us=d(cr*dr,U),Bs=cr,kn=d(Bs,be);if(kn==null)var ts=null;else r(65536>=Bs),ts=kn;var rs=l(Or);if(ts==null||rs==null||us==null){_r.a=1;break r}var Qs=us;for(es=Zt=0;es<cr;++es){var kr=ts[es],Xs=kr.G,Jn=kr.H,xa=0,Is=1,ss=0;for(qt=0;5>qt;++qt){Sr=bo[qt],Xs[qt]=Qs,Jn[qt]=Zt,!qt&&0<Ur&&(Sr+=1<<Ur);n:{var Oi,ni=Sr,ol=_r,Ra=rs,lh=Qs,su=Zt,Dr=0,ya=ol.m,nu=ee(ya,1);if(o(Ra,0,0,ni),nu){var au=ee(ya,1)+1,Jc=ee(ya,1),Qc=ee(ya,Jc==0?1:8);Ra[Qc]=1,au==2&&(Ra[Qc=ee(ya,8)]=1);var Ma=1}else{var Rr=l(19),hs=ee(ya,4)+4;if(19<hs){ol.a=3;var ns=0;break n}for(Oi=0;Oi<hs;++Oi)Rr[om[Oi]]=ee(ya,3);var ll=void 0,ai=void 0,cl=ol,fm=Rr,js=ni,Xc=Ra,Xl=0,Ba=cl.m,ba=8,Mn=d(128,U);s:for(;q(Mn,0,7,fm,19);){if(ee(Ba,1)){var Zl=2+2*ee(Ba,3);if((ll=2+ee(Ba,Zl))>js)break s}else ll=js;for(ai=0;ai<js&&ll--;){Q(Ba);var Zc=Mn[0+(127&W(Ba))];H(Ba,Ba.u+Zc.g);var Ri=Zc.value;if(16>Ri)Xc[ai++]=Ri,Ri!=0&&(ba=Ri);else{var ch=Ri==16,iu=Ri-16,dh=Gc[iu],ou=ee(Ba,Kl[iu])+dh;if(ai+ou>js)break s;for(var uh=ch?ba:0;0<ou--;)Xc[ai++]=uh}}Xl=1;break s}Xl||(cl.a=3),Ma=Xl}(Ma=Ma&&!ya.h)&&(Dr=q(lh,su,8,Ra,ni)),Ma&&Dr!=0?ns=Dr:(ol.a=3,ns=0)}if(ns==0)break r;if(Is&&rh[qt]==1&&(Is=Qs[Zt].g==0),xa+=Qs[Zt].g,Zt+=ns,3>=qt){var dl,ed=rs[0];for(dl=1;dl<Sr;++dl)rs[dl]>ed&&(ed=rs[dl]);ss+=ed}}if(kr.nd=Is,kr.Qb=0,Is&&(kr.qb=(Xs[3][Jn[3]+0].value<<24|Xs[1][Jn[1]+0].value<<16|Xs[2][Jn[2]+0].value)>>>0,xa==0&&256>Xs[0][Jn[0]+0].value&&(kr.Qb=1,kr.qb+=Xs[0][Jn[0]+0].value<<8)),kr.jc=!kr.Qb&&6>ss,kr.jc){var ec,Bn=kr;for(ec=0;ec<ln;++ec){var ii=ec,va=Bn.pd[ii],So=Bn.G[0][Bn.H[0]+ii];256<=So.value?(va.g=So.g+256,va.value=So.value):(va.g=0,va.value=0,ii>>=Xt(So,8,va),ii>>=Xt(Bn.G[1][Bn.H[1]+ii],16,va),ii>>=Xt(Bn.G[2][Bn.H[2]+ii],0,va),Xt(Bn.G[3][Bn.H[3]+ii],24,va))}}}Tr.vc=sr,Tr.Wb=cr,Tr.Ya=ts,Tr.yc=us,rt=1;break t}rt=0}if(!(V=rt)){_.a=3;break e}if(0<Pe){if(ae.ua=1<<Pe,!de(ae.Wa,Pe)){_.a=1,V=0;break e}}else ae.ua=0;var td=_,rd=G,hh=Z,sd=td.s,nd=sd.xc;if(td.c=rd,td.i=hh,sd.md=Ke(rd,nd),sd.wc=nd==0?-1:(1<<nd)-1,j){_.xb=Oa;break e}if((ve=l(G*Z))==null){_.a=1,V=0;break e}V=(V=ys(_,ve,0,G,Z,Z,null))&&!te.h;break e}return V?(B!=null?B[0]=ve:(r(ve==null),r(j)),_.$=0,j||In(ae)):In(ae),V}function ji(f,x){var j=f.c*f.i,_=j+x+16*x;return r(f.c<=x),f.V=l(_),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+j+x,1)}function eo(f,x){var j=f.C,_=x-j,B=f.V,V=f.Ba+f.c*j;for(r(x<=f.l.o);0<_;){var G=16<_?16:_,Z=f.l.ma,te=f.l.width,ae=te*G,ve=Z.ca,Pe=Z.tb+te*j,oe=f.Ta,Ne=f.Ua;is(f,G,B,V),Wd(oe,Ne,ve,Pe,ae),sn(Z,j,j+G,ve,Pe,te),_-=G,B+=G*f.c,j+=G}r(j==x),f.C=f.Ma=x}function to(){this.ub=this.yd=this.td=this.Rb=0}function Bo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Bd(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Er(){this.Yb=(function(){var f=[];return(function x(j,_,B){for(var V=B[_],G=0;G<V&&(j.push(B.length>_+1?[]:0),!(B.length<_+1));G++)x(j[G],_+1,B)})(f,0,[3,11]),f})()}function Pc(){this.jb=l(3),this.Wc=u([4,8],Er),this.Xc=u([4,17],Er)}function Uo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Fn(){this.ld=this.La=this.dd=this.tc=0}function Si(){this.Na=this.la=0}function _c(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function qo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ro(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fn),this.Y=0,this.ya=Array(new qo),this.aa=0,this.l=new Gs}function Tn(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Lc(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new to,this.Kc=new Bo,this.ed=new Uo,this.Qa=new Bd,this.Ic=this.$c=this.Aa=0,this.D=new ro,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,D),this.ia=0,this.pb=d(4,_c),this.Pa=new Pc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tn),this.Hd=0,this.rb=Array(new Si),this.sb=0,this.wa=Array(new Fn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new qo),this.L=this.aa=0,this.gd=u([4,2],Fn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ud(){var f=new Lc;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,vo||(vo=Hn)),f}function os(f,x,j){return f.a==0&&(f.a=x,f.sc=j,f.cb=0),0}function Ec(f,x,j){return 3<=j&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function so(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return os(f,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,_=x.w,B=x.ha;if(4>B)return os(f,7,"Truncated header.");var V=j[_+0]|j[_+1]<<8|j[_+2]<<16,G=f.Od;if(G.Rb=!(1&V),G.td=V>>1&7,G.yd=V>>4&1,G.ub=V>>5,3<G.td)return os(f,3,"Incorrect keyframe parameters.");if(!G.yd)return os(f,4,"Frame not displayable.");_+=3,B-=3;var Z=f.Kc;if(G.Rb){if(7>B)return os(f,7,"cannot parse picture header");if(!Ec(j,_,B))return os(f,3,"Bad code word");Z.c=16383&(j[_+4]<<8|j[_+3]),Z.Td=j[_+4]>>6,Z.i=16383&(j[_+6]<<8|j[_+5]),Z.Ud=j[_+6]>>6,_+=7,B-=7,f.za=Z.c+15>>4,f.Ub=Z.i+15>>4,x.width=Z.c,x.height=Z.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o((V=f.Pa).jb,0,255,V.jb.length),r((V=f.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,o(V.Zb,0,0,V.Zb.length),o(V.Lb,0,0,V.Lb)}if(G.ub>B)return os(f,7,"bad partition length");ge(V=f.m,j,_,G.ub),_+=G.ub,B-=G.ub,G.Rb&&(Z.Ld=xe(V),Z.Kd=xe(V)),Z=f.Qa;var te,ae=f.Pa;if(r(V!=null),r(Z!=null),Z.Cb=xe(V),Z.Cb){if(Z.Bb=xe(V),xe(V)){for(Z.Fb=xe(V),te=0;4>te;++te)Z.Zb[te]=xe(V)?re(V,7):0;for(te=0;4>te;++te)Z.Lb[te]=xe(V)?re(V,6):0}if(Z.Bb)for(te=0;3>te;++te)ae.jb[te]=xe(V)?T(V,8):255}else Z.Bb=0;if(V.Ka)return os(f,3,"cannot parse segment header");if((Z=f.ed).zd=xe(V),Z.Tb=T(V,6),Z.wb=T(V,3),Z.Pc=xe(V),Z.Pc&&xe(V)){for(ae=0;4>ae;++ae)xe(V)&&(Z.vd[ae]=re(V,6));for(ae=0;4>ae;++ae)xe(V)&&(Z.od[ae]=re(V,6))}if(f.L=Z.Tb==0?0:Z.zd?1:2,V.Ka)return os(f,3,"cannot parse filter header");var ve=B;if(B=te=_,_=te+ve,Z=ve,f.Xb=(1<<T(f.m,2))-1,ve<3*(ae=f.Xb))j=7;else{for(te+=3*ae,Z-=3*ae,ve=0;ve<ae;++ve){var Pe=j[B+0]|j[B+1]<<8|j[B+2]<<16;Pe>Z&&(Pe=Z),ge(f.Jc[+ve],j,te,Pe),te+=Pe,Z-=Pe,B+=3}ge(f.Jc[+ae],j,te,Z),j=te<_?0:5}if(j!=0)return os(f,j,"cannot parse partitions");for(j=T(te=f.m,7),B=xe(te)?re(te,4):0,_=xe(te)?re(te,4):0,Z=xe(te)?re(te,4):0,ae=xe(te)?re(te,4):0,te=xe(te)?re(te,4):0,ve=f.Qa,Pe=0;4>Pe;++Pe){if(ve.Cb){var oe=ve.Zb[Pe];ve.Fb||(oe+=j)}else{if(0<Pe){f.pb[Pe]=f.pb[0];continue}oe=j}var Ne=f.pb[Pe];Ne.Sc[0]=sl[vs(oe+B,127)],Ne.Sc[1]=Yl[vs(oe+0,127)],Ne.Eb[0]=2*sl[vs(oe+_,127)],Ne.Eb[1]=101581*Yl[vs(oe+Z,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=sl[vs(oe+ae,117)],Ne.Qc[1]=Yl[vs(oe+te,127)],Ne.lc=oe+te}if(!G.Rb)return os(f,4,"Not a key frame.");for(xe(V),G=f.Pa,j=0;4>j;++j){for(B=0;8>B;++B)for(_=0;3>_;++_)for(Z=0;11>Z;++Z)ae=Ee(V,dm[j][B][_][Z])?T(V,8):ah[j][B][_][Z],G.Wc[j][B].Yb[_][Z]=ae;for(B=0;17>B;++B)G.Xc[j][B]=G.Wc[j][eu[B]]}return f.kc=xe(V),f.kc&&(f.Bd=T(V,8)),f.cb=1}function Hn(f,x,j,_,B,V,G){var Z=x[B].Yb[j];for(j=0;16>B;++B){if(!Ee(f,Z[j+0]))return B;for(;!Ee(f,Z[j+1]);)if(Z=x[++B].Yb[0],j=0,B==16)return 16;var te=x[B+1].Yb;if(Ee(f,Z[j+2])){var ae=f,ve=0;if(Ee(ae,(oe=Z)[(Pe=j)+3]))if(Ee(ae,oe[Pe+6])){for(Z=0,Pe=2*(ve=Ee(ae,oe[Pe+8]))+(oe=Ee(ae,oe[Pe+9+ve])),ve=0,oe=Xd[Pe];oe[Z];++Z)ve+=ve+Ee(ae,oe[Z]);ve+=3+(8<<Pe)}else Ee(ae,oe[Pe+7])?(ve=7+2*Ee(ae,165),ve+=Ee(ae,145)):ve=5+Ee(ae,159);else ve=Ee(ae,oe[Pe+4])?3+Ee(ae,oe[Pe+5]):2;Z=te[2]}else ve=1,Z=te[1];te=G+Zd[B],0>(ae=f).b&&ue(ae);var Pe,oe=ae.b,Ne=(Pe=ae.Ca>>1)-(ae.I>>oe)>>31;--ae.b,ae.Ca+=Ne,ae.Ca|=1,ae.I-=(Pe+1&Ne)<<oe,V[te]=((ve^Ne)-Ne)*_[(0<B)+0]}return 16}function da(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function pn(f,x,j,_,B){B=f[x+j+32*_]+(B>>3),f[x+j+32*_]=-256&B?0>B?0:255:B}function no(f,x,j,_,B,V){pn(f,x,0,j,_+B),pn(f,x,1,j,_+V),pn(f,x,2,j,_-V),pn(f,x,3,j,_-B)}function Qr(f){return(20091*f>>16)+f}function ao(f,x,j,_){var B,V=0,G=l(16);for(B=0;4>B;++B){var Z=f[x+0]+f[x+8],te=f[x+0]-f[x+8],ae=(35468*f[x+4]>>16)-Qr(f[x+12]),ve=Qr(f[x+4])+(35468*f[x+12]>>16);G[V+0]=Z+ve,G[V+1]=te+ae,G[V+2]=te-ae,G[V+3]=Z-ve,V+=4,x++}for(B=V=0;4>B;++B)Z=(f=G[V+0]+4)+G[V+8],te=f-G[V+8],ae=(35468*G[V+4]>>16)-Qr(G[V+12]),pn(j,_,0,0,Z+(ve=Qr(G[V+4])+(35468*G[V+12]>>16))),pn(j,_,1,0,te+ae),pn(j,_,2,0,te-ae),pn(j,_,3,0,Z-ve),V++,_+=32}function Dc(f,x,j,_){var B=f[x+0]+4,V=35468*f[x+4]>>16,G=Qr(f[x+4]),Z=35468*f[x+1]>>16;no(j,_,0,B+G,f=Qr(f[x+1]),Z),no(j,_,1,B+V,f,Z),no(j,_,2,B-V,f,Z),no(j,_,3,B-G,f,Z)}function Il(f,x,j,_,B){ao(f,x,j,_),B&&ao(f,x+16,j,_+4)}function io(f,x,j,_){Zr(f,x+0,j,_,1),Zr(f,x+32,j,_+128,1)}function Aa(f,x,j,_){var B;for(f=f[x+0]+4,B=0;4>B;++B)for(x=0;4>x;++x)pn(j,_,x,B,f)}function zo(f,x,j,_){f[x+0]&&pa(f,x+0,j,_),f[x+16]&&pa(f,x+16,j,_+4),f[x+32]&&pa(f,x+32,j,_+128),f[x+48]&&pa(f,x+48,j,_+128+4)}function or(f,x,j,_){var B,V=l(16);for(B=0;4>B;++B){var G=f[x+0+B]+f[x+12+B],Z=f[x+4+B]+f[x+8+B],te=f[x+4+B]-f[x+8+B],ae=f[x+0+B]-f[x+12+B];V[0+B]=G+Z,V[8+B]=G-Z,V[4+B]=ae+te,V[12+B]=ae-te}for(B=0;4>B;++B)G=(f=V[0+4*B]+3)+V[3+4*B],Z=V[1+4*B]+V[2+4*B],te=V[1+4*B]-V[2+4*B],ae=f-V[3+4*B],j[_+0]=G+Z>>3,j[_+16]=ae+te>>3,j[_+32]=G-Z>>3,j[_+48]=ae-te>>3,_+=64}function Ha(f,x,j){var _,B=x-32,V=cn,G=255-f[B-1];for(_=0;_<j;++_){var Z,te=V,ae=G+f[x-1];for(Z=0;Z<j;++Z)f[x+Z]=te[ae+f[B+Z]];x+=32}}function $o(f,x){Ha(f,x,4)}function Fl(f,x){Ha(f,x,8)}function Ic(f,x){Ha(f,x,16)}function Fc(f,x){var j;for(j=0;16>j;++j)a(f,x+32*j,f,x-32,16)}function Vo(f,x){var j;for(j=16;0<j;--j)o(f,x,f[x-1],16),x+=32}function Wa(f,x,j){var _;for(_=0;16>_;++_)o(x,j+32*_,f,16)}function ua(f,x){var j,_=16;for(j=0;16>j;++j)_+=f[x-1+32*j]+f[x+j-32];Wa(_>>5,f,x)}function Ca(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x-1+32*j];Wa(_>>4,f,x)}function gn(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x+j-32];Wa(_>>4,f,x)}function Wn(f,x){Wa(128,f,x)}function Ut(f,x,j){return f+2*x+j+2>>2}function oo(f,x){var j,_=x-32;for(_=new Uint8Array([Ut(f[_-1],f[_+0],f[_+1]),Ut(f[_+0],f[_+1],f[_+2]),Ut(f[_+1],f[_+2],f[_+3]),Ut(f[_+2],f[_+3],f[_+4])]),j=0;4>j;++j)a(f,x+32*j,_,0,_.length)}function Pa(f,x){var j=f[x-1],_=f[x-1+32],B=f[x-1+64],V=f[x-1+96];me(f,x+0,16843009*Ut(f[x-1-32],j,_)),me(f,x+32,16843009*Ut(j,_,B)),me(f,x+64,16843009*Ut(_,B,V)),me(f,x+96,16843009*Ut(B,V,V))}function qd(f,x){var j,_=4;for(j=0;4>j;++j)_+=f[x+j-32]+f[x-1+32*j];for(_>>=3,j=0;4>j;++j)o(f,x+32*j,_,4)}function Tc(f,x){var j=f[x-1+0],_=f[x-1+32],B=f[x-1+64],V=f[x-1-32],G=f[x+0-32],Z=f[x+1-32],te=f[x+2-32],ae=f[x+3-32];f[x+0+96]=Ut(_,B,f[x-1+96]),f[x+1+96]=f[x+0+64]=Ut(j,_,B),f[x+2+96]=f[x+1+64]=f[x+0+32]=Ut(V,j,_),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=Ut(G,V,j),f[x+3+64]=f[x+2+32]=f[x+1+0]=Ut(Z,G,V),f[x+3+32]=f[x+2+0]=Ut(te,Z,G),f[x+3+0]=Ut(ae,te,Z)}function On(f,x){var j=f[x+1-32],_=f[x+2-32],B=f[x+3-32],V=f[x+4-32],G=f[x+5-32],Z=f[x+6-32],te=f[x+7-32];f[x+0+0]=Ut(f[x+0-32],j,_),f[x+1+0]=f[x+0+32]=Ut(j,_,B),f[x+2+0]=f[x+1+32]=f[x+0+64]=Ut(_,B,V),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=Ut(B,V,G),f[x+3+32]=f[x+2+64]=f[x+1+96]=Ut(V,G,Z),f[x+3+64]=f[x+2+96]=Ut(G,Z,te),f[x+3+96]=Ut(Z,te,te)}function Ga(f,x){var j=f[x-1+0],_=f[x-1+32],B=f[x-1+64],V=f[x-1-32],G=f[x+0-32],Z=f[x+1-32],te=f[x+2-32],ae=f[x+3-32];f[x+0+0]=f[x+1+64]=V+G+1>>1,f[x+1+0]=f[x+2+64]=G+Z+1>>1,f[x+2+0]=f[x+3+64]=Z+te+1>>1,f[x+3+0]=te+ae+1>>1,f[x+0+96]=Ut(B,_,j),f[x+0+64]=Ut(_,j,V),f[x+0+32]=f[x+1+96]=Ut(j,V,G),f[x+1+32]=f[x+2+96]=Ut(V,G,Z),f[x+2+32]=f[x+3+96]=Ut(G,Z,te),f[x+3+32]=Ut(Z,te,ae)}function Oc(f,x){var j=f[x+0-32],_=f[x+1-32],B=f[x+2-32],V=f[x+3-32],G=f[x+4-32],Z=f[x+5-32],te=f[x+6-32],ae=f[x+7-32];f[x+0+0]=j+_+1>>1,f[x+1+0]=f[x+0+64]=_+B+1>>1,f[x+2+0]=f[x+1+64]=B+V+1>>1,f[x+3+0]=f[x+2+64]=V+G+1>>1,f[x+0+32]=Ut(j,_,B),f[x+1+32]=f[x+0+96]=Ut(_,B,V),f[x+2+32]=f[x+1+96]=Ut(B,V,G),f[x+3+32]=f[x+2+96]=Ut(V,G,Z),f[x+3+64]=Ut(G,Z,te),f[x+3+96]=Ut(Z,te,ae)}function Ho(f,x){var j=f[x-1+0],_=f[x-1+32],B=f[x-1+64],V=f[x-1+96];f[x+0+0]=j+_+1>>1,f[x+2+0]=f[x+0+32]=_+B+1>>1,f[x+2+32]=f[x+0+64]=B+V+1>>1,f[x+1+0]=Ut(j,_,B),f[x+3+0]=f[x+1+32]=Ut(_,B,V),f[x+3+32]=f[x+1+64]=Ut(B,V,V),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=V}function lo(f,x){var j=f[x-1+0],_=f[x-1+32],B=f[x-1+64],V=f[x-1+96],G=f[x-1-32],Z=f[x+0-32],te=f[x+1-32],ae=f[x+2-32];f[x+0+0]=f[x+2+32]=j+G+1>>1,f[x+0+32]=f[x+2+64]=_+j+1>>1,f[x+0+64]=f[x+2+96]=B+_+1>>1,f[x+0+96]=V+B+1>>1,f[x+3+0]=Ut(Z,te,ae),f[x+2+0]=Ut(G,Z,te),f[x+1+0]=f[x+3+32]=Ut(j,G,Z),f[x+1+32]=f[x+3+64]=Ut(_,j,G),f[x+1+64]=f[x+3+96]=Ut(B,_,j),f[x+1+96]=Ut(V,B,_)}function Tl(f,x){var j;for(j=0;8>j;++j)a(f,x+32*j,f,x-32,8)}function ha(f,x){var j;for(j=0;8>j;++j)o(f,x,f[x-1],8),x+=32}function _a(f,x,j){var _;for(_=0;8>_;++_)o(x,j+32*_,f,8)}function fa(f,x){var j,_=8;for(j=0;8>j;++j)_+=f[x+j-32]+f[x-1+32*j];_a(_>>4,f,x)}function Wo(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x+j-32];_a(_>>3,f,x)}function Ol(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x-1+32*j];_a(_>>3,f,x)}function Rl(f,x){_a(128,f,x)}function Ka(f,x,j){var _=f[x-j],B=f[x+0],V=3*(B-_)+Ta[1020+f[x-2*j]-f[x+j]],G=tl[112+(V+4>>3)];f[x-j]=cn[255+_+tl[112+(V+3>>3)]],f[x+0]=cn[255+B-G]}function La(f,x,j,_){var B=f[x+0],V=f[x+j];return Kn[255+f[x-2*j]-f[x-j]]>_||Kn[255+V-B]>_}function co(f,x,j,_){return 4*Kn[255+f[x-j]-f[x+0]]+Kn[255+f[x-2*j]-f[x+j]]<=_}function uo(f,x,j,_,B){var V=f[x-3*j],G=f[x-2*j],Z=f[x-j],te=f[x+0],ae=f[x+j],ve=f[x+2*j],Pe=f[x+3*j];return 4*Kn[255+Z-te]+Kn[255+G-ae]>_?0:Kn[255+f[x-4*j]-V]<=B&&Kn[255+V-G]<=B&&Kn[255+G-Z]<=B&&Kn[255+Pe-ve]<=B&&Kn[255+ve-ae]<=B&&Kn[255+ae-te]<=B}function Gn(f,x,j,_){var B=2*_+1;for(_=0;16>_;++_)co(f,x+_,j,B)&&Ka(f,x+_,j)}function Ya(f,x,j,_){var B=2*_+1;for(_=0;16>_;++_)co(f,x+_*j,1,B)&&Ka(f,x+_*j,1)}function ki(f,x,j,_){var B;for(B=3;0<B;--B)Gn(f,x+=4*j,j,_)}function Go(f,x,j,_){var B;for(B=3;0<B;--B)Ya(f,x+=4,j,_)}function Ks(f,x,j,_,B,V,G,Z){for(V=2*V+1;0<B--;){if(uo(f,x,j,V,G))if(La(f,x,j,Z))Ka(f,x,j);else{var te=f,ae=x,ve=j,Pe=te[ae-2*ve],oe=te[ae-ve],Ne=te[ae+0],Ae=te[ae+ve],ze=te[ae+2*ve],Le=27*(qe=Ta[1020+3*(Ne-oe)+Ta[1020+Pe-Ae]])+63>>7,Me=18*qe+63>>7,qe=9*qe+63>>7;te[ae-3*ve]=cn[255+te[ae-3*ve]+qe],te[ae-2*ve]=cn[255+Pe+Me],te[ae-ve]=cn[255+oe+Le],te[ae+0]=cn[255+Ne-Le],te[ae+ve]=cn[255+Ae-Me],te[ae+2*ve]=cn[255+ze-qe]}x+=_}}function Rn(f,x,j,_,B,V,G,Z){for(V=2*V+1;0<B--;){if(uo(f,x,j,V,G))if(La(f,x,j,Z))Ka(f,x,j);else{var te=f,ae=x,ve=j,Pe=te[ae-ve],oe=te[ae+0],Ne=te[ae+ve],Ae=tl[112+(4+(ze=3*(oe-Pe))>>3)],ze=tl[112+(ze+3>>3)],Le=Ae+1>>1;te[ae-2*ve]=cn[255+te[ae-2*ve]+Le],te[ae-ve]=cn[255+Pe+ze],te[ae+0]=cn[255+oe-Ae],te[ae+ve]=cn[255+Ne-Le]}x+=_}}function w(f,x,j,_,B,V){Ks(f,x,j,1,16,_,B,V)}function M(f,x,j,_,B,V){Ks(f,x,1,j,16,_,B,V)}function le(f,x,j,_,B,V){var G;for(G=3;0<G;--G)Rn(f,x+=4*j,j,1,16,_,B,V)}function ye(f,x,j,_,B,V){var G;for(G=3;0<G;--G)Rn(f,x+=4,1,j,16,_,B,V)}function ke(f,x,j,_,B,V,G,Z){Ks(f,x,B,1,8,V,G,Z),Ks(j,_,B,1,8,V,G,Z)}function Ve(f,x,j,_,B,V,G,Z){Ks(f,x,1,B,8,V,G,Z),Ks(j,_,1,B,8,V,G,Z)}function Ye(f,x,j,_,B,V,G,Z){Rn(f,x+4*B,B,1,8,V,G,Z),Rn(j,_+4*B,B,1,8,V,G,Z)}function bt(f,x,j,_,B,V,G,Z){Rn(f,x+4,1,B,8,V,G,Z),Rn(j,_+4,1,B,8,V,G,Z)}function wt(){this.ba=new ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ot(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lr(){this.ua=0,this.Wa=new st,this.vb=new st,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new U}function Br(){this.xb=this.a=0,this.l=new Gs,this.ca=new ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lr,this.ab=0,this.gc=d(4,Ht),this.Oc=0}function ls(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fr(f,x,j,_,B,V,G){for(f=f==null?0:f[x+0],x=0;x<G;++x)B[V+x]=f+j[_+x]&255,f=B[V+x]}function bs(f,x,j,_,B,V,G){var Z;if(f==null)fr(null,null,j,_,B,V,G);else for(Z=0;Z<G;++Z)B[V+Z]=f[x+Z]+j[_+Z]&255}function cs(f,x,j,_,B,V,G){if(f==null)fr(null,null,j,_,B,V,G);else{var Z,te=f[x+0],ae=te,ve=te;for(Z=0;Z<G;++Z)ae=ve+(te=f[x+Z])-ae,ve=j[_+Z]+(-256&ae?0>ae?0:255:ae)&255,ae=te,B[V+Z]=ve}}function Rs(f,x,j,_){var B=x.width,V=x.o;if(r(f!=null&&x!=null),0>j||0>=_||j+_>V)return null;if(!f.Cc){if(f.ga==null){var G;if(f.ga=new ls,(G=f.ga==null)||(G=x.width*x.o,r(f.Gb.length==0),f.Gb=l(G),f.Uc=0,f.Gb==null?G=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,G=1),G=!G),!G){G=f.ga;var Z=f.Fa,te=f.P,ae=f.qc,ve=f.mb,Pe=f.nb,oe=te+1,Ne=ae-1,Ae=G.l;if(r(Z!=null&&ve!=null&&x!=null),Ys[0]=null,Ys[1]=fr,Ys[2]=bs,Ys[3]=cs,G.ca=ve,G.tb=Pe,G.c=x.width,G.i=x.height,r(0<G.c&&0<G.i),1>=ae)x=0;else if(G.$a=3&Z[te+0],G.Z=Z[te+0]>>2&3,G.Lc=Z[te+0]>>4&3,te=Z[te+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||te)x=0;else if(Ae.put=ft,Ae.ac=pr,Ae.bc=wr,Ae.ma=G,Ae.width=x.width,Ae.height=x.height,Ae.Da=x.Da,Ae.v=x.v,Ae.va=x.va,Ae.j=x.j,Ae.o=x.o,G.$a)e:{r(G.$a==1),x=Zi();t:for(;;){if(x==null){x=0;break e}if(r(G!=null),G.mc=x,x.c=G.c,x.i=G.i,x.l=G.l,x.l.ma=G,x.l.width=G.c,x.l.height=G.i,x.a=0,fe(x.m,Z,oe,Ne),!ca(G.c,G.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Ws(x.s)?(G.ic=1,Z=x.c*x.i,x.Ta=null,x.Ua=0,x.V=l(Z),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(G.ic=0,x=ji(x,G.c)),!x))break t;x=1;break e}G.mc=null,x=0}else x=Ne>=G.c*G.i;G=!x}if(G)return null;f.ga.Lc!=1?f.Ga=0:_=V-j}r(f.ga!=null),r(j+_<=V);e:{if(x=(Z=f.ga).c,V=Z.l.o,Z.$a==0){if(oe=f.rc,Ne=f.Vc,Ae=f.Fa,te=f.P+1+j*x,ae=f.mb,ve=f.nb+j*x,r(te<=f.P+f.qc),Z.Z!=0)for(r(Ys[Z.Z]!=null),G=0;G<_;++G)Ys[Z.Z](oe,Ne,Ae,te,ae,ve,x),oe=ae,Ne=ve,ve+=x,te+=x;else for(G=0;G<_;++G)a(ae,ve,Ae,te,x),oe=ae,Ne=ve,ve+=x,te+=x;f.rc=oe,f.Vc=Ne}else{if(r(Z.mc!=null),x=j+_,r((G=Z.mc)!=null),r(x<=G.i),G.C>=x)x=1;else if(Z.ic||ho(),Z.ic){Z=G.V,oe=G.Ba,Ne=G.c;var ze=G.i,Le=(Ae=1,te=G.$/Ne,ae=G.$%Ne,ve=G.m,Pe=G.s,G.$),Me=Ne*ze,qe=Ne*x,He=Pe.wc,We=Le<qe?yr(Pe,ae,te):null;r(Le<=Me),r(x<=ze),r(Ws(Pe));t:for(;;){for(;!ve.h&&Le<qe;){if(ae&He||(We=yr(Pe,ae,te)),r(We!=null),Q(ve),256>(ze=ir(We.G[0],We.H[0],ve)))Z[oe+Le]=ze,++Le,++ae>=Ne&&(ae=0,++te<=x&&!(te%16)&&zr(G,te));else{if(!(280>ze)){Ae=0;break t}ze=Yr(ze-256,ve);var Ct,xt=ir(We.G[4],We.H[4],ve);if(Q(ve),!(Le>=(xt=Jr(Ne,xt=Yr(xt,ve)))&&Me-Le>=ze)){Ae=0;break t}for(Ct=0;Ct<ze;++Ct)Z[oe+Le+Ct]=Z[oe+Le+Ct-xt];for(Le+=ze,ae+=ze;ae>=Ne;)ae-=Ne,++te<=x&&!(te%16)&&zr(G,te);Le<qe&&ae&He&&(We=yr(Pe,ae,te))}r(ve.h==ne(ve))}zr(G,te>x?x:te);break t}!Ae||ve.h&&Le<Me?(Ae=0,G.a=ve.h?5:3):G.$=Le,x=Ae}else x=ys(G,G.V,G.Ba,G.c,G.i,x,eo);if(!x){_=0;break e}}j+_>=V&&(f.Cc=1),_=1}if(!_)return null;if(f.Cc&&((_=f.ga)!=null&&(_.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+j*B}function Ja(f,x,j,_,B,V){for(;0<B--;){var G,Z=f,te=x+(j?1:0),ae=f,ve=x+(j?0:3);for(G=0;G<_;++G){var Pe=ae[ve+4*G];Pe!=255&&(Pe*=32897,Z[te+4*G+0]=Z[te+4*G+0]*Pe>>23,Z[te+4*G+1]=Z[te+4*G+1]*Pe>>23,Z[te+4*G+2]=Z[te+4*G+2]*Pe>>23)}x+=V}}function Ai(f,x,j,_,B){for(;0<_--;){var V;for(V=0;V<j;++V){var G=f[x+2*V+0],Z=15&(ae=f[x+2*V+1]),te=4369*Z,ae=(240&ae|ae>>4)*te>>16;f[x+2*V+0]=(240&G|G>>4)*te>>16&240|(15&G|G<<4)*te>>16>>4&15,f[x+2*V+1]=240&ae|Z}x+=B}}function Rc(f,x,j,_,B,V,G,Z){var te,ae,ve=255;for(ae=0;ae<B;++ae){for(te=0;te<_;++te){var Pe=f[x+te];V[G+4*te]=Pe,ve&=Pe}x+=j,G+=Z}return ve!=255}function Mc(f,x,j,_,B){var V;for(V=0;V<B;++V)j[_+V]=f[x+V]>>8}function ho(){xo=Ja,Hd=Ai,$l=Rc,Wd=Mc}function ma(f,x,j){Y[f]=function(_,B,V,G,Z,te,ae,ve,Pe,oe,Ne,Ae,ze,Le,Me,qe,He){var We,Ct=He-1>>1,xt=Z[te+0]|ae[ve+0]<<16,Wt=Pe[oe+0]|Ne[Ae+0]<<16;r(_!=null);var Nt=3*xt+Wt+131074>>2;for(x(_[B+0],255&Nt,Nt>>16,ze,Le),V!=null&&(Nt=3*Wt+xt+131074>>2,x(V[G+0],255&Nt,Nt>>16,Me,qe)),We=1;We<=Ct;++We){var er=Z[te+We]|ae[ve+We]<<16,Vr=Pe[oe+We]|Ne[Ae+We]<<16,Kt=xt+er+Wt+Vr+524296,yt=Kt+2*(er+Wt)>>3;Nt=yt+xt>>1,xt=(Kt=Kt+2*(xt+Vr)>>3)+er>>1,x(_[B+2*We-1],255&Nt,Nt>>16,ze,Le+(2*We-1)*j),x(_[B+2*We-0],255&xt,xt>>16,ze,Le+(2*We-0)*j),V!=null&&(Nt=Kt+Wt>>1,xt=yt+Vr>>1,x(V[G+2*We-1],255&Nt,Nt>>16,Me,qe+(2*We-1)*j),x(V[G+2*We+0],255&xt,xt>>16,Me,qe+(2*We+0)*j)),xt=er,Wt=Vr}1&He||(Nt=3*xt+Wt+131074>>2,x(_[B+He-1],255&Nt,Nt>>16,ze,Le+(He-1)*j),V!=null&&(Nt=3*Wt+xt+131074>>2,x(V[G+He-1],255&Nt,Nt>>16,Me,qe+(He-1)*j)))}}function Ml(){Nn[Hc]=um,Nn[Ii]=Fi,Nn[th]=hm,Nn[Vl]=al,Nn[Hl]=wo,Nn[Nr]=Jl,Nn[Wc]=tu,Nn[rl]=Fi,Nn[yo]=al,Nn[Wl]=wo,Nn[Gl]=Jl}function Ci(f){return f&-16384?0>f?0:255:f>>Ti}function Pi(f,x){return Ci((19077*f>>8)+(26149*x>>8)-14234)}function Ls(f,x,j){return Ci((19077*f>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Qa(f,x){return Ci((19077*f>>8)+(33050*x>>8)-17685)}function Ea(f,x,j,_,B){_[B+0]=Pi(f,j),_[B+1]=Ls(f,x,j),_[B+2]=Qa(f,x)}function Ko(f,x,j,_,B){_[B+0]=Qa(f,x),_[B+1]=Ls(f,x,j),_[B+2]=Pi(f,j)}function Bl(f,x,j,_,B){var V=Ls(f,x,j);x=V<<3&224|Qa(f,x)>>3,_[B+0]=248&Pi(f,j)|V>>5,_[B+1]=x}function nn(f,x,j,_,B){var V=240&Qa(f,x)|15;_[B+0]=240&Pi(f,j)|Ls(f,x,j)>>4,_[B+1]=V}function Bc(f,x,j,_,B){_[B+0]=255,Ea(f,x,j,_,B+1)}function Yo(f,x,j,_,B){Ko(f,x,j,_,B),_[B+3]=255}function Uc(f,x,j,_,B){Ea(f,x,j,_,B),_[B+3]=255}function vs(f,x){return 0>f?0:f>x?x:f}function xn(f,x,j){Y[f]=function(_,B,V,G,Z,te,ae,ve,Pe){for(var oe=ve+(-2&Pe)*j;ve!=oe;)x(_[B+0],V[G+0],Z[te+0],ae,ve),x(_[B+1],V[G+0],Z[te+0],ae,ve+j),B+=2,++G,++te,ve+=2*j;1&Pe&&x(_[B+0],V[G+0],Z[te+0],ae,ve)}}function Xa(f,x,j){return j==0?f==0?x==0?6:5:x==0?4:0:j}function Ul(f,x,j,_,B){switch(f>>>30){case 3:Zr(x,j,_,B,0);break;case 2:ws(x,j,_,B);break;case 1:pa(x,j,_,B)}}function Za(f,x){var j,_,B=x.M,V=x.Nb,G=f.oc,Z=f.pc+40,te=f.oc,ae=f.pc+584,ve=f.oc,Pe=f.pc+600;for(j=0;16>j;++j)G[Z+32*j-1]=129;for(j=0;8>j;++j)te[ae+32*j-1]=129,ve[Pe+32*j-1]=129;for(0<B?G[Z-1-32]=te[ae-1-32]=ve[Pe-1-32]=129:(o(G,Z-32-1,127,21),o(te,ae-32-1,127,9),o(ve,Pe-32-1,127,9)),_=0;_<f.za;++_){var oe=x.ya[x.aa+_];if(0<_){for(j=-1;16>j;++j)a(G,Z+32*j-4,G,Z+32*j+12,4);for(j=-1;8>j;++j)a(te,ae+32*j-4,te,ae+32*j+4,4),a(ve,Pe+32*j-4,ve,Pe+32*j+4,4)}var Ne=f.Gd,Ae=f.Hd+_,ze=oe.ad,Le=oe.Hc;if(0<B&&(a(G,Z-32,Ne[Ae].y,0,16),a(te,ae-32,Ne[Ae].f,0,8),a(ve,Pe-32,Ne[Ae].ea,0,8)),oe.Za){var Me=G,qe=Z-32+16;for(0<B&&(_>=f.za-1?o(Me,qe,Ne[Ae].y[15],4):a(Me,qe,Ne[Ae+1].y,0,4)),j=0;4>j;j++)Me[qe+128+j]=Me[qe+256+j]=Me[qe+384+j]=Me[qe+0+j];for(j=0;16>j;++j,Le<<=2)Me=G,qe=Z+ru[j],Yn[oe.Ob[j]](Me,qe),Ul(Le,ze,16*+j,Me,qe)}else if(Me=Xa(_,B,oe.Ob[0]),dn[Me](G,Z),Le!=0)for(j=0;16>j;++j,Le<<=2)Ul(Le,ze,16*+j,G,Z+ru[j]);for(j=oe.Gc,Me=Xa(_,B,oe.Dd),wn[Me](te,ae),wn[Me](ve,Pe),Le=ze,Me=te,qe=ae,255&(oe=0|j)&&(170&oe?Fa(Le,256,Me,qe):Zo(Le,256,Me,qe)),oe=ve,Le=Pe,255&(j>>=8)&&(170&j?Fa(ze,320,oe,Le):Zo(ze,320,oe,Le)),B<f.Ub-1&&(a(Ne[Ae].y,0,G,Z+480,16),a(Ne[Ae].f,0,te,ae+224,8),a(Ne[Ae].ea,0,ve,Pe+224,8)),j=8*V*f.B,Ne=f.sa,Ae=f.ta+16*_+16*V*f.R,ze=f.qa,oe=f.ra+8*_+j,Le=f.Ha,Me=f.Ia+8*_+j,j=0;16>j;++j)a(Ne,Ae+j*f.R,G,Z+32*j,16);for(j=0;8>j;++j)a(ze,oe+j*f.B,te,ae+32*j,8),a(Le,Me+j*f.B,ve,Pe+32*j,8)}}function fo(f,x,j,_,B,V,G,Z,te){var ae=[0],ve=[0],Pe=0,oe=te!=null?te.kd:0,Ne=te??new Ot;if(f==null||12>j)return 7;Ne.data=f,Ne.w=x,Ne.ha=j,x=[x],j=[j],Ne.gb=[Ne.gb];e:{var Ae=x,ze=j,Le=Ne.gb;if(r(f!=null),r(ze!=null),r(Le!=null),Le[0]=0,12<=ze[0]&&!s(f,Ae[0],"RIFF")){if(s(f,Ae[0]+8,"WEBP")){Le=3;break e}var Me=Te(f,Ae[0]+4);if(12>Me||4294967286<Me){Le=3;break e}if(oe&&Me>ze[0]-8){Le=7;break e}Le[0]=Me,Ae[0]+=12,ze[0]-=12}Le=0}if(Le!=0)return Le;for(Me=0<Ne.gb[0],j=j[0];;){e:{var qe=f;ze=x,Le=j;var He=ae,We=ve,Ct=Ae=[0];if((Nt=Pe=[Pe])[0]=0,8>Le[0])Le=7;else{if(!s(qe,ze[0],"VP8X")){if(Te(qe,ze[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var xt=Te(qe,ze[0]+8),Wt=1+Ze(qe,ze[0]+12);if(2147483648<=Wt*(qe=1+Ze(qe,ze[0]+15))){Le=3;break e}Ct!=null&&(Ct[0]=xt),He!=null&&(He[0]=Wt),We!=null&&(We[0]=qe),ze[0]+=18,Le[0]-=18,Nt[0]=1}Le=0}}if(Pe=Pe[0],Ae=Ae[0],Le!=0)return Le;if(ze=!!(2&Ae),!Me&&Pe)return 3;if(V!=null&&(V[0]=!!(16&Ae)),G!=null&&(G[0]=ze),Z!=null&&(Z[0]=0),G=ae[0],Ae=ve[0],Pe&&ze&&te==null){Le=0;break}if(4>j){Le=7;break}if(Me&&Pe||!Me&&!Pe&&!s(f,x[0],"ALPH")){j=[j],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{xt=f,Le=x,Me=j;var Nt=Ne.gb;He=Ne.na,We=Ne.P,Ct=Ne.Sa,Wt=22,r(xt!=null),r(Me!=null),qe=Le[0];var er=Me[0];for(r(He!=null),r(Ct!=null),He[0]=null,We[0]=null,Ct[0]=0;;){if(Le[0]=qe,Me[0]=er,8>er){Le=7;break e}var Vr=Te(xt,qe+4);if(4294967286<Vr){Le=3;break e}var Kt=8+Vr+1&-2;if(Wt+=Kt,0<Nt&&Wt>Nt){Le=3;break e}if(!s(xt,qe,"VP8 ")||!s(xt,qe,"VP8L")){Le=0;break e}if(er[0]<Kt){Le=7;break e}s(xt,qe,"ALPH")||(He[0]=xt,We[0]=qe+8,Ct[0]=Vr),qe+=Kt,er-=Kt}}if(j=j[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Le!=0)break}j=[j],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(Nt=f,Le=x,Me=j,He=Ne.gb[0],We=Ne.Ja,Ct=Ne.xa,xt=Le[0],qe=!s(Nt,xt,"VP8 "),Wt=!s(Nt,xt,"VP8L"),r(Nt!=null),r(Me!=null),r(We!=null),r(Ct!=null),8>Me[0])Le=7;else{if(qe||Wt){if(Nt=Te(Nt,xt+4),12<=He&&Nt>He-12){Le=3;break e}if(oe&&Nt>Me[0]-8){Le=7;break e}We[0]=Nt,Le[0]+=8,Me[0]-=8,Ct[0]=Wt}else Ct[0]=5<=Me[0]&&Nt[xt+0]==47&&!(Nt[xt+4]>>5),We[0]=Me[0];Le=0}if(j=j[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],x=x[0],Le!=0)break;if(4294967286<Ne.Ja)return 3;if(Z==null||ze||(Z[0]=Ne.xa?2:1),G=[G],Ae=[Ae],Ne.xa){if(5>j){Le=7;break}Z=G,oe=Ae,ze=V,f==null||5>j?f=0:5<=j&&f[x+0]==47&&!(f[x+4]>>5)?(Me=[0],Nt=[0],He=[0],fe(We=new $,f,x,j),xs(We,Me,Nt,He)?(Z!=null&&(Z[0]=Me[0]),oe!=null&&(oe[0]=Nt[0]),ze!=null&&(ze[0]=He[0]),f=1):f=0):f=0}else{if(10>j){Le=7;break}Z=Ae,f==null||10>j||!Ec(f,x+3,j-3)?f=0:(oe=f[x+0]|f[x+1]<<8|f[x+2]<<16,ze=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Ne.Ja||!ze||!f?f=0:(G&&(G[0]=ze),Z&&(Z[0]=f),f=1))}if(!f||(G=G[0],Ae=Ae[0],Pe&&(ae[0]!=G||ve[0]!=Ae)))return 3;te!=null&&(te[0]=Ne,te.offset=x-te.w,r(4294967286>x-te.w),r(te.offset==te.ha-j));break}return Le==0||Le==7&&Pe&&te==null?(V!=null&&(V[0]|=Ne.na!=null&&0<Ne.na.length),_!=null&&(_[0]=G),B!=null&&(B[0]=Ae),0):Le}function an(f,x,j){var _=x.width,B=x.height,V=0,G=0,Z=_,te=B;if(x.Da=f!=null&&0<f.Da,x.Da&&(Z=f.cd,te=f.bd,V=f.v,G=f.j,11>j||(V&=-2,G&=-2),0>V||0>G||0>=Z||0>=te||V+Z>_||G+te>B))return 0;if(x.v=V,x.j=G,x.va=V+Z,x.o=G+te,x.U=Z,x.T=te,x.da=f!=null&&0<f.da,x.da){if(!dt(Z,te,j=[f.ib],V=[f.hb]))return 0;x.ib=j[0],x.hb=V[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*_/4&&x.hb<3*B/4,x.Kb=0),1}function on(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function _i(f,x,j,_){if(_==null||0>=f||0>=x)return 2;if(j!=null){if(j.Da){var B=j.cd,V=j.bd,G=-2&j.v,Z=-2&j.j;if(0>G||0>Z||0>=B||0>=V||G+B>f||Z+V>x)return 2;f=B,x=V}if(j.da){if(!dt(f,x,B=[j.ib],V=[j.hb]))return 2;f=B[0],x=V[0]}}_.width=f,_.height=x;e:{var te=_.width,ae=_.height;if(f=_.S,0>=te||0>=ae||!(f>=Hc&&13>f))f=2;else{if(0>=_.Rd&&_.sd==null){G=V=B=x=0;var ve=(Z=te*Ql[f])*ae;if(11>f||(V=(ae+1)/2*(x=(te+1)/2),f==12&&(G=(B=te)*ae)),(ae=l(ve+2*V+G))==null){f=1;break e}_.sd=ae,11>f?((te=_.f.RGBA).eb=ae,te.fb=0,te.A=Z,te.size=ve):((te=_.f.kb).y=ae,te.O=0,te.fa=Z,te.Fd=ve,te.f=ae,te.N=0+ve,te.Ab=x,te.Cd=V,te.ea=ae,te.W=0+ve+V,te.Db=x,te.Ed=V,f==12&&(te.F=ae,te.J=0+ve+2*V),te.Tc=G,te.lb=B)}if(x=1,B=_.S,V=_.width,G=_.height,B>=Hc&&13>B)if(11>B)f=_.f.RGBA,x&=(Z=Math.abs(f.A))*(G-1)+V<=f.size,x&=Z>=V*Ql[B],x&=f.eb!=null;else{f=_.f.kb,Z=(V+1)/2,ve=(G+1)/2,te=Math.abs(f.fa),ae=Math.abs(f.Ab);var Pe=Math.abs(f.Db),oe=Math.abs(f.lb),Ne=oe*(G-1)+V;x&=te*(G-1)+V<=f.Fd,x&=ae*(ve-1)+Z<=f.Cd,x=(x&=Pe*(ve-1)+Z<=f.Ed)&te>=V&ae>=Z&Pe>=Z,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,B==12&&(x&=oe>=V,x&=Ne<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||j!=null&&j.fd&&(f=on(_)),f}var ln=64,Li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ql=24,Ei=32,$r=8,qc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pe("Predictor0","PredictorAdd0"),Y.Predictor0=function(){return 4278190080},Y.Predictor1=function(f){return f},Y.Predictor2=function(f,x,j){return x[j+0]},Y.Predictor3=function(f,x,j){return x[j+1]},Y.Predictor4=function(f,x,j){return x[j-1]},Y.Predictor5=function(f,x,j){return $e($e(f,x[j+1]),x[j+0])},Y.Predictor6=function(f,x,j){return $e(f,x[j-1])},Y.Predictor7=function(f,x,j){return $e(f,x[j+0])},Y.Predictor8=function(f,x,j){return $e(x[j-1],x[j+0])},Y.Predictor9=function(f,x,j){return $e(x[j+0],x[j+1])},Y.Predictor10=function(f,x,j){return $e($e(f,x[j-1]),$e(x[j+0],x[j+1]))},Y.Predictor11=function(f,x,j){var _=x[j+0];return 0>=Je(_>>24&255,f>>24&255,(x=x[j-1])>>24&255)+Je(_>>16&255,f>>16&255,x>>16&255)+Je(_>>8&255,f>>8&255,x>>8&255)+Je(255&_,255&f,255&x)?_:f},Y.Predictor12=function(f,x,j){var _=x[j+0];return(Ge((f>>24&255)+(_>>24&255)-((x=x[j-1])>>24&255))<<24|Ge((f>>16&255)+(_>>16&255)-(x>>16&255))<<16|Ge((f>>8&255)+(_>>8&255)-(x>>8&255))<<8|Ge((255&f)+(255&_)-(255&x)))>>>0},Y.Predictor13=function(f,x,j){var _=x[j-1];return(Ue((f=$e(f,x[j+0]))>>24&255,_>>24&255)<<24|Ue(f>>16&255,_>>16&255)<<16|Ue(f>>8&255,_>>8&255)<<8|Ue(255&f,255&_))>>>0};var yn=Y.PredictorAdd0;Y.PredictorAdd1=jt,pe("Predictor2","PredictorAdd2"),pe("Predictor3","PredictorAdd3"),pe("Predictor4","PredictorAdd4"),pe("Predictor5","PredictorAdd5"),pe("Predictor6","PredictorAdd6"),pe("Predictor7","PredictorAdd7"),pe("Predictor8","PredictorAdd8"),pe("Predictor9","PredictorAdd9"),pe("Predictor10","PredictorAdd10"),pe("Predictor11","PredictorAdd11"),pe("Predictor12","PredictorAdd12"),pe("Predictor13","PredictorAdd13");var bn=Y.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Jo,Di=Y.ColorIndexInverseTransform,Qo=Y.MapARGB,mo=Y.VP8LColorIndexInverseTransformAlpha,ei=Y.MapAlpha,ti=Y.VP8LPredictorsAdd=[];ti.length=16,(Y.VP8LPredictors=[]).length=16,(Y.VP8LPredictorsAdd_C=[]).length=16,(Y.VP8LPredictors_C=[]).length=16;var Da,Xo,vn,Ia,Cr,Pr,Xr,Zr,ws,Fa,pa,Zo,zd,$d,zc,Zu,eh,po,$c,el,Vc,Vd,zl,go,xo,Hd,$l,Wd,Gd=l(511),Kd=l(2041),Yd=l(225),Jd=l(767),Qd=0,Ta=Kd,tl=Yd,cn=Jd,Kn=Gd,Hc=0,Ii=1,th=2,Vl=3,Hl=4,Nr=5,Wc=6,rl=7,yo=8,Wl=9,Gl=10,Kl=[2,3,7],Gc=[3,3,11],bo=[280,256,256,256,40],rh=[0,1,1,1,0],om=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Kc=8,sl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vo=null,Xd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],dn=[],Yn=[],wn=[],Oa=1,nl=2,Ys=[],Nn=[];ma("UpsampleRgbLinePair",Ea,3),ma("UpsampleBgrLinePair",Ko,3),ma("UpsampleRgbaLinePair",Uc,4),ma("UpsampleBgraLinePair",Yo,4),ma("UpsampleArgbLinePair",Bc,4),ma("UpsampleRgba4444LinePair",nn,2),ma("UpsampleRgb565LinePair",Bl,2);var um=Y.UpsampleRgbLinePair,hm=Y.UpsampleBgrLinePair,Fi=Y.UpsampleRgbaLinePair,al=Y.UpsampleBgraLinePair,wo=Y.UpsampleArgbLinePair,Jl=Y.UpsampleRgba4444LinePair,tu=Y.UpsampleRgb565LinePair,ri=16,ga=1<<ri-1,gr=-227,br=482,Ti=6,Ms=0,jn=l(256),No=l(256),il=l(256),Sn=l(256),Yc=l(br-gr),ih=l(br-gr);xn("YuvToRgbRow",Ea,3),xn("YuvToBgrRow",Ko,3),xn("YuvToRgbaRow",Uc,4),xn("YuvToBgraRow",Yo,4),xn("YuvToArgbRow",Bc,4),xn("YuvToRgba4444Row",nn,2),xn("YuvToRgb565Row",Bl,2);var ru=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],jo=[0,2,8],oh=[8,7,6,4,4,2,2,2,1,1,1,1],si=1;this.WebPDecodeRGBA=function(f,x,j,_,B){var V=Ii,G=new wt,Z=new ht;G.ba=Z,Z.S=V,Z.width=[Z.width],Z.height=[Z.height];var te=Z.width,ae=Z.height,ve=new nt;if(ve==null||f==null)var Pe=2;else r(ve!=null),Pe=fo(f,x,j,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Pe!=0?te=0:(te!=null&&(te[0]=ve.width[0]),ae!=null&&(ae[0]=ve.height[0]),te=1),te){Z.width=Z.width[0],Z.height=Z.height[0],_!=null&&(_[0]=Z.width),B!=null&&(B[0]=Z.height);e:{if(_=new Gs,(B=new Ot).data=f,B.w=x,B.ha=j,B.kd=1,x=[0],r(B!=null),((f=fo(B.data,B.w,B.ha,null,null,null,x,null,B))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(r(G!=null),_.data=B.data,_.w=B.w+B.offset,_.ha=B.ha-B.offset,_.put=ft,_.ac=pr,_.bc=wr,_.ma=G,B.xa){if((f=Zi())==null){G=1;break e}if((function(oe,Ne){var Ae=[0],ze=[0],Le=[0];t:for(;;){if(oe==null)return 0;if(Ne==null)return oe.a=2,0;if(oe.l=Ne,oe.a=0,fe(oe.m,Ne.data,Ne.w,Ne.ha),!xs(oe.m,Ae,ze,Le)){oe.a=3;break t}if(oe.xb=nl,Ne.width=Ae[0],Ne.height=ze[0],!ca(Ae[0],ze[0],1,oe,null))break t;return 1}return r(oe.a!=0),0})(f,_)){if(_=(x=_i(_.width,_.height,G.Oa,G.ba))==0){t:{_=f;r:for(;;){if(_==null){_=0;break t}if(r(_.s.yc!=null),r(_.s.Ya!=null),r(0<_.s.Wb),r((j=_.l)!=null),r((B=j.ma)!=null),_.xb!=0){if(_.ca=B.ba,_.tb=B.tb,r(_.ca!=null),!an(B.Oa,j,Vl)){_.a=2;break r}if(!ji(_,j.width)||j.da)break r;if((j.da||Re(_.ca.S))&&ho(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ho()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!de(_.s.vb,_.s.Wa.Xa)){_.a=1;break r}_.xb=0}if(!ys(_,_.V,_.Ba,_.c,_.i,j.o,Lr))break r;B.Dc=_.Ma,_=1;break t}r(_.a!=0),_=0}_=!_}_&&(x=f.a)}else x=f.a}else{if((f=new Ud)==null){G=1;break e}if(f.Fa=B.na,f.P=B.P,f.qc=B.Sa,so(f,_)){if((x=_i(_.width,_.height,G.Oa,G.ba))==0){if(f.Aa=0,j=G.Oa,r((B=f)!=null),j!=null){if(0<(te=0>(te=j.Md)?0:100<te?255:255*te/100)){for(ae=ve=0;4>ae;++ae)12>(Pe=B.pb[ae]).lc&&(Pe.ia=te*oh[0>Pe.lc?0:Pe.lc]>>3),ve|=Pe.ia;ve&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=j.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}(function(oe,Ne){if(oe==null)return 0;if(Ne==null)return os(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!so(oe,Ne))return 0;if(r(oe.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(oe.L=0);var Ae=jo[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Ne.v-Ae>>4,oe.zb=Ne.j-Ae>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Ne.o+15+Ae>>4,oe.Hb=Ne.va+15+Ae>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var ze=oe.ed;for(Ae=0;4>Ae;++Ae){var Le;if(oe.Qa.Cb){var Me=oe.Qa.Lb[Ae];oe.Qa.Fb||(Me+=ze.Tb)}else Me=ze.Tb;for(Le=0;1>=Le;++Le){var qe=oe.gd[Ae][Le],He=Me;if(ze.Pc&&(He+=ze.vd[0],Le&&(He+=ze.od[0])),0<(He=0>He?0:63<He?63:He)){var We=He;0<ze.wb&&(We=4<ze.wb?We>>2:We>>1)>9-ze.wb&&(We=9-ze.wb),1>We&&(We=1),qe.dd=We,qe.tc=2*He+We,qe.ld=40<=He?2:15<=He?1:0}else qe.tc=0;qe.La=Le}}}Ae=0}else os(oe,6,"Frame setup failed"),Ae=oe.a;if(Ae=Ae==0){if(Ae){oe.$c=0,0<oe.Aa||(oe.Ic=si);t:{Ae=oe.Ic,ze=4*(We=oe.za);var Ct=32*We,xt=We+1,Wt=0<oe.L?We*(0<oe.Aa?2:1):0,Nt=(oe.Aa==2?2:1)*We;if((qe=ze+832+(Le=3*(16*Ae+jo[oe.L])/2*Ct)+(Me=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=qe)Ae=0;else{if(qe>oe.Vb){if(oe.Vb=0,oe.Ec=l(qe),oe.Fc=0,oe.Ec==null){Ae=os(oe,1,"no memory during frame initialization.");break t}oe.Vb=qe}qe=oe.Ec,He=oe.Fc,oe.Ac=qe,oe.Bc=He,He+=ze,oe.Gd=d(Ct,Tn),oe.Hd=0,oe.rb=d(xt+1,Si),oe.sb=1,oe.wa=Wt?d(Wt,Fn):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=We),r(!0),oe.oc=qe,oe.pc=He,He+=832,oe.ya=d(Nt,qo),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=We),oe.R=16*We,oe.B=8*We,We=(Ct=jo[oe.L])*oe.R,Ct=Ct/2*oe.B,oe.sa=qe,oe.ta=He+We,oe.qa=oe.sa,oe.ra=oe.ta+16*Ae*oe.R+Ct,oe.Ha=oe.qa,oe.Ia=oe.ra+8*Ae*oe.B+Ct,oe.$c=0,He+=Le,oe.mb=Me?qe:null,oe.nb=Me?He:null,r(He+Me<=oe.Fc+oe.Vb),da(oe),o(oe.Ac,oe.Bc,0,ze),Ae=1}}if(Ae){if(Ne.ka=0,Ne.y=oe.sa,Ne.O=oe.ta,Ne.f=oe.qa,Ne.N=oe.ra,Ne.ea=oe.Ha,Ne.Vd=oe.Ia,Ne.fa=oe.R,Ne.Rc=oe.B,Ne.F=null,Ne.J=0,!Qd){for(Ae=-255;255>=Ae;++Ae)Gd[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)Kd[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)Yd[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)Jd[255+Ae]=0>Ae?0:255<Ae?255:Ae;Qd=1}Xr=or,Zr=Il,Fa=io,pa=Aa,Zo=zo,ws=Dc,zd=w,$d=M,zc=ke,Zu=Ve,eh=le,po=ye,$c=Ye,el=bt,Vc=Gn,Vd=Ya,zl=ki,go=Go,Yn[0]=qd,Yn[1]=$o,Yn[2]=oo,Yn[3]=Pa,Yn[4]=Tc,Yn[5]=Ga,Yn[6]=On,Yn[7]=Oc,Yn[8]=lo,Yn[9]=Ho,dn[0]=ua,dn[1]=Ic,dn[2]=Fc,dn[3]=Vo,dn[4]=Ca,dn[5]=gn,dn[6]=Wn,wn[0]=fa,wn[1]=Fl,wn[2]=Tl,wn[3]=ha,wn[4]=Ol,wn[5]=Wo,wn[6]=Rl,Ae=1}else Ae=0}Ae&&(Ae=(function(er,Vr){for(er.M=0;er.M<er.Va;++er.M){var Kt,yt=er.Jc[er.M&er.Xb],rt=er.m,es=er;for(Kt=0;Kt<es.za;++Kt){var qt=rt,Zt=es,_r=Zt.Ac,Es=Zt.Bc+4*Kt,ds=Zt.zc,Ur=Zt.ya[Zt.aa+Kt];if(Zt.Qa.Bb?Ur.$b=Ee(qt,Zt.Pa.jb[0])?2+Ee(qt,Zt.Pa.jb[2]):Ee(qt,Zt.Pa.jb[1]):Ur.$b=0,Zt.kc&&(Ur.Ad=Ee(qt,Zt.Bd)),Ur.Za=!Ee(qt,145)+0,Ur.Za){var Ns=Ur.Ob,Ds=0;for(Zt=0;4>Zt;++Zt){var Tr,sr=ds[0+Zt];for(Tr=0;4>Tr;++Tr){sr=cm[_r[Es+Tr]][sr];for(var cr=nh[Ee(qt,sr[0])];0<cr;)cr=nh[2*cr+Ee(qt,sr[cr])];sr=-cr,_r[Es+Tr]=sr}a(Ns,Ds,_r,Es,4),Ds+=4,ds[0+Zt]=sr}}else sr=Ee(qt,156)?Ee(qt,128)?1:3:Ee(qt,163)?2:0,Ur.Ob[0]=sr,o(_r,Es,sr,4),o(ds,0,sr,4);Ur.Dd=Ee(qt,142)?Ee(qt,114)?Ee(qt,183)?1:3:2:0}if(es.m.Ka)return os(er,7,"Premature end-of-partition0 encountered.");for(;er.ja<er.za;++er.ja){if(es=yt,qt=(rt=er).rb[rt.sb-1],_r=rt.rb[rt.sb+rt.ja],Kt=rt.ya[rt.aa+rt.ja],Es=rt.kc?Kt.Ad:0)qt.la=_r.la=0,Kt.Za||(qt.Na=_r.Na=0),Kt.Hc=0,Kt.Gc=0,Kt.ia=0;else{var Or,dr;if(qt=_r,_r=es,Es=rt.Pa.Xc,ds=rt.ya[rt.aa+rt.ja],Ur=rt.pb[ds.$b],Zt=ds.ad,Ns=0,Ds=rt.rb[rt.sb-1],sr=Tr=0,o(Zt,Ns,0,384),ds.Za)var Hr=0,Wr=Es[3];else{cr=l(16);var jr=qt.Na+Ds.Na;if(jr=vo(_r,Es[1],jr,Ur.Eb,0,cr,0),qt.Na=Ds.Na=(0<jr)+0,1<jr)Xr(cr,0,Zt,Ns);else{var Js=cr[0]+3>>3;for(cr=0;256>cr;cr+=16)Zt[Ns+cr]=Js}Hr=1,Wr=Es[0]}var vr=15&qt.la,Sr=15&Ds.la;for(cr=0;4>cr;++cr){var us=1&Sr;for(Js=dr=0;4>Js;++Js)vr=vr>>1|(us=(jr=vo(_r,Wr,jr=us+(1&vr),Ur.Sc,Hr,Zt,Ns))>Hr)<<7,dr=dr<<2|(3<jr?3:1<jr?2:Zt[Ns+0]!=0),Ns+=16;vr>>=4,Sr=Sr>>1|us<<7,Tr=(Tr<<8|dr)>>>0}for(Wr=vr,Hr=Sr>>4,Or=0;4>Or;Or+=2){for(dr=0,vr=qt.la>>4+Or,Sr=Ds.la>>4+Or,cr=0;2>cr;++cr){for(us=1&Sr,Js=0;2>Js;++Js)jr=us+(1&vr),vr=vr>>1|(us=0<(jr=vo(_r,Es[2],jr,Ur.Qc,0,Zt,Ns)))<<3,dr=dr<<2|(3<jr?3:1<jr?2:Zt[Ns+0]!=0),Ns+=16;vr>>=2,Sr=Sr>>1|us<<5}sr|=dr<<4*Or,Wr|=vr<<4<<Or,Hr|=(240&Sr)<<Or}qt.la=Wr,Ds.la=Hr,ds.Hc=Tr,ds.Gc=sr,ds.ia=43690&sr?0:Ur.ia,Es=!(Tr|sr)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[Kt.$b][Kt.Za],rt.wa[rt.Y+rt.ja].La|=!Es),es.Ka)return os(er,7,"Premature end-of-file encountered.")}if(da(er),rt=Vr,es=1,Kt=(yt=er).D,qt=0<yt.L&&yt.M>=yt.zb&&yt.M<=yt.Va,yt.Aa==0)t:{if(Kt.M=yt.M,Kt.uc=qt,Za(yt,Kt),es=1,Kt=(dr=yt.D).Nb,qt=(sr=jo[yt.L])*yt.R,_r=sr/2*yt.B,cr=16*Kt*yt.R,Js=8*Kt*yt.B,Es=yt.sa,ds=yt.ta-qt+cr,Ur=yt.qa,Zt=yt.ra-_r+Js,Ns=yt.Ha,Ds=yt.Ia-_r+Js,Sr=(vr=dr.M)==0,Tr=vr>=yt.Va-1,yt.Aa==2&&Za(yt,dr),dr.uc)for(us=(jr=yt).D.M,r(jr.D.uc),dr=jr.yb;dr<jr.Hb;++dr){Hr=dr,Wr=us;var Bs=(kn=(ss=jr).D).Nb;Or=ss.R;var kn=kn.wa[kn.Y+Hr],ts=ss.sa,rs=ss.ta+16*Bs*Or+16*Hr,Qs=kn.dd,kr=kn.tc;if(kr!=0)if(r(3<=kr),ss.L==1)0<Hr&&Vd(ts,rs,Or,kr+4),kn.La&&go(ts,rs,Or,kr),0<Wr&&Vc(ts,rs,Or,kr+4),kn.La&&zl(ts,rs,Or,kr);else{var Xs=ss.B,Jn=ss.qa,xa=ss.ra+8*Bs*Xs+8*Hr,Is=ss.Ha,ss=ss.Ia+8*Bs*Xs+8*Hr;Bs=kn.ld,0<Hr&&($d(ts,rs,Or,kr+4,Qs,Bs),Zu(Jn,xa,Is,ss,Xs,kr+4,Qs,Bs)),kn.La&&(po(ts,rs,Or,kr,Qs,Bs),el(Jn,xa,Is,ss,Xs,kr,Qs,Bs)),0<Wr&&(zd(ts,rs,Or,kr+4,Qs,Bs),zc(Jn,xa,Is,ss,Xs,kr+4,Qs,Bs)),kn.La&&(eh(ts,rs,Or,kr,Qs,Bs),$c(Jn,xa,Is,ss,Xs,kr,Qs,Bs))}}if(yt.ia&&alert("todo:DitherRow"),rt.put!=null){if(dr=16*vr,vr=16*(vr+1),Sr?(rt.y=yt.sa,rt.O=yt.ta+cr,rt.f=yt.qa,rt.N=yt.ra+Js,rt.ea=yt.Ha,rt.W=yt.Ia+Js):(dr-=sr,rt.y=Es,rt.O=ds,rt.f=Ur,rt.N=Zt,rt.ea=Ns,rt.W=Ds),Tr||(vr-=sr),vr>rt.o&&(vr=rt.o),rt.F=null,rt.J=null,yt.Fa!=null&&0<yt.Fa.length&&dr<vr&&(rt.J=Rs(yt,rt,dr,vr-dr),rt.F=yt.mb,rt.F==null&&rt.F.length==0)){es=os(yt,3,"Could not decode alpha data.");break t}dr<rt.j&&(sr=rt.j-dr,dr=rt.j,r(!(1&sr)),rt.O+=yt.R*sr,rt.N+=yt.B*(sr>>1),rt.W+=yt.B*(sr>>1),rt.F!=null&&(rt.J+=rt.width*sr)),dr<vr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=dr-rt.j,rt.U=rt.va-rt.v,rt.T=vr-dr,es=rt.put(rt))}Kt+1!=yt.Ic||Tr||(a(yt.sa,yt.ta-qt,Es,ds+16*yt.R,qt),a(yt.qa,yt.ra-_r,Ur,Zt+8*yt.B,_r),a(yt.Ha,yt.Ia-_r,Ns,Ds+8*yt.B,_r))}if(!es)return os(er,6,"Output aborted.")}return 1})(oe,Ne)),Ne.bc!=null&&Ne.bc(Ne),Ae&=1}return Ae?(oe.cb=0,Ae):0})(f,_)||(x=f.a)}}else x=f.a}x==0&&G.Oa!=null&&G.Oa.fd&&(x=on(G.ba))}G=x}V=G!=0?null:11>V?Z.f.RGBA.eb:Z.f.kb.y}else V=null;return V};var Ql=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(Y,ie){for(var I="",q=0;q<4;q++)I+=String.fromCharCode(Y[ie++]);return I}function p(Y,ie){return Y[ie+0]|Y[ie+1]<<8}function v(Y,ie){return(Y[ie+0]|Y[ie+1]<<8|Y[ie+2]<<16)>>>0}function N(Y,ie){return(Y[ie+0]|Y[ie+1]<<8|Y[ie+2]<<16|Y[ie+3]<<24)>>>0}new h;var y=[0],A=[0],C=[],S=new h,L=t,E=(function(Y,ie){var I={},q=0,U=!1,J=0,be=0;if(I.frames=[],!(function(D,$){for(var W=0;W<4;W++)if(D[$+W]!="RIFF".charCodeAt(W))return!0;return!1})(Y,ie)){for(N(Y,ie+=4),ie+=8;ie<Y.length;){var ge=m(Y,ie),T=N(Y,ie+=4);ie+=4;var re=T+(1&T);switch(ge){case"VP8 ":case"VP8L":I.frames[q]===void 0&&(I.frames[q]={}),(ee=I.frames[q]).src_off=U?be:ie-8,ee.src_size=J+T+8,q++,U&&(U=!1,J=0,be=0);break;case"VP8X":(ee=I.header={}).feature_flags=Y[ie];var fe=ie+4;ee.canvas_width=1+v(Y,fe),fe+=3,ee.canvas_height=1+v(Y,fe),fe+=3;break;case"ALPH":U=!0,J=re+8,be=ie-8;break;case"ANIM":(ee=I.header).bgcolor=N(Y,ie),fe=ie+4,ee.loop_count=p(Y,fe),fe+=2;break;case"ANMF":var Se,ee;(ee=I.frames[q]={}).offset_x=2*v(Y,ie),ie+=3,ee.offset_y=2*v(Y,ie),ie+=3,ee.width=1+v(Y,ie),ie+=3,ee.height=1+v(Y,ie),ie+=3,ee.duration=v(Y,ie),ie+=3,Se=Y[ie++],ee.dispose=1&Se,ee.blend=Se>>1&1}ge!="ANMF"&&(ie+=re)}return I}})(L,0);E.response=L,E.rgbaoutput=!0,E.dataurl=!1;var P=E.header?E.header:null,F=E.frames?E.frames:null;if(P){P.loop_counter=P.loop_count,y=[P.canvas_height],A=[P.canvas_width];for(var O=0;O<F.length&&F[O].blend!=0;O++);}var se=F[0],X=S.WebPDecodeRGBA(L,se.src_off,se.src_size,A,y);se.rgba=X,se.imgwidth=A[0],se.imgheight=y[0];for(var K=0;K<A[0]*y[0]*4;K++)C[K]=X[K];return this.width=A,this.height=y,this.data=C,this}(function(t){var r,s,a,o,l,d,u,h,m,p=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new h,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new d,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new d,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new v(this),r=this.internal.f2,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,m=new p}]);var v=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=D;Object.defineProperty(this,"pdf",{get:function(){return $}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Te){W=!!Te}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Te){ne=!!Te}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(Te){isNaN(Te)||(H=Te)}});var Q=0;Object.defineProperty(this,"posY",{get:function(){return Q},set:function(Te){isNaN(Te)||(Q=Te)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Te){var de;typeof Te=="number"?de=[Te,Te,Te,Te]:((de=new Array(4))[0]=Te[0],de[1]=Te.length>=2?Te[1]:de[0],de[2]=Te.length>=3?Te[2]:de[0],de[3]=Te.length>=4?Te[3]:de[1]),m.margin=de}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(Te){ue=Te}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Te){xe=Te}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Te){Ee=Te}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Te){Te instanceof p&&(m=Te)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Te){m.path=Te}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(Te){me=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var de;de=N(Te),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var de=N(Te);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var De=null,Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Te){De=null,Ze=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var de;if(this.ctx.font=Te,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Fe=de[1];de[2];var st=de[3],dt=de[4];de[5];var Ke=de[6],ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dt)[2];dt=Math.floor(ce==="px"?parseFloat(dt)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(dt)*this.pdf.getFontSize():parseFloat(dt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dt);var pe=(function(_t){var ut,hr,zt=[],pt=_t.trim();if(pt==="")return Tp;if(pt in p1)return[p1[pt]];for(;pt!=="";){switch(hr=null,ut=(pt=x1(pt)).charAt(0)){case'"':case"'":hr=y8(pt.substring(1),ut);break;default:hr=b8(pt)}if(hr===null||(zt.push(hr[0]),(pt=x1(hr[1]))!==""&&pt.charAt(0)!==","))return Tp;pt=pt.replace(/^,/,"")}return zt})(Ke);if(this.fontFaces){var Ce=(function(_t,ut){if(De===null){var hr=(function(zt){var pt=[];return Object.keys(zt).forEach(function(Tt){zt[Tt].forEach(function(nr){var Et=null;switch(nr){case"bold":Et={family:Tt,weight:"bold"};break;case"italic":Et={family:Tt,style:"italic"};break;case"bolditalic":Et={family:Tt,weight:"bold",style:"italic"};break;case"":case"normal":Et={family:Tt}}Et!==null&&(Et.ref={name:Tt,style:nr},pt.push(Et))})}),pt})(_t.getFontList());De=(function(zt){for(var pt={},Tt=0;Tt<zt.length;++Tt){var nr=Fp(zt[Tt]),Et=nr.family,Gt=nr.stretch,Re=nr.style,it=nr.weight;pt[Et]=pt[Et]||{},pt[Et][Gt]=pt[Et][Gt]||{},pt[Et][Gt][Re]=pt[Et][Gt][Re]||{},pt[Et][Gt][Re][it]=nr}return pt})(hr.concat(ut))}return De})(this.pdf,this.fontFaces),$e=pe.map(function(_t){return{family:_t,stretch:"normal",weight:st,style:Fe}}),Ge=(function(_t,ut,hr){for(var zt=(hr=hr||{}).defaultFontFamily||"times",pt=Object.assign({},x8,hr.genericFontFamilies||{}),Tt=null,nr=null,Et=0;Et<ut.length;++Et)if(pt[(Tt=Fp(ut[Et])).family]&&(Tt.family=pt[Tt.family]),_t.hasOwnProperty(Tt.family)){nr=_t[Tt.family];break}if(!(nr=nr||_t[zt]))throw new Error("Could not find a font-family for the rule '"+g1(Tt)+"' and default family '"+zt+"'.");if(nr=(function(Gt,Re){if(Re[Gt])return Re[Gt];var it=v0[Gt],ct=it<=v0.normal?-1:1,ht=m1(Re,hv,it,ct);if(!ht)throw new Error("Could not find a matching font-stretch value for "+Gt);return ht})(Tt.stretch,nr),nr=(function(Gt,Re){if(Re[Gt])return Re[Gt];for(var it=uv[Gt],ct=0;ct<it.length;++ct)if(Re[it[ct]])return Re[it[ct]];throw new Error("Could not find a matching font-style for "+Gt)})(Tt.style,nr),!(nr=(function(Gt,Re){if(Re[Gt])return Re[Gt];if(Gt===400&&Re[500])return Re[500];if(Gt===500&&Re[400])return Re[400];var it=g8[Gt],ct=m1(Re,fv,it,Gt<400?-1:1);if(!ct)throw new Error("Could not find a matching font-weight for value "+Gt);return ct})(Tt.weight,nr)))throw new Error("Failed to resolve a font for the rule '"+g1(Tt)+"'.");return nr})(Ce,$e);this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Ue="";(st==="bold"||parseInt(st,10)>=700||Fe==="bold")&&(Ue="bold"),Fe==="italic"&&(Ue+="italic"),Ue.length===0&&(Ue="normal");for(var Je="",jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<pe.length;ot++){if(this.pdf.internal.getFont(pe[ot],Ue,{noFallback:!0,disableWarning:!0})!==void 0){Je=pe[ot];break}if(Ue==="bolditalic"&&this.pdf.internal.getFont(pe[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Je=pe[ot],Ue="bold";else if(this.pdf.internal.getFont(pe[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Je=pe[ot],Ue="normal";break}}if(Je===""){for(var lt=0;lt<pe.length;lt++)if(jt[pe[lt]]){Je=jt[pe[lt]];break}}Je=Je===""?"Times":Je,this.pdf.setFont(Je,Ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};v.prototype.setLineDash=function(D){this.lineDash=D},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){F.call(this,"fill",!1)},v.prototype.stroke=function(){F.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(D,$){if(isNaN(D)||isNaN($))throw Ir.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new d(D,$));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new d(D,$)},v.prototype.closePath=function(){var D=new d(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&Ar(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){D=new d(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(D.x,D.y)},v.prototype.lineTo=function(D,$){if(isNaN(D)||isNaN($))throw Ir.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new d(D,$));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new d(W.x,W.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},v.prototype.quadraticCurveTo=function(D,$,W,ne){if(isNaN(W)||isNaN(ne)||isNaN(D)||isNaN($))throw Ir.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new d(W,ne)),Q=this.ctx.transform.applyToPoint(new d(D,$));this.path.push({type:"qct",x1:Q.x,y1:Q.y,x:H.x,y:H.y}),this.ctx.lastPoint=new d(H.x,H.y)},v.prototype.bezierCurveTo=function(D,$,W,ne,H,Q){if(isNaN(H)||isNaN(Q)||isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne))throw Ir.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new d(H,Q)),xe=this.ctx.transform.applyToPoint(new d(D,$)),Ee=this.ctx.transform.applyToPoint(new d(W,ne));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ee.x,y2:Ee.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new d(ue.x,ue.y)},v.prototype.arc=function(D,$,W,ne,H,Q){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne)||isNaN(H))throw Ir.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Q=!!Q,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new d(D,$));D=ue.x,$=ue.y;var xe=this.ctx.transform.applyToPoint(new d(0,W)),Ee=this.ctx.transform.applyToPoint(new d(0,0));W=Math.sqrt(Math.pow(xe.x-Ee.x,2)+Math.pow(xe.y-Ee.y,2))}Math.abs(H-ne)>=2*Math.PI&&(ne=0,H=2*Math.PI),this.path.push({type:"arc",x:D,y:$,radius:W,startAngle:ne,endAngle:H,counterclockwise:Q})},v.prototype.arcTo=function(D,$,W,ne,H){throw new Error("arcTo not implemented.")},v.prototype.rect=function(D,$,W,ne){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne))throw Ir.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,$),this.lineTo(D+W,$),this.lineTo(D+W,$+ne),this.lineTo(D,$+ne),this.lineTo(D,$),this.lineTo(D+W,$),this.lineTo(D,$)},v.prototype.fillRect=function(D,$,W,ne){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne))throw Ir.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,$,W,ne),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},v.prototype.strokeRect=function(D,$,W,ne){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne))throw Ir.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(D,$,W,ne),this.stroke())},v.prototype.clearRect=function(D,$,W,ne){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne))throw Ir.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,$,W,ne))},v.prototype.save=function(D){D=typeof D!="boolean"||D;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage($),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},v.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage($),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(D){var $,W,ne,H;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))$=0,W=0,ne=0,H=0;else{var Q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(Q!==null)$=parseInt(Q[1]),W=parseInt(Q[2]),ne=parseInt(Q[3]),H=1;else if((Q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)$=parseInt(Q[1]),W=parseInt(Q[2]),ne=parseInt(Q[3]),H=parseFloat(Q[4]);else{if(H=1,typeof D=="string"&&D.charAt(0)!=="#"){var ue=new nv(D);D=ue.ok?ue.toHex():"#000000"}D.length===4?($=D.substring(1,2),$+=$,W=D.substring(2,3),W+=W,ne=D.substring(3,4),ne+=ne):($=D.substring(1,3),W=D.substring(3,5),ne=D.substring(5,7)),$=parseInt($,16),W=parseInt(W,16),ne=parseInt(ne,16)}}return{r:$,g:W,b:ne,a:H,style:D}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(D,$,W,ne){if(isNaN($)||isNaN(W)||typeof D!="string")throw Ir.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!y.call(this)){var H=re(this.ctx.transform.rotation),Q=this.ctx.transform.scaleX;q.call(this,{text:D,x:$,y:W,scale:Q,angle:H,align:this.textAlign,maxWidth:ne})}},v.prototype.strokeText=function(D,$,W,ne){if(isNaN($)||isNaN(W)||typeof D!="string")throw Ir.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){ne=isNaN(ne)?void 0:ne;var H=re(this.ctx.transform.rotation),Q=this.ctx.transform.scaleX;q.call(this,{text:D,x:$,y:W,scale:Q,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:ne})}},v.prototype.measureText=function(D){if(typeof D!="string")throw Ir.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,W=this.pdf.internal.scaleFactor,ne=$.internal.getFontSize(),H=$.getStringUnitWidth(D)*ne/$.internal.scaleFactor;return new function(Q){var ue=(Q=Q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this}({width:H*=Math.round(96*W/72*1e4)/1e4})},v.prototype.scale=function(D,$){if(isNaN(D)||isNaN($))throw Ir.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new h(D,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},v.prototype.rotate=function(D){if(isNaN(D))throw Ir.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new h(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply($)},v.prototype.translate=function(D,$){if(isNaN(D)||isNaN($))throw Ir.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new h(1,0,0,1,D,$);this.ctx.transform=this.ctx.transform.multiply(W)},v.prototype.transform=function(D,$,W,ne,H,Q){if(isNaN(D)||isNaN($)||isNaN(W)||isNaN(ne)||isNaN(H)||isNaN(Q))throw Ir.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new h(D,$,W,ne,H,Q);this.ctx.transform=this.ctx.transform.multiply(ue)},v.prototype.setTransform=function(D,$,W,ne,H,Q){D=isNaN(D)?1:D,$=isNaN($)?0:$,W=isNaN(W)?0:W,ne=isNaN(ne)?1:ne,H=isNaN(H)?0:H,Q=isNaN(Q)?0:Q,this.ctx.transform=new h(D,$,W,ne,H,Q)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(D,$,W,ne,H,Q,ue,xe,Ee){var me=this.pdf.getImageProperties(D),De=1,Ze=1,Te=1,de=1;ne!==void 0&&xe!==void 0&&(Te=xe/ne,de=Ee/H,De=me.width/ne*xe/ne,Ze=me.height/H*Ee/H),Q===void 0&&(Q=$,ue=W,$=0,W=0),ne!==void 0&&xe===void 0&&(xe=ne,Ee=H),ne===void 0&&xe===void 0&&(xe=me.width,Ee=me.height);for(var Fe,st=this.ctx.transform.decompose(),dt=re(st.rotate.shx),Ke=new h,ce=(Ke=(Ke=(Ke=Ke.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new u(Q-$*Te,ue-W*de,ne*De,H*Ze)),pe=S.call(this,ce),Ce=[],$e=0;$e<pe.length;$e+=1)Ce.indexOf(pe[$e])===-1&&Ce.push(pe[$e]);if(P(Ce),this.autoPaging)for(var Ge=Ce[0],Ue=Ce[Ce.length-1],Je=Ge;Je<Ue+1;Je++){this.pdf.setPage(Je);var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Je===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Je===1?0:lt+(Je-2)*_t;if(this.ctx.clip_path.length!==0){var hr=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Fe,this.posX+this.margin[3],-ut+ot+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=hr}var zt=JSON.parse(JSON.stringify(ce));zt=E([zt],this.posX+this.margin[3],-ut+ot+this.ctx.prevPageLastElemOffset)[0];var pt=(Je>Ge||Je<Ue)&&C.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,_t,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",zt.x,zt.y,zt.w,zt.h,null,null,dt),pt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",ce.x,ce.y,ce.w,ce.h,null,null,dt)};var S=function(D,$,W){var ne=[];$=$||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ne.push(Math.floor((D.y+H)/W)+1);break;case"arc":ne.push(Math.floor((D.y+H-D.radius)/W)+1),ne.push(Math.floor((D.y+H+D.radius)/W)+1);break;case"qct":var Q=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ne.push(Math.floor((Q.y+H)/W)+1),ne.push(Math.floor((Q.y+Q.h+H)/W)+1);break;case"bct":var ue=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ne.push(Math.floor((ue.y+H)/W)+1),ne.push(Math.floor((ue.y+ue.h+H)/W)+1);break;case"rect":ne.push(Math.floor((D.y+H)/W)+1),ne.push(Math.floor((D.y+D.h+H)/W)+1)}for(var xe=0;xe<ne.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ne[xe];)L.call(this);return ne},L=function(){var D=this.fillStyle,$=this.strokeStyle,W=this.font,ne=this.lineCap,H=this.lineWidth,Q=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=$,this.font=W,this.lineCap=ne,this.lineWidth=H,this.lineJoin=Q},E=function(D,$,W){for(var ne=0;ne<D.length;ne++)switch(D[ne].type){case"bct":D[ne].x2+=$,D[ne].y2+=W;case"qct":D[ne].x1+=$,D[ne].y1+=W;default:D[ne].x+=$,D[ne].y+=W}return D},P=function(D){return D.sort(function($,W){return $-W})},F=function(D,$){for(var W,ne,H=this.fillStyle,Q=this.strokeStyle,ue=this.lineCap,xe=this.lineWidth,Ee=Math.abs(xe*this.ctx.transform.scaleX),me=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),Te=[],de=0;de<Ze.length;de++)if(Ze[de].x!==void 0)for(var Fe=S.call(this,Ze[de]),st=0;st<Fe.length;st+=1)Te.indexOf(Fe[st])===-1&&Te.push(Fe[st]);for(var dt=0;dt<Te.length;dt++)for(;this.pdf.internal.getNumberOfPages()<Te[dt];)L.call(this);if(P(Te),this.autoPaging)for(var Ke=Te[0],ce=Te[Te.length-1],pe=Ke;pe<ce+1;pe++){this.pdf.setPage(pe),this.fillStyle=H,this.strokeStyle=Q,this.lineCap=ue,this.lineWidth=Ee,this.lineJoin=me;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=pe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=pe===1?0:Ge+(pe-2)*Ue;if(this.ctx.clip_path.length!==0){var jt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(W,this.posX+this.margin[3],-Je+$e+this.ctx.prevPageLastElemOffset),O.call(this,D,!0),this.path=jt}if(ne=JSON.parse(JSON.stringify(De)),this.path=E(ne,this.posX+this.margin[3],-Je+$e+this.ctx.prevPageLastElemOffset),$===!1||pe===0){var ot=(pe>Ke||pe<ce)&&C.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,Ue,null).clip().discardPath()),O.call(this,D,$),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Ee,O.call(this,D,$),this.lineWidth=xe;this.path=De},O=function(D,$){if((D!=="stroke"||$||!A.call(this))&&(D==="stroke"||$||!y.call(this))){for(var W,ne,H=[],Q=this.path,ue=0;ue<Q.length;ue++){var xe=Q[ue];switch(xe.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ee=H.length;if(Q[ue-1]&&!isNaN(Q[ue-1].x)&&(W=[xe.x-Q[ue-1].x,xe.y-Q[ue-1].y],Ee>0)){for(;Ee>=0;Ee--)if(H[Ee-1].close!==!0&&H[Ee-1].begin!==!0){H[Ee-1].deltas.push(W),H[Ee-1].abs.push(xe);break}}break;case"bct":W=[xe.x1-Q[ue-1].x,xe.y1-Q[ue-1].y,xe.x2-Q[ue-1].x,xe.y2-Q[ue-1].y,xe.x-Q[ue-1].x,xe.y-Q[ue-1].y],H[H.length-1].deltas.push(W);break;case"qct":var me=Q[ue-1].x+2/3*(xe.x1-Q[ue-1].x),De=Q[ue-1].y+2/3*(xe.y1-Q[ue-1].y),Ze=xe.x+2/3*(xe.x1-xe.x),Te=xe.y+2/3*(xe.y1-xe.y),de=xe.x,Fe=xe.y;W=[me-Q[ue-1].x,De-Q[ue-1].y,Ze-Q[ue-1].x,Te-Q[ue-1].y,de-Q[ue-1].x,Fe-Q[ue-1].y],H[H.length-1].deltas.push(W);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(xe)}}ne=$?null:D==="stroke"?"stroke":"fill";for(var st=!1,dt=0;dt<H.length;dt++)if(H[dt].arc)for(var Ke=H[dt].abs,ce=0;ce<Ke.length;ce++){var pe=Ke[ce];pe.type==="arc"?K.call(this,pe.x,pe.y,pe.radius,pe.startAngle,pe.endAngle,pe.counterclockwise,void 0,$,!st):U.call(this,pe.x,pe.y),st=!0}else if(H[dt].close===!0)this.pdf.internal.out("h"),st=!1;else if(H[dt].begin!==!0){var Ce=H[dt].start.x,$e=H[dt].start.y;J.call(this,H[dt].deltas,Ce,$e),st=!0}ne&&Y.call(this,ne),$&&ie.call(this)}},se=function(D){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-W;case"top":return D+$-W;case"hanging":return D+$-2*W;case"middle":return D+$/2-W;default:return D}},X=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function($,W){this.colorStops.push([$,W])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(D,$,W,ne,H,Q,ue,xe,Ee){for(var me=ge.call(this,W,ne,H,Q),De=0;De<me.length;De++){var Ze=me[De];De===0&&(Ee?I.call(this,Ze.x1+D,Ze.y1+$):U.call(this,Ze.x1+D,Ze.y1+$)),be.call(this,D,$,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}xe?ie.call(this):Y.call(this,ue)},Y=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ie=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(D,$){this.pdf.internal.out(s(D)+" "+a($)+" m")},q=function(D){var $;switch(D.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var W=this.pdf.getTextDimensions(D.text),ne=se.call(this,D.y),H=X.call(this,ne)-W.h,Q=this.ctx.transform.applyToPoint(new d(D.x,ne)),ue=this.ctx.transform.decompose(),xe=new h;xe=(xe=(xe=xe.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var Ee,me,De,Ze=this.ctx.transform.applyToRectangle(new u(D.x,ne,W.w,W.h)),Te=xe.applyToRectangle(new u(D.x,H,W.w,W.h)),de=S.call(this,Te),Fe=[],st=0;st<de.length;st+=1)Fe.indexOf(de[st])===-1&&Fe.push(de[st]);if(P(Fe),this.autoPaging)for(var dt=Fe[0],Ke=Fe[Fe.length-1],ce=dt;ce<Ke+1;ce++){this.pdf.setPage(ce);var pe=ce===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],Ge=$e-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Je=Ue-this.margin[3],jt=ce===1?0:Ce+(ce-2)*Ge;if(this.ctx.clip_path.length!==0){var ot=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Ee,this.posX+this.margin[3],-1*jt+pe),O.call(this,"fill",!0),this.path=ot}var lt=E([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-jt+pe+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*D.scale),De=this.lineWidth,this.lineWidth=De*D.scale);var _t=this.autoPaging!=="text";if(_t||lt.y+lt.h<=$e){if(_t||lt.y>=pe&&lt.x<=Ue){var ut=_t?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Ue-lt.x)[0],hr=E([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-jt+pe+this.ctx.prevPageLastElemOffset)[0],zt=_t&&(ce>dt||ce<Ke)&&C.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Ge,null).clip().discardPath()),this.pdf.text(ut,hr.x,hr.y,{angle:D.angle,align:$,renderingMode:D.renderingMode}),zt&&this.pdf.restoreGraphicsState()}}else lt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-lt.y);D.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=De)}else D.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*D.scale),De=this.lineWidth,this.lineWidth=De*D.scale),this.pdf.text(D.text,Q.x+this.posX,Q.y+this.posY,{angle:D.angle,align:$,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=De)},U=function(D,$,W,ne){W=W||0,ne=ne||0,this.pdf.internal.out(s(D+W)+" "+a($+ne)+" l")},J=function(D,$,W){return this.pdf.lines(D,$,W,null,null)},be=function(D,$,W,ne,H,Q,ue,xe){this.pdf.internal.out([r(o(W+D)),r(l(ne+$)),r(o(H+D)),r(l(Q+$)),r(o(ue+D)),r(l(xe+$)),"c"].join(" "))},ge=function(D,$,W,ne){for(var H=2*Math.PI,Q=Math.PI/2;$>W;)$-=H;var ue=Math.abs(W-$);ue<H&&ne&&(ue=H-ue);for(var xe=[],Ee=ne?-1:1,me=$;ue>1e-5;){var De=me+Ee*Math.min(ue,Q);xe.push(T.call(this,D,me,De)),ue-=Math.abs(De-me),me=De}return xe},T=function(D,$,W){var ne=(W-$)/2,H=D*Math.cos(ne),Q=D*Math.sin(ne),ue=H,xe=-Q,Ee=ue*ue+xe*xe,me=Ee+ue*H+xe*Q,De=4/3*(Math.sqrt(2*Ee*me)-me)/(ue*Q-xe*H),Ze=ue-De*xe,Te=xe+De*ue,de=Ze,Fe=-Te,st=ne+$,dt=Math.cos(st),Ke=Math.sin(st);return{x1:D*Math.cos($),y1:D*Math.sin($),x2:Ze*dt-Te*Ke,y2:Ze*Ke+Te*dt,x3:de*dt-Fe*Ke,y3:de*Ke+Fe*dt,x4:D*Math.cos(W),y4:D*Math.sin(W)}},re=function(D){return 180*D/Math.PI},fe=function(D,$,W,ne,H,Q){var ue=D+.5*(W-D),xe=$+.5*(ne-$),Ee=H+.5*(W-H),me=Q+.5*(ne-Q),De=Math.min(D,H,ue,Ee),Ze=Math.max(D,H,ue,Ee),Te=Math.min($,Q,xe,me),de=Math.max($,Q,xe,me);return new u(De,Te,Ze-De,de-Te)},Se=function(D,$,W,ne,H,Q,ue,xe){var Ee,me,De,Ze,Te,de,Fe,st,dt,Ke,ce,pe,Ce,$e,Ge=W-D,Ue=ne-$,Je=H-W,jt=Q-ne,ot=ue-H,lt=xe-Q;for(me=0;me<41;me++)dt=(Fe=(De=D+(Ee=me/40)*Ge)+Ee*((Te=W+Ee*Je)-De))+Ee*(Te+Ee*(H+Ee*ot-Te)-Fe),Ke=(st=(Ze=$+Ee*Ue)+Ee*((de=ne+Ee*jt)-Ze))+Ee*(de+Ee*(Q+Ee*lt-de)-st),me==0?(ce=dt,pe=Ke,Ce=dt,$e=Ke):(ce=Math.min(ce,dt),pe=Math.min(pe,Ke),Ce=Math.max(Ce,dt),$e=Math.max($e,Ke));return new u(Math.round(ce),Math.round(pe),Math.round(Ce-ce),Math.round($e-pe))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,$,W=(D=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:$}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Dt.API),(function(t){var r=function(d){var u,h,m,p,v,N,y,A,C,S;for(h=[],m=0,p=(d+=u="\0\0\0\0".slice(d.length%4||4)).length;p>m;m+=4)(v=(d.charCodeAt(m)<<24)+(d.charCodeAt(m+1)<<16)+(d.charCodeAt(m+2)<<8)+d.charCodeAt(m+3))!==0?(N=(v=((v=((v=((v=(v-(S=v%85))/85)-(C=v%85))/85)-(A=v%85))/85)-(y=v%85))/85)%85,h.push(N+33,y+33,A+33,C+33,S+33)):h.push(122);return(function(L,E){for(var P=E;P>0;P--)L.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},s=function(d){var u,h,m,p,v,N=String,y="length",A=255,C="charCodeAt",S="slice",L="replace";for(d[S](-2),d=d[S](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),m=[],p=0,v=(d+=u="uuuuu"[S](d[y]%5||5))[y];v>p;p+=5)h=52200625*(d[C](p)-33)+614125*(d[C](p+1)-33)+7225*(d[C](p+2)-33)+85*(d[C](p+3)-33)+(d[C](p+4)-33),m.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(E,P){for(var F=P;F>0;F--)E.pop()})(m,u[y]),N.fromCharCode.apply(N,m)},a=function(d){return d.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(d){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),u.test(d)===!1)return"";for(var h="",m=0;m<d.length;m+=2)h+=String.fromCharCode("0x"+(d[m]+d[m+1]));return h},l=function(d){for(var u=new Uint8Array(d.length),h=d.length;h--;)u[h]=d.charCodeAt(h);return(u=f0(u)).reduce(function(m,p){return m+String.fromCharCode(p)},"")};t.processDataByFilters=function(d,u){var h=0,m=d||"",p=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":m=s(m),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=r(m),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=o(m),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=a(m),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=l(m),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:m,reverseChain:p.reverse().join(" ")}}})(Dt.API),(function(t){t.loadFile=function(r,s,a){return(function(o,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=(function(h,m,p){var v=new XMLHttpRequest,N=0,y=function(A){var C=A.length,S=[],L=String.fromCharCode;for(N=0;N<C;N+=1)S.push(L(255&A.charCodeAt(N)));return S.join("")};if(v.open("GET",h,!m),v.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(v.onload=function(){v.status===200?p(y(this.responseText)):p(void 0)}),v.send(null),m&&v.status===200)return y(v.responseText)})(o,l,d)}catch{}return u})(r,s,a)},t.loadImageFile=t.loadFile})(Dt.API),(function(t){function r(){return(Vt.html2canvas?Promise.resolve(Vt.html2canvas):oa(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function s(){return(Vt.DOMPurify?Promise.resolve(Vt.DOMPurify):oa(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var a=function(u){var h=Ar(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(u,h){var m=document.createElement(u);for(var p in h.className&&(m.className=h.className),h.innerHTML&&h.dompurify&&(m.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)m.style[p]=h.style[p];return m},l=function u(h,m){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)m!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(u(v,m));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},d=function u(h){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),p=u.convert(Promise.resolve(),m);return(p=p.setProgress(1,u,1,[u])).set(h)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(u,h){return u.__proto__=h||d.prototype,u},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(m){switch(a(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(s).then(function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},d.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,h(this.prop.container,m)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(r).then(function(h){var m=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=p,p)for(var y=0;y<p.length;++y){var A=p[y],C=A.src.find(function(S){return S.format==="truetype"});C&&m.addFont(C.url,A.ref.name,A.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,m.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(u,h,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},d.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},d.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},d.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(u){if(a(u)!=="object")return this;var h=Object.keys(u||{}).map(function(m){if(m in d.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}},this);return this.then(function(){return this.thenList(h)})},d.prototype.get=function(u,h){return this.then(function(){var m=u in d.template.prop?this.prop[u]:this.opt[u];return h?h(m):m})},d.prototype.setMargin=function(u){return this.then(function(){switch(a(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},d.prototype.setPageSize=function(u){function h(m,p){return Math.floor(m*p/72*96)}return this.then(function(){(u=u||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},d.prototype.setProgress=function(u,h,m,p){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),m!=null&&(this.progress.n=m),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(u,h,m,p){return this.setProgress(u?this.progress.val+u:null,h||null,m?this.progress.n+m:null,p?this.progress.stack.concat(p):null)},d.prototype.then=function(u,h){var m=this;return this.thenCore(u,h,function(p,v){return m.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(N){return m.updateProgress(null,p),N}).then(p,v).then(function(N){return m.updateProgress(1),N})})},d.prototype.thenCore=function(u,h,m){m=m||Promise.prototype.then;var p=this;u&&(u=u.bind(p)),h&&(h=h.bind(p));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:d.convert(Object.assign({},p),Promise.prototype),N=m.call(v,u,h);return d.convert(N,p.__proto__)},d.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},d.prototype.thenList=function(u){var h=this;return u.forEach(function(m){h=h.thenCore(m)}),h},d.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return d.convert(h,this)},d.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},d.prototype.error=function(u){return this.then(function(){throw new Error(u)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Dt.getPageSize=function(u,h,m){if(Ar(u)==="object"){var p=u;u=p.orientation,h=p.unit||h,m=p.format||m}h=h||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var v,N=(""+m).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+h}var A,C=0,S=0;if(y.hasOwnProperty(N))C=y[N][1]/v,S=y[N][0]/v;else try{C=m[1],S=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",S>C&&(A=S,S=C,C=A);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",C>S&&(A=S,S=C,C=A)}return{width:S,height:C,unit:h,k:v,orientation:u}},t.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Fp):null;var m=new d(h);return h.worker?m:m.from(u).doCallback()}})(Dt.API),Dt.API.addJS=function(t){return b1=t,this.internal.events.subscribe("postPutResources",function(){Yh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Yh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),y1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+b1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Yh!==void 0&&y1!==void 0&&this.internal.out("/Names <</JavaScript "+Yh+" 0 R>>")}),this},(function(t){var r;t.events.push(["postPutResources",function(){var s=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=s.outline.render().split(/\r\n/),l=0;l<o.length;l++){var d=o[l],u=a.exec(d);if(u!=null){var h=u[1];s.internal.newObjectDeferredBegin(h,!1)}s.internal.write(d)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,p=[];for(l=0;l<m;l++){var v=s.internal.newObject();p.push(v);var N=s.internal.getPageInfo(l+1);s.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var y=s.internal.newObject();for(s.internal.write("<< /Names [ "),l=0;l<p.length;l++)s.internal.write("(page_"+(l+1)+")"+p[l]+" 0 R");s.internal.write(" ] >>","endobj"),r=s.internal.newObject(),s.internal.write("<< /Dests "+y+" 0 R"),s.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(a,o,l){var d={title:o,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(a){a.id=s.internal.newObjectDeferred();for(var o=0;o<a.children.length;o++)this.genIds_r(a.children[o])},s.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},s.outline.renderItems=function(a){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=s.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var m=0;m<a.children.length;m++)this.renderItems(a.children[m])},s.outline.line=function(a){this.ctx.val+=a+`\r
`},s.outline.makeRef=function(a){return a.id+" 0 R"},s.outline.makeString=function(a){return"("+s.internal.pdfEscape(a)+")"},s.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(a,o){for(var l=0;l<o.children.length;l++)a.count++,this.count_r(a,o.children[l]);return a.count}}])})(Dt.API),(function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(s,a,o,l,d,u){var h,m=this.decode.DCT_DECODE,p=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=d||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,h=(function(v){for(var N,y=256*v.charCodeAt(4)+v.charCodeAt(5),A=v.length,C={width:0,height:0,numcomponents:1},S=4;S<A;S+=2){if(S+=y,r.indexOf(v.charCodeAt(S+1))!==-1){N=256*v.charCodeAt(S+5)+v.charCodeAt(S+6),C={width:256*v.charCodeAt(S+7)+v.charCodeAt(S+8),height:N,numcomponents:v.charCodeAt(S+9)};break}y=256*v.charCodeAt(S+2)+v.charCodeAt(S+3)}return C})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}p={data:s,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:m,index:a,alias:o}}return p}})(Dt.API),Dt.API.processPNG=function(t,r,s,a){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,l=r8(t,{checkCrc:!0}),d=l.width,u=l.height,h=l.channels,m=l.palette,p=l.depth;o=m&&h===1?(function(X){for(var K=X.width,Y=X.height,ie=X.data,I=X.palette,q=X.depth,U=!1,J=[],be=[],ge=void 0,T=!1,re=0,fe=0;fe<I.length;fe++){var Se=jy(I[fe],4),ee=Se[0],D=Se[1],$=Se[2],W=Se[3];J.push(ee,D,$),W!=null&&(W===0?(re++,be.length<1&&be.push(fe)):W<255&&(T=!0))}if(T||re>1){U=!0,be=void 0;var ne=K*Y;ge=new Uint8Array(ne);for(var H=new DataView(ie.buffer),Q=0;Q<ne;Q++){var ue=Op(H,Q,q),xe=jy(I[ue],4)[3];ge[Q]=xe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:ie,alphaBytes:ge,needSMask:U,palette:J,mask:be}})(l):h===2||h===4?(function(X){for(var K=X.data,Y=X.width,ie=X.height,I=X.channels,q=X.depth,U=I===2?"DeviceGray":"DeviceRGB",J=I-1,be=Y*ie,ge=J,T=be*ge,re=1*be,fe=Math.ceil(T*q/8),Se=Math.ceil(re*q/8),ee=new Uint8Array(fe),D=new Uint8Array(Se),$=new DataView(K.buffer),W=new DataView(ee.buffer),ne=new DataView(D.buffer),H=!1,Q=0;Q<be;Q++){for(var ue=Q*I,xe=0;xe<ge;xe++)P1(W,Op($,ue+xe,q),Q*ge+xe,q);var Ee=Op($,ue+ge,q);Ee<(1<<q)-1&&(H=!0),P1(ne,Ee,1*Q,q)}return{colorSpace:U,colorsPerPixel:J,colorBytes:ee,alphaBytes:D,needSMask:H}})(l):(function(X){var K=X.data,Y=X.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:K instanceof Uint8Array?K:new Uint8Array(K.buffer),needSMask:!1}})(l);var v,N,y,A=o,C=A.colorSpace,S=A.colorsPerPixel,L=A.colorBytes,E=A.alphaBytes,P=A.needSMask,F=A.palette,O=A.mask,se=null;return a!==Dt.API.image_compression.NONE&&typeof f0=="function"?(se=(function(X){var K;switch(X){case Dt.API.image_compression.FAST:K=11;break;case Dt.API.image_compression.MEDIUM:K=13;break;case Dt.API.image_compression.SLOW:K=14;break;default:K=12}return K})(a),v=this.decode.FLATE_DECODE,N="/Predictor ".concat(se," "),t=j1(L,d*S,S,a),P&&(y=j1(E,d,1,a))):(v=void 0,N="",t=L,P&&(y=E)),N+="/Colors ".concat(S," /BitsPerComponent ").concat(p," /Columns ").concat(d),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:s,data:t,index:r,filter:v,decodeParameters:N,transparency:O,palette:F,sMask:y,predictor:se,width:d,height:u,bitsPerComponent:p,colorSpace:C}}},(function(t){t.processGIF89A=function(r,s,a,o){var l=new j8(r),d=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var m={data:h,width:d,height:u},p=new Rp(100).encode(m,100);return t.processJPEG.call(this,p,s,a,o)},t.processGIF87A=t.processGIF89A})(Dt.API),ui.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:a,blue:s,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ui.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(s){Ir.log("bit decode error:"+s)}},ui.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),s=r%4;for(t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,o=0;o<r;o++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}s!==0&&(this.pos+=4-s)}},ui.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*o*4,u=l>>4,h=15&l,m=this.palette[u];if(this.data[d]=m.blue,this.data[d+1]=m.green,this.data[d+2]=m.red,this.data[d+3]=255,2*o+1>=this.width)break;m=this.palette[h],this.data[d+4]=m.blue,this.data[d+4+1]=m.green,this.data[d+4+2]=m.red,this.data[d+4+3]=255}r!==0&&(this.pos+=4-r)}},ui.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*a;if(o<this.palette.length){var d=this.palette[o];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},ui.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&r)/r*255|0,u=(l>>5&r)/r*255|0,h=(l>>10&r)/r*255|0,m=l>>15?255:0,p=a*this.width*4+4*o;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=d,this.data[p+3]=m}this.pos+=t}},ui.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),s=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&r)/r*255|0,h=(d>>5&s)/s*255|0,m=(d>>11)/r*255|0,p=o*this.width*4+4*l;this.data[p]=m,this.data[p+1]=h,this.data[p+2]=u,this.data[p+3]=255}this.pos+=t}},ui.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},ui.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}},ui.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(r,s,a,o){var l=new ui(r,!1),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},m=new Rp(100).encode(h,100);return t.processJPEG.call(this,m,s,a,o)}})(Dt.API),L1.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(r,s,a,o){var l=new L1(r),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},m=new Rp(100).encode(h,100);return t.processJPEG.call(this,m,s,a,o)}})(Dt.API),Dt.API.processRGBA=function(t,r,s){for(var a=t.data,o=a.length,l=new Uint8Array(o/4*3),d=new Uint8Array(o/4),u=0,h=0,m=0;m<o;m+=4){var p=a[m],v=a[m+1],N=a[m+2],y=a[m+3];l[u++]=p,l[u++]=v,l[u++]=N,d[h++]=y}var A=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:A,index:r,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gd=Dt.API,Jh=gd.getCharWidthsArray=function(t,r){var s,a,o=(r=r||{}).font||this.internal.getFont(),l=r.fontSize||this.internal.getFontSize(),d=r.charSpace||this.internal.getCharSpace(),u=r.widths?r.widths:o.metadata.Unicode.widths,h=u.fof?u.fof:1,m=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=m.fof?m.fof:1,v=r.doKerning!==!1,N=0,y=t.length,A=0,C=u[0]||h,S=[];for(s=0;s<y;s++)a=t.charCodeAt(s),typeof o.metadata.widthOfString=="function"?S.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(N=v&&Ar(m[a])==="object"&&!isNaN(parseInt(m[a][A],10))?m[a][A]/p:0,S.push((u[a]||C)/h+N)),A=a;return S},v1=gd.getStringUnitWidth=function(t,r){var s=(r=r||{}).fontSize||this.internal.getFontSize(),a=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return gd.processArabic&&(t=gd.processArabic(t)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(t,s,o)/s:Jh.apply(this,arguments).reduce(function(l,d){return l+d},0)},w1=function(t,r,s,a){for(var o=[],l=0,d=t.length,u=0;l!==d&&u+r[l]<s;)u+=r[l],l++;o.push(t.slice(0,l));var h=l;for(u=0;l!==d;)u+r[l]>a&&(o.push(t.slice(h,l)),u=0,h=l),u+=r[l],l++;return h!==l&&o.push(t.slice(h,l)),o},N1=function(t,r,s){s||(s={});var a,o,l,d,u,h,m,p=[],v=[p],N=s.textIndent||0,y=0,A=0,C=t.split(" "),S=Jh.apply(this,[" ",s])[0];if(h=s.lineIndent===-1?C[0].length+2:s.lineIndent||0){var L=Array(h).join(" "),E=[];C.map(function(F){(F=F.split(/\s*\n/)).length>1?E=E.concat(F.map(function(O,se){return(se&&O.length?`
`:"")+O})):E.push(F[0])}),C=E,h=v1.apply(this,[L,s])}for(l=0,d=C.length;l<d;l++){var P=0;if(a=C[l],h&&a[0]==`
`&&(a=a.substr(1),P=1),N+y+(A=(o=Jh.apply(this,[a,s])).reduce(function(F,O){return F+O},0))>r||P){if(A>r){for(u=w1.apply(this,[a,o,r-(N+y),r]),p.push(u.shift()),p=[u.pop()];u.length;)v.push([u.shift()]);A=o.slice(a.length-(p[0]?p[0].length:0)).reduce(function(F,O){return F+O},0)}else p=[a];v.push(p),N=A+h,y=S}else p.push(a),N+=y+A,y=S}return m=h?function(F,O){return(O?L:"")+F.join(" ")}:function(F){return F.join(" ")},v.map(m)},gd.splitTextToSize=function(t,r,s){var a,o=(s=s||{}).fontSize||this.internal.getFontSize(),l=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var v=this.internal.getFont(p.fontName,p.fontStyle),N="Unicode";return v.metadata[N]?{widths:v.metadata[N].widths||{0:1},kerning:v.metadata[N].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);a=Array.isArray(t)?t:String(t).split(/\r?\n/);var d=1*this.internal.scaleFactor*r/o;l.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=s.lineIndent;var u,h,m=[];for(u=0,h=a.length;u<h;u++)m=m.concat(N1.apply(this,[a[u],d,l]));return m},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="0123456789abcdef",s="klmnopqrstuvwxyz",a={},o={},l=0;l<16;l++)a[s[l]]=r[l],o[r[l]]=s[l];var d=function(N){return"0x"+parseInt(N,10).toString(16)},u=t.__fontmetrics__.compress=function(N){var y,A,C,S,L=["{"];for(var E in N){if(y=N[E],isNaN(parseInt(E,10))?A="'"+E+"'":(E=parseInt(E,10),A=(A=d(E).slice(2)).slice(0,-1)+o[A.slice(-1)]),typeof y=="number")y<0?(C=d(y).slice(3),S="-"):(C=d(y).slice(2),S=""),C=S+C.slice(0,-1)+o[C.slice(-1)];else{if(Ar(y)!=="object")throw new Error("Don't know what to do with value type "+Ar(y)+".");C=u(y)}L.push(A+C)}return L.push("}"),L.join("")},h=t.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,A,C,S,L={},E=1,P=L,F=[],O="",se="",X=N.length-1,K=1;K<X;K+=1)(S=N[K])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(F.push([P,C]),P={},C=void 0):S=="}"?((A=F.pop())[0][A[1]]=P,C=void 0,P=A[0]):S=="-"?E=-1:C===void 0?a.hasOwnProperty(S)?(O+=a[S],C=parseInt(O,16)*E,E=1,O=""):O+=S:a.hasOwnProperty(S)?(se+=a[S],P[C]=parseInt(se,16)*E,E=1,C=void 0,se=""):se+=S;return L},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},v={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(N){var y=N.font,A=v.Unicode[y.postScriptName];A&&(y.metadata.Unicode={},y.metadata.Unicode.widths=A.widths,y.metadata.Unicode.kerning=A.kerning);var C=p.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])})(Dt.API),(function(t){var r=function(s){for(var a=s.length,o=new Uint8Array(a),l=0;l<a;l++)o[l]=s.charCodeAt(l);return o};t.API.events.push(["addFont",function(s){var a=void 0,o=s.font,l=s.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(a=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?r(u):r(mf(u)),d.metadata=t.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(o,a)}}])})(Dt),Dt.API.addSvgAsImage=function(t,r,s,a,o,l,d,u){if(isNaN(r)||isNaN(s))throw Ir.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw Ir.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var m=h.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Vt.canvg?Promise.resolve(Vt.canvg):oa(()=>import("./index.es-CTKQnlHu.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(m,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(p)}).then(function(){v.addImage(h.toDataURL("image/jpeg",1),r,s,a,o,d,u)})},Dt.API.putTotalPages=function(t){var r,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),s=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var o=0;o<this.internal.pages[a].length;o++)this.internal.pages[a][o]=this.internal.pages[a][o].replace(r,s);return this},Dt.API.viewerPreferences=function(t,r){var s;t=t||{},r=r||!1;var a,o,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],m=0,p=0,v=0;function N(A,C){var S,L=!1;for(S=0;S<A.length;S+=1)A[S]===C&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var y=u.length;for(v=0;v<y;v+=1)s[u[v]].value=s[u[v]].defaultValue,s[u[v]].explicitSet=!1}if(Ar(t)==="object"){for(o in t)if(l=t[o],N(u,o)&&l!==void 0){if(s[o].type==="boolean"&&typeof l=="boolean")s[o].value=l;else if(s[o].type==="name"&&N(s[o].valueSet,l))s[o].value=l;else if(s[o].type==="integer"&&Number.isInteger(l))s[o].value=l;else if(s[o].type==="array"){for(m=0;m<l.length;m+=1)if(a=!0,l[m].length===1&&typeof l[m][0]=="number")h.push(String(l[m]-1));else if(l[m].length>1){for(p=0;p<l[m].length;p+=1)typeof l[m][p]!="number"&&(a=!1);a===!0&&h.push([l[m][0]-1,l[m][1]-1].join(" "))}s[o].value="["+h.join(" ")+"]"}else s[o].value=s[o].defaultValue;s[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,C=[];for(A in s)s[A].explicitSet===!0&&(s[A].type==="name"?C.push("/"+A+" /"+s[A].value):C.push("/"+A+" "+s[A].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(t){var r=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),m=l.length+d.length+u.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(o+l+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(a,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",r)),this}})(Dt.API),(function(t){var r=t.API,s=r.pdfEscape16=function(l,d){for(var u,h=d.metadata.Unicode.widths,m=["","0","00","000","0000"],p=[""],v=0,N=l.length;v<N;++v){if(u=d.metadata.characterToGlyph(l.charCodeAt(v)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(v),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return p.join("");u=u.toString(16),p.push(m[4-u.length],u)}return p.join("")},a=function(l){var d,u,h,m,p,v,N;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,N=(u=Object.keys(l).sort(function(y,A){return y-A})).length;v<N;v++)d=u[v],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(m=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+m+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,m=d.newObject,p=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var v=u.metadata.Unicode.widths,N=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",A=0;A<N.length;A++)y+=String.fromCharCode(N[A]);var C=m();p({data:y,addLength1:!0,objectId:C}),h("endobj");var S=m();p({data:a(u.metadata.toUnicode),addLength1:!0,objectId:S}),h("endobj");var L=m();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+bd(u.fontName)),h("/FontFile2 "+C+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var E=m();h("<<"),h("/Type /Font"),h("/BaseFont /"+bd(u.fontName)),h("/FontDescriptor "+L+" 0 R"),h("/W "+t.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=m(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+S+" 0 R"),h("/BaseFont /"+bd(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+E+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),r.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,m=d.newObject,p=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var v=u.metadata.rawData,N="",y=0;y<v.length;y++)N+=String.fromCharCode(v[y]);var A=m();p({data:N,addLength1:!0,objectId:A}),h("endobj");var C=m();p({data:a(u.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var S=m();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+bd(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=m();for(var L=0;L<u.metadata.hmtx.widths.length;L++)u.metadata.hmtx.widths[L]=parseInt(u.metadata.hmtx.widths[L]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+bd(u.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var o=function(l){var d,u=l.text||"",h=l.x,m=l.y,p=l.options||{},v=l.mutex||{},N=v.pdfEscape,y=v.activeFontKey,A=v.fonts,C=y,S="",L=0,E="",P=A[C].encoding;if(A[C].encoding!=="Identity-H")return{text:u,x:h,y:m,options:p,mutex:v};for(E=u,C=y,Array.isArray(u)&&(E=u[0]),L=0;L<E.length;L+=1)A[C].metadata.hasOwnProperty("cmap")&&(d=A[C].metadata.cmap.unicode.codeMap[E[L].charCodeAt(0)]),d||E[L].charCodeAt(0)<256&&A[C].metadata.hasOwnProperty("Unicode")?S+=E[L]:S+="";var F="";return parseInt(C.slice(1))<14||P==="WinAnsiEncoding"?F=N(S,C).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):P==="Identity-H"&&(F=s(S,A[C])),v.isHex=!0,{text:F,x:h,y:m,options:p,mutex:v}};r.events.push(["postProcessText",function(l){var d=l.text||"",u=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var m=0;for(m=0;m<d.length;m+=1)Array.isArray(d[m])&&d[m].length===3?u.push([o(Object.assign({},h,{text:d[m][0]})).text,d[m][1],d[m][2]]):u.push(o(Object.assign({},h,{text:d[m]})).text);l.text=u}else l.text=o(Object.assign({},h,{text:d})).text}])})(Dt),(function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(s){return r.call(this),this.internal.vFS[s]!==void 0},t.addFileToVFS=function(s,a){return r.call(this),this.internal.vFS[s]=a,this},t.getFileFromVFS=function(s){return r.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(Dt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(a){var o,l,d,u,h,m,p,v=r,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,P=0;this.__bidiEngine__={};var F=function(I){var q=I.charCodeAt(),U=q>>8,J=C[U];return J!==void 0?v[256*J+(255&q)]:U===252||U===253?"AL":L.test(U)?"L":U===8?"R":"N"},O=function(I){for(var q,U=0;U<I.length;U++){if((q=F(I.charAt(U)))==="L")return!1;if(q==="R")return!0}return!1},se=function(I,q,U,J){var be,ge,T,re,fe=q[J];switch(fe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(fe="AN");break;case"AL":E=!0,fe="R";break;case"WS":case"BN":fe="N";break;case"CS":J<1||J+1>=q.length||(be=U[J-1])!=="EN"&&be!=="AN"||(ge=q[J+1])!=="EN"&&ge!=="AN"?fe="N":E&&(ge="AN"),fe=ge===be?ge:"N";break;case"ES":fe=(be=J>0?U[J-1]:"B")==="EN"&&J+1<q.length&&q[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&U[J-1]==="EN"){fe="EN";break}if(E){fe="N";break}for(T=J+1,re=q.length;T<re&&q[T]==="ET";)T++;fe=T<re&&q[T]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(re=q.length,T=J+1;T<re&&q[T]==="NSM";)T++;if(T<re){var Se=I[J],ee=Se>=1425&&Se<=2303||Se===64286;if(be=q[T],ee&&(be==="R"||be==="AL")){fe="R";break}}}fe=J<1||(be=q[J-1])==="B"?"N":U[J-1];break;case"B":E=!1,o=!0,fe=P;break;case"S":l=!0,fe="N"}return fe},X=function(I,q,U){var J=I.split("");return U&&K(J,U,{hiLevel:P}),J.reverse(),q&&q.reverse(),J.join("")},K=function(I,q,U){var J,be,ge,T,re,fe=-1,Se=I.length,ee=0,D=[],$=P?y:N,W=[];for(E=!1,o=!1,l=!1,be=0;be<Se;be++)W[be]=F(I[be]);for(ge=0;ge<Se;ge++){if(re=ee,D[ge]=se(I,W,D,ge),J=240&(ee=$[re][A[D[ge]]]),ee&=15,q[ge]=T=$[ee][5],J>0)if(J===16){for(be=fe;be<ge;be++)q[be]=1;fe=-1}else fe=-1;if($[ee][6])fe===-1&&(fe=ge);else if(fe>-1){for(be=fe;be<ge;be++)q[be]=T;fe=-1}W[ge]==="B"&&(q[ge]=0),U.hiLevel|=T}l&&(function(ne,H,Q){for(var ue=0;ue<Q;ue++)if(ne[ue]==="S"){H[ue]=P;for(var xe=ue-1;xe>=0&&ne[xe]==="WS";xe--)H[xe]=P}})(W,q,Se)},Y=function(I,q,U,J,be){if(!(be.hiLevel<I)){if(I===1&&P===1&&!o)return q.reverse(),void(U&&U.reverse());for(var ge,T,re,fe,Se=q.length,ee=0;ee<Se;){if(J[ee]>=I){for(re=ee+1;re<Se&&J[re]>=I;)re++;for(fe=ee,T=re-1;fe<T;fe++,T--)ge=q[fe],q[fe]=q[T],q[T]=ge,U&&(ge=U[fe],U[fe]=U[T],U[T]=ge);ee=re}ee++}}},ie=function(I,q,U){var J=I.split(""),be={hiLevel:P};return U||(U=[]),K(J,U,be),(function(ge,T,re){if(re.hiLevel!==0&&p)for(var fe,Se=0;Se<ge.length;Se++)T[Se]===1&&(fe=S.indexOf(ge[Se]))>=0&&(ge[Se]=S[fe+1])})(J,U,be),Y(2,J,q,U,be),Y(1,J,q,U,be),J.join("")};return this.__bidiEngine__.doBidiReorder=function(I,q,U){if((function(be,ge){if(ge)for(var T=0;T<be.length;T++)ge[T]=T;u===void 0&&(u=O(be)),m===void 0&&(m=O(be))})(I,q),d||!h||m)if(d&&h&&u^m)P=u?1:0,I=X(I,q,U);else if(!d&&h&&m)P=u?1:0,I=ie(I,q,U),I=X(I,q);else if(!d||u||h||m){if(d&&!h&&u^m)I=X(I,q),u?(P=0,I=ie(I,q,U)):(P=1,I=ie(I,q,U),I=X(I,q));else if(d&&u&&!h&&m)P=1,I=ie(I,q,U),I=X(I,q);else if(!d&&!h&&u^m){var J=p;u?(P=1,I=ie(I,q,U),P=0,p=!1,I=ie(I,q,U),p=J):(P=0,I=ie(I,q,U),I=X(I,q),P=1,p=!1,I=ie(I,q,U),p=J,I=X(I,q))}}else P=0,I=ie(I,q,U);else P=u?1:0,I=ie(I,q,U);return I},this.__bidiEngine__.setOptions=function(I){I&&(d=I.isInputVisual,h=I.isOutputVisual,u=I.isInputRtl,m=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(a){var o=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,s.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(d=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?d.push([s.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):d.push([s.doBidiReorder(o[u])]);a.text=d}else a.text=s.doBidiReorder(o);s.setOptions({isInputVisual:!0})}])})(Dt),Dt.API.TTFFont=(function(){function t(r){var s;if(this.rawData=r,s=this.contents=new Ll(r),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new M8(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new S8(this.contents),this.head=new A8(this),this.name=new E8(this),this.cmap=new pv(this),this.toUnicode={},this.hhea=new C8(this),this.maxp=new D8(this),this.hmtx=new I8(this),this.post=new _8(this),this.os2=new P8(this),this.loca=new R8(this),this.glyf=new F8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,s,a,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,h,m;for(m=[],d=0,u=(h=this.bbox).length;d<u;d++)r=h[d],m.push(Math.round(r*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(a=255&(o=this.post.italic_angle),32768&(s=o>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var s;return((s=this.cmap.unicode)!=null?s.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*s},t.prototype.widthOfString=function(r,s,a){var o,l,d,u;for(d=0,l=0,u=(r=""+r).length;0<=u?l<u:l>u;l=0<=u?++l:--l)o=r.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(o))+a*(1e3/s)||0;return d*(s/1e3)},t.prototype.lineHeight=function(r,s){var a;return s==null&&(s=!1),a=s?this.lineGap:0,(this.ascender+a-this.decender)/1e3*r},t})();var Ni,Ll=(function(){function t(r){this.data=r??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var s,a;for(a=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)a[s]=String.fromCharCode(this.readByte());return a.join("")},t.prototype.writeString=function(r){var s,a,o;for(o=[],s=0,a=r.length;0<=a?s<a:s>a;s=0<=a?++s:--s)o.push(this.writeByte(r.charCodeAt(s)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,s,a,o,l,d,u,h;return r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^s)+1099511627776*(255^a)+4294967296*(255^o)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*r+281474976710656*s+1099511627776*a+4294967296*o+16777216*l+65536*d+256*u+h},t.prototype.writeLongLong=function(r){var s,a;return s=Math.floor(r/4294967296),a=4294967295&r,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var s,a;for(s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push(this.readByte());return s},t.prototype.write=function(r){var s,a,o,l;for(l=[],a=0,o=r.length;a<o;a++)s=r[a],l.push(this.writeByte(s));return l},t})(),S8=(function(){var t;function r(s){var a,o,l;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)a={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[a.tag]=a}return r.prototype.encode=function(s){var a,o,l,d,u,h,m,p,v,N,y,A,C;for(C in y=Object.keys(s).length,h=Math.log(2),v=16*Math.floor(Math.log(y)/h),d=Math.floor(v/h),p=16*y-v,(o=new Ll).writeInt(this.scalarType),o.writeShort(y),o.writeShort(v),o.writeShort(d),o.writeShort(p),l=16*y,m=o.pos+l,u=null,A=[],s)for(N=s[C],o.writeString(C),o.writeInt(t(N)),o.writeInt(m),o.writeInt(N.length),A=A.concat(N),C==="head"&&(u=m),m+=N.length;m%4;)A.push(0),m++;return o.write(A),a=2981146554-t(o.data),o.pos=u+8,o.writeUInt32(a),o.data},t=function(s){var a,o,l,d;for(s=gv.call(s);s.length%4;)s.push(0);for(l=new Ll(s),o=0,a=0,d=s.length;a<d;a=a+=4)o+=l.readUInt32();return 4294967295&o},r})(),k8={}.hasOwnProperty,Xi=function(t,r){for(var s in r)k8.call(r,s)&&(t[s]=r[s]);function a(){this.constructor=t}return a.prototype=r.prototype,t.prototype=new a,t.__super__=r.prototype,t};Ni=(function(){function t(r){var s;this.file=r,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var A8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Ll).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t})(),E1=(function(){function t(r,s){var a,o,l,d,u,h,m,p,v,N,y,A,C,S,L,E,P;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=s+r.readInt(),v=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=r.readByte();break;case 4:for(y=r.readUInt16(),N=y/2,r.pos+=6,l=(function(){var F,O;for(O=[],h=F=0;0<=N?F<N:F>N;h=0<=N?++F:--F)O.push(r.readUInt16());return O})(),r.pos+=2,C=(function(){var F,O;for(O=[],h=F=0;0<=N?F<N:F>N;h=0<=N?++F:--F)O.push(r.readUInt16());return O})(),m=(function(){var F,O;for(O=[],h=F=0;0<=N?F<N:F>N;h=0<=N?++F:--F)O.push(r.readUInt16());return O})(),p=(function(){var F,O;for(O=[],h=F=0;0<=N?F<N:F>N;h=0<=N?++F:--F)O.push(r.readUInt16());return O})(),o=(this.length-r.pos+this.offset)/2,u=(function(){var F,O;for(O=[],h=F=0;0<=o?F<o:F>o;h=0<=o?++F:--F)O.push(r.readUInt16());return O})(),h=L=0,P=l.length;L<P;h=++L)for(S=l[h],a=E=A=C[h];A<=S?E<=S:E>=S;a=A<=S?++E:--E)p[h]===0?d=a+m[h]:(d=u[p[h]/2+(a-A)-(N-h)]||0)!==0&&(d+=m[h]),this.codeMap[a]=65535&d}r.pos=v}return t.encode=function(r,s){var a,o,l,d,u,h,m,p,v,N,y,A,C,S,L,E,P,F,O,se,X,K,Y,ie,I,q,U,J,be,ge,T,re,fe,Se,ee,D,$,W,ne,H,Q,ue,xe,Ee,me,De;switch(J=new Ll,d=Object.keys(r).sort(function(Ze,Te){return Ze-Te}),s){case"macroman":for(C=0,S=(function(){var Ze=[];for(A=0;A<256;++A)Ze.push(0);return Ze})(),E={0:0},l={},be=0,fe=d.length;be<fe;be++)E[xe=r[o=d[be]]]==null&&(E[xe]=++C),l[o]={old:r[o],new:E[r[o]]},S[o]=E[r[o]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(S),{charMap:l,subtable:J.data,maxGlyphID:C+1};case"unicode":for(q=[],v=[],P=0,E={},a={},L=m=null,ge=0,Se=d.length;ge<Se;ge++)E[O=r[o=d[ge]]]==null&&(E[O]=++P),a[o]={old:O,new:E[O]},u=E[O]-o,L!=null&&u===m||(L&&v.push(L),q.push(o),m=u),L=o;for(L&&v.push(L),v.push(65535),q.push(65535),ie=2*(Y=q.length),K=2*Math.pow(Math.log(Y)/Math.LN2,2),N=Math.log(K/2)/Math.LN2,X=2*Y-K,h=[],se=[],y=[],A=T=0,ee=q.length;T<ee;A=++T){if(I=q[A],p=v[A],I===65535){h.push(0),se.push(0);break}if(I-(U=a[I].new)>=32768)for(h.push(0),se.push(2*(y.length+Y-A)),o=re=I;I<=p?re<=p:re>=p;o=I<=p?++re:--re)y.push(a[o].new);else h.push(U-I),se.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*Y+2*y.length),J.writeUInt16(0),J.writeUInt16(ie),J.writeUInt16(K),J.writeUInt16(N),J.writeUInt16(X),Q=0,D=v.length;Q<D;Q++)o=v[Q],J.writeUInt16(o);for(J.writeUInt16(0),ue=0,$=q.length;ue<$;ue++)o=q[ue],J.writeUInt16(o);for(Ee=0,W=h.length;Ee<W;Ee++)u=h[Ee],J.writeUInt16(u);for(me=0,ne=se.length;me<ne;me++)F=se[me],J.writeUInt16(F);for(De=0,H=y.length;De<H;De++)C=y[De],J.writeUInt16(C);return{charMap:a,subtable:J.data,maxGlyphID:P+1}}},t})(),pv=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,a,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)s=new E1(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var a,o;return s==null&&(s="macroman"),a=E1.encode(r,s),(o=new Ll).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},t})(),C8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),P8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var s,a;for(a=[],s=0;s<10;++s)a.push(r.readByte());return a})(),this.charRange=(function(){var s,a;for(a=[],s=0;s<4;++s)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var s,a;for(a=[],s=0;s<2;s=++s)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),_8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="post",t.prototype.parse=function(r){var s,a,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)s=r.readByte(),o.push(this.names.push(r.readString(s)));return o;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 262144:return this.map=(function(){var d,u,h;for(h=[],l=d=0,u=this.file.maxp.numGlyphs;0<=u?d<u:d>u;l=0<=u?++d:--d)h.push(r.readUInt32());return h}).call(this)}},t})(),L8=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},E8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="name",t.prototype.parse=function(r){var s,a,o,l,d,u,h,m,p,v,N;for(r.pos=this.offset,r.readShort(),s=r.readShort(),u=r.readShort(),a=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(h={},l=p=0,v=a.length;p<v;l=++p)o=a[l],r.pos=o.offset,m=r.readString(o.length),d=new L8(m,o),h[N=o.nameID]==null&&(h[N]=[]),h[o.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t})(),D8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),I8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,a,o,l,d,u,h;for(r.pos=this.offset,this.metrics=[],s=0,u=this.file.hhea.numberOfMetrics;0<=u?s<u:s>u;s=0<=u?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,p;for(p=[],s=m=0;0<=o?m<o:m>o;s=0<=o?++m:--m)p.push(r.readInt16());return p})(),this.widths=(function(){var m,p,v,N;for(N=[],m=0,p=(v=this.metrics).length;m<p;m++)l=v[m],N.push(l.advance);return N}).call(this),a=this.widths[this.widths.length-1],h=[],s=d=0;0<=o?d<o:d>o;s=0<=o?++d:--d)h.push(this.widths.push(a));return h},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),gv=[].slice,F8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,a,o,l,d,u,h,m,p,v;return r in this.cache?this.cache[r]:(l=this.file.loca,s=this.file.contents,a=l.indexOf(r),(o=l.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+a,d=(u=new Ll(s.read(o))).readShort(),m=u.readShort(),v=u.readShort(),h=u.readShort(),p=u.readShort(),this.cache[r]=d===-1?new O8(u,m,v,h,p):new T8(u,d,m,v,h,p),this.cache[r]))},t.prototype.encode=function(r,s,a){var o,l,d,u,h;for(d=[],l=[],u=0,h=s.length;u<h;u++)o=r[s[u]],l.push(d.length),o&&(d=d.concat(o.encode(a)));return l.push(d.length),{table:d,offsets:l}},t})(),T8=(function(){function t(r,s,a,o,l,d){this.raw=r,this.numberOfContours=s,this.xMin=a,this.yMin=o,this.xMax=l,this.yMax=d,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),O8=(function(){function t(r,s,a,o,l){var d,u;for(this.raw=r,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return t.prototype.encode=function(){var r,s,a;for(s=new Ll(gv.call(this.raw.data)),r=0,a=this.glyphIDs.length;r<a;++r)s.pos=this.glyphOffsets[r];return s.data},t})(),R8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xi(t,Ni),t.prototype.tag="loca",t.prototype.parse=function(r){var s,a;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(r.readUInt32());return l}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,d=0;d<a.length;++d)if(a[d]=o,l<s.length&&s[l]==d){++l,a[d]=o;var u=this.offsets[d],h=this.offsets[d+1]-u;h>0&&(o+=h)}for(var m=new Array(4*a.length),p=0;p<a.length;++p)m[4*p+3]=255&a[p],m[4*p+2]=(65280&a[p])>>8,m[4*p+1]=(16711680&a[p])>>16,m[4*p]=(4278190080&a[p])>>24;return m},t})(),M8=(function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,s,a,o,l;for(s in o=this.font.cmap.tables[0].codeMap,r={},l=this.subset)a=l[s],r[s]=o[a];return r},t.prototype.glyphsFor=function(r){var s,a,o,l,d,u,h;for(o={},d=0,u=r.length;d<u;d++)o[l=r[d]]=this.font.glyf.glyphFor(l);for(l in s=[],o)(a=o[l])!=null&&a.compound&&s.push.apply(s,a.glyphIDs);if(s.length>0)for(l in h=this.glyphsFor(s))a=h[l],o[l]=a;return o},t.prototype.encode=function(r,s){var a,o,l,d,u,h,m,p,v,N,y,A,C,S,L;for(o in a=pv.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(r),y={0:0},L=a.charMap)y[(h=L[o]).old]=h.new;for(A in N=a.maxGlyphID,d)A in y||(y[A]=N++);return p=(function(E){var P,F;for(P in F={},E)F[E[P]]=P;return F})(y),v=Object.keys(p).sort(function(E,P){return E-P}),C=(function(){var E,P,F;for(F=[],E=0,P=v.length;E<P;E++)u=v[E],F.push(p[u]);return F})(),l=this.font.glyf.encode(d,C,y),m=this.font.loca.encode(l.offsets,C),S={cmap:this.font.cmap.raw(),glyf:l.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t})();Dt.API.PDFObject=(function(){var t;function r(){}return t=function(s,a){return(Array(a+1).join("0")+s).slice(-a)},r.convert=function(s){var a,o,l,d;if(Array.isArray(s))return"["+(function(){var u,h,m;for(m=[],u=0,h=s.length;u<h;u++)a=s[u],m.push(r.convert(a));return m})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+t(s.getUTCFullYear(),4)+t(s.getUTCMonth(),2)+t(s.getUTCDate(),2)+t(s.getUTCHours(),2)+t(s.getUTCMinutes(),2)+t(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(o in l=["<<"],s)d=s[o],l.push("/"+o+" "+r.convert(d));return l.push(">>"),l.join(`
`)}return""+s},r})();const B8={data:null,isLoading:!1,error:null,dashboardData:null,dashboardLoading:!1,dashboardError:null},Du=Mr("cityTax/fetchData",async(t,{rejectWithValue:r})=>{try{const{touristTaxAPI:s}=await oa(async()=>{const{touristTaxAPI:o}=await import("./touristTax.api-u1HR813x.js");return{touristTaxAPI:o}},[]);return await s.getTouristTax(t)}catch(s){return console.error("Redux: Error fetching city tax:",s),r(s.response?.data?.message||s.message||"Failed to fetch city tax data")}}),xv=Mo({name:"touristTax",initialState:B8,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Du.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Du.fulfilled,(r,s)=>{console.log("City Tax API Response:",s.payload),r.isLoading=!1,r.data=s.payload.totalTax,console.log("Redux State Updated:",r.data)}).addCase(Du.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:XA}=xv.actions,U8=xv.reducer,q8=()=>{const[t,r]=R.useState(392776),[s,a]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[o,l]=R.useState("checkin"),d=Hs(),u=Bt(P=>P.touristTax),{data:h,isLoading:m,error:p}=u,{properties:v,isLoading:N}=Bt(P=>P.properties),y=h?{propertyId:h.propertyId||t||392776,startDate:h.startDate||s.startDate,endDate:h.endDate||s.endDate,cityTaxCalculated:h.cityTaxCalculated||0,cityTaxCalculatedFormatted:h.cityTaxCalculatedFormatted||"0,00",cityTaxNights:h.cityTaxNights||0,childrenNights:h.childrenNights||0,nightsBeyond:h.nightsBeyond||0,totalNights:h.totalNights||0,hostkitTotalNights:h.hostkitTotalNights||0,cityTaxInvoiced:h.cityTaxInvoiced||0,cityTaxInvoicedFormatted:h.cityTaxInvoicedFormatted||"0,00",cityTaxInvoicedNights:h.cityTaxInvoicedNights||0,totalTax:h.totalTax||0,totalTaxFormatted:h.totalTaxFormatted||"0,00",totalBookings:h.totalBookings||0,totalGuests:h.totalGuests||0,adultNights:h.adultNights||0,exemptNights:h.exemptNights||0,taxableNights:h.taxableNights||0,averageTaxPerNight:h.averageTaxPerNight||0,averageTaxPerNightFormatted:h.averageTaxPerNightFormatted||"0,00",averageTaxPerGuest:h.averageTaxPerGuest||0,averageTaxPerGuestFormatted:h.averageTaxPerGuestFormatted||"0,00",bookingsPlatforms:h.bookingsPlatforms||{},taxStatus:h.taxStatus||"not_implemented",dataSource:h.dataSource||"api",futureReady:h.futureReady||!0,currency:"EUR"}:{propertyId:t||392776,startDate:s.startDate,endDate:s.endDate,totalTax:0,totalTaxFormatted:"0,00",totalBookings:0,totalGuests:0,totalNights:0,adultNights:0,childrenNights:0,exemptNights:0,taxableNights:0,averageTaxPerNight:0,averageTaxPerNightFormatted:"0,00",averageTaxPerGuest:0,averageTaxPerGuestFormatted:"0,00",bookingsPlatforms:{},taxStatus:"not_implemented",dataSource:"fallback",futureReady:!0,currency:"EUR"};R.useEffect(()=>{v.length===0&&!N&&d(Ki())},[d,v.length,N]),R.useEffect(()=>{t&&d(Du({propertyId:t,startDate:s.startDate,endDate:s.endDate,filterType:o}))},[d,t,s,o]);const A=(P,F)=>{a(O=>({...O,[P]:F}))},C=()=>{t&&d(Du({propertyId:t,startDate:s.startDate,endDate:s.endDate,filterType:o}))},S=()=>{if(console.log("Export PDF button clicked"),console.log("Data available:",!!h),console.log("Selected property ID:",t),console.log("Display data:",y),!h||!t){alert("No data available to export");return}try{console.log("Creating PDF document...");const P=new Dt,F=P.internal.pageSize.getWidth(),O=P.internal.pageSize.getHeight(),se=v?.find(I=>I.id===t)?.name||`Property ID: ${t}`;P.setFontSize(20),P.setFont("helvetica","bold"),P.text("Tourist Tax Report",F/2,20,{align:"center"}),P.setFontSize(12),P.setFont("helvetica","normal"),P.text(`Property: ${se}`,20,35),P.text(`Date Range: ${new Date(s.startDate).toLocaleDateString()} - ${new Date(s.endDate).toLocaleDateString()}`,20,45),P.text(`Generated: ${new Date().toLocaleString()}`,20,55);let X=70;P.setFontSize(14),P.setFont("helvetica","bold"),P.text("Summary",20,X),X+=10,P.setFontSize(10),P.setFont("helvetica","normal"),[["Tax Status",E(y.taxStatus)],["Current Tax Collected",h?.totalTaxFormatted||"0,00"],["Estimated Tax Potential",h?.totalTaxFormatted||"0,00"],["Total Bookings",y.totalBookings.toString()],["Total Guests",y.totalGuests.toString()],["Total Nights",y.totalNights.toString()],["Adult Nights",y.adultNights.toString()],["Children Nights",y.childrenNights.toString()],["Taxable Nights",y.taxableNights.toString()],["Exempt Nights",y.exemptNights.toString()],["Average Tax per Night",y.averageTaxPerNightFormatted],["Average Tax per Guest",y.averageTaxPerGuestFormatted],["Tax Rate per Adult Night",h?.averageTaxPerGuestFormatted||"0,00"]].forEach(([I,q])=>{P.text(`${I}:`,25,X),P.text(`${q}`,100,X),X+=6}),X+=10,Object.keys(y.bookingsPlatforms).length>0&&(P.setFontSize(14),P.setFont("helvetica","bold"),P.text("Bookings by Platform",20,X),X+=10,P.setFontSize(10),P.setFont("helvetica","normal"),Object.entries(y.bookingsPlatforms).forEach(([I,q])=>{const U=typeof q=="number"?q:q?.bookings||0,J=(U/y.totalBookings*100).toFixed(1);P.text(`${I}: ${U} bookings (${J}%)`,25,X),X+=6}),X+=10);const Y=P.getNumberOfPages();for(let I=1;I<=Y;I++)P.setPage(I),P.setFontSize(8),P.setFont("helvetica","italic"),P.text("Generated by OwnerPortal Tourist Tax System",F/2,O-10,{align:"center"});const ie=`TouristTax_${se.replace(/[^a-zA-Z0-9]/g,"_")}_${s.startDate}_to_${s.endDate}.pdf`;console.log("Saving PDF with filename:",ie),P.save(ie),console.log("PDF export completed successfully")}catch(P){console.error("Error exporting PDF:",P),alert("Error generating PDF: "+(P instanceof Error?P.message:String(P)))}},L=P=>{switch(P){case"active":return"text-blue-800 bg-blue-100";case"not_implemented":return"text-yellow-800 bg-yellow-100";case"exempt":return"text-gray-800 bg-gray-100";default:return"text-gray-800 bg-gray-100"}},E=P=>{switch(P){case"active":return"Active Collection";case"not_implemented":return"Not Implemented";case"exempt":return"Tax Exempt";default:return"Unknown"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tourist Tax"}),t&&v&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Property: ",v.find(P=>P.id===t)?.name||`ID: ${t}`]}),e.jsx("p",{className:"text-gray-500",children:"Monitor and manage tourist tax collection and reporting"}),h&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Data source: ",typeof h.dataSource=="string"?h.dataSource:"api","  Last updated: ",new Date().toLocaleTimeString(),e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-400",children:"Note: Shows all bookings overlapping with selected date range. The API may return data for a broader period, but we filter to show only relevant bookings."})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:!h||m,children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Export PDF Report"]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] text-white rounded-lg hover:from-[#1d4ed8] hover:to-[#1e40af] focus:ring-2 focus:ring-[#2563eb] focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-semibold",disabled:m,children:[m?e.jsx(ps,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),N?e.jsx("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-200 rounded-2xl text-gray-500",children:"Loading properties..."}):e.jsxs(e.Fragment,{children:[console.log("Properties for selector:",v),e.jsx($a,{properties:v,selectedId:t,onChange:r,placeholder:"Select Property"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s.startDate,onChange:P=>A("startDate",P.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:s.endDate,onChange:P=>A("endDate",P.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Type"}),e.jsxs("select",{value:o,onChange:P=>l(P.target.value),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"checkout",children:"Check-out"}),e.jsx("option",{value:"checkin",children:"Check-in"})]})]})]})}),t?e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center",children:[e.jsx(ps,{className:"h-12 w-12 mx-auto text-gray-400 mb-4 animate-spin"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading City Tax Data"}),e.jsx("p",{className:"text-gray-500",children:"Fetching city tax information..."})]}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tax Status"}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${L(y.taxStatus)}`,children:E(y.taxStatus)})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(ku,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Current Tax Collected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"0,00"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl",children:e.jsx(Yi,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalBookings})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl",children:e.jsx(gs,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Guests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalGuests})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:e.jsx(ra,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Estimated Tax Potential"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalTaxFormatted||"0,00"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl",children:e.jsx(gi,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Report Data"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Yi,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxCalculatedFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Calculated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Current tax amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl w-fit mx-auto mb-3",children:e.jsx(gs,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.cityTaxNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"City Tax Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Zx,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Often exempt"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-3",children:e.jsx(Uu,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.hostkitTotalNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Nights"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Guest nights (Hostkit format)"})]})]}),(y.nightsBeyond||0)>0&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:e.jsx(gs,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Long-stay Exemptions"}),e.jsxs("p",{className:"text-xs text-yellow-600",children:[y.nightsBeyond," nights beyond 30-day threshold (typically exempt)"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Ro,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.adultNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Adult Nights"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Taxable: ",y.taxableNights]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Zx,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.childrenNights}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Children Nights"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Exempt: ",y.exemptNights]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2563eb] to-[#1d4ed8] rounded-xl w-fit mx-auto mb-4",children:e.jsx(Uu,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerNightFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Night"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Taxable nights only"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 text-center hover:shadow-2xl transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl w-fit mx-auto mb-4",children:e.jsx(gi,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.averageTaxPerGuestFormatted}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Guest"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All guests included"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bookings by Platform"}),e.jsx("div",{className:"space-y-4",children:Object.entries(y.bookingsPlatforms).map(([P,F])=>{const O=typeof F=="number"?F:F?.bookings||0,se=(O/y.totalBookings*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-sm mr-3"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:P})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:O}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",se,"%)"]})]})]},P)})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"City Tax Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Current Tax Collected"}),e.jsx("span",{className:"font-semibold text-gray-900",children:h?.totalTaxFormatted||"0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Tax Potential"}),e.jsx("span",{className:"font-semibold text-green-600",children:h?.totalTaxFormatted||"0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Tax Rate per Adult Night"}),e.jsx("span",{className:"font-semibold text-blue-600",children:h?.averageTaxPerGuestFormatted||"0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Total Taxable Nights"}),e.jsx("span",{className:"font-semibold text-purple-600",children:h?.adultNights||0})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Implementation Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h?.taxStatus==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:h?.taxStatus==="active"?"Active":"Not Implemented"})]})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"City Tax Summary"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"City Tax data focuses on aggregated metrics rather than individual booking details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Total City Tax Nights"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.cityTaxNights})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Children Nights"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.childrenNights})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-purple-900",children:"Hostkit Total Nights"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y.hostkitTotalNights})]})]})]}),y.taxStatus!=="active"?e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl shadow-xl border border-blue-200 p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(gi,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Future-Ready City Tax"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"While city tax is not currently active for this property, all booking data is being tracked and analyzed. When tax collection is implemented, historical data will be available for reporting and compliance."}),e.jsxs("div",{className:"mt-3 text-sm text-blue-600",children:[e.jsxs("p",{children:[" Booking data collected: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalBookings," bookings"]})]}),e.jsxs("p",{children:[" Guest tracking: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalGuests," guests"]})]}),e.jsxs("p",{children:[" Night analysis: ",e.jsxs("strong",{className:"text-gray-900",children:[y.totalNights," nights"]})]})]})]})]})}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(ku,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No City Tax Data Available"}),e.jsx("p",{className:"text-gray-500",children:"No tax data found for the selected property and date range."})]})]}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(ps,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-gray-500",children:"No city tax data found for the selected property and date range."})]})}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-12 text-center mb-8",children:[e.jsx(ku,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Property"}),e.jsx("p",{className:"text-gray-500",children:"Choose a property from the dropdown above to view city tax analytics."})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl shadow-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:e.jsx(ps,{className:"h-5 w-5 text-red-600"})}),e.jsx("p",{className:"text-red-800 font-medium",children:p})]})})]})})},z8={statuses:{},isLoading:!1,error:null},pc=Mr("siba/fetchStatus",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await oa(async()=>{const{sibaAPI:o}=await import("./siba.api-BG7yXkZt.js");return{sibaAPI:o}},[]),a=await s.getSibaStatus(t);return console.log("SIBA API Response:",{propertyId:t,result:a}),a}catch(s){return console.error("SIBA API Error:",s),r(s.response?.data?.message||"Failed to fetch SIBA status")}}),Mp=Mr("siba/submit",async({propertyId:t,reservationId:r,data:s},{rejectWithValue:a})=>{try{const{sibaAPI:o}=await oa(async()=>{const{sibaAPI:l}=await import("./siba.api-BG7yXkZt.js");return{sibaAPI:l}},[]);return await o.submitSiba(t,r,s)}catch(o){return a(o.response?.data?.message||"Failed to submit SIBA")}}),Bp=Mr("siba/validate",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await oa(async()=>{const{sibaAPI:a}=await import("./siba.api-BG7yXkZt.js");return{sibaAPI:a}},[]);return await s.validateSiba(t)}catch(s){return r(s.response?.data?.message||"Failed to validate SIBA")}});Mr("siba/getHistory",async(t,{rejectWithValue:r})=>{try{const{sibaAPI:s}=await oa(async()=>{const{sibaAPI:a}=await import("./siba.api-BG7yXkZt.js");return{sibaAPI:a}},[]);return await s.getSibaHistory(t)}catch(s){return r(s.response?.data?.message||"Failed to get SIBA history")}});const yv=Mo({name:"siba",initialState:z8,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(pc.pending,r=>{r.isLoading=!0,r.error=null}).addCase(pc.fulfilled,(r,s)=>{r.isLoading=!1,s.payload&&s.payload.propertyId?r.statuses[s.payload.propertyId]=s.payload:console.error("Invalid SIBA response payload:",s.payload)}).addCase(pc.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(Mp.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Mp.fulfilled,r=>{r.isLoading=!1}).addCase(Mp.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload}).addCase(Bp.pending,r=>{r.isLoading=!0,r.error=null}).addCase(Bp.fulfilled,r=>{r.isLoading=!1}).addCase(Bp.rejected,(r,s)=>{r.isLoading=!1,r.error=s.payload})}}),{clearError:ZA}=yv.actions,$8=yv.reducer,V8=()=>{const[t,r]=R.useState(null),[s,a]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),o=Hs(),{properties:l}=Bt(O=>O.properties),{bookings:d,isLoading:u}=Bt(O=>O.bookings),{statuses:h,isLoading:m}=Bt(O=>O.siba);R.useEffect(()=>{l.length>0&&!t&&(console.log(" SIBA: Auto-selecting first property:",l[0]),r(l[0].id))},[l,t]),R.useEffect(()=>{t&&(o(pc(t)),o(xi({propertyId:t,startDate:s.startDate,endDate:s.endDate})))},[o,t,s]);const p=h[t||0],v=d?.length||0,N=d?.reduce((O,se)=>O+se.adults+se.children,0)||0,y=N,A=0,C=N>0?Math.round(y/N*100):0,S=O=>O?new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",L=O=>{switch(O){case"green":return"border-green-200 bg-green-50";case"amber":return"border-yellow-200 bg-yellow-50";case"red":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},E=O=>{switch(O){case"green":return"Compliant";case"amber":return"Warning";case"red":return"Overdue";default:return"Unknown"}},P=O=>{switch(O){case"green":return e.jsx($s,{className:"h-8 w-8 text-green-600"});case"amber":return e.jsx(Nd,{className:"h-8 w-8 text-yellow-600"});case"red":return e.jsx(ia,{className:"h-8 w-8 text-red-600"});default:return e.jsx(qs,{className:"h-8 w-8 text-gray-400"})}},F=m||u;return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm lg:text-base font-bold text-gray-900 mb-1",children:"SIBA Manager Dashboard"}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Real-time compliance monitoring and guest reporting"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx($a,{selectedId:t,onChange:r,properties:l}),e.jsxs("button",{onClick:()=>{t&&(o(pc(t)),o(xi({propertyId:t,startDate:s.startDate,endDate:s.endDate})))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),F?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading SIBA Data..."})]})}):p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border-2 p-8 mb-8 hover:shadow-3xl transition-all duration-300 ${L(p.status)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:P(p.status)}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-2",children:["SIBA Status: ",E(p.status)]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.message}),p.lastSibaSendDate&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Last submission: ",e.jsx("span",{className:`font-semibold ${p.status==="green"?"text-green-600":p.status==="amber"?"text-yellow-600":"text-red-600"}`,children:S(p.lastSibaSendDate)})]}),p.nextDueDate&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Next due: ",e.jsx("span",{className:`font-semibold ${(p.daysUntilDue||0)>7?"text-green-600":(p.daysUntilDue||0)>0?"text-yellow-600":"text-red-600"}`,children:S(p.nextDueDate)})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-2",children:[C,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compliance Rate"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Data source: ",p.dataSource,"  Last updated: ",new Date().toLocaleTimeString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-blue-500 to-blue-600 rounded-md w-fit mx-auto mb-1",children:e.jsx(ra,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:y}),e.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Submitted Guests"}),e.jsx("p",{className:"text-[9px] text-gray-500",children:"Real booking data"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-md w-fit mx-auto mb-1",children:e.jsx(Al,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:A}),e.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Pending Guests"}),e.jsx("p",{className:"text-[9px] text-gray-500",children:"Awaiting submission"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-green-500 to-green-600 rounded-md w-fit mx-auto mb-1",children:e.jsx(gs,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:v}),e.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Total Bookings"}),e.jsx("p",{className:"text-[9px] text-gray-500",children:"Current period"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-purple-500 to-purple-600 rounded-md w-fit mx-auto mb-1",children:e.jsx(G2,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:N}),e.jsx("p",{className:"text-[10px] text-gray-600 mb-0.5",children:"Total Guests"}),e.jsx("p",{className:"text-[9px] text-gray-500",children:"All visitors"})]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ia,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SIBA Data Available"}),e.jsx("p",{className:"text-gray-500",children:"Unable to fetch SIBA status for the selected property."})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qs,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Please select a property to view SIBA compliance status."})]})})})})},H8=()=>{const t=Hs(),{bulkDashboard:r}=Bt(P=>P.sibaManager),{properties:s}=Bt(P=>P.propertyManagement),{bookings:a}=Bt(P=>P.bookings),{statuses:o}=Bt(P=>P.siba),{isAuthenticated:l}=Bt(P=>P.auth),[d,u]=R.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[h,m]=R.useState(null),[p,v]=R.useState(!1);nm(),R.useEffect(()=>{l&&A()},[l]),R.useEffect(()=>{l&&t(za())},[t,l]),R.useEffect(()=>{s&&s.length>0&&s.forEach(P=>{t(pc(P.id))})},[t,s]),R.useEffect(()=>{t(xi({propertyId:void 0,startDate:d.startDate,endDate:d.endDate}))},[t,d]);const y=!s||s.length===0?[]:s.map(P=>{const F=o[P.id],O=a.filter(J=>J.propertyId===P.id),se=O.length;O.reduce((J,be)=>J+(be.adults||0)+(be.children||0),0);const X=new Date,K=new Date(X.getTime()-720*60*60*1e3),Y=O.filter(J=>{const be=new Date(J.checkOut||J.departureDate||new Date);return be>=K&&be<=X}),ie=Y.length,I=Y.filter(J=>{const be=new Date(J.checkOut||J.departureDate||new Date);return Math.floor((X.getTime()-be.getTime())/(1e3*60*60*24))>7}).length,q=ie>0?Math.round((ie-I)/ie*100):100,U=[];return I>0?U.push("overdue"):ie>0?U.push("pending"):F?.status==="green"?U.push("compliant"):F?.status==="amber"?U.push("due_soon"):F?.status==="red"&&U.push("overdue"),q<80&&U.push("low_compliance"),{propertyId:P.id,propertyName:P.name||`Property ${P.id}`,sibaStatus:F?.status||"red",lastSubmission:F?.lastSibaSendDate||null,nextDue:F?.nextDueDate||null,daysUntilDue:F?.daysUntilDue||null,totalReservations:se,pendingSubmissions:ie,overdueSubmissions:I,complianceRate:q,flags:U}}),A=async()=>{if(!p){v(!0),m({type:"info",message:"Refreshing all SIBA data..."});try{const F=(await t(za())).payload?.properties||s;if(F&&F.length>0){const O=F.map(se=>t(pc(se.id)));await Promise.all(O)}await t(xi({startDate:d.startDate,endDate:d.endDate})),m({type:"success",message:"Data refreshed successfully!"}),setTimeout(()=>m(null),3e3)}catch(P){console.error("Refresh error:",P),m({type:"error",message:"Failed to refresh data. Please try again."}),setTimeout(()=>m(null),3e3)}finally{v(!1)}}},C=P=>{switch(P){case"green":return e.jsx($s,{className:"h-5 w-5 text-green-600"});case"amber":return e.jsx(Nd,{className:"h-5 w-5 text-yellow-600"});case"red":return e.jsx(ia,{className:"h-5 w-5 text-red-600"});default:return e.jsx(qs,{className:"h-5 w-5 text-gray-400"})}},S=P=>{switch(P){case"overdue":return"bg-red-100 text-red-800";case"due_soon":return"bg-yellow-100 text-yellow-800";case"compliant":return"bg-green-100 text-green-800";case"pending":return"bg-blue-100 text-blue-800";case"low_compliance":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},L=y,E={totalProperties:y.length,overdue:y.filter(P=>P.flags.includes("overdue")).length,dueSoon:y.filter(P=>P.flags.includes("due_soon")).length,compliant:y.filter(P=>P.flags.includes("compliant")).length,errors:y.filter(P=>P.flags.includes("error")).length};return r.isLoading?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading SIBA Dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30 p-6 pt-48",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[h&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-md ${h.type==="success"?"bg-green-100 border border-green-300 text-green-800":h.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-100 border border-blue-300 text-blue-800"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[h.type==="success"&&e.jsx($s,{className:"h-5 w-5"}),h.type==="error"&&e.jsx(ia,{className:"h-5 w-5"}),h.type==="info"&&e.jsx(Nd,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:h.message})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64 mb-8",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm lg:text-base font-bold text-gray-900 mb-1",children:"SIBA Manager Dashboard"}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Real-time SIBA compliance monitoring with data"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Data source: API  Last updated: ",new Date().toLocaleTimeString()]}),y.length>0&&e.jsx("span",{className:"text-xs text-green-600",children:" Real booking data"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:A,disabled:p,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${p?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx(ps,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{children:p?"Refreshing...":"Refresh"})]})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-[#0ea5e9] to-[#0284c7] rounded-md w-fit mx-auto mb-1",children:e.jsx(qs,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:E.totalProperties}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Total Properties"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-red-200 p-2 text-center",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-[#f97316] to-[#ea580c] rounded-md w-fit mx-auto mb-1",children:e.jsx(ia,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:E.overdue}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Overdue"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-yellow-200 p-2 text-center",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-[#f59e0b] to-[#d97706] rounded-md w-fit mx-auto mb-1",children:e.jsx(Al,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:E.dueSoon}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Due Soon"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-green-200 p-2 text-center",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-[#10b981] to-[#059669] rounded-md w-fit mx-auto mb-1",children:e.jsx($s,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:E.compliant}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Compliant"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-md shadow-sm border border-gray-200 p-2 text-center",children:[e.jsx("div",{className:"p-0.5 bg-gradient-to-br from-[#ef4444] to-[#dc2626] rounded-md w-fit mx-auto mb-1",children:e.jsx(Nd,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-0.5",children:E.errors}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Errors"})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Property"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Flags"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:L&&L.length>0?L.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:P.propertyName}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",P.propertyId]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[C(P.sibaStatus),e.jsx("span",{className:"text-sm font-semibold capitalize",children:P.sibaStatus})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:P.flags.map((F,O)=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S(F)}`,children:F.replace("_"," ")},O))})})]},P.propertyId)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-8 py-12 text-center text-gray-500",children:"No properties data available. Click refresh to load data."})})})]})})})]})})},w0=async(t,r)=>{console.log(" uploadPropertyImages called with:",{propertyId:t,imagesCount:r.length,images:r.map(o=>({name:o.name,size:o.size,type:o.type}))});const s=new FormData;return r.forEach((o,l)=>{console.log(` Appending image ${l}:`,{name:o.name,size:o.size,type:o.type}),s.append("images",o)}),console.log(" FormData entries:",Array.from(s.entries())),await Ft.post(`/image-upload/${t}`,s,{headers:{"Content-Type":void 0}})},bv=async(t,r)=>(console.log(" deletePropertyImage called with:",{propertyId:t,imageUrl:r}),await Ft.delete(`/image-upload/${t}/${r}`)),vv=Object.freeze(Object.defineProperty({__proto__:null,deletePropertyImage:bv,uploadPropertyImages:w0},Symbol.toStringTag,{value:"Module"})),wv=({filteredProperties:t,onPropertyUpdate:r,owners:s=[]})=>{const a=Hs(),{user:o}=Bt(Q=>Q.auth),{properties:l,selectedProperty:d,isLoading:u,isCreating:h,isUpdating:m,isDeleting:p,isTesting:v,error:N,hostkitTestResult:y}=Bt(Q=>Q.propertyManagement),A=t||l,C=N3(o?.role||null),[S,L]=R.useState(!1),[E,P]=R.useState(!1),[F,O]=R.useState(!1),[se,X]=R.useState({}),[K,Y]=R.useState(null),[ie,I]=R.useState([]),[q,U]=R.useState(!1),[J,be]=R.useState({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[],owner:""});R.useEffect(()=>{a(za())},[a]),R.useEffect(()=>{const Q=ue=>{const xe=ue.detail.property;xe&&$(xe)};return window.addEventListener("editProperty",Q),()=>{window.removeEventListener("editProperty",Q)}},[]);const ge=Q=>{const{name:ue,value:xe}=Q.target;be(Ee=>({...Ee,[ue]:ue==="id"||ue==="bedrooms"||ue==="bathrooms"||ue==="maxGuests"?parseInt(xe)||0:xe}))},T=async()=>{J.hostkitId&&J.hostkitApiKey&&await a(lf({hostkitId:J.hostkitId,apiKey:J.hostkitApiKey}))},re=Q=>{const ue=Array.from(Q.target.files||[]);console.log(" Files selected:",ue.length,ue.map(xe=>xe.name)),I(xe=>[...xe,...ue])},fe=Q=>{I(ue=>ue.filter((xe,Ee)=>Ee!==Q))},Se=async()=>{if(console.log(" handleImageUpload called with:",{localSelectedProperty:K,selectedImages:ie,selectedImagesLength:ie.length,selectedImagesDetails:ie.map(Q=>({name:Q.name,size:Q.size,type:Q.type}))}),!K||ie.length===0){console.log(" No property selected or no images selected");return}console.log(" Starting image upload:",{propertyId:K.id,selectedImages:ie.length,imageNames:ie.map(Q=>Q.name)}),U(!0);try{const Q=await w0(K.id.toString(),ie);if(console.log(" Images uploaded successfully:",Q),console.log(" Response property images:",Q.property?.images),console.log(" Current localSelectedProperty images:",K.images),Q.property&&Q.property.images){const xe={...K,images:Q.property.images};console.log(" Setting localSelectedProperty to:",xe.images),Y(xe)}a(za()),r?(console.log(" Calling onPropertyUpdate callback to refresh parent properties"),r()):console.log(" No onPropertyUpdate callback provided"),I([]);const ue=document.getElementById("image-upload");ue&&(ue.value="")}catch(Q){console.error(" Error uploading images:",Q),console.error(" Error details:",Q.response?.data||Q.message)}finally{U(!1)}},ee=async Q=>{if(K)try{const ue=Q.split("/").pop();console.log(" Deleting image:",{imageUrl:Q,filename:ue});const xe=await bv(K.id.toString(),ue||Q);console.log(" Image deleted successfully:",xe);const Ee=K.images.filter(me=>me!==Q);Y({...K,images:Ee}),a(za()),r&&r()}catch(ue){console.error(" Error deleting image:",ue)}},D=async Q=>{if(Q.preventDefault(),console.log(" Form submission debug:",{showEditForm:E,selectedProperty:d?d.id:null,selectedPropertyId:d?._id,localSelectedProperty:K?K.id:null,localSelectedPropertyId:K?._id,formData:Object.keys(J)}),E&&K){const ue={...J};console.log(" Original formData:",J),(!ue.images||ue.images.length===0)&&(delete ue.images,console.log(" Excluding empty images field from update to preserve existing images")),console.log(" Final updateData:",ue),console.log(" Calling updatePropertyAsync with:",{propertyId:K._id,propertyData:ue});const xe=await a(jd({propertyId:K._id,propertyData:ue}));console.log(" Update result:",xe),jd.fulfilled.match(xe)?(console.log(" Property update successful"),P(!1),ne(),a(za()),r&&r()):jd.rejected.match(xe)&&(console.error(" Property update failed:",xe.payload),console.error(" Update error details:",xe.error),console.error(" Full result object:",xe),alert(`Property update failed: ${xe.payload||xe.error||"Unknown error"}`))}else{console.log(" Calling createPropertyAsync instead of update - this is the problem!"),console.log("showEditForm:",E),console.log("selectedProperty:",d),console.log("localSelectedProperty:",K);try{const ue=await a(_u(J));if(_u.fulfilled.match(ue)){if(ie.length>0)try{U(!0),await w0(J.id.toString(),ie),console.log(" Images uploaded successfully for new property:",J.id),I([])}catch(xe){console.error(" Error uploading images:",xe)}finally{U(!1)}L(!1),ne(),await a(za()),r&&r()}}catch(ue){console.error("Error creating property:",ue)}}},$=Q=>{console.log(" handleEdit called with property:",{id:Q.id,_id:Q._id,name:Q.name,hostkitApiKey:Q.hostkitApiKey?"Present":"Missing",hostkitApiKeyLength:Q.hostkitApiKey?Q.hostkitApiKey.length:0,allPropertyKeys:Object.keys(Q)}),Y(Q),qh(Q);const ue={id:Q.id,name:Q.name,address:Q.address,type:Q.type,bedrooms:Q.bedrooms,bathrooms:Q.bathrooms,maxGuests:Q.maxGuests,hostkitId:Q.hostkitId,hostkitApiKey:Q.hostkitApiKey||"",status:Q.status,images:Q.images||[],amenities:Q.amenities||[],owner:Q.isAdminOwned?"admin":Q.owner?._id||""};console.log(" Setting form data with hostkitApiKey:",ue.hostkitApiKey?"Present":"Empty"),console.log(" hostkitApiKey value:",ue.hostkitApiKey),be(ue),P(!0),console.log(" showEditForm set to true, localSelectedProperty set")},W=async()=>{d&&(await a(of(d._id)),N||(O(!1),qh(null),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:d.id||d._id,propertyName:d.name}})),r&&r()))},ne=()=>{be({id:0,name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",images:[],amenities:[]}),Y(null),I([]),a(E6())},H=({property:Q})=>{const ue=K&&K.id===Q.id?K:Q,xe=ue.images&&ue.images.length>0?df(ue.images[0]):"No images";return console.log(" PropertyCard rendering:",{propertyName:ue.name,propertyId:ue.id,images:ue.images,imageUrl:xe,usingLocalState:K&&K.id===Q.id,fullProperty:ue}),e.jsxs("div",{className:"group bg-white/95 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:[e.jsxs("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:[ue.images&&ue.images.length>0?e.jsx("img",{src:df(ue.images[0]),alt:ue.name,className:"w-full h-full object-cover",onError:Ee=>{console.error(" Image failed to load:",Ee.currentTarget.src)},onLoad:Ee=>{console.log(" Image loaded successfully:",Ee.currentTarget.src)}}):e.jsxs("div",{className:"text-center",children:[e.jsx(vd,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Property Image"})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold text-white shadow-lg ${ue.status==="active"?"bg-green-500":ue.status==="inactive"?"bg-gray-500":"bg-yellow-500"}`,children:ue.status||"Active"})}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm rounded px-1 py-0.5",children:[e.jsx("h3",{className:"font-bold mb-0 text-white",style:{fontSize:"7px"},children:ue.name}),e.jsx("p",{className:"text-white/90",style:{fontSize:"9px"},children:ue.address})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Type"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:Q.type})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"ID"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:Q.hostkitId})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-semibold",children:"Status"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:Q.status})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>$(Q),className:"btn-outline btn-sm flex-1",disabled:m||!C,title:C?"":"Only owners can edit properties",children:[e.jsx(_l,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>{a(qh(Q)),O(!0)},className:"btn-outline btn-sm text-red-600 border-red-300 hover:bg-red-50",disabled:p||!C,title:C?"":"Only owners can delete properties",children:e.jsx(zu,{className:"h-4 w-4"})})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[N&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(ia,{className:"h-4 w-4"}),e.jsx("span",{children:N}),e.jsx("button",{onClick:()=>a(my()),className:"ml-auto",children:e.jsx(kl,{className:"h-4 w-4"})})]}),u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Properties..."})]})}):A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first property to get started"}),e.jsxs("button",{onClick:()=>{ne(),a(my()),L(!0)},className:"btn-primary",disabled:!C,title:C?"":"Only owners can create properties",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(Q=>e.jsx(H,{property:Q},Q._id))}),(S||E)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:E?"Edit Property":"Add New Property"}),e.jsx("button",{onClick:()=>{L(!1),P(!1),ne()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(kl,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID *"}),e.jsx("input",{type:"number",name:"id",value:J.id||"",onChange:ge,className:"input",required:!0,disabled:E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{name:"type",value:J.type,onChange:ge,className:"input",required:!0,children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",name:"name",value:J.name,onChange:ge,className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),e.jsxs("select",{name:"owner",value:J.owner,onChange:ge,className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),s.map(Q=>e.jsx("option",{value:Q._id,children:Q.name},Q._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:J.address,onChange:ge,className:"input",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",name:"bedrooms",value:J.bedrooms,onChange:ge,className:"input",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",name:"bathrooms",value:J.bathrooms,onChange:ge,className:"input",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",name:"maxGuests",value:J.maxGuests,onChange:ge,className:"input",min:"1",required:!0})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",name:"hostkitId",value:J.hostkitId,onChange:ge,className:"input font-mono",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),e.jsx("input",{type:"password",name:"hostkitApiKey",value:J.hostkitApiKey,onChange:ge,className:"input font-mono",required:!0})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{type:"button",onClick:T,className:"btn-outline btn-sm",disabled:v||!J.hostkitId||!J.hostkitApiKey,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Uh,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H3,{className:"h-4 w-4 mr-2"}),"Test Connection"]})}),y&&e.jsx("div",{className:`mt-2 p-3 rounded-md ${y.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[y.success?e.jsx($s,{className:"h-4 w-4 mr-2"}):e.jsx(kl,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:y.message})]})})]})]}),E&&K&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),K.images&&K.images.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Images:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:K.images.map((Q,ue)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:df(Q),alt:`Property ${ue+1}`,className:"w-full h-24 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:()=>ee(Q),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},ue))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:re,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80"}),ie.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map((Q,ue)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:Q.name}),e.jsx("button",{type:"button",onClick:()=>I(xe=>xe.filter((Ee,me)=>me!==ue)),className:"text-red-500 hover:text-red-700",children:""})]},ue))})]}),e.jsx("button",{type:"button",onClick:()=>{console.log(" Upload button clicked, selectedImages:",ie.length),Se()},disabled:ie.length===0||q,className:"btn-outline btn-sm",children:q?e.jsxs(e.Fragment,{children:[e.jsx(Uh,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W3,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})]})]}),S&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:re,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),ie.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map((Q,ue)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:Q.name}),e.jsx("button",{type:"button",onClick:()=>fe(ue),className:"text-red-500 hover:text-red-700",children:e.jsx(as,{className:"h-4 w-4"})})]},ue))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),P(!1),ne()},className:"btn-outline flex-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:h||m||!C,title:C?"":"Only owners can create/update properties",children:h||m?e.jsxs(e.Fragment,{children:[e.jsx(Uh,{className:"h-4 w-4 mr-2 animate-spin"}),E?"Updating...":"Creating..."]}):E?"Update Property":"Create Property"})]})]})]})})}),F&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ia,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Property"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',d.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{O(!1),qh(null)},className:"btn-outline flex-1",children:"Cancel"}),e.jsx("button",{onClick:W,className:"btn-primary bg-red-600 hover:bg-red-700 flex-1",disabled:p||!C,title:C?"":"Only owners can delete properties",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Uh,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})})]})},W8=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Property Management"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage your properties"})]})})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 pt-48",children:e.jsx(wv,{})})]}),G8=({propertyId:t,startDate:r,endDate:s})=>{const[a,o]=R.useState({bookings:[],blockedDates:[],availableDates:[]}),[l,d]=R.useState(!1),[u,h]=R.useState(null),{token:m}=Bt(y=>y.auth),p=async()=>{if(!(!t||!m)){d(!0),h(null);try{const y=await Ft.get(`/calendar/${t}?startDate=${r}&endDate=${s}`);console.log("Calendar API response:",y);const A={bookings:y.bookings||y.result||[],blockedDates:y.blockedDates||[],availableDates:y.availableDates||[]};console.log("Structured calendar data:",A),o(A)}catch(y){console.error("Calendar fetch error:",y),h(y.message||"Failed to fetch calendar data")}finally{d(!1)}}},v=async(y,A,C)=>{if(!(!t||!m)){d(!0),h(null);try{const S=await Ft.put(`/calendar/${t}`,{startDate:y,endDate:A,status:C});return await p(),S}catch(S){throw h(S.message||"Failed to update calendar"),S}finally{d(!1)}}},N=async()=>{};return R.useEffect(()=>{t&&r&&s&&m&&(console.log("useCalendar: Fetching calendar data for:",{propertyId:t,startDate:r,endDate:s}),p())},[t,r,s,m]),{calendarData:a,isLoading:l,error:u,fetchCalendarData:p,updateCalendar:v,fetchBookings:N}},K8=async(t,r)=>await Ft.get(`/calendar/${t}/date/${r}`),Y8=async(t,r,s)=>{console.log("API: Fetching calendar pricing for:",{listingId:t,year:r,month:s});const a=await Ft.get(`/calendar/${t}/month/${r}/${s}`);return console.log("API: Raw response:",a),console.log("API: Pricing data:",a.pricingData),a.pricingData},xd=async(t,r,s,a)=>await Ft.put("/calendar",{listingId:t,startDate:r,endDate:s,isAvailable:a}),J8=({propertyId:t,onDateSelect:r})=>{const s=Hs(),{user:a}=Bt(Re=>Re.auth),o=Re=>{const it=Re.getFullYear(),ct=String(Re.getMonth()+1).padStart(2,"0"),ht=String(Re.getDate()).padStart(2,"0");return`${it}-${ct}-${ht}`},[l,d]=R.useState(t||null),[u,h]=R.useState(new Date),[m,p]=R.useState(null),[v,N]=R.useState(!1),[y,A]=R.useState(!1),[C,S]=R.useState(null),[L,E]=R.useState(!1),[P,F]=R.useState([]),[O,se]=R.useState(!1),[X,K]=R.useState(!1),[Y,ie]=R.useState(null),[I,q]=R.useState(null),[U,J]=R.useState(null),[be,ge]=R.useState(!1),[T,re]=R.useState(null),[fe,Se]=R.useState(!1),[ee,D]=R.useState({}),[$,W]=R.useState(!1),[ne,H]=R.useState(0),[Q,ue]=R.useState(1),[xe,Ee]=R.useState(!1),me=o(new Date(u.getFullYear(),u.getMonth()-1,1)),De=o(new Date(u.getFullYear(),u.getMonth()+2,0)),{token:Ze}=Bt(Re=>Re.auth),Te=Bt(Re=>Re.propertyManagement.properties);R.useEffect(()=>{Te.length===0&&s(za())},[s,Te.length]);const{calendarData:de,isLoading:Fe,error:st,fetchCalendarData:dt}=G8({propertyId:l,startDate:me,endDate:De});R.useEffect(()=>{Te.length>0&&!l&&d(Te[0].id)},[Te,l]);const Ke={bookings:de?.bookings||[],blockedDates:de?.blockedDates||[],availableDates:de?.availableDates||[],calendar:de?.result||[]},ce=Re=>{h(it=>{const ct=new Date(it);return Re==="prev"?ct.setMonth(it.getMonth()-1):ct.setMonth(it.getMonth()+1),ct})},pe=async()=>{if(l)try{W(!0);const Re=u.getFullYear(),it=u.getMonth();console.log("Fetching monthly pricing data:",{selectedPropertyId:l,year:Re,month:it});const ct=await Y8(l,Re,it);console.log("Received monthly pricing data:",ct),console.log("Sample pricing data keys:",Object.keys(ct).slice(0,5)),console.log("Sample pricing data values:",Object.values(ct).slice(0,3)),D(ct)}catch(Re){if(console.error("Failed to fetch monthly pricing data:",Re),Re&&typeof Re=="object"&&"response"in Re&&Re.response&&typeof Re.response=="object"&&"status"in Re.response&&Re.response.status===401){console.error("Authentication failed - token may be expired. Please refresh the page."),alert("Your session has expired. Please refresh the page to continue.");return}const it=u.getFullYear(),ct=u.getMonth(),ht=new Date(it,ct+1,0),nt={};for(let at=1;at<=ht.getDate();at++){const Jt=new Date(it,ct,at),ar=o(Jt);nt[ar]={price:289,minimumStay:2,status:"available"}}D(nt)}finally{W(!1)}};R.useEffect(()=>{pe()},[u,l]),R.useEffect(()=>()=>{Y&&clearTimeout(Y)},[Y]);const Ce=async Re=>{if(!ic(a?.role||null)){alert("Only owners can manage calendar dates. You can view the calendar but cannot make changes.");return}const it=o(Re);if(P.length>0||L){P.includes(it)?(K(!1),ge(!1),console.log("Stopped hover mode, date remains selected:",it)):(F(ct=>[...ct,it]),E(!0),se(!0),K(!0),ge(!0),console.log("Added date to selection and enabled hover mode:",it));return}S(Re),A(!0),Se(!0);try{const ct=o(Re),ht=await K8(l||392776,ct);re(ht),H(ht.price||0),ue(ht.minimumStay||1)}catch(ct){console.error("Failed to fetch calendar date data:",ct),re({date:o(Re),status:"available",price:null,minimumStay:null,checkInAvailable:!0,checkOutAvailable:!0})}finally{Se(!1)}if(!m)p({start:o(Re),end:o(Re)});else{const ct=new Date(m.start),ht=new Date(m.end),nt=Re;nt<ct?p({start:o(nt),end:m.end}):nt>ht?p({start:m.start,end:o(nt)}):p(null)}},$e=Re=>{if(console.log("Double-click detected!",Re),!ic(a?.role||null)){alert("Only owners can manage calendar dates. You can view the calendar but cannot make changes.");return}const it=o(Re);if(P.includes(it)){const ct=P.filter(ht=>ht!==it);F(ct),K(!1),ct.length===0&&(E(!1),se(!1)),console.log("Removed date from selection via double-click:",it)}else console.log("Entering double-click mode for date:",it),E(!0),F([it]),se(!0),K(!0),ge(!0)},Ge=Re=>{if(X&&P.length>0&&be){const it=o(Re);P.includes(it)||(F(ct=>[...ct,it]),console.log("Added date via hover:",it))}},Ue=()=>{E(!1),F([]),se(!1),K(!1),q(null),J(null),ge(!1)},Je=async()=>{if(!(!l||P.length===0)){N(!0);try{for(const Re of P)await xd(l,Re,Re,0),console.log(`Blocked date: ${Re}`);console.log("All dates blocked successfully"),Ue(),dt()}catch(Re){console.error("Failed to block dates:",Re)}finally{N(!1)}}},jt=async()=>{if(console.log(" handleBulkUnblock called with:",{selectedPropertyId:l,selectedDateList:P}),!l||P.length===0){console.log(" Missing propertyId or no dates selected");return}N(!0);try{for(const Re of P){console.log(` Unblocking date: ${Re}`);const it=await xd(l,Re,Re,1);console.log(` Unblocked date: ${Re}`,it)}console.log(" All dates unblocked successfully"),Ue(),await new Promise(Re=>setTimeout(Re,500)),await dt(),console.log(" Calendar data refreshed after unblock")}catch(Re){console.error(" Failed to unblock dates:",Re)}finally{N(!1)}},ot=async()=>{if(!(!m||!l)){N(!0);try{const Re=await xd(l,m.start,m.end,0);console.log("Dates blocked successfully:",Re),p(null),r&&r(m.start),dt()}catch(Re){console.error("Failed to block dates:",Re)}finally{N(!1)}}},lt=async()=>{if(!(!m||!l)){N(!0);try{const Re=await xd(l,m.start,m.end,1);console.log("Dates unblocked successfully:",Re),p(null),r&&r(m.start),dt()}catch(Re){console.error("Failed to unblock dates:",Re)}finally{N(!1)}}},_t=async()=>{if(!(!C||!l)){N(!0);try{const Re=C.getFullYear(),it=String(C.getMonth()+1).padStart(2,"0"),ct=String(C.getDate()).padStart(2,"0"),ht=`${Re}-${it}-${ct}`;console.log("Blocking date:",{clickedDate:C,dateStr:ht});const nt=await xd(l,ht,ht,0);console.log("Date blocked successfully:",nt),A(!1),r&&r(ht),dt()}catch(Re){console.error("Failed to block date:",Re),alert("Failed to block date. Please try again.")}finally{N(!1)}}},ut=async()=>{if(console.log(" handleUnblockSingleDate called with:",{clickedDate:C,selectedPropertyId:l}),!C||!l){console.log(" Missing clickedDate or selectedPropertyId");return}N(!0);try{const Re=C.getFullYear(),it=String(C.getMonth()+1).padStart(2,"0"),ct=String(C.getDate()).padStart(2,"0"),ht=`${Re}-${it}-${ct}`;console.log(" Unblocking single date:",{clickedDate:C,dateStr:ht});const nt=await xd(l,ht,ht,1);console.log(" Date unblocked successfully:",nt),A(!1),r&&r(ht),await new Promise(at=>setTimeout(at,500)),await dt(),console.log(" Calendar data refreshed after single unblock")}catch(Re){console.error(" Failed to unblock date:",Re),alert("Failed to unblock date. Please try again.")}finally{N(!1)}},hr=Re=>{if(!m)return!1;const it=o(Re);return it>=m.start&&it<=m.end},zt=Re=>{if(!L)return!1;const it=o(Re);if(P.includes(it))return!0;if(be&&I){const ct=o(I),ht=U?o(U):it,nt=ct<=ht?ct:ht,at=ct<=ht?ht:ct;return it>=nt&&it<=at}return!1},pt=Re=>{const it=Re.getFullYear(),ct=String(Re.getMonth()+1).padStart(2,"0"),ht=String(Re.getDate()).padStart(2,"0"),nt=`${it}-${ct}-${ht}`;return console.log("Checking if date is blocked:",nt,{blockedDates:Ke.blockedDates,bookings:Ke.bookings}),Array.isArray(Ke.blockedDates)&&Ke.blockedDates.some(Jt=>{if(Jt.date===nt)return Jt.status==="unavailable"||Jt.status==="blocked";if(Jt.startDate&&Jt.endDate){const ar=new Date(Jt.startDate),It=new Date(Jt.endDate),pr=new Date(nt);return pr>=ar&&pr<=It&&(Jt.status==="unavailable"||Jt.status==="blocked")}return!1})?(console.log(`Date ${nt} is blocked via blockedDates`),!0):Array.isArray(Ke.bookings)&&Ke.bookings.some(Jt=>Jt.date===nt?Jt.status==="unavailable"||Jt.status==="blocked":!1)?(console.log(`Date ${nt} is blocked via result array`),!0):!1},Tt=Re=>{const it=Re.getFullYear(),ct=String(Re.getMonth()+1).padStart(2,"0"),ht=String(Re.getDate()).padStart(2,"0"),nt=`${it}-${ct}-${ht}`;return Ke.bookings.some(at=>{const Jt=at.arrivalDate||at.checkIn,ar=at.departureDate||at.checkOut,It=at.status||at.bookingStatus,pr=new Date(Jt),ft=new Date(ar),wr=new Date(nt);return wr>=pr&&wr<=ft&&(It==="Modified"||It==="Confirmed"||It==="Paid")})},nr=Re=>{const it=Re.getFullYear(),ct=String(Re.getMonth()+1).padStart(2,"0"),ht=String(Re.getDate()).padStart(2,"0"),nt=`${it}-${ct}-${ht}`;if(Array.isArray(Ke.bookings)){const at=Ke.bookings.find(Jt=>{const ar=Jt.arrivalDate||Jt.checkIn,It=Jt.departureDate||Jt.checkOut,pr=Jt.status||Jt.bookingStatus,ft=new Date(ar),wr=new Date(It),xs=new Date(nt);return xs>=ft&&xs<=wr&&(pr==="Modified"||pr==="Confirmed"||pr==="Paid")});if(at)return{guestName:at.guestName||"Guest",guestCount:(at.adults||0)+(at.children||0),isCheckInDay:nt===(at.arrivalDate||at.checkIn),isCheckOutDay:nt===(at.departureDate||at.checkOut),checkInTime:at.checkInTime||"16:00",checkOutTime:at.checkOutTime||"11:00"}}return null},Et=Re=>{const it=Re.getFullYear(),ct=String(Re.getMonth()+1).padStart(2,"0"),ht=String(Re.getDate()).padStart(2,"0"),nt=`${it}-${ct}-${ht}`;return Array.isArray(Ke.bookings)?Ke.bookings.filter(at=>{const Jt=at.arrivalDate||at.checkIn,ar=at.departureDate||at.checkOut,It=at.status||at.bookingStatus,pr=new Date(Jt),ft=new Date(ar),wr=new Date(nt);return(wr.getTime()===pr.getTime()||wr.getTime()===ft.getTime()||wr>pr&&wr<ft)&&(It==="Modified"||It==="Confirmed"||It==="Paid")}).map(at=>{const Jt=at.arrivalDate||at.checkIn,ar=at.departureDate||at.checkOut,It=new Date(Jt),pr=new Date(ar),ft=new Date(nt);return{guestName:at.guestName||"Guest",guestCount:(at.adults||0)+(at.children||0),isCheckInDay:ft.getTime()===It.getTime(),isCheckOutDay:ft.getTime()===pr.getTime(),checkInTime:at.checkInTime||"16:00",checkOutTime:at.checkOutTime||"11:00",isStaying:ft>It&&ft<pr}}):[]},Gt=()=>{const Re=u.getFullYear(),it=u.getMonth(),ct=new Date(Re,it,1),ht=new Date(Re,it+1,0),nt=new Date(ct);nt.setDate(nt.getDate()-ct.getDay());const at=new Date(ht);at.setDate(at.getDate()+(6-ht.getDay()));const Jt=[],ar=new Date(nt);for(;ar<=at;)Jt.push(new Date(ar)),ar.setDate(ar.getDate()+1);return Jt.map((It,pr)=>{const ft=It.getMonth()===it,wr=It.toDateString()===new Date().toDateString(),xs=Tt(It);nr(It);const Yr=pt(It),Jr=hr(It);return e.jsxs("div",{className:`
              relative min-h-[20px] p-0 group
              ${ft&&!zt(It)&&!Jr?"bg-gray-50":""}
              ${!ft&&!zt(It)&&!Jr?"bg-gray-100":""}
              ${wr&&!zt(It)&&!Jr?"bg-blue-50":""}
              ${xs&&!zt(It)&&!Jr?"bg-blue-50":""}
              ${Yr&&!zt(It)&&!Jr?"bg-red-50":""}
              ${zt(It)?"bg-blue-100":""}
              ${Jr?"bg-blue-100":""}
              ${(()=>{const ir=It.getFullYear(),Xt=String(It.getMonth()+1).padStart(2,"0"),yr=String(It.getDate()).padStart(2,"0"),is=`${ir}-${Xt}-${yr}`,Lr=ee[is];return zt(It)||Jr?"":Lr?.status==="reserved"?"bg-blue-50":Lr?.status==="blocked"?"bg-red-50":""})()}
            `,style:{overflow:"visible"},children:[e.jsx("div",{className:"flex justify-between items-center mb-2 p-2",children:e.jsx("span",{className:`
               text-[11px] font-medium px-2 py-1 rounded
               ${ft?"text-gray-900 bg-gray-200":"text-gray-400 bg-gray-100"}
               ${wr?"text-blue-600 bg-blue-100":""}
               ${Jr?"text-blue-700 bg-blue-200 font-bold":""}
               ${Yr?"text-red-800 bg-red-200 font-bold":""}
               ${zt(It)?"text-blue-700 bg-blue-200 font-bold":""}
             `,children:It.getDate()})}),Yr&&e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("span",{className:"text-[7px] bg-red-500 text-white px-1 py-0.5 rounded font-bold",children:"BLOCKED"})}),ft&&(()=>{const ir=It.getFullYear(),Xt=String(It.getMonth()+1).padStart(2,"0"),yr=String(It.getDate()).padStart(2,"0"),is=`${ir}-${Xt}-${yr}`,Lr=ee[is];return $?e.jsx("div",{className:"absolute bottom-1 right-1 px-2 py-1 bg-gray-100 rounded-md text-[10px] text-gray-400 z-10 shadow-md",children:"Loading..."}):e.jsxs("div",{className:`absolute bottom-1 right-1 px-1 py-0.5 bg-gray-100 rounded-md space-y-0 z-10 shadow-md transition-opacity duration-200 ${Lr?.status==="reserved"?"opacity-0 group-hover:opacity-100":"opacity-100"}`,children:[e.jsxs("div",{className:`text-[8px] font-semibold ${Lr?.status==="reserved"?"text-blue-700":Lr?.status==="blocked"?"text-red-700":"text-gray-700"}`,children:["",Lr?.price||"N/A"]}),e.jsxs("div",{className:"text-[8px] text-gray-500",children:[Lr?.minimumStay||"N/A"," nights min"]}),Lr?.status==="reserved"&&e.jsx("div",{className:"text-[8px] text-blue-600 font-bold",children:"RESERVED"}),Lr?.status==="blocked"&&e.jsx("div",{className:"text-[8px] text-red-600 font-bold",children:"BLOCKED"})]})})(),xs&&(()=>{const ir=Et(It);return e.jsx("div",{className:"mt-2 relative",style:{height:"25px"},children:ir.map((Xt,yr)=>{const is=Xt.isCheckInDay,Lr=Xt.isCheckOutDay;Xt.isStaying;let Ws,sn,zr,ys;if(Lr&&!is)Ws="25px",sn="0px",zr="30%",ys="0px";else if(is&&!Lr)Ws="25px",sn="0px",zr="70%",ys="30%";else{if(Lr&&is)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:"-6px",top:"0px",height:"25px",width:"30%",zIndex:10,borderRadius:"0 6px 6px 0"},children:e.jsx("div",{className:"flex-1"})},`${yr}-checkout`),e.jsx("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:"30%",top:"0px",height:"25px",width:"70%",zIndex:10,borderRadius:"0"},children:e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-white text-[8px] font-bold",children:Xt.guestName?Xt.guestName.charAt(0).toUpperCase():"G"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[8.5px] font-medium text-white whitespace-nowrap overflow-hidden relative z-10",children:Xt.guestName}),e.jsxs("div",{className:"text-[8.5px] text-blue-100 whitespace-nowrap relative z-0",children:[Xt.guestCount," guests"]})]})]})},`${yr}-checkin`)]});Ws="25px",sn="0px",zr="100%",ys="0px"}return e.jsxs("div",{className:"absolute bg-blue-500 flex items-center px-2",style:{left:ys==="0px"?"-9px":ys,right:ys==="0px"?"-9px":"0px",top:sn,height:Ws,width:zr,zIndex:9,borderRadius:is?"6px 0 0 6px":Lr?"0 6px 6px 0":"0"},children:[is&&e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-white text-[8px] font-bold",children:Xt.guestName?Xt.guestName.charAt(0).toUpperCase():"G"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[8.5px] font-medium text-white whitespace-nowrap overflow-hidden relative z-10",children:Xt.guestName}),e.jsxs("div",{className:"text-[8.5px] text-teal-100 whitespace-nowrap relative z-0",children:[Xt.guestCount," guests"]})]})]}),Lr&&!is&&e.jsx("div",{className:"flex-1"})]},yr)})})})(),e.jsx("button",{onClick:()=>Ce(It),onDoubleClick:()=>$e(It),onMouseEnter:()=>Ge(It),disabled:!ft||xs||!ic(a?.role||null),className:`absolute inset-0 w-full h-full opacity-0 ${ic(a?.role||null)?"cursor-pointer disabled:cursor-not-allowed":"cursor-not-allowed"} ${L&&!be?"bg-green-100 bg-opacity-50":""}`,title:ic(a?.role||null)?L&&be?"Click to complete selection or stop selecting":L?"Click to start selection":"Click to manage date, double-click to select multiple":"Only owners can manage calendar dates"})]},pr)})};return Fe?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Calendar..."})]})}):st?e.jsxs("div",{className:"flex items-center justify-center p-8 text-red-600",children:[e.jsx(ia,{className:"h-5 w-5 mr-2"}),st]}):l?e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Property Calendar"}),!ic(a?.role||null)&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-amber-100 text-amber-800 rounded-md text-xs",children:[e.jsx(fc,{className:"h-3 w-3"}),e.jsx("span",{children:"View Only"})]})]}),e.jsx("p",{className:"text-lg text-gray-600",children:ic(a?.role||null)?"Manage your property availability and view bookings":"View availability and bookings (read-only)"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsx($a,{properties:Te,selectedId:l,onChange:d})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("button",{onClick:()=>ce("prev"),className:"p-0.5 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:e.jsx(D3,{className:"h-4 w-4 text-gray-600"})}),e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:u.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>ce("next"),className:"p-0.5 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-200 hover:shadow-md",children:e.jsx(I3,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"grid grid-cols-7 gap-0 bg-gray-100 p-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Re=>e.jsx("div",{className:"p-0.5 text-center text-[10px] font-semibold text-gray-600 bg-white",children:Re},Re))}),e.jsx("div",{className:"grid grid-cols-7 gap-0 bg-gray-100 p-0 rounded-lg",children:Gt()})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-200 p-3 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 border-2 border-blue-400 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Booked"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-100 border-2 border-red-400 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Blocked"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-white border-2 border-gray-400 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 border-2 border-green-400 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Guest Details"})]})]})}),m&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-blue-900",children:["Selected: ",m.start," to ",m.end]}),e.jsx("p",{className:"text-xs text-blue-700",children:"Click to block or unblock these dates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:ot,disabled:v,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 font-medium",children:[v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(as,{className:"h-4 w-4"}),"Block Dates"]}),e.jsxs("button",{onClick:lt,disabled:v,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 font-medium",children:[v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Do,{className:"h-4 w-4"}),"Unblock Dates"]}),e.jsx("button",{onClick:()=>p(null),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 font-medium",children:"Cancel"})]})]})}),!L&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Multi-Date Selection"}),e.jsx("p",{className:"text-xs text-blue-700",children:'Click "Start Selection"  Click start date  Hover to end date  Click end date'})]}),e.jsx("button",{onClick:()=>{E(!0),F([]),se(!1),K(!1),q(null),J(null),ge(!1),console.log("Started selection mode manually")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium",children:"Start Selection"})]})}),L&&be&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Selecting Date Range"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Hover to preview range, then click to complete selection"})]}),e.jsx("button",{onClick:Ue,className:"text-blue-600 hover:text-blue-800 px-2 py-1",children:"Cancel"})]})}),O&&P.length>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["Double-Click Mode: ",P.length," date",P.length>1?"s":""," selected"]}),e.jsx("p",{className:"text-xs text-green-700",children:P.join(", ")}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Hover over dates to add them to selection"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("button",{onClick:Je,disabled:v,className:"bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[v?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsx(as,{className:"h-3 w-3"}),"Block All (",P.length,")"]}),e.jsxs("button",{onClick:jt,disabled:v,className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[v?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsx(Do,{className:"h-3 w-3"}),"Unblock All (",P.length,")"]}),e.jsx("button",{onClick:Ue,className:"text-green-600 hover:text-green-800 px-2 py-1",children:"Exit Mode"})]})]})}),y&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Manage Date"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected Date:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),fe?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading date data..."})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Date Status:"}),e.jsx("div",{className:"flex items-center space-x-1",children:T?.status==="unavailable"||pt(C)?e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(as,{className:"h-2 w-2 mr-1"}),"Blocked"]}):Tt(C)?e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(Do,{className:"h-2 w-2 mr-1"}),"Booked"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Do,{className:"h-2 w-2 mr-1"}),"Available"]})})]})}),e.jsx("div",{className:"flex space-x-2",children:!Tt(C)&&e.jsx(e.Fragment,{children:pt(C)?e.jsx("button",{onClick:ut,disabled:v,className:"flex-1 bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:v?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Do,{className:"h-3 w-3 mr-1"}),"Unblock Date"]})}):e.jsx("button",{onClick:_t,disabled:v,className:"flex-1 bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:v?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"h-3 w-3 mr-1"}),"Block Date"]})})})}),Tt(C)&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800",children:"This date is booked and cannot be blocked or unblocked."})})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Property Selected"}),e.jsx("p",{className:"text-gray-500",children:"Please select a property to view its calendar and bookings."})]})})},Q8=()=>{const t=Hs(),[r]=Fd(),[s,a]=R.useState({propertyId:void 0,startDate:void 0,endDate:void 0}),{isAuthenticated:o}=Bt(d=>d.auth),{properties:l}=Bt(d=>d.properties);return R.useEffect(()=>{o&&t(Ki())},[t,o]),nm(),R.useEffect(()=>{const d=r.get("propertyId"),u=r.get("startDate"),h=r.get("endDate"),m=r.get("period");(d||u||h)&&a({propertyId:d?parseInt(d):void 0,startDate:u||void 0,endDate:h||void 0}),m&&console.log(`Applied ${m==="thisMonth"?"this month":m==="lastMonth"?"last month":m} calendar filters for property ${d}`)},[r]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsx("div",{className:"container mx-auto px-4 py-1 pt-8",children:e.jsx("div",{children:e.jsx(J8,{propertyId:s.propertyId})})})})},X8=({propertyId:t,month:r})=>{const[s,a]=R.useState(null),[o,l]=R.useState(!1),[d,u]=R.useState(null),{token:h}=Bt(v=>v.auth),m=async()=>{if(!(!r||!h)){l(!0),u(null);try{const v=await fetch(`/api/performance/${t}?month=${r}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!v.ok){const y=await v.text();throw console.error("Performance API error:",v.status,y),new Error(`Failed to fetch performance data: ${v.status}`)}const N=await v.json();a(N)}catch(v){console.error("Performance fetch error:",v),u(v.message||"Failed to fetch performance data")}finally{l(!1)}}},p=()=>{m()};return R.useEffect(()=>{r&&m()},[t,r]),{performanceData:s,isLoading:o,error:d,refreshData:p}},Z8=({propertyId:t,month:r})=>{const[s,a]=R.useState(t||392776),[o,l]=R.useState(r||new Date().toISOString().slice(0,7)),d=Bt(A=>A.propertyManagement.properties),{token:u}=Bt(A=>A.auth),{performanceData:h,isLoading:m,error:p,refreshData:v}=X8({propertyId:s||392776,month:o}),N=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(A),y=()=>{const A=[],C=new Date;for(let S=0;S<12;S++){const L=new Date(C.getFullYear(),C.getMonth()-S,1),E=L.toISOString().slice(0,7),P=L.toLocaleDateString("en-US",{month:"long",year:"numeric"});A.push({value:E,label:P})}return A};return m?e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):p?e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx("p",{className:"font-medium",children:"Error loading performance data"}),e.jsx("p",{className:"text-sm",children:p}),e.jsx("button",{onClick:v,className:"mt-2 text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Performance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue, commission, and payout overview"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsx($a,{properties:d,selectedId:s,onChange:a}),e.jsx("select",{value:o,onChange:A=>l(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:y().map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh data",children:e.jsx(ps,{className:"h-5 w-5"})})]})]}),h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gross Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.grossRevenue)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(T3,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.commissionTotal)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h.commissionPercent,"% of gross"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Au,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cleaning Fees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(h.cleaningFees)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deducted from gross"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ra,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Net Payout"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:N(h.netPayout)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your earnings"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(gi,{className:"h-6 w-6 text-green-600"})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Gross Revenue"}),e.jsx("span",{className:"font-medium",children:N(h.grossRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[e.jsxs("span",{children:["Commission (",h.commissionPercent,"%)"]}),e.jsxs("span",{className:"font-medium",children:["-",N(h.commissionTotal)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[e.jsx("span",{children:"Cleaning Fees"}),e.jsxs("span",{className:"font-medium",children:["-",N(h.cleaningFees)]})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between items-center font-bold text-lg",children:[e.jsx("span",{children:"Net Payout"}),e.jsx("span",{className:"text-green-600",children:N(h.netPayout)})]})]})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg border p-6 text-center text-gray-500",children:[e.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No performance data available for the selected month"})]})]}):e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"No performance data available"}),e.jsx("p",{className:"text-sm",children:"Select a property and month to view performance metrics"})]})})})},eA=()=>{const{propertyId:t}=_0(),[r]=Fd(),[s,a]=R.useState({propertyId:t?parseInt(t):void 0,month:void 0}),[o,l]=R.useState(null);return R.useEffect(()=>{const d=r.get("startDate");r.get("endDate");const u=r.get("period");if(d){const m=new Date(d).toISOString().slice(0,7);a({propertyId:t?parseInt(t):void 0,month:m})}if(u){const h=u==="thisMonth"?"this month":u==="lastMonth"?"last month":u;console.log(`Applied ${h} performance filters for property ${t}`),l({propertyId:t?parseInt(t):void 0,period:h,month:d?new Date(d).toISOString().slice(0,7):void 0})}},[r,t]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Property Performance"}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["Track your monthly performance metrics and revenue breakdown",t&&` for Property ${t}`]}),o&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Showing ",o.period," data",o.propertyId&&` for Property ${o.propertyId}`,o.month&&` (${o.month})`]})]})})]}),e.jsx("div",{children:e.jsx(Z8,{propertyId:s.propertyId,month:s.month})})]})},tA=()=>{Hs();const[t,r]=R.useState([]),[s,a]=R.useState("2025-01"),[o,l]=R.useState(null),[d,u]=R.useState(null),[h,m]=R.useState(!0),[p,v]=R.useState("overview"),{properties:N,isLoading:y}=Bt(E=>E.propertyManagement),{token:A}=Bt(E=>E.auth);R.useEffect(()=>{C()},[t,s]);const C=async()=>{if(A){m(!0);try{const E=await fetch(`/api/portfolio/overview?propertyIds=${t.join(",")}&month=${s}`,{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}});if(E.ok){const F=await E.json();l(F)}const P=await fetch(`/api/portfolio/trends?propertyIds=${t.join(",")}&months=2024-12,2025-01,2025-02`,{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}});if(P.ok){const F=await P.json();u(F)}}catch(E){console.error("Error fetching portfolio data:",E)}finally{m(!1)}}},S=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(E),L=E=>E==null?"0.0%":`${E>=0?"+":""}${E.toFixed(1)}%`;return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading portfolio data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Portfolio Management"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Multi-property performance overview and analytics"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsxs("button",{onClick:C,className:"btn-primary btn-sm",disabled:h,children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Properties"}),e.jsx($a,{properties:N,selectedId:t[0],onChange:E=>r(E?[E]:[]),placeholder:"Select Properties"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("input",{type:"month",value:s,onChange:E=>a(E.target.value),className:"input"})]})]})})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:Uu},{id:"trends",name:"Trends",icon:gi},{id:"comparison",name:"Comparison",icon:E3}].map(E=>{const P=E.icon;return e.jsxs("button",{onClick:()=>v(E.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${p===E.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),E.name]},E.id)})})}),p==="overview"&&e.jsx("div",{className:"space-y-6",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Yi,{className:"h-4 w-4 text-primary-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(o.totalRevenue||0)}),e.jsxs("div",{className:"flex items-center mt-1",children:[(o.revenueGrowth||0)>=0?e.jsx(gi,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Au,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${(o.revenueGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:L(o.revenueGrowth)})]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-success-100 rounded-full flex items-center justify-center",children:e.jsx(gs,{className:"h-4 w-4 text-success-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalBookings||0}),e.jsxs("p",{className:"text-sm text-gray-500",children:[o.totalNights||0," nights"]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-warning-100 rounded-full flex items-center justify-center",children:e.jsx(mn,{className:"h-4 w-4 text-warning-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(o.averageOccupancy||0).toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[(o.occupancyGrowth||0)>=0?e.jsx(gi,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Au,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${(o.occupancyGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:L(o.occupancyGrowth)})]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Yi,{className:"h-4 w-4 text-purple-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Daily Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(o.averageDailyRate||0)})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Performance"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Property"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:(o.properties||[]).map(E=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:E.name})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:S(E.revenue||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:E.bookings||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-900",children:[(E.occupancy||0).toFixed(1),"%"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:S(E.adr||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsx("button",{className:"p-1 text-blue-400 hover:text-blue-600",title:"View Details",children:e.jsx(Vs,{className:"h-4 w-4"})})})})]},E.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(mn,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Portfolio Data"}),e.jsx("p",{className:"text-gray-500",children:"Select a property and month to view portfolio metrics."})]})}),p==="trends"&&d&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Trends"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Revenue"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Bookings"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Occupancy"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ADR"})]})}),e.jsx("tbody",{children:(d.monthlyData||[]).map((E,P)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:E.month})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:S(E.revenue||0)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:E.bookings||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-900",children:[(E.occupancy||0).toFixed(1),"%"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-gray-900",children:S(E.adr||0)})})]},E.month))})]})})})]})}),p==="comparison"&&d&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Comparison"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(d.propertyComparison||[]).map(E=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:E.propertyName}),e.jsxs("div",{className:"flex items-center",children:[E.trend==="up"&&e.jsx(gi,{className:"h-4 w-4 text-green-500"}),E.trend==="down"&&e.jsx(Au,{className:"h-4 w-4 text-red-500"}),E.trend==="stable"&&e.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Performance Score"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(E.performance||0).toFixed(1),"/10"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${(E.performance||0)/10*100}%`}})})]})]},E.propertyId))})})]})})]})},rA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(null),[o,l]=R.useState(!0),[d,u]=R.useState(392776),[h,m]=R.useState(""),[p,v]=R.useState(""),[N,y]=R.useState(""),[A,C]=R.useState(""),[S,L]=R.useState(!1),[E,P]=R.useState(null),[F,O]=R.useState("all"),{properties:se}=Bt(T=>T.properties),{token:X,user:K}=Bt(T=>T.auth);R.useEffect(()=>{Y()},[d,h,N,A]);const Y=async()=>{if(!(!X||!d)){l(!0);try{const T=new URLSearchParams;T.append("propertyId",d.toString()),h&&T.append("status",h),N&&T.append("startDate",N),A&&T.append("endDate",A);const re=await fetch(`/api/credit-notes?${T.toString()}`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(re.ok){const fe=await re.json();r(fe.creditNotes||[]);const Se=fe.creditNotes?.filter(ne=>ne.status==="pending").length||0,ee=fe.creditNotes?.filter(ne=>ne.status==="approved").length||0,D=fe.creditNotes?.filter(ne=>ne.status==="rejected").length||0,$=fe.creditNotes?.reduce((ne,H)=>ne+H.amount,0)||0,W=fe.creditNotes?.filter(ne=>ne.status==="pending").reduce((ne,H)=>ne+H.amount,0)||0;a({totalPending:Se,totalApproved:ee,totalRejected:D,totalAmount:$,pendingAmount:W})}}catch(T){console.error("Error fetching credit notes:",T)}finally{l(!1)}}},ie=async T=>{if(X)try{(await fetch(`/api/credit-notes/${T}/approve`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}})).ok&&(Y(),L(!1))}catch(re){console.error("Error approving credit note:",re)}},I=async(T,re)=>{if(X)try{(await fetch(`/api/credit-notes/${T}/reject`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify({reason:re})})).ok&&(Y(),L(!1))}catch(fe){console.error("Error rejecting credit note:",fe)}},q=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(T),U=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),J=T=>{const re=new Date;switch(T){case"7d":return new Date(re.getTime()-10080*60*1e3).toISOString().split("T")[0];case"30d":return new Date(re.getTime()-720*60*60*1e3).toISOString().split("T")[0];case"90d":return new Date(re.getTime()-2160*60*60*1e3).toISOString().split("T")[0];case"1y":return new Date(re.getFullYear()-1,re.getMonth(),re.getDate()).toISOString().split("T")[0];default:return new Date(re.getTime()-720*60*60*1e3).toISOString().split("T")[0]}},be=T=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",processed:"bg-blue-100 text-blue-800"})[T]||"bg-gray-100 text-gray-800",ge=t.filter(T=>{const re=p===""||T.guestName.toLowerCase().includes(p.toLowerCase())||T.bookingId.toLowerCase().includes(p.toLowerCase()),fe=F==="all"||T.status===F;return re&&fe});return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading credit notes..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Credit Notes"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage credit note requests and approvals"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0"})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx($a,{properties:se,selectedId:d,onChange:u,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:h,onChange:T=>m(T.target.value),className:"input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processed",children:"Processed"})]})]}),e.jsxs("div",{className:"w-full lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:N,onChange:T=>y(T.target.value),className:"input"})]}),e.jsxs("div",{className:"w-full lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:A,onChange:T=>C(T.target.value),className:"input"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:T=>v(T.target.value),placeholder:"Search by guest name or booking ID...",className:"input pl-10"})]})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{y(J("7d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"7D"}),e.jsx("button",{onClick:()=>{y(J("30d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"30D"}),e.jsx("button",{onClick:()=>{y(J("90d")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"90D"}),e.jsx("button",{onClick:()=>{y(J("1y")),C(new Date().toISOString().split("T")[0])},className:"btn-outline btn-xs",children:"1Y"})]}),e.jsxs("button",{onClick:()=>{y(""),C(""),m(""),v("")},className:"btn-outline btn-sm",children:[e.jsx(qu,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Al,{className:"h-4 w-4 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalPending}),e.jsx("p",{className:"text-sm text-gray-500",children:q(s.pendingAmount)})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Do,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalApproved})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(as,{className:"h-4 w-4 text-red-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalRejected})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Yi,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q(s.totalAmount)})]})]})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Credit Notes",count:t.length},{id:"pending",name:"Pending",count:s?.totalPending||0},{id:"approved",name:"Approved",count:s?.totalApproved||0},{id:"rejected",name:"Rejected",count:s?.totalRejected||0}].map(T=>e.jsxs("button",{onClick:()=>O(T.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${F===T.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[T.name,T.count>0&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full",children:T.count})]},T.id))})}),e.jsx("div",{className:"space-y-4",children:ge.map(T=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${be(T.status)}`,children:T.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",T.bookingId]}),e.jsx("span",{className:"text-sm text-gray-500",children:""}),e.jsx("span",{className:"text-sm text-gray-500",children:U(T.requestedDate)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:T.guestName}),e.jsx("p",{className:"text-gray-700 mb-2",children:T.reason}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Yi,{className:"h-4 w-4 mr-1"}),q(T.amount)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ro,{className:"h-4 w-4 mr-1"}),T.requestedBy]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),T.propertyName]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>{P(T),L(!0)},className:"btn-outline btn-sm",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"View Details"]}),T.status==="pending"&&K?.role&&(Qx(K.role)||Xx(K.role))&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ie(T.id),className:"btn-success btn-sm",children:[e.jsx(Do,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs("button",{onClick:()=>I(T.id,"Rejected by manager"),className:"btn-danger btn-sm",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})})},T.id))}),ge.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W2,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No credit notes found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No credit notes are currently available for this property."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Credit notes are fetched from the Hostkit API. If you need to create credit notes, please use the Hostkit system directly."]})})]}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Credit Note Details"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${be(E.status)}`,children:E.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",E.bookingId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q(E.amount)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"})]})]}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:E.guestName}),e.jsx("p",{className:"text-gray-700",children:E.reason})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Note ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.bookingId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.propertyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:q(E.amount)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${be(E.status)}`,children:E.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested By"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.requestedBy})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:U(E.requestedDate)})]}),E.approvedBy&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.approvedBy})]}),E.approvedDate&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:U(E.approvedDate)})]})]})]}),E.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900",children:E.notes})})]}),E.invoiceId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Invoice ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:E.invoiceId})]}),E.creditNoteUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credit Note URL"}),e.jsxs("a",{href:E.creditNoteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"View Credit Note"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),E.status==="pending"&&K?.role&&(Qx(K.role)||Xx(K.role))&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ie(E.id),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors",children:[e.jsx(Do,{className:"h-4 w-4 mr-2 inline"}),"Approve"]}),e.jsxs("button",{onClick:()=>I(E.id,"Rejected by manager"),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:[e.jsx(as,{className:"h-4 w-4 mr-2 inline"}),"Reject"]})]})]})]})})})]})},sA=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Expenses"}),e.jsx("p",{className:"text-gray-600",children:"Expenses management coming soon..."})]})})}),nA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(null),[o,l]=R.useState(!1),[d,u]=R.useState(392776),[h,m]=R.useState(""),[p,v]=R.useState("all"),[N,y]=R.useState(!1),[A,C]=R.useState(null),[S,L]=R.useState(""),[E,P]=R.useState(!1),[F,O]=R.useState([]),{properties:se}=Bt(T=>T.properties),{token:X,user:K}=Bt(T=>T.auth);R.useEffect(()=>{Y(),ie()},[d,h]);const Y=async()=>{if(!(!X||!d)){l(!0);try{const T=await fetch(`/api/reviews/${d}`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}}),re=await fetch(`/api/reviews/${d}/stats`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(T.ok&&re.ok){const fe=await T.json(),Se=await re.json();console.log("Reviews API Response:",fe),console.log("Stats API Response:",Se);let ee=fe||[];if(h){const ue=new Date;let xe;switch(h){case"last7":xe=new Date(ue.getTime()-10080*60*1e3);break;case"last30":xe=new Date(ue.getTime()-720*60*60*1e3);break;case"last60":xe=new Date(ue.getTime()-1440*60*60*1e3);break;default:xe=new Date(0)}const Ee=ee.length;ee=ee.filter(me=>new Date(me.reviewDate)>=xe),console.log(`Date filter "${h}": ${Ee} -> ${ee.length} reviews`)}r(ee);const D=ee.length,$=D>0?ee.reduce((ue,xe)=>ue+xe.rating,0)/D:Se.averageRating||0,W=[5,4,3,2,1].map(ue=>{const xe=ee.filter(Ee=>Ee.rating===ue).length;return{rating:ue,count:xe,percentage:D>0?xe/D*100:0}}),ne=["Airbnb","Booking.com","VRBO"].map(ue=>{const xe=ee.filter(De=>De.platform===ue),Ee=xe.length,me=Ee>0?xe.reduce((De,Ze)=>De+Ze.rating,0)/Ee:0;return{platform:ue,count:Ee,averageRating:me}}).filter(ue=>ue.count>0),H=ee.filter(ue=>ue.responseText).length,Q=D>0?H/D*100:0;a({averageRating:$,totalReviews:D,ratingDistribution:W,platformBreakdown:ne,recentTrend:"up",responseRate:Q})}else console.error("Failed to fetch reviews or stats"),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}catch(T){console.error("Error fetching reviews:",T),r([]),a({averageRating:0,totalReviews:0,ratingDistribution:[],platformBreakdown:[],recentTrend:"stable",responseRate:0})}finally{l(!1)}}},ie=async()=>{if(X)try{const T=await fetch("/api/property-mappings",{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(T.ok){const re=await T.json();O(re.mappings||[])}}catch(T){console.error("Error fetching property mappings:",T)}},I=async()=>{if(!(!X||!d)){l(!0);try{const T=await fetch(`/api/reviews/${d}/sync`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});if(T.ok){const re=await T.json();alert(`Successfully synced ${re.syncedCount} reviews!`),Y()}else{const re=await T.json();alert(`Failed to sync reviews: ${re.message||"Unknown error"}`)}}catch(T){console.error("Error syncing reviews:",T),alert("Error syncing reviews. Please try again.")}finally{l(!1)}}},q=async()=>{if(!(!A||!S.trim()||!X))try{const T=await fetch(`/api/reviews/${A.reviewId}/response`,{method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify({responseText:S})});if(T.ok)y(!1),L(""),C(null),Y(),alert("Response submitted successfully!");else{const re=await T.json();alert(`Failed to submit response: ${re.message||"Unknown error"}`)}}catch(T){console.error("Error submitting response:",T),alert("Error submitting response. Please try again.")}},U=T=>Array.from({length:5},(re,fe)=>e.jsx(nf,{className:`h-4 w-4 ${fe<T?"text-yellow-400 fill-current":"text-gray-300"}`},fe)),J=T=>T>=4.5?"text-green-600":T>=3.5?"text-yellow-600":T>=2.5?"text-orange-600":"text-red-600",be=T=>({airbnb:"bg-pink-100 text-pink-800","booking.com":"bg-blue-100 text-blue-800",vrbo:"bg-purple-100 text-purple-800"})[T]||"bg-gray-100 text-gray-800",ge=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reviews & Ratings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage guest reviews and maintain your reputation"})]})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx($a,{properties:se,selectedId:d,onChange:u,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Filter"}),e.jsxs("select",{value:h,onChange:T=>m(T.target.value),className:"input text-sm",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"last7",children:"Last 7 Days"}),e.jsx("option",{value:"last30",children:"Last 30 Days"}),e.jsx("option",{value:"last60",children:"Last 60 Days"})]})]})]})})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(nf,{className:"h-4 w-4 text-yellow-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),e.jsx("p",{className:`text-2xl font-bold ${J(s.averageRating)}`,children:(s.averageRating||0).toFixed(1)}),e.jsx("div",{className:"flex items-center mt-1",children:U(Math.round(s.averageRating))})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(dp,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalReviews})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(up,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Response Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(s.responseRate||0).toFixed(0),"%"]})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.recentTrend==="up"?e.jsx(gi,{className:"h-4 w-4 text-green-600"}):s.recentTrend==="down"?e.jsx(Au,{className:"h-4 w-4 text-red-600"}):e.jsx(Uu,{className:"h-4 w-4 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trend"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 capitalize",children:s.recentTrend})]})]})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"all",name:"All Reviews",icon:dp},{id:"unresponded",name:"Unresponded",icon:up},{id:"analytics",name:"Analytics",icon:Uu}].map(T=>{const re=T.icon;return e.jsxs("button",{onClick:()=>v(T.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${p===T.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),T.name,T.id==="unresponded"&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full",children:t.filter(fe=>!fe.responseText).length})]},T.id)})})}),(p==="all"||p==="unresponded")&&e.jsx("div",{className:"space-y-4",children:t.filter(T=>p==="all"||!T.responseText).length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(dp,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:h?`No reviews found for the selected time period (${h==="last7"?"Last 7 days":h==="last30"?"Last 30 days":"Last 60 days"}). Try selecting "All Time" to see all reviews.`:d?"This property has no reviews yet.":"No reviews match your current filters."}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:()=>m(""),className:"btn-secondary",children:"Show All Time"}),e.jsx("button",{onClick:I,className:"btn-primary",children:"Sync Reviews"})]})]}):t.filter(T=>p==="all"||!T.responseText).map(T=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"flex items-center",children:U(T.rating)}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${be(T.platform)}`,children:T.platform}),T.isVerified&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:T.reviewText}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ro,{className:"h-4 w-4 mr-1"}),T.guestName]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),ge(T.reviewDate)]})]}),T.responseText&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Your Response"}),e.jsx("span",{className:"text-xs text-gray-500",children:ge(T.responseDate)})]}),e.jsx("p",{className:"text-gray-700",children:T.responseText})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!T.responseText&&e.jsxs("button",{onClick:()=>{C(T),y(!0)},className:"btn-primary btn-sm",children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Respond"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"View Details",children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"Flag Review",children:e.jsx(O3,{className:"h-4 w-4"})})]})]})})},T._id))}),p==="analytics"&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rating Distribution"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"space-y-3",children:s.ratingDistribution.map(({rating:T,count:re,percentage:fe})=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center w-16",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:T}),e.jsx(nf,{className:"h-4 w-4 text-yellow-400 fill-current ml-1"})]}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${fe}%`}})})}),e.jsxs("div",{className:"flex items-center space-x-2 w-20",children:[e.jsx("span",{className:"text-sm text-gray-600",children:re}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",(fe||0).toFixed(0),"%)"]})]})]},T))})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Performance"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.platformBreakdown.map(({platform:T,count:re,averageRating:fe})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${be(T)}`,children:T}),e.jsx("div",{className:"flex items-center",children:U(Math.round(fe))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reviews"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:re})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average"}),e.jsx("span",{className:`text-sm font-medium ${J(fe)}`,children:(fe||0).toFixed(1)})]})]})]},T))})})]})]}),N&&A&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Respond to Review"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[U(A.rating),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["by ",A.guestName]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:A.reviewText})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),e.jsx("textarea",{value:S,onChange:T=>L(T.target.value),className:"input",rows:4,placeholder:"Write a professional response to this review...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{onClick:q,className:"btn-primary btn-sm",disabled:!S.trim(),children:"Submit Response"})]})]})]})})}),E&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Integration Settings"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Environment Variables Required"}),e.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_TOKEN"})," - Your Hostaway API token (already configured)"]}),e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_ACCOUNT_ID"})," - Your Hostaway account ID (already configured)"]}),e.jsxs("div",{children:[e.jsx("code",{children:"HOSTAWAY_API_BASE"})," - Hostaway API base URL (already configured)"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Property Mappings"}),e.jsx("div",{className:"space-y-3",children:F.map(T=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:T.propertyName}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",T.internalId]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hostaway Property ID"}),e.jsx("input",{type:"text",value:T.platformMappings.hostaway||"",className:"w-full text-xs border border-gray-300 rounded px-2 py-1",placeholder:"Hostaway property ID (e.g., 392776)"})]})})]},T.internalId))})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"API Status"}),e.jsxs("div",{className:"space-y-2 text-xs text-green-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Hostaway:"}),"  Already configured and ready to use"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Reviews API:"}),"  Connected to Hostaway Reviews endpoints"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Response API:"}),"  Can post responses to reviews"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>P(!1),className:"btn-outline btn-sm",children:"Close"}),e.jsx("button",{onClick:()=>{alert("Property mappings updated! (This would save to database in production)"),P(!1)},className:"btn-primary btn-sm",children:"Save Changes"})]})]})})})]})},aA=()=>{const{user:t}=Bt(O=>O.auth),[r,s]=R.useState([]),[a,o]=R.useState(""),[l,d]=R.useState(""),[u,h]=R.useState(""),[m,p]=R.useState(25),[v,N]=R.useState(!1),[y,A]=R.useState(""),[C,S]=R.useState(null);R.useEffect(()=>{const O=new Date,se=O.getFullYear();let K=O.getMonth()-1,Y=se;K<0&&(K=11,Y=se-1);const ie=new Date(Y,K,1),I=new Date(Y,K+1,0),q=U=>{const J=U.getFullYear(),be=String(U.getMonth()+1).padStart(2,"0"),ge=String(U.getDate()).padStart(2,"0");return`${J}-${be}-${ge}`};d(q(ie)),h(q(I))},[]),R.useEffect(()=>{(async()=>{try{const se=await G0();s(se.properties||[])}catch(se){console.error("Error fetching properties:",se),A("Failed to fetch properties")}})()},[]);const L=async()=>{if(!a||!l||!u){A("Please select property and date range");return}N(!0),A("");try{const O={startDate:l,endDate:u,year:new Date(l).getFullYear().toString(),month:(new Date(l).getMonth()+1).toString(),commissionPercentage:m.toString()},se=await Ft.get(`/owner-statements/property/${a}`,{params:O});console.log("API Response:",se),S(se)}catch(O){console.error("Error generating statements:",O),A(O instanceof Error?O.message:"Failed to generate statements")}finally{N(!1)}},E=O=>new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(O),P=O=>new Date(O).toLocaleDateString("en-EU"),F=()=>{if(!C||C.length===0)return;const O=C[0],se=O.revenue.total,X=se*.15,K=O.expenses.fees,Y=O.expenses.commission,ie=se-X-K-Y,q=[["OWNER STATEMENT DETAILED BREAKDOWN"],["Property ID","Property Name","Period","Generated At"],[O.propertyId.toString(),O.propertyName,`${O.period.startDate} to ${O.period.endDate}`,new Date(O.createdAt).toLocaleString()],[],["CALCULATION SUMMARY"],["Gross Amount (sum of all invoices)",E(se)],["Portal Commission (15% of gross)",E(X)],["Cleaning Fee (from reservation API)",E(K)],["Management Commission (25% of gross-cleaning)",E(Y)],["Final Amount to Owner",E(ie)],[],["RESERVATION BREAKDOWN"],["Reservation Code","Guest Name","Check-in","Check-out","Received Amount","Host Commission","Cleaning Fee","Invoiced Value","Provider"],...O.reservations.map(ge=>[ge.rcode,`${ge.firstname} ${ge.lastname}`,P(new Date(parseInt(ge.arrival)*1e3).toISOString()),P(new Date(parseInt(ge.departure)*1e3).toISOString()),E(ge.received_amount),E(ge.host_commission),E(ge.cleaning_fee),E(ge.invoiced_value),ge.provider]),[],["INVOICE BREAKDOWN"],["Invoice ID","Invoice Date","Invoice Value","Status","Type"],...O.invoices&&O.invoices.length>0?O.invoices.map(ge=>[ge.id||ge.refid||"N/A",ge.date?P(ge.date):"N/A",E(ge.value||ge.amount||0),ge.status||"N/A",ge.type||"N/A"]):[["No invoices available for this period"]],[],["COMMISSION BREAKDOWN"],["Commission Type","Percentage","Formula","Amount"],["Portal Commission","15%","15% of Gross",E(X)],["Management Commission",`${m}%`,`${m}% of (Gross - Cleaning Fee)`,E(Y)],["Total Commission",`${15+m}%`,"Portal + Management",E(X+Y)],[],["FINAL SUMMARY"],["Total Reservations",O.reservations.length],["Total Revenue (sum of all invoices)",E(se)],["Total Deductions",E(X+K+Y)],["Final Amount to Owner",E(ie)]].map(ge=>ge.join(",")).join(`
`),U=new Blob([q],{type:"text/csv"}),J=window.URL.createObjectURL(U),be=document.createElement("a");be.href=J,be.download=`owner-statement-detailed-${O.propertyId}-${O.period.startDate}-${O.period.endDate}.csv`,be.click(),window.URL.revokeObjectURL(J)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ey,{className:"w-8 h-8 mr-3 text-gray-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Owner Statements"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Generate financial statements for property owners"})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 pt-48",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsxs("select",{value:a,onChange:O=>o(O.target.value?parseInt(O.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Property"}),r.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l,onChange:O=>d(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:u,onChange:O=>h(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t?.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Management Commission Rate (Ignored for admin properties)"}),e.jsxs("select",{value:m,onChange:O=>p(parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10%"}),e.jsx("option",{value:25,children:"25%"}),e.jsx("option",{value:30,children:"30%"})]})]})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx("button",{onClick:L,disabled:v||!a||!l||!u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ey,{className:"w-4 h-4 mr-2"}),"Generate Statements"]})})}),y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600",children:y})}),C&&C.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Owner Statement Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Calculation Base:"}),e.jsx("span",{className:"font-semibold",children:"Invoices"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Gross Amount (sum of all invoices):"}),e.jsx("span",{className:"font-semibold",children:E(C[0].revenue.total)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Portal Commission (15% of gross):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",E(C[0].revenue.total*.15)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Cleaning Fee (from reservation API):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",E(C[0].expenses.fees)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Management Commission (25% of gross-cleaning):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",E(C[0].expenses.commission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Additional Fees:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",E(C[0].expenses.other)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Expenses:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",E(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-green-50 rounded-lg px-4",children:[e.jsx("span",{className:"text-green-600 font-bold text-lg",children:"Final Amount to Owner:"}),e.jsx("span",{className:"text-green-600 font-bold text-lg",children:E(C[0].revenue.total-C[0].revenue.total*.15-C[0].expenses.fees-C[0].expenses.commission-C[0].expenses.other)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Name:"}),e.jsx("span",{className:"font-semibold",children:C[0].propertyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property ID:"}),e.jsx("span",{className:"font-semibold",children:C[0].propertyId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-semibold",children:C[0].status})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Period:"}),e.jsxs("span",{className:"font-semibold",children:[P(C[0].period.startDate)," - ",P(C[0].period.endDate)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-semibold",children:P(C[0].createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Commission Rate:"}),e.jsxs("span",{className:"font-semibold",children:[m,"%"]})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:F,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})]})})})]})},Rf={async getUserProfile(){return Ft.get("/settings/profile")},async updateUserProfile(t){return Ft.put("/settings/profile",t)},async getNotificationSettings(){return Ft.get("/settings/notifications")},async updateNotificationSettings(t){return Ft.put("/settings/notifications",t)},async getSecuritySettings(){return Ft.get("/settings/security")},async updateSecuritySettings(t){return Ft.put("/settings/security",t)}},iA=()=>{const{user:t}=Bt(P=>P.auth),[r,s]=R.useState(!0),[a,o]=R.useState(!1),[l,d]=R.useState("profile"),[u,h]=R.useState({firstName:"",lastName:"",email:"",phone:"",role:"",companies:[{name:"",nif:""}]}),[m,p]=R.useState(""),[v,N]=R.useState("");R.useEffect(()=>{(async()=>{try{const F=await Rf.getUserProfile(),O=F.name||"";let se="",X="";if(!se&&!X&&O){const K=O.trim().split(" ");K.length===1?(se=K[0],X=""):K.length===2?(se=K[0],X=K[1]):(se=K[0],X=K.slice(1).join(" "))}h({firstName:se,lastName:X,email:F.email||"",phone:F.phone||"",role:F.role||"",companies:F.companies||[{name:"",nif:""}]})}catch(F){console.error("Error fetching profile:",F),p("Failed to load profile data")}finally{s(!1)}})()},[]);const y=P=>{const{name:F,value:O}=P.target;h(se=>({...se,[F]:O}))},A=()=>{h(P=>({...P,companies:[...P.companies||[],{name:"",nif:""}]}))},C=P=>{h(F=>({...F,companies:F.companies?.filter((O,se)=>se!==P)||[]}))},S=(P,F,O)=>{h(se=>({...se,companies:se.companies?.map((X,K)=>K===P?{...X,[F]:O}:X)||[]}))},L=async P=>{P.preventDefault(),o(!0),p(""),N("");try{const F=`${u.firstName} ${u.lastName}`.trim(),O=u.companies?.filter(se=>se.name.trim()!==""&&se.nif.trim()!=="")||[];await Rf.updateUserProfile({name:F,phone:u.phone,companies:O}),N("Profile updated successfully!")}catch(F){console.error("Error updating profile:",F),p(F.message||"Failed to update profile")}finally{o(!1)}},E=[{id:"profile",name:"Profile",icon:Ro},{id:"companies",name:"Companies",icon:vd}];return r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ed,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200/50 shadow-sm fixed top-16 left-0 right-0 z-20 lg:left-64",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage your account settings and preferences"})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 pt-48",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[v&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:v}),m&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:E.map(P=>{const F=P.icon;return e.jsxs("button",{onClick:()=>d(P.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${l===P.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(F,{className:"h-4 w-4"}),P.name]},P.id)})})}),e.jsxs("div",{className:"p-6",children:[l==="profile"&&e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:u.firstName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:u.lastName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",name:"role",value:u.role,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Changes"})})]}),l==="companies"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Company Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your company details and NIF numbers"})]}),e.jsxs("button",{type:"button",onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(vd,{className:"h-4 w-4"}),"Add Company"]})]}),u.companies&&u.companies.length>0?e.jsx("div",{className:"space-y-4",children:u.companies.map((P,F)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Company ",F+1]}),u.companies&&u.companies.length>1&&e.jsx("button",{type:"button",onClick:()=>C(F),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",value:P.name,onChange:O=>S(F,"name",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIF"}),e.jsx("input",{type:"text",value:P.nif,onChange:O=>S(F,"nif",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter NIF number"})]})]})]},F))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(vd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No companies added"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first company to get started."}),e.jsxs("button",{type:"button",onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto",children:[e.jsx(vd,{className:"h-4 w-4"}),"Add Company"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:L,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Companies"})})]})]})]})]})})]})},oA=()=>{const[t,r]=R.useState(!1),[s,a]=R.useState(!1),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState({firstName:"",lastName:"",email:"",phone:"",role:""}),{user:p,token:v}=Bt(S=>S.auth),N=Hs();R.useEffect(()=>{if(p){const S=(p.name||"").split(" ");m({firstName:S[0]||"",lastName:S.slice(1).join(" ")||"",email:p.email||"",phone:"",role:p.role||""})}},[p]);const y=async()=>{if(v){l(!0);try{const S=await Rf.updateUserProfile({name:`${h.firstName} ${h.lastName}`.trim(),phone:h.phone});u({type:"success",text:S.message}),N(Su()),r(!1)}catch(S){u({type:"error",text:S.response?.data?.message||"Error updating profile"})}finally{l(!1)}}},A=()=>{if(p){const S=(p.name||"").split(" ");m({firstName:S[0]||"",lastName:S.slice(1).join(" ")||"",email:p.email||"",phone:"",role:p.role||""})}r(!1),u(null)},C=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"View and manage your profile information"})]}),d&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center ${d.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[d.type==="success"?e.jsx(l0,{className:"h-5 w-5 mr-2"}):e.jsx(as,{className:"h-5 w-5 mr-2"}),d.text,e.jsx("button",{onClick:()=>u(null),className:"ml-auto text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),t?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:A,className:"btn-secondary btn-sm",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:y,disabled:o,className:"btn-primary btn-sm",children:[e.jsx(l0,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]}):e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary btn-sm",children:[e.jsx(_l,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ro,{className:"h-4 w-4 inline mr-2"}),"First Name"]}),e.jsx("input",{type:"text",value:h.firstName,onChange:S=>m({...h,firstName:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ro,{className:"h-4 w-4 inline mr-2"}),"Last Name"]}),e.jsx("input",{type:"text",value:h.lastName,onChange:S=>m({...h,lastName:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Cl,{className:"h-4 w-4 inline mr-2"}),"Email"]}),e.jsx("input",{type:"email",value:h.email,disabled:!0,className:"input bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(M0,{className:"h-4 w-4 inline mr-2"}),"Phone"]}),e.jsx("input",{type:"tel",value:h.phone,onChange:S=>m({...h,phone:S.target.value}),disabled:!t,className:`input ${t?"":"bg-gray-50"}`,placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(qs,{className:"h-4 w-4 inline mr-2"}),"Role"]}),e.jsx("input",{type:"text",value:h.role,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(gs,{className:"h-4 w-4 inline mr-2"}),"Member Since"]}),e.jsx("input",{type:"text",value:p?.createdAt?C(p.createdAt):"N/A",disabled:!0,className:"input bg-gray-50"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Status"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${p?.isVerified?"bg-green-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p?.isVerified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(qs,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:p?.role||"User"})]})]})})]})]})},lA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState([]),[o,l]=R.useState(!0),[d,u]=R.useState(0),[h,m]=R.useState({}),[p,v]=R.useState(392776),[N,y]=R.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}),[A,C]=R.useState(!1),[S,L]=R.useState(!1),[E,P]=R.useState(!1),[F,O]=R.useState(null),[se,X]=R.useState("all"),[K,Y]=R.useState([]),[ie,I]=R.useState("single"),[q,U]=R.useState([p||392776]),[J,be]=R.useState("events"),{properties:ge}=Bt(me=>me.properties),{token:T,user:re}=Bt(me=>me.auth);R.useEffect(()=>{T&&(fe(),Se())},[T,p,N]);const fe=async()=>{if(!T||!p){console.log("No token or property selected for fetching events"),l(!1);return}l(!0);try{const me=new URLSearchParams({propertyId:p.toString(),startDate:N.start,endDate:N.end});console.log("Fetching advanced calendar events from:",`/advanced-calendar/events?${me}`),console.log("Using token:",T.substring(0,20)+"...");const De=await Ft.get(`/advanced-calendar/events?${me}`);console.log("Advanced calendar events data received:",De),r(De.events||[]),u(De.total||0),m(De.sources||{})}catch(me){console.error("Error fetching advanced calendar events:",me),r([])}finally{l(!1)}},Se=async()=>{if(!T){console.log("No token available for fetching bulk operations");return}try{console.log("Fetching bulk operations from:","/advanced-calendar/bulk-operations");const me=await Ft.get("/advanced-calendar/bulk-operations");console.log("Bulk operations data received:",me),a(me.operations||[])}catch(me){console.error("Error fetching bulk operations:",me),a([])}},ee=async me=>{if(!(!T||!p))try{await Ft.post("/advanced-calendar/events",{...me,propertyId:p}),fe(),C(!1)}catch(De){console.error("Error creating event:",De)}},D=async me=>{if(!(!T||!me.id))try{await Ft.put(`/advanced-calendar/events/${me.id}`,me),fe(),L(!1),O(null)}catch(De){console.error("Error updating event:",De)}},$=async me=>{if(T&&confirm("Are you sure you want to delete this event?"))try{await Ft.delete(`/advanced-calendar/events/${me}`),fe()}catch(De){console.error("Error deleting event:",De)}},W=async me=>{if(T)try{await Ft.post("/advanced-calendar/bulk-operations",me),Se(),P(!1)}catch(De){console.error("Error creating bulk operation:",De)}},ne=me=>new Date(me).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(me),Q=me=>({block:"bg-red-100 text-red-800",price_update:"bg-blue-100 text-blue-800",minimum_stay:"bg-yellow-100 text-yellow-800",maintenance:"bg-orange-100 text-orange-800",cleaning:"bg-green-100 text-green-800"})[me]||"bg-gray-100 text-gray-800",ue=me=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[me]||"bg-gray-100 text-gray-800",xe=me=>({hostaway:"bg-blue-100 text-blue-800",hostkit:"bg-purple-100 text-purple-800",manual:"bg-gray-100 text-gray-800"})[me]||"bg-gray-100 text-gray-800",Ee=me=>{switch(me){case"hostaway":return e.jsx(mn,{className:"h-3 w-3"});case"hostkit":return e.jsx(Ed,{className:"h-3 w-3"});case"manual":return e.jsx(_l,{className:"h-3 w-3"});default:return e.jsx(ty,{className:"h-3 w-3"})}};return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading calendar events..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Advanced Calendar"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage calendar events, bulk operations, and pricing"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>P(!0),className:"btn-outline btn-sm",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Bulk Operations"]}),e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary btn-sm",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx($a,{properties:ge,selectedId:p,onChange:v,placeholder:"Select Property"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:N.start,onChange:me=>y({...N,start:me.target.value}),className:"input"})]}),e.jsxs("div",{className:"w-full lg:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:N.end,onChange:me=>y({...N,end:me.target.value}),className:"input"})]})]})})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"events",name:"Calendar Events",icon:gs},{id:"bulk",name:"Bulk Operations",icon:qu},{id:"templates",name:"Templates",icon:l0}].map(me=>{const De=me.icon;return e.jsxs("button",{onClick:()=>be(me.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${J===me.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),me.name]},me.id)})})}),J==="events"&&e.jsx("div",{className:"space-y-4",children:t.map(me=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Q(me.type)}`,children:me.type.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ue(me.status)}`,children:me.status}),me.source&&e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${xe(me.source)}`,children:[Ee(me.source),e.jsx("span",{className:"ml-1",children:me.source})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[ne(me.startDate)," - ",ne(me.endDate)]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:me.title}),me.description&&e.jsx("p",{className:"text-gray-700 mb-2",children:me.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),me.propertyName]}),me.price&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Yi,{className:"h-4 w-4 mr-1"}),H(me.price)]}),me.minimumStay&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Al,{className:"h-4 w-4 mr-1"}),me.minimumStay," nights min"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ra,{className:"h-4 w-4 mr-1"}),me.createdBy]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>{O(me),L(!0)},className:"btn-outline btn-sm",children:[e.jsx(_l,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>$(me.id),className:"btn-danger btn-sm",children:[e.jsx(zu,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})},me.id))}),J==="bulk"&&e.jsx("div",{className:"space-y-4",children:s.map(me=>e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Q(me.type)}`,children:me.type.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ue(me.status)}`,children:me.status}),e.jsx("span",{className:"text-sm text-gray-500",children:ne(me.createdAt)})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Bulk ",me.type.replace("_"," ")," Operation"]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),me.properties.length," properties"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),me.dates.length," dates"]}),me.parameters.price&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Yi,{className:"h-4 w-4 mr-1"}),H(me.parameters.price)]})]}),me.results&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[e.jsx($s,{className:"h-4 w-4 inline mr-1"}),me.results.success," successful"]}),e.jsxs("span",{className:"text-red-600",children:[e.jsx(ia,{className:"h-4 w-4 inline mr-1"}),me.results.failed," failed"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:me.status==="completed"&&e.jsxs("button",{className:"btn-outline btn-sm",children:[e.jsx(ty,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})})},me.id))}),J==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Templates"})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Maintenance Block",type:"block",description:"Block dates for maintenance work"},{name:"Cleaning Schedule",type:"cleaning",description:"Schedule cleaning between bookings"},{name:"Price Increase",type:"price_update",description:"Increase prices for peak season"},{name:"Minimum Stay Update",type:"minimum_stay",description:"Set minimum stay requirements"},{name:"Holiday Block",type:"block",description:"Block dates for personal use"},{name:"Seasonal Pricing",type:"price_update",description:"Apply seasonal pricing rules"}].map((me,De)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:me.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:me.description}),e.jsx("button",{className:"btn-outline btn-sm w-full",children:"Use Template"})]},De))})})]})}),t.length===0&&J==="events"&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No events match your current filters."}),e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary btn-sm",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Create Your First Event"]})]}),s.length===0&&J==="bulk"&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bulk operations found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create bulk operations to manage multiple properties at once."}),e.jsxs("button",{onClick:()=>P(!0),className:"btn-primary btn-sm",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Create Bulk Operation"]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Event"}),e.jsxs("form",{onSubmit:me=>{me.preventDefault();const De=new FormData(me.target);let Ze=[];ie==="single"?Ze=[p||392776]:Ze=q.length>0?q:[p||392776],Ze.forEach(Te=>{const de={propertyId:Te,type:De.get("type"),title:De.get("title"),description:De.get("description"),startDate:De.get("startDate"),endDate:De.get("endDate"),price:De.get("price")?Number(De.get("price")):void 0,minimumStay:De.get("minimumStay")?Number(De.get("minimumStay")):void 0};ee(de)})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"eventPropertySelection",value:"single",checked:ie==="single",onChange:me=>I(me.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Current Property"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"eventPropertySelection",value:"multiple",checked:ie==="multiple",onChange:me=>I(me.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),ie==="multiple"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>U(ge.map(me=>me.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>U([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),e.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[q.length," selected"]})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:ge.map(me=>e.jsxs("label",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",checked:q.includes(me.id),onChange:De=>{De.target.checked?U([...q,me.id]):U(q.filter(Ze=>Ze!==me.id))},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:me.name})]},me.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"block",children:"Block"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{name:"title",type:"text",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{name:"startDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{name:"endDate",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ()"}),e.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),I("single"),U([p||392776])},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Event"})]})]})]})}),S&&F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Event"}),e.jsxs("form",{onSubmit:me=>{me.preventDefault();const De=new FormData(me.target),Ze={id:F.id,propertyId:F.propertyId,type:De.get("type"),title:De.get("title"),description:De.get("description"),startDate:De.get("startDate"),endDate:De.get("endDate"),price:De.get("price")?Number(De.get("price")):void 0,minimumStay:De.get("minimumStay")?Number(De.get("minimumStay")):void 0};D(Ze)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs("div",{className:"p-2 bg-gray-50 rounded-md text-sm text-gray-600",children:[F.propertyName," (ID: ",F.propertyId,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",defaultValue:F.type,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"block",children:"Block"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay",children:"Minimum Stay"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{name:"title",type:"text",defaultValue:F.title,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:F.description,className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{name:"startDate",type:"date",defaultValue:F.startDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{name:"endDate",type:"date",defaultValue:F.endDate,required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ()"}),e.jsx("input",{name:"price",type:"number",step:"0.01",defaultValue:F.price,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",defaultValue:F.minimumStay,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),O(null)},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Update Event"})]})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Bulk Operation"}),e.jsxs("form",{onSubmit:me=>{me.preventDefault();const De=new FormData(me.target);let Ze=[];se==="all"?Ze=ge.map(de=>de.id):Ze=K.length>0?K:[p||392776];const Te={type:De.get("type"),properties:Ze,dates:[De.get("date")],parameters:{price:De.get("price")?Number(De.get("price")):void 0,minimumStay:De.get("minimumStay")?Number(De.get("minimumStay")):void 0,reason:De.get("reason"),maintenanceType:De.get("maintenanceType"),cleaningType:De.get("cleaningType"),checkInAvailable:De.get("checkInAvailable")==="true",checkOutAvailable:De.get("checkOutAvailable")==="true"}};W(Te)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",onChange:me=>{document.getElementById("price-field")?.classList.add("hidden"),document.getElementById("minimum-stay-field")?.classList.add("hidden"),document.getElementById("maintenance-field")?.classList.add("hidden"),document.getElementById("cleaning-field")?.classList.add("hidden"),document.getElementById("coa-cod-field")?.classList.add("hidden");const De=me.target.value;De==="price_update"?document.getElementById("price-field")?.classList.remove("hidden"):De==="minimum_stay_update"?document.getElementById("minimum-stay-field")?.classList.remove("hidden"):De==="maintenance"?document.getElementById("maintenance-field")?.classList.remove("hidden"):De==="cleaning"?document.getElementById("cleaning-field")?.classList.remove("hidden"):De==="coa_cod"&&document.getElementById("coa-cod-field")?.classList.remove("hidden")},children:[e.jsx("option",{value:"block_dates",children:"Block Dates"}),e.jsx("option",{value:"price_update",children:"Price Update"}),e.jsx("option",{value:"minimum_stay_update",children:"Minimum Stay Update"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"cleaning",children:"Cleaning"}),e.jsx("option",{value:"coa_cod",children:"Check-in/Check-out Control"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"propertySelection",value:"all",checked:se==="all",onChange:me=>X(me.target.value),className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:["All Properties (",ge.length,")"]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"propertySelection",value:"selected",checked:se==="selected",onChange:me=>X(me.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Select Properties"})]})]}),se==="selected"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>Y(ge.map(me=>me.id)),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>Y([]),className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"}),e.jsxs("span",{className:"text-xs text-gray-500 self-center",children:[K.length," selected"]})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:ge.map(me=>e.jsxs("label",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",checked:K.includes(me.id),onChange:De=>{De.target.checked?Y([...K,me.id]):Y(K.filter(Ze=>Ze!==me.id))},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:me.name})]},me.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{name:"date",type:"date",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"price-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ()"}),e.jsx("input",{name:"price",type:"number",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"minimum-stay-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stay (nights)"}),e.jsx("input",{name:"minimumStay",type:"number",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"maintenance-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maintenance Type"}),e.jsx("input",{name:"maintenanceType",type:"text",placeholder:"e.g., HVAC, Plumbing, Electrical",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{id:"cleaning-field",className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cleaning Type"}),e.jsx("input",{name:"cleaningType",type:"text",placeholder:"e.g., Deep Clean, Regular Clean, Post-Construction",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),e.jsx("div",{id:"coa-cod-field",className:"hidden",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Available"}),e.jsxs("select",{name:"checkInAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Available"}),e.jsxs("select",{name:"checkOutAvailable",className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason/Description"}),e.jsx("input",{name:"reason",type:"text",placeholder:"Optional reason or description",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{P(!1),X("all"),Y([])},className:"btn-outline btn-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary btn-sm",children:"Create Bulk Operation"})]})]})]})})]})},cA=()=>{const t=Hs(),{properties:r}=Bt(H=>H.properties),[s,a]=R.useState("automations"),[o,l]=R.useState([]),[d,u]=R.useState([]),[h,m]=R.useState([]),[p,v]=R.useState(!0),[N,y]=R.useState({}),[A,C]=R.useState(null),[S,L]=R.useState(!1),[E,P]=R.useState(!1),[F,O]=R.useState(!1),[se,X]=R.useState(!1),[K,Y]=R.useState(null),[ie,I]=R.useState(null),[q,U]=R.useState({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:null});R.useEffect(()=>{t(Ki())},[t]),R.useEffect(()=>{J()},[A]);const J=async()=>{v(!0);try{const Q={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},ue=A?`?propertyId=${A}`:"",[xe,Ee,me]=await Promise.all([fetch(`/automations${ue}`,{headers:Q}),fetch("/automations/templates",{headers:Q}),fetch("/automations/activity?limit=50",{headers:Q})]);if(xe.ok){const De=await xe.json();console.log("Automations data received:",De),l(De.automations||[])}else console.error("Automations request failed:",xe.status);if(Ee.ok){const De=await Ee.json();console.log("Templates data received:",De),u(De.templates||[])}else console.error("Templates request failed:",Ee.status);if(me.ok){const De=await me.json();console.log("Activities data received:",De),m(De.activities||[])}else console.error("Activities request failed:",me.status)}catch(H){console.error("Error fetching data:",H)}finally{v(!1)}},be=async H=>{y(Q=>({...Q,[`run-${H}`]:!0}));try{const Q=localStorage.getItem("token");(await fetch(`/automations/${H}/run`,{method:"POST",headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}})).ok&&await J()}catch(Q){console.error("Error running automation:",Q)}finally{y(Q=>({...Q,[`run-${H}`]:!1}))}},ge=H=>{const Q=o.find(ue=>ue.id===H);Q&&(Y(Q),O(!0))},T=H=>{const Q=o.find(ue=>ue.id===H);Q&&(I(Q),X(!0))},re=()=>{U({name:"",description:"",type:"saft_generation",schedule:"0 9 2 * *",config:{emailNotification:!0,autoFix:!1},propertyId:A}),L(!0)},fe=async()=>{try{const H=localStorage.getItem("token");(await fetch("/automations",{method:"POST",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"},body:JSON.stringify(q)})).ok?(L(!1),await J()):console.error("Failed to create automation")}catch(H){console.error("Error creating automation:",H)}},Se=async H=>{y(Q=>({...Q,[`template-${H}`]:!0}));try{const Q=localStorage.getItem("token");(await fetch(`/automations/templates/${H}/create`,{method:"POST",headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}})).ok&&(await J(),P(!1))}catch(Q){console.error("Error creating from template:",Q)}finally{y(Q=>({...Q,[`template-${H}`]:!1}))}},ee=H=>{switch(H){case"saft_generation":return Ji;case"siba_alerts":return Nd;case"calendar_sync":return Al;default:return hp}},D=H=>{switch(H){case"saft_generation":return"bg-blue-100 text-blue-800";case"siba_alerts":return"bg-orange-100 text-orange-800";case"calendar_sync":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},$=H=>{switch(H){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"disabled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=H=>{switch(H){case"success":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ne=H=>new Date(H).toLocaleDateString();return p?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"h-12 w-12 animate-spin text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading automations..."})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Automations"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automate your property management workflows"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(lp,{className:"h-4 w-4 mr-2"}),"Templates"]}),e.jsxs("button",{onClick:re,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Create Automation"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsx($a,{properties:r,selectedId:A,onChange:C,placeholder:"All Properties"})]})})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"automations",name:"My Automations",icon:hp},{id:"templates",name:"Templates",icon:lp},{id:"activity",name:"Activity",icon:Al}].map(H=>{const Q=H.icon;return e.jsxs("button",{onClick:()=>a(H.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${s===H.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),H.name]},H.id)})})}),s==="automations"&&e.jsx("div",{className:"space-y-6",children:o&&o.length>0?o.map(H=>{const Q=ee(H.type);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(H.type)}`,children:H.type}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$(H.status)}`,children:H.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Schedule: ",H.schedule]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:H.name}),e.jsx("p",{className:"text-gray-700 mb-3",children:H.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Runs: ",H.runCount]}),H.lastRunAt&&e.jsxs("span",{children:["Last run: ",ne(H.lastRunAt)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>be(H.id),disabled:N[`run-${H.id}`],className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[N[`run-${H.id}`]?e.jsx(ps,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx($3,{className:"h-4 w-4 mr-2"}),N[`run-${H.id}`]?"Running...":"Run"]}),e.jsxs("button",{onClick:()=>ge(H.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>T(H.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(_l,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},H.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(hp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No automations found"}),e.jsx("p",{className:"text-gray-500",children:"Create your first automation to get started."})]})}),s==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d&&d.length>0?d.map(H=>{const Q=ee(H.type);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(H.type)}`,children:H.type})]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Template"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:H.name}),e.jsx("p",{className:"text-gray-700 mb-4 flex-grow",children:H.description}),e.jsxs("button",{onClick:()=>Se(H.id),disabled:N[`template-${H.id}`],className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[N[`template-${H.id}`]?e.jsx(ps,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(sa,{className:"h-4 w-4 mr-2"}),N[`template-${H.id}`]?"Creating...":"Use Template"]})]})},H.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(lp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates available"}),e.jsx("p",{className:"text-gray-500",children:"Templates will appear here when available."})]})})}),s==="activity"&&e.jsx("div",{className:"space-y-6",children:h&&h.length>0?h.map(H=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(H.status)}`,children:H.status}),e.jsx("span",{className:"text-sm text-gray-500",children:ne(H.timestamp)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:H.automationName}),e.jsx("p",{className:"text-gray-700 mb-2",children:H.message}),H.details&&e.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-800",children:H.automationId==="saft_monthly"&&H.details.saftDownloadUrl?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SAFT-T File Generated"}),e.jsxs("p",{className:"text-gray-600",children:["Property ",H.details.propertyId," - ",H.details.year,"-",H.details.month?.toString().padStart(2,"0")]})]}),e.jsxs("button",{onClick:()=>{const Q=document.createElement("a");Q.href=H.details.saftDownloadUrl,Q.download=H.details.fileName,Q.click()},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Download SAFT-T"]})]}):e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(H.details,null,2)})})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},H.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Al,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity found"}),e.jsx("p",{className:"text-gray-500",children:"Activity logs will appear here when automations run."})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Automation"})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:q.name,onChange:H=>U({...q,name:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Enter automation name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:q.description,onChange:H=>U({...q,description:H.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Describe what this automation does"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:q.type,onChange:H=>U({...q,type:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"saft_generation",children:"SAFT-T Generation"}),e.jsx("option",{value:"siba_alerts",children:"SIBA Alerts"}),e.jsx("option",{value:"calendar_sync",children:"Calendar Sync"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:q.schedule,onChange:H=>U({...q,schedule:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),e.jsxs("select",{value:q.propertyId||"",onChange:H=>U({...q,propertyId:H.target.value?Number(H.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Properties"}),r&&r.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),e.jsx("textarea",{value:JSON.stringify(q.config,null,2),onChange:H=>{try{const Q=JSON.parse(H.target.value);U({...q,config:Q})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{onClick:fe,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Create Automation"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automation Templates"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d&&d.length>0?d.map(H=>{const Q=ee(H.type);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(H.type)}`,children:H.type})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:H.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:H.description}),e.jsx("button",{onClick:()=>Se(H.id),disabled:N[`template-${H.id}`],className:"w-full inline-flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:N[`template-${H.id}`]?"Creating...":"Use Template"})]},H.id)}):e.jsx("div",{className:"col-span-2 text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No templates available"})})})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:()=>P(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"})})]})}),F&&K&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const H=ee(K.type);return e.jsx(H,{className:"h-6 w-6 text-gray-400"})})(),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:K.name}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(K.type)}`,children:K.type}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$(K.status)}`,children:K.status})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:K.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Schedule"}),e.jsx("p",{className:"text-gray-600",children:K.schedule})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Run Count"}),e.jsx("p",{className:"text-gray-600",children:K.runCount})]})]}),K.lastRunAt&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Last Run"}),e.jsx("p",{className:"text-gray-600",children:ne(K.lastRunAt)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Configuration"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 overflow-x-auto",children:JSON.stringify(K.config,null,2)})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Close"}),e.jsx("button",{onClick:()=>T(K.id),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Automation"})]})]})}),se&&ie&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const H=ee(ie.type);return e.jsx(H,{className:"h-6 w-6 text-gray-400"})})(),e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Edit ",ie.name]})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:ie.name,onChange:H=>I({...ie,name:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:ie.description,onChange:H=>I({...ie,description:H.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:ie.schedule,onChange:H=>I({...ie,schedule:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"0 9 2 * *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: minute hour day month day-of-week"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:ie.status,onChange:H=>I({...ie,status:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration (JSON)"}),e.jsx("textarea",{value:JSON.stringify(ie.config,null,2),onChange:H=>{try{const Q=JSON.parse(H.target.value);I({...ie,config:Q})}catch{}},rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 font-mono text-sm"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>X(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{const H=localStorage.getItem("token");(await fetch(`/automations/${ie.id}`,{method:"PUT",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"},body:JSON.stringify(ie)})).ok?(X(!1),await J()):console.error("Failed to update automation")}catch(H){console.error("Error updating automation:",H)}},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"})]})]})})]})})},dA=()=>{const{user:t}=Bt(O=>O.auth);bi();const[r,s]=R.useState(()=>{const O=new Date;return(O.getMonth()===0||O.getDate()<=7)&&O.getMonth()===0?O.getFullYear()-1:O.getFullYear()}),[a,o]=R.useState(()=>{const O=new Date,se=O.getDate()<=7;return O.getMonth()===0&&se?12:se?O.getMonth():O.getMonth()+1}),[l,d]=R.useState(""),[u,h]=R.useState(null),[m,p]=R.useState([]),[v,N]=R.useState(!1),[y,A]=R.useState(null),[C,S]=R.useState(""),L=Array.from({length:5},(O,se)=>new Date().getFullYear()-2+se),E=[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}];R.useEffect(()=>{(async()=>{try{let se=[];try{se=await sm(),console.log(" Admin: Fetched all owners successfully")}catch{console.log(" Not admin or getAllOwners failed, using current user companies only")}let X=t?.companies;console.log(" Initial companies from Redux:",X);try{const K=await Rf.getUserProfile();X=K.companies,console.log(" Fetched user profile companies from API:",X),console.log(" User profile full data:",K)}catch(K){console.error(" Failed to fetch user profile:",K),console.log(" Using Redux companies as fallback")}if(t?.role!=="admin"||se.length===0)if(X&&X.length>0){const K={_id:t?.id||"current-user",name:t?.name||"Current User",email:t?.email||"",phone:t?.phone,role:t?.role||"user",isVerified:t?.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:X,createdAt:t?.createdAt||new Date().toISOString(),updatedAt:t?.updatedAt||new Date().toISOString()};p([K]),console.log(" Owner user: Using own companies only")}else p([]),console.log(" No companies found for current user");else{if(X&&X.length>0){const K={_id:t?.id||"current-user",name:t?.name||"Current User (Me)",email:t?.email||"",phone:t?.phone,role:t?.role||"user",isVerified:t?.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:X,createdAt:t?.createdAt||new Date().toISOString(),updatedAt:t?.updatedAt||new Date().toISOString()};se.unshift(K)}p(se),console.log(" Admin: Final owners list with all users")}console.log(" Total companies available:",m.length>0?m.reduce((K,Y)=>K+(Y.companies?.length||0),0):0)}catch(se){if(console.error(" Error in fetchOwners:",se),t?.companies&&t.companies.length>0){const X={_id:t.id||"current-user",name:t.name||"Current User",email:t.email||"",phone:t.phone,role:t.role||"user",isVerified:t.isVerified||!1,hasApiKeys:!1,apiKeysActive:!1,companies:t.companies,createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||new Date().toISOString()};p([X])}}})()},[t]),R.useEffect(()=>{if(u){const O=m.find(se=>se._id===u.ownerId);if(O&&O.companies&&O.companies[u.companyIndex]){const se=O.companies[u.companyIndex];d(se.nif)}}},[u,m]);const P=async()=>{if(!l){S("Please select a company or enter invoicing VAT ID");return}N(!0),S(""),A(null);try{const O=new URLSearchParams({year:r.toString(),month:a.toString(),invoicing_nif:l}),se=await Ft.get(`/saft/get?${O}`);A(se)}catch(O){console.error("SAFT retrieval error:",O);const se=O?.response?.data?.message||O?.message||"";O?.response?.status===404||se.includes("not found")||se.includes("Invalid response")?S(`SAFT file not generated for ${E.find(X=>X.value===a)?.name} ${r}. Please try selecting an earlier month.`):O?.response?.status===400?S(se||"Invalid request. Please check your company selection."):O?.response?S(se||"Error retrieving SAFT file. Please try again."):S("Network error occurred. Please check your connection.")}finally{N(!1)}},F=()=>{if(y?.saft){const O=atob(y.saft),se=new Array(O.length);for(let I=0;I<O.length;I++)se[I]=O.charCodeAt(I);const X=new Uint8Array(se),K=new Blob([X],{type:"application/xml"}),Y=window.URL.createObjectURL(K),ie=document.createElement("a");ie.href=Y,ie.download=`SAFT-T_${r}_${a}.xml`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),window.URL.revokeObjectURL(Y)}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(o0,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SAFT-T Retrieval"})]}),e.jsx("p",{className:"text-gray-600",children:"Retrieve existing SAFT (Sistema de Apuramento de Faturas e Transaes) files for Portuguese tax compliance."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Selection"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:u?`${u.ownerId}-${u.companyIndex}`:"",onChange:O=>{if(console.log(" Dropdown changed, value:",O.target.value),O.target.value){const se=O.target.value.lastIndexOf("-"),X=O.target.value.substring(0,se),K=parseInt(O.target.value.substring(se+1));console.log(" Setting selected company:",{ownerId:X,companyIndex:K}),h({ownerId:X,companyIndex:K})}else console.log(" Clearing selected company"),h(null),d("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a company..."}),m.map(O=>O.companies?.map((se,X)=>{const K=`${O._id}-${X}`;return e.jsxs("option",{value:K,children:[se.name," (",se.nif,") - ",O.name]},K)}))]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Or enter NIF manually:"}),e.jsx("input",{type:"text",value:l,onChange:O=>{d(O.target.value),h(null)},placeholder:"e.g., 234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(gs,{className:"w-4 h-4 inline mr-2"}),"Year"]}),e.jsx("select",{value:r,onChange:O=>s(parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:L.map(O=>e.jsx("option",{value:O,children:O},O))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{value:a,onChange:O=>o(parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:E.map(O=>e.jsx("option",{value:O.value,children:O.name},O.value))})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>P(),disabled:v||!l,className:"w-full md:w-auto px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Retrieving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(o0,{className:"w-4 h-4"}),e.jsx("span",{children:"Retrieve SAFT-T"})]})})}),C&&e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start space-x-3",children:[e.jsx(ia,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:"SAFT File Not Available"}),e.jsx("p",{className:"text-sm text-amber-800",children:C}),C.includes("not generated")&&e.jsx("p",{className:"text-xs text-amber-700 mt-2",children:" Tip: SAFT files are typically generated at the end of each month. Try selecting a previous month."})]})]}),y&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-start space-x-3",children:[e.jsx($s,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"SAFT-T Retrieved Successfully"}),e.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Generated:"})," ",new Date(y.generated).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sent:"})," ",new Date(y.sent).toLocaleString()]})]}),e.jsxs("button",{onClick:()=>F(),className:"mt-3 inline-flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[e.jsx(kc,{className:"w-4 h-4"}),e.jsx("span",{children:"Download SAFT-T File"})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"About SAFT-T"}),e.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:"The SAFT-T (Sistema de Apuramento de Faturas e Transaes - Transmisso) is a Portuguese tax compliance system that requires businesses to submit detailed transaction data to the tax authorities. This tool helps you retrieve existing SAFT-T files for the specified period and invoicing VAT ID."}),e.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mt-2",children:"The SAFT-T file contains all invoice and transaction data and can be submitted directly to the Portuguese tax authorities."})]})]})},uA=async t=>(await Ft.get(`/api/properties/${t}`)).data,hA=()=>{const{propertyId:t}=_0(),r=bi(),[s,a]=R.useState(null),[o,l]=R.useState(!0),[d,u]=R.useState("");R.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(t){l(!0),u("");try{const p=await uA(t);a(p)}catch(p){u(p.message||"Failed to fetch property details")}finally{l(!1)}}},m=()=>{r(-1)};return o?e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q3,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600",children:"Loading property details..."})]})})}):d?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(bc,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ia,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error Loading Property"}),e.jsx("p",{className:"text-red-700 mt-2",children:d}),e.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Try Again"})]})]})})]}):s?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(bc,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(mn,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.property_name})]}),e.jsxs("p",{className:"text-gray-600",children:["Property ID: ",s.id]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(mn,{className:"w-5 h-5 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.property_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property ID"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.activated==="1"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.activated==="1"?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.owner})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ku,{className:"w-5 h-5 mr-2 text-blue-600"}),"Location"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.cp})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.localidade})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coordinates"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.lat,", ",s.lon]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(W2,{className:"w-5 h-5 mr-2 text-blue-600"}),"Tax Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIF (Tax ID)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.nif})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Invoicing NIF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.invoicing_nif})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Order"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.seforder})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SEF Code"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.sefcode})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(gs,{className:"w-5 h-5 mr-2 text-blue-600"}),"Check-in/Check-out Times"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-in Time"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.default_checkin,":00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Check-out Time"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.default_checkout,":00"]})]})]})]})]}),e.jsxs("div",{className:"mt-8 flex space-x-4",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Data"}),e.jsx("button",{onClick:()=>r(`/saft?property=${s.id}`),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Generate SAFT-T"})]})]}):e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Property Not Found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The requested property could not be found."})]})})},fA=({onClose:t})=>{const[r,s]=R.useState([]),[a,o]=R.useState(""),[l,d]=R.useState(""),[u,h]=R.useState(""),[m,p]=R.useState(null),[v,N]=R.useState(!1),[y,A]=R.useState("");R.useEffect(()=>{C();const P=new Date,F=new Date(P.getFullYear(),P.getMonth(),1),O=new Date(P.getFullYear(),P.getMonth()+1,0);d(F.toISOString().split("T")[0]),h(O.toISOString().split("T")[0])},[]);const C=async()=>{try{const P=await Qu();s(P)}catch(P){console.error("Error fetching properties:",P)}},S=async()=>{if(!a||!l||!u){A("Please select a property and date range");return}N(!0),A("");try{const P=await ub(parseInt(a),l,u);p(P)}catch(P){A(P.response?.data?.message||"Error generating statement")}finally{N(!1)}},L=P=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(P),E=()=>{if(!m)return;const P=[["Property Statement",""],["Property ID",m.property.id],["Property Name",m.property.name],["Owner",m.property.owner],["Period",`${m.period.startDate} to ${m.period.endDate}`],[""],["Calculations","Amount ()"],["Gross Amount",m.calculations.grossAmount.toFixed(2)],["Portal Commission (15%)",m.calculations.portalCommission.toFixed(2)],["Cleaning Fee (75  invoices)",m.calculations.cleaningFee.toFixed(2)],["Management Commission",m.calculations.managementCommission.toFixed(2)],["Final Owner Amount",m.calculations.finalOwnerAmount.toFixed(2)],[""],["Invoice Count",m.invoiceCount],[""],["Invoices",""],["Invoice ID","Name","Value ()","Date","Series"],...m.invoices.map(X=>[X.id,X.name,X.value.toFixed(2),X.date,X.series])].map(X=>X.join(",")).join(`
`),F=new Blob([P],{type:"text/csv"}),O=window.URL.createObjectURL(F),se=document.createElement("a");se.href=O,se.download=`owner-statement-${m.property.id}-${m.period.startDate}-${m.period.endDate}.csv`,se.click(),window.URL.revokeObjectURL(O)};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Statement"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and view property owner financial statements"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Property"}),e.jsxs("select",{value:a,onChange:P=>o(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Choose a property..."}),r.map(P=>e.jsxs("option",{value:P.id,children:[P.name," (ID: ",P.id,") - ",P.isAdminOwned?"Admin":P.owner?.name||"Unassigned"]},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:l,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(gs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:u,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(gs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Management Commission Rate (Ignored for admin properties)"}),e.jsxs("select",{value:m?.property?.isAdminOwned?"0":"25",disabled:m?.property?.isAdminOwned,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m?.property?.isAdminOwned?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"0",children:"0% (Admin Properties)"}),e.jsx("option",{value:"25",children:"25% (Owner Properties)"})]}),m?.property?.isAdminOwned&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin-owned property (0% commission)"}),!m?.property?.isAdminOwned&&m&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Owner-owned property (25% commission)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:S,disabled:v||!a||!l||!u,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ji,{className:"w-4 h-4 mr-2"}),"Generate Statements"]})})})]}),y&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600",children:y})})]}),m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Owner Statement Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Calculation Base:"}),e.jsx("span",{className:"font-semibold",children:"Invoices"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Gross Amount:"}),e.jsx("span",{className:"font-semibold",children:L(m.calculations.grossAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Portal Commission (15%):"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.portalCommission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Cleaning Fee (75  ",m.invoiceCount,"):"]}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.cleaningFee)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Management Commission (",m.property.isAdminOwned?"0%":"25%","):"]}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(m.calculations.managementCommission)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Additional Fees:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Expenses:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",L(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-green-50 rounded-lg px-4",children:[e.jsx("span",{className:"text-green-600 font-bold text-lg",children:"Final Owner Amount:"}),e.jsx("span",{className:"text-green-600 font-bold text-lg",children:L(m.calculations.finalOwnerAmount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Name:"}),e.jsx("span",{className:"font-semibold",children:m.property.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property ID:"}),e.jsx("span",{className:"font-semibold",children:m.property.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Owner:"}),e.jsx("span",{className:"font-semibold",children:m.property.owner})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Period:"}),e.jsxs("span",{className:"font-semibold",children:[m.period.startDate," - ",m.period.endDate]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Invoice Count:"}),e.jsx("span",{className:"font-semibold",children:m.invoiceCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Property Type:"}),e.jsx("span",{className:"font-semibold",children:m.property.isAdminOwned?"Admin Property":"Owner Property"})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:E,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})]})})},mA=({onSuccess:t,onCancel:r})=>{const s=$=>$==="accountant"?"accountant":"owner",[a,o]=R.useState({name:"",email:"",phone:"",hostkitApiId:"",hostkitApiKey:"",hostkitApiSecret:"",password:"",role:"owner",companies:[{name:"",nif:""}]}),[l,d]=R.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",amenities:"WiFi, Kitchen, Pool, Parking"}),[u,h]=R.useState(!1),[m,p]=R.useState(!1),[v,N]=R.useState(""),[y,A]=R.useState([]),[C,S]=R.useState(!1),[L,E]=R.useState(!1),[P,F]=R.useState(!1),[O,se]=R.useState([]),[X,K]=R.useState([]),[Y,ie]=R.useState(!1),[I,q]=R.useState(!1),U=()=>{o($=>({...$,companies:[...$.companies||[],{name:"",nif:""}]}))},J=$=>{o(W=>({...W,companies:W.companies?.filter((ne,H)=>H!==$)||[]}))},be=($,W,ne)=>{o(H=>({...H,companies:H.companies?.map((Q,ue)=>ue===$?{...Q,[W]:ne}:Q)||[]}))};R.useEffect(()=>{a.role==="accountant"&&(async()=>{try{const W=await Qu();K(W)}catch(W){console.error("Error fetching properties:",W)}})()},[a.role]);const ge=async()=>{if(!l.id){xr.error("Please enter a Hostaway Property ID first");return}ie(!0),N(""),q(!1);try{const $=await Ft.get(`/property-management/fetch-hostaway/${l.id}`);if($.success&&$.data){const W=$.data,ne=[W.address?.street,W.address?.city,W.address?.state,W.address?.country].filter(Boolean),H=ne.length>0?ne.join(", "):W.address?.full||l.address;d(Q=>({...Q,name:W.name||Q.name,address:H,bedrooms:W.bedrooms||Q.bedrooms,bathrooms:W.bathrooms||Q.bathrooms,maxGuests:W.accommodates||Q.maxGuests,type:W.propertyType||Q.type})),q(!0),xr.success("Property details fetched from Hostaway!"),console.log(" Fetched property details for owner form:",W)}}catch($){console.error(" Error fetching from Hostaway:",$);const W=$.response?.data?.message||$.message||"Failed to fetch property details";N(W),xr.error(W)}finally{ie(!1)}},T=async $=>{$.preventDefault(),p(!0),N("");try{console.log("Creating user with data:",a);const W=a.companies?.filter(Q=>Q.name.trim()!==""&&Q.nif.trim()!=="")||[],ne={...a,companies:W,...u&&l.name&&l.id&&{propertyData:l},...a.role==="accountant"&&O.length>0&&{assignedProperties:O}},H=await H0(ne);if(console.log("User created successfully:",H),!H||!H._id)throw new Error("Invalid response from createOwner API");if(u&&l.name&&l.id&&(console.log("Creating property with data:",l),console.log("Property created and assigned to owner:",H._id),y.length>0))try{S(!0);const{uploadPropertyImages:Q}=await oa(async()=>{const{uploadPropertyImages:ue}=await Promise.resolve().then(()=>vv);return{uploadPropertyImages:ue}},void 0);await Q(l.id,y),console.log("Images uploaded successfully for property:",l.id),A([])}catch(Q){console.error("Error uploading images:",Q)}finally{S(!1)}t()}catch(W){console.error("Error creating owner:",W),N(W.response?.data?.message||W.message||"Failed to create owner")}finally{p(!1)}},re=$=>{o(W=>({...W,[$.target.name]:$.target.value}))},fe=$=>{const W=Array.from($.target.files||[]);A(ne=>[...ne,...W]),console.log("Images selected for upload:",W.map(ne=>ne.name))},Se=$=>{A(W=>W.filter((ne,H)=>H!==$))},ee=$=>{se($?X.map(W=>W._id):[])},D=($,W)=>{se(W?ne=>[...ne,$]:ne=>ne.filter(H=>H!==$))};return e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:v}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:re,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${a.role==="accountant"?"accountant":"owner"} name`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:re,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:re,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Information (for SAFT)"}),e.jsxs("button",{type:"button",onClick:U,className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(sa,{className:"h-4 w-4"}),"Add Company"]})]}),a.companies?.map(($,W)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Company ",W+1]}),a.companies&&a.companies.length>1&&e.jsxs("button",{type:"button",onClick:()=>J(W),className:"flex items-center gap-1 px-2 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(Y2,{className:"h-4 w-4"}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:$.name,onChange:ne=>be(W,"name",ne.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIF *"}),e.jsx("input",{type:"text",value:$.nif,onChange:ne=>be(W,"nif",ne.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter NIF number"})]})]})]},W))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),e.jsxs("select",{name:"role",value:a.role,onChange:$=>o(W=>({...W,role:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"accountant",children:"Accountant"})]})]}),a.role==="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API ID"}),e.jsx("input",{type:"text",name:"hostkitApiId",value:a.hostkitApiId||"",onChange:re,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Hostkit API ID (e.g., 10028)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:P?"text":"password",name:"hostkitApiKey",value:a.hostkitApiKey,onChange:re,className:"w-full px-3 py-2 pr-12 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Hostkit API Key"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>F(!P),children:P?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:L?"text":"password",name:"password",value:a.password,onChange:re,className:"w-full px-3 py-2 pr-12 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter password for this ${a.role==="accountant"?"accountant":"owner"}`}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>E(!L),children:L?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-6",children:[a.role==="owner"&&e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeProperty",checked:u,onChange:$=>h($.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"includeProperty",className:"ml-2 text-sm font-medium text-gray-700",children:["Also create a property for this ",s(a.role)]})]}),a.role==="accountant"&&e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Assign Properties to Accountant"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:O.length===X.length&&X.length>0,onChange:$=>ee($.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-medium text-gray-700",children:["Select All Properties (",X.length," available)"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:X.map($=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`property-${$._id}`,checked:O.includes($._id),onChange:W=>D($._id,W.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:`property-${$._id}`,className:"ml-2 text-sm text-gray-700",children:[$.name," (ID: ",$.id,")"]})]},$._id))}),O.length>0&&e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:[" ",O.length," property(ies) selected"]})]}),u&&e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Property Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway Property ID *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:l.id,onChange:$=>d(W=>({...W,id:$.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 392777",required:u}),e.jsx("button",{type:"button",onClick:ge,disabled:Y||!l.id,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap transition-colors",children:Y?e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4 animate-spin"}),"Fetching..."]}):I?e.jsxs(e.Fragment,{children:[e.jsx($s,{className:"h-4 w-4"}),"Fetched"]}):e.jsxs(e.Fragment,{children:[e.jsx(kc,{className:"h-4 w-4"}),"Fetch"]})})]}),I&&e.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center gap-1",children:[e.jsx($s,{className:"h-4 w-4"}),"Property details loaded from Hostaway."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{value:l.type,onChange:$=>d(W=>({...W,type:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:$=>d(W=>({...W,name:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property name",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",value:l.address,onChange:$=>d(W=>({...W,address:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property address",required:u})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",min:"0",value:l.bedrooms,onChange:$=>d(W=>({...W,bedrooms:parseInt($.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",min:"0",value:l.bathrooms,onChange:$=>d(W=>({...W,bathrooms:parseInt($.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",min:"1",value:l.maxGuests,onChange:$=>d(W=>({...W,maxGuests:parseInt($.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:u})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",value:l.hostkitId,onChange:$=>d(W=>({...W,hostkitId:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10030",required:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:fe,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),y.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(($,W)=>e.jsxs("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{className:"mr-2",children:$.name}),e.jsx("button",{type:"button",onClick:()=>Se(W),className:"text-red-500 hover:text-red-700",children:e.jsx(as,{className:"h-4 w-4"})})]},W))})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||C,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:m?"Creating...":C?"Uploading Images...":u?`Create ${a.role==="accountant"?"Accountant":"Owner"} & Property`:`Create ${a.role==="accountant"?"Accountant":"Owner"}`})]})]})},pA=({owner:t,onSuccess:r,onCancel:s})=>{const[a,o]=R.useState({name:t.name,email:t.email,phone:t.phone||"",role:t.role,companies:t.companies||[{name:"",nif:""}]}),[l,d]=R.useState(!1),[u,h]=R.useState(""),m=()=>{o(A=>({...A,companies:[...A.companies||[],{name:"",nif:""}]}))},p=A=>{o(C=>({...C,companies:C.companies?.filter((S,L)=>L!==A)||[]}))},v=(A,C,S)=>{o(L=>({...L,companies:L.companies?.map((E,P)=>P===A?{...E,[C]:S}:E)||[]}))},N=A=>{const{name:C,value:S}=A.target;o(L=>({...L,[C]:S}))},y=async A=>{A.preventDefault(),d(!0),h("");try{const C=a.companies?.filter(E=>E.name.trim()!==""&&E.nif.trim()!=="")||[],S={...a,companies:C},{updateOwner:L}=await oa(async()=>{const{updateOwner:E}=await Promise.resolve().then(()=>k6);return{updateOwner:E}},void 0);await L(t._id,S),console.log("Owner updated successfully"),r()}catch(C){console.error("Error updating owner:",C),h(C.message||"Failed to update owner")}finally{d(!1)}};return e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter owner name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Information (for SAFT)"}),e.jsxs("button",{type:"button",onClick:m,className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(sa,{className:"h-4 w-4"}),"Add Company"]})]}),a.companies?.map((A,C)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Company ",C+1]}),a.companies&&a.companies.length>1&&e.jsxs("button",{type:"button",onClick:()=>p(C),className:"flex items-center gap-1 px-2 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(Y2,{className:"h-4 w-4"}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:A.name,onChange:S=>v(C,"name",S.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIF *"}),e.jsx("input",{type:"text",value:A.nif,onChange:S=>v(C,"nif",S.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter NIF number"})]})]})]},C))]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Updating...":"Update Owner"})]})]})},gA=({owners:t,onSuccess:r,onCancel:s})=>{const[a,o]=R.useState({id:"",name:"",address:"",type:"Apartment",bedrooms:1,bathrooms:1,maxGuests:2,hostkitId:"",hostkitApiKey:"",status:"active",amenities:["WiFi","Kitchen","Pool","Parking"],owner:""}),[l,d]=R.useState("WiFi, Kitchen, Pool, Parking"),[u,h]=R.useState(!1),[m,p]=R.useState(""),[v,N]=R.useState([]),[y,A]=R.useState(!1),[C,S]=R.useState(!1),[L,E]=R.useState(!1),[P,F]=R.useState(!1),O=async Y=>{Y.preventDefault(),h(!0),p("");try{const ie={...a,id:parseInt(a.id)||0,amenities:Array.isArray(a.amenities)?a.amenities:a.amenities.split(",").map(U=>U.trim()).filter(U=>U)};console.log("Creating property with data:",ie);const{createProperty:I}=await oa(async()=>{const{createProperty:U}=await Promise.resolve().then(()=>_6);return{createProperty:U}},void 0),q=await I(ie);if(console.log("Property created successfully:",q),v.length>0)try{A(!0);const{uploadPropertyImages:U}=await oa(async()=>{const{uploadPropertyImages:J}=await Promise.resolve().then(()=>vv);return{uploadPropertyImages:J}},void 0);await U(ie.id.toString(),v),console.log(" Images uploaded successfully for new property:",ie.id),N([])}catch(U){console.error(" Error uploading images:",U)}finally{A(!1)}r()}catch(ie){p(ie.message||"Failed to create property")}finally{h(!1)}},se=Y=>{const{name:ie,value:I}=Y.target;o(q=>({...q,[ie]:ie==="bedrooms"||ie==="bathrooms"||ie==="maxGuests"?parseInt(I)||0:I}))},X=Y=>{Y.target.files&&N(Array.from(Y.target.files))},K=async()=>{if(!a.id){xr.error("Please enter a Hostaway Property ID first");return}E(!0),p(""),F(!1);try{const Y=await Ft.get(`/property-management/fetch-hostaway/${a.id}`);if(Y.success&&Y.data){const ie=Y.data,I=[ie.address?.street,ie.address?.city,ie.address?.state,ie.address?.country].filter(Boolean),q=I.length>0?I.join(", "):ie.address?.full||a.address;o(U=>({...U,name:ie.name||U.name,address:q,bedrooms:ie.bedrooms||U.bedrooms,bathrooms:ie.bathrooms||U.bathrooms,maxGuests:ie.accommodates||U.maxGuests,type:ie.propertyType||U.type})),F(!0),xr.success("Property details fetched successfully from Hostaway!"),console.log(" Fetched Hostaway property details:",ie)}}catch(Y){console.error(" Error fetching from Hostaway:",Y);const ie=Y.response?.data?.message||Y.message||"Failed to fetch property details from Hostaway";p(ie),xr.error(ie)}finally{E(!1)}};return e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:m}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostaway Property ID *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"id",value:a.id,onChange:se,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 392777",required:!0}),e.jsx("button",{type:"button",onClick:K,disabled:L||!a.id,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap transition-colors",children:L?e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4 animate-spin"}),"Fetching..."]}):P?e.jsxs(e.Fragment,{children:[e.jsx($s,{className:"h-4 w-4"}),"Fetched"]}):e.jsxs(e.Fragment,{children:[e.jsx(kc,{className:"h-4 w-4"}),"Fetch from Hostaway"]})})]}),P&&e.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center gap-1",children:[e.jsx($s,{className:"h-4 w-4"}),"Property details loaded from Hostaway. Review and edit if needed."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),e.jsxs("select",{name:"type",value:a.type,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"Apartment",children:"Apartment"}),e.jsx("option",{value:"House",children:"House"}),e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Condominium",children:"Condominium"}),e.jsx("option",{value:"Penthouse",children:"Penthouse"}),e.jsx("option",{value:"Studio",children:"Studio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:se,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),e.jsxs("select",{name:"owner",value:a.owner,onChange:se,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),t.map(Y=>e.jsx("option",{value:Y._id,children:Y.name},Y._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:a.address,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter property address",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms *"}),e.jsx("input",{type:"number",name:"bedrooms",value:a.bedrooms,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms *"}),e.jsx("input",{type:"number",name:"bathrooms",value:a.bathrooms,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests *"}),e.jsx("input",{type:"number",name:"maxGuests",value:a.maxGuests,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Hostkit Integration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit ID *"}),e.jsx("input",{type:"text",name:"hostkitId",value:a.hostkitId,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"e.g., 10030",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hostkit API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:C?"text":"password",name:"hostkitApiKey",value:a.hostkitApiKey,onChange:se,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",required:!0}),e.jsx("button",{type:"button",onClick:()=>S(!C),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C?e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Images"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:X,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),v.length>0&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[v.length," image(s) selected"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Creating...":y?"Uploading Images...":"Create Property"})]})]})},xA=({accountant:t,availableProperties:r,onUpdate:s,onCancel:a})=>{const[o,l]=R.useState({name:t.name,email:t.email,phone:t.phone||"",password:""}),[d,u]=R.useState(t.assignedProperties.map(S=>S._id)),[h,m]=R.useState(!1),[p,v]=R.useState(!1),N=async S=>{S.preventDefault(),v(!0);try{const L={name:o.name,email:o.email,phone:o.phone,...o.password&&{password:o.password},assignedProperties:d};await s(L)}catch(L){console.error("Error updating accountant:",L)}finally{v(!1)}},y=S=>{l(L=>({...L,[S.target.name]:S.target.value}))},A=S=>{u(S?r.map(L=>L._id):[])},C=(S,L)=>{u(L?E=>[...E,S]:E=>E.filter(P=>P!==S))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit Accountant"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update accountant details and property assignments"})]}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx(as,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ra,{className:"h-5 w-5 mr-2 text-blue-600"}),"Accountant Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter accountant name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ed,{className:"h-5 w-5 mr-2 text-green-600"}),"Security Settings"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password (Leave blank to keep current)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",name:"password",value:o.password,onChange:y,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter new password (optional)"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(mn,{className:"h-5 w-5 mr-2 text-purple-600"}),"Property Assignment"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"selectAllProperties",checked:d.length===r.length&&r.length>0,onChange:S=>A(S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"selectAllProperties",className:"ml-2 text-sm font-semibold text-gray-700",children:"Select All Properties"})]}),e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[r.length," available"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-gray-200 rounded-lg p-4 bg-white",children:r.map(S=>e.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:[e.jsx("input",{type:"checkbox",id:`property-${S._id}`,checked:d.includes(S._id),onChange:L=>C(S._id,L.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:`property-${S._id}`,className:"ml-3 text-sm text-gray-700 flex-1",children:[e.jsx("div",{className:"font-medium",children:S.name||S.title||"Unnamed Property"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",S.id||S._id,S.owner&&e.jsxs("span",{className:"ml-2",children:[" Owner: ",S.owner.name]})]})]})]},S._id))}),d.length>0&&e.jsx("div",{className:"mt-4 flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-sm text-green-700 font-medium",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),d.length," property(ies) selected"]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] border border-transparent rounded-lg hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-[#2563eb] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:p?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Accountant"})]})]})})]})})},yA=()=>{const{user:t}=Bt(Fe=>Fe.auth),[r,s]=R.useState(null),[a,o]=R.useState([]),[l,d]=R.useState([]),[u,h]=R.useState([]),[m,p]=R.useState("all"),[v,N]=R.useState("all"),[y,A]=R.useState(!0),[C,S]=R.useState(!1),[L,E]=R.useState(!1),[P,F]=R.useState(null),[O,se]=R.useState(!1),[X,K]=R.useState(!1),[Y,ie]=R.useState(!1),[I,q]=R.useState(null),[U,J]=R.useState(null),[be,ge]=R.useState(!1),[T,re]=R.useState(null),[fe,Se]=R.useState(!1);R.useEffect(()=>{ee()},[]),R.useEffect(()=>{D()},[m]);const ee=async()=>{try{A(!0),console.log("Fetching dashboard data...");const[Fe,st,dt]=await Promise.all([ob(),sm(),lb()]);console.log("Dashboard stats:",Fe),console.log("Owners data:",st),console.log("Accountants data:",dt),s(Fe),o(st),d(dt)}catch(Fe){console.error("Error fetching dashboard data:",Fe)}finally{A(!1)}},D=async()=>{try{const Fe=m==="all"?void 0:m;console.log(" fetchProperties called with selectedOwnerId:",m,"ownerId param:",Fe);const st=await Qu(Fe);console.log(" fetchProperties received:",st),Array.isArray(st)?(console.log(" fetchProperties received:",st.length,"properties"),console.log(" fetchProperties property owners:",st.map(dt=>({id:dt.id,name:dt.name,owner:dt.owner}))),h(st)):(console.error(" fetchProperties received non-array data:",st),h([]))}catch(Fe){console.error("Error fetching properties:",Fe),h([])}},$=Fe=>{console.log(" handleOwnerChange called. New ownerId:",Fe),console.log(" Current selectedOwnerId:",m),p(Fe)},W=()=>{if(m==="all")return"All Owners";if(m==="admin")return"Admin";const Fe=a.find(st=>st._id===m);return Fe?Fe.name:"Unknown Owner"},ne=()=>{if(v==="all")return"All Accountants";const Fe=l.find(st=>st._id===v);return Fe?Fe.name:"Unknown Accountant"},H=()=>v==="all"?l:l.filter(Fe=>Fe._id===v),Q=Fe=>{re(Fe),ge(!0)},ue=Fe=>{const st=document.querySelector("[data-property-management]");st?(st.scrollIntoView({behavior:"smooth"}),window.dispatchEvent(new CustomEvent("editProperty",{detail:{property:Fe}}))):alert("Please use the Property Management section below to edit properties.")},xe=async(Fe,st)=>{if(window.confirm(`Are you sure you want to delete "${st}"? This action cannot be undone.`))try{await pb(Fe.toString()),console.log(`Property ${Fe} deleted successfully`),D(),ee(),window.dispatchEvent(new CustomEvent("propertyDeleted",{detail:{propertyId:Fe,propertyName:st}}))}catch(dt){console.error("Error deleting property:",dt),alert("Failed to delete property. Please try again.")}},Ee=Fe=>{F(Fe),E(!0)},me=async Fe=>{if(window.confirm(`Are you sure you want to delete owner "${Fe.name}"? This will also remove all their associated properties.`))try{await W0(Fe._id),xr.success(`Owner "${Fe.name}" deleted successfully`),await ee()}catch(st){console.error("Error deleting owner:",st),xr.error(st.message||"Failed to delete owner")}},De=Fe=>{q(Fe),K(!0)},Ze=Fe=>{J(Fe),ie(!0)},Te=async Fe=>{if(U)try{await cb(U._id,{name:Fe.name,email:Fe.email,phone:Fe.phone,password:Fe.password}),console.log(`Accountant ${U.name} basic info updated successfully`),Fe.assignedProperties!==void 0&&(await db(U._id,Fe.assignedProperties),console.log(`Accountant ${U.name} property assignments updated successfully`)),ee(),ie(!1),J(null)}catch(st){console.error("Error updating accountant:",st),alert("Failed to update accountant. Please try again.")}},de=async Fe=>{if(window.confirm(`Are you sure you want to delete "${Fe.name}"? This action cannot be undone and will remove them from all assigned properties.`))try{await hb(Fe._id),console.log(`Accountant ${Fe.name} deleted successfully`),ee()}catch(st){console.error("Error deleting accountant:",st),alert("Failed to delete accountant. Please try again.")}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Admin Dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-lg border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 to-black bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",e.jsx("span",{className:"font-semibold text-black",children:t?.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:Fe=>$(Fe.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Owners"}),e.jsx("option",{value:"admin",children:"Admin"}),a.map(Fe=>e.jsx("option",{value:Fe._id,children:Fe.name},Fe._id))]}),e.jsx(_f,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:v,onChange:Fe=>N(Fe.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Accountants"}),l.map(Fe=>e.jsx("option",{value:Fe._id,children:Fe.name},Fe._id))]}),e.jsx(_f,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] hover:from-[#0284c7] hover:to-[#0369a1] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0ea5e9]",children:[e.jsx(sa,{className:"h-3 w-3 mr-1"}),"Add User"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] rounded-lg flex items-center justify-center",children:e.jsx(ra,{className:"h-4 w-4 text-white"})})}),e.jsx("div",{className:"ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Owners"}),e.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:r?.totalOwners||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#8b5cf6] to-[#7c3aed] rounded-lg flex items-center justify-center",children:e.jsx(ra,{className:"h-4 w-4 text-white"})})}),e.jsx("div",{className:"ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Accountants"}),e.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:r?.totalAccountants||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#10b981] to-[#059669] rounded-lg flex items-center justify-center",children:e.jsx(mn,{className:"h-4 w-4 text-white"})})}),e.jsx("div",{className:"ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Total Properties"}),e.jsx("dd",{className:"text-lg font-bold text-gray-900 mt-1",children:r?.totalProperties||0})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#f97316] to-[#ea580c] rounded-lg flex items-center justify-center",children:e.jsx(gi,{className:"h-4 w-4 text-white"})})}),e.jsx("div",{className:"ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs font-semibold text-gray-600 truncate uppercase tracking-wide",children:"Current View"}),e.jsxs("dd",{className:"text-sm font-bold text-gray-900 mt-1",children:[W()," | ",ne()]})]})})]})})})]}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Owners Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage property owners and their company information"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] hover:from-[#0284c7] hover:to-[#0369a1] text-white px-3 py-1.5 rounded-md flex items-center gap-1 transition-all duration-300 text-sm shadow-md hover:shadow-lg",children:[e.jsx(sa,{className:"h-3 w-3"}),"Add Owner"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Companies"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(Fe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Fe.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Fe.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Fe.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Fe.role==="owner"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:Fe.role==="owner"?"Owner":"Accountant"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[Fe.companies?.length||0," ",(Fe.companies?.length||0)!==1?"companies":"company"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Fe.isVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Fe.isVerified?"Verified":"Pending"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Ee(Fe),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>me(Fe),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Fe._id))})]}),a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ra,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No owners found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first property owner."}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors mx-auto",children:[e.jsx(sa,{className:"h-4 w-4"}),"Add Owner"]})]})]})]})}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Properties (",W(),")"]}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor your property portfolio"})]}),e.jsxs("button",{onClick:()=>se(!0),className:"inline-flex items-center px-4 py-3 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] hover:from-[#1d4ed8] hover:to-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2563eb] shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(sa,{className:"h-5 w-5 mr-2"}),"Add Property"]})]}),u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mn,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new property."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(Fe=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Fe.isAdminOwned?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:Fe.isAdminOwned?"Admin Owned":"Owner Owned"})}),e.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-1",children:Fe.name||Fe.title||"Unnamed Property"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),"ID: ",Fe.id||Fe._id]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ra,{className:"h-4 w-4 mr-1"}),Fe.isAdminOwned?"Admin":Fe.owner?.name||"Unassigned"]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsx("button",{onClick:()=>Q(Fe),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Property Details",children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ue(Fe),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Property",children:e.jsx(_l,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>xe(Fe.id||Fe._id,Fe.name||Fe.title||"Unnamed Property"),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Property",children:e.jsx(zu,{className:"h-4 w-4"})})]})]},Fe._id))})]})}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 mb-8",children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Accountants (",ne(),")"]}),e.jsx("p",{className:"text-gray-600",children:"Manage accountant access and property assignments"})]})}),H().length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ra,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No accountants"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new accountant."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H().map(Fe=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Accountant"})}),e.jsx("div",{className:"flex justify-between items-start mb-4 pr-20",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:Fe.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),Fe.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),Fe.phone||"Phone not provided"]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsx("button",{onClick:()=>De(Fe),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Accountant Details",children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ze(Fe),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Edit Accountant",children:e.jsx(_l,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>de(Fe),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Accountant",children:e.jsx(zu,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Assigned Properties"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:Fe.assignedPropertiesCount})]}),Fe.assignedProperties.length>0&&e.jsxs("div",{className:"space-y-2",children:[Fe.assignedProperties.slice(0,3).map(st=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:st.name})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",st.id]})]},st._id)),Fe.assignedProperties.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 italic text-center py-1",children:["+",Fe.assignedProperties.length-3," more properties"]})]})]})]},Fe._id))})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Property"}),e.jsx("button",{onClick:()=>se(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsx(gA,{owners:a,onSuccess:()=>{se(!1),D()},onCancel:()=>se(!1)})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New User"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsx(mA,{onSuccess:()=>{S(!1),ee()},onCancel:()=>S(!1)})]})})}),X&&I&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Accountant Details"}),e.jsx("button",{onClick:()=>{K(!1),q(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:I.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Properties"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[I.assignedPropertiesCount," properties"]})]}),I.assignedProperties.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property List"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:I.assignedProperties.map(Fe=>e.jsxs("div",{className:"px-3 py-1 bg-blue-50 border border-blue-200 rounded text-sm",children:[Fe.name," (ID: ",Fe.id,")"]},Fe._id))})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsx("button",{onClick:()=>{K(!1),q(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),Y&&U&&e.jsx(xA,{accountant:U,availableProperties:u,onUpdate:Te,onCancel:()=>{ie(!1),J(null)}}),L&&P&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Owner"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsx(pA,{owner:P,onSuccess:()=>{E(!1),F(null),ee()},onCancel:()=>{E(!1),F(null)}})]})})}),be&&T&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Property Details"}),e.jsx("button",{onClick:()=>{ge(!1),re(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.name||T.title||"Unnamed Property"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property ID"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.id||T._id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.isAdminOwned?"Admin":T.owner?.name||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.type||"Not specified"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.bedrooms||"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.bathrooms||"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Guests"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.maxGuests||"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:T.status||"Active"})]}),T.images&&T.images.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:[T.images.length," image(s)"]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsx("button",{onClick:()=>{ge(!1),re(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})]})})}),e.jsx("div",{className:"bg-white shadow rounded-lg mt-6","data-property-management":!0,children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("h3",{className:"text-base leading-6 font-medium text-gray-900",children:["Full Properties Management (",W(),")"]})}),e.jsx(wv,{filteredProperties:u,onPropertyUpdate:D,owners:a})]})})]}),fe&&e.jsx(fA,{onClose:()=>Se(!1)})]})},bA=()=>{const[t,r]=R.useState([]),[s,a]=R.useState(!0),[o,l]=R.useState(!1),[d,u]=R.useState(null),[h,m]=R.useState({name:"",email:"",phone:"",role:"owner",password:""}),[p,v]=R.useState(!1),[N,y]=R.useState(!1),[A,C]=R.useState(null),[S,L]=R.useState([]),[E,P]=R.useState("");R.useEffect(()=>{F()},[]);const F=async()=>{try{a(!0);const I=await sm();r(I)}catch(I){console.error("Error fetching owners:",I)}finally{a(!1)}},O=async I=>{I.preventDefault();try{d?await fb(d._id,h):await H0(h),await F(),l(!1),u(null),m({name:"",email:"",phone:"",role:"owner",password:""})}catch(q){console.error("Error saving owner:",q)}},se=I=>{u(I),m({name:I.name,email:I.email,phone:I.phone||"",role:I.role,password:""}),l(!0)},X=async I=>{if(window.confirm("Are you sure you want to delete this owner?"))try{await W0(I),await F()}catch(q){console.error("Error deleting owner:",q)}},K=async I=>{try{const q=await Qu();L(q),C(I),y(!0)}catch(q){console.error("Error fetching properties:",q)}},Y=async()=>{if(!(!A||!E))try{await mb(A._id,parseInt(E)),y(!1),C(null),P(""),await F()}catch(I){console.error("Error assigning property:",I)}},ie=()=>{l(!1),u(null),m({name:"",email:"",phone:"",role:"owner",hostkitApiKey:"",hostkitApiSecret:""})};return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Loading Owner Management..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Owner Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage property owners and their API credentials"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#0ea5e9] to-[#0284c7] hover:from-[#0284c7] hover:to-[#0369a1] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0ea5e9]",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Add Owner"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"API Keys"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ro,{className:"h-5 w-5 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",I._id.slice(-8)]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[e.jsx(Cl,{className:"h-4 w-4 mr-2 text-gray-400"}),I.email]}),I.phone&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[e.jsx(M0,{className:"h-4 w-4 mr-2 text-gray-400"}),I.phone]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.role==="admin"?"bg-purple-100 text-purple-800":I.role==="owner"?"bg-green-100 text-green-800":I.role==="accountant"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx(qs,{className:"h-3 w-3 mr-1"}),I.role]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:I.hasApiKeys?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(R3,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Configured"})]}):e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(as,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Not Set"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:I.isVerified?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx($s,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Verified"})]}):e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(kl,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Pending"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>se(I),className:"text-green-600 hover:text-green-900",title:"Edit Owner",children:e.jsx(_l,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K(I),className:"text-blue-600 hover:text-blue-900",title:"Assign Property",children:e.jsx(mn,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>X(I._id),className:"text-red-600 hover:text-red-900",title:"Delete Owner",children:e.jsx(zu,{className:"h-4 w-4"})})]})})]},I._id))})]})})})})}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d?"Edit Owner":"Add New Owner"}),e.jsx("button",{onClick:ie,className:"text-gray-400 hover:text-gray-600",children:e.jsx(kl,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:I=>m({...h,name:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:h.email,onChange:I=>m({...h,email:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone (Optional)"}),e.jsx("input",{type:"tel",value:h.phone,onChange:I=>m({...h,phone:I.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",d?"(Leave blank to keep current)":"*"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:h.password,onChange:I=>m({...h,password:I.target.value}),className:"mt-1 block w-full pr-12 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:d?"Enter new password (optional)":"Enter password",required:!d}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!p),children:p?e.jsx(Oo,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Vs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:ie,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:d?"Update Owner":"Create Owner"})]})]})]})})}),N&&A&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Assign Property to ",A.name]}),e.jsx("button",{onClick:()=>{y(!1),C(null),P("")},className:"text-gray-400 hover:text-gray-600",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Property"}),e.jsxs("select",{value:E,onChange:I=>P(I.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Choose a property..."}),S.map(I=>e.jsxs("option",{value:I._id,children:[I.name," (ID: ",I.id,")"]},I._id))]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),C(null),P("")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),e.jsxs("button",{onClick:Y,disabled:!E,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(U3,{className:"h-4 w-4 mr-2 inline"}),"Assign Property"]})]})]})]})})})]})},vA=({children:t,roles:r})=>{const{isAuthenticated:s,user:a}=Bt(o=>o.auth);return s?r&&a&&!r.includes(a.role)?e.jsx(zi,{to:"/dashboard/owner",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(zi,{to:"/auth/login",replace:!0})};function wA(){const t=Hs(),{isAuthenticated:r,isLoading:s,user:a}=Bt(o=>o.auth);return R.useEffect(()=>{r&&!a&&t(Su())},[t,r,a]),s&&r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(vc,{size:"lg"})}):e.jsx(C3,{children:e.jsxs(Jw,{children:[e.jsxs(rr,{path:"/auth/*",element:e.jsx(Z3,{}),children:[e.jsx(rr,{path:"login",element:e.jsx(S6,{})}),e.jsx(rr,{path:"signup",element:e.jsx(A6,{})}),e.jsx(rr,{path:"forgot-password",element:e.jsx(C6,{})}),e.jsx(rr,{path:"reset-password",element:e.jsx(P6,{})}),e.jsx(rr,{index:!0,element:e.jsx(zi,{to:"/auth/login",replace:!0})})]}),e.jsxs(rr,{path:"/*",element:e.jsx(vA,{children:e.jsx(X3,{})}),children:[e.jsx(rr,{index:!0,element:e.jsx(zi,{to:"/dashboard/owner",replace:!0})}),e.jsx(rr,{path:"dashboard",element:e.jsx(zi,{to:"/dashboard/owner",replace:!0})}),e.jsx(rr,{path:"dashboard/owner",element:e.jsx(py,{})}),e.jsx(rr,{path:"dashboard/accountant",element:e.jsx(py,{})}),e.jsx(rr,{path:"admin/dashboard",element:e.jsx(yA,{})}),e.jsx(rr,{path:"admin/owners",element:e.jsx(bA,{})}),e.jsx(rr,{path:"bookings",element:e.jsx(G6,{})}),e.jsx(rr,{path:"bookings/:bookingId",element:e.jsx(xy,{})}),e.jsx(rr,{path:"invoices",element:e.jsx(J6,{})}),e.jsx(rr,{path:"tourist-tax",element:e.jsx(q8,{})}),e.jsx(rr,{path:"tourist-tax/booking/:reservationId",element:e.jsx(xy,{})}),e.jsx(rr,{path:"siba",element:e.jsx(V8,{})}),e.jsx(rr,{path:"siba-manager",element:e.jsx(H8,{})}),e.jsx(rr,{path:"saft",element:e.jsx(dA,{})}),e.jsx(rr,{path:"property/:propertyId",element:e.jsx(hA,{})}),e.jsx(rr,{path:"property-management",element:e.jsx(W8,{})}),e.jsx(rr,{path:"calendar",element:e.jsx(Q8,{})}),e.jsx(rr,{path:"performance/:propertyId?",element:e.jsx(eA,{})}),e.jsx(rr,{path:"portfolio",element:e.jsx(tA,{})}),e.jsx(rr,{path:"credit-notes",element:e.jsx(rA,{})}),e.jsx(rr,{path:"expenses",element:e.jsx(sA,{})}),e.jsx(rr,{path:"reviews",element:e.jsx(nA,{})}),e.jsx(rr,{path:"owner-statements",element:e.jsx(aA,{})}),e.jsx(rr,{path:"profile",element:e.jsx(oA,{})}),e.jsx(rr,{path:"settings",element:e.jsx(iA,{})}),e.jsx(rr,{path:"advanced-calendar",element:e.jsx(lA,{})}),e.jsx(rr,{path:"automations",element:e.jsx(cA,{})}),e.jsx(rr,{path:"properties",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Properties"}),e.jsx("p",{children:"Coming soon..."})]})})]}),e.jsx(rr,{path:"/",element:r&&a?e.jsx(zi,{to:"/dashboard/owner",replace:!0}):e.jsx(zi,{to:"/auth/login",replace:!0})}),e.jsx(rr,{path:"*",element:r&&a?e.jsx(zi,{to:"/dashboard/owner",replace:!0}):e.jsx(zi,{to:"/auth/login",replace:!0})})]})})}const NA={notifications:[{id:"1",title:"New Booking",message:"New booking for Piece of Heaven from John Doe",type:"success",timestamp:new Date().toISOString(),read:!1,actionUrl:"/bookings",actionLabel:"View Details"},{id:"2",title:"SIBA Reminder",message:"SIBA submission required for Lote 8 4-B",type:"warning",timestamp:new Date(Date.now()-36e5).toISOString(),read:!1,actionUrl:"/siba",actionLabel:"Submit Now"}],unreadCount:2},Nv=Mo({name:"notifications",initialState:NA,reducers:{addNotification:(t,r)=>{const s={...r.payload,id:Date.now().toString(),timestamp:new Date().toISOString()};t.notifications.unshift(s),s.read||(t.unreadCount+=1)},markAsRead:(t,r)=>{const s=t.notifications.find(a=>a.id===r.payload);s&&!s.read&&(s.read=!0,t.unreadCount=Math.max(0,t.unreadCount-1))},markAllAsRead:t=>{t.notifications.forEach(r=>{r.read=!0}),t.unreadCount=0},removeNotification:(t,r)=>{const s=t.notifications.findIndex(a=>a.id===r.payload);s!==-1&&(t.notifications[s].read||(t.unreadCount=Math.max(0,t.unreadCount-1)),t.notifications.splice(s,1))}}}),{addNotification:e7,markAsRead:t7,markAllAsRead:r7,removeNotification:s7}=Nv.actions,jA=Nv.reducer,SA=wj({reducer:{auth:k3,properties:F6,propertyManagement:D6,bookings:B6,invoices:Y6,touristTax:U8,siba:$8,sibaManager:H6,notifications:jA},middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),kA=new tw({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:300*1e3}}});u5.createRoot(document.getElementById("root")).render(e.jsx(zn.StrictMode,{children:e.jsx(P5,{store:SA,children:e.jsx(sw,{client:kA,children:e.jsxs(nN,{children:[e.jsx(wA,{}),e.jsx(YN,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb",borderRadius:"0.75rem"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}));export{Ar as _,Ft as a,AA as c,D1 as g};
